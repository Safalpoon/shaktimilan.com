(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2320:function(t,e,n){t.exports={}},2365:function(t,e,n){t.exports={}},2366:function(t,e,n){t.exports={}},2367:function(t,e,n){t.exports={}},2398:function(t,e,n){t.exports={}},2968:function(t,e,n){t.exports={}},3411:function(t,e,n){"use strict";n.r(e);n(199),n(49),n(24);var o={name:"StarFlow",props:{zIndex:{type:Number,default:10}},data:function(){return{canvas:null,ctx:null,stars:[],maxStars:10,animationId:null,width:0,height:0}},mounted:function(){this.initCanvas(),this.createStars(),this.animate(),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.animationId&&cancelAnimationFrame(this.animationId)},methods:{initCanvas:function(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.setCanvasSize()},setCanvasSize:function(){var t=this.canvas.parentElement;this.width=t.clientWidth,this.height=t.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height},handleResize:function(){this.setCanvasSize(),this.stars=[],this.createStars()},createStars:function(){for(;this.stars.length<this.maxStars;)this.createStar()},createStar:function(){var t={x:Math.random()*this.width,y:Math.random()*this.height,size:1,speed:.1,angle:Math.random()*Math.PI*2,opacity:.5*Math.random()+.5,distance:0,maxDistance:200*Math.random()+100};this.stars.push(t)},animate:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var i=this.stars.length-1;i>=0;i--){var t=this.stars[i];t.x+=Math.cos(t.angle)*t.speed,t.y+=Math.sin(t.angle)*t.speed,t.distance+=t.speed;var e=t.x<0||t.x>this.width||t.y<0||t.y>this.height,n=t.distance>t.maxDistance;e||n?(this.stars.splice(i,1),this.createStar()):(this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fillStyle="rgba(255, 255, 255, ".concat(t.opacity,")"),this.ctx.fill())}this.animationId=requestAnimationFrame(this.animate)}}},c=(n(5551),n(0)),component=Object(c.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"star-flow"},[t("canvas",{ref:"canvas"})])}),[],!1,null,"bbb8fbb4",null);e.default=component.exports},429:function(t,e,n){"use strict";n.r(e);n(31),n(18);var o=n(14),c=n(2),l=(n(2396),n(47),n(960)),r=n.n(l),h=(n(19),n(11),n(6),n(24),n(12),n(13),n(8),n(7),n(4),n(26),n(526)),d=n(58),v=n(1),f=n(25),m=n(1183);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var w={13:{operation:"click_rating_star",behavior_info:"on_comfyui_detail_page"},2:{operation:"click_rating",behavior_info:"on_model_rating"}},y={components:{ElDrawer:r.a,RatingReview:m.default},data:function(){return{drawer:!1,score:0,list:[],offset:void 0,page:1,debounceHandleScroll:null,loading:!1}},props:{evaluateData:{type:Object,default:function(){return{stat:{},interaction:{}}}},width:{type:String,default:"410px"},title:{type:String,default:"rtl"},obj_type:{type:Number,default:13},from:{type:String,default:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(v.c)("user",["isLoggedIn","userInfo"])),watch:{evaluateData:{handler:function(t){null!=t&&t.id&&this.getList()}}},mounted:function(){var t;this.score=(null===(t=this.evaluateData)||void 0===t||null===(t=t.interaction)||void 0===t?void 0:t.rating)||0,this.debounceHandleScroll=Object(f.debounce)(this.handleScroll,600)},beforeDestroy:function(){this.debounceHandleScroll=null},methods:{handleClose:function(t){t()},handleScore:function(){this.drawer=!0,"comfyuiAppDetail"==this.from?this.$logEvent("log_actions",{operation:"click_rating_button",behavior_info:"on_comfyui_app_page"}):this.$logEvent("log_actions",{operation:w[this.obj_type].operation,behavior_info:w[this.obj_type].behavior_info})},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.getList()}catch(t){}},changeRate:function(t){var e,n=this;if(!this.isLoggedIn)return this.$EventBus.$emit("openLoginDialog"),void(this.score=0);"comfyuiAppDetail"==this.from&&this.$logEvent("log_actions",{operation:"click_stars",behavior_info:"on_comfyui_app_page"}),Object(h.a)({obj_account_id:null===(e=this.userInfo)||void 0===e?void 0:e.id,obj_id:this.evaluateData.id,obj_type:this.obj_type,rating:t}).then((function(t){1e4===t.status.code&&(n.$message.success(n.$t("evaluate_success")),setTimeout((function(){n.getList(!0)}),500))}))},handleDate:function(t){return Object(d.d)(t,Date.now())},getList:function(t){var e=this;this.loading||(this.loading=!0,t&&(this.list=[],this.page=1,this.offset=void 0),Object(h.b)({obj_id:this.evaluateData.id,obj_type:this.obj_type,offset:this.offset,page:this.page++,page_size:30}).then((function(t){t.data&&(e.offset=t.data.offset,e.list=[].concat(Object(o.a)(e.list),Object(o.a)(t.data.items)))})).finally((function(){e.loading=!1})))}}},k=y,C=(n(4961),n(0)),component=Object(C.a)(k,(function(){var t,e=this,n=e._self._c;return e.evaluateData.stat?n("div",{staticClass:"Evaluate"},[n("div",{staticClass:"score-box",on:{click:e.handleScore}},[n("div",{staticClass:"score"},[n("el-rate",{attrs:{disabled:""},model:{value:e.evaluateData.stat.rating,callback:function(t){e.$set(e.evaluateData.stat,"rating",t)},expression:"evaluateData.stat.rating"}}),e._v(" "),n("span",{staticClass:"fraction"},[e._v(e._s((null===(t=e.evaluateData.stat)||void 0===t?void 0:t.rating)||0))]),e._v(" "),n("div",{staticClass:"mask"})],1)]),e._v(" "),n("div",{staticClass:"content"},[n("el-drawer",{attrs:{title:e.$t("comfyui_evaluate"),visible:e.drawer,direction:e.title,size:e.width,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[[n("div",{staticClass:"score-play"},[n("el-rate",{attrs:{"void-icon-class":"el-icon-star-on",colors:["#FFC224","#FFC224","#FF9900"]},on:{change:e.changeRate},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"scrollWrapper",staticClass:"user-score",on:{scroll:e.handleScroll}},e._l(e.list,(function(t,o){var c,l,r,h;return n("div",{key:o,staticClass:"list"},[n("el-rate",{attrs:{"void-icon-class":"el-icon-star-on",disabled:"",colors:["#FFC224","#FFC224","#FFC224"],"score-template":String(t.rating)},model:{value:t.rating,callback:function(n){e.$set(t,"rating",n)},expression:"item.rating"}}),e._v(" "),n("div",{staticClass:"info"},[null!==(c=t.account)&&void 0!==c&&c.head?n("img",{staticClass:"avatar",attrs:{src:null===(r=t.account)||void 0===r?void 0:r.head}}):n("div",{staticClass:"avatar-name"},[e._v("\n                "+e._s(null===(l=t.account)||void 0===l?void 0:l.name.slice(0,1).toUpperCase())+"\n              ")]),e._v(" "),n("div",{staticClass:"info-detail"},[n("span",{staticClass:"name"},[e._v(e._s(null===(h=t.account)||void 0===h?void 0:h.name))]),e._v(" "),n("span",{staticClass:"date"},[e._v(e._s(e.handleDate(null==t?void 0:t.update_at)))])])])],1)})),0)]],2)],1)]):e._e()}),[],!1,null,"684cf7a4",null);e.default=component.exports;installComponents(component,{RatingReview:n(1183).default})},4882:function(t,e,n){"use strict";n(2320)},4929:function(t,e,n){"use strict";n(2365)},4930:function(t,e,n){"use strict";n(2366)},4931:function(t,e,n){"use strict";n(2367)},4961:function(t,e,n){"use strict";n(2398)},5551:function(t,e,n){"use strict";n(2968)},570:function(t,e,n){"use strict";n.r(e);n(16),n(24);var o={name:"EllipsisTooltip",props:{value:{type:String,default:""},iconPosition:{type:String,default:"none",validator:function(t){return["left","right","none"].includes(t)}},iconSize:{type:String,default:"16px"},asyncClose:{type:Boolean,default:!1},itemKey:{type:[String,Number],default:null},editingKey:{type:[String,Number,null],default:null},required:{type:Boolean,default:!0},requiredMsg:{type:String,default:""}},data:function(){return{isOverflow:!1,isEditing:!1,cacheValue:""}},computed:{innerValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{value:{handler:function(){this.updateOverflow()},immediate:!0},editingKey:function(t){null!=this.itemKey&&this.isEditing&&t!==this.itemKey&&(this.$emit("input",this.cacheValue),this.isEditing=!1,this.updateOverflow())}},methods:{updateOverflow:function(){var t=this;this.isEditing||this.$nextTick((function(){var e=t.$refs.container.querySelector(".inner-text");e&&(t.isOverflow=e.scrollWidth>e.clientWidth)}))},handleEdit:function(){var t=this;if(!this.isEditing)return this.cacheValue=this.value,null!=this.itemKey&&this.$emit("update:editingKey",this.itemKey),void(this.isEditing=!0);!this.required||this.innerValue?this.asyncClose?this.$emit("confirm",this.innerValue,(function(){t.isEditing=!1,t.updateOverflow()})):(this.$emit("confirm",this.innerValue),this.isEditing=!1,this.updateOverflow()):this.$message.warning(this.requiredMsg||this.$t("pleaseEnte"))}}},c=(n(4882),n(0)),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"ellipsis-text"},["left"===t.iconPosition?e("i",{class:["iconfont",t.isEditing?"icon-gou":"icon-edit-03"],style:{fontSize:t.iconSize},on:{click:t.handleEdit}}):t._e(),t._v(" "),e("div",{staticClass:"content"},[t.isEditing?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],attrs:{type:"text"},domProps:{value:t.innerValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleEdit.apply(null,arguments)},input:function(e){e.target.composing||(t.innerValue=e.target.value)}}},"input",t.$attrs,!1)):[t.isOverflow?e("el-tooltip",{attrs:{content:t.innerValue||"-","popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[e("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.innerValue||"-"))]),t._v(" "),e("div",{staticClass:"inner-text overflow-ellipsis"},[t._v(t._s(t.innerValue||"-"))])]):e("div",{staticClass:"inner-text"},[t._v(t._s(t.innerValue||"-"))])]],2),t._v(" "),"right"===t.iconPosition?e("i",{class:["iconfont",t.isEditing?"icon-gou":"icon-edit-03"],style:{fontSize:t.iconSize},on:{click:t.handleEdit}}):t._e()])}),[],!1,null,"317370ca",null);e.default=component.exports},574:function(t,e,n){"use strict";n.r(e);n(16),n(18),n(28),n(21),n(151);var o=n(3),c=n(2),l=(n(1877),n(47),n(816)),r=n.n(l),h=(n(20),n(6),n(31),n(49),n(11),n(24),n(12),n(13),n(8),n(4),n(7),n(26),n(10)),d=n(27),v=n(35),f=n.n(v),m=n(1),_=n(45),w=n(249),y=n(85),k=n(210),C=n(54),$=n(9);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={mixins:[_.a],components:{CollectionCreate:w.default,auditDialog:k.a,ElDatePicker:r.a},props:{isOpen:{type:Boolean,default:!0},account_no:{type:String,default:""},title:{type:String,default:""},type:{type:String,default:"artwork"},checkList:{type:Object,default:function(){return{ids:[],collectIds:[]}}},editShow:{type:Boolean,default:!0},backShow:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!0},showFilter:{type:Boolean,default:!0},listLenth:{type:Number,default:0},titleSize:{type:Number,default:20},threshold:{type:Number,default:0},category:{type:Boolean,default:!0},isScreen:{type:Boolean,default:!1},collectionDetail:{type:Boolean,default:!1}},data:function(){return{replaceImageType:h.K,isSticky:!1,batchLoading:!1,isCheck:!1,openEdit:!1,openPost:!1,dialogVisible:!1,onloading:!1,isLoding:!1,inputBorderShow:!1,isCheckAll:!1,fromPath:"",keyword:"",Wh:"inherit",folderlist:[],createShow:!1,isTiemRow:!1,AworkBnt:this.$t("All"),titleBarData:{workType:[],searchKeyword:"",start_at:0,end_at:0},times:"",btnLoading:!1,orders:["New","Hot"],activeOrder:"New",activeType:"artwork",selectedStatus:[],status:[{key:"createSetting1",value:1},{key:"createSetting2",value:2}]}},computed:x(x(x(x({},Object(m.e)("user",["userInfo"])),Object(m.e)("payment",["paymentInfo"])),Object(m.c)("user",["isCompanyAccount"])),{},{types:function(){var t=[{name:this.$t("Explore"),value:"artwork"},{name:this.$t("AIModel"),value:"model"},{name:this.$t("digitalHuman"),value:"character"},{name:this.$t("AIAudio"),value:"ai_audio"},{name:this.$t("Post"),value:"post"},{name:this.$t("Canvas"),value:"palette"},{name:this.$t("Swtft_App"),value:"swtft_app"},{name:this.$t("WorkFlow"),value:"workflow"},{name:this.$t("aiNovelName"),value:"ai_novel"}];return this.$isChinaSite&&t.splice(2,2),t},isShowTimeRow:function(){return!this.account_no&&["artwork","model"].includes(this.type)},btnArr:function(){return[{key:"createFilm",icon:"icon-Film-selected",show:this.category&&this.listLenth>0&&2!=this.titleBarData.workType&&!this.account_no},{key:"Post",icon:"icon-myPostIcon",show:this.category&&this.listLenth>0&&2!=this.titleBarData.workType&&!this.account_no},{key:"collectCreate7",icon:"icon-tupianji",show:!0},{key:"Download",icon:"icon-icon-Download",show:"artwork"===this.type},{key:"createSetting2",icon:"icon-icon-private",show:this.isVip&&1===this.selectedStatus.length&&this.selectedStatus.includes(1)},{key:"createSetting1",icon:"icon-icon-public",show:1===this.selectedStatus.length&&this.selectedStatus.includes(2)},{key:"Delete",icon:"icon-moveDelete",show:!0},{key:"Cancel",icon:"icon-round-wrong",show:!0}]},getHeight:function(){var t=36==this.titleSize?144:123;return this.isCheck&&(t+=60),{height:t+"px"}},getTitleStyle:function(){var t=36==this.titleSize?144:123;return this.isCheck&&(t+=60),{width:this.Wh,height:t+"px"}},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},filteredList:function(){var t=this;return this.folderlist.filter((function(e){return e.name.includes(t.keyword)&&"all"!=e.id&&"default"!=e.id&&e.name!==t.$route.query.name}))},checkIsShowViewNsfw:function(){var t;return null==this||null===(t=this.userInfo)||void 0===t?void 0:t.enable_nsfw_plus},enableNsfwMode:function(){var t;return![2,"2"].includes(null==this||null===(t=this.userInfo)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.nsfw_plus)},workBntList:function(){var t=[{label:this.$t("All"),value:[]},{label:this.$t("Grid"),value:[2]},{label:this.$t("Upscale"),value:[1,3]},{label:this.$t("ManualSave"),value:[4,6]},{label:this.$t("GIF"),value:[6]}];return this.isCompanyAccount&&(t=t.slice(0,3)),t}}),watch:{isOpen:function(t){var e=this;setTimeout((function(){e.setWh()}),1e3)},openPost:{handler:function(t){t?this.$emit("ImgTypeChange",[2]):this.$emit("ImgTypeChange",[])}},checkList:{handler:function(t){t.ids&&this.listLenth>0&&t.ids.length==this.listLenth?this.isCheckAll=!0:this.isCheckAll=!1},deep:!0},dialogVisible:{handler:function(t){this.keyword="",t?(this.onloading=!0,this.getCollectionList()):this.folderlist=[]}},isCheck:{handler:function(t){this.$emit("changeCheck",t)}}},updated:function(){"inherit"==this.Wh&&this.setWh()},mounted:function(){var t=this;this.setWh(),window.addEventListener("resize",this.setWh),window.addEventListener("scroll",this.onScroll),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",t.setWh),window.removeEventListener("scroll",t.onScroll)}))},beforeRouteEnter:function(t,e,n){n((function(t){t.fromPath=e.path}))},methods:x(x(x({},Object(m.b)("user",["getAccountInfo"])),Object(m.b)("videoEditor",["setSelectedMediaList"])),{},{handleBtnClick:function(t){var e;if(null!==(e=this.checkList)&&void 0!==e&&null!==(e=e.ids)&&void 0!==e&&e.length||"Cancel"==t){switch(this.$logEvent("log_actions",{operation:{Post:"click_batch_post",collectCreate7:"click_batch_organize",Download:"click_batch_download",Delete:"click_batch_delete",Cancel:"click_cancel_button"}[t],behavior_info:this.collectionDetail?"on_collection_detail":"on_personal_center"}),t){case"Post":this.onPost();break;case"Download":this.batchDownload();break;case"Delete":this.onDelete();break;case"Cancel":this.isCheck=!1,this.openPost=!1;break;case"createFilm":this.createFilm();break;case"createSetting2":this.setListStatus(!1);break;case"createSetting1":this.setListStatus(!0)}}},setListStatus:function(t){var e,n,o=this;null!==(e=this.checkList)&&void 0!==e&&null!==(e=e.ids)&&void 0!==e&&e.length&&(this.batchLoading=!0,Object(d.Ab)({ids:null===(n=this.checkList)||void 0===n?void 0:n.ids,is_visible:t}).then((function(t){var e,n,c;1e4===t.status.code?(null===(e=t.data)||void 0===e||null===(e=e.not_operate_ids)||void 0===e?void 0:e.length)>0?o.$message.warning(o.$t("public_msg_error")):o.$message.success(o.$t("SaveSuccess")):$.g[null===(n=t.status)||void 0===n?void 0:n.code]?o.$message.error(o.$t($.g[null===(c=t.status)||void 0===c?void 0:c.code])):o.$message.error(o.$t("ServerError"));setTimeout((function(){o.$emit("changeTitleBar",o.titleBarData),o.batchLoading=!1}),1e3)})).catch((function(t){console.log("err",t),o.batchLoading=!1})))},changeEditBnt:function(){var t=this;this.$logEvent("log_actions",{operation:"click_select",behavior_info:this.collectionDetail?"on_collection_detail":"on_personal_center"}),this.openEdit=!0,this.openPost=!1,this.$nextTick((function(){t.isCheck=!0}))},changePostBnt:function(){var t=this;this.$logEvent("log_actions",{operation:"click_post_picture_button",behavior_info:"on_self_work_quickpost"}),this.openEdit=!1,this.openPost=!0,this.isCheck=!1,this.$nextTick((function(){t.isCheck=!0}))},settingViewNsfw:function(){var t;this.$logEvent("log_actions",{operation:"click_NSFW_on_personalCenter"}),this.btnLoading||(this.enableNsfwMode||1===(null===(t=this.userInfo)||void 0===t?void 0:t.is_audit)?this.applyNsfw():this.$refs.auditDialog.showDialog())},applyNsfw:function(){var t=this;this.btnLoading=!0;var e={};e.nsfw_plus=this.enableNsfwMode?2:1,e.mode=1,e.age_confirm=!0,Object(y.c)(e).then((function(e){var n=(e||{}).status.code;["10000",1e4].includes(void 0===n?"":n)&&(t.$message.success(t.$t(t.enableNsfwMode?"ClosedSuccessfully":"OpenedSuccessfully")),t.btnLoading=!1,t.getAccountInfo())})).finally((function(){t.btnLoading=!1}))},downloadValidate:function(){var t,e;return!(null===(t=this.checkList)||void 0===t||null===(t=t.ids)||void 0===t||!t.length)&&(this.isVip||this.isCompanyAccount?(null===(e=this.checkList)||void 0===e||null===(e=e.ids)||void 0===e?void 0:e.length)>50?(this.$message.warning(this.$t("batchDownloadLimitNum",{num:50})),!1):!this.batchLoading:(this.$EventBus.$emit("showBreakDialog","DownloadLimitTipWeb","basic"),!1))},batchDownload:function(){var t=this;this.downloadValidate()&&(this.batchLoading=!0,Object(d.f)({artwork_ids:this.checkList.ids}).then((function(e){var n=e.data.task_id;t.loopCallDownload(n)})).catch((function(e){t.batchLoading=!1})))},loopCallDownload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){var o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.f)({task_id:t,artwork_ids:e.checkList.ids});case 3:o=n.sent,l=o.data.url,e.batchLoading=!1,l&&(clearInterval(c),e.downloadFile(l)),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),clearInterval(c),e.batchLoading=!1,console.log("error",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,9]])}))),3e3);case 2:case"end":return n.stop()}}),n)})))()},downloadFile:function(t){var link=document.createElement("a");link.href=t,link.click()},setTiemRow:function(){this.isTiemRow=!this.isTiemRow,0!=this.titleBarData.start_at&&0!=this.titleBarData.end_at&&(this.times="",this.setCheckTime(null)),this.$emit("changeTiemRow",this.isTiemRow)},setWorkType:function(t){this.titleBarData.workType=t,this.$emit("changeTitleBar",this.titleBarData)},handleOrder:function(t){this.activeOrder=t;this.$emit("changeTitleBar",{order_by:{New:"new",Hot:"hot"}[t]})},handleType:function(t){var label=t.label,e=t.value;this.AworkBnt=label,this.setWorkType(e)},handleStatus:function(t){var e;this.selectedStatus.includes(t)?this.selectedStatus=this.selectedStatus.filter((function(e){return e!==t})):this.selectedStatus.push(t),e=[0,2].includes(this.selectedStatus.length)?0:this.selectedStatus[0],this.$emit("changeTitleBar",{publish_status:e})},handleCollectType:function(t){this.$logEvent("log_actions",{operation:"click_select",behavior_info:"on_personal_center",behavior_info_sub:t}),this.activeType=t,this.$EventBus.$emit("changeCollectType",t)},filterReset:function(){this.activeOrder="New",this.AworkBnt=this.$t("All"),this.activeType="artwork",this.selectedStatus=[],this.category?this.$emit("changeTitleBar",{order_by:"new",workType:[],publish_status:0}):this.$EventBus.$emit("changeCollectType","artwork")},setCheckTime:function(t){t?(this.titleBarData.start_at=t[0],this.titleBarData.end_at=t[1]+86399e3):(this.titleBarData.start_at=0,this.titleBarData.end_at=0),this.$emit("changeTitleBar",this.titleBarData)},newCreate:function(){this.dialogVisible=!1,this.$emit("newCreate")},search:function(t){13===t.which&&this.$emit("changeTitleBar",this.titleBarData)},clear:function(){this.titleBarData.searchKeyword="",this.$emit("changeTitleBar",this.titleBarData)},backTo:function(){window.history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push("/")},onDelete:function(){var t=this;this.$confirm(this.category?this.$t("newPortfolioBatchDelete"):this.$t("collectBatchDelete"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"collectConfirm",type:"warning"}).then((function(){t.unBatchFavorite(t.checkList,t.category,(function(e){t.$emit("editSuccess")}))})).catch((function(){}))},onPost:function(){var t,e=this;if((null===(t=this.checkList)||void 0===t||null===(t=t.ids)||void 0===t?void 0:t.length)>20)this.$message.warning(this.$t("PostImageLimitNum",{num:20}));else{var n=[];this.checkList.ids.forEach((function(t,o){n.push({url:e.checkList.url[o],id:e.checkList.ids[o]})})),this.$EventBus.$emit("openContribution",{selectedData:n,types:[C.CONTRIBUTION_TYPE_ENUM.WORK],source:"self"})}},createFilm:function(){if(this.checkList.ids.length>20)this.$message.warning(this.$t("video_material_$12"));else{var t=this.checkList.info||[];t.length>0&&this.setSelectedMediaList(t),this.$router.push(this.localePath("/video-editor")),this.openEdit=!1,this.isCheck=!1,this.openPost=!1,this.$logEvent("log_actions",{operation:"click_video_edit",behavior_info:"on_personal_center_page"})}},moveCollect:function(t){var e=this,n=t||null;this.isLoding=!0,this.moveFavorite(this.checkList,n,this.category,(function(n){e.$emit("editSuccess"),e.$message.success(e.$t("collectCreate6",{name:null==t?void 0:t.name})),e.isLoding=!1,e.dialogVisible=!1}),(function(t){e.isLoding=!1}))},getCollectionList:function(){var t=this,e={type:{artwork:1,model:2,post:3,palette:4,workflow:5,swtft_app:6,character:7,ai_audio:9,ai_novel:21}[this.type],category:this.category?2:null};Object(d.J)(e).then((function(e){t.onloading=!1;var n=f()(e.data.items);n.forEach((function(element){element.imgList=[];var e={artwork:"artwork_items",model:"model_items",post:"post_items",palette:"tpl_items",comfy:"comfy_ui_items"},n=element[e[t.type]]?element[e[t.type]]:null;if(n){var o={url:1==n.status&&(2==n.primary||n.account_no==t.userInfo.id)&&n.banner&&n.banner.url?n.banner.url:null,nsfw:n.nsfw,id:n.id};element.imgList.push(o)}})),t.folderlist=n}))},setWh:function(){if(this.$refs.cnt){var t=this.$refs.cnt.offsetWidth;this.Wh=0==t?"inherit":this.$refs.cnt.offsetWidth+"px"}},onScroll:function(){var t=this.threshold,e=this.$refs.title,rect=this.$refs.cnt.getBoundingClientRect();if(e){var n="sticky";rect.top<t?(e.classList.add(n),e.style.top=t+"px",this.isSticky=!0):(e.classList.remove(n),e.style.top=null,this.isSticky=!1)}}})},D=(n(4929),n(4930),n(4931),n(0)),component=Object(D.a)(L,(function(){var t,e,n=this,o=n._self._c;return o("div",{ref:"cnt",staticClass:"editTitle",style:n.getHeight},[o("div",{staticClass:"titleCnt",class:{hide:n.isSticky}},[o("div",{staticClass:"titleName"},[n.backShow?o("div",{staticClass:"backIcon",on:{click:function(t){return t.stopPropagation(),n.backTo.apply(null,arguments)}}},[o("i",{staticClass:"el-icon-back"})]):n._e(),n._v(" "),o("span",{staticClass:"txt",style:{fontSize:"".concat(n.titleSize,"px")}},[n._v(n._s(n.title))])])]),n._v(" "),o("div",{ref:"title",staticClass:"title",style:n.getTitleStyle},[o("div",{staticClass:"inputBox"},[o("div",{staticClass:"inputLeft"},[n.showSearch?o("div",{staticClass:"input-search",class:{inputBorder:n.inputBorderShow}},[o("i",{staticClass:"iconfont icon-min-search"}),n._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:n.titleBarData.searchKeyword,expression:"titleBarData.searchKeyword"}],attrs:{type:"text",placeholder:n.$t("minSearch"),maxlength:"40"},domProps:{value:n.titleBarData.searchKeyword},on:{keypress:n.search,focus:function(t){n.inputBorderShow=!0},blur:function(t){n.inputBorderShow=!1},input:function(t){t.target.composing||n.$set(n.titleBarData,"searchKeyword",t.target.value)}}}),n._v(" "),n.titleBarData.searchKeyword.length>0?o("i",{staticClass:"el-icon-close",on:{click:n.clear}}):n._e()]):n._e(),n._v(" "),n.isTiemRow?o("el-date-picker",{attrs:{"popper-class":"checkTIme",type:"daterange","value-format":"timestamp","range-separator":"~","start-placeholder":n.$t("startDate"),"end-placeholder":n.$t("endDate")},on:{change:n.setCheckTime},model:{value:n.times,callback:function(t){n.times=t},expression:"times"}}):n._e()],1),n._v(" "),o("div",{staticClass:"manageGroup"},[o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!n.account_no&&n.category&&n.checkIsShowViewNsfw,expression:"!account_no && category && checkIsShowViewNsfw"}],staticClass:"item",attrs:{effect:"dark",content:n.enableNsfwMode?n.$t("hideAdultContent"):n.$t("showAdultContent"),placement:"top"}},[o("span",{staticClass:"edit nsfw-btn",on:{click:n.settingViewNsfw}},[o("i",{staticClass:"iconfont",class:n.enableNsfwMode?"icon-work-hide":"icon-work-show"})])]),n._v(" "),n.editShow&&"ai_novel"!==n.type&&n.listLenth>0?o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.$t("Manage"),placement:"top"}},[o("div",{staticClass:"edit-btn",class:{active:n.isCheck},on:{click:n.changeEditBnt}},[o("span",[n._v(n._s(n.$t("ManageSelect")))])])]):n._e(),n._v(" "),n.isShowTimeRow?o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.$t("timeline"),placement:"top"}},[o("span",{staticClass:"edit",on:{click:n.setTiemRow}},[o("i",{staticClass:"iconfont",class:n.isTiemRow?"icon-Waterfall":"icon-grid"})])]):n._e(),n._v(" "),n.showFilter?o("el-popover",{attrs:{placement:"bottom","popper-class":"waterfull-filter",trigger:"hover"}},[o("div",{staticClass:"filter-content"},[n.category?o("div",{staticClass:"title"},[n._v(n._s(n.$t("Sorting")))]):n._e(),n._v(" "),n.category?o("div",{staticClass:"filter"},n._l(n.orders,(function(t){return o("div",{key:t,staticClass:"item-filter",class:{active:n.activeOrder==t},on:{click:function(e){return n.handleOrder(t)}}},[n.activeOrder==t?o("i",{staticClass:"el-icon-check"}):n._e(),n._v("\n                "+n._s(n.$t(t))+"\n              ")])})),0):n._e(),n._v(" "),n.category?[o("div",{staticClass:"title"},[n._v(n._s(n.$t("Type")))]),n._v(" "),o("div",{staticClass:"filter"},n._l(n.workBntList,(function(t){return o("div",{key:t.label,staticClass:"item-filter",class:{active:n.AworkBnt==t.label},on:{click:function(e){return n.handleType(t)}}},[n.AworkBnt==t.label?o("i",{staticClass:"el-icon-check"}):n._e(),n._v("\n                  "+n._s(t.label)+"\n                ")])})),0)]:n._e(),n._v(" "),n.category&&!n.account_no?[o("div",{staticClass:"title"},[n._v(n._s(n.$t("status")))]),n._v(" "),o("div",{staticClass:"filter"},n._l(n.status,(function(t){return o("div",{key:t.value,staticClass:"item-filter",class:{active:n.selectedStatus.includes(t.value)},on:{click:function(e){return n.handleStatus(t.value)}}},[n.selectedStatus.includes(t.value)?o("i",{staticClass:"el-icon-check"}):n._e(),n._v("\n                  "+n._s(n.$t(t.key))+"\n                ")])})),0)]:n._e(),n._v(" "),n.category||n.collectionDetail?n._e():[o("div",{staticClass:"title"},[n._v(n._s(n.$t("Type")))]),n._v(" "),o("div",{staticClass:"filter"},n._l(n.types,(function(t){return o("div",{key:t.value,staticClass:"item-filter",class:{active:n.activeType==t.value},on:{click:function(e){return n.handleCollectType(t.value)}}},[n.activeType==t.value?o("i",{staticClass:"el-icon-check"}):n._e(),n._v("\n                  "+n._s(t.name)+"\n                ")])})),0)],n._v(" "),o("div",{staticClass:"filter-reset",on:{click:n.filterReset}},[n._v("\n              "+n._s(n.$t("resetSelection"))+"\n            ")])],2),n._v(" "),o("div",{staticClass:"filter-box",attrs:{slot:"reference"},slot:"reference"},[o("div",[o("i",{staticClass:"iconfont icon-a-filterIcon"}),n._v(" "),o("span",[n._v(n._s(n.$t("Filter")))])]),n._v(" "),o("i",{staticClass:"el-icon-arrow-down"})])]):n._e()],1)]),n._v(" "),n.isCheck&&n.openEdit?o("div",{staticClass:"floating-box"},[o("div",{staticClass:"content"},[o("span",[n._v(n._s(n.$t("NumContentSelected",{num:(null===(t=n.checkList)||void 0===t||null===(t=t.ids)||void 0===t?void 0:t.length)||0})))])]),n._v(" "),o("div",{staticClass:"btn-box",class:{selected:null===(e=n.checkList)||void 0===e||null===(e=e.ids)||void 0===e?void 0:e.length}},[o("div",{staticClass:"item-btn",on:{click:function(t){return n.$emit("checkAll")}}},[o("div",{staticClass:"check-box flex-center"},[o("i",{directives:[{name:"show",rawName:"v-show",value:n.isCheckAll,expression:"isCheckAll"}],staticClass:"el-icon-check"})]),n._v(" "),o("span",[n._v(n._s(n.$t("SelectAll")))])]),n._v(" "),n._l(n.btnArr,(function(t){return o("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],key:t.key,staticClass:"item-btn",on:{click:function(e){return n.handleBtnClick(t.key)}}},["collectCreate7"!=t.key?[o("i",{staticClass:"iconfont",class:t.icon}),n._v(" "),o("span",[n._v(n._s(n.$t(t.key)))])]:[o("el-popover",{attrs:{disabled:!n.checkList.ids||0==n.checkList.ids.length,placement:"bottom-start",width:"309","popper-class":"folderList ".concat(n.createShow?"folderListHide":""),"visible-arrow":!1,title:n.$t("collectCreate7"),trigger:"click"},model:{value:n.dialogVisible,callback:function(t){n.dialogVisible=t},expression:"dialogVisible"}},[o("div",{staticClass:"cltpop-cent"},[o("div",{staticStyle:{padding:"0 10px"}},[o("div",{staticClass:"search"},[o("i",{staticClass:"iconfont icon-folder-search"}),n._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:n.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:n.$t("Search")},domProps:{value:n.keyword},on:{input:function(t){t.target.composing||(n.keyword=t.target.value)}}})]),n._v(" "),o("div",{staticClass:"popTitle"},[n._v(n._s(n.$t(n.category?"collectCreate8":"collectCreate9")))]),n._v(" "),n.onloading?o("div",{directives:[{name:"loading",rawName:"v-loading",value:n.onloading,expression:"onloading"}],staticClass:"loadbox"}):n._e(),n._v(" "),o("div",{staticClass:"list"},n._l(n.filteredList,(function(t,e){return o("div",{key:e,staticClass:"itembox",on:{click:function(e){return n.moveCollect(t)}}},[o("div",{staticClass:"itemboxinfo"},[o("div",{staticClass:"itemboxinfoleft"},[t.imgList&&t.imgList[0]&&t.imgList[0].url?o("img",{attrs:{decoding:"async",loading:"lazy",src:n.replaceImageType(t.imgList[0].url,"high")}}):o("i",{staticClass:"iconfont icon-deff-collect"})]),n._v(" "),o("span",[n._v(n._s(t.name))])]),n._v(" "),o("el-button",{attrs:{loading:n.isLoding}},[n._v(n._s(n.$t("collectCreate7")))])],1)})),0)]),n._v(" "),o("div",{staticClass:"create"},[o("div",{staticClass:"itembox",on:{click:function(t){n.createShow=!0}}},[o("div",{staticClass:"itemboxinfo"},[o("div",{staticClass:"itemboxinfoleft"},[o("i",{staticClass:"el-icon-plus"})]),n._v(" "),o("span",[n._v(n._s(n.$t(n.category?"createPortfolio":"collectBox1")))])])])])]),n._v(" "),o("div",{staticClass:"moveBnt",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"iconfont",class:t.icon}),n._v(" "),o("span",[n._v(n._s(n.$t(t.key)))])])])]],2)}))],2)]):n._e()]),n._v(" "),o("collection-create",{attrs:{category:n.category,width:"718px",checkList:n.checkList,type:n.type},on:{create:n.newCreate},model:{value:n.createShow,callback:function(t){n.createShow=t},expression:"createShow"}}),n._v(" "),o("auditDialog",{ref:"auditDialog",on:{confirm:n.applyNsfw}})],1)}),[],!1,null,"c4a1e2a0",null);e.default=component.exports;installComponents(component,{CollectionCreate:n(249).default})}}]);