(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1244:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var o=function(){var t=this._self._c;this._self._setupProxy;return t("div",{staticClass:"content"})},r=[]},1577:function(t,e,n){t.exports={}},1676:function(t,e,n){t.exports={}},1850:function(t,e,n){t.exports={}},1945:function(t,e,n){t.exports={}},1948:function(t,e,n){t.exports={}},1949:function(t,e,n){t.exports={}},1960:function(t,e,n){t.exports={}},1961:function(t,e,n){t.exports={}},1962:function(t,e,n){t.exports={}},1981:function(t,e,n){t.exports={}},2024:function(t,e,n){t.exports={}},209:function(t,e,n){"use strict";var o=n(3),r=(n(20),n(19),n(4),n(26),n(10)),l={props:{fileName:{type:String,default:""}},data:function(){return{url:"",scale:1,translateX:0,translateY:0,originX:50,originY:50,isShow:!1,dragging:!1,lastX:0,lastY:0,clickTime:0,width:0,height:0,realWidth:0,realHeight:0,initInfo:{width:0,height:0,x:0,y:0}}},computed:{imageStyle:function(){return{transform:"translate3d(".concat(this.translateX,"px, ").concat(this.translateY,"px, 0) scale3d(").concat(this.scale,", ").concat(this.scale,", 1) "),transformOrigin:"".concat(this.originX,"% ").concat(this.originY,"%"),width:this.width+"px",height:this.height+"px"}},imageClass:function(){return{"move-mouse":1!==this.scale}}},mounted:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("keydown",this.handleEscKey)},methods:{handleEscKey:function(t){"Escape"!==t.key&&27!==t.keyCode||this.hide()},handleResize:function(t){2!==this.scale&&this.initFull()},initFull:function(t){var e=window.innerWidth,n=window.innerHeight,o=this.realWidth,r=this.realHeight,l=o/r,c=e,d=n;l>=1?d=(c=o>e?e:o)/l:c=(d=r>n?n:r)*l,this.width=c,this.height=d,this.translateX=(e-c)/2,this.translateY=(n-d)/2},show:function(t,e){var n=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,c,d,v,h,f,m,_,y;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=n.length>2&&void 0!==n[2]?n[2]:1,r.url=t,e&&(c=e.getBoundingClientRect(),d=c.width,v=c.height,h=c.x,f=c.y,r.initInfo={width:d,height:v,x:h,y:f},r.init()),o.next=5,r.getImageSize();case 5:m=o.sent,_=m.width,y=m.height,r.realWidth=_,r.realHeight=y,r.isShow=!0,setTimeout((function(){r.scale=l,r.initFull()}),100);case 12:case"end":return o.stop()}}),o)})))()},hide:function(){var t=this;this.init(),setTimeout((function(){t.isShow=!1}),100)},getImageSize:function(){var t=this;return new Promise((function(e,n){var img=new Image;img.src=t.url,img.onload=function(){t.realWidth=img.width,t.realHeight=img.height,e({width:img.width,height:img.height})},img.onerror=function(){n()}}))},init:function(){var t=this.initInfo,e=t.width,n=t.height,o=t.x,r=t.y;this.width=e,this.height=n,this.translateX=o,this.translateY=r,this.scale=1,this.originX=50,this.originY=50},imgLoad:function(){},onWheel:function(t,e){if(t.preventDefault(),1!==this.scale){var n=t.deltaY;this.translateY-=n,this.resetPosition()}},zoom:function(t,e){var n=this.$refs.imageContainer.getBoundingClientRect(),o=n.width,r=n.height;this.scale=1===this.scale?2:1,this.originX=2===this.scale&&t?t/o*100:50,this.originY=2===this.scale&&e?e/r*100:50,this.translateX=(window.innerWidth-this.width)/2,this.translateY=(window.innerHeight-this.height)/2},handle:function(t){switch(t){case"ZOOM":this.$logEvent("log_actions",{operation:"click_resizing",behavior_info:"on_work_detail_page"}),this.zoom(0,0);break;case"DOWNLOAD":this.download();break;case"CLOSE":this.hide()}},download:function(){var t=this.fileName||(new Date).getTime()+".png";Object(r.M)(this.url,t)},onMouseDown:function(t){this.startDragging(t)},startDragging:function(t){this.dragging=!0,this.clickTime="",this.lastX=t.clientX,this.lastY=t.clientY,2===this.scale&&this.$refs.imageBox.classList.add("grabbing"),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseMove:function(t){if(this.dragging&&1!==this.scale){this.clickTime=(new Date).getTime();var e=t.clientX-this.lastX,n=t.clientY-this.lastY,o=this.translateX+e,r=this.translateY+n;this.translateX=o,this.translateY=r,this.lastX=t.clientX,this.lastY=t.clientY}},onMouseUp:function(t){this.dragging=!1,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),this.$refs.imageBox.classList.remove("grabbing"),this.clickTime?this.resetPosition():this.handleScale(t)},resetPosition:function(){var t=this.$refs.imageBox.getBoundingClientRect(),e=t.width,n=t.height;if(1!==this.scale){var o=(50-this.originX)*this.width/100,r=(50-this.originY)*this.height/100;if(console.log(e,n,window.innerWidth,window.innerHeight,this.width,this.height,"this.originY: "+this.originY,"this.originX: "+this.originX),e<window.innerWidth)this.translateX=(window.innerWidth-e/2)/2;else{var l=-(e-window.innerWidth-e/4),c=this.width>window.innerWidth?-e/4:l,d=e/4;c-=o,d-=o;var v=this.translateX<c?c:this.translateX>d?d:this.translateX;this.translateX=v}if(n<window.innerHeight)this.translateY=(window.innerHeight-n/2)/2;else{var h=-(n-window.innerHeight-n/4),f=this.height>window.innerHeight?-n/4:h,m=n/4;f-=r,m-=r;var _=this.translateY<f?f:this.translateY>m?m:this.translateY;this.translateY=_}}},handleScale:function(t){var e=this.$refs.imageContainer.getBoundingClientRect(),n=e.left,o=e.top,r=t.clientX-n,l=t.clientY-o;this.zoom(r,l)}},beforeDestroy:function(){document.removeEventListener("keydown",this.handleEscKey)}},c=l,d=(n(4035),n(0)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal-fade"}},[t.isShow?e("div",{ref:"imageContainer",staticClass:"view-image",on:{wheel:t.onWheel}},[e("img",{ref:"imageBox",class:t.imageClass,style:t.imageStyle,attrs:{src:t.url,alt:"",draggable:"false"},on:{load:t.imgLoad,mousedown:t.onMouseDown}}),t._v(" "),e("div",{staticClass:"handle-btns"},[e("span",{staticClass:"btn-box download-btn",on:{click:function(e){return t.handle("DOWNLOAD")}}},[e("i",{staticClass:"iconfont icon-modelDownload"})]),t._v(" "),e("span",{staticClass:"btn-box zoom-btn",on:{click:function(e){return t.handle("ZOOM")}}},[e("i",{staticClass:"iconfont",class:1===t.scale?"icon-icon-enlarge":"icon-a-icon-Zoomout"})]),t._v(" "),e("span",{staticClass:"btn-box delete-btn",on:{click:function(e){return t.handle("CLOSE")}}},[e("i",{staticClass:"iconfont icon-close"})])])]):t._e()])}),[],!1,null,"0c236158",null);e.a=component.exports},2136:function(t,e,n){t.exports={}},2137:function(t,e,n){t.exports={}},2138:function(t,e,n){t.exports={}},2139:function(t,e,n){t.exports={}},2250:function(t,e,n){t.exports={}},2251:function(t,e,n){t.exports={}},2252:function(t,e,n){t.exports={}},2253:function(t,e,n){t.exports={}},2254:function(t,e,n){t.exports={}},2255:function(t,e,n){t.exports={}},2256:function(t,e,n){t.exports={}},2257:function(t,e,n){t.exports={}},2277:function(t,e,n){t.exports={}},2279:function(t,e,n){t.exports={}},2280:function(t,e,n){t.exports={}},2305:function(t,e,n){t.exports={}},2306:function(t,e,n){t.exports={}},2307:function(t,e,n){t.exports={}},2308:function(t,e,n){t.exports={}},2309:function(t,e,n){t.exports={}},2310:function(t,e,n){t.exports={}},2311:function(t,e,n){t.exports={}},2312:function(t,e,n){t.exports={}},2313:function(t,e,n){t.exports={}},2314:function(t,e,n){t.exports={}},2315:function(t,e,n){t.exports={}},2316:function(t,e,n){t.exports={}},2317:function(t,e,n){t.exports={}},2318:function(t,e,n){t.exports={}},2319:function(t,e,n){t.exports={}},2385:function(t,e,n){t.exports={}},2386:function(t,e,n){t.exports={}},2409:function(t,e,n){t.exports={}},2411:function(t,e,n){t.exports={}},2412:function(t,e,n){t.exports={}},2414:function(t,e,n){t.exports={}},2425:function(t,e,n){t.exports={}},2433:function(t,e,n){t.exports={}},2434:function(t,e,n){t.exports={}},2438:function(t,e,n){t.exports={}},2439:function(t,e,n){t.exports={}},2460:function(t,e,n){t.exports={}},2461:function(t,e,n){t.exports={}},2462:function(t,e,n){t.exports={}},2463:function(t,e,n){t.exports={}},2465:function(t,e,n){t.exports={}},2466:function(t,e,n){t.exports={}},2467:function(t,e,n){t.exports={}},2468:function(t,e,n){t.exports={}},2469:function(t,e,n){t.exports={}},2470:function(t,e,n){t.exports={}},2471:function(t,e,n){t.exports={}},2472:function(t,e,n){t.exports={}},2473:function(t,e,n){t.exports={}},2474:function(t,e,n){t.exports={}},2475:function(t,e,n){t.exports={}},2476:function(t,e,n){t.exports={}},2477:function(t,e,n){t.exports={}},2478:function(t,e,n){t.exports={}},2479:function(t,e,n){t.exports={}},2480:function(t,e,n){t.exports={}},2481:function(t,e,n){t.exports={}},2482:function(t,e,n){t.exports={}},2483:function(t,e,n){t.exports={}},2484:function(t,e,n){t.exports={}},2485:function(t,e,n){t.exports={}},2486:function(t,e,n){t.exports={}},2487:function(t,e,n){t.exports={}},2488:function(t,e,n){t.exports={}},2489:function(t,e,n){t.exports={}},2490:function(t,e,n){t.exports={}},2491:function(t,e,n){t.exports={}},2492:function(t,e,n){t.exports={}},2493:function(t,e,n){t.exports={}},2494:function(t,e,n){t.exports={}},2495:function(t,e,n){t.exports={}},2496:function(t,e,n){t.exports={}},2497:function(t,e,n){t.exports={}},2498:function(t,e,n){t.exports={}},2499:function(t,e,n){t.exports={}},250:function(t,e,n){"use strict";n(16),n(21),n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=n(1),l=(n(28),n(140),n(10)),c={props:{temp:{type:Object,default:function(){return{title:"",desc:""}}}},data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},methods:{getTagName:function(title){if(!title)return"h2";var t=title.match(/^(h[1-6]):/);return t?t[1]:"h2"},getCleanTitle:function(title){if(!title)return"";var t=title.match(/^(h[1-6]):(.+)/);return t?t[2]:title}}},d=(n(4867),n(0)),v=Object(d.a)(c,(function(){var t,e,n,o,r,l=this,c=l._self._c;return c("div",{staticClass:"temp-head"},[null!==(t=l.temp)&&void 0!==t&&t.title?c(l.getTagName(null===(e=l.temp)||void 0===e?void 0:e.title),{tag:"component",domProps:{innerHTML:l._s(l.setHref(l.$t(l.getCleanTitle(null===(n=l.temp)||void 0===n?void 0:n.title))))}}):l._e(),l._v(" "),null!==(o=l.temp)&&void 0!==o&&o.desc?c("p",{domProps:{innerHTML:l._s(l.setHref(l.$t(null===(r=l.temp)||void 0===r?void 0:r.desc)))}}):l._e()],1)}),[],!1,null,"2ec14858",null).exports,h={props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},computed:{layoutClass:function(){var t,e=(null===(t=this.temp)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)||0;return 5===e?"layout-5":6===e?"layout-6":7===e?"layout-7":""}}},f=(n(4868),Object(d.a)(h,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content class-temp",class:e.layoutClass},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"class_temp_"+i,staticClass:"info-item"},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"48",height:"48"}}),e._v(" "),n("p",{staticClass:"title",domProps:{innerHTML:e._s(e.setHref(e.$t(t.title)))}}),e._v(" "),n("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.setHref(e.$t(t.desc)))}})])})),0)}),[],!1,null,"d3ef89e6",null).exports),m={props:{temp:{type:Object,default:function(){return[]}}}},_=(n(4869),Object(d.a)(m,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content banner-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"banner_item_"+i,staticClass:"info-item"},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"285",height:"220"}})])})),0)}),[],!1,null,"5cdda70a",null).exports),y=(n(22),n(44),{props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{activeIndex:-1,setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},head:function(){return{script:[{type:"application/ld+json",json:this.generateFAQStructuredData()}],__dangerouslyDisableSanitizers:["script"]}},methods:{expandItem:function(t){this.activeIndex=this.activeIndex===t?-1:t},generateFAQStructuredData:function(){var t,e=this;return null!==(t=this.temp)&&void 0!==t&&t.content&&Array.isArray(this.temp.content)&&0!==this.temp.content.length?{"@context":"https://schema.org","@type":"FAQPage",mainEntity:this.temp.content.map((function(t,n){var o=e.$t(t.title),r="";if(t.list&&Array.isArray(t.list)&&t.list.length>0){var l=e.$t(t.list[0]);r=e.stripHtmlTags(l)}return{"@type":"Question",name:o,acceptedAnswer:{"@type":"Answer",text:r}}}))}:null},stripHtmlTags:function(html){return html?html.replace(/<[^>]*>/g,""):""}}}),w=(n(4870),Object(d.a)(y,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content fqa-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){var o;return n("div",{key:"fqa_temp_"+i,staticClass:"info-item"},[n("span",{staticClass:"off-btn",on:{click:function(t){return e.expandItem(i)}}},[e._v(e._s(e.activeIndex===i?"-":"+"))]),e._v(" "),n("div",{staticClass:"fqa-content"},[n("p",{staticClass:"fqa-title",domProps:{innerHTML:e._s(e.setHref(e.$t(t.title)))},on:{click:function(t){return e.expandItem(i)}}}),e._v(" "),n("div",{staticClass:"answer-list",class:{answers:(null==t||null===(o=t.list)||void 0===o?void 0:o.length)>1,expand:e.activeIndex===i}},e._l(t.list,(function(t,o){return n("p",{key:"fqa_answer_"+o,attrs:{"data-index":o+1+"."},domProps:{innerHTML:e._s(e.setHref(e.$t(t)))}})})),0)])])})),0)}),[],!1,null,"db775a68",null).exports),C={props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},computed:{toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{switchTools:function(path){"#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0)}}},O=(n(4871),Object(d.a)(C,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content tools-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("a",{key:"tools_temp_"+i,attrs:{href:e.toLocalePath(t.path)},on:{click:function(n){return n.preventDefault(),e.switchTools(t.path)}}},[n("div",{staticClass:"card-info"},[n("p",{staticClass:"title ellipsis",attrs:{title:e.$t(t.title)},domProps:{innerHTML:e._s(e.setHref(e.$t(t.title)))}}),e._v(" "),n("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.setHref(e.$t(t.desc)))}})]),e._v(" "),n("img",{attrs:{src:t.img,alt:t.alt,loading:"lazy",width:"125",height:"145"}})])})),0)}),[],!1,null,"2b31b464",null).exports),x={props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}}},k=(n(4872),Object(d.a)(x,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content step-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"step_temp_"+i,staticClass:"info-item",attrs:{"data-num":i+1}},[n("p",{staticClass:"title",domProps:{innerHTML:e._s(e.setHref(e.$t(null==t?void 0:t.title)))}}),e._v(" "),n("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.setHref(e.$t(null==t?void 0:t.desc)))}})])})),0)}),[],!1,null,"c79739c4",null).exports),I=(n(19),n(24),{props:{temp:{type:Object,default:function(){return{}}},isDetail:{type:Boolean,default:!0},radius:{type:Number,default:0},showRange:{type:Boolean,default:!0}},data:function(){return{sliderWidth:50,dragging:!1,scale:1,translate:{x:0,y:0,x1:0,y1:0}}},computed:{lowImg:function(){var t=this.temp,img=t.img;return t.imgA||img},highImg:function(){var t;return null===(t=this.temp)||void 0===t?void 0:t.imgB},altA:function(){var t=this.temp,e=t.alt,n=t.altA;return this.$t(n||e)},altB:function(){var t=this.temp,e=t.alt,n=t.altB;return this.$t(n||e)},isLowVideo:function(){return this.checkIsVideo(this.lowImg)},isHighVideo:function(){return this.checkIsVideo(this.highImg)}},methods:{checkIsVideo:function(t){if(!t)return!1;var e=t.toLowerCase();return[".mp4",".webm",".ogg",".mov",".avi",".mkv",".m4v",".3gp"].some((function(t){return e.includes(t)}))},onVideoLoaded:function(){this.sliderWidth=50,this.$refs.highVideo&&(this.$refs.highVideo.style.opacity=1)},onTimeUpdate:function(){if(this.isLowVideo&&this.isHighVideo&&this.$refs.lowVideo&&this.$refs.highVideo){var t=this.$refs.lowVideo.currentTime,e=this.$refs.highVideo.currentTime;Math.abs(t-e)>.1&&(this.$refs.highVideo.currentTime=t)}},handleWheel:function(t){if(this.isDetail){var e=t.deltaY,n=e>0,o=e<0,r=this.scale;t.preventDefault(),n&&(this.scale=r>.4?r-.1:.4),o&&(this.scale=r<3?r+.1:3)}},startDrag:function(t){if(this.isDetail&&"range"!==t.target.getAttribute("data-type")){var e=this.translate,n=e.x,o=e.y;this.dragging=!0,this.translate.x1=t.clientX-n,this.translate.y1=t.clientY-o,document.addEventListener("mousemove",this.dragIng)}},dragIng:function(t){var e=this.translate,n=e.x1,o=e.y1;this.dragging&&(this.translate.x=t.clientX-n,this.translate.y=t.clientY-o)},endDrag:function(){this.dragging=!1,document.removeEventListener("mousemove",this.dragIng)},highImgloadEnd:function(){this.sliderWidth=50,document.querySelector("#afterImageId").style.opacity=1}}}),j=(n(4873),Object(d.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"diff-img-box",class:t.isDetail&&"has-detail",on:{wheel:t.handleWheel}},[e("div",{staticClass:"low-img-box flex_c_m",style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[t.isLowVideo?e("video",{ref:"lowVideo",staticClass:"video-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{src:t.lowImg,alt:t.altA,width:"1050",height:"600",muted:"",autoplay:"",loop:""},domProps:{muted:!0},on:{loadedmetadata:t.onVideoLoaded,timeupdate:t.onTimeUpdate}}):e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{src:t.lowImg,alt:t.altA,loading:"lazy",width:"1050",height:"600"}})]),t._v(" "),e("div",{staticClass:"high-img-box flex_c_m"},[t.isHighVideo?e("video",{ref:"highVideo",staticClass:"video-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{id:"afterVideoId",src:t.highImg,alt:t.altB,width:"1050",height:"600",muted:"",autoplay:"",loop:""},domProps:{muted:!0},on:{loadedmetadata:t.onVideoLoaded,timeupdate:t.onTimeUpdate}}):e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{id:"afterImageId",src:t.highImg,alt:t.altB,loading:"lazy",width:"1050",height:"600"},on:{load:t.highImgloadEnd,error:t.highImgloadEnd}})]),t._v(" "),e("div",{staticClass:"step-box",on:{mousedown:t.startDrag,mouseup:t.endDrag}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"}],staticClass:"guide-line",style:"left: calc(".concat(t.sliderWidth,"% - 1px);")}),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"},{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{"data-type":"range",type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{__r:function(e){t.sliderWidth=e.target.value}}})])])}),[],!1,null,"669d1948",null).exports),S={components:{CompareImage:j},props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},computed:{toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{skipPath:function(path){path&&("#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0))},getTitleInfo:function(text,t){var e=text.split(":"),n=e[0];return t?this.$t(e[1]||n):["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h3"},checkIsVideo:function(t){if(!t)return!1;var e=t.toLowerCase();return[".mp4",".webm",".ogg",".mov",".avi",".mkv",".m4v",".3gp"].some((function(t){return e.includes(t)}))}}},$=(n(4874),Object(d.a)(S,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content text-img-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:" text-img_item_"+i,staticClass:"info-item",class:{layout:t.layout},attrs:{id:"textImgItemId-".concat(i)}},[t.imgB?n("compare-image",{attrs:{temp:t,isDetail:!1}}):[e.checkIsVideo(t.img)?n("video",{staticClass:"video-item",attrs:{src:t.img,alt:e.$t(t.alt),width:"600",height:"400",muted:"",autoplay:"",loop:"",loading:"lazy"},domProps:{muted:!0}}):n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"600",height:"400"}})],e._v(" "),n("div",{staticClass:"card-info"},[n(e.getTitleInfo(t.title),{tag:"component",domProps:{innerHTML:e._s(e.getTitleInfo(t.title,"text"))}}),e._v(" "),n("p",{staticClass:"ellipsis-line",domProps:{innerHTML:e._s(e.setHref(e.$t(t.desc)))}}),e._v(" "),n("div",{staticClass:"buttons-wrapper"},[t.btnText?n("a",{staticClass:"btn btn-primary",attrs:{href:e.toLocalePath(t.path)},on:{click:function(n){return n.preventDefault(),e.skipPath(null==t?void 0:t.path)}}},[e._v(e._s(e.$t(t.btnText)))]):e._e(),e._v(" "),t.btnTextB?n("a",{staticClass:"btn btn-primary-dark",attrs:{href:e.toLocalePath(t.path)},on:{click:function(n){return n.preventDefault(),e.skipPath(null==t?void 0:t.pathB)}}},[e._v(e._s(e.$t(t.btnTextB)))]):e._e()])],1)],2)})),0)}),[],!1,null,"33b9f304",null).exports),P={components:{CompareImage:j},props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{activeIndex:0}},computed:{labelInfo:function(){return this.temp.content[this.activeIndex]||{}}}},T=(n(4875),Object(d.a)(P,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content label-temp"},[n("div",{staticClass:"label-list"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(label,i){return n("div",{key:"label_temp_"+i,staticClass:"label-item",class:{"active-item":e.activeIndex===i},on:{click:function(t){e.activeIndex=i}}},[n("img",{attrs:{src:null==label?void 0:label.img,alt:e.$t(null==label?void 0:label.alt),loading:"lazy",width:"42",height:"42"}}),e._v(" "),n("span",[e._v(e._s(e.$t(null==label?void 0:label.title)))])])})),0),e._v(" "),n("div",{staticClass:"diff-show"},[e.labelInfo.imgB?n("compare-image",{attrs:{temp:e.labelInfo,isDetail:!1}}):n("img",{staticClass:"diff-img",attrs:{src:e.labelInfo.imgA,alt:e.$t(e.labelInfo.altA),loading:"lazy",width:"1050",height:"600"}})],1)])}),[],!1,null,"25ea2a94",null).exports),D={props:{temp:{type:Object,default:function(){return[]}}},data:function(){var t=this;return{activeIndex:0,setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)}}},computed:{labelInfo:function(){return this.temp.content[this.activeIndex]||{}}}},L=(n(4876),Object(d.a)(D,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content video-temp"},[n("video",{attrs:{src:e.temp.video,autoplay:"",loop:"",muted:"",controls:!1},domProps:{muted:!0}}),e._v(" "),n("div",{staticClass:"video-step"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"video_temp_"+i,staticClass:"step-item",attrs:{"data-index":i+1}},[n("p",{staticClass:"step-title",domProps:{innerHTML:e._s(e.setHref(e.$t(null==t?void 0:t.title)))}}),e._v(" "),n("p",{staticClass:"step-desc",domProps:{innerHTML:e._s(e.setHref(e.$t(null==t?void 0:t.desc)))}})])})),0)])}),[],!1,null,"1daba7c4",null).exports),A=(n(18),{props:{temp:{type:Object,default:function(){return[]}}},data:function(){return{offSet:0}},methods:{pagingComment:function(t){var e,n=this.$refs.scrollDom.clientWidth,o=parseInt((null===(e=this.temp)||void 0===e?void 0:e.content.length)/3)*n;this.offSet+=t*n,this.offSet<-o&&(this.offSet=-o),this.offSet>0&&(this.offSet=0)}}}),E=(n(4877),Object(d.a)(A,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content comment-temp"},[n("div",{staticClass:"comment-list"},[n("div",{ref:"scrollDom",staticClass:"scorll-body",style:{transform:"translateX(".concat(e.offSet,"px)")}},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:"comment_temp_"+i,staticClass:"info-item"},[n("p",{staticClass:"title ellipsis-line"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("div",{staticClass:"sender-info"},[n("img",{attrs:{src:t.img,alt:e.$t(t.name),loading:"lazy",width:"48",height:"48"}}),e._v(" "),n("p",{staticClass:"sender-name"},[e._v(e._s(e.$t(t.name)))]),e._v(" "),n("p",{staticClass:"sender-desc"},[e._v(e._s(e.$t(t.desc)))])])])})),0)]),e._v(" "),n("div",{staticClass:"paging-btn",on:{click:function(t){return e.pagingComment(1)}}},[n("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),n("div",{staticClass:"paging-btn right-btn",on:{click:function(t){return e.pagingComment(-1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])])}),[],!1,null,"2a340c00",null).exports),M={props:{temp:{type:Object,default:function(){return[]}}},computed:{item:function(){var t;return null===(t=this.temp)||void 0===t?void 0:t.content[0]},toLocalePath:function(){var t=this;return function(path){return"#top"===path||path.includes("http")?path:t.localePath(path)}}},methods:{switchTools:function(path){"#top"!==path?path.includes("http")?window.open(path,"_blank"):window.open(location.origin+this.localePath(path),"_blank"):window.scrollTo(0,0)}}},R=(n(4878),Object(d.a)(M,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content download-temp"},[n("div",{staticClass:"download-info"},[n("h2",{domProps:{innerHTML:e._s(e.$t(e.temp.title))}}),e._v(" "),e.temp.desc?n("p",{staticClass:"desc"},[e._v(e._s(e.$t(e.temp.desc)))]):e._e(),e._v(" "),n("div",{staticClass:"downlaod-btns"},[n("a",{attrs:{href:e.toLocalePath(e.item.btnAPath)},on:{click:function(t){return t.stopPropagation(),e.switchTools(e.item.btnAPath)}}},[n("img",{attrs:{src:e.item.btnAimg,alt:"app store",loading:"lazy",width:"200",height:"60"}})]),e._v(" "),n("a",{attrs:{href:e.toLocalePath(e.item.btnBPath)},on:{click:function(t){return t.stopPropagation(),e.switchTools(e.item.btnBPath)}}},[n("img",{attrs:{src:e.item.btnBimg,alt:"google play",loading:"lazy",width:"200",height:"60"}})])]),e._v(" "),n("div",{staticClass:"download-code"},[n("img",{attrs:{src:e.item.codeimg,alt:e.$t(e.item.codeAlt),loading:"lazy",width:"203",height:"203"}}),e._v(" "),n("p",[e._v(e._s(e.$t(e.item.info)))])])]),e._v(" "),n("img",{attrs:{src:null===(t=e.item)||void 0===t?void 0:t.img,alt:e.$t(e.item.alt),loading:"lazy",width:"600",height:"400"}})])}),[],!1,null,"5bf17704",null).exports),N={props:{temp:{type:Object,default:function(){return[]}}}},U=(n(4879),Object(d.a)(N,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content card-temp"},[e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return[null!=t&&t.linkPath?n("a",{key:"card_temp_link_"+i,staticClass:"info-item",attrs:{href:t.linkPath,target:"_blank"}},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt)}}),e._v(" "),n("div",{staticClass:"card-info"},[n("p",{staticClass:"title ellipsis"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("el-popover",{attrs:{placement:"top-start",width:"264",trigger:"hover"}},[n("div",{staticClass:"desc-more"},[e._v(e._s(e.$t(t.desc)))]),e._v(" "),n("p",{staticClass:"desc",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.$t(t.desc)))])])],1)]):n("div",{key:"card_temp_div_"+i,staticClass:"info-item"},[n("img",{attrs:{src:t.img,alt:e.$t(t.alt)}}),e._v(" "),n("div",{staticClass:"card-info"},[n("p",{staticClass:"title ellipsis"},[e._v(e._s(e.$t(t.title)))]),e._v(" "),n("el-popover",{attrs:{placement:"top-start",width:"264",trigger:"hover"}},[n("div",{staticClass:"desc-more"},[e._v(e._s(e.$t(t.desc)))]),e._v(" "),n("p",{staticClass:"desc",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.$t(t.desc)))])])],1)])]}))],2)}),[],!1,null,"722087e8",null).exports),F=n(51);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var V={components:{CompareImage:j},props:{temp:{type:Object,default:function(){return[]}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.e)("user",["token"])),data:function(){var t=this;return{setHref:function(text){return Object(l.Q)(text,t.$i18n.locale)},uploading:!1,uploadResult:null,path:""}},methods:{getTitleInfo:function(text,t){var e=text.split(":"),n=e[0];return t?this.$t(e[1]||n):["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h3"},handleUploadClick:function(t,e,n){var o=this;t.preventDefault(),this.token?(this.$refs["uploadRef".concat(e)][0].$el.querySelector('input[type="file"]').click(),this.path=n.path):this.$EventBus.$emit("openLoginDialog",{callback:function(){o.$refs["uploadRef".concat(e)][0].$el.querySelector('input[type="file"]').click()}})},handleBeforeUpload:function(t){if(this.token){var e=["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type),n=t.size/1024/1024<5;return e?n?(this.uploading=!0,!0):(this.$message.error(this.$t("UploadImageExceed5MB")),!1):(this.$message.error(this.$t("AllowImageFiles")),!1)}this.$EventBus.$emit("openLoginDialog")},handleBeforeUploadEmpty:function(t){var e=this,n=t.file;this.uploading=!0,new F.a({type:14}).startUpload(n).then((function(t){console.log("result=======>",t),e.uploadResult=t,e.$router.push(e.localePath("".concat(e.path,"?imageUrl=").concat(encodeURIComponent(t))))})).catch((function(t){console.log(t),e.$message.error(e.$t("uploadError"))})).finally((function(){e.uploading=!1}))}}},H=V,z=(n(4880),Object(d.a)(H,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"temp-content text-img-temp"},e._l(null===(t=e.temp)||void 0===t?void 0:t.content,(function(t,i){return n("div",{key:" text-img_item_"+i,staticClass:"info-item",class:{layout:t.layout},attrs:{id:"textImgItemId-".concat(i)}},[t.imgB?n("compare-image",{attrs:{temp:t,isDetail:!1}}):n("img",{attrs:{src:t.img,alt:e.$t(t.alt),loading:"lazy",width:"600",height:"400"}}),e._v(" "),n("div",{staticClass:"card-info"},[n(e.getTitleInfo(t.title),{tag:"component",domProps:{innerHTML:e._s(e.getTitleInfo(t.title,"text"))}}),e._v(" "),n("p",{staticClass:"ellipsis-line",domProps:{innerHTML:e._s(e.setHref(e.$t(t.desc)))}}),e._v(" "),n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],ref:"uploadRef".concat(i),refInFor:!0,staticClass:"uploadBox",attrs:{accept:".jpg, .jpeg, .webp, .png",action:"#",drag:"","before-upload":e.handleBeforeUpload,"http-request":e.handleBeforeUploadEmpty,"show-file-list":!1}},[n("div",{staticClass:"upload-box-content",on:{click:function(n){return n.stopPropagation(),function(n){return e.handleUploadClick(n,i,t)}.apply(null,arguments)}}},[n("i",{staticClass:"el-icon-upload image-upload-icon"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("upload_feature")))])])])],1)],1)})),0)}),[],!1,null,"4553f3f9",null));function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={components:{TempHead:v,ClassTemp:f,BannerTemp:_,StepTemp:k,FqaTemp:w,ToolsTemp:O,TextImgTemp:$,LabelTemp:T,VideoTemp:L,CommentTemp:E,DownloadTemp:R,CardTemp:U,ImgUploadTemp:z.exports},props:{tempList:{type:Array,default:function(){return[]}}},computed:G(G({},Object(r.e)("user",["token"])),{},{isShow:function(){var t=this.getRouteBaseName();return!this.token||["customSEO","sora","text2img"].includes(t)},isFirstCover:function(){var t=this.tempList[0],e=t.cover,n=t.type;return e&&"TEXT_IMG"===n}}),data:function(){return{hideHeadTemp:["DOWNLOAD"],components:{CLASS_TAB:"ClassTemp",BANNER:"BannerTemp",FQA:"FqaTemp",TOOLS:"ToolsTemp",STEP:"StepTemp",TEXT_IMG:"TextImgTemp",IMAGE_UPLOAD:"ImgUploadTemp",LABEL_TAB:"LabelTemp",VIDEO_STEP:"VideoTemp",COMMENT:"CommentTemp",DOWNLOAD:"DownloadTemp",CARD_TAB:"CardTemp"}}},mounted:function(){},methods:{}},Q=(n(4881),Object(d.a)(Y,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"page-seo"},t._l(t.tempList,(function(n,i){return e("div",{key:"temp_index_"+i,staticClass:"seo-temp",class:{"fist-cover":t.isFirstCover},style:{backgroundImage:"url(".concat(null==n?void 0:n.cover,")")}},[e("div",{staticClass:"temp-body",style:{padding:null!=n&&n.cover?"100px 0":"0"}},[t.hideHeadTemp.includes(n.type)||!n.title&&!n.desc?t._e():e("temp-head",{attrs:{id:"tempHead-".concat(i),temp:n}}),t._v(" "),e(t.components[n.type],{tag:"component",attrs:{temp:n}})],1)])})),0)}),[],!1,null,"3ca13248",null));e.a=Q.exports},2500:function(t,e,n){t.exports={}},2501:function(t,e,n){t.exports={}},2502:function(t,e,n){t.exports={}},2503:function(t,e,n){t.exports={}},2504:function(t,e,n){t.exports={}},2505:function(t,e,n){t.exports={}},2506:function(t,e,n){t.exports={}},2507:function(t,e,n){t.exports={}},2508:function(t,e,n){t.exports={}},2509:function(t,e,n){t.exports={}},2510:function(t,e,n){t.exports={}},2511:function(t,e,n){t.exports={}},2512:function(t,e,n){t.exports={}},2514:function(t,e,n){t.exports={}},2515:function(t,e,n){t.exports={}},2516:function(t,e,n){t.exports={}},2517:function(t,e,n){t.exports={}},2518:function(t,e,n){t.exports={}},2519:function(t,e,n){t.exports={}},2520:function(t,e,n){t.exports={}},2521:function(t,e,n){t.exports={}},2522:function(t,e,n){t.exports={}},2523:function(t,e,n){t.exports={}},2524:function(t,e,n){t.exports={}},2525:function(t,e,n){t.exports={}},2526:function(t,e,n){t.exports={}},2527:function(t,e,n){t.exports={}},2528:function(t,e,n){t.exports={}},2529:function(t,e,n){t.exports={}},2530:function(t,e,n){t.exports={}},2531:function(t,e,n){t.exports={}},2532:function(t,e,n){t.exports={}},2533:function(t,e,n){t.exports={}},2534:function(t,e,n){t.exports={}},2535:function(t,e,n){t.exports={}},2537:function(t,e,n){t.exports={}},2538:function(t,e,n){t.exports={}},2539:function(t,e,n){t.exports={}},2540:function(t,e,n){t.exports={}},2541:function(t,e,n){t.exports={}},2542:function(t,e,n){t.exports={}},2543:function(t,e,n){t.exports={}},2544:function(t,e,n){t.exports={}},2545:function(t,e,n){t.exports={}},2546:function(t,e,n){t.exports={}},2547:function(t,e,n){t.exports={}},2549:function(t,e,n){t.exports={}},2550:function(t,e,n){t.exports={}},2551:function(t,e,n){t.exports={}},256:function(t,e,n){"use strict";n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=n(3),l=(n(20),n(39)),c=n(38),d=n(25),v=n.n(d);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={props:{modelPlay:Boolean,authorId:{type:String,default:""},needBorder:Boolean,customClass:{type:String,default:""},playIconCustomStyle:{type:Object,default:function(){return{position:"absolute",right:"-5px",bottom:"0px"}}},item:{type:Object,default:function(){}},obj:{type:Object,default:function(){}},logParams:{type:Object,default:function(){}},logParams2:{type:Object,default:function(){}},playInitIcon:{type:String},disabled:{type:Boolean,default:!1},saveAudioFileOptions:{type:Object,default:function(){return{shouldSaveFile:!1,onFileGenerated:function(){}}}},extraParams:{type:Object,default:function(){}}},data:function(){return{audioPlayer:null,duration:void 0,voiceUrl:"",isPlaying:!1,voiceLoading:!1,oldExtraParams:{}}},computed:{playTime:function(){var t;return Math.floor(null===(t=this.audioPlayer)||void 0===t||null===(t=t.audioPlayer)||void 0===t?void 0:t.scheduledTime)||0},logEventParams:function(){return"{}"!==JSON.stringify(this.logParams)?this.logParams:null},logEventParams2:function(){return"{}"!==JSON.stringify(this.logParams2)?this.logParams2:null},timbreId:function(){var t,e;return(null===(t=this.item)||void 0===t?void 0:t.timbre_id)||(null===(e=this.item)||void 0===e?void 0:e.id)}},watch:{timbreId:function(t){console.log("timbreId-change",t),this.voiceUrl=""},item:{handler:function(t){t&&t.voiceUrl&&(this.voiceUrl=t.voiceUrl)},immediate:!0,deep:!0}},beforeDestroy:function(){this.stopAudio()},methods:{handleClickPlay:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.disabled){e.next=2;break}return e.abrupt("return");case 2:if(t.$emit("clickPlay",t.item),t.logEventParams&&t.$logEvent("log_actions",t.logEventParams),t.logEventParams2&&t.$logEvent("log_actions",t.logEventParams2),!t.voiceLoading){e.next=7;break}return e.abrupt("return");case 7:if(!t.isPlaying){e.next=10;break}return t.stopAudio(),e.abrupt("return");case 10:if(console.log("this.oldExtraParams",t.oldExtraParams,t.extraParams,v.a.isEqual(t.oldExtraParams,t.extraParams)),!t.voiceUrl||!v.a.isEqual(t.oldExtraParams,t.extraParams)){e.next=16;break}t.voiceLoading=!0,t.playAudio(),e.next=18;break;case 16:return e.next=18,t.getTts();case 18:case"end":return e.stop()}}),e)})))()},getTts:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,d,v,h,m,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.voiceLoading=!0,t.oldExtraParams=Object.assign({},t.extraParams),e.prev=2,v=f({author_id:(null===(n=t.item)||void 0===n?void 0:n.author_id)||(null===(o=t.item)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id)||t.authorId,scene:"trial",timbre_id:t.timbreId,text:null===(r=t.item)||void 0===r?void 0:r.text,voice_id:null===(d=t.item)||void 0===d?void 0:d.id},t.extraParams),t.modelPlay&&delete v.voice_id,e.next=7,Object(c.db)(v);case 7:if(1e4!==(h=e.sent).status.code){e.next=14;break}return t.voiceUrl=(null===(m=h.data)||void 0===m?void 0:m.url)||"",e.next=12,t.playAudio();case 12:e.next=21;break;case 14:e.t0=null==h||null===(_=h.status)||void 0===_?void 0:_.code,e.next=70026===e.t0?17:19;break;case 17:return t.$message.error(t.$t("HttpErrorCode_70026")),e.abrupt("break",20);case 19:t.$message.error(h.status.msg||t.$t("comicPage17"));case 20:t.voiceLoading=!1;case 21:10614===h.status.code&&(t.$message.warning(t.$t("audioPlay10614")),y={data:{obj_id:t.item.id,obj_tye:16},msg:"play",type:"playErr"},Object(l.v)(y)),80008===h.status.code&&t.$EventBus.$emit(t.isVip?"showVipComputingDialog":"showNotVipComputingDialog"),e.next=29;break;case 25:return e.prev=25,e.t1=e.catch(2),t.voiceLoading=!1,e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e,null,[[2,25]])})))()},playAudio:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.voiceUrl){e.next=2;break}return e.abrupt("return");case 2:if(t.audioPlayer=t.$createAudioPlayer(t.voiceUrl,t.updateStatus,t.saveAudioFileOptions),e.prev=3,!t.audioPlayer){e.next=8;break}return e.next=7,t.audioPlayer.start();case 7:t.modelPlay||Object(c.n)({items:[{action:"task",obj_id:null===(n=t.item)||void 0===n?void 0:n.id,obj_type:17,count:1,val:t.playTime}]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.$message.warning(t.$t("soundPlayFail"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},stopAudio:function(){this.audioPlayer&&this.audioPlayer.stop()},updateStatus:function(t,e){if(console.log("updateStatus",t,e),"over"!==e&&"start"!==e&&"error"!==t&&"error"!==e||(this.voiceLoading=!1),"error"===t||"error"===e)return this.isPlaying=!1,void this.$message.warning(this.$t("soundPlayFail"));this.isPlaying=t}}},_=(n(3894),n(0)),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return e("div",{style:t.playIconCustomStyle},[e("div",{staticClass:"player-icon",class:[{"player-icon-border":t.needBorder},t.customClass,{disabled:t.disabled}],on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickPlay.apply(null,arguments)}}},[t.playInitIcon?[e("i",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&!t.isPlaying,expression:"!voiceLoading && !isPlaying"}],class:["iconfont","audio-paly-icon",t.playInitIcon]})]:t._e(),t._v(" "),t.playInitIcon?t._e():[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&!t.isPlaying,expression:"!voiceLoading && !isPlaying"}],staticClass:"icon-play-custom"})],t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.voiceLoading,expression:"voiceLoading"}],staticClass:"el-icon-loading"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.voiceLoading&&t.isPlaying,expression:"!voiceLoading && isPlaying"}],staticClass:"icon-playing"},[e("i",{staticClass:"icon-1"}),t._v(" "),e("i",{staticClass:"icon-1"})])],2)])}),[],!1,null,"652c2e40",null);e.a=component.exports},2625:function(t,e,n){t.exports={}},2626:function(t,e,n){t.exports={}},2627:function(t,e,n){t.exports={}},2628:function(t,e,n){t.exports={}},2629:function(t,e,n){t.exports={}},2630:function(t,e,n){t.exports={}},2631:function(t,e,n){t.exports={}},2632:function(t,e,n){t.exports={}},2633:function(t,e,n){t.exports={}},2634:function(t,e,n){t.exports={}},2635:function(t,e,n){t.exports={}},2636:function(t,e,n){t.exports={}},2637:function(t,e,n){t.exports={}},2638:function(t,e,n){t.exports={}},2639:function(t,e,n){t.exports={}},2640:function(t,e,n){t.exports={}},2641:function(t,e,n){t.exports={}},2642:function(t,e,n){t.exports={}},2643:function(t,e,n){t.exports={}},2644:function(t,e,n){t.exports={}},2645:function(t,e,n){t.exports={}},2646:function(t,e,n){t.exports={}},2647:function(t,e,n){t.exports={}},2648:function(t,e,n){t.exports={}},2649:function(t,e,n){t.exports={}},2650:function(t,e,n){t.exports={}},2651:function(t,e,n){t.exports={}},2652:function(t,e,n){t.exports={}},2653:function(t,e,n){t.exports={}},2654:function(t,e,n){t.exports={}},2655:function(t,e,n){t.exports={}},2827:function(t,e,n){t.exports={}},2828:function(t,e,n){t.exports={}},2830:function(t,e,n){t.exports={}},2831:function(t,e,n){t.exports={}},2833:function(t,e,n){t.exports={}},2834:function(t,e,n){t.exports={}},2835:function(t,e,n){t.exports={}},2836:function(t,e,n){t.exports={}},2837:function(t,e,n){t.exports={}},2838:function(t,e,n){t.exports={}},2839:function(t,e,n){t.exports={}},2840:function(t,e,n){t.exports={}},2841:function(t,e,n){t.exports={}},2842:function(t,e,n){t.exports={}},2843:function(t,e,n){t.exports={}},2844:function(t,e,n){t.exports={}},2845:function(t,e,n){t.exports={}},2846:function(t,e,n){t.exports={}},2849:function(t,e,n){t.exports={}},2850:function(t,e,n){t.exports={}},2851:function(t,e,n){t.exports={}},2852:function(t,e,n){t.exports={}},2853:function(t,e,n){t.exports={}},2854:function(t,e,n){t.exports={}},2855:function(t,e,n){t.exports={}},2856:function(t,e,n){t.exports={}},2857:function(t,e,n){t.exports={}},2858:function(t,e,n){t.exports={}},2859:function(t,e,n){t.exports={}},2860:function(t,e,n){t.exports={}},2909:function(t,e,n){t.exports={}},2910:function(t,e,n){t.exports={}},2911:function(t,e,n){t.exports={}},2949:function(t,e,n){t.exports={}},2950:function(t,e,n){t.exports={}},2962:function(t,e,n){t.exports={}},2980:function(t,e,n){t.exports={}},2981:function(t,e,n){t.exports={}},3004:function(t,e,n){t.exports={}},3191:function(t,e,n){"use strict";n.r(e);n(18),n(8),n(113);var o=n(30),r=n(3),l=n(14),c=n(2),d=(n(20),n(11),n(72),n(19),n(6),n(16),n(22),n(31),n(122),n(4),n(28),n(43),n(21),n(40),n(44),n(7),n(41),n(12),n(13),n(26),n(910)),v=n(362),h=n(201),f=n(63),m=n(172),_=n(316),y=n(372),w=n(10),C=n(1),O=n(681),x=n(45),k=n(635),I=(n(25),n(48)),j=n(1179),S=n(359),$=n(144),P=n(240),T=n(58),D=n(116),L=n(427),A=n(39);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var M={name:"aiTools",props:{list:{type:Array,default:function(){return[]}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(C.c)("user",["cdnHostFun"])),data:function(){return{}},mounted:function(){},methods:{switchTools:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},source={operation:"click_quick_ai_tab",behavior_info:"on_work_detail_page",behavior_info_sub:"作品详情页-".concat(t.type)};this.$logEvent("log_actions",source),this.$router.push(t.uri)}}},R=M,N=(n(4840),n(0)),U=Object(N.a)(R,(function(){var t=this,e=t._self._c;return e("div",{ref:"aiTools",staticClass:"ai-tools"},[t._l(t.list,(function(n,o){return e("a",{key:o,staticClass:"ai-tools-item",attrs:{href:null==n?void 0:n.uri,"data-event":"click_quick_ai_tab","data-id":n.type},on:{click:function(e){return e.preventDefault(),t.switchTools(n)}}},[e("img",{staticClass:"ai-tools-img",attrs:{src:n.cover,alt:n.title+"img",width:"250",height:"165"}}),t._v(" "),e("div",{staticClass:"ai-tools-title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("p",{staticClass:"ai-tools-subtitle ellipsis-line"},[t._v(t._s(t.$t(n.desc)))])])})),t._v(" "),e("a",{staticClass:"ai-tools-item",attrs:{href:t.localePath("/ai-tools")},on:{click:function(e){e.preventDefault(),t.switchTools({type:"ai_tools",uri:t.localePath("/ai-tools")})}}},[e("div",{staticClass:"ai-tools-more"},[t._v(t._s(t.$t("sora_34_H2_3"))+" "),e("i",{staticClass:"iconfont icon-right"})])])],2)}),[],!1,null,"6ee69be9",null).exports,F=n(209),B=n(318),V=n(111),H=n(301),z=n(200),W=n(890),G=n(64),Y=n(54),Q=n(893),J=n(324),X=n(161),K=n(568),Z=n(404),tt=n(361);function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at={name:"ExploreDetail",mixins:[O.a,x.a,k.taskMixin],components:{FrameDtl:L.default,MetaTooltipVue:v.default,WaterFallVue:h.default,CollectPopover:f.default,ElImageViewer:m.a,CommentList:j.default,AppealDialog:S.default,ShareDialog:$.default,Author:P.default,CmtComments:D.default,aiTools:U,ViewImage:F.a,AiChatByDetails:d.a,MyPlayer:B.default,AdminTag:V.default,SelectVideoModelModal:H.default,DownloadVideoPop:z.default,HyWordHigh:W.default,HyWaterfallFlowList:G.default,HyTipsButton:Q.default,STagItem:K.default,NoLike:Z.default,Report:tt.default},provide:function(){return{easyTop:this}},props:{escClose:{type:Boolean,default:!1},defaultData:{type:Object,default:function(){}}},data:function(){return{parseTime:T.f,copyTextToClipboard:w.g,saveImg:w.M,bigImgDialogVisible:!1,bigVideoShow:!1,scrollContainer:{},waterfallContainer:{},activeIndex:0,activeImg:{},parentInfo:{},imgList:[],noMoreRelated:!1,relatedImages:[],followed:!1,showParent:!1,popovervisible:!1,infovisible:!1,imgLoading:!0,cols:7,page:1,relatedLoading:!0,copied:!1,isI18nToggled:!1,time_to:0,imgHeight:0,imgNaturalWidth:0,imgNaturalHeight:0,globalLoading:!1,paymentInfo:null,isShowNullRelatedImg:!1,alreadyNoMoreData:!1,fromPath:"Home",appeaData:{obj_no:"",obj_type:1,remark:""},appealShow:!1,singleImgQuickOperateButtons:[{name:"originality-upscale",icon:"task-upscale-icon",icon_name:"U",title:this.$t("WorkUpscale")},{name:"extra-upscale",icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"variation",icon:"task-variations-icon1",icon_name:"V",title:this.$t("WorkVariations")},{name:"picture-create-picture",icon:"work-picture-create-picture",title:this.$t("UsePicturesForNewCreations")},{name:"remove-background",icon:"icon_qubeijing1",title:this.$t("RemoveBackground")},{name:"animGen",icon:"AnimGenIcon",title:this.$t("AnimGen")},{name:"work-hide-show",icon:"work-show",title:this.$t("PublishOrHideWork")},{name:"work-post",icon:"post-icon2",title:this.$t("GraphicSubmission")},{name:"work-delete",icon:"work-delete",title:this.$t("Delete")},{name:"aiGenerateVideo",icon:"a-icon-VideoGeneration",title:this.$t("ImageToVideoTip")},{name:"aiChartMsg",icon:"a-home-top-personl1",title:this.$t("createChartacterToChat")}],fourImgsQuickOperateButtons:[{name:"V1",buttonType:"V",buttonNum:1,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V2",buttonType:"V",buttonNum:2,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V3",buttonType:"V",buttonNum:3,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"V4",buttonType:"V",buttonNum:4,icon:"task-variations-icon1",title:this.$t("WorkVariations")},{name:"U1",buttonType:"U",buttonNum:1,icon:"",title:this.$t("WorkUpscale")},{name:"U2",buttonType:"U",buttonNum:2,icon:"",title:this.$t("WorkUpscale")},{name:"U3",buttonType:"U",buttonNum:3,icon:"",title:this.$t("WorkUpscale")},{name:"U4",buttonType:"U",buttonNum:4,icon:"",title:this.$t("WorkUpscale")},{name:"extra-upscale1",buttonType:"extra-upscale",buttonNum:1,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale2",buttonType:"extra-upscale",buttonNum:2,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale3",buttonType:"extra-upscale",buttonNum:3,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"extra-upscale4",buttonType:"extra-upscale",buttonNum:4,icon:"upload-image-icon",title:this.$t("ExtraUpscale")},{name:"remove-background",buttonType:"remove-background",icon:"work-remove-background",title:this.$t("RemoveBackground")},{name:"work-hide-show",icon:"work-show",title:this.$t("ShowOrHide")},{name:"work-delete",icon:"work-delete",title:this.$t("Delete")}],isLoadImage:!1,dotReportInfo:{category:"default",view_domain:"details_one",batch_id:""},isClient:!0,isLocale:!1,videoConfig:{id:"AIVideoDetailId",url:"",autoplay:!0,loop:!0,width:"100%",height:"100%",volume:0,dynamicBg:{disable:!1,mode:"firstframe"}},realViewTimer:null,toolList:[],pauseNum:0}},activated:function(){var video=this.$refs.mainVideo;video&&(video.src=this.activeImg.banner.url,video.load(),video.paused&&video.play())},deactivated:function(){var video=this.$refs.mainVideo;video&&(video.pause(),video.src="",video.load())},mounted:function(){var t,e,n=this;this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo")),this.isI18nToggled=!this.accountSettingsData.is_off_localization,null!==(t=this.defaultData)&&void 0!==t&&t.id?this.initPage(null===(e=this.defaultData)||void 0===e?void 0:e.id):this.imgDetail(),this.initList(),document.addEventListener("keydown",this.handleEscKey),this.realViewTimer=setTimeout((function(){n.$logEvent("log_actions",{operation:"real_view",behavior_info:1,behavior_info_sub:n.$route.params.id})}),5e3),this.$EventBus.$on("videoControl",this.handleVideoControl)},beforeRouteEnter:function(t,e,n){var o=e.meta,r=o.isChome,l=o.isHome;n((function(t){t.fromPath=(r||l)&&"Home",t.setImagePageFromPath(e.path)}))},beforeDestroy:function(){document.body.style.overflow="",document.removeEventListener("keydown",this.handleEscKey),this.realViewTimer&&clearTimeout(this.realViewTimer),this.$EventBus.$off("videoControl");var video=this.$refs.mainVideo;video&&(video.pause(),video.src="",video.load())},computed:it(it(it(it(it(it(it({},Object(C.e)("app",["imagePageFromPath"])),Object(C.e)("creation",["generateViewShow"])),Object(C.c)(["isSupportWebp","videoHasVoice"])),Object(C.c)("user",["isLoggedIn","userInfo","accountSettingsData","isCompanyAccount","cdnHostFun"])),Object(C.e)("user",["userInfo","adminOff"])),Object(C.e)("app",["ABInfo"])),{},{getImgLoading:function(){var t;return this.isAIVideo?!(null!==(t=this.activeImg)&&void 0!==t&&null!==(t=t.banner)&&void 0!==t&&t.url):this.imgLoading},comfyuitType:function(){var t=this.activeImg,e=t.channel,n=t.creativity,o=void 0===n?{}:n;return"comfyui"!=e||1===(null==o?void 0:o.type)?"":2===(null==o?void 0:o.type)?"workflow":"app"},appTypeText:function(){var t=this.activeImg.creativity.type;return[7].includes(t)?"app":[6].includes(t)?this.$t("VideoEffect"):this.comfyuitType},imgWidth:function(){var t=window.innerHeight-200;if(this.activeImg){var e,n,img=this.activeImg;if(null!=img&&null!==(e=img.banner)&&void 0!==e&&e.width&&null!=img&&null!==(n=img.banner)&&void 0!==n&&n.height){var o,r,l=t*(null==img||null===(o=img.banner)||void 0===o?void 0:o.width)/(null==img||null===(r=img.banner)||void 0===r?void 0:r.height);return l>850?850:l<440?440:l}}return 440},convertMode:function(){var t,e={1:"createModeType1",2:"createModeType2",6:"createModeType6",4:"createModeType4",5:"createModeType5",7:"studio",8:"ModelFitting"},n={v5:1,v6:2,4:4,sdxl:5,hy21:6,studio:7,model_beautify:8}[null===(t=this.activeImg)||void 0===t?void 0:t.channel]||1;return e[n]?this.$t("".concat(e[n])):""},isSdModel:function(){var t,e;return[5,"5","sdxl"].includes(null==this||null===(t=this.activeImg)||void 0===t?void 0:t.channel)||[5,"5","sdxl"].includes(null==this||null===(e=this.activeImg)||void 0===e?void 0:e.category)},greenMode:function(){var t;return 2!==(null==this||null===(t=this.userInfo)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.green_mode)},enableGreenMode:function(){return this.greenMode},viewByShared:function(){var t;return"share_link"===(null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.source)},imgCanUpscale:function(){var t,e;return[null===(t=this.activeImg)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.width,null===(e=this.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.height].every((function(t){return 2*t<=4096}))},setI18nPrompt:function(){var t=this.activeImg.meta?this.activeImg.meta.prompt:"",e=this.activeImg.local_prompt;return this.isI18nToggled?e:t},computeLeftVal:function(){var t=this;return function(e){var n=t.fourImgsQuickOperateButtons.filter((function(t){return"U"!=t.buttonType&&"extra-upscale"!=t.buttonType&&t.show})).length;t.existUpscaleExtraUpscale&&!t.existVariationUpscaleExtraUpscale&&(n+=4);var o=(508-40*n)/(2*n),r=2*o+40;if("U"==e.buttonType||"extra-upscale"==e.buttonType)switch(e.name){case"U1":case"extra-upscale1":return{left:o+"px"};case"U2":case"extra-upscale2":return{left:o+r+"px"};case"U3":case"extra-upscale3":return{left:o+2*r+"px"};case"U4":case"extra-upscale4":return{left:o+3*r+"px"}}}},existVariationUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_upscale)},existVariationExtraUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_extra_upscale)},existUpscaleExtraUpscale:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_upscale)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_extra_upscale)},existVariationUpscaleExtraUpscale:function(){var t,e,n;return(null===(t=this.activeImg)||void 0===t||null===(t=t.task_operation)||void 0===t?void 0:t.is_img_2_img)&&(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_upscale)&&(null===(n=this.activeImg)||void 0===n||null===(n=n.task_operation)||void 0===n?void 0:n.is_extra_upscale)},imgIsHide:function(){var t;return!(null==this||null===(t=this.activeImg)||void 0===t||!t.status||1==this.activeImg.status)||!this.determineSelfWork&&1==this.activeImg.primary},quickButtonsIsDisplay:function(){return!this.imgIsHide&&1!=this.activeImg.nsfw&&!this.isAIVideo&&!this.isVideo},isSinglePicture:function(){return 2!=this.activeImg.type},isVideo:function(){var t=this.activeImg||{},e=t.type,n=t.banner,o=void 0===n?{}:n,r=t.sub_channel,l=[6,7].includes(e),c=1!==(null==o?void 0:o.nsfw);return l&&c||"ai_filter_video"===r},isMine:function(){var t,e;return(null===(t=this.activeImg)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id)===(null===(e=this.userInfo)||void 0===e?void 0:e.id)},isShowNewDownload:function(){return this.isAIVideo&&this.isMine},isAIVideo:function(){var t;return 7==(null===(t=this.activeImg)||void 0===t?void 0:t.type)},handleType:function(){var t=this.activeImg,e=t.type,n=t.channel,o=void 0===n?"":n,r=t.sub_channel,l=void 0===r?"":r,c=t.creativity;if(7===(void 0===c?{}:c).type)return"AI Apps";if(this.isAIVideo)return"Video";if("comfyui"===o){if(!l)return"Workflow";if("comf_sys_app"===l||"comf_user_app"===l)return"AI Apps";if(["ai_filter_video","ai_filter"].includes(l))return"ai filter"}return"studio"===o&&4===e||2===e&&"sdxl"===o||4===e&&"sdxl"===o?"cell":6===e?"animate":"upscale"},imageSrc:function(){var t=this.activeImg,e=t.nsfw,o=t.banner;return 1===e?n(217):Object(w.K)(null==o?void 0:o.url,this.isLoadImage?this.$imgH:this.$imgL)},sourceType:function(){var t;if(null!==(t=this.activeImg)&&void 0!==t&&t.creativity.cover.url){var e,n=null===(e=this.activeImg)||void 0===e||null===(e=e.creativity)||void 0===e||null===(e=e.cover)||void 0===e||null===(e=e.url)||void 0===e?void 0:e.split(".").pop();if(["jpg","jpeg","png","gif","bmp","webp"].includes(n))return"image";if(["mp4","avi","mov","wmv","flv","mpeg","mpg","m4v","webm","mkv"].includes(n))return"video"}return""},showToolList:function(){var t,e,n=this,o=(null===(t=this.toolList)||void 0===t?void 0:t.filter((function(t){return 999!==t.sort})))||[],r=(null===(e=this.toolList)||void 0===e?void 0:e.filter((function(t){return 999===t.sort})))||[];if(o.sort((function(a,b){return a.sort-b.sort})),o.length>=6)return o.slice(0,6);var c=6-o.length,d=Object(l.a)(r).sort((function(){return Math.random()-.5})).slice(0,c),v=[].concat(Object(l.a)(o),Object(l.a)(d));return v=v.map((function(t){return t.uri=n.localePath((null==t?void 0:t.uri)||"/ai-tools"),t.cover=t.cover.includes("https")?t.cover:"https://".concat(n.cdnHostFun()).concat(t.cover),t}))},getModelList:function(){var t;return((null===(t=this.activeImg)||void 0===t?void 0:t.models)||[]).map((function(t){return it(it({},t),{},{type:"LoCon"===(null==t?void 0:t.type)?"LyCORIS":"TextualInversion"===(null==t?void 0:t.type)?"embedding1":(null==t?void 0:t.type)||"LORA"})}))},targetItem:function(){return{id:this.activeImg.id,obj_type:1}}}),watch:{appealShow:{handler:function(t){t||(this.appeaData={obj_no:"",obj_type:1,remark:""})}},accountSettingsData:{handler:function(t){this.isI18nToggled=!t.is_off_localization},deep:!0},"$route.query":{handler:function(t){var e=t.u_code;e&&Object(I.A)(e)},immediate:!0},bigImgDialogVisible:function(t){document.body.style.overflow=t?"hidden":"auto"},"defaultData.id":{handler:function(t){t&&this.initPage(t)}}},methods:it(it(it({},Object(C.d)("app",["setImagePageFromPath"])),Object(C.b)("user",["setAdminOff"])),{},{initPage:function(t){var e=this,n=this.defaultData,o=n.author,r=n.cover;this.activeImg=it(it({},this.defaultData),{},{author:o,banner:r,title:""}),this.getImg(t,(function(t){e.relatedImages=[{slotName:"header",tagList:Array.isArray(t)?Object(l.a)(t):[],width:"100%",height:540}],e.getList()}))},assembleParams:function(){var t,e,n,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,k,I=[];null!==(t=this.activeImg)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&null!==(t=t.controlnet_units)&&void 0!==t&&t.length&&(null===(O=this.activeImg)||void 0===O||O.meta.controlnet_units.forEach((function(t){I.push({mode:"ctr_net",image:{url:t.input_image},ctr_net_cond:t})})));null!==(e=this.activeImg)&&void 0!==e&&null!==(e=e.meta)&&void 0!==e&&null!==(e=e.init_images)&&void 0!==e&&e.length&&(null===(x=this.activeImg)||void 0===x||x.meta.init_images.forEach((function(t){I.push({mode:"img2img",image:{url:t}})})));null!==(n=this.activeImg)&&void 0!==n&&null!==(n=n.meta)&&void 0!==n&&null!==(n=n.lab_base)&&void 0!==n&&null!==(n=n.conds)&&void 0!==n&&n.length&&(null===(k=this.activeImg)||void 0===k||null===(k=k.meta)||void 0===k||null===(k=k.lab_base)||void 0===k||k.conds.forEach((function(t){I.push({mode:"StyleReference"===t.mode?"style_ref":"ImagePrompt"===t.mode?"img2img":"ip_maintain",image:{url:t.image}})})));return{title:"",cover:{url:null===(o=this.activeImg)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.url,width:null===(r=this.activeImg)||void 0===r||null===(r=r.banner)||void 0===r?void 0:r.width,height:null===(l=this.activeImg)||void 0===l||null===(l=l.banner)||void 0===l?void 0:l.height},artwork_id:this.$route.params.id,used_models:(null===(c=this.activeImg)||void 0===c?void 0:c.models.map((function(t){return it(it({},t),{},{id:t.id,name:t.name,banner:t.cover,model_type:t.type})})))||[],meta:{cfg_scale:null!==(d=this.activeImg.meta.cfg_scale)&&void 0!==d?d:"",clip_skip:null!==(v=this.activeImg.meta.clip_skip)&&void 0!==v?v:"",width:null!==(h=this.activeImg.meta.width)&&void 0!==h?h:"",height:null!==(f=this.activeImg.meta.height)&&void 0!==f?f:"",negative_prompt:null!==(m=this.activeImg.meta.negative_prompt)&&void 0!==m?m:"",prompt:null!==(_=this.activeImg.local_prompt)&&void 0!==_?_:"",sampler_name:null!==(y=this.activeImg.meta.sampler_name)&&void 0!==y?y:"",steps:null!==(w=this.activeImg.meta.steps)&&void 0!==w?w:"",vae:null!==(C=this.activeImg.meta.vae)&&void 0!==C?C:"",use_image_conditions:I}}},handleNoteVitor:function(){var t=this,e=Object(X.a)({render:function(n){return n(J.default,{props:{params:t.assembleParams(),saveParams:it(it({},t.activeImg),{},{meta:it(it({},t.activeImg.meta),{},{prompt:t.activeImg.local_prompt})}),source:"explore_detail_records"},on:{close:function(){e.close()},save:function(){e.close()}}})}})},handleVolumeChange:function(t){this.videoHasVoice===t.target.muted&&this.$store.commit("app/SET_VIDEO_HAS_VOICE",!this.videoHasVoice)},handleVideoControl:function(t){this.$refs.mainVideo&&(t.isPause?(this.$refs.mainVideo.pause(),this.pauseNum++):this.pauseNum<2?(this.$refs.mainVideo.play(),this.pauseNum--):this.pauseNum--)},handleEscKey:function(t){var e=document.querySelector(".view-image"),n=this.generateViewShow;e||n||"Escape"!==t.key&&27!==t.keyCode||this.$router.back()},viewImage:function(t,e){this.$refs.viewImage.show(t,e.target)},initList:function(){var t=this.relatedImages;null!=t&&t.length&&(this.relatedImages=t.map((function(t){var e=t.banner;return null==e||!e.url||null!=e&&e.replaceUrl||(t.banner.replaceUrl=Object(w.K)(e.url,"low")),t.waterWidth=250,t})))},changeAdminOff:function(){-1!==this.adminOff&&this.setAdminOff(1===this.adminOff?0:1)},openAppealShow:function(){this.appeaData.obj_no=this.activeImg.id,this.appealShow=!0,this.popovervisible=!1},operateButtonMouseEnter:function(t){void 0!==t.showToolTip&&!0!==t.showToolTip||this.$set(t,"showToolTip",!1)},operateButtonMouseLeave:function(t){t.showToolTip||this.$set(t,"showToolTip",!0)},imgLoaded:function(t){var img=t.target,e=img.naturalHeight,n=img.naturalWidth;this.imgNaturalWidth=img.naturalWidth,this.imgNaturalHeight=img.naturalHeight,this.imgHeight=508*e/n,this.imgLoading=!1},imgError:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mainImage";e&&"IMG"===e.tagName&&(e.src=n(217))},handleQuickOperateButtonPermissions:function(){var t=this;if(this.isSinglePicture){var e,n,o,r=["is_upscale","is_extra_upscale","is_make_variations","is_img_2_img","is_remove_background"];this.singleImgQuickOperateButtons.forEach((function(e,n){var o;if(5!==t.activeImg.task_category||["is_make_variations","is_remove_background"].includes(r[n])){if(null!==(o=t.activeImg)&&void 0!==o&&o.task_operation){var l;e.show=null===(l=t.activeImg)||void 0===l?void 0:l.task_operation[r[n]]}}else e.show=!0})),this.singleImgQuickOperateButtons[5].show=(null===(e=this.activeImg)||void 0===e||null===(e=e.task_operation)||void 0===e?void 0:e.is_animation)||!1,this.singleImgQuickOperateButtons[6].show=null===(n=this.activeImg)||void 0===n||null===(n=n.operation)||void 0===n?void 0:n.is_visibility,this.singleImgQuickOperateButtons[6].icon=1==this.activeImg.primary?"work-hide":"work-show",this.singleImgQuickOperateButtons[6].title=1==this.activeImg.primary?this.$t("primaryTipShow"):this.$t("primaryTipHide"),this.singleImgQuickOperateButtons[7].show=this.determineSelfWork&&1!==(null==this||null===(o=this.activeImg)||void 0===o?void 0:o.nsfw)&&!this.isCompanyAccount,this.singleImgQuickOperateButtons[8].show=this.determineSelfWork;var l=this.activeImg,c=l.type;"comfyui"===l.channel&&(this.singleImgQuickOperateButtons[5].show=!1,this.singleImgQuickOperateButtons[7].show=!1),7!==c&&(this.singleImgQuickOperateButtons[9].show=!0),this.$nextTick((function(){var e,n=null===(e=t.$refs)||void 0===e||null===(e=e.AiChatByDetailsRef)||void 0===e?void 0:e.showIconAlways;t.singleImgQuickOperateButtons[10].show=n}))}else{var d,v,h={V:"is_img_2_img",U:"is_upscale","extra-upscale":"is_extra_upscale","remove-background":"is_remove_background"};this.fourImgsQuickOperateButtons.forEach((function(e,n){var o,r;null!==(o=t.activeImg)&&void 0!==o&&o.task_operation&&e.buttonType&&(e.show=t.activeImg.task_operation[h[e.buttonType]]),null!==(r=t.activeImg)&&void 0!==r&&null!==(r=r.grip_refers)&&void 0!==r&&r.length&&n<=11&&(e.disabled=1===t.activeImg.grip_refers[n%4].nsfw||t.activeImg.grip_refers[n%4].disable)})),this.fourImgsQuickOperateButtons[13].show=this.determineSelfWork&&1==(null===(d=this.activeImg)||void 0===d?void 0:d.type)&&(null===(v=this.paymentInfo)||void 0===v?void 0:v.activeState),this.fourImgsQuickOperateButtons[13].icon=1==this.activeImg.primary?"work-hide":"work-show",this.fourImgsQuickOperateButtons[13].title=1==this.activeImg.primary?this.$t("primaryTipShow"):this.$t("primaryTipHide"),this.fourImgsQuickOperateButtons[14].show=this.determineSelfWork}},viewBigImage:function(){this.isVideo||(this.bigImgDialogVisible=!0)},closeViewBigImage:function(){this.bigImgDialogVisible=!1},wordsCopy:function(){var t=this;this.copied=!0;var e=this.activeImg.meta?this.activeImg.meta.prompt:"",n=this.activeImg.local_prompt;this.copyTextToClipboard(this.isI18nToggled?n:e),this.$logEvent("log_actions",{operation:"click_prompt_copy",behavior_info:"on_work_detail_page"}),setTimeout((function(){t.copied=!1}),1e3)},wordTranslate:function(){this.isI18nToggled=!this.isI18nToggled,this.$logEvent("log_actions",{operation:"click_prompt_translate",behavior_info:"on_work_detail_page"})},backTo:function(){var t;if(null!==(t=this.defaultData)&&void 0!==t&&t.id)return this.$EventBus.$emit("hideDialog","ImageDetailPop"),void window.history.back();this.$cookies.set("isCache","1"),this.$refs.frameDtl?this.$refs.frameDtl.backTo():this.$router.back()},handleQuickOperate:function(){var t,e,n,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isLoggedIn)if(r.disabled)this.$message.error(this.$t("ForbiddenButton"));else if(1!=this.fastOperateLoading){var l={};if(l.art_work_no=this.activeImg.art_work_no?this.activeImg.art_work_no:this.activeImg.id,"U"===r.buttonType)return l.operate_number=r.buttonNum,l.action=2,void this.fastOperateTask(l,this.activeImg.type);if("V"===r.buttonType)return l.operate_number=r.buttonNum,l.action=3,void this.fastOperateTask(l,this.activeImg.type);if("extra-upscale"!==r.buttonType)switch(r.name){case"extra-upscale":this.imgCanUpscale?(l.action=6,this.fastOperateTask(l)):this.$message.warning(this.$t("ImageSizeExceedsError"));break;case"work-post":var c={id:null==this||null===(t=this.activeImg)||void 0===t?void 0:t.id,url:null==this||null===(e=this.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.url};this.$logEvent("log_actions",{operation:"click_post_picture_button",behavior_info:"on_self_work_hover",behavior_info_sub:null==this||null===(n=this.activeImg)||void 0===n?void 0:n.id}),this.$EventBus.$emit("openContribution",{selectedData:[c],types:[Y.CONTRIBUTION_TYPE_ENUM.WORK],source:"detail"});break;case"variation":l.type="variation",l.action=3,this.fastOperateTask(l);break;case"animGen":l.type="animGen",l.action=24,this.fastOperateTask(l);break;case"originality-upscale":l.action=2,this.fastOperateTask(l);break;case"picture-create-picture":l.action=3,this.fastOperateTask(l);break;case"remove-background":l.action=7,l.removeBgUrl=(null===(o=this.activeImg)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.url)||"",this.fastOperateTask(l);break;case"work-hide-show":this.handleWorkHideOrShow();break;case"work-delete":this.handleWorkDelete();break;case"aiGenerateVideo":this.handleAiGenerateVideo();break;case"aiChartMsg":this.HandAiChartMsg()}else this.imgCanUpscale?(l.operate_number=r.buttonNum,l.action=6,this.fastOperateTask(l,this.activeImg.type)):this.$message.warning(this.$t("ImageSizeExceedsError"))}else this.$message({message:this.$t("wait"),type:"error"});else this.$EventBus.$emit("openLoginDialog")},handleWorkHideOrShow:function(){var t,e,n=this;if(this.paymentInfo.show_auto_pub_switch){var o={id:(null===(t=this.activeImg)||void 0===t?void 0:t.id)||"",is_visible:1==(null===(e=this.activeImg)||void 0===e?void 0:e.primary)};this.hidePopover(),this.globalLoading=!0,Object(y.b)(o).then((function(t){var e,o,r;1e4==(null==t||null===(e=t.status)||void 0===e?void 0:e.code)?(n.$message({message:n.$t("".concat(1==(null===(o=n.activeImg)||void 0===o?void 0:o.primary)?"WorksPublished":"WorksHidden")),type:"success"}),n.$set(n.activeImg,"primary",1==n.activeImg.primary?2:1),n.$set(n.isSinglePicture?n.singleImgQuickOperateButtons[6]:n.fourImgsQuickOperateButtons[13],"icon",1==n.activeImg.primary?"work-hide":"work-show"),n.$set(n.isSinglePicture?n.singleImgQuickOperateButtons[6]:n.fourImgsQuickOperateButtons[13],"title",1==n.activeImg.primary?n.$t("primaryTipShow"):n.$t("primaryTipHide")),n.$logEvent("log_actions",{operation:1==n.activeImg.primary?"click_work_public":"click_work_hidden"})):n.$message({message:(null==t||null===(r=t.status)||void 0===r?void 0:r.msg)||n.$t("ServerError"),type:"error"})})).finally((function(){n.globalLoading=!1}))}else this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic")},handleAiGenerateVideo:function(){var t;this.$logEvent("log_actions",{operation:"click_video_generate",behavior_info:"on_work_detail_page"}),this.isLoggedIn?this.handleSelectVideoModel({},null===(t=this.activeImg)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.url):this.$EventBus.$emit("openLoginDialog")},HandAiChartMsg:function(){this.$refs.AiChatByDetailsRef.handleClickChat()},handleSelectVideoModel:function(t,e){var n=Object.assign({},t,{imageToVideoUrl:e});this.$EventBus.$emit("openGenerate",{action:0,taskVersion:"v2",data:{source:n}})},handleWorkDelete:function(){var t=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e={id:t.activeImg.id};t.globalLoading=!0,Object(y.a)(e).then((function(e){var n,o;1e4==(null==e||null===(n=e.status)||void 0===n?void 0:n.code)?(t.$message({message:t.$t("deleteSuccess"),type:"success"}),t.setWaterFallDeleteLits(t.activeImg.id),t.$router.back()):t.$message({message:(null==e||null===(o=e.status)||void 0===o?void 0:o.msg)||t.$t("ServerError"),type:"error"})})).finally((function(){t.globalLoading=!1}))})).catch((function(t){console.log("err",t)}))},imgDetail:function(){var t,e=(null===(t=this.defaultData)||void 0===t?void 0:t.id)||this.$route.params.id;e?(this.isLocale&&this.setLocale(e),this.handleImageData(this.activeImg),this.getDetailDynamicData(this.activeImg)):this.$router.push(this.localePath("/"))},getDetailDynamicData:function(data){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.u)({obj_id:t.activeImg.id,obj_type:1});case 2:o=e.sent,t.activeImg=Object.assign({},t.activeImg,o),t.videoConfig.url=(null===(n=t.activeImg)||void 0===n||null===(n=n.banner)||void 0===n?void 0:n.url)||"";case 5:case"end":return e.stop()}}),e)})))()},setLocale:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,title,l,c,d,v,h,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.activeImg||{},title=r.title,l=r.local_prompt,n.prev=1,n.next=4,Object(_.c)({id:t,titles:[title,l],enable_filter:1});case 4:c=n.sent,d=c.data.titles,v=d||[],h=Object(o.a)(v,2),f=h[0],m=h[1],e.activeImg.title=f,e.activeImg.local_prompt=m,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),e.activeImg.title=title,e.activeImg.local_prompt=l;case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},solveScrollbarStyle:function(){var t=document.getElementsByClassName("imgpage-inner")[0],e=(null==t?void 0:t.offsetHeight)<=window.innerHeight;document.body.style.overflow=this.isShowNullRelatedImg&&e?"hidden":"auto"},getList:function(){var t,e=this;if(null==this||null===(t=this.activeImg)||void 0===t||!t.id||this.noMoreRelated)return this.relatedLoading=!1,void(!this.noMoreRelated&&(this.isShowNullRelatedImg=!0));var n={page:this.page,page_size:35,obj_ids:[this.activeImg.id]};this.relatedLoading=!0,Object(_.a)(n).then((function(t){var n=(t.data||{}).items;if(null==n||!n.length)return e.noMoreRelated=!0,e.isShowNullRelatedImg=!0,void e.solveScrollbarStyle();!0===t.data.has_more?(e.noMoreRelated=!1,e.page+=1):(e.alreadyNoMoreData=!0,e.noMoreRelated=!0),e.time_to=t.data.time_ms,e.relatedImages=e.relatedImages.concat(Object(w.o)(n))})).finally((function(){e.relatedLoading=!1}))},goModelDtl:function(t){var e,n={action:"view",obj_no:t,obj_type:2,category:"default",batch_id:"",negative_ids:[],view_domain:"details_one"};(Object(A.i)({items:[n]}),t)&&(null===(e=window)||void 0===e||e.open(this.localePath("/models/detail/".concat(t)),"_blank"))},openPlayDoor:function(){var t=this,e=this.activeImg,n=e.banner,o=e.id,r=Object(w.v)(n.url);this.$logEvent("log_actions",{operation:"click_".concat(r,"_portal"),behavior_info:"on_image_detail_page"}),this.$EventBus.$emit("showDialog",{name:"HyAssembleModal",data:{doorCode:"video"===r?"aiVideoApp":"aiImageApp",artWorkNo:o,workUrl:n.url,source:4,objType:1,onAfterAction:function(){t.$EventBus.$emit("hideDialog","HyAssembleModal")}}}),this.$EventBus.$emit("videoControl",{isPause:!0})},handlePlay:function(){var t,e,n,o,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"work",c=this.activeImg.banner,d=Object(w.v)(c.url);if(this.$logEvent("log_actions",{operation:"click_to_generate_same",behavior_info:l}),7!==(null===(t=this.activeImg)||void 0===t||null===(t=t.creativity)||void 0===t?void 0:t.type))if(6!==(null===(e=this.activeImg)||void 0===e||null===(e=e.creativity)||void 0===e?void 0:e.type)){var v,h;if("comfyui"===(null===(n=this.activeImg)||void 0===n?void 0:n.channel)&&null!==(o=this.activeImg)&&void 0!==o&&null!==(o=o.creativity)&&void 0!==o&&o.id)return this.$router.push(this.localePath({path:"/workFlowAppDetail/".concat(null===(v=this.activeImg.creativity)||void 0===v?void 0:v.id,"?task=mix-").concat(null===(h=this.activeImg)||void 0===h?void 0:h.id)}));this.moreActions({type:"play",id:null===(r=this.activeImg)||void 0===r?void 0:r.id,fromPage:"exploreDetail",needLogin:"video"!==d})}else{var f;this.moreActions({type:"play",id:null===(f=this.activeImg)||void 0===f?void 0:f.id,fromPage:"exploreDetail"})}else this.$router.push(this.localePath({path:"/ai-tools/ai-face-swap",query:{artWorkNo:this.$route.params.id}}))},goHome:function(){this.$router.replace(this.localePath("/"))},playerReady:function(t){var e=t.player,n=t.Events;e.on(n.LOADED_DATA,(function(){e.play()}))},wordsCopyScreen:function(t){this.$logEvent("log_actions",{operation:"click_prompt_search",behavior_info:"on_work_detail_page"}),sessionStorage.setItem("search_source_type","prompt_search"),this.$router.push(this.localePath("/search/".concat(t)))}}),head:function(){var t,e,n=(null==this?void 0:this.activeImg)||{},o=n.author,r=void 0===o?{}:o,l=n.local_prompt,c=void 0===l?"":l,d=n.banner,v=void 0===d?{}:d,h=n.categories,title=n.title,f=n.id,meta=n.meta,m=n.stat,_=n.created_at,y=null==v||null===(t=v.url)||void 0===t?void 0:t.includes(".mp4"),w=null==h?void 0:h.toString(),C="".concat(title," - SeaArt AI").concat(y?" Video":""),O=c||w||C,x="https://image.cdn2.seaart.ai/static/upload/20240105/74f78417-21a7-457b-ac87-eafcaf8abf61.webp",k=f?"https://www.seaart.ai/explore/detail/".concat(f,"?source=share_link"):"https://www.seaart.ai",I=y?null==v?void 0:v.url:null==meta||null===(e=meta.generate_video)||void 0===e||null===(e=e.image_opts)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url,j={"@context":"https://schema.org","@type":y?"VideoObject":"ImageObject",contentUrl:(null==v?void 0:v.url)||x,creator:{name:(null==r?void 0:r.name)||"SeaArt","@type":"Person"},creditText:(null==r?void 0:r.name)||"SeaArt",copyrightNotice:(null==r?void 0:r.name)||"SeaArt",license:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html",acquireLicensePage:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html"};return y&&(j.duration="PT00H0M5S",j.name=C,j.description=O,j.thumbnailUrl=I||x,j.uploadDate=_?new Date(_).toISOString():"",j.interactionStatistic={"@type":"InteractionCounter",interactionType:{"@type":"WatchAction"},userInteractionCount:(null==m?void 0:m.num_of_view)||0}),{title:C,meta:[{hid:"description",name:"description",content:O},{hid:"keywords",name:"keywords",content:w},{hid:"og:title",property:"og:title",content:title},{hid:"og:description",property:"og:description",content:"".concat(O," ").concat("#SeaArt #AIart #AIイラスト #stablediffusion")},{hid:"og:image",name:"og:image",content:(null==v?void 0:v.url)||x},{hid:"og:site_name",property:"og:site_name",content:"https://www.seaart.ai"},{hid:"og:url",property:"og:url",content:k},{name:"twitter:url",content:k},{hid:"twitter:image",name:"twitter:image",content:(null==v?void 0:v.url)||x},{property:"twitter:image",content:(null==v?void 0:v.url)||x},{name:"twitter:title",content:title},{name:"twitter:description",content:O},{name:"twitter:site",content:"@SeaArt_Ai"},{name:"twitter:creator",content:(null==r?void 0:r.name)||"@SeaArt_Ai"},{name:"twitter:card",content:"summary_large_image"}],link:[{rel:"canonical",href:k}],script:[{type:"application/ld+json",json:j}],__dangerouslyDisableSanitizers:["script"]}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,d,v,h,param,f,m,_,y,C,data,O,x,k,I,j,S,$,P,T,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$axios,t.app,c=t.params,d=t.error,v=t.route,h=c.id,param={id:h},(null==v||null===(n=v.query)||void 0===n?void 0:n.source)&&(param.source="share_link"),e.prev=5,f=Date.now(),m={page_size:35,page:1,obj_ids:[h]},e.next=10,Promise.all([r.post("/api/v1/artwork/detail",param),r.$post("/api/v1/square/v3/artwork/associated",m),r.$post("/api/v1/tool/ai-tools/list")]);case 10:if(_=e.sent,y=Object(o.a)(_,3),C=y[0],data=C.data.data,O=C.headers,x=y[1].data,k=y[2].data,I=void 0===k?[]:k,data){e.next=20;break}return e.abrupt("return",d({statusCode:404,message:"Not Found"}));case 20:if(S=(j=x||{items:[],time_ms:0}).items,$=j.time_ms,P=(data||{}).show_tags,data){e.next=24;break}throw new Error("");case 24:return T="normal"===O["x-account-type"],D=[{slotName:"header",tagList:Array.isArray(P)?Object(l.a)(P):[],width:"100%",height:540}].concat(Object(l.a)(S)),console.log("作品详情页-> asyncData耗时",Date.now()-f),e.abrupt("return",{activeImg:data||{},relatedImages:Object(w.o)(D),isLocale:T,time_to:$,page:2,toolList:I});case 30:e.prev=30,e.t0=e.catch(5),console.log("作品详情页-> asyncData错误啦：",e.t0),d({statusCode:404,message:e.t0});case 34:case"end":return e.stop()}}),e,null,[[5,30]])})))()}},nt=at,ot=(n(4842),n(4843),Object(N.a)(nt,(function(){var t,e,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,k=this,I=k._self._c;return I("div",{directives:[{name:"loading",rawName:"v-loading",value:k.globalLoading,expression:"globalLoading"}],ref:"image-gallery",staticClass:"image-gallery"},[I("el-backtop",{attrs:{bottom:30,right:30}},[I("i",{staticClass:"el-icon-top"})]),k._v(" "),I("div",{staticClass:"mobile-back-to",on:{click:function(t){return t.stopPropagation(),k.backTo.apply(null,arguments)}}},[I("i",{staticClass:"el-icon-back"})]),k._v(" "),null!==(t=k.activeImg)&&void 0!==t&&t.id?I("div",{staticClass:"imgpage-content flex",on:{click:k.hidePopover}},[I("div",{staticClass:"imgpage-inner",attrs:{"data-group":"work-page-image-info"}},[I("FrameDtl",{ref:"frameDtl",attrs:{imgIsHide:k.imgIsHide,type:"work",workId:null===(e=k.defaultData)||void 0===e?void 0:e.id},scopedSlots:k._u([{key:"title",fn:function(){var t;return[I("h1",{staticClass:"seo-title text-no-wrap",style:{width:k.isClient?k.imgWidth+450+"px":"900px"}},[k._v("\n              "+k._s((null===(t=k.activeImg)||void 0===t?void 0:t.title)||"")+"\n            ")])]},proxy:!0}],null,!1,960068267)},[k._v(" "),I("div",{directives:[{name:"loading",rawName:"v-loading",value:k.getImgLoading,expression:"getImgLoading"}],staticClass:"imgpage-image flex",style:{width:k.isClient?k.imgWidth+"px":""}},[I("div",{staticClass:"image-container flex",class:[(null===(o=k.activeImg)||void 0===o?void 0:o.work_frame)&&"work-frame-box"]},[k.isVideo?I("video",{ref:"mainVideo",attrs:{src:null===(r=k.activeImg.banner)||void 0===r?void 0:r.url,autoplay:"",loop:"",controls:!0,controlsList:"nodownload"},domProps:{muted:!k.videoHasVoice},on:{play:function(t){return k.imgLoaded(t)},contextmenu:function(t){t.preventDefault()},volumechange:k.handleVolumeChange}}):I("img",{directives:[{name:"show",rawName:"v-show",value:!k.imageSrc.endsWith(".mp4"),expression:"!imageSrc.endsWith('.mp4')"}],ref:"mainImage",attrs:{alt:k.activeImg.local_prompt,src:k.imageSrc,width:null===(l=k.activeImg)||void 0===l||null===(l=l.banner)||void 0===l?void 0:l.width,height:null===(c=k.activeImg)||void 0===c||null===(c=c.banner)||void 0===c?void 0:c.height},on:{load:function(t){return k.imgLoaded(t)},click:function(t){var e;return k.viewImage(null===(e=k.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.url,t)},error:function(t){var e;return k.imgError(null===(e=k.activeImg)||void 0===e?void 0:e.banner,k.$refs.mainImage)}}}),k._v(" "),I("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[k.isVideo||k.isAIVideo?k._e():I("AiChatByDetails",{ref:"AiChatByDetailsRef",attrs:{chatObj:k.activeImg}})],1),k._v(" "),null!==(d=k.activeImg)&&void 0!==d&&null!==(d=d.banner)&&void 0!==d&&d.url?I("hy-tips-button",{staticClass:"tips-btn",attrs:{data:{artWorkNo:null===(v=k.activeImg)||void 0===v?void 0:v.id,workUrl:null===(h=k.activeImg)||void 0===h||null===(h=h.banner)||void 0===h?void 0:h.url,source:4,objType:4}}}):k._e()],1),k._v(" "),I("div",{directives:[{name:"show",rawName:"v-show",value:"B"===k.ABInfo.has_portal_modal&&k.quickButtonsIsDisplay&&k.isMine,expression:"ABInfo.has_portal_modal === 'B' && quickButtonsIsDisplay && isMine"}],ref:"quickOperateButtons",staticClass:"quick-operate-buttons",on:{click:k.viewBigImage}},[I("div",{staticClass:"button-container"},[k.isSinglePicture?I("div",{staticClass:"single-picture-container"},[k._l(k.singleImgQuickOperateButtons,(function(t,e){return[t.show?I("el-tooltip",{key:e,attrs:{"popper-class":"quick-button-title",effect:"light",placement:"top",disabled:t.showToolTip,content:t.title}},[I("div",{staticClass:"operate-button",class:t.name,on:{click:function(e){return e.stopPropagation(),k.handleQuickOperate(t)},mouseenter:function(e){return k.operateButtonMouseEnter(t)},mouseleave:function(e){return k.operateButtonMouseLeave(t)}}},[t.icon?I("i",{staticClass:"iconfont icon-hover",class:"icon-".concat(t.icon)}):t.icon_name?I("span",[k._v(k._s(t.icon_name))]):I("span",[k._v(k._s(t.name))])])]):k._e()]}))],2):I("div",{staticClass:"four-picture-container",class:{"exist-variation-upscale":k.existVariationUpscale,"exist-variation-extraUpscale":k.existVariationExtraUpscale,"exist-upscale-extraUpscale":k.existUpscaleExtraUpscale,"exist-variation-upscale-extraUpscale":k.existVariationUpscaleExtraUpscale}},[k._l(k.fourImgsQuickOperateButtons,(function(t,e){return[t.show?I("el-tooltip",{key:e,attrs:{"popper-class":"quick-button-title",effect:"light",placement:"top",disabled:t.showToolTip,content:t.title}},[I("div",{staticClass:"operate-button",class:t.buttonType||t.name,style:k.computeLeftVal(t),attrs:{id:t.name},on:{click:function(e){return e.stopPropagation(),k.handleQuickOperate(t)},mouseenter:function(e){return k.operateButtonMouseEnter(t)},mouseleave:function(e){return k.operateButtonMouseLeave(t)}}},[t.icon?I("i",{staticClass:"iconfont icon-hover",class:"icon-".concat(t.icon)}):I("span",[k._v(k._s(t.name))])])]):k._e()]}))],2)])])]),k._v(" "),I("div",{staticClass:"imgpage-info",staticStyle:{width:"450px",padding:"0 24px"}},[I("Author",{attrs:{type:"work",activeImg:k.activeImg}},[("comfyui"===k.activeImg.channel?null===(f=k.activeImg)||void 0===f||null===(f=f.creativity)||void 0===f?void 0:f.id:3!=(null===(m=k.activeImg)||void 0===m?void 0:m.type)||7==(null===(_=k.activeImg)||void 0===_||null===(_=_.creativity)||void 0===_?void 0:_.type))?I("button",{staticClass:"right-btn button-try",class:k.isLoggedIn?"":"disabled",on:{click:function(t){return k.handlePlay("work")}}},[k._v("\n                "+k._s(k.$t("Remix"))+"\n              ")]):k._e()]),k._v(" "),null!==(y=k.activeImg)&&void 0!==y&&y.id?I("CmtComments",{attrs:{infos:k.activeImg,type:1,dotReportInfo:k.dotReportInfo},scopedSlots:k._u([{key:"cmtInner",fn:function(){var t,e,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,j,S,$,P,T,D,L,A;return["supportMetaNote"===(null===(t=k.activeImg)||void 0===t||null===(t=t.operation_label_items)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.label)?I("div",{staticClass:"note-vitor-container"},[I("span",{staticClass:"note-vitor-title"},[k._v(k._s(k.$t("GenerationData")))]),k._v(" "),I("div",{staticClass:"note-vitor-record",on:{click:k.handleNoteVitor}},[I("i",{staticClass:"iconfont icon-BIJI"}),k._v(" "),I("span",[k._v(k._s(k.$t("NoteVitorRecord")))])])]):k._e(),k._v(" "),k.activeImg.prompt||null!==(e=k.activeImg)&&void 0!==e&&null!==(e=e.meta)&&void 0!==e&&e.prompt?I("div",{staticClass:"description"},[I("div",{staticClass:"header",class:{"border-clear":"supportMetaNote"===(null===(o=k.activeImg)||void 0===o||null===(o=o.operation_label_items)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.label)}},[I("div",{staticClass:"header-left"},[I("div",{staticClass:"title"},[k._v(k._s(k.$t("Prompt")))]),k._v(" "),I("div",{staticClass:"header-copy"},[I("div",{staticClass:"prompt-copy",class:{copied:k.copied},on:{click:function(t){return k.wordsCopy()}}},[I("i",{directives:[{name:"show",rawName:"v-show",value:k.copied,expression:"copied"}],staticClass:"iconfont icon-success"}),k._v(" "),I("i",{directives:[{name:"show",rawName:"v-show",value:!k.copied,expression:"!copied"}],staticClass:"iconfont icon-copy"}),k._v("\n                          "+k._s(k.$t("CopyPrompts"))+"\n                        ")])]),k._v(" "),I("div",{staticClass:"header-trans",on:{click:k.wordTranslate}},[I("i",{staticClass:"iconfont icon-i18n_prompt",staticStyle:{color:"#93a2b6"}})])])]),k._v(" "),I("div",{ref:"promptContainer",staticClass:"prompt-container"},[I("HyWordHigh",{attrs:{text:k.setI18nPrompt},on:{onCopy:k.wordsCopyScreen}})],1)]):k._e(),k._v(" "),null!==(r=k.activeImg)&&void 0!==r&&r.meta&&Object.keys(k.activeImg.meta).length?I("div",{staticClass:"model-info"},[I("div",{staticClass:"header flex items-center"},[I("div",{staticClass:"title"},[k._v(k._s(k.$t("INFO")))]),k._v(" "),null!==(l=k.activeImg)&&void 0!==l&&l.meta&&Object.keys(k.activeImg.meta).length?I("span",{on:{click:function(t){t.stopPropagation(),k.infovisible=!k.infovisible}}},[I("el-popover",{staticStyle:{padding:"0"},attrs:{"popper-class":"metaPoper",placement:"right","visible-arrow":!1,trigger:"hover"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:k.infovisible,callback:function(t){k.infovisible=t},expression:"infovisible"}},[I("MetaTooltipVue",{attrs:{sourceFrom:"imageDetail",category:null===(c=k.activeImg)||void 0===c?void 0:c.channel,meta:null===(d=k.activeImg)||void 0===d?void 0:d.meta,model:(null===(v=k.activeImg)||void 0===v?void 0:v.model_id)||(null===(h=k.activeImg)||void 0===h?void 0:h.artwork_no),"model-name":null===(f=k.activeImg)||void 0===f?void 0:f.model_name},on:{copyGenerationData:function(t){var e;return k.moreActions({type:"play",id:null===(e=k.activeImg)||void 0===e?void 0:e.id,fromPage:"exploreDetail"})}}}),k._v(" "),I("span",{staticClass:"carousel-icon",attrs:{slot:"reference"},slot:"reference"},[I("i",{staticClass:"iconfont icon-work-tips work-tips"})])],1)],1):k._e()]),k._v(" "),I("el-row",{staticClass:"meta-content flex flex-col",attrs:{type:"flex"}},[I("div",{staticClass:"info flex"},[I("span",{staticClass:"item"},[I("div",{staticClass:"name"},[k._v(k._s(k.$t("Size")))]),k._v(" "),I("div",{staticClass:"value"},[k._v("\n                          "+k._s(k.activeImg.banner.width+"X"+k.activeImg.banner.height)+"\n                        ")])]),k._v(" "),I("span",{staticClass:"item"},[I("div",{staticClass:"name"},[k._v(k._s(k.$t("Date")))]),k._v(" "),I("div",{staticClass:"value"},[k._v(k._s(k.formatDate(k.activeImg.created_at)))])]),k._v(" "),I("span",{directives:[{name:"show",rawName:"v-show",value:k.convertMode,expression:"convertMode"}],staticClass:"item"},[I("div",{staticClass:"name"},[k._v(k._s(k.$t("createModeTitle")))]),k._v(" "),I("div",{staticClass:"value"},[k._v(k._s(k.convertMode))])]),k._v(" "),I("span",{staticClass:"item"},[I("div",{staticClass:"name"},[k._v(k._s(k.$t("Type")))]),k._v(" "),I("div",{staticClass:"value"},[k._v("\n                          "+k._s(k.handleType)+"\n                        ")])])])]),k._v(" "),(null===(m=k.getModelList)||void 0===m?void 0:m.length)>0?I("div",{directives:[{name:"show",rawName:"v-show",value:"comfyui"!==k.activeImg.channel,expression:"activeImg.channel !== 'comfyui'"}],staticClass:"model-seo-name"},[k._v("\n                    "+k._s(k.$t("Checkpoint")+" & "+k.$t("LoRA"))+"\n                  ")]):k._e(),k._v(" "),(null===(_=k.getModelList)||void 0===_?void 0:_.length)>0&&"comfyui"!=k.activeImg.channel?I("div",{staticClass:"models flex flex-wrap"},k._l(k.getModelList,(function(t,i){var e,o,r;return I("a",{key:"model_".concat(i),staticClass:"model-item flex items-center",attrs:{href:k.localePath("/models/detail/".concat(t.id))},on:{click:function(e){return e.preventDefault(),k.goModelDtl(t.id)}}},[null!=t&&null!==(e=t.cover)&&void 0!==e&&e.url&&1!==(null==t||null===(o=t.cover)||void 0===o?void 0:o.nsfw)?I("img",{ref:"modelCover".concat(i),refInFor:!0,staticClass:"model-cover",attrs:{src:"".concat(k.getImagUrl(null==t||null===(r=t.cover)||void 0===r?void 0:r.url,k.$imgL)||""),alt:t.name},on:{error:function(e){return k.imgError(null==t?void 0:t.cover,k.$refs["modelCover".concat(i)])}}}):I("img",{staticClass:"model-cover",attrs:{src:n(217),alt:""}}),k._v(" "),I("div",{staticClass:"model-cont flex flex-col"},[I("div",{staticClass:"model-type"},[I("span",{class:{isLora:"Checkpoint"!==(null==t?void 0:t.type)}},[k._v(k._s(k.$t(null==t?void 0:t.type)))])]),k._v(" "),I("div",{staticClass:"model-name text-no-wrap-2"},[k._v(k._s(t.name))])])])})),0):k._e(),k._v(" "),"comfyui"===k.activeImg.channel&&null!==(y=k.activeImg)&&void 0!==y&&null!==(y=y.creativity)&&void 0!==y&&y.id?I("div",{staticClass:"models flex flex-wrap"},[I("div",{staticClass:"model-item flex items-center",on:{click:function(t){return k.handlePlay()}}},["image"===k.sourceType?[I("img",{staticClass:"model-cover",attrs:{src:"".concat(k.getImagUrl(null===(w=k.activeImg)||void 0===w||null===(w=w.creativity)||void 0===w||null===(w=w.cover)||void 0===w?void 0:w.url,k.$imgL)||""),alt:null===(C=k.activeImg)||void 0===C||null===(C=C.creativity)||void 0===C?void 0:C.name}})]:k._e(),k._v(" "),"video"===k.sourceType?[I("video",{staticClass:"model-cover",attrs:{src:null===(O=k.activeImg)||void 0===O||null===(O=O.creativity)||void 0===O||null===(O=O.cover)||void 0===O?void 0:O.url,autoplay:"",loop:"",controls:!1,muted:""},domProps:{muted:!0}})]:k._e(),k._v(" "),I("div",{staticClass:"model-cont flex flex-col"},[I("div",{staticClass:"model-type"},[I("span",[k._v("\n                            "+k._s(k.appTypeText)+"\n                          ")])]),k._v(" "),I("div",{staticClass:"model-name text-no-wrap-2"},[k._v(k._s(null===(x=k.activeImg)||void 0===x||null===(x=x.creativity)||void 0===x?void 0:x.name))])])],2)]):k._e(),k._v(" "),7==(null===(j=k.activeImg)||void 0===j||null===(j=j.creativity)||void 0===j?void 0:j.type)?I("div",{staticClass:"models flex flex-wrap"},[I("div",{staticClass:"model-item flex items-center",on:{click:function(t){return k.handlePlay()}}},["image"===k.sourceType?[I("img",{staticClass:"model-cover",attrs:{src:"".concat(k.getImagUrl(null===(S=k.activeImg)||void 0===S||null===(S=S.creativity)||void 0===S||null===(S=S.cover)||void 0===S?void 0:S.url,k.$imgL)||""),alt:null===($=k.activeImg)||void 0===$||null===($=$.creativity)||void 0===$?void 0:$.name}})]:k._e(),k._v(" "),"video"===k.sourceType?[I("video",{staticClass:"model-cover",attrs:{src:null===(P=k.activeImg)||void 0===P||null===(P=P.creativity)||void 0===P||null===(P=P.cover)||void 0===P?void 0:P.url,autoplay:"",loop:"",controls:!1,muted:""},domProps:{muted:!0}})]:k._e(),k._v(" "),I("div",{staticClass:"model-cont flex flex-col"},[I("div",{staticClass:"model-type"},[I("span",[k._v("\n                            "+k._s(k.appTypeText)+"\n                          ")])]),k._v(" "),I("div",{staticClass:"model-name text-no-wrap-2"},[k._v(k._s(null===(T=k.activeImg)||void 0===T||null===(T=T.creativity)||void 0===T?void 0:T.name))])])],2)]):k._e(),k._v(" "),null!==(D=k.activeImg)&&void 0!==D&&D.tags&&(null===(L=k.activeImg)||void 0===L||null===(L=L.tags)||void 0===L?void 0:L.length)>0?I("div",{staticClass:"tag-items flex flex-wrap"},k._l(null===(A=k.activeImg)||void 0===A?void 0:A.tags,(function(t,i){return I("div",{key:"tag_".concat(i),staticClass:"tag-item"},[t.id?[I("a",{attrs:{target:"_self",href:"/tagInfo/"+t.id,"data-event":"click_tag","data-id":t.id},on:{click:function(e){return e.preventDefault(),k.goTagDtl(t,"work_detials")}}},[k._v("#"+k._s(null==t?void 0:t.title))])]:k._e()],2)})),0):k._e()],1):k._e()]},proxy:!0},{key:"cmtMore",fn:function(){var t,e,n,o,r,l,c;return[I("div",{staticClass:"commFunNum",on:{click:function(t){t.stopPropagation(),k.popovervisible=!k.popovervisible}}},[I("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"},model:{value:k.popovervisible,callback:function(t){k.popovervisible=t},expression:"popovervisible"}},[I("div",{staticClass:"pop-btns flex"},[null!==(t=k.activeImg)&&void 0!==t&&t.author&&(null===(e=k.activeImg)||void 0===e?void 0:e.author.id)==k.userInfo.id?k._e():I("NoLike",{attrs:{targetItem:k.targetItem,isBack:""}},[I("button",[k._v("\n                          "+k._s(k.$t("dislike"))+"\n                        ")])]),k._v(" "),I("Report",{attrs:{targetItem:k.targetItem,isBack:""}},[I("button",[k._v("\n                          "+k._s(k.$t("Report"))+"\n                        ")])]),k._v(" "),I("button",{directives:[{name:"show",rawName:"v-show",value:null===(n=k.activeImg)||void 0===n||null===(n=n.operation)||void 0===n?void 0:n.is_visibility,expression:"activeImg?.operation?.is_visibility"}],attrs:{"data-event":"activeImg?.primary == 1 ? 'click_hide' : 'click_show'","data-id":k.activeImg.id},on:{click:k.handleWorkHideOrShow}},[k._v("\n                        "+k._s(k.$t(1==(null===(o=k.activeImg)||void 0===o?void 0:o.primary)?"createSetting1":"createSetting2"))+"\n                      ")]),k._v(" "),I("button",{directives:[{name:"show",rawName:"v-show",value:k.determineSelfWork&&1==(null===(r=k.activeImg)||void 0===r?void 0:r.nsfw),expression:"determineSelfWork && activeImg?.nsfw == 1"}],attrs:{"data-event":"click_appeal","data-id":k.activeImg.id},on:{click:function(t){return k.openAppealShow()}}},[k._v("\n                        "+k._s(k.$t("appeal"))+"\n                      ")]),k._v(" "),I("button",{directives:[{name:"show",rawName:"v-show",value:k.determineSelfWork,expression:"determineSelfWork"}],attrs:{"data-event":"click_delete","data-id":k.activeImg.id},on:{click:function(t){return k.handleWorkDelete()}}},[k._v("\n                        "+k._s(k.$t("Delete"))+"\n                      ")])],1),k._v(" "),I("button",{staticStyle:{color:"#ffffff"},attrs:{slot:"reference"},slot:"reference"},[I("i",{staticClass:"iconfont icon-more"})])])],1),k._v(" "),k.isCompanyAccount||7==(null===(l=k.activeImg)||void 0===l||null===(l=l.creativity)||void 0===l?void 0:l.type)?k._e():I("button",{staticClass:"commFunNum",attrs:{"data-event":"click_share","data-id":k.activeImg.id},on:{click:function(t){return t.stopPropagation(),k.share1("work")}}},[I("i",{staticClass:"iconfont icon-share-icon"})]),k._v(" "),k.isShowNewDownload?I("DownloadVideoPop",{attrs:{videoInfo:{videoUrl:null===(c=k.activeImg)||void 0===c||null===(c=c.banner)||void 0===c?void 0:c.url}}},[I("button",{staticClass:"commFunNum new-btn"},[I("i",{staticClass:"iconfont icon-icon-Download download-icon"})])]):I("button",{staticClass:"commFunNum",on:{click:function(t){return t.stopPropagation(),k.moreActions({type:"save"})}}},[I("i",{staticClass:"iconfont icon-icon-Download"})])]},proxy:!0}],null,!1,2023197672)}):k._e()],1)]),k._v(" "),I("div",{staticClass:"imgpage-related"},[I("h2",{staticClass:"title-div"},[I("span",{staticClass:"title"},[k._v(k._s(k.$t("toolsPage1")))])]),k._v(" "),I("aiTools",{attrs:{list:k.showToolList}}),k._v(" "),I("h2",{staticClass:"title-div"},[I("span",{staticClass:"title"},[k._v(k._s(k.$t("ExploreRelated")))])]),k._v(" "),I("div",{ref:"relatewraper",staticClass:"related-images"},[I("HyWaterfallFlowList",{attrs:{list:k.relatedImages,container:"relatewraper"},on:{load:k.getList},scopedSlots:k._u([{key:"header",fn:function(t){var e=t.item;return[I("s-tag-item",{style:{width:e.width,height:e.height+"px"},attrs:{tags:e.tagList}})]}}],null,!1,2258621013)}),k._v(" "),I("div",{directives:[{name:"loading",rawName:"v-loading",value:k.relatedLoading,expression:"relatedLoading"}],staticClass:"loading-div"})],1)],1),k._v(" "),k.bigImgDialogVisible?I("el-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"on-close":k.closeViewBigImage,"url-list":[k.getImagUrl(null===(w=k.activeImg)||void 0===w||null===(w=w.banner)||void 0===w?void 0:w.url)]}}):k._e()],1)]):k._e(),k._v(" "),k.appealShow?I("AppealDialog",{attrs:{"appeal-data":k.appeaData,"is-appealing":k.isAppealLoading,"submit-callback":k.setResourceAppeal,"dialog-visible":k.appealShow},on:{"update:dialogVisible":function(t){k.appealShow=t},"update:dialog-visible":function(t){k.appealShow=t}}}):k._e(),k._v(" "),I("ShareDialog",{ref:"ShareDialog",attrs:{type:"artwork",workId:null===(C=k.activeImg)||void 0===C?void 0:C.id}}),k._v(" "),k.bigVideoShow?I("div",{staticClass:"bigVideo",on:{click:function(t){k.bigVideoShow=!1}}},[k.isVideo?I("video",{attrs:{src:null===(O=k.activeImg.banner)||void 0===O?void 0:O.url,autoplay:"",loop:"",controls:!1,muted:""},domProps:{muted:!0},on:{click:function(t){t.stopPropagation()}}}):I("img",{ref:"bigImg",attrs:{src:"".concat(k.getImagUrl(null===(x=k.activeImg)||void 0===x||null===(x=x.banner)||void 0===x?void 0:x.url,k.$imgH)||"")},on:{error:function(t){var e;return k.imgError(null===(e=k.activeImg)||void 0===e?void 0:e.banner,k.$refs.bigImg)}}}),k._v(" "),k._m(0)]):k._e(),k._v(" "),I("view-image",{ref:"viewImage"}),k._v(" "),I("SelectVideoModelModal",{ref:"selectVideoModelModal",attrs:{changeBtnColor:!0},on:{confirm:k.handleSelectVideoModel}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"videoClear"},[t("i",{staticClass:"el-icon-close"})])}],!1,null,"14e3d232",null));e.default=ot.exports;installComponents(ot,{Author:n(240).default,DownloadVideoPop:n(200).default,CmtComments:n(116).default,FrameDtl:n(427).default,STagItem:n(568).default,AppealDialog:n(359).default,ShareDialog:n(144).default})},3199:function(t,e,n){"use strict";n.r(e);n(19),n(6),n(18),n(8),n(4);var o=n(30),r=n(3),l=n(2),c=(n(20),n(32),n(50),n(16),n(22),n(31),n(11),n(12),n(13),n(113),n(152),n(7),n(26),n(362)),d=n(172),v=n(10),h=n(1),f=n(681),m=n(45),_=n(48),y=n(240),w=n(317),C=n(58),O=n(116),x=n(427),k=n(1184),I=n(144),j=n(34),S=n(39),$=n(316),P=n(3449),T=n(162),D=n(966),L=n(9),A=n(893),E=n(575),M=n(324),R=n(161),N=n(404),U=n(361),F=n(64);n(27);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H={name:"ArtWorkDetail",mixins:[f.a,m.a],components:{FrameDtl:x.default,MetaTooltipVue:c.default,ElImageViewer:d.a,Author:y.default,CmtComments:O.default,InviteDialog:w.default,PostReview:k.default,HyTipsButton:A.default,ShareDialog:I.default,DetailInfoTag:E.default,NoLike:N.default,Report:U.default,HyWaterfallFlowList:F.default},filters:{formatNumber:function(t){return Object(v.p)(t)}},props:{escClose:{type:Boolean,default:!1},defaultData:{type:Object,default:function(){return{}}}},data:function(){return{parseTime:C.f,copyTextToClipboard:v.g,saveImg:v.M,artWorkNumber:"",bigImgDialogVisible:!1,activeIndex:0,detailInfo:{},activeImg:{},author:{},metaInfo:{},imgList:[],followed:!1,popovervisible:!1,infovisible:!1,imgLoading:!0,copied:!1,isI18nToggled:!1,imgHeight:0,imgNaturalWidth:0,imgNaturalHeight:0,globalLoading:!1,paymentInfo:null,isNewPage:!1,isLocale:!1,dotReportInfo:{category:"default",view_domain:"details",batch_id:""},initialIndex:0,relatedLoading:!1,noMoreRelated:!1,relatedImages:[],time_to:0,page:1,isShowNullRelatedImg:!1,realViewTimer:null,hasLookTranslate:!1,isTranslating:!1,titleBackup:"",contentBackup:"",videoObserver:null,pauseNum:0}},beforeRouteEnter:function(t,e,n){n((function(t){t.fromPath=e.name,t.setImagePageFromPath(e.path)}))},mounted:function(){var t,e,n,o,r=this;this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo")),this.isI18nToggled=!this.accountSettingsData.is_off_localization,null!==(t=this.defaultData)&&void 0!==t&&t.id?this.initPage(null===(e=this.defaultData)||void 0===e?void 0:e.id):this.imgDetail(),this.realViewTimer=setTimeout((function(){r.$logEvent("log_actions",{operation:"real_view",behavior_info:4,behavior_info_sub:r.$route.params.id})}),5e3),this.titleBackup=(null===(n=this.detailInfo)||void 0===n||null===(n=n.portfolio)||void 0===n?void 0:n.name)||"",this.contentBackup=(null===(o=this.detailInfo)||void 0===o||null===(o=o.portfolio)||void 0===o?void 0:o.intro)||"",this.initVideoObserver(),this.$EventBus.$on("videoControl",this.handleVideoControl)},deactivated:function(){this.destroyAllVideos()},beforeDestroy:function(){this.realViewTimer&&clearTimeout(this.realViewTimer),this.videoObserver&&this.videoObserver.disconnect(),this.$EventBus.$off("videoControl"),this.destroyAllVideos()},computed:V(V(V(V(V(V({},Object(h.e)("app",["imagePageFromPath"])),Object(h.c)(["isSupportWebp","videoHasVoice"])),Object(h.c)("user",["isLoggedIn","userInfo","accountSettingsData","isCompanyAccount"])),Object(h.e)("user",["userInfo","adminOff"])),Object(h.e)("app",["ABInfo"])),{},{isShowNoteVitor:function(){var t;return null==this||null===(t=this.activeImg)||void 0===t||null===(t=t.operation_label_items)||void 0===t?void 0:t.some((function(t){return"supportMetaNote"===t.label}))},filterXss:function(){return function(t){var e,n=null===(e=this.detailInfo)||void 0===e||null===(e=e.portfolio)||void 0===e?void 0:e.link;if(n){var content="";return n.forEach((function(t){content+='<a href="'.concat(t,'" class="text-no-wrap" target="_blank">').concat(t,"</a><br>")})),content+t}return j.default.prototype.xss(t)}},imgWidth:function(){var t=window.innerHeight-162;if(this.imgList[0]){var e,n,o=null==this?void 0:this.imgList[0];if(null!=o&&null!==(e=o.banner)&&void 0!==e&&e.width&&null!=o&&null!==(n=o.banner)&&void 0!==n&&n.height){var r,l,c=t*(null==o||null===(r=o.banner)||void 0===r?void 0:r.width)/(null==o||null===(l=o.banner)||void 0===l?void 0:l.height);return c>792?792:c<440?440:c}}return 440},convertMode:function(){var t,e={1:"createModeType1",2:"createModeType2",6:"createModeType6",4:"createModeType4",5:"createModeType5",7:"studio"},n={v5:1,v6:2,4:4,sdxl:5,hy21:6,studio:7}[null===(t=this.activeImg)||void 0===t?void 0:t.channel]||1;return e[n]?this.$t("".concat(e[n])):""},isSdModel:function(){var t,e;return[5,"5","sdxl"].includes(null==this||null===(t=this.activeImg)||void 0===t?void 0:t.channel)||[5,"5","sdxl"].includes(null==this||null===(e=this.activeImg)||void 0===e?void 0:e.category)},greenMode:function(){var t;return 2!==(null==this||null===(t=this.userInfo)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.green_mode)},enableGreenMode:function(){return this.greenMode&&!["/personal"].includes(this.$route.path)},setI18nPrompt:function(){var t=this.activeImg.meta?this.activeImg.meta.prompt:"",e=this.activeImg.local_prompt;return e&&this.isI18nToggled?e:t},commonsObj:function(){var t=this.detailInfo||{},e=t.portfolio,n=void 0===e?{}:e,o=t.author,r=void 0===o?{}:o;return V(V({},n),{},{author:V({},r)})},comfyuitType:function(){var t=this.activeImg,e=t.channel,n=t.creativity;return[7].includes(null==n?void 0:n.type)?"app":"comfyui"!=e||1===(null==n?void 0:n.type)?"":2===(null==n?void 0:n.type)?"workflow":"app"},isAIVideo:function(){return 7==this.activeImg.type},handleType:function(){var t=this.activeImg,e=t.type,n=t.channel,o=void 0===n?"":n,r=t.sub_channel,l=void 0===r?"":r,c=t.creativity;if(7===(void 0===c?{}:c).type)return"AI Apps";if(this.isAIVideo)return"Video";if("comfyui"===o){if(!l)return"Workflow";if("comf_sys_app"===l||"comf_user_app"===l)return"AI Apps";if(["ai_filter_video","ai_filter"].includes(l))return"ai filter"}return"studio"===o&&4===e||2===e&&"sdxl"===o||4===e&&"sdxl"===o?"cell":6===e?"animate":"upscale"},getModelList:function(){var t;return((null===(t=this.activeImg)||void 0===t?void 0:t.models)||[]).map((function(t){return V(V({},t),{},{type:"LoCon"===(null==t?void 0:t.type)?"LyCORIS":"TextualInversion"===(null==t?void 0:t.type)?"embedding1":(null==t?void 0:t.type)||"LORA"})}))}}),methods:V(V(V({},Object(h.d)("app",["setImagePageFromPath"])),Object(h.b)("user",["setAdminOff"])),{},{initPage:function(t){var e=this.defaultData,n=e.author,o=e.cover;this.activeImg=V(V({},this.defaultData),{},{author:n,banner:o,title:""}),this.detailInfo={portfolio:V({},this.defaultData),author:n,list:[]},this.imgList=[this.activeImg],this.getArtWorkDetail(t)},getArtWorkDetail:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,data,l,c,d,v,h,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post("/api/v1/portfolio/detail",{id:t,ss:L.e.TitleDescription});case 2:if(r=n.sent,data=r.data.data,l=r.headers,data){n.next=7;break}return n.abrupt("return");case 7:e.isLocale="normal"===l["x-account-type"],c=data.list||[],d=(null===(o=data.portfolio)||void 0===o?void 0:o.stream)||{},v=d.url,h=d.url2,f=d.url3,(m=v||h||f)&&c.push({banner:{url:m}}),e.author=(null==data?void 0:data.author)||{},e.detailInfo=data,e.imgList=c,e.activeImg=c[0],e.imgDetail();case 17:case"end":return n.stop()}}),n)})))()},assembleParams:function(){var t,e,n,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,k,I=[];null!==(t=this.activeImg)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&null!==(t=t.controlnet_units)&&void 0!==t&&t.length&&(null===(O=this.activeImg)||void 0===O||O.meta.controlnet_units.forEach((function(t){I.push({mode:"ctr_net",image:{url:t.input_image},ctr_net_cond:t})})));null!==(e=this.activeImg)&&void 0!==e&&null!==(e=e.meta)&&void 0!==e&&null!==(e=e.init_images)&&void 0!==e&&e.length&&(null===(x=this.activeImg)||void 0===x||x.meta.init_images.forEach((function(t){I.push({mode:"img2img",image:{url:t}})})));null!==(n=this.activeImg)&&void 0!==n&&null!==(n=n.meta)&&void 0!==n&&null!==(n=n.lab_base)&&void 0!==n&&null!==(n=n.conds)&&void 0!==n&&n.length&&(null===(k=this.activeImg)||void 0===k||null===(k=k.meta)||void 0===k||null===(k=k.lab_base)||void 0===k||k.conds.forEach((function(t){I.push({mode:"StyleReference"===t.mode?"style_ref":"ImagePrompt"===t.mode?"img2img":"ip_maintain",image:{url:t.image}})})));return{title:"",cover:{url:null===(o=this.activeImg)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.url,width:null===(r=this.activeImg)||void 0===r||null===(r=r.banner)||void 0===r?void 0:r.width,height:null===(l=this.activeImg)||void 0===l||null===(l=l.banner)||void 0===l?void 0:l.height},artwork_id:this.$route.params.id,used_models:(null===(c=this.activeImg)||void 0===c?void 0:c.models.map((function(t){return V(V({},t),{},{id:t.id,name:t.name,banner:t.cover,model_type:t.type})})))||[],meta:{cfg_scale:null!==(d=this.activeImg.meta.cfg_scale)&&void 0!==d?d:"",clip_skip:null!==(v=this.activeImg.meta.clip_skip)&&void 0!==v?v:"",width:null!==(h=this.activeImg.meta.width)&&void 0!==h?h:"",height:null!==(f=this.activeImg.meta.height)&&void 0!==f?f:"",negative_prompt:null!==(m=this.activeImg.meta.negative_prompt)&&void 0!==m?m:"",prompt:null!==(_=this.activeImg.local_prompt)&&void 0!==_?_:"",sampler_name:null!==(y=this.activeImg.meta.sampler_name)&&void 0!==y?y:"",steps:null!==(w=this.activeImg.meta.steps)&&void 0!==w?w:"",vae:null!==(C=this.activeImg.meta.vae)&&void 0!==C?C:"",use_image_conditions:I}}},handleNoteVitor:function(){var t=this,e=Object(R.a)({render:function(n){return n(M.default,{props:{params:t.assembleParams(),saveParams:V(V({},t.activeImg),{},{meta:V(V({},t.activeImg.meta),{},{prompt:t.activeImg.local_prompt})}),source:"explore_detail_records"},on:{close:function(){e.close()},save:function(){e.close()}}})}})},handleVideoControl:function(t){var e=this;this.$refs.videoPlayer&&(t.isPause?this.pauseNum++:this.pauseNum--,(Array.isArray(this.$refs.videoPlayer)?this.$refs.videoPlayer:[this.$refs.videoPlayer]).forEach((function(video){var n;video&&(t.isPause?video.pause():video.dataset.id===(null===(n=e.activeImg)||void 0===n?void 0:n.id)&&e.pauseNum<1&&video.play())})))},reset:function(){this.$refs.mainImage&&(this.$refs.mainImage.src=""),this.activeImg={},this.page=1,this.bigImgDialogVisible=!1,this.imgLoading=!0,this.globalLoading=!1,this.relatedLoading=!0,this.relatedImages=[],this.noMoreRelated=!1,this.copied=!1,this.isShowNullRelatedImg=!1,this.time_to=0,this.imgHeight=0,document.body.style.overflow=""},handleVolumeChange:function(t){this.videoHasVoice===t.target.muted&&this.$store.commit("app/SET_VIDEO_HAS_VOICE",!this.videoHasVoice)},getList:function(){var t,e=this,n=(null===(t=this.defaultData)||void 0===t?void 0:t.id)||this.$route.params.id;if(console.log("=================== getList",n,this.activeImg,this.noMoreRelated,this.relatedLoading),n&&1!=this.activeImg.nsfw&&!this.noMoreRelated&&!this.relatedLoading){var o={page:this.page,page_size:20,related_id:this.$route.params.id,obj_type:4,time_to:this.time_to};this.relatedLoading=!0,Object(P.a)(o).then((function(t){var n;if(null===(n=t.data)||void 0===n||!n.items)return e.noMoreRelated=!0,void e.solveScrollbarStyle();!0===t.data.has_more?(e.noMoreRelated=!1,e.page+=1):e.noMoreRelated=!0;var o=t.data.items||[];e.time_to=t.data.time_ms,e.relatedImages=e.relatedImages.concat(o),0==e.relatedImages.length&&(e.isShowNullRelatedImg=!0)})).finally((function(){e.relatedLoading=!1}))}},isVideoLink:v.G,imgLoaded:function(t){var img=t.target,e=img.naturalHeight,n=img.naturalWidth;this.imgNaturalWidth=img.naturalWidth,this.imgNaturalHeight=img.naturalHeight,this.imgHeight=508*e/n,this.imgLoading=!1},viewBigImage:function(){this.bigImgDialogVisible=!0},closeViewBigImage:function(){this.bigImgDialogVisible=!1},wordsCopy:function(){var t=this;this.copied=!0;var e=this.activeImg.meta?this.activeImg.meta.prompt:"",n=this.activeImg.local_prompt;this.copyTextToClipboard(this.isI18nToggled?n:e),setTimeout((function(){t.copied=!1}),1e3)},backTo:function(){this.$refs.frameDtl?this.$refs.frameDtl.backTo():this.$router.back()},switchImg:function(t){var e;this.initialIndex=t,this.activeImg=this.imgList[t]||{},this.setLocale(null===(e=this.activeImg)||void 0===e?void 0:e.id)},getDetailDynamicData:function(data){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.u)({obj_id:null==data||null===(n=data.portfolio)||void 0===n?void 0:n.id,obj_type:4});case 2:r=e.sent,t.detailInfo.portfolio=Object.assign({},(null===(o=t.detailInfo)||void 0===o?void 0:o.portfolio)||{},r);case 4:case"end":return e.stop()}}),e)})))()},imgDetail:function(){var t,e;this.artWorkNumber=(null===(t=this.defaultData)||void 0===t?void 0:t.id)||this.$route.params.id,this.artWorkNumber?(this.isLocale&&this.setLocale(null===(e=this.imgList[0])||void 0===e?void 0:e.id),this.handleData()):this.$router.push(this.localePath("/"))},setLocale:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,c,d,v,h,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&null!==(r=e.activeImg)&&void 0!==r&&null!==(r=r.meta)&&void 0!==r&&r.prompt){n.next=2;break}return n.abrupt("return");case 2:return l=e.activeImg.meta.prompt,n.prev=3,n.next=6,Object($.c)({id:t,titles:[l],enable_filter:1});case 6:c=n.sent,d=c.data.titles,v=d||[],h=Object(o.a)(v,1),f=h[0],e.activeImg.local_prompt=f,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),e.activeImg.local_prompt=titles;case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},handleData:function(){var t=this;this.imgList.forEach((function(e,n){e.author=(null==t?void 0:t.author)||{}})),this.activeImg=this.imgList[0]||{},this.getList(),this.detailInfo&&this.getDetailDynamicData(this.detailInfo)},goModelDtl:function(t){var e;t&&(null===(e=window)||void 0===e||e.open("/models/detail/".concat(t),"_blank"))},openPlayDoor:function(){var t=this,e=this.activeImg,n=e.banner,o=e.id,r=Object(v.v)(n.url);this.$logEvent("log_actions",{operation:"click_".concat(r,"_portal"),behavior_info:"on_post_detail_page"}),this.$EventBus.$emit("showDialog",{name:"HyAssembleModal",data:{doorCode:"video"===r?"aiVideoApp":"aiImageApp",artWorkNo:o,workUrl:n.url,source:4,objType:4,onAfterAction:function(){t.$EventBus.$emit("hideDialog","HyAssembleModal")}}}),this.$EventBus.$emit("videoControl",{isPause:!0})},handlePlay:function(){var t,e,n,o,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"work";if(this.$logEvent("log_actions",{operation:"click_to_generate_same",behavior_info:l}),7===(null===(t=this.activeImg)||void 0===t||null===(t=t.creativity)||void 0===t?void 0:t.type))return console.log("this.activeImg",this.activeImg),void this.$router.push(this.localePath({path:"/ai-tools/ai-face-swap",query:{artWorkNo:null===(r=this.activeImg)||void 0===r?void 0:r.id}}));if("comfyui"===(null===(e=this.activeImg)||void 0===e?void 0:e.channel)&&null!==(n=this.activeImg)&&void 0!==n&&null!==(n=n.creativity)&&void 0!==n&&n.id){var c,d;if("AI Apps"===this.handleType&&"imgGather"===l){var v,h=Object.assign({},this.activeImg);h.taskSource=4,h.logEventSource=Object(L.Y)(this.$route.name),h.activeCategory="aiApp",h.reMixId=null==this||null===(v=this.activeImg)||void 0===v?void 0:v.id;var f={action:6==h.type?24:1,data:{source:h},taskVersion:"v2"};return void this.$EventBus.$emit("openGenerate",f)}return this.$router.push(this.localePath({path:"/workFlowAppDetail/".concat(null===(c=this.activeImg.creativity)||void 0===c?void 0:c.id,"?task=mix-").concat(null===(d=this.activeImg)||void 0===d?void 0:d.id)}))}var m=!this.isAIVideo;this.moreActions({type:"play",id:null===(o=this.activeImg)||void 0===o?void 0:o.id,fromPage:"artworkDetail",needLogin:m})},report:function(){var t=this,e=this.detailInfo.portfolio?this.detailInfo.portfolio.id:this.detailInfo.id;Object(S.t)({id:e,obj_type:4}).then((function(e){t.popovervisible=!1,t.$message({message:t.$t("ReportSuccess"),type:"success",duration:5e3})}))},handleTranslate:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,content,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.$i18n.locale,content=(null===(n=t.detailInfo)||void 0===n||null===(n=n.portfolio)||void 0===n?void 0:n.name)||"",r={zhCN:"zh-cn",zhTW:"zh-tw"}[o]||o,t.isTranslating=!0,t.hasLookTranslate=!t.hasLookTranslate,t.hasLookTranslate){e.next=12;break}t.detailInfo.portfolio.name=t.titleBackup,t.detailInfo.portfolio.intro=t.contentBackup,t.isTranslating=!1,e.next=28;break;case 12:return Object(T.a)(content,{to:r}).then((function(e){t.detailInfo.portfolio.name=e.text})),e.prev=13,l=t.detailInfo.portfolio.intro,e.next=17,Object(D.a)(l,r);case 17:c=e.sent,t.detailInfo.portfolio.intro=c,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),t.hasLookTranslate=!1,t.$message.error(t.$t("novelRetry"));case 25:return e.prev=25,t.isTranslating=!1,e.finish(25);case 28:t.$logEvent("log_actions",{operation:"click_translate",behavior_info:"on_article_detail_page"});case 29:case"end":return e.stop()}}),e,null,[[13,21,25,28]])})))()},initVideoObserver:function(){var t=this;this.videoObserver=new IntersectionObserver((function(e){e.forEach((function(e){var n,video=e.target,o=video.dataset.id;e.isIntersecting?o===(null===(n=t.activeImg)||void 0===n?void 0:n.id)&&video.play():video.pause()}))}),{threshold:.5}),this.$nextTick((function(){t.$refs.videoPlayer&&(Array.isArray(t.$refs.videoPlayer)?t.$refs.videoPlayer.forEach((function(video){video&&t.videoObserver.observe(video)})):t.videoObserver.observe(t.$refs.videoPlayer))}))},destroyAllVideos:function(){this.destroyVideoElements(this.$refs.videoPlayer),this.destroyVideoElements(this.$refs.bigVideoPlayer)},destroyVideoElements:function(t){var e=this;if(t){(Array.isArray(t)?t:[t]).forEach((function(video){video&&video.pause()}));try{this.imgList.forEach((function(t){t.banner&&t.banner.url&&!e.isVideoLink(t.banner.url)&&(t.banner.url="")}))}catch(t){console.log("销毁视频元素错误啦：",t)}}}}),watch:{accountSettingsData:{handler:function(t){this.isI18nToggled=!t.is_off_localization},deep:!0},"$route.query":{handler:function(t){var e=t.u_code;e&&Object(_.A)(e)},immediate:!0},$route:function(t,e){this.reset(),t.path.indexOf("artWorkDetail/")>-1&&t.params.id!==e.params.id&&this.imgDetail()},activeImg:{handler:function(t){var e=this;t&&(this.activeIndex=this.imgList.findIndex((function(t){var n;return t.id===(null===(n=e.activeImg)||void 0===n?void 0:n.id)})),t.id&&(this.metaInfo=t.meta))},deep:!0,immediate:!0},bigImgDialogVisible:function(t){document.body.style.overflow=t?"hidden":"auto",this.handleVideoControl({isPause:t})},defaultData:{handler:function(t){null!=t&&t.id&&this.initPage(t.id)},deep:!0}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,data,v,h,f,m,_,y,w,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,t.app,o=t.params,r=t.error,l=o.id,e.prev=2,e.next=5,n.post("/api/v1/portfolio/detail",{id:l,ss:L.e.TitleDescription});case 5:if(d=e.sent,data=d.data.data,v=d.headers,h="normal"===v["x-account-type"],data){e.next=11;break}return e.abrupt("return",r({statusCode:404,message:"Not Found"}));case 11:return f=(null==data?void 0:data.list)||[],m=(null==data||null===(c=data.portfolio)||void 0===c?void 0:c.stream)||{},_=m.url,y=m.url2,w=m.url3,(C=_||y||w)&&f.push({banner:{url:C}}),e.abrupt("return",{author:null==data?void 0:data.author,detailInfo:data,imgList:f,activeImg:f[0],isLocale:h});case 18:e.prev=18,e.t0=e.catch(2),console.log("图集asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 22:case"end":return e.stop()}}),e,null,[[2,18]])})))()},head:function(){var t,e,n,o,r=this.detailInfo||{},l=r.portfolio,c=void 0===l?{}:l,d=r.author,v=void 0===d?{}:d,h=r.list,f=void 0===h?[]:h,m=f[0]||{},_=((null==m?void 0:m.local_prompt)||(null==m||null===(t=m.meta)||void 0===t?void 0:t.prompt)||"").slice(0,160)||"",title=c.name||_,y=(null===(e=f.find((function(t){var e;return null===(e=t.banner)||void 0===e?void 0:e.url})))||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.url)||"",w=(null==m||null===(n=m.banner)||void 0===n?void 0:n.url)||y,C=null==w?void 0:w.endsWith(".mp4"),O=C?null==m||null===(o=m.meta)||void 0===o||null===(o=o.init_images)||void 0===o?void 0:o[0]:w,x=null==c?void 0:c.create_at,k=null==c?void 0:c.stat;return console.log("listCover",y),{title:title,meta:[{hid:"description",name:"description",content:_},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:_},{hid:"og:image",name:"og:image",content:O}],script:[{type:"application/ld+json",json:C?{"@context":"https://schema.org","@type":"VideoObject",name:title,description:_,thumbnailUrl:O,uploadDate:x?new Date(x).toISOString():"",contentUrl:w,duration:"PT00H00M00S",interactionStatistic:{"@type":"InteractionCounter",interactionType:{"@type":"WatchAction"},userInteractionCount:(null==k?void 0:k.num_of_view)||0},creator:{name:null==v?void 0:v.name,"@type":"Person"}}:{"@context":"https://schema.org","@type":"ImageObject",acquireLicensePage:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html",contentUrl:w,creator:{name:(null==v?void 0:v.name)||"SeaArt","@type":"Person"},creditText:(null==v?void 0:v.name)||"SeaArt",copyrightNotice:(null==v?void 0:v.name)||"SeaArt",license:"https://image6.cdn.seaart.me/20230808/9598893d-2207-4b30-9036-bf5b026232bf.html"}}],__dangerouslyDisableSanitizers:["script"]}}},z=H,W=(n(4977),n(0)),component=Object(W.a)(z,(function(){var t,e,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,k,I=this,j=I._self._c;return j("div",{directives:[{name:"loading",rawName:"v-loading",value:I.globalLoading,expression:"globalLoading"}],ref:"image-gallery",staticClass:"image-gallery"},[j("el-backtop",{attrs:{bottom:30,right:30}},[j("i",{staticClass:"el-icon-top"})]),I._v(" "),j("div",{staticClass:"mobile-back-to",on:{"~click":function(t){return t.stopPropagation(),I.backTo.apply(null,arguments)}}},[j("i",{staticClass:"el-icon-back"})]),I._v(" "),null!==(t=I.detailInfo)&&void 0!==t&&null!==(t=t.portfolio)&&void 0!==t&&t.id?j("div",{staticClass:"imgpage-content flex"},[j("div",{ref:"imagepageInner",staticClass:"imgpage-inner",attrs:{"data-group":"post-page-image-info"}},[j("FrameDtl",{ref:"frameDtl",attrs:{type:"imgGather",workId:null===(e=I.defaultData)||void 0===e?void 0:e.id}},[j("div",{directives:[{name:"loading",rawName:"v-loading",value:I.imgLoading&&(null===(o=I.imgList)||void 0===o?void 0:o.length),expression:"imgLoading && imgList?.length"}],staticClass:"imgpage-image flex",style:{width:I.imgWidth+"px"}},[j("div",{staticClass:"image-container"},[(null===(r=I.imgList)||void 0===r?void 0:r.length)>1?j("div",{staticClass:"indicator"},[j("span",{staticClass:"page-number"},[I._v(I._s("".concat(this.activeIndex+1,"/").concat(I.imgList.length)))])]):I._e(),I._v(" "),I.imgList&&(null===(l=I.imgList)||void 0===l?void 0:l.length)>0?j("el-carousel",{staticClass:"rotation-cont",attrs:{autoplay:!1,arrow:(null===(c=I.imgList)||void 0===c?void 0:c.length)>1?"hover":"never","indicator-position":(null===(d=I.imgList)||void 0===d?void 0:d.length)>1?"":"none"},on:{change:function(t){return I.switchImg(t)}}},I._l(I.imgList,(function(img,t){var e,o,r,l,c,d;return j("el-carousel-item",{key:"big-img_".concat(t),staticClass:"rotation-img"},[1==(null===(e=I.activeImg)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.nsfw)?j("img",{attrs:{src:n(217),alt:I.setI18nPrompt||(null===(o=I.detailInfo)||void 0===o||null===(o=o.portfolio)||void 0===o?void 0:o.name)},on:{load:function(t){return I.imgLoaded(t)}}}):I.isVideoLink(null==img||null===(r=img.banner)||void 0===r?void 0:r.url)?j("video",{ref:"videoPlayer",refInFor:!0,attrs:{src:null==img||null===(d=img.banner)||void 0===d?void 0:d.url,loop:"",controlsList:"nodownload",controls:!0,"data-id":null==img?void 0:img.id},domProps:{muted:!I.videoHasVoice},on:{play:function(t){return I.imgLoaded(t)},click:function(e){return e.stopPropagation(),e.preventDefault(),I.viewBigImage(t)},contextmenu:function(t){t.preventDefault()},volumechange:I.handleVolumeChange}}):j("img",{directives:[{name:"webp",rawName:"v-webp",value:I.$imgH,expression:"$imgH"}],ref:"mainImage"+t,refInFor:!0,attrs:{alt:I.setI18nPrompt||(null===(l=I.detailInfo)||void 0===l||null===(l=l.portfolio)||void 0===l?void 0:l.name),src:null==img||null===(c=img.banner)||void 0===c?void 0:c.url,fetchpriority:0===t?"high":"auto",loading:0===t?"eager":"lazy"},on:{load:function(t){return I.imgLoaded(t)},click:I.viewBigImage}})])})),1):I._e(),I._v(" "),null!==(v=I.activeImg)&&void 0!==v&&null!==(v=v.banner)&&void 0!==v&&v.url?j("hy-tips-button",{staticClass:"tips-btn",attrs:{data:{artWorkNo:(null===(h=I.activeImg)||void 0===h?void 0:h.id)||I.artWorkNumber,workUrl:null===(f=I.activeImg)||void 0===f||null===(f=f.banner)||void 0===f?void 0:f.url,source:4,objType:4}}}):I._e()],1)]),I._v(" "),j("div",{staticClass:"imgpage-info"},[j("Author",{attrs:{type:"imgGather",activeImg:I.activeImg}},[3!=(null===(m=I.activeImg)||void 0===m?void 0:m.type)&&null!==(_=I.activeImg)&&void 0!==_&&_.meta?j("button",{staticClass:"right-btn button-try",class:I.isLoggedIn?"":"disabled",on:{click:function(t){return I.handlePlay("imgGather")}}},[I._v("\n              "+I._s(I.$t("Remix"))+"\n            ")]):I._e()]),I._v(" "),null!==(y=I.commonsObj)&&void 0!==y&&y.id?j("CmtComments",{attrs:{infos:I.commonsObj,type:4},scopedSlots:I._u([{key:"cmtInner",fn:function(){var t,e,o,r,l,c,d,v,h,f,m,_,y,w,C,O,x,k,S,$,P,T,D,L,A,E;return[I.isShowNoteVitor?j("div",{staticClass:"note-vitor-container"},[j("span",{staticClass:"note-vitor-title"},[I._v(I._s(I.$t("GenerationData")))]),I._v(" "),j("div",{staticClass:"note-vitor-record",on:{click:I.handleNoteVitor}},[j("i",{staticClass:"iconfont icon-BIJI"}),I._v(" "),j("span",[I._v(I._s(I.$t("NoteVitorRecord")))])])]):I._e(),I._v(" "),null!==(t=I.activeImg)&&void 0!==t&&t.meta&&(I.activeImg.prompt||I.activeImg.meta.prompt)?j("div",{staticClass:"description"},[j("div",{staticClass:"header",class:{"border-clear":I.isShowNoteVitor}},[j("div",{staticClass:"header-left"},[j("div",{staticClass:"title"},[I._v(I._s(I.$t("Prompt")))]),I._v(" "),j("div",{staticClass:"header-copy"},[j("div",{staticClass:"prompt-copy",class:{copied:I.copied},on:{click:function(t){return I.wordsCopy()}}},[j("i",{directives:[{name:"show",rawName:"v-show",value:I.copied,expression:"copied"}],staticClass:"iconfont icon-success"}),I._v(" "),j("i",{directives:[{name:"show",rawName:"v-show",value:!I.copied,expression:"!copied"}],staticClass:"iconfont icon-copy"}),I._v("\n                        "+I._s(I.$t("CopyPrompts"))+"\n                      ")])]),I._v(" "),j("div",{directives:[{name:"show",rawName:"v-show",value:null===(e=I.activeImg)||void 0===e?void 0:e.local_prompt,expression:"activeImg?.local_prompt"}],staticClass:"header-trans",on:{click:function(t){I.isI18nToggled=!I.isI18nToggled}}},[j("i",{staticClass:"iconfont icon-i18n_prompt"})])])]),I._v(" "),j("div",{ref:"promptContainer",staticClass:"prompt-container"},[j("p",{staticClass:"prompt"},[I._v(I._s(I.setI18nPrompt))])])]):I._e(),I._v(" "),null!==(o=I.activeImg)&&void 0!==o&&o.meta&&Object.keys(I.metaInfo).length?j("div",{staticClass:"model-info"},[j("div",{staticClass:"header flex items-center"},[j("div",{staticClass:"title"},[I._v(I._s(I.$t("INFO")))]),I._v(" "),Object.keys(I.metaInfo).length?j("span",{on:{click:function(t){t.stopPropagation(),I.infovisible=!I.infovisible}}},[j("el-popover",{staticStyle:{padding:"0"},attrs:{"popper-class":"metaPoper",placement:"right","visible-arrow":!1,trigger:"hover"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:I.infovisible,callback:function(t){I.infovisible=t},expression:"infovisible"}},[j("MetaTooltipVue",{attrs:{sourceFrom:"imageDetail",category:null===(r=I.activeImg)||void 0===r?void 0:r.channel,meta:I.metaInfo,model:I.activeImg.model_id||I.activeImg.artwork_no,"model-name":I.activeImg.model_name},on:{copyGenerationData:function(t){return I.moreActions({type:"play"})}}}),I._v(" "),j("span",{staticClass:"carousel-icon",attrs:{slot:"reference"},slot:"reference"},[j("i",{staticClass:"work-tips iconfont icon-work-tips"})])],1)],1):I._e()]),I._v(" "),j("el-row",{staticClass:"meta-content flex flex-col",attrs:{type:"flex"}},[j("div",{staticClass:"info flex"},[j("span",{staticClass:"item"},[j("div",{staticClass:"name"},[I._v(I._s(I.$t("Size")))]),I._v(" "),j("div",{staticClass:"value"},[I._v("\n                        "+I._s(I.activeImg.banner.width+"X"+I.activeImg.banner.height)+"\n                      ")])]),I._v(" "),j("span",{staticClass:"item"},[j("div",{staticClass:"name"},[I._v(I._s(I.$t("Date")))]),I._v(" "),j("div",{staticClass:"value"},[I._v(I._s(I.formatDate(I.activeImg.created_at)))])]),I._v(" "),j("span",{directives:[{name:"show",rawName:"v-show",value:I.convertMode,expression:"convertMode"}],staticClass:"item"},[j("div",{staticClass:"name"},[I._v(I._s(I.$t("createModeTitle")))]),I._v(" "),j("div",{staticClass:"value"},[I._v(I._s(I.convertMode))])]),I._v(" "),j("span",{staticClass:"item"},[j("div",{staticClass:"name"},[I._v(I._s(I.$t("Type")))]),I._v(" "),j("div",{staticClass:"value"},[I._v("\n                        "+I._s(I.handleType)+"\n                      ")])])])]),I._v(" "),(null===(l=I.getModelList)||void 0===l?void 0:l.length)>0&&"comfyui"!==I.activeImg.channel?j("div",{staticClass:"models flex flex-wrap"},I._l(I.getModelList,(function(t,i){var e,o,r,l,c;return j("div",{key:"model_".concat(i),staticClass:"model-item flex items-center",on:{click:function(e){return I.goModelDtl(t.id)}}},[I.isVideoLink(null==t||null===(e=t.cover)||void 0===e?void 0:e.url)?[j("video",{staticClass:"model-cover",attrs:{src:null==t||null===(c=t.cover)||void 0===c?void 0:c.url,autoplay:"",loop:"",muted:"",playsinline:"",controls:!1},domProps:{muted:!0}})]:[null!=t&&null!==(o=t.cover)&&void 0!==o&&o.url&&1!==(null==t||null===(r=t.cover)||void 0===r?void 0:r.nsfw)?j("img",{directives:[{name:"webp",rawName:"v-webp",value:I.$imgL,expression:"$imgL"}],staticClass:"model-cover",attrs:{src:null==t||null===(l=t.cover)||void 0===l?void 0:l.url,alt:""}}):j("img",{staticClass:"model-cover",attrs:{src:n(217),alt:""}})],I._v(" "),j("div",{staticClass:"model-cont flex flex-col"},[j("div",{staticClass:"model-type"},[j("span",{class:{isLora:"Checkpoint"!==(null==t?void 0:t.type)}},[I._v(I._s(I.$t(null==t?void 0:t.type)))])]),I._v(" "),j("div",{staticClass:"model-name text-no-wrap-2"},[I._v(I._s(t.name))])])],2)})),0):I._e(),I._v(" "),"comfyui"===I.activeImg.channel&&null!==(c=I.activeImg)&&void 0!==c&&null!==(c=c.creativity)&&void 0!==c&&c.id?j("div",{staticClass:"models flex flex-wrap"},[j("div",{staticClass:"model-item flex items-center",on:{click:function(t){return I.handlePlay()}}},[I.isVideoLink(null===(d=I.activeImg)||void 0===d||null===(d=d.creativity)||void 0===d||null===(d=d.cover)||void 0===d?void 0:d.url)?[j("video",{staticClass:"model-cover",attrs:{src:null===(f=I.activeImg)||void 0===f||null===(f=f.creativity)||void 0===f||null===(f=f.cover)||void 0===f?void 0:f.url,autoplay:"",loop:"",muted:"",playsinline:"",controls:!1},domProps:{muted:!0}})]:[j("img",{staticClass:"model-cover",attrs:{src:"".concat(I.getImagUrl(null===(v=I.activeImg)||void 0===v||null===(v=v.creativity)||void 0===v||null===(v=v.cover)||void 0===v?void 0:v.url,I.$imgL)||""),alt:null===(h=I.activeImg)||void 0===h||null===(h=h.creativity)||void 0===h?void 0:h.name}})],I._v(" "),j("div",{staticClass:"model-cont flex flex-col"},[j("div",{staticClass:"model-type"},[j("span",[I._v("\n                          "+I._s(I.comfyuitType)+"\n                        ")])]),I._v(" "),j("div",{staticClass:"model-name text-no-wrap-2"},[I._v(I._s(null===(m=I.activeImg)||void 0===m||null===(m=m.creativity)||void 0===m?void 0:m.name))])])],2)]):I._e(),I._v(" "),7==(null===(_=I.activeImg)||void 0===_||null===(_=_.creativity)||void 0===_?void 0:_.type)?j("div",{staticClass:"models flex flex-wrap"},[j("div",{staticClass:"model-item flex items-center",on:{click:function(t){return I.handlePlay()}}},[j("img",{staticClass:"model-cover",attrs:{src:"".concat(I.getImagUrl(null===(y=I.activeImg)||void 0===y||null===(y=y.creativity)||void 0===y||null===(y=y.cover)||void 0===y?void 0:y.url,I.$imgL)||""),alt:null===(w=I.activeImg)||void 0===w||null===(w=w.creativity)||void 0===w?void 0:w.name}}),I._v(" "),j("div",{staticClass:"model-cont flex flex-col"},[j("div",{staticClass:"model-type"},[j("span",[I._v("\n                          "+I._s(I.comfyuitType)+"\n                        ")])]),I._v(" "),j("div",{staticClass:"model-name text-no-wrap-2"},[I._v(I._s(null===(C=I.activeImg)||void 0===C||null===(C=C.creativity)||void 0===C?void 0:C.name))])])])]):I._e()],1):I._e(),I._v(" "),j("div",{staticClass:"gallery-info flex flex-col"},[j("h1",{staticClass:"gallery-title"},[I._v("\n                  "+I._s(null===(O=I.detailInfo)||void 0===O||null===(O=O.portfolio)||void 0===O?void 0:O.name)+"\n                  "),null!==(x=I.detailInfo)&&void 0!==x&&null!==(x=x.portfolio)&&void 0!==x&&x.name||null!==(k=I.detailInfo)&&void 0!==k&&null!==(k=k.portfolio)&&void 0!==k&&k.intro?j("el-button",{directives:[{name:"loading",rawName:"v-loading",value:I.isTranslating,expression:"isTranslating"}],staticClass:"article-translate-btn",attrs:{type:"text"},on:{click:I.handleTranslate}},[I._v("\n                    "+I._s(I.hasLookTranslate?I.$t("ViewOriginal"):I.$t("ViewTranslation"))+"\n                  ")]):I._e()],1),I._v(" "),j("div",{staticClass:"gallery-intro",domProps:{innerHTML:I._s(I.filterXss(null===(S=I.detailInfo)||void 0===S||null===(S=S.portfolio)||void 0===S?void 0:S.intro))}}),I._v(" "),null!==($=I.detailInfo)&&void 0!==$&&null!==($=$.portfolio)&&void 0!==$&&$.tag&&(null===(P=I.detailInfo)||void 0===P||null===(P=P.portfolio)||void 0===P||null===(P=P.tag)||void 0===P?void 0:P.length)>0?j("div",{staticClass:"tag-items flex flex-wrap"},I._l(null===(T=I.detailInfo)||void 0===T||null===(T=T.portfolio)||void 0===T?void 0:T.tag.filter((function(t){return t.id})),(function(t,i){return j("div",{key:"tag_".concat(i),staticClass:"tag-item"},[j("a",{attrs:{target:"_self",href:I.localePath("/tagInfo/post/"+t.id)},on:{click:function(e){return e.preventDefault(),I.goTagDtl(t,"imgGather_detials")}}},[I._v("#"+I._s(null==t?void 0:t.title))])])})),0):I._e(),I._v(" "),1===(null===(D=I.detailInfo)||void 0===D||null===(D=D.portfolio)||void 0===D||null===(D=D.theme_activity)||void 0===D?void 0:D.activity_type)?j("DetailInfoTag",{attrs:{title:(null===(L=I.detailInfo)||void 0===L||null===(L=L.portfolio)||void 0===L||null===(L=L.theme_activity)||void 0===L?void 0:L.title)||"",pathData:"/event-center/activity/"+(null===(A=I.detailInfo)||void 0===A||null===(A=A.portfolio)||void 0===A||null===(A=A.theme_activity)||void 0===A?void 0:A.id)}}):I._e(),I._v(" "),j("div",{staticClass:"time"},[I._v("\n                  "+I._s(I.parseTime(null===(E=I.detailInfo)||void 0===E||null===(E=E.portfolio)||void 0===E?void 0:E.create_at))+"\n                ")])],1)]},proxy:!0},{key:"cmtMore",fn:function(){var t,e;return[j("div",{staticClass:"commFunNum",on:{click:function(t){t.stopPropagation(),I.popovervisible=!I.popovervisible}}},[j("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"},model:{value:I.popovervisible,callback:function(t){I.popovervisible=t},expression:"popovervisible"}},[j("div",{staticClass:"pop-btns flex"},[j("Report",{attrs:{targetItem:{id:I.artWorkNumber,obj_type:4},isBack:!0}},[j("button",[I._v("\n                        "+I._s(I.$t("Report"))+"\n                      ")])]),I._v(" "),j("NoLike",{attrs:{targetItem:{id:I.artWorkNumber,obj_type:4},isBack:!0}},[j("button",[I._v("\n                        "+I._s(I.$t("dislike"))+"\n                      ")])])],1),I._v(" "),j("button",{staticStyle:{color:"#ffffff"},attrs:{slot:"reference"},slot:"reference"},[j("i",{staticClass:"iconfont icon-more"})])])],1),I._v(" "),I.isCompanyAccount||7==(null===(t=I.activeImg)||void 0===t||null===(t=t.creativity)||void 0===t?void 0:t.type)?I._e():j("button",{staticClass:"commFunNum",attrs:{"data-event":"click_share","data-id":null===(e=I.activeImg)||void 0===e?void 0:e.id},on:{click:function(t){return t.stopPropagation(),I.share("imgGather")}}},[j("i",{staticClass:"iconfont icon-share-icon"})])]},proxy:!0}],null,!1,489850431)}):I._e()],1)]),I._v(" "),j("div",{staticClass:"imgpage-related"},[j("div",{staticClass:"title-div"},[j("span",{staticClass:"title"},[I._v(I._s(I.$t("ExploreRelated")))])]),I._v(" "),j("div",{ref:"relatewraper",staticClass:"related-images"},[j("HyWaterfallFlowList",{attrs:{container:"relatewraper",list:I.relatedImages},on:{load:I.getList}}),I._v(" "),j("div",{directives:[{name:"loading",rawName:"v-loading",value:I.relatedLoading,expression:"relatedLoading"}],staticClass:"loading-div"})],1)]),I._v(" "),I.bigImgDialogVisible?j("div",{staticClass:"bigImg",on:{click:function(t){I.bigImgDialogVisible=!1}}},[j("div",{staticClass:"bigImgCnt"},[(null===(w=I.imgList)||void 0===w?void 0:w.length)>1?j("div",{staticClass:"indicator"},[j("span",{staticClass:"page-number"},[I._v(I._s("".concat(this.activeIndex+1,"/").concat(I.imgList.length)))])]):I._e(),I._v(" "),I.imgList&&(null===(C=I.imgList)||void 0===C?void 0:C.length)>0?j("el-carousel",{staticClass:"rotation-cont",attrs:{autoplay:!1,arrow:(null===(O=I.imgList)||void 0===O?void 0:O.length)>1?"hover":"never","indicator-position":(null===(x=I.imgList)||void 0===x?void 0:x.length)>1?"":"none","initial-index":I.initialIndex},on:{change:function(t){return I.switchImg(t)}}},I._l(I.imgList,(function(img,t){var e,n,o;return j("el-carousel-item",{key:"big-img_".concat(t),staticClass:"rotation-img"},[I.isVideoLink(null==img||null===(e=img.banner)||void 0===e?void 0:e.url)?j("video",{ref:"bigVideoPlayer",refInFor:!0,attrs:{src:null==img||null===(o=img.banner)||void 0===o?void 0:o.url,autoplay:"",loop:"",muted:"",controls:!0,controlsList:"nodownload"},domProps:{muted:!0},on:{contextmenu:function(t){t.preventDefault()}}}):j("img",{directives:[{name:"webp",rawName:"v-webp",value:I.$imgH,expression:"$imgH"}],attrs:{alt:I.setI18nPrompt,src:null==img||null===(n=img.banner)||void 0===n?void 0:n.url}})])})),1):I._e()],1)]):I._e()],1)]):I._e(),I._v(" "),j("invite-dialog",{ref:"inviteDialog",attrs:{type:"artwork",workId:null===(k=I.activeImg)||void 0===k?void 0:k.id}}),I._v(" "),j("PostReview"),I._v(" "),j("ShareDialog",{ref:"ShareDialog"})],1)}),[],!1,null,"214a4e0e",null);e.default=component.exports;installComponents(component,{Author:n(240).default,DetailInfoTag:n(575).default,CmtComments:n(116).default,FrameDtl:n(427).default,InviteDialog:n(317).default,PostReview:n(1184).default,ShareDialog:n(144).default})},3433:function(t,e,n){"use strict";n.r(e);n(50),n(16),n(49);var o={name:"makeDigitalProcessModal",data:function(){return{visible:!1,width:"460px",info:null,iconUrl:n(1462),iconFailedUrl:n(1461),showStep:"process",timer:null,defineBackColor:"#22D19D"}},mixins:[n(3472).a],computed:{computedPercentage:function(){var t;return(null==this||null===(t=this.list[0])||void 0===t?void 0:t.process)||0},computedLeftTime:function(){var t,e=(null==this||null===(t=this.list[0])||void 0===t?void 0:t.time_left)||0;return Math.ceil(e/6e4)||0},showProcess:function(){return!0},customClass:function(){var t="make-digital-process-modal";return"process"===this.showStep&&(t="make-digital-process-modal make-digital-process-modal2"),t}},mounted:function(){var t=this;this.$EventBus.$on("openMakeDigitalProcessModal",(function(e){console.log(e,"6666"),t.openModal(e)})),this.$EventBus.$on("setMakeDigitalProcessList",(function(e){console.log(e,"9999999999"),t.$set(t,"list",e)}))},beforeDestroy:function(){this.$EventBus.$off("openMakeDigitalProcessModal"),this.$EventBus.$off("setMakeDigitalProcessList")},methods:{openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t||{},n=e.type,o=void 0===n?"":n,r=e.info,l=void 0===r?{}:r;null!=t&&t.info&&(this.info=l,this.list=[l]),this.showStep=o,this.visible=!0},handleClose:function(){var t=this.list.findIndex((function(t){return[4].includes(null==t?void 0:t.state)}));this.visible=!1,-1!==t&&(this.$EventBus.$emit("updateAiPhotographyDigitalCloneList",this.list[t]),this.$EventBus.$emit("updateAiPhotographyDigitalCloneItem",this.list[t]),this.list.splice(t,1))},handleConfirm:function(){if("/fastTools"===this.$route.path&&["success","failed"].includes(this.showStep))return this.handleClose(),["success"].includes(this.showStep)&&this.$EventBus.$emit("backToAiPhotography"),void(["failed"].includes(this.showStep)&&this.$EventBus.$emit("openMakeDigitalCloneModal"));"/fastTools"!==this.$route.path&&["success","failed"].includes(this.showStep)&&(this.handleClose(),this.$router.push(this.localePath({path:"/fastTools",query:{type:"ai_photography"}})))}}},r=o,l=(n(5057),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,width:t.width,"custom-class":t.customClass,center:"","close-on-click-modal":!1,"close-on-press-escape":!1,modal:!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"process-modal-body"},[e("span",{staticClass:"make-digital-process-modal-close",on:{click:t.handleClose}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),"process"===t.showStep?[e("div",{staticClass:"process-box"},[e("div",{staticClass:"process-box-title1"},[t._v("\n          "+t._s(t.$t("photography51"))),e("span",{staticClass:"message-process-loading-span"})]),t._v(" "),e("div",{staticClass:"process-box-title2"},[t._v("\n          "+t._s(t.$t("photography52",{number:t.computedLeftTime}))+"\n        ")]),t._v(" "),e("div",{staticClass:"process-box-main"},[e("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.showProcess,expression:"showProcess"}],staticClass:"ai-filter-card-progress",attrs:{type:"circle",percentage:t.computedPercentage,width:104,"stroke-width":11,"define-back-color":"#555967",color:t.defineBackColor}})],1)])]:t._e(),t._v(" "),"success"===t.showStep?[e("div",{staticClass:"result-box"},[e("div",{staticClass:"result-box-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"result-box-title-1"},[t._v(t._s(t.$t("photography49")))]),t._v(" "),e("div",{staticClass:"result-box-title-2"},[t._v(t._s(t.$t("photography50")))]),t._v(" "),e("div",{staticClass:"result-box-confirm-btn",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[t._v(t._s(t.$t("photography48")))])])]:t._e(),t._v(" "),"failed"===t.showStep?[e("div",{staticClass:"result-box"},[e("div",{staticClass:"result-box-icon"},[e("img",{attrs:{src:t.iconFailedUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"result-box-title-1",staticStyle:{color:"#f15a5a"}},[t._v(t._s(t.$t("photography46")))]),t._v(" "),e("div",{staticClass:"result-box-confirm-btn result-box-remake-btn",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("photography47"))+"\n        ")])])]:t._e()],2)])}),[],!1,null,null,null);e.default=component.exports},3437:function(t,e,n){"use strict";n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(3),r=n(2),l=(n(19),n(20),n(1)),c=n(436);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var v={components:{HyFeaturedList:n(609).default},data:function(){return{listData:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)("user",["isLoggedIn"])),watch:{isLoggedIn:{handler:function(){this.getRecentlyRead()},immediate:!0}},activated:function(){this.getRecentlyRead()},methods:{getRecentlyRead:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.d)({page:1,page_size:10,offset:0});case 2:1e4===(n=e.sent).status.code&&(t.listData=(null===(o=n.data)||void 0===o?void 0:o.items)||[]);case 4:case"end":return e.stop()}}),e)})))()},handleClickCard:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.b)(t.id);case 2:1e4===(o=n.sent).status.code&&e.$router.push(e.localePath("/book/reading/".concat(o.data.id,"?cid=").concat(o.data.curr_read_chapter_id,"&character_id=").concat(o.data.character_id,"&from=novel_page")));case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getRecentlyRead()}},h=v,f=(n(5545),n(0)),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return t.isLoggedIn&&t.listData.length?e("div",[e("div",{ref:"recentlyRead",staticClass:"recently-read-list"},[e("HyFeaturedList",{attrs:{temp:{content_type:"10",elList:t.listData||[],elem_num:t.listData.length||5,title:t.$t("RecentlyRead")},onView:t.handleClickCard}})],1)]):t._e()}),[],!1,null,"b1855d68",null);e.a=component.exports},3894:function(t,e,n){"use strict";n(1577)},4035:function(t,e,n){"use strict";n(1676)},4274:function(t,e,n){"use strict";n(1850)},4375:function(t,e,n){"use strict";n(1945)},4378:function(t,e,n){"use strict";n(1948)},4379:function(t,e,n){"use strict";n(1949)},4391:function(t,e,n){"use strict";n(1960)},4392:function(t,e,n){"use strict";n(1961)},4393:function(t,e,n){"use strict";n(1962)},4412:function(t,e,n){"use strict";n(1981)},4438:function(t,e,n){t.exports={}},4456:function(t,e,n){"use strict";n(2024)},4698:function(t,e,n){"use strict";n(2136)},4699:function(t,e,n){"use strict";n(2137)},4700:function(t,e,n){"use strict";n(2138)},4701:function(t,e,n){"use strict";n(2139)},4813:function(t,e,n){"use strict";n(2250)},4814:function(t,e,n){"use strict";n(2251)},4815:function(t,e,n){"use strict";n(2252)},4816:function(t,e,n){"use strict";n(2253)},4817:function(t,e,n){"use strict";n(2254)},4818:function(t,e,n){"use strict";n(2255)},4819:function(t,e,n){"use strict";n(2256)},4820:function(t,e,n){"use strict";n(2257)},4840:function(t,e,n){"use strict";n(2277)},4842:function(t,e,n){"use strict";n(2279)},4843:function(t,e,n){"use strict";n(2280)},4867:function(t,e,n){"use strict";n(2305)},4868:function(t,e,n){"use strict";n(2306)},4869:function(t,e,n){"use strict";n(2307)},4870:function(t,e,n){"use strict";n(2308)},4871:function(t,e,n){"use strict";n(2309)},4872:function(t,e,n){"use strict";n(2310)},4873:function(t,e,n){"use strict";n(2311)},4874:function(t,e,n){"use strict";n(2312)},4875:function(t,e,n){"use strict";n(2313)},4876:function(t,e,n){"use strict";n(2314)},4877:function(t,e,n){"use strict";n(2315)},4878:function(t,e,n){"use strict";n(2316)},4879:function(t,e,n){"use strict";n(2317)},4880:function(t,e,n){"use strict";n(2318)},4881:function(t,e,n){"use strict";n(2319)},4949:function(t,e,n){"use strict";n(2385)},4950:function(t,e,n){"use strict";n(2386)},4972:function(t,e,n){"use strict";n(2409)},4974:function(t,e,n){"use strict";n(2411)},4975:function(t,e,n){"use strict";n(2412)},4977:function(t,e,n){"use strict";n(2414)},4988:function(t,e,n){"use strict";n(2425)},4996:function(t,e,n){"use strict";n(2433)},4997:function(t,e,n){"use strict";n(2434)},5001:function(t,e,n){"use strict";n(2438)},5002:function(t,e,n){"use strict";n(2439)},5024:function(t,e,n){"use strict";n(2460)},5025:function(t,e,n){"use strict";n(2461)},5026:function(t,e,n){"use strict";n(2462)},5027:function(t,e,n){"use strict";n(2463)},5030:function(t,e,n){"use strict";n(2465)},5031:function(t,e,n){"use strict";n(2466)},5032:function(t,e,n){"use strict";n(2467)},5033:function(t,e,n){"use strict";n(2468)},5034:function(t,e,n){"use strict";n(2469)},5035:function(t,e,n){"use strict";n(2470)},5036:function(t,e,n){"use strict";n(2471)},5037:function(t,e,n){"use strict";n(2472)},5038:function(t,e,n){"use strict";n(2473)},5039:function(t,e,n){"use strict";n(2474)},5040:function(t,e,n){"use strict";n(2475)},5041:function(t,e,n){"use strict";n(2476)},5042:function(t,e,n){"use strict";n(2477)},5043:function(t,e,n){"use strict";n(2478)},5044:function(t,e,n){"use strict";n(2479)},5045:function(t,e,n){"use strict";n(2480)},5046:function(t,e,n){"use strict";n(2481)},5047:function(t,e,n){"use strict";n(2482)},5048:function(t,e,n){"use strict";n(2483)},5049:function(t,e,n){"use strict";n(2484)},5050:function(t,e,n){"use strict";n(2485)},5051:function(t,e,n){"use strict";n(2486)},5052:function(t,e,n){"use strict";n(2487)},5054:function(t,e,n){"use strict";n(2488)},5055:function(t,e,n){"use strict";n(2489)},5056:function(t,e,n){"use strict";n(2490)},5057:function(t,e,n){"use strict";n(2491)},5058:function(t,e,n){"use strict";n(2492)},5059:function(t,e,n){"use strict";n(2493)},5060:function(t,e,n){"use strict";n(2494)},5061:function(t,e,n){"use strict";n(2495)},5062:function(t,e,n){"use strict";n(2496)},5063:function(t,e,n){"use strict";n(2497)},5065:function(t,e,n){"use strict";n(2498)},5066:function(t,e,n){"use strict";n(2499)},5067:function(t,e,n){"use strict";n(2500)},5068:function(t,e,n){"use strict";n(2501)},5069:function(t,e,n){"use strict";n(2502)},5070:function(t,e,n){"use strict";n(2503)},5071:function(t,e,n){"use strict";n(2504)},5072:function(t,e,n){"use strict";n(2505)},5073:function(t,e,n){"use strict";n(2506)},5074:function(t,e,n){"use strict";n(2507)},5075:function(t,e,n){"use strict";n(2508)},5076:function(t,e,n){"use strict";n(2509)},5077:function(t,e,n){"use strict";n(2510)},5078:function(t,e,n){"use strict";n(2511)},5079:function(t,e,n){"use strict";n(2512)},5082:function(t,e,n){"use strict";n(2514)},5083:function(t,e,n){"use strict";n(2515)},5084:function(t,e,n){"use strict";n(2516)},5085:function(t,e,n){"use strict";n(2517)},5086:function(t,e,n){"use strict";n(2518)},5087:function(t,e,n){"use strict";n(2519)},5088:function(t,e,n){"use strict";n(2520)},5089:function(t,e,n){"use strict";n(2521)},5090:function(t,e,n){"use strict";n(2522)},5091:function(t,e,n){"use strict";n(2523)},5092:function(t,e,n){"use strict";n(2524)},5093:function(t,e,n){"use strict";n(2525)},5094:function(t,e,n){"use strict";n(2526)},5095:function(t,e,n){"use strict";n(2527)},5096:function(t,e,n){"use strict";n(2528)},5097:function(t,e,n){"use strict";n(2529)},5098:function(t,e,n){"use strict";n(2530)},5099:function(t,e,n){"use strict";n(2531)},5100:function(t,e,n){"use strict";n(2532)},5101:function(t,e,n){"use strict";n(2533)},5102:function(t,e,n){"use strict";n(2534)},5103:function(t,e,n){"use strict";n(2535)},5105:function(t,e,n){"use strict";n(2537)},5106:function(t,e,n){"use strict";n(2538)},5107:function(t,e,n){"use strict";n(2539)},5108:function(t,e,n){"use strict";n(2540)},5109:function(t,e,n){"use strict";n(2541)},5110:function(t,e,n){"use strict";n(2542)},5111:function(t,e,n){"use strict";n(2543)},5112:function(t,e,n){"use strict";n(2544)},5113:function(t,e,n){"use strict";n(2545)},5114:function(t,e,n){"use strict";n(2546)},5115:function(t,e,n){"use strict";n(2547)},5117:function(t,e,n){"use strict";n(2549)},5118:function(t,e,n){"use strict";n(2550)},5119:function(t,e,n){"use strict";n(2551)},5193:function(t,e,n){"use strict";n(2625)},5194:function(t,e,n){"use strict";n(2626)},5195:function(t,e,n){"use strict";n(2627)},5196:function(t,e,n){"use strict";n(2628)},5197:function(t,e,n){"use strict";n(2629)},5198:function(t,e,n){"use strict";n(2630)},5199:function(t,e,n){"use strict";n(2631)},5200:function(t,e,n){"use strict";n(2632)},5201:function(t,e,n){"use strict";n(2633)},5202:function(t,e,n){"use strict";n(2634)},5203:function(t,e,n){"use strict";n(2635)},5204:function(t,e,n){"use strict";n(2636)},5205:function(t,e,n){"use strict";n(2637)},5206:function(t,e,n){"use strict";n(2638)},5207:function(t,e,n){"use strict";n(2639)},5208:function(t,e,n){"use strict";n(2640)},5209:function(t,e,n){"use strict";n(2641)},5210:function(t,e,n){"use strict";n(2642)},5211:function(t,e,n){"use strict";n(2643)},5212:function(t,e,n){"use strict";n(2644)},5213:function(t,e,n){"use strict";n(2645)},5214:function(t,e,n){"use strict";n(2646)},5215:function(t,e,n){"use strict";n(2647)},5216:function(t,e,n){"use strict";n(2648)},5217:function(t,e,n){"use strict";n(2649)},5218:function(t,e,n){"use strict";n(2650)},5219:function(t,e,n){"use strict";n(2651)},5220:function(t,e,n){"use strict";n(2652)},5221:function(t,e,n){"use strict";n(2653)},5222:function(t,e,n){"use strict";n(2654)},5223:function(t,e,n){"use strict";n(2655)},5407:function(t,e,n){"use strict";n(2827)},5408:function(t,e,n){"use strict";n(2828)},5410:function(t,e,n){"use strict";n(2830)},5411:function(t,e,n){"use strict";n(2831)},5413:function(t,e,n){"use strict";n(2833)},5414:function(t,e,n){"use strict";n(2834)},5415:function(t,e,n){"use strict";n(2835)},5416:function(t,e,n){"use strict";n(2836)},5417:function(t,e,n){"use strict";n(2837)},5418:function(t,e,n){"use strict";n(2838)},5419:function(t,e,n){"use strict";n(2839)},5420:function(t,e,n){"use strict";n(2840)},5421:function(t,e,n){"use strict";n(2841)},5422:function(t,e,n){"use strict";n(2842)},5423:function(t,e,n){"use strict";n(2843)},5424:function(t,e,n){"use strict";n(2844)},5425:function(t,e,n){"use strict";n(2845)},5426:function(t,e,n){"use strict";n(2846)},5427:function(t,e,n){"use strict";n(2849)},5428:function(t,e,n){"use strict";n(2850)},5429:function(t,e,n){"use strict";n(2851)},5430:function(t,e,n){"use strict";n(2852)},5431:function(t,e,n){"use strict";n(2853)},5432:function(t,e,n){"use strict";n(2854)},5433:function(t,e,n){"use strict";n(2855)},5434:function(t,e,n){"use strict";n(2856)},5435:function(t,e,n){"use strict";n(2857)},5436:function(t,e,n){"use strict";n(2858)},5437:function(t,e,n){"use strict";n(2859)},5438:function(t,e,n){"use strict";n(2860)},5492:function(t,e,n){"use strict";n(2909)},5493:function(t,e,n){"use strict";n(2910)},5494:function(t,e,n){"use strict";n(2911)},5532:function(t,e,n){"use strict";n(2949)},5533:function(t,e,n){"use strict";n(2950)},5545:function(t,e,n){"use strict";n(2962)},5564:function(t,e,n){"use strict";n(2980)},5565:function(t,e,n){"use strict";n(2981)},5588:function(t,e,n){"use strict";n(3004)},5715:function(t,e,n){"use strict";n.r(e);var o=n(1244),r=n(788);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);var c=n(0),component=Object(c.a)(r.default,o.a,o.b,!1,null,"57af9752",null);e.default=component.exports},5726:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13);var o=n(14),r=n(30),l=n(3),c=n(2),d=(n(20),n(19),n(6),n(32),n(50),n(69),n(16),n(22),n(18),n(8),n(4),n(28),n(40),n(44),n(7),n(41),n(26),n(1)),v=n(175),h=n(29),f=n(71),m=n(203),_=n(5028),y=n(9),w=n(10),C=n(95),O=n(921),x=(n(21),n(318));function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j={name:"EmptyArea",props:{activeTab:{type:String,default:""}},computed:I(I({},Object(d.e)("user",["cdnHost"])),{},{getEmptyUrl:function(){return"https://".concat(this.cdnHost,"/static/upload/20240926/1afb6810-3f8e-4073-8143-c2e6b1cc2daa.webp")}})},S=(n(5030),n(0)),$=Object(S.a)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty-area"},[e("img",{attrs:{src:t.getEmptyUrl,alt:"empty"}}),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("newGenerate200")))])])}),[],!1,null,"0a79dac6",null).exports,P=n(58),T=n(200);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={name:"VideoDisplay",props:{activeTab:{type:String,default:""},currentTask:{type:Object,default:function(){}}},components:{MyPlayer:x.default,EmptyArea:$,DownloadVideoPop:T.default},data:function(){return{formatDate:P.a,copyTime:null,moreOprateArr:[{icon:"icon-share-icon",label:"Share",value:"share"},{icon:"icon-shanchu",label:"Delete",value:"delete"}],zoomPrompt:!0,isShowZoom:!0}},computed:L(L({},Object(d.e)("user",["cdnHost"])),{},{getCancelImg:function(){return"https://".concat(this.cdnHost,"/static/upload/20240930/2442cc6c-9bad-4ca5-bd62-71b127dcc9fc.webp")},selectedTask:function(){var t;return null===(t=Object.keys(this.currentTask))||void 0===t?void 0:t.length},isFinished:function(){var t;return 3==(null===(t=this.currentTask)||void 0===t?void 0:t.status)},getProcess:function(){var t;return(null===(t=this.currentTask)||void 0===t?void 0:t.process)||0},alreadyUpscale:function(){var t;return 34==(null===(t=this.currentTask)||void 0===t?void 0:t.type)},leftOprateArr:function(){var t,e,n,o=(this.currentTask||{}).components,r=null==o||null===(t=o[0])||void 0===t||null===(t=t.operation_labels)||void 0===t?void 0:t.includes("videoExtend"),l=null==o||null===(e=o[0])||void 0===e||null===(e=e.operation_labels)||void 0===e?void 0:e.includes("videoExtendFrame"),c=null==o||null===(n=o[0])||void 0===n||null===(n=n.operation_labels)||void 0===n?void 0:n.includes("videoUpscale");return[{icon:"icon-icon-HD",label:"IntelligentUpscale",value:"upscale"},{icon:"icon-myPostIcon",label:"VideoSubmission",value:"post"},{icon:"icon-a-Videoextension",label:"videoProlong",value:"prolong",tips:"newGenerate136"},{icon:"icon-icon-buzhen",label:"videoFrameInterpolation",value:"videoExtendFrame",tips:"videoFrameInterpolationTip"}].filter((function(t){return"prolong"===t.value?r:"videoExtendFrame"===t.value?l:"upscale"!==t.value||c}))},getVideoUrl:function(){var t;return(null===(t=this.currentTask)||void 0===t||null===(t=t.components)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||""},isVideoUrl:function(){var t;return null===(t=this.getVideoUrl)||void 0===t?void 0:t.includes(".mp4")},isHD:function(){var t;return 34===(null===(t=this.currentTask)||void 0===t?void 0:t.type)},isNsfw:function(){var t,e=(this.currentTask||{img_uris:[]}).img_uris;return 1===(null==e||null===(t=e[0])||void 0===t?void 0:t.nsfw)},videoTaskType:function(){var t=this.currentTask||{},e=t.type,n=t.sub_type,o={33:"ImageToVideo",34:"IntelligentUpscale",36:"TextToVideo",37:"videoProlong",44:"VideoEffect",42:"videoFrameInterpolation",48:"multi_image"};return o[e]||o[n]||""}}),watch:{"currentTask.local_prompt":function(t){this.zoomPrompt=!0,this.setShowZoom(t)}},methods:{copyPrompt:function(){var t,e=this,n=(null===(t=this.currentTask)||void 0===t?void 0:t.local_prompt)||"";this.copyTime||(this.copyTime=setTimeout((function(){Object(w.g)(n),e.$message.success(e.$t("CopySuccess")),clearTimeout(e.copyTime),e.copyTime=null}),500))},moreActions:function(t){this.$emit("moreActions",t)},handleRetry:function(){this.$emit("regenerate")},setShowZoom:function(){var t=this;this.$nextTick((function(){var e=document.querySelector(".prompt"),n=null==e?void 0:e.clientHeight;t.isShowZoom=n>20,t.zoomPrompt=!1}))}}},E=(n(5031),Object(S.a)(A,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{staticClass:"video-display"},[o.isFinished?r("div",{staticClass:"video-display-time"},[o._v("\n    "+o._s(o.formatDate(o.currentTask.create_at,null===(t=o.$i18n)||void 0===t?void 0:t.locale.includes("zh")))+"\n  ")]):o._e(),o._v(" "),o.isFinished?r("div",{staticClass:"video-display-header"},[r("div",{staticClass:"type"},[o._v("\n      "+o._s(o.$t(o.videoTaskType))+"\n    ")]),o._v(" "),r("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:o.currentTask.local_prompt,placement:"top-start"}},[r("div",{staticClass:"prompt",class:{"overflow-ellipsis":!o.zoomPrompt}},[o._v("\n        "+o._s(o.currentTask.local_prompt)+"\n      ")])]),o._v(" "),o.currentTask.local_prompt?r("Icon",{attrs:{name:"codeCopy1",size:"20"},nativeOn:{click:function(t){return o.copyPrompt.apply(null,arguments)}}}):o._e(),o._v(" "),o.isShowZoom?r("i",{staticClass:"zoom-icon",class:o.zoomPrompt?"el-icon-minus":"el-icon-plus",on:{click:function(t){o.zoomPrompt=!o.zoomPrompt}}}):o._e()],1):o._e(),o._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:o.selectedTask,expression:"selectedTask"}],staticClass:"video-display-box"},[o.isNsfw?r("div",{staticClass:"nsfw-cover"},[r("img",{attrs:{src:"https://image.cdn2.seaart.me/static/upload/20250113/3bd90592-de92-4a05-a8b9-c2ada4d01dec.png",alt:""}}),o._v("\n      "+o._s(o.$t("Vedio_Notice"))+"\n    ")]):[[1,2,"1","2"].includes(o.currentTask.status)?r("div",{staticClass:"loading-box"},[r("div",{staticClass:"percentage"},[o._v(o._s(o.getProcess)+"%")]),o._v(" "),r("div",{staticClass:"progress-bar"},[r("div",{staticClass:"inner",style:{width:"".concat(o.getProcess,"%")}})]),o._v(" "),r("div",{staticClass:"desc"},[o._v(o._s(o.$t("GeneratingPlsWaitMins",{param:(null===(e=o.currentTask)||void 0===e?void 0:e.waitTime)||3})))]),o._v(" "),r("div",{staticClass:"tips"},[o._v(o._s(o.$t("ExitingAndContinue")))])]):4==o.currentTask.status?r("div",{staticClass:"cancel-box"},[r("img",{staticClass:"cancel-retry-img",attrs:{src:o.getCancelImg,alt:"cancel image"}}),o._v(" "),r("div",{staticClass:"retry-txt"},[o._v(o._s(o.$t("SystemAncellation")))])]):[o.getVideoUrl?[o.isVideoUrl?r("video",{staticClass:"video-box",attrs:{src:o.getVideoUrl,autoplay:"",loop:"",controls:"",controlsList:"nodownload"}}):r("img",{staticClass:"video-box",attrs:{src:o.getVideoUrl}})]:[r("div",{staticClass:"nsfw-cover"},[r("img",{attrs:{src:"https://image.cdn2.seaart.me/static/upload/20250113/3bd90592-de92-4a05-a8b9-c2ada4d01dec.png",alt:""}}),o._v("\n            "+o._s(o.$t("workLinkError"))+"\n          ")])]]]],2),o._v(" "),o.isFinished?r("div",{staticClass:"video-display-footer"},[r("div",{staticClass:"footer-left"},[o._l(o.leftOprateArr,(function(t){return[t.tips?r("el-tooltip",{key:t.value,staticClass:"item",attrs:{effect:"dark",content:o.$t(t.tips),placement:"top","data-event":"ai_tools_video_generator_operation_item","data-id":t.value}},[r("div",{key:t.value,staticClass:"left-operate-btn",on:{click:function(e){return o.moreActions(t.value)}}},[r("i",{staticClass:"iconfont",class:t.icon}),o._v(" "),r("span",{staticClass:"txt"},[o._v(o._s(o.$t(t.label)))])])]):r("div",{key:t.value,staticClass:"left-operate-btn",attrs:{"data-event":"ai_tools_video_generator_operation_item","data-id":t.value},on:{click:function(e){return o.moreActions(t.value)}}},[r("i",{staticClass:"iconfont",class:t.icon}),o._v(" "),r("span",{staticClass:"txt"},[o._v(o._s(o.$t(t.label)))])])]}))],2),o._v(" "),r("div",{staticClass:"footer-right"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!o.isHD,expression:"!isHD"}],staticClass:"right-operate-btn",attrs:{"data-event":"ai_tools_video_generator_retry_item"},on:{click:function(t){return o.moreActions("retry")}}},[r("i",{staticClass:"iconfont icon-refresh-icon2"})]),o._v(" "),r("DownloadVideoPop",{attrs:{videoInfo:{videoUrl:o.getVideoUrl}}},[r("div",{staticClass:"right-operate-btn",attrs:{"data-event":"ai_tools_video_generator_download_item"}},[r("i",{staticClass:"iconfont icon-icon-Download"})])]),o._v(" "),r("el-popover",{ref:"myPopover",attrs:{placement:"top-end","popper-class":"water-fall-popover","append-to-body":!0,"visible-arrow":!1,width:"100",trigger:"click"}},[r("div",{staticClass:"pop-btns flex"},o._l(o.moreOprateArr,(function(t){return r("button",{key:t.value,on:{click:function(e){return o.moreActions(t.value)}}},[r("i",{staticClass:"iconfont",class:t.icon}),o._v(" "),r("span",[o._v(o._s(o.$t(t.label)))])])})),0),o._v(" "),r("div",{staticClass:"right-operate-btn",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"iconfont icon-more"})])])],1)]):o._e(),o._v(" "),4==(null===(n=o.currentTask)||void 0===n?void 0:n.status)?r("div",{staticClass:"video-display-footer-del"},[r("el-popover",{ref:"myPopover",attrs:{placement:"top-end","popper-class":"water-fall-popover","append-to-body":!0,"visible-arrow":!1,width:"100",trigger:"click"}},[r("div",{staticClass:"pop-btns flex"},[r("button",{on:{click:function(t){return o.moreActions("delete")}}},[r("i",{staticClass:"iconfont icon-shanchu"}),o._v(" "),r("span",[o._v(o._s(o.$t("Delete")))])])]),o._v(" "),r("div",{staticClass:"right-operate-btn",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"iconfont icon-more"})])])],1):o._e(),o._v(" "),r("empty-area",{directives:[{name:"show",rawName:"v-show",value:!o.selectedTask,expression:"!selectedTask"}],attrs:{activeTab:o.activeTab}})],1)}),[],!1,null,"1d28ab9f",null)),M=E.exports;installComponents(E,{DownloadVideoPop:n(200).default});var R=n(25),N={name:"VideoHistory",props:{currentTaskId:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{debounceHandleScroll:function(){}}},mounted:function(){this.debounceHandleScroll=Object(R.debounce)(this.handleScroll,600)},beforeDestroy:function(){this.debounceHandleScroll=null},computed:{getCoverUrl:function(){return function(t){var e,n=(null==t?void 0:t.components)||[];return(null==n||null===(e=n[0])||void 0===e?void 0:e.cover_url)||""}},getCancelLabel:function(){var t=this;return function(e){return t.$t({userCancelDesc:"userCancel",sysCancelDesc:"SystemAncellation",sysTimeoutDesc:"systemTimeoutCancel"}[e]||"")}}},methods:{changeCurrentTask:function(t){this.$emit("changeCurrentTask",t)},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.$emit("updateHistory","add")}catch(t){console.log("error",t)}}}},U=(n(5032),Object(S.a)(N,(function(){var t=this,e=t._self._c;return e("div",{ref:"scrollWrapper",staticClass:"video-history",on:{scroll:t.debounceHandleScroll}},[e("div",{staticClass:"video-history-title"},[t._v(t._s(t.$t("AllVideos")))]),t._v(" "),e("div",{staticClass:"video-history-list"},t._l(t.list,(function(n){return e("div",{key:n.id,staticClass:"item-task",class:{active:t.currentTaskId==n.id},on:{click:function(e){return t.changeCurrentTask(n)}}},[[1,2,"1","2"].includes(null==n?void 0:n.status)?e("div",{staticClass:"loading-box flex-center"},[e("i",{staticClass:"el-icon-loading"}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("VideoGenerating")))]),t._v(" "),e("div",{staticClass:"sub-txt"},[t._v("\n          "+t._s(t.$t("CheckInMins",{param:3}))+"\n        ")])]):4==(null==n?void 0:n.status)?e("div",{staticClass:"cancel-box"},[e("i",{staticClass:"iconfont icon-warn"}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t(t.getCancelLabel(null==n?void 0:n.status_desc))))])]):[t.getCoverUrl(n)?e("img",{staticClass:"cover",attrs:{src:t.getCoverUrl(n),alt:"video url"}}):e("div",{staticClass:"cover-error"},[e("img",{attrs:{src:"https://image.cdn2.seaart.me/static/upload/20250113/3bd90592-de92-4a05-a8b9-c2ada4d01dec.png",alt:""}})])]],2)})),0)])}),[],!1,null,"3dc210ef",null).exports),F={props:{value:{type:Object,default:function(){return{}}},activeTab:{type:String,default:"ImageToVideo"},modelList:{type:Object,default:function(){return{}}}},data:function(){return{isShowModelList:!1}},computed:{selectedModel:function(){var t=this;return this.list.find((function(e){var n;return e.id===(null===(n=t.value)||void 0===n?void 0:n.model_no)}))||this.list[0]},list:function(){return this.modelList[this.activeTab]||[]}},watch:{activeTab:function(t){var e=this;this.list.find((function(t){var n;return t.id===(null===(n=e.value)||void 0===n?void 0:n.model_no)}))||this.handleModelChange(this.list[0].id)},isShowModelList:function(t){this.handleListScroll(t)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},beforeDestroy:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{handleListScroll:function(t){document.querySelector(".video-generation-params").style.overflowY=t?"hidden":"auto"},handleModelChange:function(t){var e=this.list.find((function(e){return e.id===t}));this.value.model_no=e.id,this.value.model_ver_no=e.model_ver_no,this.isShowModelList=!1,this.$emit("changeModel",e)},handleClickOutside:function(t){var e=this.$el.querySelector(".model-info");this.isShowModelList&&!e.contains(t.target)&&(this.isShowModelList=!1)}}},B=(n(5033),Object(S.a)(F,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"video-model",style:{backgroundImage:"url(".concat(null===(t=n.selectedModel)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.url,")")}},[o("div",{staticClass:"model-info",class:{"info-show":n.isShowModelList},on:{click:function(t){n.isShowModelList=!n.isShowModelList}}},[o("p",{staticClass:"model-type"},[n._v(n._s(n.$t("AIModel")))]),n._v(" "),o("p",{staticClass:"model-name"},[n._v(n._s(null===(e=n.selectedModel)||void 0===e?void 0:e.name))]),n._v(" "),o("i",{staticClass:"el-icon-caret-bottom"}),n._v(" "),o("div",{staticClass:"model-list"},[n._l(n.list,(function(t,i){var e,r,l;return o("div",{key:"model-item-"+i,staticClass:"model-item",class:{"model-active":t.id===(null===(e=n.value)||void 0===e?void 0:e.model_no)},attrs:{"data-event":"ai_tools_video_generator_model_item","data-id":t.id},on:{click:function(e){return e.stopPropagation(),n.handleModelChange(t.id)}}},[o("img",{attrs:{src:null==t||null===(r=t.banner)||void 0===r?void 0:r.url,alt:""}}),n._v(" "),o("p",{staticClass:"item-name ellipsis"},[n._v(n._s(t.name))]),n._v(" "),o("p",{staticClass:"item-desc"},[n._v(n._s(n.$t(t.desc)))]),n._v(" "),null!=t&&null!==(l=t.sys_tags)&&void 0!==l&&l[0]?o("span",{staticClass:"item-tag",class:"item-tag-".concat(t.sys_tags[0])},[n._v(n._s(t.sys_tags[0]))]):n._e()])})),n._v(" "),0===n.list.length?o("div",{staticClass:"model-item-empty"},[o("p",[n._v(n._s(n.$t("loading_tip")))])]):n._e()],2)])])}),[],!1,null,"e305411a",null).exports),V=n(83),H=n(469);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G={name:"VideoUpload",components:{HyUploadModal:V.default,VideoUploadBox:H.default},props:{value:{type:Object,default:function(){return{}}},isEndImg:{type:Boolean,default:!1},baseModel:{type:String,default:""},changeKey:{type:String,default:""},smartPromptLoading:{type:Boolean,default:!1}},data:function(){return{loading:!1,activeImgTab:"first_frame"}},computed:W(W(W({},Object(d.c)("user",["isLoggedIn"])),Object(d.c)("payment",["paymentInfo"])),{},{imgList:function(){var t;return null===(t=this.value)||void 0===t||null===(t=t.meta)||void 0===t||null===(t=t.generate_video)||void 0===t?void 0:t.image_opts},activeImgItem:function(){var t=this;return this.imgList.find((function(e){return e.mode===t.activeImgTab}))},activeImgUrl:function(){var t;return null===(t=this.activeImgItem)||void 0===t?void 0:t.url},isTongYiWanXiang:function(){return["SeaArt Plus","SeaArt Turbo"].includes(this.baseModel)},uploadObj:function(){return this.isTongYiWanXiang?{fileMaxSize:10,minWh:[360,360],maxWh:[2e3,2e3],accept:".jpg,.png,.jpeg,.webp,.bmp"}:{fileMaxSize:10,minWh:[300,300],minProportion:[1,2.5],maxProportion:[2.5,1]}},isShowUploadTips:function(){return this.changeKey||""!==this.baseModel},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.productLevel)&&(null===(e=this.paymentInfo)||void 0===e?void 0:e.productLevel)>1},hasFirstFrame:function(){var t;return null===(t=this.imgList)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url},hasLastFrame:function(){var t;return null===(t=this.imgList)||void 0===t||null===(t=t[1])||void 0===t?void 0:t.url},openLastFrame:function(){return["SeaArt Depth"].includes(this.baseModel)?this.isVip:["SeaArt Lite"].includes(this.baseModel)?this.hasFirstFrame:this.hasFirstFrame&&this.isVip},lastFrameTips:function(){return this.isVip||["SeaArt Lite"].includes(this.baseModel)?this.hasFirstFrame||["SeaArt Depth"].includes(this.baseModel)?void 0:this.$t("PleaseUploadFirstFrame"):this.$t("VIPOnly")}}),watch:{"value.model_no":{handler:function(t){["3","default"].includes(t)&&(this.activeImgTab="first_frame")}},isEndImg:{handler:function(t){t||(this.activeImgTab=this.changeKey||"first_frame")},immediate:!0}},methods:{checkLastFrame:function(){this.openLastFrame?this.activeImgTab="last_frame":this.isVip||["SeaArt Lite"].includes(this.baseModel)||this.$EventBus.$emit("showBreakDialog","vip_endframe_tips","standard","",["standard","professional","master"])},handleUpload:function(){this.isLoggedIn&&this.$refs.pickOrUploadImageModal.openModal()},handlePickImage:function(t){var e=null==t?void 0:t[0];"first_frame"===this.activeImgTab?this.setImgItem(e,0):this.setImgItem(e,1)},validImg:function(t){var e=null==t?void 0:t[0],n=e.url,o=e.width,r=e.height;e.size;if(console.log(o,r),!this.baseModel||!n)return"";if(o<300||r<300)return this.$t("tavern38",{number:300});var l=o/r;return l<.4||l>2.5?this.$t("ImageSizeExceedsError"):""},setImgItem:function(t,e){var n=t.url,o=t.width,r=t.height;Object.assign(this.value.meta.generate_video.image_opts[e],{url:n,width:o,height:r})},handleDelete:function(){"first_frame"===this.activeImgTab?this.setImgItem({url:"",width:0,height:0},0):this.setImgItem({url:"",width:0,height:0},1)},handleMove:function(){if(this.hasLastFrame&&this.hasFirstFrame){var t=this.value.meta.generate_video.image_opts,e=t[0],n=e.width,o=e.height,r=e.url;Object.assign(t[0],{url:t[1].url,width:t[1].width,height:t[1].height}),Object.assign(t[1],{url:r,width:n,height:o})}}}},Y=(n(5034),Object(S.a)(G,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-upload"},[e("p",{staticClass:"title"},[t._v(t._s(t.$t("selectImage")))]),t._v(" "),e("div",{staticClass:"upload-content"},[e("VideoUploadBox",{attrs:{scene:"panel",uploadObj:t.uploadObj},on:{uploadHandleConfirm:t.handlePickImage}},[e("div",{staticClass:"upload-show"},[t.activeImgUrl?[e("div",{staticClass:"handle-btn reupload-btn",on:{click:t.handleUpload}},[e("Icon",{attrs:{name:"a-icon-reselectimg",size:"16",color:"#fff"}})],1),t._v(" "),e("div",{staticClass:"handle-btn delete-btn",on:{click:function(e){return e.stopPropagation(),t.handleDelete.apply(null,arguments)}}},[e("Icon",{attrs:{name:"a-pyDelete1",size:"16",color:"#fff"}})],1),t._v(" "),e("img",{attrs:{src:t.activeImgUrl,alt:""}})]:e("div",{staticClass:"upload-box",on:{click:t.handleUpload}},[e("Icon",{attrs:{name:"a-icon-addimg2img",size:"20"}}),t._v(" "),e("p",[t._v(t._s(t.$t("UploadImg")))]),t._v(" "),t.isShowUploadTips?e("span",{staticClass:"upload-tip"},[t._v(t._s(t.isTongYiWanXiang?t.$t("uploadWanAiTips"):t.$t("newGenerate127")))]):t._e()],1),t._v(" "),t.smartPromptLoading?e("div",{staticClass:"upload-area-mask"},[e("div",{staticClass:"loading-wrapper"},[e("div",{staticClass:"custom-loading"}),t._v(" "),e("span",{staticClass:"loading-text"},[t._v(t._s(t.$t("analyzing_1"))+"...")])])]):t._e()],2)]),t._v(" "),t.isEndImg?e("div",{staticClass:"upload-change"},[e("div",{staticClass:"upload-change-item",class:{active:"first_frame"===t.activeImgTab,"cover-item":t.imgList[0].url},on:{click:function(e){t.activeImgTab="first_frame"}}},[e("div",{staticClass:"item-upload",style:{backgroundImage:"url(".concat(t.imgList[0].url,")")}}),t._v("\n        "+t._s(t.$t("newGenerate125"))+"\n      ")]),t._v(" "),e("Icon",{attrs:{name:"icon-move"},nativeOn:{click:function(e){return t.handleMove.apply(null,arguments)}}}),t._v(" "),e("div",{staticClass:"upload-change-item",class:{active:"last_frame"===t.activeImgTab,"cover-item":t.imgList[1].url,"disabled-item":!t.openLastFrame},on:{click:t.checkLastFrame}},[e("div",{staticClass:"item-upload",style:{backgroundImage:"url(".concat(t.imgList[1].url,")")}}),t._v(" "),t.openLastFrame?e("span",[t._v(t._s(t.$t("newGenerate126")))]):e("el-tooltip",{attrs:{effect:"light",content:t.lastFrameTips,placement:"top"}},[e("span",{staticClass:"text-ellipsis"},[t._v(t._s(t.$t("newGenerate126")))])])],1)],1):t._e()],1),t._v(" "),e("HyUploadModal",{ref:"pickOrUploadImageModal",attrs:{isSingleSelect:"",uploadObj:t.uploadObj,category:57},on:{onConfirm:t.handlePickImage}})],1)}),[],!1,null,"021ef035",null)),Q=Y.exports,J=(n(72),n(89),n(43),n(31),n(90),n(92),n(36)),X=n(85);function K(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return Z(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Z(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function Z(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it={name:"VideoTime",props:{activeTab:{type:String,default:"ImageToVideo"},value:{type:Object,default:function(){return{}}},baseModel:{type:String,default:""}},data:function(){return{isZoom:!0,loading:!1,smartPromptStatus:!1,smartPromptLimit:!1,throttleSetSmartPromptStatus:function(){},debounceHandleImagePrompt:function(){}}},watch:{previewImage:{handler:function(t,e){var n;t&&t!==e&&"ImageToVideo"===this.activeTab&&(null!==(n=this.value)&&void 0!==n&&n.isImageToVideoInitData?this.value.isImageToVideoInitData=!1:this.smartPromptLimit||this.debounceHandleImagePrompt())},deep:!0},activeTab:{handler:function(t,e){t!==e&&(this.smartPromptStatus=this.getSmartPromptStatus||!this.isLoggedIn)}}},computed:et(et({},Object(d.c)("user",["getSmartPromptStatus","isLoggedIn"])),{},{isHideModify:function(){return""!==this.baseModel},previewImage:function(){var t,e,n,o,r=(null===(t=this.value)||void 0===t||null===(t=t.meta)||void 0===t||null===(t=t.generate_video)||void 0===t?void 0:t.image_opts)||[];return(null==r||null===(e=r[0])||void 0===e?void 0:e.firstFrame)||(null==r||null===(n=r[0])||void 0===n?void 0:n.lastFrame)||(null==r||null===(o=r[0])||void 0===o?void 0:o.url)},isSeaArtStream:function(){return"SeaArt Dance"===this.baseModel},isKLModel:function(){return["SeaArt Lite","SeaArt Depth","SeaArt Ultra","SeaArt Ultra2"].includes(this.baseModel)}}),mounted:function(){this.throttleSetSmartPromptStatus=Object(R.throttle)(this.setSmartPromptStatus,1e3),this.debounceHandleImagePrompt=Object(R.throttle)(this.handleImagePromptStateChange,1e3),this.smartPromptStatus=this.getSmartPromptStatus||!this.isLoggedIn},beforeDestroy:function(){this.throttleSetSmartPromptStatus=null,this.debounceHandleImagePrompt=null},methods:et(et({},Object(d.b)("user",["updateAccountSettings"])),{},{handlePromptMagicMode:function(t){this.value.meta.generate_video.prompt_magic_mode=t?1:2},handleRandomPrompt:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:t.$logEvent("log_actions",{operation:"click_random_prompts",behavior_info:"on_quick_ai_page",behavior_info_sub:t.baseModel,position:"ai_tools"}),t.loading=!0,Object(J.getRandomPrompts)({art_model_no:t.value.model_no,base_model_name:t.baseModel,scene:"st_video"}).then((function(e){t.value.meta.prompt=e.data.local})).catch((function(e){t.isLoggedIn||10624!==e.code||t.$EventBus.$emit("openLoginDialog")})).finally((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()},getSmartPrompt:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v,h,f,m,_,y,w,C,line,text;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.$emit("promptChange",!0),o="",r=e.isSeaArtStream?"framepack":"",e.isKLModel&&(r="kling"),n.next=7,fetch("/api/stream/tool/prompt/image",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream",token:e.$cookies.get("T"),"Accept-Language":e.$cookies.get("lang")||navigator.language||navigator.browserLanguage,"X-App-Id":"web_global_seaart","X-Device-Id":e.$cookies.get("deviceId")},body:JSON.stringify({image_url:t,scene:r})});case 7:l=n.sent,c=l.body.getReader(),d=new TextDecoder("utf-8"),v="";case 11:return n.next=14,c.read();case 14:if(h=n.sent,f=h.done,m=h.value,!f){n.next=19;break}return n.abrupt("break",53);case 19:if(!(_=d.decode(m,{stream:!0})).includes('"code":10624')){n.next=27;break}if(e.isLoggedIn){n.next=24;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("break",53);case 24:return e.smartPromptLimit=!0,e.$message.error("".concat(e.$t("smart_prompt")).concat(e.$t("todayMax"))),n.abrupt("break",53);case 27:if(!_.includes('"code":20000')){n.next=30;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("break",53);case 30:y=(v+=_).split("\n"),v=y.pop()||"",w=K(y),n.prev=34,w.s();case 36:if((C=w.n()).done){n.next=43;break}if(""!==(line=C.value).trim()){n.next=40;break}return n.abrupt("continue",41);case 40:if(line.startsWith("data: "))try{"---end---"!==(text=line.slice(6))&&(o+=text,e.value.meta.prompt=o)}catch(t){console.error("解析数据失败:",t)}case 41:n.next=36;break;case 43:n.next=48;break;case 45:n.prev=45,n.t0=n.catch(34),w.e(n.t0);case 48:return n.prev=48,w.f(),n.finish(48);case 51:n.next=11;break;case 53:e.$emit("promptChange",!1),n.next=61;break;case 56:n.prev=56,n.t1=n.catch(0),console.error("获取智能提示失败",n.t1),e.$message.error("".concat(e.$t("smart_prompt")).concat(e.$t("comicPage17"))),e.$emit("promptChange",!1);case 61:case"end":return n.stop()}}),n,null,[[0,56],[34,45,48,51]])})))()},setSmartPromptStatus:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=4;break}return t.smartPromptStatus=!t.smartPromptStatus,t.handleImagePromptStateChange(),e.abrupt("return");case 4:return t.$logEvent("log_actions",{operation:"click_ai_prompt",behavior_info:"on_quick_ai_page"}),e.next=7,Object(X.c)({mode:1,task_image_prompt_switch:t.smartPromptStatus?1:0});case 7:n=e.sent,1e4===n.status.code&&(t.smartPromptStatus=!t.smartPromptStatus,t.updateAccountSettings({task_image_prompt_switch:t.smartPromptStatus?0:1}),t.handleImagePromptStateChange());case 10:case"end":return e.stop()}}),e)})))()},handleImagePromptStateChange:function(){this.smartPromptStatus&&this.previewImage&&"ImageToVideo"===this.activeTab&&this.getSmartPrompt(this.previewImage)}})},at=(n(5035),Object(S.a)(it,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-prompt"},[e("div",{staticClass:"title"},[t._v("\n    "+t._s(t.$t("Prompt"))+"\n    "),e("span",{directives:[{name:"show",rawName:"v-show",value:"ImageToVideo"===t.activeTab,expression:"activeTab === 'ImageToVideo'"}],staticClass:"sub"},[t._v("("+t._s(t.$t("Optional"))+")")]),t._v(" "),e("el-switch",{directives:[{name:"show",rawName:"v-show",value:"ImageToVideo"===t.activeTab,expression:"activeTab === 'ImageToVideo'"}],model:{value:t.isZoom,callback:function(e){t.isZoom=e},expression:"isZoom"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isZoom,expression:"isZoom"}],staticClass:"prompt-content"},[e("el-input",{staticClass:"prompt-textarea",attrs:{type:"textarea",resize:"none",maxlength:"SeaArt Magic"===t.baseModel?2048:1500,"show-word-limit":"",placeholder:t.$t("ai_video_generation_prompt"),autosize:!1},model:{value:t.value.meta.prompt,callback:function(e){t.$set(t.value.meta,"prompt",e)},expression:"value.meta.prompt"}}),t._v(" "),e("div",{staticClass:"prompt-footer"},[t.isHideModify?t._e():[e("el-switch",{staticClass:"prompt-modify",attrs:{value:1===t.value.meta.generate_video.prompt_magic_mode},on:{change:t.handlePromptMagicMode}}),t._v("\n        "+t._s(t.$t("PromptModify"))+"\n        "),e("HelpTip",{staticClass:"help",attrs:{color:"#fff",content:t.$t("ai_video_generation_prompt_modify"),size:"14px"}})]],2),t._v(" "),e("div",{staticClass:"prompt-random-box",class:{"left-random":t.isHideModify}},[e("div",{staticClass:"prompt-random",on:{click:t.handleRandomPrompt}},[e("Icon",{class:{rotating:t.loading},attrs:{name:"dice-square",size:"16",color:"#fff"}}),t._v(" "),e("span",[t._v(t._s(t.$t("newGenerate28")))])],1),t._v(" "),e("el-tooltip",{attrs:{content:t.$t("smart_prompt_tip"),placement:"top"}},["ImageToVideo"===t.activeTab?e("div",{staticClass:"prompt-random",class:{"prompt-random-active":t.smartPromptStatus},attrs:{"data-event":"ai_tools_smart_prompt"},on:{click:function(e){return e.stopPropagation(),t.throttleSetSmartPromptStatus.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-zhinengtishi smart-prompt-icon"}),t._v(" "),e("span",[t._v(t._s(t.$t("smart_prompt")))])]):t._e()])],1)],1)])}),[],!1,null,"009c6567",null)),nt=at.exports;installComponents(at,{HelpTip:n(297).default});var ot={"1:1":"icon-icon-a-1_11","16:9":"icon-a-16_91","4:3":"icon-a-4_31","3:4":"icon-a-3_4","9:16":"icon-a-9_161","3:2":"icon-a-3_2","2:3":"icon-a-2_3","21:9":"icon-a-21_9"},st={name:"VideoTime",props:{value:{type:Object,default:function(){return{meta:{aspect_ratio:"16:9",width:1280,height:720}}}},sizeList:{type:Array,default:function(){return[]}},baseModel:{type:String,default:""},activeTab:{type:String,default:""}},data:function(){return{}},computed:{renderVideoSizeOptions:function(){var t;return(null===(t=this.sizeList)||void 0===t?void 0:t.map((function(i,t){return{width:i.width,height:i.height,showAspectRatio:i.aspect_ratio,label:i.aspect_ratio,icon:ot[i.aspect_ratio],code:t+1}})))||[]},showResolution:function(){return"SeaArt Magic"!==this.baseModel}},methods:{changeSize:function(t){var e=t.width,n=t.height,o=t.showAspectRatio;this.value.meta.width=e,this.value.meta.height=n,this.value.meta.aspect_ratio=o}}},lt=(n(5036),Object(S.a)(st,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"size-panel"},[e("p",{staticClass:"title"},[t._v("\n    "+t._s(t.showResolution?t.$t("ToVideoSize"):t.$t("fast_ai_image_site"))+"\n    "),t.showResolution?e("span",{staticClass:"size-info"},[t._v(t._s(t.value.meta.width)+"x"+t._s(t.value.meta.height))]):t._e()]),t._v(" "),e("div",{staticClass:"size-list"},t._l(t.renderVideoSizeOptions,(function(n){return e("div",{key:n.code,staticClass:"size-item",class:{active:n.showAspectRatio===t.value.meta.aspect_ratio},on:{click:function(e){return t.changeSize(n)}}},[e("div",{staticClass:"size-item-icon"},[e("i",{class:"iconfont ".concat(n.icon)})]),t._v("\n      "+t._s(n.label)+"\n    ")])})),0)])}),[],!1,null,"4e1e100c",null).exports),ct=(n(24),{props:{value:{type:Number,default:1}},data:function(){return{statusList:[{label:this.$t("studio41"),value:2},{label:this.$t("studio42"),value:1},{label:this.$t("studio43"),value:0}],activeStatus:this.value}},methods:{handleStatusChange:function(t){this.activeStatus=t,this.$emit("changeMagicMode",t)}}}),ut=(n(5037),Object(S.a)(ct,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"prompt-magic"},[e("div",{staticClass:"prompt-magic-title"},[t._v("\n    "+t._s(t.$t("studio28"))+"\n    "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("studio45"),placement:"top-start"}},[e("i",{staticClass:"custom-tips el-icon-warning"})])],1),t._v(" "),e("div",{staticClass:"prompt-magic-content"},t._l(t.statusList,(function(n){return e("div",{key:n.value,staticClass:"prompt-magic-item",class:{active:t.activeStatus===n.value},on:{click:function(e){return t.handleStatusChange(n.value)}}},[e("div",{staticClass:"prompt-magic-item-label"},[t._v(t._s(n.label))])])})),0)])}),[],!1,null,"c47a4d52",null).exports),pt={props:{min:{type:Number,default:1},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:Number,default:5}},data:function(){return{duration:this.value}},methods:{handleChange:function(t){this.$emit("changeDuration",t)}}};n(5038);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gt={name:"VideoParams",components:{VideoSize:lt,PromptMagic:ut,DurationSlider:Object(S.a)(pt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"duration-slider"},[e("div",{staticClass:"duration-slider-title"},[t._v(t._s(t.$t("Duration")))]),t._v(" "),e("div",{staticClass:"duration-slider-content"},[e("el-slider",{attrs:{min:t.min,max:t.max,step:t.step},on:{change:t.handleChange},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),t._v(" "),e("div",{staticClass:"duration-slider-content-input"},[t._v(t._s(t.value))])],1)])}),[],!1,null,"886a405c",null).exports},props:{value:{type:Object,default:function(){return{}}},activeTab:{type:String,default:"ImageToVideo"},baseModel:{type:String,default:""},videoModelParams:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,lastFrameState:!1}},computed:ht(ht(ht(ht({},Object(d.e)("user",["userInfo","token"])),Object(d.e)("payment",["paymentInfo"])),Object(d.c)("user",["isCompanyAccount","isLoggedIn"])),{},{disableBasicMode:function(){var t,e=["SeaArt Lite"].includes(this.baseModel),n="TextToVideo"===this.activeTab;return!e&&!n&&(null===(t=this.value)||void 0===t||null===(t=t.meta)||void 0===t||null===(t=t.generate_video)||void 0===t||null===(t=t.image_opts)||void 0===t||null===(t=t[1])||void 0===t?void 0:t.url)},isPrivate:function(){var t;return!!this.token&&!(null!==(t=this.userInfo)&&void 0!==t&&null!==(t=t.settings)&&void 0!==t&&t.is_auto_pub_community)},gen_mode:function(){var t;return null===(t=this.value.meta.generate)||void 0===t?void 0:t.gen_mode},duration:function(){var t;return null===(t=this.value.meta.generate_video)||void 0===t?void 0:t.generate_video_duration},n_iter:function(){return this.value.meta.n_iter},relevance:function(){var t;return null===(t=this.value.meta.generate_video)||void 0===t?void 0:t.relevance},img_generate_mode:function(){var t;return null===(t=this.value.meta.generate_video)||void 0===t?void 0:t.img_generate_mode},isVipFun:function(){var t=this.paymentInfo||{},e=t.productLevel,n=t.activeState,o=t.liteActiveState;return(n||o)&&e>=2||this.isCompanyAccount},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},isMiniMaxModel:function(){return"SeaArt Sparkle"===this.baseModel},isSeaArtUltra2:function(){return"SeaArt Ultra2"===this.baseModel},actionTabVideoModelParams:function(){var t,e="ImageToVideo"===this.activeTab?"i2v_model_param":"t2v_model_param";return(null===(t=this.videoModelParams)||void 0===t?void 0:t[e])||{}},videoModelSizeConfig:function(){var t;return(null===(t=this.actionTabVideoModelParams)||void 0===t||null===(t=t.resolution_param)||void 0===t?void 0:t.options)||[]},videoModelDurationConfig:function(){var t;return(null===(t=this.actionTabVideoModelParams)||void 0===t||null===(t=t.duration_ctl)||void 0===t?void 0:t.map((function(i){return{code:i,label:"".concat(i,"s")}})))||[]},showVideoTime:function(){var t;return null===(t=this.videoModelDurationConfig)||void 0===t?void 0:t.length},isShowMode:function(){var t;return null===(t=this.actionTabVideoModelParams)||void 0===t?void 0:t.enable_gen_mode_ctl},isShowPromptMagic:function(){var t;return null===(t=this.actionTabVideoModelParams)||void 0===t?void 0:t.enable_prompt_magic_mode_ctl},isShowRelevance:function(){var t;return null===(t=this.actionTabVideoModelParams)||void 0===t?void 0:t.enable_relevance},isDisabled10s:function(){var t,e=(this.value||{}).meta.generate_video||{},n=e.camera_control_option,o=e.image_opts;return!(!["SeaArt Lite","SeaArt Ultra2"].includes(this.baseModel)||"TextToVideo"===this.activeTab)&&(!(null==o||null===(t=o[1])||void 0===t||!t.url)||"Camera Movement"!==n.mode)},isDisabled5s:function(){var t,e=((this.value||{}).meta.generate_video||{}).image_opts;return!(!["SeaArt Ultra2"].includes(this.baseModel)||"TextToVideo"===this.activeTab)&&!(null==e||null===(t=e[1])||void 0===t||!t.url)},isDisabledQuality:function(){return"SeaArt Ultra"===this.baseModel&&"TextToVideo"===this.activeTab},isOpenQuality:function(){return("SeaArt Ultra"===this.baseModel||"SeaArt Depth"===this.baseModel)&&"ImageToVideo"===this.activeTab},isTongYiWanXiang:function(){return["SeaArt Plus","SeaArt Turbo"].includes(this.baseModel)},isTongYiWanXiangPlus:function(){return"SeaArt Plus"===this.baseModel},isTongYiWanXiangTurbo:function(){return"SeaArt Turbo"===this.baseModel},isShowGenerateNum:function(){return["SeaArt Ultra","SeaArt Lite","SeaArt Depth","SeaArt Ultra2"].includes(this.baseModel)}}),watch:{isDisabledQuality:function(t){t&&1===this.gen_mode&&(console.log("newVal",t),this.setGenMode(0))},isOpenQuality:function(t){var e;t&&0===this.gen_mode&&(null!==(e=this.value.meta.generate_video.image_opts)&&void 0!==e&&null!==(e=e[1])&&void 0!==e&&e.url&&this.setGenMode(1))},isDisabled10s:function(t){t&&10===this.duration&&this.setDuration(5)},"value.meta.generate_video.image_opts":{handler:function(t){var e,n=null==t||null===(e=t[1])||void 0===e?void 0:e.url;n&&!this.lastFrameState&&!["SeaArt Lite"].includes(this.baseModel)&&["SeaArt Ultra","SeaArt Depth"].includes(this.baseModel)&&(this.value.meta.generate.gen_mode=1,this.$message.success(this.$t("LastFrameOnlyQualityMode"))),this.lastFrameState=n},deep:!0}},methods:ht(ht({},Object(d.b)("user",["getAccountInfo","setAutoPubCommunity"])),{},{setPrivate:function(t){if(this.isTongYiWanXiang&&this.$logEvent({operation:t?"click_quality_model_on":"click_quality_model_off",behavior_info:"on_new_create_flow_page",behavior_info_sub:this.baseModel}),this.token)return t&&!this.paymentInfo.show_auto_pub_switch?(this.$logEvent(Object(c.a)({operation:"to_pay_pop_show",behavior_info:"SpecificPop_QualityWork",behavior_info_sub:this.baseModel},"behavior_info_sub","pop_2")),void this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic","SpecificPop_SwiftAI_PrivateMode_Popup")):void this.saveSettings(t);this.$EventBus.$emit("openLoginDialog",{dot:!1})},changeMagicMode:function(t){this.value.meta.generate_video.prompt_magic_mode=t},changeDuration:function(t){this.value.meta.generate_video.generate_video_duration=t},saveSettings:function(t){var e=this;this.loading||(this.loading=!0,Object(X.c)({auto_pub_community:t?2:1,mode:1}).then((function(n){e.$message.success(e.$t("SaveSuccess")),e.setAutoPubCommunity(!t),e.getAccountInfo()})).finally((function(){e.loading=!1})))},setGenMode:function(t){var e;if(!this.disableBasicMode||0!==t){var n=1===t&&this.isDisabledQuality;this.token?(this.$logEvent("log_actions",{operation:1===t?"click_quality_model_off":"click_quality_model_on",behavior_info:"on_new_create_flow_page",behavior_info_sub:this.baseModel,position:"ai_tools"}),n||(this.isVip||1!==t?this.isVip&&1===(null===(e=this.paymentInfo)||void 0===e?void 0:e.productLevel)&&1===t?this.$EventBus.$emit("showUpgradeDialog","video_vip_tips_web","standard","SpecificPop_QualityWork",["standard","professional","master"]):this.value.meta.generate.gen_mode=t:this.$EventBus.$emit("showBreakDialog","UpgradeQualityModel","standard","SpecificPop_QualityWork",["standard","professional","master"]))):this.$EventBus.$emit("openLoginDialog",{dot:!1})}},setDuration:function(t){this.isDisabled10s&&10===t||(this.value.meta.generate_video.generate_video_duration=t)},setNIter:function(t){if("vip2"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")){if(!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog");if(!this.isVipFun)return this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"video_nums_popup",behavior_info_sub:"pop_2"}),void this.$EventBus.$emit("showBreakDialog","video_vip_tips_web","standard","SpecificPop_QualityWork",["standard","professional","master"])}this.value.meta.n_iter=t,this.$logEvent("log_actions",{operation:"generate_nums",behavior_info:"on_quick_ai_page",behavior_info_sub:t})},setRelevance:function(t){this.value.meta.generate_video.relevance=t},setImgMode:function(t){this.value.meta.generate_video.img_generate_mode=t}})},ft=gt,mt=(n(5039),Object(S.a)(ft,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-params"},[t.isShowMode?e("div",{staticClass:"mode-params"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("newGenerate5"))+"\n      "),e("HelpTip",{staticClass:"help",attrs:{color:"#ffffff",textAlign:"left",width:"370",content:t.$t("newGenerate108")}})],1),t._v(" "),e("div",{staticClass:"params-content"},[e("div",{staticClass:"params-item",class:{active:0===t.gen_mode,"disabled-box":t.disableBasicMode},attrs:{"data-event":"ai_tools_generate_basic_mode_item"},on:{click:function(e){return t.setGenMode(0)}}},[t._v("\n        "+t._s(t.$t("newGenerate44"))+"\n      ")]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("newGenerate112"),placement:"top",disabled:!t.isDisabledQuality}},[e("div",{staticClass:"params-item",class:{active:1===t.gen_mode,disabled:t.isDisabledQuality},attrs:{"data-event":"ai_tools_generate_quality_mode_item"},on:{click:function(e){return t.setGenMode(1)}}},[e("img",{attrs:{src:n(136),alt:""}}),t._v("\n          "+t._s(t.$t("newGenerate45"))+"\n        ")])])],1)]):t._e(),t._v(" "),t.isShowPromptMagic?e("prompt-magic",{attrs:{value:t.value.meta.generate_video.prompt_magic_mode},on:{changeMagicMode:t.changeMagicMode}}):t._e(),t._v(" "),"TextToVideo"===t.activeTab&&t.videoModelSizeConfig.length?e("video-size",{attrs:{sizeList:t.videoModelSizeConfig,baseModel:t.baseModel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showVideoTime,expression:"showVideoTime"}],staticClass:"duration-params"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("Duration")))]),t._v(" "),e("div",{staticClass:"params-content"},t._l(t.videoModelDurationConfig,(function(n){return e("div",{key:n.code,staticClass:"params-item",class:{active:t.duration===n.code,disabled:5===n.code&&t.isDisabled5s||10===n.code&&t.isDisabled10s},on:{click:function(e){return t.setDuration(n.code)}}},[t._v("\n        "+t._s(n.label)+"\n      ")])})),0)]),t._v(" "),t.isShowRelevance?e("div",{staticClass:"relevance-params"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("relevanceSearch"))+"\n      "),e("HelpTip",{staticClass:"help",attrs:{color:"#ffffff",content:t.$t("newGenerate109")}})],1),t._v(" "),e("div",{staticClass:"params-content"},[e("el-slider",{attrs:{value:t.relevance,"show-input":"","show-input-controls":!1,min:0,max:1,step:.1},on:{input:t.setRelevance}})],1)]):t._e(),t._v(" "),t.isShowGenerateNum?e("div",{staticClass:"count-params"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("newGenerate124"))+"\n      ")]),t._v(" "),e("div",{staticClass:"params-content num-2"},[e("div",{staticClass:"params-item",class:{active:1===t.n_iter},attrs:{"data-event":"ai_tools_generate_num","data-id":1},on:{click:function(e){return t.setNIter(1)}}},[t._v("\n        1\n      ")]),t._v(" "),e("div",{staticClass:"params-item",class:{active:2===t.n_iter},attrs:{"data-event":"ai_tools_generate_num","data-id":2},on:{click:function(e){return t.setNIter(2,"vip2")}}},[e("img",{attrs:{src:n(136),alt:""}}),t._v("\n        2\n      ")])])]):t._e(),t._v(" "),t.isMiniMaxModel?["ImageToVideo"===t.activeTab?e("div",{staticClass:"mode-params"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("newGenerate84")))]),t._v(" "),e("div",{staticClass:"params-content"},[e("div",{staticClass:"params-item",class:{active:"img"===t.img_generate_mode},on:{click:function(e){return t.setImgMode("img")}}},[t._v("\n          "+t._s(t.$t("ImageToVideo"))+"\n        ")]),t._v(" "),e("div",{staticClass:"params-item",class:{active:"live2d"===t.img_generate_mode},on:{click:function(e){return t.setImgMode("live2d")}}},[t._v("\n          "+t._s(t.$t("newGenerate122"))+"\n        ")])])]):t._e(),t._v(" "),e("div",{staticClass:"count-params"},[e("div",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("newGenerate124"))+"\n        ")]),t._v(" "),e("div",{staticClass:"params-content num-3"},[e("div",{staticClass:"params-item",class:{active:1===t.n_iter},on:{click:function(e){return t.setNIter(1)}}},[t._v("1")]),t._v(" "),e("div",{staticClass:"params-item",class:{active:2===t.n_iter},on:{click:function(e){return t.setNIter(2)}}},[t._v("2")]),t._v(" "),e("div",{staticClass:"params-item",class:{active:3===t.n_iter},on:{click:function(e){return t.setNIter(3)}}},[t._v("3")])])])]:t._e(),t._v(" "),e("div",{staticClass:"private-params"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("newGenerate12"))+"\n      "),e("img",{attrs:{src:n(136),alt:""}}),t._v(" "),e("el-switch",{attrs:{value:t.isPrivate,"data-event":"ai_tools_video_generator_private_work_switch"},on:{change:t.setPrivate}})],1)])],2)}),[],!1,null,"6956c640",null)),_t=mt.exports;installComponents(mt,{HelpTip:n(297).default});var bt={props:{seed:{type:Number,default:-1},value:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,isCheckSeed:!0,customSeed:"",randomSeed:this.seed}},watch:{seed:{handler:function(t){this.randomSeed=t}}},computed:{showImgSeed:function(){return this.value.meta.seed>0}},mounted:function(){this.generateRandomSeed()},methods:{generateRandomSeed:function(){this.customSeed=Math.floor(2147483647*Math.random()),this.$emit("changeSeed",this.customSeed)},setRandomSeed:function(){this.isCheckSeed=!1,this.customSeed=this.randomSeed,this.$emit("changeSeed",this.customSeed)},changeSeed:function(t){this.$emit("changeSeed",t)}}},yt=(n(5040),Object(S.a)(bt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed-seed-panel"},[e("div",{staticClass:"fixed-seed"},[e("div",{staticClass:"panel-item-label"},[e("span",{staticClass:"generate-mode-panel-label-text"},[t._v(t._s(t.$t("newGenerate21")))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("newGenerate42"),placement:"top-start"}},[e("i",{staticClass:"custom-tips el-icon-warning"})])],1),t._v(" "),e("el-switch",{attrs:{"active-color":"#3F8CFF"},on:{change:function(e){return t.generateRandomSeed()}},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}})],1),t._v(" "),t.isShow?e("div",{staticClass:"fixed-seed-content"},[e("el-input-number",{staticStyle:{"align-self":"center"},attrs:{placeholder:t.$t("customSeed"),precision:0,controls:!1,min:0,max:2147483647},on:{change:t.changeSeed},model:{value:t.customSeed,callback:function(e){t.customSeed=e},expression:"customSeed"}}),t._v(" "),t.showImgSeed&&t.isCheckSeed?e("div",{staticClass:"seed-temp",on:{click:t.setRandomSeed}},[t._v("\n      "+t._s(t.$t("useImgSeed",{seed:t.randomSeed}))+"\n    ")]):t._e()],1):t._e()])}),[],!1,null,"2691ad1a",null).exports),wt={name:"VideoAdvanced",components:{FixedSeed:yt},props:{value:{type:Object,default:function(){return{}}},cameraControlModeList:{type:Array,default:function(){return[]}},activeTab:{type:String,default:"ImageToVideo"},baseModel:{type:String,default:""}},data:function(){return{isZoom:!0,isPrompt:!1}},computed:{isShowNegativePrompt:function(){return!("SeaArt Dance"===this.baseModel)},isShowSeed:function(){return"SeaArt Dance"===this.baseModel},camera_control_option:function(){var t;return(null===(t=this.value.meta.generate_video)||void 0===t?void 0:t.camera_control_option)||{}},cameraControlModeItem:function(){var t=this;return this.cameraControlModeList.find((function(e){var n;return e.mode===(null===(n=t.camera_control_option)||void 0===n?void 0:n.mode)}))},filteredCameraControlModeList:function(){if("SeaArt Depth"===this.baseModel){var t=["Camera Movement","Horizontal","Vertical","Zoom","Pan","Titt","Roll"];return this.cameraControlModeList.filter((function(e){return t.includes(e.mode)}))}return this.cameraControlModeList},isDisabledCameraControl:function(){var t,e=(null===(t=this.value)||void 0===t?void 0:t.meta)||{},n=0===e.generate.gen_mode,o=5===e.generate_video.generate_video_duration;return"SeaArt Lite"===this.baseModel?"TextToVideo"===this.activeTab&&n&&o:"SeaArt Depth"===this.baseModel?"ImageToVideo"===this.activeTab&&!n&&o:void 0},isTongYiWanXiang:function(){return["SeaArt Plus","SeaArt Turbo"].includes(this.baseModel)},isSeaArtMagic:function(){return"SeaArt Magic"===this.baseModel}},watch:{isDisabledCameraControl:function(t){var e;t&&"Camera Movement"!==(null===(e=this.camera_control_option)||void 0===e?void 0:e.mode)&&this.changeCameraControl("Camera Movement")}},methods:{changeCameraControl:function(t){this.value.meta.generate_video.camera_control_option.mode=t},changeCameraControlOffset:function(t){console.log(t),this.value.meta.generate_video.camera_control_option.offset=t},changeNegativePrompt:function(t){this.value.meta.negative_prompt=t},changeSeed:function(t){this.value.meta.copySeed=t}}},Ct=(n(5041),Object(S.a)(wt,(function(){var t,e,n,o,r,l=this,c=l._self._c;return c("div",{staticClass:"video-advanced",class:{"zoom-advanced":l.isZoom}},[c("div",{staticClass:"title",on:{click:function(t){l.isZoom=!l.isZoom}}},[l._v("\n    "+l._s(l.$t("AdvancedConfig"))+"\n    "),c("i",{staticClass:"el-icon-arrow-up"})]),l._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:!l.isZoom,expression:"!isZoom"}],staticClass:"advanced-content custom-form"},[l.isSeaArtMagic?[c("div",{staticClass:"advanced-negative-prompt"},[c("div",{staticClass:"title"},[l._v("\n          "+l._s(l.$t("NegativePrompts"))+"\n          "),c("HelpTip",{staticClass:"help",attrs:{color:"#ffffff",content:l.$t("ai_video_generation_prompt_modify")}}),l._v(" "),c("el-switch",{model:{value:l.isPrompt,callback:function(t){l.isPrompt=t},expression:"isPrompt"}})],1),l._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:l.isPrompt,expression:"isPrompt"}],staticClass:"prompt-content"},[c("el-input",{attrs:{value:l.value.meta.negative_prompt,type:"textarea",maxlength:2048,"show-word-limit":"",autosize:{minRows:4,maxRows:4}},on:{input:l.changeNegativePrompt}})],1)]),l._v(" "),c("fixed-seed",{attrs:{value:l.value,seed:l.value.meta.seed},on:{changeSeed:l.changeSeed}})]:l.isTongYiWanXiang?[c("fixed-seed",{attrs:{value:l.value,seed:l.value.meta.seed},on:{changeSeed:l.changeSeed}})]:[l.isDisabledCameraControl?[c("p",{staticClass:"title"},[l._v(l._s(l.$t("newGenerate118")))]),l._v(" "),c("el-select",{attrs:{value:null===(t=l.camera_control_option)||void 0===t?void 0:t.mode,placeholder:l.$t("PleaseSelect"),size:"small","popper-class":"custom-select"},on:{change:l.changeCameraControl}},l._l(l.filteredCameraControlModeList,(function(t){return c("el-option",{key:t.mode,attrs:{label:t.mode,value:t.mode}})})),1),l._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:null===(e=l.cameraControlModeItem)||void 0===e?void 0:e.example_url,expression:"cameraControlModeItem?.example_url"}],staticClass:"advanced-review"},[c("img",{attrs:{src:null===(n=l.cameraControlModeItem)||void 0===n?void 0:n.example_url,alt:""}})])]:l._e(),l._v(" "),null!==(o=l.cameraControlModeItem)&&void 0!==o&&o.has_offset_opt&&l.isDisabledCameraControl?c("el-slider",{attrs:{value:null===(r=l.camera_control_option)||void 0===r?void 0:r.offset,"show-input":"","show-input-controls":!1,min:-10,max:10,step:.1},on:{input:l.changeCameraControlOffset}}):l._e(),l._v(" "),l.isShowNegativePrompt?c("div",{staticClass:"advanced-negative-prompt"},[c("div",{staticClass:"title"},[l._v("\n          "+l._s(l.$t("NegativePrompts"))+"\n          "),c("HelpTip",{staticClass:"help",attrs:{color:"#ffffff",content:l.$t("ai_video_generation_prompt_modify")}}),l._v(" "),c("el-switch",{model:{value:l.isPrompt,callback:function(t){l.isPrompt=t},expression:"isPrompt"}})],1),l._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:l.isPrompt,expression:"isPrompt"}],staticClass:"prompt-content"},[c("el-input",{attrs:{value:l.value.meta.negative_prompt,type:"textarea",autosize:{minRows:4,maxRows:4}},on:{input:l.changeNegativePrompt}})],1)]):l._e(),l._v(" "),l.isShowSeed?c("fixed-seed",{attrs:{value:l.value,seed:l.value.meta.seed},on:{changeSeed:l.changeSeed}}):l._e()]],2)])}),[],!1,null,"e0223768",null)),Ot=Ct.exports;installComponents(Ct,{HelpTip:n(297).default});n(122),n(49);var xt=n(46),kt=n(80),It=n(161),jt=n(433),St=n(599),$t=n(412);function Pt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return Tt(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Tt(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function Tt(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At={name:"FastToolsVideoEffects",provide:{easyTop:void 0},props:{value:{type:Object,default:function(){}},effectImgLen:{type:Number,default:0},currentEffect:{type:Object,default:function(){}}},components:{PreviteSwitchEle:$t.a,SelectEffectModal:jt.default,SpecialEffectsImage:St.default},data:function(){return{effectsList:[],effectsListCopy:[],sampleImages:[],displayedSamples:[],samplePageSize:5,remainingSampleIndices:[]}},computed:Lt(Lt({},Object(d.c)("creation",["video_config"])),{},{renderEffectsList:function(){return(this.effectsList||[]).slice(0,6)},specialEffectsImageList:function(){var t;return(null===(t=this.value)||void 0===t||null===(t=t.meta)||void 0===t||null===(t=t.generate_video)||void 0===t?void 0:t.image_opts)||[]}}),mounted:function(){this.getEffectsList(),this.getSampleImages()},methods:{getEffectListParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Lt(Lt({},{page:1,page_size:6,comfy_ui_type:6,tag_ids:[],offset:"",order_by:""}),t)},formatTitleForRoute:function(title){return title?title.toLowerCase().replace(/[()[\]{}]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""):""},findEffectByRouteName:function(t,e){var n=this;return t&&e?t.find((function(t){var o,r=(null==t||null===(o=t.src_title)||void 0===o?void 0:o.en)||"";return n.formatTitleForRoute(r)===e})):null},fetchAndMatchEffectByRoute:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$route.params.name,t.$route.path.includes("/ai-tools/effects/")&&n){e.next=4;break}return e.abrupt("return",null);case 4:if(e.prev=4,!(l=t.findEffectByRouteName(t.effectsList,n))){e.next=8;break}return e.abrupt("return",l);case 8:return console.log("未在前6条中找到匹配特效，正在获取第一页60条数据..."),e.next=11,Object(xt.easyVideoEffectTemplateList)(t.getEffectListParams({page:1,page_size:60}));case 11:if(c=e.sent,d=(null==c||null===(o=c.data)||void 0===o?void 0:o.items)||[],!(l=t.findEffectByRouteName(d,n))){e.next=17;break}return console.log("在第一页60条数据中找到匹配特效:",l.title||l.name),e.abrupt("return",l);case 17:return console.log("未在第一页找到匹配特效，正在获取第二页60条数据..."),e.next=20,Object(xt.easyVideoEffectTemplateList)(t.getEffectListParams({page:2,page_size:60}));case 20:if(v=e.sent,h=(null==v||null===(r=v.data)||void 0===r?void 0:r.items)||[],!(l=t.findEffectByRouteName(h,n))){e.next=26;break}return console.log("在第二页60条数据中找到匹配特效:",l.title||l.name),e.abrupt("return",l);case 26:return console.log("在两页数据中均未找到匹配的特效，将使用默认逻辑"),e.abrupt("return",null);case 30:return e.prev=30,e.t0=e.catch(4),console.error("根据路由参数匹配特效失败:",e.t0),e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,null,[[4,30]])})))()},getEffectsList:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h,f,m,_,y,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.getEffectListParams(),e.next=4,Object(xt.easyVideoEffectTemplateList)(o);case 4:r=e.sent,l=(null==r||null===(n=r.data)||void 0===n?void 0:n.items)||[],c=Pt(l),e.prev=7,c.s();case 9:if((d=c.n()).done){e.next=23;break}if(null==(h=d.value)||null===(v=h.cover)||void 0===v||!v.url){e.next=21;break}return e.prev=12,e.next=15,Object(w.w)(null==h||null===(f=h.cover)||void 0===f?void 0:f.url);case 15:h.cover.firstFrameUrl=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),console.error("获取gif第一帧失败:",e.t0);case 21:e.next=9;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(7),c.e(e.t1);case 28:return e.prev=28,c.f(),e.finish(28);case 31:if(t.effectsList=l,t.effectsListCopy=JSON.parse(JSON.stringify(t.effectsList)),!(t.effectsList.length>0)){e.next=43;break}if(null==t||null===(m=t.currentEffect)||void 0===m||!m.id){e.next=39;break}t.effectsList.some((function(e){return e.id===t.currentEffect.id}))||t.updateEffectsList(Lt(Lt({},t.currentEffect),{},{title:(null===(_=t.currentEffect)||void 0===_?void 0:_.title)||(null===(y=t.currentEffect)||void 0===y?void 0:y.name)})),e.next=43;break;case 39:return e.next=41,t.fetchAndMatchEffectByRoute();case 41:(C=e.sent)?t.handleSelectEffect(C):t.handleSelectEffect(t.effectsList[0]);case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(0),console.error("获取特效列表失败:",e.t2);case 48:case"end":return e.stop()}}),e,null,[[0,45],[7,25,28,31],[12,18]])})))()},getSampleImages:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.sampleImages=(null==t||null===(n=t.video_config)||void 0===n?void 0:n.effect_instance_image_list)||[],t.refreshDisplayedSamples()}catch(t){console.error("获取样本图片失败:",t)}case 1:case"end":return e.stop()}}),e)})))()},refreshDisplayedSamples:function(){var t=this;if(this.sampleImages.length<=this.samplePageSize)this.displayedSamples=Object(o.a)(this.sampleImages);else{(!this.remainingSampleIndices||this.remainingSampleIndices.length<this.samplePageSize)&&(this.remainingSampleIndices=Array.from({length:this.sampleImages.length},(function(t,i){return i})).sort((function(){return.5-Math.random()})));var e=this.remainingSampleIndices.splice(0,this.samplePageSize);this.displayedSamples=e.map((function(e){return t.sampleImages[e]}))}},handleChangeSamples:function(){this.refreshDisplayedSamples()},handleSelectSample:function(t){this.updateEffectImage(t,0)},updateEffectImage:function(t,e){var n,o={type:"effectImage"};o.url=(null==t?void 0:t.url)||(null==t||null===(n=t.info)||void 0===n||null===(n=n.banner)||void 0===n?void 0:n.url)||"";try{var r;this.$set(null===(r=this.value)||void 0===r||null===(r=r.meta)||void 0===r||null===(r=r.generate_video)||void 0===r?void 0:r.image_opts,e,o)}catch(t){}},handleSelectEffect:function(t){var e=arguments,n=this;return Object(l.a)(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.length>1&&void 0!==e[1]&&e[1],o.prev=1,o.next=4,Object(kt.h)({template_id:null==t?void 0:t.id});case 4:l=o.sent,n.$emit("selectEffect",Lt(Lt({},t),{},{templateInfo:(null==l?void 0:l.data)||{}}),r),n.updateEffectsList(Lt(Lt({},t),{},{templateInfo:(null==l?void 0:l.data)||{},title:(null==t?void 0:t.title)||(null==t?void 0:t.name)})),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),console.error("选择特效失败:",o.t0);case 13:case"end":return o.stop()}}),o,null,[[1,10]])})))()},updateEffectsList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.effectsListCopy.some((function(e){return e.id===(null==t?void 0:t.id)}));if(!e&&null!=t&&t.id){var n=JSON.parse(JSON.stringify(this.effectsListCopy));n.unshift(Lt({},t)),this.effectsList=n.slice(0,6)}if(null!=t&&t.id&&e){var o=JSON.parse(JSON.stringify(this.effectsListCopy));this.effectsList=o.slice(0,6)}},handleViewMore:function(){var t=this,e=Object(It.a)({cached:!0,cacheKey:"taskSelectEffect",render:function(n){return n(jt.default,{props:{effect:t.currentEffect},on:{selectEffect:function(n){t.handleSelectEffect(n),e.close()},cancel:function(){e.close()}}})}},this)}}},Et=At,Mt=(n(5042),Object(S.a)(Et,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"fast-tools-video-effects"},[e("div",{staticClass:"fast-tools-video-effects-content"},[e("special-effects-image",{key:"ai-effects-img-0",attrs:{source:t.specialEffectsImageList[0],scene:"fastToolsEffect"}}),t._v(" "),e("div",{staticClass:"sample-images-section"},[e("div",{staticClass:"section-header"},[e("div",{staticClass:"section-title"},[t._v(t._s(t.$t("ExampleImages")))]),t._v(" "),e("div",{staticClass:"change-btn",on:{click:t.handleChangeSamples}},[e("i",{staticClass:"el-icon-refresh"}),t._v("\n          "+t._s(t.$t("changeit"))+"\n        ")])]),t._v(" "),e("div",{staticClass:"sample-images-list"},t._l(t.displayedSamples,(function(n,o){return e("div",{key:o,staticClass:"sample-image-item",on:{click:function(e){return t.handleSelectSample(n)}}},[e("img",{attrs:{src:n.url,alt:"sample image"}})])})),0)]),t._v(" "),t.effectImgLen>=2?e("special-effects-image",{key:"ai-effects-img-1",attrs:{source:t.specialEffectsImageList[1],scene:"fastToolsEffect"}}):t._e(),t._v(" "),e("div",{staticClass:"effects-section"},[e("div",{staticClass:"section-header"},[e("div",{staticClass:"section-title"},[t._v(t._s(t.$t("pleaseSelectEffect")))]),t._v(" "),e("div",{staticClass:"view-more",on:{click:t.handleViewMore}},[t._v("\n          "+t._s(t.$t("viewMore"))+"\n          "),e("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),e("div",{staticClass:"effects-grid"},t._l(t.renderEffectsList,(function(n){var o,r,l,c,d,v,h;return e("div",{key:n.id,staticClass:"effect-card",class:{active:n.id===(null===(o=t.currentEffect)||void 0===o?void 0:o.id)},on:{click:function(e){return t.handleSelectEffect(n,!0)}}},[null!=n&&null!==(r=n.sys_tag)&&void 0!==r&&r[0]?e("div",{staticClass:"effect-tag",class:{hot:"Hot"===(null==n||null===(l=n.sys_tag)||void 0===l?void 0:l[0]),new:"New"===(null==n||null===(c=n.sys_tag)||void 0===c?void 0:c[0])}},[t._v("\n            "+t._s(null==n||null===(d=n.sys_tag)||void 0===d?void 0:d[0])+"\n          ")]):t._e(),t._v(" "),e("el-tooltip",{attrs:{placement:"top","popper-class":"effect-cover-tooltip"},scopedSlots:t._u([{key:"content",fn:function(){var o;return[e("div",{staticClass:"effect-cover-tooltip-content"},[e("img",{attrs:{src:null==n||null===(o=n.cover)||void 0===o?void 0:o.url,alt:"effect cover"}}),t._v(" "),e("div",[t._v(t._s((null==n?void 0:n.title)||(null==n?void 0:n.name)||""))])])]},proxy:!0}],null,!0)},[e("div",{staticClass:"effect-cover"},[e("img",{attrs:{src:(null==n||null===(v=n.cover)||void 0===v?void 0:v.firstFrameUrl)||(null==n||null===(h=n.cover)||void 0===h?void 0:h.url),alt:"effect cover"}})])]),t._v(" "),e("div",{staticClass:"effect-title"},[t._v("\n            "+t._s(n.title||n.name||"")+"\n          ")])],1)})),0)]),t._v(" "),e("div",{staticClass:"previte-switch-ele"},[e("previte-switch-ele",{attrs:{isShowPrevite:!0}})],1)],1)])}),[],!1,null,"7c18b5f0",null).exports),Rt=n(922),Nt=n(902);function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bt={name:"VideoStyle",components:{VideoSize:lt,FixedSeed:yt},props:{value:{type:Object,default:function(){return{}}},activeTab:{type:String,default:""},baseModel:{type:String,default:""},videoModelParams:{type:Object,default:function(){return{}}}},data:function(){return{modes:[{name:"pix_verse_1",value:"360p",vip:!1},{name:"pix_verse_2",value:"540p",vip:!0},{name:"pix_verse_3",value:"720p",vip:!0},{name:"pix_verse_4",value:"1080p",vip:!0}],style:[],isShowStyleList:!1}},computed:Ft(Ft(Ft(Ft({},Object(d.e)("user",["userInfo","token"])),Object(d.e)("payment",["paymentInfo"])),Object(d.c)("user",["isCompanyAccount","isLoggedIn"])),{},{isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},actionTabVideoModelParams:function(){var t,e="ImageToVideo"===this.activeTab?"i2v_model_param":"t2v_model_param";return(null===(t=this.videoModelParams)||void 0===t?void 0:t[e])||{}},videoModelSizeConfig:function(){var t;return(null===(t=this.actionTabVideoModelParams)||void 0===t||null===(t=t.resolution_param)||void 0===t?void 0:t.options)||[]},videoModelDurationConfig:function(){var t;return(null===(t=this.actionTabVideoModelParams)||void 0===t||null===(t=t.duration_ctl)||void 0===t?void 0:t.map((function(i){return{code:i,label:"".concat(i,"s")}})))||[]},isPrivate:function(){var t;return!!this.token&&!(null!==(t=this.userInfo)&&void 0!==t&&null!==(t=t.settings)&&void 0!==t&&t.is_auto_pub_community)},duration:function(){var t;return null===(t=this.value.meta.generate_video)||void 0===t?void 0:t.generate_video_duration},fluencyDisabled:function(){if("fast"===this.value.meta.generate_video.motion_mode)return!0},isDisabledQuality:function(){return"fast"===this.value.meta.generate_video.motion_mode||8===this.duration},isVipFun:function(){var t=this.paymentInfo||{},e=t.productLevel,n=t.activeState,o=t.liteActiveState;return(n||o)&&e>=2||this.isCompanyAccount},isDisabled8s:function(){return"fast"===this.value.meta.generate_video.motion_mode},styleImage:function(){var t,e=this.value.meta.generate_video.style;if(!this.style||!Array.isArray(this.style))return"";var n=null===(t=this.style)||void 0===t?void 0:t.find((function(t){return t.value===e}));return n?n.img:""}}),watch:{duration:function(t){var e=this.value.meta.generate_video.quality_mode;8===t&&"1080p"===e&&this.setActiveMode(this.modes.find((function(t){return"720p"===t.value})))}},methods:{setPrivate:function(t){if(this.$logEvent({operation:t?"click_quality_model_on":"click_quality_model_off",behavior_info:"on_new_create_flow_page",behavior_info_sub:this.baseModel}),this.token)return t&&!this.isVip?(this.$logEvent({operation:"to_pay_pop_show",behavior_info:"SpecificPop_QualityWork",behavior_info_sub:"pop_2",model_type:"pixverse",page_location:window.location.href}),void this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic","SpecificPop_SwiftAI_PrivateMode_Popup")):void this.saveSettings(t);this.$EventBus.$emit("openLoginDialog",{dot:!1})},saveSettings:function(t){var e=this;this.loading||(this.loading=!0,Object(X.c)({auto_pub_community:t?2:1,mode:1}).then((function(n){e.$message.success(e.$t("SaveSuccess")),e.setAutoPubCommunity(!t),e.getAccountInfo()})).finally((function(){e.loading=!1})))},setNIter:function(t){if("vip2"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")){if(!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog");if(!this.isVipFun)return void this.$EventBus.$emit("showBreakDialog","video_vip_tips_web","standard","SpecificPop_QualityWork",["standard","professional","master"])}this.value.meta.n_iter=t},setFluency:function(t){this.value.meta.generate_video.motion_mode=t,this.setDuration(5),"fast"===t&&"1080p"===this.value.meta.generate_video.quality_mode&&this.setActiveMode(this.modes.find((function(t){return"720p"===t.value})))},setActiveMode:function(t){this.isLoggedIn?"360p"===t.value||this.isVipFun?("1080p"===t.value&&"fast"===this.value.meta.generate_video.motion_mode&&this.setFluency("normal"),"1080p"===t.value&&this.setDuration(5),this.value.meta.generate_video.quality_mode=t.value):this.$EventBus.$emit("showBreakDialog","UpgradeQualityModel","standard","",["standard","professional","master"]):this.$EventBus.$emit("openLoginDialog")},setDuration:function(t){8===t&&"fast"===this.value.meta.generate_video.motion_mode&&"720p"!==this.value.meta.generate_video.quality_mode&&(t=5),this.value.meta.generate_video.generate_video_duration=t},handleStyleChange:function(t){this.value.meta.generate_video.style=t.value,this.isShowStyleList=!1},handleClickOutside:function(t){this.$el.contains(t.target)||(this.isShowStyleList=!1)},changeSeed:function(t){this.value.meta.copySeed=t}},mounted:function(){var t=this;this.value.meta.generate_video.aspect_ratio="16:9",this.value.meta.generate_video.width=1280,this.value.meta.generate_video.height=720,this.setDuration(5),Object(C.q)().then((function(e){var n={img:"",name:t.$t("fast_ai_style_no"),value:""};t.style=[n].concat(e.data.style_control_items)}))}},Vt=Bt,Ht=(n(5044),Object(S.a)(Vt,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"video-style",on:{click:function(e){t.isShowStyleList=!t.isShowStyleList}}},[e("div",{staticClass:"content"},[t.styleImage?e("img",{staticClass:"image",attrs:{src:t.styleImage,alt:"image"}}):e("div",{staticClass:"default-image"},[e("i",{staticClass:"iconfont icon-home_icon_work"})]),t._v(" "),e("div",{staticClass:"text"},[e("div",{staticClass:"style"},[t._v(t._s(t.$t("fast_ai_style")))]),t._v(" "),e("div",{staticClass:"style-name"},[t._v(t._s(t.value.meta.generate_video.style||t.$t("createModeType1")))])])]),t._v(" "),e("i",{staticClass:"el-icon-caret-bottom",class:{"rotate-icon":t.isShowStyleList}}),t._v(" "),e("transition",{attrs:{name:"expand"}},[t.isShowStyleList?e("div",{staticClass:"style-list"},t._l(t.style,(function(n,o){return e("div",{key:o,staticClass:"style-item",class:{"style-active":n.name===t.value.meta.generate_video.style},on:{click:function(e){return e.stopPropagation(),t.handleStyleChange(n)}}},[n.img?[e("img",{staticClass:"style-image",attrs:{src:n.img,alt:"style"}})]:[e("div",{staticClass:"default-image"},[e("i",{staticClass:"iconfont icon-home_icon_work"})])],t._v(" "),e("div",{staticClass:"style-text"},[e("p",{staticClass:"item-name"},[t._v(t._s(n.name))])])],2)})),0):t._e()])],1),t._v(" "),e("div",{staticClass:"video-fast-container"},[e("div",{staticClass:"mode-wrapper"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("fast_ai_generation_mode")))])]),t._v(" "),e("div",{staticClass:"mode-content"},t._l(t.modes,(function(o){return e("div",{key:o.name,staticClass:"mode-item",class:{active:t.value.meta.generate_video.quality_mode===o.value,disabled:t.isDisabledQuality&&"1080p"===o.value},on:{click:function(e){return t.setActiveMode(o)}}},[e("div",{staticClass:"row-item"},[e("div",{staticClass:"mode-item-text"},[t._v(t._s(t.$t(o.name)))]),t._v(" "),e("div",{staticClass:"resolution"},[t._v(t._s(o.value))])]),t._v(" "),o.vip?e("div",{staticClass:"vip"},[e("img",{staticClass:"vip-icon",attrs:{src:n(375),alt:"vip-icon"}})]):t._e()])})),0),t._v(" "),"TextToVideo"===t.activeTab?e("video-size",{attrs:{sizeList:t.videoModelSizeConfig,activeTab:t.activeTab,baseModel:t.baseModel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e(),t._v(" "),e("div",{staticClass:"time-wrapper"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("Duration")))]),t._v(" "),e("div",{staticClass:"time-content"},[e("div",{staticClass:"time-item",class:{active:5===t.duration},on:{click:function(e){return t.setDuration(5)}}},[t._v("5s")]),t._v(" "),e("div",{staticClass:"time-item",class:{active:8===t.duration,disabled:t.isDisabled8s},on:{click:function(e){return t.setDuration(8)}}},[t._v("\n          8s\n        ")])])]),t._v(" "),e("div",{staticClass:"fluency-wrapper"},[e("div",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("pix_verse_6"))+"\n        "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("fast_ai_fluency_tips"),placement:"top-start"}},[e("i",{staticClass:"custom-tips el-icon-warning"})])],1),t._v(" "),e("div",{staticClass:"fluency-content"},[e("div",{staticClass:"fluency-item",class:{active:"normal"===t.value.meta.generate_video.motion_mode},on:{click:function(e){return t.setFluency("normal")}}},[t._v("\n          "+t._s(t.$t("fast_ai_standard"))+"\n        ")]),t._v(" "),e("div",{staticClass:"fluency-item",class:{active:"fast"===t.value.meta.generate_video.motion_mode},on:{click:function(e){return t.setFluency("fast")}}},[t._v("\n          "+t._s(t.$t("fast_ai_fluent"))+"\n        ")])])]),t._v(" "),e("div",{staticClass:"generation-wrapper"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("fast_ai_generation_amount")))]),t._v(" "),e("div",{staticClass:"generation-content"},[e("div",{staticClass:"generation-item",class:{active:1==t.value.meta.n_iter},on:{click:function(e){return t.setNIter(1)}}},[t._v("1")]),t._v(" "),e("div",{staticClass:"generation-item",class:{active:2==t.value.meta.n_iter},on:{click:function(e){return t.setNIter(2,"vip2")}}},[e("img",{staticClass:"generation-icon",attrs:{src:n(375),alt:"vip-icon"}}),t._v(" "),e("span",[t._v("2")])])])]),t._v(" "),e("div",{staticClass:"private-params"},[e("div",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("newGenerate12"))+"\n        "),e("img",{attrs:{src:n(136),alt:"vip"}})]),t._v(" "),e("el-switch",{attrs:{value:t.isPrivate},on:{change:t.setPrivate}})],1)],1)])}),[],!1,null,"dc9edeea",null).exports),zt=n(54),Wt=n(625),qt=n(868);function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt={name:"VideoGeneration",mixins:[_.a],components:{pickWorkModal:O.a,VideoDisplay:M,VideoHistory:U,EmptyArea:$,VideoModel:B,VideoUpload:Q,VideoPrompt:nt,VideoParams:_t,VideoAdvanced:Ot,VideoEffects:Mt,PreviteSwitchEle:$t.a,ProlongVideoPop:Rt.a,VideoStyle:Ht,VideoFrameInterpolation:Nt.a,VideoTemplateCard:qt.default},head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_video_generation"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{tabs:["ImageToVideo","TextToVideo","Effect"],activeTab:"ImageToVideo",expend:{cost:0,beforeCost:0},sale:0,prompt:"",tabImageOpts:{ImageToVideo:[{mode:"first_frame",url:"",width:0,height:0},{mode:"last_frame",url:"",width:0,height:0}],Effect:[{mode:"first_frame",url:"",width:0,height:0},{mode:"last_frame",url:"",width:0,height:0}]},params:{source:17100,model_no:"",model_ver_no:"",meta:{prompt:"",generate:{gen_mode:0},n_iter:1,aspect_ratio:"9:16",width:480,height:848,generate_video:{img_generate_mode:"img",prompt_magic_mode:2,generate_video_duration:5,relevance:.5,camera_control_option:{mode:"Camera Movement",offset:0},image_opts:[{mode:"first_frame",url:"",width:0,height:0},{mode:"last_frame",url:"",width:0,height:0}],quality_mode:"360p",motion_mode:"",style:""},seed:0,negative_prompt:"",task_from:"fast_web"}},histories:[],after_id:"",activeTaskId:"",generateLoading:!1,defaultPrompt:this.$t("ToVIdeoDefaultPrompt"),modelList:{ImageToVideo:[],TextToVideo:[],Effect:[]},cameraControlModeList:[],costTimer:null,currentEffect:{},effectImgLen:0,isShowSale:!1,smartPromptLoading:!1,debouncedGetPanelParams:null,videoModelParams:void 0,currentVideoModel:null,isLoading:!1}},computed:Yt(Yt(Yt(Yt({},Object(d.e)("app",["topBanner"])),Object(d.c)("user",["isLoggedIn"])),Object(d.e)("payment",["paymentInfo","isCompanyAccount"])),{},{getStyle:function(){return{height:"calc(100vh - ".concat(this.topBanner?"120px":"74px",")")}},videoFirstFrameConfig:function(){var t,e=this.videoModelParams;return(null==e||null===(t=e.i2v_model_param)||void 0===t?void 0:t.frame_ctl)||[]},showVideoUpload:function(){return this.videoFirstFrameConfig.some((function(i){return i>0}))},showVideoUploadEndImg:function(){return this.videoFirstFrameConfig.some((function(i){return i>1}))&&this.isLoggedIn},isImgToVideo:function(){return"ImageToVideo"===this.activeTab},isSeaArtMagic:function(){return["SeaArt Magic"].includes(this.selectBaseModel)},isShowAdvanced:function(){var t,e="ImageToVideo"===this.activeTab?"i2v_model_param":"t2v_model_param";return!(null===(t=this.videoModelParams)||void 0===t||null===(t=t[e])||void 0===t||!t.high_quality_setting)},defaultModel:function(){if("Effect"!==this.activeTab)return this.modelList[this.activeTab].find((function(t){return!(null!=t&&t.base_model)}))||{}},isDefaultModel:function(){var t;if("Effect"!==this.activeTab)return(this.params||{}).model_no===(null===(t=this.defaultModel)||void 0===t?void 0:t.id)},selectModel:function(){if("Effect"!==this.activeTab){var t=(this.params||{}).model_no;return this.modelList[this.activeTab].find((function(e){return e.id===t}))||{}}},isKLModel:function(){return["SeaArt Lite","SeaArt Depth","SeaArt Ultra","SeaArt Ultra2"].includes(this.selectBaseModel)},selectBaseModel:function(){var t;return null===(t=this.selectModel)||void 0===t?void 0:t.base_model},showVideoParams:function(){return!this.isSeaArtMagic},activeTaskIndex:function(){var t=this;return this.histories.findIndex((function(e){return e.id===t.activeTaskId}))||0},currentTask:function(){var t=this;return this.histories.find((function(e){return e.id===t.activeTaskId}))||{}},isVip:function(){var t,e;return(null==this||null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null==this||null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||(null==this?void 0:this.isCompanyAccount)}}),watch:{isLoggedIn:{handler:function(t,e){t&&!e&&this.getVideoHistoriesData()},immediate:!0},params:{handler:function(t,e){this.getEstimatedCost()},deep:!0},"params.meta.generate_video.image_opts":{handler:function(t){"ImageToVideo"!==this.activeTab&&"Effect"!==this.activeTab||(this.tabImageOpts[this.activeTab]=JSON.parse(JSON.stringify(t)))},deep:!0},isDefaultModel:{handler:function(t,e){this.params.meta.generate_video.generate_video_duration=t?3:5}},selectModel:function(t){this.isSeaArtMagic&&this.setSeaArtMagicParams()},selectBaseModel:function(t){var e={"SeaArt Plus":"Wan2.1 Video Plus","SeaArt Turbo":"Wan2.1 Video Turb"};e[t]&&this.$logEvent({operation:"click_ai_tools",behavior_info:"on_new_create_flow_page",behavior_info_sub:e[t]}),"SeaArt Dance"===t&&(this.params.meta.generate_video.generate_video_duration=5)}},mounted:function(){this.$route.params.name&&(this.activeTab="Effect"),this.currentVideoModel=null,this.debouncedGetPanelParams=Object(R.debounce)(this.getPanelParams,500),this.getVideoConfig(),this.tabImageOpts.ImageToVideo=JSON.parse(JSON.stringify(this.params.meta.generate_video.image_opts)),this.tabImageOpts.Effect=JSON.parse(JSON.stringify(this.params.meta.generate_video.image_opts));var t=this.$route.query.info;t&&(t=JSON.parse(t),this.handleSame(t))},beforeDestroy:function(){this.currentVideoModel=null,this.debouncedGetPanelParams=null},methods:{selectTemplate:function(t){this.params.isImageToVideoInitData=!0,Object.assign(this.params.meta.generate_video.image_opts[0],{url:t.imgs[0]}),Object.assign(this.params.meta.generate_video.image_opts[1],{url:"",width:0,height:0}),this.params.meta.prompt=this.$t(t.prompt),this.$refs.videoUpload.activeImgTab="first_frame"},updateConfig:function(t){this.params.meta=Yt(Yt({},this.params.meta),t)},updateEffectRoute:function(t){var e;if(null!=t&&null!==(e=t.src_title)&&void 0!==e&&e.en&&"Effect"===this.activeTab){var n=t.src_title.en.toLowerCase().replace(/[()[\]{}]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),o=this.localePath("/ai-tools/effects/".concat(n));window.history.replaceState(null,"",o),this.$parent&&this.$parent.getTempList&&this.$parent.getTempList(o)}},getPanelParams:function(t){var e=arguments,n=this;return Object(l.a)(regeneratorRuntime.mark((function o(){var r,l,c,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=e.length>1&&void 0!==e[1]&&e[1],t.model_no&&(null===(r=n.currentVideoModel)||void 0===r?void 0:r.base_model_name)!==t.base_model_name){o.next=3;break}return o.abrupt("return");case 3:return n.videoModelParams=void 0,o.prev=4,n.isSetUpConfigData=l,n.isLoading=!0,o.next=9,Object(xt.fetchModelParams)(t);case 9:c=o.sent,n.isLoading=!1,1e4===c.status.code&&(n.currentVideoModel=t,Object(Wt.handleVideoModelParams)({model:t,config:(null===(d=c.data)||void 0===d||null===(d=d.model_param)||void 0===d?void 0:d.video_model_generation_param)||{}},l,n)),o.next=18;break;case 14:o.prev=14,o.t0=o.catch(4),n.videoModelParams=void 0,console.error("======> 获取模型参数失败",o.t0);case 18:case"end":return o.stop()}}),o,null,[[4,14]])})))()},handlePromptChange:function(t){this.smartPromptLoading=t},setModelBySeo:function(){var t=this.$route.query.m;if(t){var e=Object(r.a)({"Wan-AI-Img2vid-Plus":["ImageToVideo","Wan2.1 Video Plus"],"Wan-AI-Img2vid-Turbo":["ImageToVideo","Wan2.1 Video Turbo"],"Wan-AI-Txt2vid-Plus":["TextToVideo","Wan2.1 Video Plus"],"Wan-AI-Txt2vid-Turbo":["TextToVideo","Wan2.1 Video Turbo"],Effect:["Effect"]}[t],2),n=e[0],o=e[1];if(this.activeTab=n,"Effect"===n)return;var l=this.modelList[n].find((function(t){return t.base_model===o}));this.params.model_no=null==l?void 0:l.id,this.params.model_ver_no=null==l?void 0:l.model_ver_no,this.debouncedGetPanelParams({model_no:null==l?void 0:l.id,model_ver_no:null==l?void 0:l.model_ver_no,base_model_name:null==l?void 0:l.base_model})}},setSeaArtMagicParams:function(){this.params.meta.aspect_ratio="16:9",this.params.meta.width=1280,this.params.meta.height=720},getVideoConfig:function(){var t=this,e=localStorage.getItem("videoConfig");e?this.setModelList(JSON.parse(e)):(this.generateLoading=!0,Object(C.s)({type:6}).then((function(e){var n=((null==e?void 0:e.data)||{}).video_config;t.setModelList(Yt(Yt({},n),{},{update_time:(new Date).getTime()+864e5}),!0)})).finally((function(){t.generateLoading=!1})))},changeModel:function(t){this.debouncedGetPanelParams({model_no:null==t?void 0:t.id,model_ver_no:null==t?void 0:t.model_ver_no,base_model_name:null==t?void 0:t.base_model})},setModelList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(this.params||{}).model_no,o=t||{},r=o.camera_control_mode_items,l=o.dft_img_model_items,c=o.dft_txt_model_items,d=o.update_time;if((void 0===d?0:d)<(new Date).getTime())return localStorage.removeItem("videoConfig"),void this.getVideoConfig();if(e&&localStorage.setItem("videoConfig",JSON.stringify(t)),this.modelList={ImageToVideo:l,TextToVideo:c},this.cameraControlModeList=r,""===n&&"Effect"!==this.activeTab){var v=this.modelList[this.activeTab][0];this.params.model_no=null==v?void 0:v.id,this.params.model_ver_no=null==v?void 0:v.model_ver_no,this.debouncedGetPanelParams({model_no:null==v?void 0:v.id,model_ver_no:null==v?void 0:v.model_ver_no,base_model_name:null==v?void 0:v.base_model})}this.setModelBySeo()},handleSame:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v,meta,f,m,_,y,image,w,C,O,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.template_id,r=t.cover,l={width:0,height:0,url:r},!o){n.next=18;break}return n.next=5,Object(h.getTaskConfig)({task_id:o,source:4});case 5:c=n.sent,d=c.data,v=d.meta,meta=void 0===v?{}:v,f=d.local_prompt,_=(m=meta||{}).width,y=m.height,image=m.image,w=m.generate_video,l.width=_,l.height=y,l.url=image,e.params.meta.prompt=f,e.params.meta.generate_video.prompt_magic_mode=null==w?void 0:w.prompt_magic_mode,n.next=24;break;case 18:return n.next=20,e.checkImageSize(r);case 20:C=n.sent,O=C.width,x=C.height,l.width=O,l.height=x;case 24:e.setParams(l);case 25:case"end":return n.stop()}}),n)})))()},setParams:function(t){Object.assign(this.params.meta.generate_video.image_opts[0],t),this.activeTab="ImageToVideo",this.params.model_no=""},checkImageSize:function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){e({width:this.width,height:this.height})},img.onerror=function(){n(new Error("Failed to load image"))},img.src=t}))},getVideoHistoriesData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init",n={after_id:"",limit:30};if("add"==e){if(!this.after_id)return;n.after_id=this.after_id}Object(v.e)(n).then((function(n){var o,r,l=(null==n||null===(o=n.data)||void 0===o?void 0:o.items)||[];t.after_id=(null==n||null===(r=n.data)||void 0===r?void 0:r.after_id)||"",l.forEach((function(t){t.loading=!1})),t.histories="add"==e?t.histories.concat(l):l}))},changeCurrentTask:function(t){var e,n=this;this.activeTaskId=t.id,null!==(e=this.histories[this.activeTaskIndex])&&void 0!==e&&null!==(e=e.img_uris)&&void 0!==e&&e.length||t.loading||(this.histories[this.activeTaskIndex].loading=!0,Object(h.getMetaInfo)({id:t.id}).then((function(t){var e=(null==t?void 0:t.data)||{},o=e.img_uris,meta=e.meta,r=e.base_model_name,l=e.art_model_no,c=e.art_model_ver_no;n.histories=n.histories.map((function(t){return t.id===n.activeTaskId?Yt(Yt({},t),{},{img_uris:o,meta:meta,base_model_name:r,art_model_no:l,art_model_ver_no:c}):t}))})).finally((function(){n.histories[n.activeTaskIndex].loading=!1})))},changTab:function(t){if(t!==this.activeTab){"ImageToVideo"!==this.activeTab&&"Effect"!==this.activeTab||(this.tabImageOpts[this.activeTab]=JSON.parse(JSON.stringify(this.params.meta.generate_video.image_opts))),this.activeTab=t,this.$logEvent("log_actions",{operation:"TextToVideo"===t?"click_txt2vid":"click_img2vid",behavior_info:"on_ai_video_create_detail_page",position:"ai_tools"});var e=this.params.meta.prompt;if("TextToVideo"!==t||this.prompt?this.params.meta.prompt=this.prompt:this.params.meta.prompt=this.defaultPrompt,this.prompt=e,"ImageToVideo"!==t&&"Effect"!==t||(this.params.meta.generate_video.image_opts=JSON.parse(JSON.stringify(this.tabImageOpts[t]))),"Effect"!==this.activeTab&&this.getEstimatedCost(),"Effect"===t)this.updateEffectRoute(this.currentEffect);else{var n=this.localePath("/ai-tools/ai-video-generator");window.history.replaceState(null,"",n),this.$parent&&this.$parent.getTempList&&this.$parent.getTempList(n)}}},getParams:function(){var t,e=JSON.parse(JSON.stringify(this.params));(e.meta.seed=e.meta.copySeed||0,delete e.meta.copySeed,"Effect"===this.activeTab)&&(e.model_no="",e.model_ver_no="",e.parent_task_id="",e.template_id=null===(t=this.currentEffect)||void 0===t?void 0:t.id,e.meta.n_iter=1,e.meta.generate_video.image_opts=e.meta.generate_video.image_opts.filter((function(t){return t.url})).map((function(i){return{mode:"image",url:i.url}})));return e},validationParams:function(){var t=this.getIsUploadImg(),e=!this.params.meta.prompt&&"TextToVideo"===this.activeTab;return t?"photography36":e?"PromptNotEmpty":""},getEstimatedCost:function(){var t=this,e=this.getParams(),n={TextToVideo:41,ImageToVideo:32,Effect:44}[this.activeTab];this.costTimer&&(clearTimeout(this.costTimer),this.costTimer=null),this.costTimer=setTimeout((function(){Object(v.b)(Yt(Yt({},e),{},{sub_type:n})).then((function(e){var n=(null==e?void 0:e.data)||{},o=n.calculate_coins,r=void 0===o?0:o,l=n.discount_off_rate,c=n.calculate_coins_before_discount;"Effect"===t.activeTab?(t.expend.cost=r,t.expend.beforeCost=parseInt(r/.2,10),t.sale=80):(t.expend.cost=r,t.expend.beforeCost=c,t.sale=l)})).catch((function(e){t.expend.cost=0,t.expend.beforeCost=0,t.sale=0,console.error("Estimated cost failed:",e)}))}),1e3)},getIsUploadImg:function(){var t,e,n,o=(this.params||{}).meta.generate_video.image_opts,r=void 0===o?[]:o;return"TextToVideo"!==this.activeTab&&(this.showVideoUploadEndImg?!(null!=r&&null!==(t=r[0])&&void 0!==t&&t.url||null!=r&&null!==(e=r[1])&&void 0!==e&&e.url):!(null!=r&&null!==(n=r[0])&&void 0!==n&&n.url))},checkVideoEffectImageParams:function(t){var e,n,o;return"Effect"===this.activeTab&&("Effect"===this.activeTab&&this.effectImgLen>=2?!(null!=t&&null!==(n=t.image_opts)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.url&&null!=t&&null!==(o=t.image_opts)&&void 0!==o&&null!==(o=o[1])&&void 0!==o&&o.url):!(null!=t&&null!==(e=t.image_opts)&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&e.url))},handleGenerate:function(){var t=this;if(!this.isLoggedIn)return this.$EventBus.$emit("openLoginDialog"),!0;var e=function(){var e=t.params.meta.generate_video.image_opts.findIndex((function(i){return"last_frame"===i.mode}));if(-1!==e&&t.params.meta.generate_video.image_opts[e].url){var n=JSON.parse(JSON.stringify(t.params));n.meta.generate_video.image_opts[e].url="",n.meta.generate_video.image_opts[e].width=0,n.meta.generate_video.image_opts[e].height=0,t.params=n}};if(["SeaArt Ultra"].includes(this.selectBaseModel)&&1===this.params.meta.generate.gen_mode||["SeaArt Lite"].includes(this.selectBaseModel))if("ImageToVideo"===this.activeTab){var n=this.params.meta.generate_video.image_opts.find((function(i){return"first_frame"===i.mode})),o=this.params.meta.generate_video.image_opts.find((function(i){return"last_frame"===i.mode}));if(console.log(this.activeTab,"activeTab"),null!=o&&o.url&&(null==n||!n.url))return void this.$message.warning(this.$t("kl10_model_not_support_only_last_frame"))}else e();if(["SeaArt Depth"].includes(this.selectBaseModel)&&0===this.params.meta.generate.gen_mode&&e(),this.checkVideoEffectImageParams(this.params.meta.generate_video))this.$message.warning(this.$t("pleaseSelectImage"));else{var r=this.validationParams();if(r)this.$message.warning(this.$t(r,{number:1}));else{var l=window.location.href.split("?")[0];window.history.replaceState(null,"",l);var c=this.getParams();this.generateLoading||(c.ss=y.e.GenerateCreate,this.generateLoading=!0,this.generateVideo(c))}}},generateVideo:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var r,l,c,d,h,f,m,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.isImgToVideo||"Effect"===e.activeTab?v.c:v.a,l=t.meta||{},c=l.n_iter,d=void 0===c?1:c,h=l.generate_video.generate_video_length_mode,f=(void 0===h?5:h)>5?10:3,n.prev=3,n.next=6,Promise.all(Array.from({length:d}).map((function(e,n){return r(t)})));case 6:_=(_=n.sent).map((function(t){return Yt(Yt({waitTime:f},null==t?void 0:t.data),{},{loading:!1,process:0,status:1,status_desc:"waiting"})})),null!==(m=_[0])&&void 0!==m&&m.id&&(e.histories=[].concat(Object(o.a)(_),Object(o.a)(e.histories)),e.changeCurrentTask(e.histories[0]),e.$message.success(e.$t("CreateSuccess"))),e.generateLoading=!1,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),e.generateLoading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},addTask:function(t){this.histories.unshift(Yt(Yt({waitTime:3},null==t?void 0:t.data),{},{process:0,status:1,loading:!1,status_desc:"waiting"})),this.activeTaskId=this.histories[0].id},handleRegenerate:function(){var t,e=this,n={action:4,task_id:null===(t=this.currentTask)||void 0===t?void 0:t.id};Object(h.operateTask)(n).then((function(t){var n;if(1e4==(null==t||null===(n=t.status)||void 0===n?void 0:n.code)){var o=(t.data||{}).new_task,r=void 0===o?{}:o,l=e.histories.findIndex((function(t){return t.id===(null==r?void 0:r.id)})),c=e.histories[l];Object.assign(c,r),-1!==l?e.$set(e.histories,l,c):e.histories.unshift(c),e.activeTaskId=e.histories[0].id}}))},moreActions:function(t){var e;switch(t){case"upscale":this.handleUpscale();break;case"post":this.handlePost();break;case"retry":this.handleRetry();break;case"download":var n=null===(e=this.currentTask)||void 0===e||null===(e=e.components)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url;Object(w.N)({url:n});break;case"delete":this.deleteTask();break;case"share":this.handleShare();break;case"prolong":this.handleProlong();break;case"videoExtendFrame":this.handleVideoExtendFrame()}var o="prolong"===t?this.currentTask.base_model_name:"";this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"on_ai_video_create_detail_page",behavior_info_sub:o})},handleProlong:function(){this.$refs.prolongVideoPop.open(this.currentTask)},handleVideoExtendFrame:function(){this.$refs.videoFrameInterpolation.show(this.currentTask)},deleteTask:function(){var t=this,e=this.$createElement,n=e("div",{style:"display: flex;"},[e("div",{class:"flex-center",style:"width: 33px; height: 33px; background: rgba(220,38,38,0.2); border-radius: 50%;"},[e("i",{class:"iconfont icon-warn",style:"font-size: 18px; color: #DC2626;"}),""]),e("div",{style:"flex: 1; margin-left: 16px;"},[e("div",{style:"color: #fff; font-size: 16px; font-weight: 600"},this.$t("deleteVideo")),e("div",{style:"margin: 16px 0 35px; color: rgba(255,255,255,0.5); font-size: 14px;"},this.$t("audioDelSoundQuery"))])]);this.$confirm(n,this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){t.handleDeleteTask()}))},handleProlongParams:function(t){var e=JSON.parse(JSON.stringify(this.params));return this.mergeDeep(e.meta,t.meta),e},handleUpscale:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,f,m,_,y,w,meta,C,O,x,k,I,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=(null===(n=t.currentTask)||void 0===n||null===(n=n.components)||void 0===n?void 0:n[0])||{},e.next=3,Object(h.getMetaInfo)({id:null===(o=t.currentTask)||void 0===o?void 0:o.id});case 3:m=e.sent,_=m.data,w=(y=void 0===_?{}:_).meta,meta=void 0===w?{}:w,C=y.local_prompt,O=y.img_uris,x=void 0===O?[]:O,k=Yt(Yt({},JSON.parse(JSON.stringify(t.params))),{},{parent_task_id:null===(r=t.currentTask)||void 0===r?void 0:r.id}),t.mergeDeep(k.meta,meta),I=null===(l=t.currentTask)||void 0===l||null===(l=l.img_uris)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.url,j=(null==meta||null===(c=meta.generate_video)||void 0===c?void 0:c.generate_video_duration)||(null===(d=x[0])||void 0===d?void 0:d.duration)||0,Object.assign(k.meta,{width:(null==f?void 0:f.width)||(null==meta?void 0:meta.width),height:(null==f?void 0:f.height)||(null==meta?void 0:meta.height),prompt:C||(null==meta?void 0:meta.prompt),generate_video:Yt(Yt({},k.meta.generate_video),{},{video_url:I,generate_video_duration:j})}),Object(v.i)(k).then((function(e){var n=Yt(Yt({waitTime:3},(null==e?void 0:e.data)||{}),{},{process:0,status:1,status_desc:"waiting"});t.histories.unshift(n),t.changeCurrentTask(n),t.$message.success(t.$t("CreateSuccess"))})).catch((function(t){console.error("Upscale failed:",t)}));case 17:case"end":return e.stop()}}),e)})))()},handlePost:function(){var t,e,n,o={taskId:null===(t=this.currentTask)||void 0===t?void 0:t.id,index:0,url:null===(e=this.currentTask)||void 0===e||null===(e=e.components)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url},r={types:[zt.CONTRIBUTION_TYPE_ENUM.WORK],source:{33:"img_to_video",36:"text_to_video",37:"extend_video"}[null===(n=this.currentTask)||void 0===n?void 0:n.type],selectedData:[o]};this.$EventBus.$emit("openContribution",r)},handleSelectEffect:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentEffect=t,this.effectImgLen=(null==t||null===(e=t.templateInfo)||void 0===e||null===(e=e.inputs)||void 0===e?void 0:e.filter((function(i){return"image"===i.field})).length)||0,this.updateEffectRoute(t),n||(this.tabImageOpts.Effect=[{mode:"first_frame",url:"",width:0,height:0},{mode:"last_frame",url:"",width:0,height:0}],"Effect"===this.activeTab&&(this.params.meta.generate_video.image_opts=JSON.parse(JSON.stringify(this.tabImageOpts.Effect)))),this.getEstimatedCost()},mergeDeep:function(t,source){for(var e in source)e in t&&(source[e]instanceof Object?this.mergeDeep(t[e],source[e]):!source[e]&&t[e]instanceof Object||(t[e]=source[e]))},handleRetry:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,data,l,c,d,v,f,meta,m,_,y,w,C,O,x,k,I,j,S,$,P,T,D,L,A,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.getMetaInfo)({id:null===(n=t.currentTask)||void 0===n?void 0:n.id});case 2:if(o=e.sent,data=o.data,c=(l=data||{}).art_model_no,d=l.art_model_ver_no,f=(v=data||{}).meta,meta=void 0===f?{}:f,m=v.type,_=v.retry_target_type,y=v.sub_type,w=v.local_prompt,c||d||(O=null===(C=t.modelList)||void 0===C||null===(C=C.ImageToVideo)||void 0===C?void 0:C.filter((function(i){return"SeaArt Turbo"===i.name}))[0],c=(null==O?void 0:O.id)||"",d=(null==O?void 0:O.model_ver_no)||""),37!==m||!meta.generate_video.init_extend_video_url){e.next=12;break}return(x=JSON.parse(JSON.stringify(t.currentTask))).components[0].url=meta.generate_video.init_extend_video_url,t.$refs.prolongVideoPop.open(x,!0),e.abrupt("return");case 12:(k=JSON.parse(JSON.stringify(t.params))).isImageToVideoInitData=!0,t.mergeDeep(k.meta,meta);try{null!==(I=meta.generate_video)&&void 0!==I&&null!==(I=I.image_opts)&&void 0!==I&&I.length&&(j=Object(r.a)(meta.generate_video.image_opts,2),S=j[0],$=j[1],k.meta.generate_video.image_opts=[{mode:"first_frame",url:null==S?void 0:S.url,width:null==S?void 0:S.width,height:null==S?void 0:S.height},{mode:"last_frame",url:null==$?void 0:$.url,width:null==$?void 0:$.width,height:null==$?void 0:$.height}])}catch(t){console.error("=======> 处理图片数据失败",t)}if(T=(P=meta||{}).width,D=P.height,k.meta.aspect_ratio=k.meta.aspect_ratio||t.getRatio(T,D),k.meta.generate_video.quality_mode="360p",L="",44===y?L="Effect":(A={33:"ImageToVideo",36:"TextToVideo"},L=37===m?A[_]:A[m]),42===m&&(L=meta.generate_video.image_opts.length?"ImageToVideo":"TextToVideo"),"ImageToVideo"!==L&&"Effect"!==L||(t.tabImageOpts[L]=JSON.parse(JSON.stringify(meta.generate_video.image_opts||[]))),k.meta.prompt=w||meta.prompt,Object.assign(t.params,Yt(Yt({},k),{},{model_no:c,model_ver_no:d,prompt:w||meta.prompt})),t.activeTab=L,44!==y){e.next=30;break}return t.handleSelectEffect(data.creativity,!0),null===(E=t.$refs)||void 0===E||null===(E=E.videoEffects)||void 0===E||E.updateEffectsList(data.creativity),e.abrupt("return");case 30:t.getEstimatedCost();case 31:case"end":return e.stop()}}),e)})))()},getRatio:function(t,e){return t===e?"1:1":t>e?"16:9":"9:16"},handleDeleteTask:function(){var t,e=this;Object(h.deleteTaskRecord)({ids:[null===(t=this.currentTask)||void 0===t?void 0:t.id]}).then((function(){e.histories=e.histories.filter((function(t){var n;return t.id!==(null===(n=e.currentTask)||void 0===n?void 0:n.id)})),e.activeTaskId=e.histories[0].id,e.$message.success(e.$t("deleteSuccess"))})).catch((function(t){console.error("Delete failed:",t)}))},handleShare:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,_,C,O,x,k,I,j,data,S,$,meta,P,T,D,L,image,A,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.f)({template_id:null===(n=t.currentTask)||void 0===n?void 0:n.id,source:36===(null===(o=t.currentTask)||void 0===o?void 0:o.type)?"text_to_video":"img_to_video"});case 3:if(d=e.sent,!(_=(null==d||null===(r=d.data)||void 0===r?void 0:r.id)||"")){e.next=11;break}return C=t.localePath("/artWorkDetail/".concat(_,"?source=share_link")),O=location.origin+C,Object(w.g)(O),t.$message.success(t.$t("CopiedURLToClipboard")),e.abrupt("return");case 11:return e.next=13,Object(f.d)({show_area:"ai_video"});case 13:return x=e.sent,(k=(null==x?void 0:x.data)||[]).length&&k.forEach((function(e){return e.title=e[y.r[t.$i18n.locale]],e.label=e.title||e.id,e.searchLabel=(y.s||[]).map((function(t){return e[t]?e[t]:""})).filter((function(t){return!!t})),e})),I=k.filter((function(t){return"ai video"==t.id}))||[],e.next=19,Object(h.getMetaInfo)({id:null===(l=t.currentTask)||void 0===l?void 0:l.id});case 19:j=e.sent,data=j.data,$=(S=data||{}).meta,meta=void 0===$?{}:$,P=S.img_uris,D=(T=meta||{}).width,L=T.height,image=T.image,A=null===(c=t.currentTask)||void 0===c||null===(c=c.components)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.url,(video=document.createElement("video")).src=A,video.addEventListener("loadedmetadata",(function(){var e,n,o,r,l=Math.floor(video.duration),c=(null==P||null===(e=P[0])||void 0===e?void 0:e.cover_url)||(null==P||null===(n=P[1])||void 0===n?void 0:n.url)||image;video=null;var d={look_book_tpl_info:{id:null===(o=t.currentTask)||void 0===o?void 0:o.id,url:""},tags:I,intro:"",video_url:A,cover_url:c,duration:l,title:"",cover_width:D,cover_height:L,source:36===(null===(r=t.currentTask)||void 0===r?void 0:r.type)?"text_to_video":"img_to_video",link:[]};Object(m.videoPost)(d).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.id)||"",r=t.localePath("/artWorkDetail/".concat(o,"?source=share_link")),l=location.origin+r;Object(w.g)(l),t.$message.success(t.$t("CopiedURLToClipboard"))}))})),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.error("error",e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})))()}}},Jt=Qt,Xt=(n(5045),Object(S.a)(Jt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-generation",style:t.getStyle},[e("div",{staticClass:"video-generation-params-area"},[e("div",{staticClass:"video-generation-tabs"},t._l(t.tabs,(function(n){return e("div",{key:n,staticClass:"item-tab",class:{active:t.activeTab===n},attrs:{id:n},on:{click:function(e){return t.changTab(n)}}},[e("el-tooltip",{attrs:{content:t.$t(n),placement:"top",disabled:!1}},[e("span",{staticClass:"tab-name"},[t._v(t._s(t.$t(n)))])])],1)})),0),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"video-generation-params"},["Effect"!==t.activeTab?[e("video-model",{attrs:{activeTab:t.activeTab,modelList:t.modelList},on:{changeModel:t.changeModel},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}),t._v(" "),"ImageToVideo"===t.activeTab?e("video-upload",{ref:"videoUpload",attrs:{isEndImg:t.showVideoUploadEndImg,baseModel:t.selectBaseModel,smartPromptLoading:t.smartPromptLoading},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e(),t._v(" "),"ImageToVideo"===t.activeTab?e("div",{staticClass:"video-template-card-container"},[e("video-template-card",{on:{selectTemplate:t.selectTemplate}})],1):t._e(),t._v(" "),e("video-prompt",{attrs:{activeTab:t.activeTab,baseModel:t.selectBaseModel},on:{promptChange:t.handlePromptChange},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}),t._v(" "),t.showVideoParams?e("video-params",{attrs:{videoModelParams:t.videoModelParams,activeTab:t.activeTab,baseModel:t.selectBaseModel},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e(),t._v(" "),t.isSeaArtMagic?e("video-style",{attrs:{activeTab:t.activeTab,videoModelParams:t.videoModelParams,baseModel:t.selectBaseModel},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e(),t._v(" "),t.isShowAdvanced?e("video-advanced",{attrs:{activeTab:t.activeTab,cameraControlModeList:t.cameraControlModeList,baseModel:t.selectBaseModel},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e()]:t._e(),t._v(" "),e("video-effects",{directives:[{name:"show",rawName:"v-show",value:"Effect"===t.activeTab,expression:"activeTab === 'Effect'"}],ref:"videoEffects",attrs:{effectImgLen:t.effectImgLen,currentEffect:t.currentEffect},on:{selectEffect:function(e){return t.handleSelectEffect(e,!0)}},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}})],2),t._v(" "),e("div",{staticClass:"generate-footer"},[t.isLoggedIn?e("el-button",{staticClass:"generate-btn",class:{"no-sale":!t.sale},attrs:{loading:t.generateLoading,"data-sale":"".concat(t.sale,"% Off")},on:{click:t.handleGenerate}},[e("span",{staticClass:"txt"},[t._v(t._s(t.$t("Generate")))]),t._v(" "),t.expend.cost>0?[e("span",{staticClass:"cost"},[e("Icon",{attrs:{name:"trail-fast-queue",size:"24"}}),t._v(" "),t.expend.beforeCost?e("s",[t._v(t._s(t.expend.beforeCost))]):t._e(),t._v("\n            "+t._s(t.expend.cost)+"\n          ")],1)]:[e("el-tooltip",{attrs:{effect:"dark",content:t.$t("workFlow31"),placement:"top"},model:{value:t.isShowSale,callback:function(e){t.isShowSale=e},expression:"isShowSale"}},[e("i",{staticClass:"iconfont icon-a-icon-ContactUs",on:{click:function(e){e.stopPropagation(),t.isShowSale=!t.isShowSale}}})])]],2):[e("div",{staticClass:"generate-btn no-sale",on:{click:t.handleGenerate}},[t._v("\n          "+t._s(t.$t("Generate"))+"\n        ")])]],2)]),t._v(" "),t.histories.length?e("div",{staticClass:"video-generation-content-area"},[e("video-display",{attrs:{activeTab:t.activeTab,currentTask:t.currentTask},on:{moreActions:t.moreActions,regenerate:t.handleRegenerate}}),t._v(" "),e("video-history",{attrs:{currentTaskId:t.activeTaskId,list:t.histories},on:{changeCurrentTask:t.changeCurrentTask,updateHistory:t.getVideoHistoriesData}})],1):e("div",{staticClass:"video-generation-empty-area flex-center"},[e("empty-area",{attrs:{activeTab:t.activeTab}})],1),t._v(" "),e("prolong-video-pop",{ref:"prolongVideoPop",attrs:{getParams:t.handleProlongParams},on:{change:t.addTask}}),t._v(" "),e("video-frame-interpolation",{ref:"videoFrameInterpolation",attrs:{scene:"fastTools"},on:{updateList:t.addTask}})],1)}),[],!1,null,"1b3fb86b",null));e.default=Xt.exports},5732:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(16),n(22),n(18),n(4),n(28),n(21),n(44),n(1)),c=n(51),d=(n(19),n(32),n(10));function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"WorkAreaDialog",components:{UserPopover:n(360).a},data:function(){return{formatNumberForeign:d.p,coins:[{name:"credit",icon:n(169),type:"calculateCoins",desc:"new_credit_desc"},{name:"stamina",icon:n(397),type:"tempCoins",desc:"new_stamina_desc"}]}},computed:h(h(h({},Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["isLoggedIn","isCompanyAccount"])),{},{getCoinTitle:function(){var t=this;return function(e){return t.$t(e.type)+"："+t.$t("balance")+" "+(t.paymentInfo[e.type]||0)+", "+t.$t(e.desc)}}}),methods:{closeDialog:function(){this.$emit("closeDialog")},toMall:function(){this.$logEvent("log_actions",{operation:"subscription_page_show",behavior_info:location.href}),this.$router.push(this.localePath("/mall"))},toFeedback:function(){window.open("https://aihelp.net/questionnaire/#/?formId=8cafbb34d13a4225a9867115f4a12161","_blank")}}},m=(n(5097),n(0)),_=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-top"},[e("div",{staticClass:"dialog-top-left flex-center",on:{click:t.closeDialog}},[e("i",{staticClass:"iconfont icon-back"})]),t._v(" "),e("div",{staticClass:"dialog-top-right"},[e("div",{staticClass:"feed-back flex-center",on:{click:t.toFeedback}},[e("i",{staticClass:"iconfont icon-icon_wenjuan"}),t._v(" "),e("span",[t._v(t._s(t.$t("Feedback")))])]),t._v(" "),e("div",{staticClass:"coins-container"},t._l(t.coins,(function(n){return e("div",{key:n.name,staticClass:"item-coin flex-center",class:n.name,attrs:{title:t.getCoinTitle(n)},on:{click:function(e){return t.toMall(n)}}},[e("img",{staticClass:"icon",attrs:{src:n.icon,alt:n.name}}),t._v(" "),e("div",{staticClass:"number"},[t._v("\n          "+t._s(t.formatNumberForeign(t.paymentInfo[n.type])||0)+"\n        ")])])})),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCompanyAccount,expression:"!isCompanyAccount"}],staticClass:"user-balance",on:{click:t.toMall}},[e("img",{staticClass:"vip-icon",attrs:{alt:"vip icon",src:n(375)}})]),t._v(" "),t.isLoggedIn?e("UserPopover",{attrs:{signOutTo:""}}):t._e()],1)])}),[],!1,null,"288214c8",null).exports;function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"WorkAreaContentTabs",props:{currentTab:{type:String,default:"modelImage"}},data:function(){return{}},computed:w(w({},Object(l.e)("user",["cdnHost"])),{},{tabs:function(){return[{key:"productImage",label:"ProductImage",icon:"icon-icon_shangpin"},{key:"modelFitting",label:"ModelFitting",icon:"icon-icon_moteshiyi",children:[{key:"modelImage",label:"ModelImage",img:"https://".concat(this.cdnHost,"/static/upload/20240422/7fff939c-6aa5-42cf-baa8-a2164b1f9378.jpg"),hoverBeforeImg:"https://".concat(this.cdnHost,"/static/upload/20240422/0f425269-c43a-4453-84b9-6cf1f74de0fa.jpg"),hoverAfterImg:"https://".concat(this.cdnHost,"/static/upload/20240422/7fff939c-6aa5-42cf-baa8-a2164b1f9378.jpg")}]},{key:"creationRecord",label:"CreationRecord",icon:"icon-qulishirenwu"}]},isActive:function(){var t=this;return function(e){var n=e.key;return e.children?e.children.some((function(i){return i.key===t.currentTab})):n===t.currentTab}},getArrowSrc:function(){return"https://".concat(this.cdnHost,"/static/upload/20240422/d87140ec-71a3-4020-a2bc-6f7dc6c61f22.webp")}}),methods:{tabClick:function(t){var e=t.key,n=t.children;"productImage"!=e?n?this.$emit("changeCurrentTab",n[0].key):this.$emit("changeCurrentTab",e):this.$message.warning(this.$t("gpt_waiting"))},childrenClick:function(i){this.$emit("changeCurrentTab",i.key)}}},O=(n(5098),Object(m.a)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-content-tabs"},[e("div",{staticClass:"content-tab"},t._l(t.tabs,(function(n){return e("div",{key:n.key,staticClass:"item-tab",class:{active:t.isActive(n)},on:{click:function(e){return t.tabClick(n)}}},[n.children?e("div",{staticClass:"item-children-box"},[e("div",{staticClass:"item-tab-box"},[e("i",{staticClass:"iconfont item-tab-box-icon",class:[n.icon]}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n            "+t._s(t.$t(n.label))+"\n          ")])]),t._v(" "),t._l(n.children,(function(i){return e("div",{key:i.key,staticClass:"item-children",on:{click:function(e){return e.stopPropagation(),t.childrenClick(i)}}},[e("el-popover",{attrs:{placement:"right","popper-class":"model-fitting-hover-popover","append-to-body":!1,"visible-arrow":!1,trigger:"hover"}},[e("div",{staticClass:"content"},[e("img",{staticClass:"arrow",attrs:{src:t.getArrowSrc,alt:""}}),t._v(" "),e("img",{staticClass:"before-img image",attrs:{src:i.hoverBeforeImg,alt:""}}),t._v(" "),e("img",{staticClass:"after-img image",attrs:{src:i.hoverAfterImg,alt:""}})]),t._v(" "),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("img",{class:{active:t.currentTab===i.key},attrs:{src:i.img,alt:"image"}}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n                "+t._s(t.$t(i.label))+"\n              ")])])])],1)}))],2):e("div",{staticClass:"item-tab-box"},[e("i",{staticClass:"iconfont item-tab-box-icon",class:[n.icon]}),t._v(" "),e("div",{staticClass:"item-tab-box-label"},[t._v("\n          "+t._s(t.$t(n.label))+"\n        ")])])])})),0)])}),[],!1,null,"3e86ad8e",null).exports),x=(n(72),n(89),n(69),n(31),n(43),n(40),n(41),n(26),n(260)),k=n(29),I=n(25);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"ModelImageResAll",props:{type:{type:String,default:""},selectedModels:{type:Array,default:function(){return[]}},selectedScene:{type:String,default:""}},inject:["top"],data:function(){return{debounceHandleScroll:function(){},page:1,list:[],tags:[]}},mounted:function(){this.debounceHandleScroll=Object(I.debounce)(this.handleScroll,600),this.getFilters()},destroyed:function(){this.debounceHandleScroll=function(){}},computed:{isModel:function(){return"model"==this.type},selectedTags:function(){var t=[];return this.tags.forEach((function(e){e.vals.forEach((function(i){var n;t.push({category:e.label,id:i,label:(null===(n=e.options.find((function(t){return t.id==i})))||void 0===n?void 0:n.val)||""})}))})),t},isSelected:function(){var t=this;return function(e){return t.isModel?t.selectedModels.find((function(i){return i.id==e})):t.selectedScene===e}},isShowCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r;return this.selectedModels.length&&o&&l},getEstimatedCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r,c=this.selectedModels.length,d=[1,1.5,2.5],v=Math.max(o,l);if(v<=768){return 30*d[c-1]}if(v<=1024){return 36*d[c-1]}if(v<=1328){return 54*d[c-1]}if(v<=1536){return 78*d[c-1]}if(v<=1736){return 84*d[c-1]}return 108*d[c-1]}},watch:{type:{handler:function(t){t?this.getList():this.clearData()},immediate:!0}},methods:{handleBack:function(){this.$emit("back")},getFilters:function(){var t=this;Object(x.a)().then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.model_template_tags)||{},r=Object.keys(o).map((function(t){return{label:t,options:o[t]}}));t.tags=r.map((function(t){return S(S({},t),{},{vals:[]})}))}))},getList:function(){var t,e=this,n={page:this.page,page_size:60};this.selectedTags.length&&(this.selectedTags.forEach((function(t){var e,o=t.category,r=t.id;null!==(e=n)&&void 0!==e&&e[o]?n[o].push(r):n[o]=[r]})),null!==(t=n)&&void 0!==t&&t.skin_color&&delete(n=S(S({},n),{},{skin_colors:n.skin_color})).skin_color);(this.isModel?x.b:x.c)(n).then((function(t){var n,o=(null==t||null===(n=t.data)||void 0===n?void 0:n.items)||[];e.list=e.list.concat(o),e.page++}))},clearData:function(){this.debounceHandleScroll=function(){},this.list=[],this.page=1},handleScroll:function(){try{var t=this.$refs.scrollWrapper;try{if(0===t.scrollTop&&0===t.scrollHeight)return}catch(t){}null==t||t.scrollHeight,t.scrollTop;null==t?void 0:t.clientHeight}catch(t){}},delTag:function(t){var e=this;this.tags.forEach((function(n){var o=n.vals.filter((function(e){return e!==t.id}));e.$set(n,"vals",o||[])})),this.filterList()},tagChange:function(){this.filterList()},filterList:function(){this.page=1,this.list=[],this.getList()},handleClosePopover:function(t){var e;null===(e=this.$refs)||void 0===e||null===(e=e["popover-".concat(t)])||void 0===e||null===(e=e[0])||void 0===e||e.doClose()},handleSelect:function(t){this.isModel?this.$emit("selectModel",t):this.$emit("selectScene",t.id)},addExpression:function(t,e){this.$set(t,"currentExpression",e)},handleGenerate:function(){this.$emit("generate")}}};n(5099);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"ModelImage",components:{ModelImageResAll:Object(m.a)($,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"model-image-res-all"},[o("div",{staticClass:"model-image-res-all-back",on:{click:n.handleBack}},[o("i",{staticClass:"el-icon-arrow-left"}),n._v(" "),o("span",[n._v(n._s(n.$t(n.isModel?"SelectModel":"SelectScene")))])]),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.isModel,expression:"isModel"}],staticClass:"filter-box"},n._l(n.tags,(function(t){return o("div",{key:t.label,staticClass:"item-filter"},[o("el-select",{ref:"tagSelect",refInFor:!0,attrs:{"popper-class":"custom-select",placeholder:"",multiple:""},on:{change:n.tagChange},model:{value:t.vals,callback:function(e){n.$set(t,"vals",e)},expression:"item.vals"}},[o("template",{slot:"prefix"},[n._v(n._s(n.$t(t.label)))]),n._v(" "),n._l(t.options,(function(t){return o("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],2)],1)})),0),n._v(" "),o("div",{staticClass:"selected-tag-box"},n._l(n.selectedTags,(function(t){return o("div",{key:t.id,staticClass:"item-selected-tag"},[o("span",[n._v(n._s(t.label))]),n._v(" "),o("div",{staticClass:"del flex-center",on:{click:function(e){return n.delTag(t)}}},[o("i",{staticClass:"el-icon-close"})])])})),0),n._v(" "),o("div",{ref:"scrollWrapper",staticClass:"res-box",on:{scroll:n.debounceHandleScroll}},n._l(n.list,(function(t){return o("div",{key:null==t?void 0:t.id,staticClass:"item-res",class:{selected:n.isSelected(t.id)},on:{click:function(e){return n.handleSelect(t)}}},[n.isModel?o("div",{staticClass:"hover-content"},[o("el-popover",{ref:"popover-".concat(t.id),refInFor:!0,attrs:{placement:"right","popper-class":"model-info-popover","visible-arrow":!1,trigger:"click"}},[o("div",{staticClass:"model-info-box"},[o("i",{staticClass:"el-icon-close close-btn",on:{click:function(e){return n.handleClosePopover(t.id)}}}),n._v(" "),o("div",{staticClass:"model-info-header"},[o("div",{staticClass:"left model-img"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"model image"}})]),n._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"model-name"},[n._v(n._s(null==t?void 0:t.name))]),n._v(" "),o("div",{staticClass:"model-info"},[n._v("\n                  "+n._s("".concat(null==t?void 0:t.gender,"，").concat(null==t?void 0:t.race,"，").concat(null==t?void 0:t.skin_color))+"\n                ")])])]),n._v(" "),o("div",{staticClass:"model-info-expression"},[o("div",{staticClass:"title"},[n._v(n._s(n.$t("OPS_expression")))]),n._v(" "),o("div",{staticClass:"expressions-box"},n._l((null==t?void 0:t.expressions)||[],(function(i){var e;return o("div",{key:null==i?void 0:i.id,staticClass:"item-expression flex-center",class:{active:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)===(null==i?void 0:i.id)},on:{click:function(e){return n.addExpression(t,i)}}},[n._v("\n                  "+n._s(null==i?void 0:i.val)+"\n                ")])})),0)])]),n._v(" "),o("div",{staticClass:"hover-content-btn flex-center",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[o("i",{staticClass:"iconfont icon-edit-03"}),n._v(" "),o("span",[n._v("\n              "+n._s(null!=t&&t.currentExpression?t.currentExpression.val:n.$t("Adjust"))+"\n            ")])])])],1):n._e(),n._v(" "),o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label overflow-ellipsis",attrs:{title:null==t?void 0:t.name}},[n._v("\n        "+n._s(null==t?void 0:t.name)+"\n      ")])])})),0),n._v(" "),o("el-button",{staticClass:"generate-btn flex-center",attrs:{loading:!(null===(t=n.top)||void 0===t||!t.selectedLoading),disabled:!(null!==(e=n.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.mask)},on:{click:n.handleGenerate}},[o("span",{staticClass:"txt"},[n._v(n._s(n.$t("Generate")))]),n._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:n.isShowCost,expression:"isShowCost"}],staticClass:"cost"},[n._v(" ( "+n._s(n.$t("expend"))+": "+n._s(n.getEstimatedCost)+" ) ")])])],1)}),[],!1,null,"a83c7a6e",null).exports},inject:["top"],data:function(){return{type:"",modelList:[],selectedModels:[],sceneList:[],selectedScene:""}},mounted:function(){this.initData()},computed:{isModelSelected:function(){var t=this;return function(e){return t.selectedModels.find((function(i){return i.id==e}))}},isShowCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r;return this.selectedModels.length&&o&&l},getEstimatedCost:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.width,o=void 0===n?0:n,r=e.height,l=void 0===r?0:r,c=this.selectedModels.length,d=[1,1.5,2.5],v=Math.max(o,l);if(v<=768){return 30*d[c-1]}if(v<=1024){return 36*d[c-1]}if(v<=1328){return 54*d[c-1]}if(v<=1536){return 78*d[c-1]}if(v<=1736){return 84*d[c-1]}return 108*d[c-1]}},methods:{initData:function(){var t=this;Object(x.b)({page:1,page_size:6}).then((function(e){var n;t.modelList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[]})),Object(x.c)({page:1,page_size:6}).then((function(e){var n,o;t.sceneList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[],t.selectedScene=(null===(o=t.sceneList)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.id)||""}))},selectModel:function(t){var e=t.id;if(this.selectedModels.find((function(i){return i.id==e})))this.selectedModels=this.selectedModels.filter((function(i){return i.id!=e}));else{if(3==this.selectedModels.length)return void this.$message.warning(this.$t("SelectModelMax"));this.selectedModels.push(t)}},selectScene:function(t){this.selectedScene=t},changeVal:function(t,e){var n=this;this.selectedModels=[],t.forEach((function(t){var e=n.modelList.find((function(i){return i.id==t.model_template_id}));if(t.expression){var o,r=null==e||null===(o=e.expressions)||void 0===o?void 0:o.find((function(i){return i.id==t.expression}));r&&n.$set(e,"currentExpression",r)}n.selectedModels.push(e)})),this.selectedScene=e},handleClosePopover:function(t){var e;null===(e=this.$refs)||void 0===e||null===(e=e["popover-".concat(t)])||void 0===e||null===(e=e[0])||void 0===e||e.doClose()},addExpression:function(t,e){this.$set(t,"currentExpression",e)},getImgDimensions:function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){e({width:this.naturalWidth,height:this.naturalHeight})},img.onerror=function(){n(new Error("Failed to load image"))},img.src=t}))},handleGenerate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h,f,mask,m,_,y,w,C,O,k,I,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.selectedModels)&&void 0!==n&&n.length){e.next=3;break}return t.$message.warning(t.$t("SelectModelTip")),e.abrupt("return");case 3:if(null!==(o=t.top)&&void 0!==o&&null!==(o=o.selectedImgInfo)&&void 0!==o&&o.url){e.next=6;break}return t.$message.warning(t.$t("UploadModelTip")),e.abrupt("return");case 6:return c=(null===(r=t.top)||void 0===r?void 0:r.selectedImgInfo)||{},d=c.idx,v=c.url,h=void 0===v?"":v,f=c.mask,mask=void 0===f?"":f,m=c.cut_source_url,_=void 0===m?"":m,y=c.segment,w=void 0===y?"":y,t.top.setGeneratedLoading(d,!0),e.next=10,t.getImgDimensions(h);case 10:C=e.sent,O=C.width,k=void 0===O?0:O,I=C.height,j={width:k,height:void 0===I?0:I,source_url:h,mask:mask,cut_source_url:_,source_segment:w,scene_template_id:t.selectedScene,models:(null===(l=t.selectedModels)||void 0===l?void 0:l.map((function(t){var e;return{model_template_id:(null==t?void 0:t.id)||"",expression:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)||""}})))||[]},Object(x.e)(j).then((function(e){var n=e.data.task_id,o=void 0===n?"":n;o?t.loopGetResult(o,d):t.top.setGeneratedLoading(d,!1)})).catch((function(e){console.log("err",e),t.top.setGeneratedLoading(d,!1)}));case 17:case"end":return e.stop()}}),e)})))()},loopGetResult:function(t,e){var n=this,r=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var l,c,d,v,h,f,m,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(k.batchFetchTaskProcess)({task_ids:[t]});case 3:if(l=o.sent,null!=(c=l.data.items)&&c[0]){o.next=7;break}return o.abrupt("return");case 7:d=c[0],v=d.process,h=d.status_desc,f=d.img_uris,m=d.task_id,n.$emit("handleQuickTask",c[0]),n.top.setGeneratedLoading(e,v),o.t0=h,o.next="finish"===o.t0?13:"sysCancelDesc"===o.t0?18:"sysTimeoutDesc"===o.t0?22:26;break;case 13:return _=f.map((function(t){return T(T({},t),{},{id:m})}))||[],n.top.addGeneratedImg(_,e),clearInterval(r),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 18:return clearInterval(r),n.$message.warning(n.$t("systemCancel")),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 22:return clearInterval(r),n.$message.warning(n.$t("systemTimeoutCancel")),n.top.setGeneratedLoading(e,!1),o.abrupt("break",27);case 26:return o.abrupt("break",27);case 27:o.next=32;break;case 29:o.prev=29,o.t1=o.catch(0),console.log("error",o.t1);case 32:case"end":return o.stop()}}),o,null,[[0,29]])}))),3e3)}}},L=(n(5100),Object(m.a)(D,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"model-image"},[n.type?o("ModelImageResAll",{attrs:{type:n.type,selectedModels:n.selectedModels,selectedScene:n.selectedScene},on:{back:function(t){n.type=""},selectModel:n.selectModel,selectScene:n.selectScene,generate:n.handleGenerate}}):o("div",{staticClass:"model-image-content"},[o("div",{staticClass:"select-model"},[o("div",{staticClass:"select-model-top"},[o("div",{staticClass:"select-title"},[n._v(n._s(n.$t("SelectModel")))]),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.selectedModels.length>0,expression:"selectedModels.length > 0"}],staticClass:"selected-model overflow-ellipsis"},[n._v("\n          "+n._s(n.$t("NumModelsSelected",{num:n.selectedModels.length}))+"\n        ")]),n._v(" "),o("div",{staticClass:"all",on:{click:function(t){n.type="model"}}},[o("span",[n._v(n._s(n.$t("All")))]),n._v(" "),o("i",{staticClass:"el-icon-arrow-right"})])]),n._v(" "),o("div",{staticClass:"select-model-content"},n._l(n.modelList,(function(t){return o("div",{key:t.id,staticClass:"select-model-content-item",class:{selected:n.isModelSelected(t.id)},on:{click:function(e){return n.selectModel(t)}}},[o("div",{staticClass:"hover-content"},[o("el-popover",{ref:"popover-".concat(t.id),refInFor:!0,attrs:{placement:"right","popper-class":"model-info-popover","visible-arrow":!1,trigger:"click"}},[o("div",{staticClass:"model-info-box"},[o("i",{staticClass:"el-icon-close close-btn",on:{click:function(e){return n.handleClosePopover(t.id)}}}),n._v(" "),o("div",{staticClass:"model-info-header"},[o("div",{staticClass:"left model-img"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"model image"}})]),n._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"model-name"},[n._v(n._s(null==t?void 0:t.name))]),n._v(" "),o("div",{staticClass:"model-info"},[n._v("\n                      "+n._s("".concat(null==t?void 0:t.gender,"，").concat(null==t?void 0:t.race,"，").concat(null==t?void 0:t.skin_color))+"\n                    ")])])]),n._v(" "),o("div",{staticClass:"model-info-expression"},[o("div",{staticClass:"title"},[n._v(n._s(n.$t("OPS_expression")))]),n._v(" "),o("div",{staticClass:"expressions-box"},n._l((null==t?void 0:t.expressions)||[],(function(i){var e;return o("div",{key:null==i?void 0:i.id,staticClass:"item-expression flex-center",class:{active:(null==t||null===(e=t.currentExpression)||void 0===e?void 0:e.id)===(null==i?void 0:i.id)},on:{click:function(e){return n.addExpression(t,i)}}},[n._v("\n                      "+n._s(null==i?void 0:i.val)+"\n                    ")])})),0)])]),n._v(" "),o("div",{staticClass:"hover-content-btn flex-center",attrs:{slot:"reference"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[o("i",{staticClass:"iconfont icon-edit-03"}),n._v(" "),o("span",[n._v("\n                  "+n._s(null!=t&&t.currentExpression?t.currentExpression.val:n.$t("Adjust"))+"\n                ")])])])],1),n._v(" "),o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label overflow-ellipsis",attrs:{title:null==t?void 0:t.name}},[n._v("\n            "+n._s(null==t?void 0:t.name)+"\n          ")])])})),0)]),n._v(" "),o("div",{staticClass:"select-scene"},[o("div",{staticClass:"select-scene-top"},[o("div",{staticClass:"select-title"},[n._v(n._s(n.$t("SelectScene")))]),n._v(" "),o("div",{staticClass:"all",on:{click:function(t){n.type="scene"}}},[o("span",[n._v(n._s(n.$t("All")))]),n._v(" "),o("i",{staticClass:"el-icon-arrow-right"})])]),n._v(" "),o("div",{staticClass:"select-scene-content"},n._l(n.sceneList,(function(t){return o("div",{key:t.id,staticClass:"select-scene-content-item",class:{selected:n.selectedScene===t.id},on:{click:function(e){return n.selectScene(t.id)}}},[o("div",{staticClass:"img-box"},[o("img",{attrs:{src:null==t?void 0:t.store_url,alt:"img"}})]),n._v(" "),o("div",{staticClass:"label"},[n._v(n._s(null==t?void 0:t.name))])])})),0)]),n._v(" "),o("el-button",{staticClass:"generate-btn flex-center",attrs:{loading:!(null===(t=n.top)||void 0===t||!t.selectedLoading),disabled:!(null!==(e=n.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.mask)},on:{click:n.handleGenerate}},[o("span",{staticClass:"txt"},[n._v(n._s(n.$t("Generate")))]),n._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:n.isShowCost,expression:"isShowCost"}],staticClass:"cost"},[n._v(" ( "+n._s(n.$t("expend"))+": "+n._s(n.getEstimatedCost)+" ) ")])])],1)],1)}),[],!1,null,"959719d8",null).exports),A=(n(199),n(49),n(104)),E=n(264),M=n(121),R=n.n(M);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={name:"ModelRedrawModal",props:{mask:{type:String,default:function(){return""}}},data:function(){return{transparentCanvasBg:n(748),dialogVisible:!1,intLoading:!0,intImg:{url:"",width:0,height:0,size:50},MasterDrawing:"",intHeight:0,intWidth:0,mouseX:0,mouseY:0,isMousedown:!1,sizeList:[{name:"400%",value:400},{name:"200%",value:200},{name:"125%",value:125},{name:"100%",value:100},{name:"75%",value:75},{name:"50%",value:50},{name:"30%",value:30},{name:"20%",value:20},{name:"10%",value:10},{name:"fitToScreen",value:50},{name:"ai_erase3",value:100}],toolType:"smear",isAuto:!0,jsonActiveData:[],toolList:[{name:this.$t("addMaticSelection"),icon:"iconfont icon-zidongxuanqu",value:"quick",tip:"ModelFittingModalTip1"},{name:this.$t("cancelMaticSelection"),icon:"iconfont icon-quxiaoxuanze",value:"cancelQuick",tip:"ModelFittingModalTip2"},{name:this.$t("erasePage1"),icon:"iconfont icon-tumo",value:"smear",tip:"ModelFittingModalTip3"},{name:this.$t("fastToolsEraser"),icon:"iconfont icon-icon_zidongcachu",value:"eraser",tip:"ModelFittingModalTip4"}],brushSize:40,canvas:null,context:null,startX:0,startY:0,blankCanvas:"",currentStep:-1,historyList:[],isDrawing:!1,uploading:!1,UPLOAD:new c.a({type:2}),drewPoints:[],rectList:[],imgSegmentUrlList:[],hoverMaskUrl:"",hasHover:!0,debounceHandleMouseMove:null,imagesList:[],loading:!1,inTimes:!1,retryCount:0,jsonUrl:"",imgUrl:"",imgShow:!0,lengthOfLongSide:0,consumption:1,minScaleSize:10,maxScaleSize:400,compareMask:""}},watch:{dialogVisible:{handler:function(t){t||(this.intImg={url:"",width:0,height:0,size:100},this.toolType="smear",this.historyList=[],this.imagesList=[],this.imgSegmentUrlList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing="")}}},components:{generateRectItem:E.default},computed:U(U({},Object(l.c)("user",["isLoggedIn","accountSettingsData","cdnHostFun"])),{},{setCanvasStyle:function(){var t="";if(["smear","eraser"].includes(this.toolType)){var e=this.brushSize;e<10&&(e=10);var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'">\n    <circle cx="').concat(e/2,'" cy="').concat(e/2,'" r="').concat(e/2,'" fill="purple" fill-opacity="0.5" />\n  </svg>'),o=btoa(n),r="data:image/svg+xml;base64,".concat(o);t="url(".concat(r,") ").concat(e/2," ").concat(e/2,", auto")}return"rectangle"==this.toolType&&(t="url(https://".concat(this.cdnHostFun(),"/20240312/cb26a6cd-7ca5-4e32-a633-df7094cb570d.cur) 8 8, auto")),"noose"==this.toolType&&(t="url(https://".concat(this.cdnHostFun(),"/20240307/3b553f30-1a01-4287-85b9-b1840754b717.cur) 8 8, auto")),"drag"==this.toolType&&(t="grab"),t}}),created:function(){this.debounceHandleMouseMove=Object(A.throttle)(this.handleMouseMove,300)},mounted:function(){document.addEventListener("keydown",this.shortcutKey)},beforeDestroy:function(){document.removeEventListener("keydown",this.shortcutKey)},methods:{setImageZoomIn:function(){this.intImg.size+10>=this.maxScaleSize?this.intImg.size=this.maxScaleSize:this.intImg.size+=10},setImageZoomOut:function(){this.intImg.size-10<=this.minScaleSize?this.intImg.size=this.minScaleSize:this.intImg.size-=10},resetData:function(){this.intImg={url:"",width:0,height:0,size:100},this.toolType="smear",this.historyList=[],this.imagesList=[],this.imgSegmentUrlList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing=""},reupload:function(){this.$emit("reupload")},shortcutKey:function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&"z"===t.key.toLowerCase()?this.handleNext():(t.ctrlKey||t.metaKey)&&"z"===t.key.toLowerCase()&&this.handlePre()},dwn:function(){Object(d.M)(this.imgUrl)},changeTool:function(t){this.toolType=t.value,this.setDrawType(),["cancelQuick","quick"].includes(this.toolType)&&!this.imgSegmentUrlList.length&&this.getSegmentMaskData()},handleMouseMove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 2:(o=n.sent)>=0&&e.hasHover&&e.setHoverMask(o);case 4:case"end":return n.stop()}}),n)})))()},getCacheSegmentMaskData:function(){var t=arguments;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["",null,void 0].includes(n=t.length>0&&void 0!==t[0]?t[0]:"")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,R.a.getItem(n);case 5:return o=e.sent,e.abrupt("return",o||null);case 7:case"end":return e.stop()}}),e)})))()},setHoverMask:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!["",null,void 0,-1].includes(t)){n.next=3;break}return e.hoverMaskUrl="",n.abrupt("return");case 3:(r=new Image).src=e.imgSegmentUrlList[t],r.onload=Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("canvas")).width=e.intImg.width,n.height=e.intImg.height,(o=n.getContext("2d")).clearRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-in",o.fillStyle="#fff",o.fillRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-over",o.drawImage(r,0,0,e.intImg.width,e.intImg.height),e.hoverMaskUrl=n.toDataURL();case 11:case"end":return t.stop()}}),t)})));case 6:case"end":return n.stop()}}),n)})))()},selectRegion:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(["cancelQuick","quick"].includes(e.toolType)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 4:(o=n.sent)>=0&&e.selectSegmentMask(o);case 6:case"end":return n.stop()}}),n)})))()},cancelSelectSegmentMask:function(t){var e=document.createElement("canvas"),n=this.intImg,o=n.width,r=n.height;e.width=o,e.height=r;var l=e.getContext("2d"),c=new Image;c.src=this.imgSegmentUrlList[t],c.onload=function(){for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)l.drawImage(c,4*t[i],4*t[i+1],o,r);l.drawImage(c,0,0,o,r);for(var e=l.getImageData(0,0,o,r).data,n=this.context.getImageData(0,0,o,r),d=n.data,v=0;v<r;v++)for(var h=0;h<o;h++){var f=4*(v*o+h);e[f+3]>0&&(d[f]=0,d[f+1]=0,d[f+2]=0,d[f+3]=0)}this.context.putImageData(n,0,0)}},selectSegmentMask:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){o.globalCompositeOperation=["cancelQuick"].includes(e.toolType)?"destination-out":"source-over";for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,4*t[i],4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},selectSegmentMaskAuto:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){o.globalCompositeOperation=e.isAuto?"source-over":"destination-out";for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,4*t[i],4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},checkCoordinate:function(t,e,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.detectClickedImage(t,e,n));case 1:case"end":return o.stop()}}),o)})))()},detectClickedImage:function(t,e,n){for(var o=this.canvas.width/this.canvas.offsetWidth,i=n.length-1;i>=0;i--){var r=n[i],l=parseInt(t*o),c=parseInt(e*o);if(this.checkPixelTransparency(r,l,c))return i}},checkPixelTransparency:function(t,e,n){return 0!==t.data[4*(e+n*t.width)+3]},getSegmentMaskData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.loading||t.imgSegmentUrlList.length||t.uploading)){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.getCacheSegmentMaskData(null===(n=t.intImg)||void 0===n?void 0:n.url);case 5:if(!(o=e.sent)||!o.imgSegmentUrlList.length){e.next=12;break}return l=(r=o||{}).imgSegmentUrlList,c=void 0===l?[]:l,d=r.imagesList,v=void 0===d?[]:d,t.imgSegmentUrlList=c,t.imagesList=v,t.loading=!1,e.abrupt("return");case 12:h={action:14,meta:{smart_edit:{uri:t.intImg.url}}},Object(k.createTask)(h).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.id])})).catch((function(e){t.loading=!1}));case 14:case"end":return e.stop()}}),e)})))()},getTaskInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o={};if(o.task_ids=t,o.scene=1,!["cancelQuick","quick"].includes(this.toolType))return this.inTimes&&clearTimeout(this.inTimes),this.loading=!1,this.uploading=!1,void(this.intLoading=!1);Object(k.batchFetchTaskProcess)(o).then((function(o){var r,l,c,d,v;if(1e4==o.status.code)if(null!==(r=o.data)&&void 0!==r&&r.items[0]&&3==(null===(l=o.data)||void 0===l||null===(l=l.items[0])||void 0===l?void 0:l.status))if(clearTimeout(e.inTimes),e.jsonUrl=null===(v=o.data)||void 0===v?void 0:v.items[0].segment,1==n)e.loadJsonFile(e.jsonUrl);else{var h,f;e.imgUrl=null===(h=o.data)||void 0===h||null===(h=h.items[0])||void 0===h||null===(h=h.img_uris[0])||void 0===h?void 0:h.url;var img=new Image;img.src=null===(f=o.data)||void 0===f||null===(f=f.items[0])||void 0===f||null===(f=f.img_uris[0])||void 0===f?void 0:f.url,img.onload=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()},img.onerror=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()}}else null!==(c=o.data)&&void 0!==c&&c.items[0]&&4==(null===(d=o.data)||void 0===d||null===(d=d.items[0])||void 0===d?void 0:d.status)?(clearTimeout(e.inTimes),e.loading=!1,e.intLoading=!1,e.uploading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t,n)}),1e3))})).catch((function(t){e.loading=!1,e.uploading=!1,e.intLoading=!1}))},loadJsonFile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch(e).then((function(e){return e.ok||t.$message.error(t.$t("ServerError")),e.json()})).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initCanvas(null==data?void 0:data.result);case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(n){console.error("There has been a problem with your fetch operation:",n),t.retryCount<3?setTimeout((function(){t.loadJsonFile(e).finally((function(){t.loading=!1})),t.retryCount++}),500):t.$message.error(t.$t("ServerError"))}))},initCanvas:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var data,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return data=t.length>0&&void 0!==t[0]?t[0]:[],e.imgSegmentUrlList=data.map((function(t){return"data:image/png;base64,".concat(t.mask_png)})),n.next=4,e.loadAllMask(e.imgSegmentUrlList);case 4:if(e.imagesList=n.sent,!e.imagesList.length){n.next=10;break}return{},r={imgSegmentUrlList:e.imgSegmentUrlList,imagesList:e.imagesList},n.next=10,R.a.setItem(null===(o=e.intImg)||void 0===o?void 0:o.url,r);case 10:e.jsonActiveData=data.map((function(t){return t.active})),e.jsonActiveData.forEach((function(t,n){t&&e.selectSegmentMaskAuto(n)}));case 12:case"end":return n.stop()}}),n)})))()},handleAuto:function(){var t=this;this.isAuto=!this.isAuto,this.jsonActiveData.forEach((function(e,n){e&&t.selectSegmentMaskAuto(n)}))},loadAllMask:function(){var t=this,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.intImg||{},n=e.width,o=e.height,r=(source||[]).map((function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){return e(img)},img.onerror=function(t){return n(t)},img.src=t}))}));return Promise.all(r).then((function(e){for(var r=[],i=0;i<e.length;i++){var img=e[i],l=document.createElement("canvas");l.width=n,l.height=o;var c=l.getContext("2d");c.drawImage(img,0,0,t.intImg.width,t.intImg.height);var d=c.getImageData(0,0,t.intImg.width,t.intImg.height);d.data;c.putImageData(d,0,0);var v=l.toDataURL();t.$set(t.imgSegmentUrlList,i,v);var h=c.getImageData(0,0,t.intImg.width,t.intImg.height);r.push(h),l=null,c=null}return r}))},show:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolType="quick",["",null,void 0].includes(n)||(this.retryCount=0,this.loading=!1,this.loadJsonFile(n)),this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url="",this.imgUrl="",this.MasterDrawing="",this.imagesList=[],this.debounceHandleMouseMove=Object(A.throttle)(this.handleMouseMove,300),this.intLoading=!0,this.$nextTick((function(){e.intImg.url=t,e.MasterDrawing=t,e.dialogVisible=!0,e.imgLoad()}))},intSize:function(){var t=window.innerHeight-240,e=this.intImg.height;this.intImg.width>2*this.intImg.height&&(t=window.innerWidth-100,e=window.innerWidth),this.intImg.size=parseInt(t/e*100)},changeSize:function(t){var e=this;if("fitToScreen"==t.name){var n=this.$refs.draggable;return n.style.left=null,n.style.top=null,void this.$nextTick((function(){e.intSize()}))}this.intImg.size=t.value},setConsumption:function(){this.consumption=1,this.lengthOfLongSide>=1024&&this.lengthOfLongSide<=2048?this.consumption=1.5:this.lengthOfLongSide>=2048&&this.lengthOfLongSide<=4096&&(this.consumption=4)},setDrawType:function(){this.context&&(this.context.globalCompositeOperation="eraser"===this.toolType?"destination-out":"source-over")},imgLoad:function(){this.intLoading=!0;var img=new Image;img.crossOrigin="anonymous",this.imgRef=img,img.src=this.intImg.url;var t=this;img.onload=function(){t.lengthOfLongSide=Math.max(this.width,this.height),t.setConsumption(),t.intImg.width=this.width,t.intImg.height=this.height,t.intSize(),t.intLoading=!1,t.$nextTick(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.canvas=t.$refs.canvas,t.context=t.canvas.getContext("2d"),t.context.fillStyle="rgba(255, 255, 255, 1)",t.context.lineJoin="round",t.context.lineCap="round",t.rectCanvas=t.$refs.rectCanvas,t.rectText=t.rectCanvas.getContext("2d"),t.rectText.strokeStyle="rgba(0,0,0,1)",t.rectText.fillStyle="rgba(255, 255, 255, 1)",t.rectText.lineJoin="round",t.rectText.lineCap="round",t.blankCanvas=t.canvas.toDataURL(),!t.mask){e.next=15;break}return e.next=15,t.displayMaskToCanvas(t.mask);case 15:t.saveToHistory();case 16:case"end":return e.stop()}}),e)}))))},img.onerror=function(){t.$message.error(t.$t("ai_erase4")),t.intLoading=!1}},displayMaskToCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return new Promise((function(n,o){var img=new Image;img.onload=function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.context.drawImage(img,0,0,e.canvas.width,e.canvas.height),n()},img.onerror=function(t){console.log(t,"局部重绘图片回填失败"),n()},img.src=t}))},downElement:function(t){if("drag"==this.toolType){this.isMousedown=!0;var e=this.$refs.draggable;this.mouseX=t.clientX-e.offsetLeft,this.mouseY=t.clientY-e.offsetTop}},moveElement:function(t){if(this.isMousedown&&"drag"==this.toolType){var e=this.$refs.draggable;e.style.left=t.clientX-this.mouseX+"px",e.style.top=t.clientY-this.mouseY+"px"}},seupElement:function(){"drag"==this.toolType&&(this.isMousedown=!1)},startDrawing:function(t){if(["smear","eraser","noose"].includes(this.toolType))if(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY,["smear","eraser"].includes(this.toolType))this.context.strokeStyle="#fff",this.context.lineWidth=this.brushSize<10?10:this.brushSize,this.context.setLineDash([]);else if("noose"==this.toolType){var e=this.$refs.draggable;this.context.strokeStyle="rgba(0,0,0,1)";var n=e.getBoundingClientRect();this.drewPoints.push([{x:t.clientX-n.left,y:t.clientY-n.top}]),this.context.setLineDash([10,5]),this.context.lineWidth=2}},draw:function(t){if(this.isDrawing){var e,n,o=this.canvas.width/this.canvas.offsetWidth;if(this.context.scale(o,o),["smear","eraser"].includes(this.toolType)){var r=t.offsetX,l=t.offsetY;this.context.beginPath(),this.context.moveTo(this.startX,this.startY),this.context.lineTo(r,l),this.context.stroke(),this.startX=r,this.startY=l}else if("noose"==this.toolType){var c,d,v=this.$refs.draggable.getBoundingClientRect();c=t.clientX,d=t.clientY;var h=this.drewPoints[this.drewPoints.length-1];h.push({x:c-v.left,y:d-v.top});var f=h[0],m=h[1],_=h.length;this.context.beginPath(),this.context.moveTo(f.x,f.y);for(var i=1;i<_;i++){var y=(n=m,{x:(e=f).x+(n.x-e.x)/2,y:e.y+(n.y-e.y)/2});this.context.quadraticCurveTo(f.x,f.y,y.x,y.y),f=h[i],m=h[i+1]}this.context.lineTo(f.x,f.y),this.context.stroke()}this.context.scale(1/o,1/o)}},stopDrawing:function(){["smear","noose","eraser"].includes(this.toolType)&&this.isDrawing&&(this.isDrawing=!1,"noose"==this.toolType&&(this.context.closePath(),this.context.stroke(),this.context.fill()),this.saveToHistory())},startRectDrawing:function(t){"rectangle"==this.toolType&&(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY)},rectDraw:function(t){var e=this;if(this.isDrawing){var n=t.offsetX,o=t.offsetY;this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height),this.$nextTick((function(){var t=e.rectCanvas.width/e.rectCanvas.offsetWidth;e.rectText.scale(t,t),e.rectText.beginPath(),e.rectText.rect(e.startX,e.startY,n-e.startX,o-e.startY),e.rectText.fill(),e.rectText.stroke(),e.rectText.scale(1/t,1/t)})),this.rectCanvas.style.zIndex=9999}},stopRectDrawing:function(t){if("rectangle"==this.toolType&&this.isDrawing){this.isDrawing=!1,this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height);var e=t.offsetX,n=t.offsetY;this.rectList.push({left:e-this.startX>0?this.startX:e,top:n-this.startY>0?this.startY:n,width:Math.abs(e-this.startX),height:Math.abs(n-this.startY)}),this.saveToHistory(),this.rectCanvas.style.zIndex=2}},rectDelete:function(t){this.rectList.splice(t,1)},rectChange:function(t){this.rectList[t.index].top=t.top,this.rectList[t.index].left=t.left,this.rectList[t.index].width=t.width,this.rectList[t.index].height=t.height},saveToHistory:function(){var t=JSON.parse(JSON.stringify(this.rectList)),e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),img=JSON.parse(JSON.stringify(this.intImg.url));this.currentStep++,1==this.currentStep&&this.historyList.splice(1,this.historyList.length-1),this.historyList.push({currentImageData:e,rects:t,img:img}),this.currentStep=this.historyList.length-1,this.updateCompareImage()},updateCompareImage:function(){var canvas=this.$refs.compareCanvas,t=canvas.getContext("2d"),e=document.createElement("canvas");e.width=this.intImg.width,e.height=this.intImg.height;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height);for(var o=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),i=0;i<o.data.length;i+=4)255===o.data[i]&&255===o.data[i+1]&&255===o.data[i+2]||(o.data[i]=255,o.data[i+1]=255,o.data[i+2]=255);n.putImageData(o,0,0),t.clearRect(0,0,canvas.width,canvas.height),t.drawImage(this.imgRef,0,0,this.canvas.width,this.canvas.height),t.globalCompositeOperation="destination-atop",t.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.compareMask=canvas.toDataURL("image/png"),e=null},handlePre:function(){this.historyList.length>0&&this.currentStep>0&&(this.currentStep--,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleNext:function(){this.currentStep<this.historyList.length-1&&(this.currentStep++,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleReset:function(){this.historyList.length>1&&(this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolType="smear",this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url=this.MasterDrawing,this.imgUrl="",this.imgLoad())},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[t,o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},uploadMaskImage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,i,l,c,v,h,f,m,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.intImg.width){e.next=2;break}return e.abrupt("return");case 2:if(!t.uploading&&!t.loading){e.next=4;break}return e.abrupt("return");case 4:for(t.uploading=!0,t.loading=!0,(n=document.createElement("canvas")).width=t.intImg.width,n.height=t.intImg.height,(o=n.getContext("2d")).clearRect(0,0,n.width,n.height),r=t.context.getImageData(0,0,t.canvas.width,t.canvas.height),i=0;i<r.data.length;i+=4)255===r.data[i]&&255===r.data[i+1]&&255===r.data[i+2]||(r.data[i]=255,r.data[i+1]=255,r.data[i+2]=255);return o.putImageData(r,0,0),l=t.canvas.width/t.canvas.offsetWidth,t.rectList.length>0&&t.rectList.forEach((function(t){o.fillStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.rect(t.left*l,t.top*l,t.width*l,t.height*l),o.fill()})),c="",v=Object(d.d)(t.compareMask,"mask"),e.prev=18,e.next=21,t.UPLOAD.startUpload(v,{category:46});case 21:h=e.sent,c=h||"",e.next=28;break;case 25:e.prev=25,e.t0=e.catch(18),console.log("error",e.t0);case 28:if(console.log("sendMask",c),(f=n.toDataURL("image/png",.1))!==t.blankCanvas){e.next=36;break}return t.$emit("updateMask",""),t.uploading=!1,t.loading=!1,t.handleClose(),e.abrupt("return");case 36:return m="",_=Object(d.d)(f,"mask"),e.prev=38,e.next=41,t.UPLOAD.startUpload(_,{category:46});case 41:y=e.sent,m=y||"",e.next=50;break;case 45:e.prev=45,e.t1=e.catch(38),console.log("error",e.t1),t.uploading=!1,t.loading=!1;case 50:t.$emit("updateMask",m,c,f),t.uploading=!1,t.loading=!1,t.handleClose();case 54:case"end":return e.stop()}}),e,null,[[18,25],[38,45]])})))()},handleClose:function(){this.resetData(),this.dialogVisible=!1}}},B=F,V=(n(5101),n(5102),Object(m.a)(B,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"c-model-fitting-redraw-modal",fullscreen:!0,modal:!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.intLoading,expression:"intLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"bntBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:!t.historyList.length||1==t.historyList.length||0==t.currentStep},on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.currentStep==t.historyList.length-1},on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("S_ResetPrompt"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.historyList.length<2},on:{click:function(e){return t.handleReset()}}},[e("i",{staticClass:"el-icon-refresh"})])])],1)]),t._v(" "),e("div",{staticClass:"topItem",staticStyle:{visibility:"hidden"}})]),t._v(" "),e("div",{staticClass:"right",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"dragIcon",on:{click:function(e){"drag"==t.toolType?t.toolType="smear":t.toolType="drag"}}},[e("i",{staticClass:"iconfont icon-zhuashou-copy",style:{color:"drag"==t.toolType?"#4784FF":null}})]),t._v(" "),e("div",{staticClass:"sizeBox"},[e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size<=t.minScaleSize},on:{click:t.setImageZoomOut}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("el-popover",{attrs:{placement:"top",trigger:"hover","visible-arrow":!1,"popper-class":"sizeListBox"}},[e("div",{staticClass:"sizeList"},t._l(t.sizeList,(function(n,o){return e("div",{key:o,staticClass:"sizeItem",on:{click:function(e){return t.changeSize(n)}}},[t._v("\n              "+t._s(t.$t(n.name))+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"sizeNum",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.intImg.size)+"%")])]),t._v(" "),e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size>=t.maxScaleSize},on:{click:t.setImageZoomIn}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("div",{staticClass:"compare",on:{mousedown:function(e){t.imgShow=!1},mouseup:function(e){t.imgShow=!0}}},[e("i",{staticClass:"iconfont icon-icon_duibi"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase2")))])])]),t._v(" "),e("div",{staticClass:"left",class:{disabledStyle:t.intLoading}},[e("el-tooltip",{attrs:{effect:"dark",placement:"right","open-delay":0}},[e("div",{staticClass:"toolItem",class:{activateToolItem:t.isAuto},on:{click:t.handleAuto}},[e("i",{staticClass:"iconfont icon-zidongshibie"}),t._v(" "),e("span",[t._v(t._s(t.$t("AutomaticIdentification")))])]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n          "+t._s(t.$t(t.isAuto?"ModelFittingModalTip5":"ModelFittingModalTip6"))+"\n        ")])]),t._v(" "),t._l(t.toolList,(function(n,o){return e("el-tooltip",{key:o,attrs:{effect:"dark",placement:"right","open-delay":0}},[e("div",{staticClass:"toolItem",class:{activateToolItem:t.toolType==n.value},on:{click:function(e){return t.changeTool(n)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))]),t._v(" "),"smear"==n.value&&"smear"==t.toolType||"eraser"==n.value&&"eraser"==t.toolType?e("div",{staticClass:"lineSize"},[e("span",[t._v(t._s(t.$t("Size")))]),t._v(" "),e("el-slider",{attrs:{"show-input":"","show-input-controls":!1,min:10},model:{value:t.brushSize,callback:function(e){t.brushSize=e},expression:"brushSize"}})],1):t._e()]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n          "+t._s(t.$t(n.tip))+"\n        ")])])}))],2),t._v(" "),t.intLoading?t._e():e("div",{ref:"draggable",staticClass:"draggable",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px",cursor:t.setCanvasStyle,backgroundImage:t.imgShow?null:"url('".concat(t.transparentCanvasBg,"')")},attrs:{id:"draggable"},on:{mousedown:function(e){return e.preventDefault(),t.downElement.apply(null,arguments)},mousemove:function(e){return e.preventDefault(),t.moveElement.apply(null,arguments)},mouseup:function(e){return e.preventDefault(),t.seupElement.apply(null,arguments)}}},[t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"laodMsk"}):t._e(),t._v(" "),t.intImg.url?e("img",{directives:[{name:"show",rawName:"v-show",value:t.imgShow,expression:"imgShow"}],attrs:{src:t.intImg.url,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.imgShow,expression:"!imgShow"}],ref:"compareCanvas",staticClass:"compareCanvas",attrs:{width:t.intImg.width,height:t.intImg.height}}),t._v(" "),e("canvas",{ref:"canvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startDrawing.apply(null,arguments)},"&mousemove":function(e){["cancelQuick","quick"].includes(t.toolType)?t.debounceHandleMouseMove(e):t.draw(e)},"&mouseup":function(e){return t.stopDrawing.apply(null,arguments)},mouseenter:function(e){t.hasHover=!0},mouseleave:function(e){t.hasHover=!1,t.hoverMaskUrl="",t.stopDrawing()},mousedown:t.selectRegion}}),t._v(" "),t.hoverMaskUrl?e("img",{staticClass:"segment-image-draw-img-hover-mask",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px"},attrs:{src:t.hoverMaskUrl,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:"rectangle"==t.toolType,expression:"toolType == 'rectangle'"}],ref:"rectCanvas",staticClass:"rectCanvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startRectDrawing.apply(null,arguments)},"&mousemove":function(e){return t.rectDraw.apply(null,arguments)},"&mouseup":function(e){return t.stopRectDrawing.apply(null,arguments)}}}),t._v(" "),t._l(t.rectList,(function(n,o){return e("generate-rect-item",{key:"rect"+o,attrs:{item:n,index:o,size:t.intImg.size},on:{delete:t.rectDelete,change:t.rectChange}})}))],2),t._v(" "),e("el-button",{staticClass:"start",class:{disabledStyle:t.intLoading||t.loading},attrs:{disabled:t.intLoading||t.loading,loading:t.uploading},on:{click:t.uploadMaskImage}},[e("span",[t._v(t._s(t.$t("Done")))])])],1)])}),[],!1,null,"d00f952c",null)),H=V.exports;installComponents(V,{GenerateRectItem:n(264).default});n(24),n(65),n(177);var z=n(75),W=n(156),G=n(280);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Q={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},J=Object(W.a)()?"DOMMouseScroll":"mousewheel",X={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},originalImg:{type:String,default:""}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:Q.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var t=this.transform,e=t.scale,n=t.deg,o=t.offsetX,r=t.offsetY,l=t.enableTransition,style={transform:"scale(".concat(e,") rotate(").concat(n,"deg)"),transition:l?"transform .3s":"","margin-left":"".concat(o,"px"),"margin-top":"".concat(r,"px")};return this.mode===Q.CONTAIN&&(style.maxWidth=style.maxHeight="100%"),style},viewerZIndex:function(){var t=G.a.nextZIndex();return this.zIndex>t?this.zIndex:t}},watch:{index:{handler:function(t){this.reset(),this.onSwitch(t)}},currentImg:function(t){var e=this;this.$nextTick((function(t){e.$refs.img[0].complete||(e.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var t=this;this._keyDownHandler=function(e){switch(e.stopPropagation(),e.keyCode){case 27:t.hide();break;case 32:t.toggleMode();break;case 37:t.prev();break;case 38:t.handleActions("zoomIn");break;case 39:t.next();break;case 40:t.handleActions("zoomOut")}},this._mouseWheelHandler=Object(W.b)((function(e){(e.wheelDelta?e.wheelDelta:-e.detail)>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(z.e)(document,"keydown",this._keyDownHandler),Object(z.e)(document,J,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(z.d)(document,"keydown",this._keyDownHandler),Object(z.d)(document,J,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(t){this.loading=!1},handleImgError:function(t){this.loading=!1,t.target.alt="加载失败"},handleMouseDown:function(t){var e=this;if(!this.loading&&0===t.button){var n=this.transform,o=n.offsetX,r=n.offsetY,l=t.pageX,c=t.pageY;this._dragHandler=Object(W.b)((function(t){e.transform.offsetX=o+t.pageX-l,e.transform.offsetY=r+t.pageY-c})),Object(z.e)(document,"mousemove",this._dragHandler),Object(z.e)(document,"mouseup",(function(t){Object(z.d)(document,"mousemove",e._dragHandler)})),t.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var t=Object.keys(Q),e=(Object.values(Q).indexOf(this.mode)+1)%t.length;this.mode=Q[t[e]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var t=this.urlList.length;this.index=(this.index-1+t)%t}},next:function(){if(!this.isLast||this.infinite){var t=this.urlList.length;this.index=(this.index+1)%t}},handleActions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({zoomRate:.2,rotateDeg:90,enableTransition:!0},e),o=n.zoomRate,l=n.rotateDeg,c=n.enableTransition,d=this.transform;switch(t){case"zoomOut":d.scale>.2&&(d.scale=parseFloat((d.scale-o).toFixed(3)));break;case"zoomIn":d.scale=parseFloat((d.scale+o).toFixed(3));break;case"clocelise":d.deg+=l;break;case"anticlocelise":d.deg-=l}d.enableTransition=c}},handleOperate:function(t){this.$emit("operate",t,this.index),this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_detail_page"})}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},K=X,Z=(n(5103),Object(m.a)(K,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"viewer-fade"}},[e("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper c-task-image-viewer",style:{"z-index":t.viewerZIndex},attrs:{tabindex:"-1"}},[e("div",{staticClass:"el-image-viewer__mask",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleMaskClick.apply(null,arguments)}}}),t._v(" "),e("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:t.hide}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),t.isSingle?t._e():[e("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!t.infinite&&t.isFirst},on:{click:t.prev}},[e("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),e("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!t.infinite&&t.isLast},on:{click:t.next}},[e("i",{staticClass:"el-icon-arrow-right"})])],t._v(" "),e("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[e("div",{staticClass:"el-image-viewer__actions__inner"},[e("i",{staticClass:"el-icon-zoom-out",on:{click:function(e){return t.handleActions("zoomOut")}}}),t._v(" "),e("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){return t.handleActions("zoomIn")}}}),t._v(" "),e("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),e("i",{class:t.mode.icon,on:{click:t.toggleMode}}),t._v(" "),e("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),e("i",{staticClass:"el-icon-refresh-left",on:{click:function(e){return t.handleActions("anticlocelise")}}}),t._v(" "),e("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.handleActions("clocelise")}}})])]),t._v(" "),e("div",{staticClass:"el-image-viewer__canvas"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.originalImg,expression:"originalImg"}],staticClass:"original-img",style:t.imgStyle,attrs:{src:t.originalImg,alt:"Original Image"}}),t._v(" "),t._l(t.urlList,(function(n,i){return e("img",{directives:[{name:"show",rawName:"v-show",value:i===t.index,expression:"i === index"}],key:n,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img generated-img",style:t.imgStyle,attrs:{src:t.currentImg},on:{load:t.handleImgLoad,error:t.handleImgError,mousedown:t.handleMouseDown}})}))],2),t._v(" "),e("div",{staticClass:"custom-image-viewer__side"},[e("div",{staticClass:"line-1"},[e("div",{staticClass:"save btn",on:{click:function(e){return t.handleOperate("save")}}},[e("i",{staticClass:"iconfont icon-baocun"}),t._v(" "),e("span",[t._v(t._s(t.$t("Save")))])]),t._v(" "),e("div",{staticClass:"delete btn",on:{click:function(e){return t.handleOperate("delete")}}},[e("i",{staticClass:"iconfont icon-shanchu"}),t._v(" "),e("span",[t._v(t._s(t.$t("Delete")))])])]),t._v(" "),e("div",{staticClass:"line-2"},[e("div",{staticClass:"download btn",on:{click:function(e){return t.handleOperate("download")}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])])],2)])}),[],!1,null,"5df1f0a2",null)),tt=Z.exports,et=n(409),it=n(119);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return st(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?st(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function st(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}var lt={name:"WorkAreaContentDisplay",inject:["top"],props:{exampleList:{type:Array,default:function(){return[]}}},components:{ModelImage:L,ModelRedrawModal:H,ModelFittingImageViewer:tt,CircularLoading:et.default,QuickQueue:it.default},data:function(){return{transparentCanvasBg:n(748),isShowOriginal:!0,hoverBtns:[{icon:"icon-icon_xiazai",type:"download",tip:"Download"},{icon:"icon-baocun",type:"save",tip:"SavePersonalCenter"}],moreBtns:[{label:"upsacler_3_H1",type:"upscale"},{label:"ai_erase",type:"erase"},{label:"PartialRedrawing",type:"redraw"},{label:"RemoveBackground",type:"remove_bg"},{label:"Expansion",type:"expansion"}],imageViewerVisible:!1,currentIdx:0,renderWidth:450,renderHeight:600,resizeObserver:null,quickOptions:{}}},mounted:function(){var t=this;this.resizeObserver=new ResizeObserver((function(e){var n,o=ot(e);try{for(o.s();!(n=o.n()).done;){var r=n.value.contentRect,l=r.width,c=r.height;t.changeRenderWH(l,c)}}catch(t){o.e(t)}finally{o.f()}}));var e=document.querySelector("#content");e&&this.resizeObserver.observe(e)},beforeDestroy:function(){var t=document.querySelector("#content");t&&this.resizeObserver.unobserve(t)},computed:nt(nt({},Object(l.e)("user",["cdnHost"])),{},{getWHStyle:function(){return{width:"".concat(this.renderWidth,"px"),height:"".concat(this.renderHeight,"px")}},getWHStyleBg:function(){return{width:"".concat(this.renderWidth,"px"),height:"".concat(this.renderHeight,"px"),backgroundImage:this.isShowOriginal?null:"url(".concat(this.transparentCanvasBg,")")}},urlList:function(){var t;return(null===(t=this.top)||void 0===t||null===(t=t.selectedImgInfo)||void 0===t||null===(t=t.generatedImg)||void 0===t?void 0:t.map((function(t){return t.url})))||[]},generatedProcess:function(){var t,e=null===(t=this.top)||void 0===t||null===(t=t.selectedImgInfo)||void 0===t?void 0:t.isLoading;return"number"==typeof e?e:0}}),watch:{"top.selectedImgInfo":{handler:function(t){var content=this.$refs.content,e=(null==content?void 0:content.getBoundingClientRect())||{},n=e.width,o=void 0===n?450:n,r=e.height,l=void 0===r?600:r;this.changeRenderWH(o,l)},deep:!0}},methods:{changeRenderWH:function(t,e){var n=this.top.selectedImgInfo||{},o=n.width,r=n.height,l=o/r,c=o,d=r;o>t/2-22-10&&(d=(c=t/2-22-10)/l),d>e-20&&(c=(d=e-20)*l),this.renderWidth=c,this.renderHeight=d},selectExample:function(t){this.top.uploadSuccess(t,"add")},handleUpload:function(t){this.$EventBus.$emit("addModelImages",t)},handleUploadReplace:function(t){var e,n=null===(e=this.top)||void 0===e||null===(e=e.selectedImgInfo)||void 0===e?void 0:e.idx;this.$EventBus.$emit("addModelImages",t,n)},openMaskDialog:function(){var t,e=(null===(t=this.top)||void 0===t?void 0:t.selectedImgInfo)||{},n=e.url,o=void 0===n?"":n,r=e.segment,l=void 0===r?"":r;this.$refs.modelRedrawModal.show(o,l),this.handleLog("edit")},updateMask:function(t,mask,e){this.top.changeMask(t,mask,e)},handleQuickTask:function(t){this.quickOptions=t},handleOperate:function(t,e){var n=this;this.handleLog(t);var o=e.id,r=void 0===o?"":o,l=e.index,c=void 0===l?0:l,v=e.url,h=void 0===v?"":v;switch(t){case"download":case"download":Object(d.M)(h,"ai-model-fitting-".concat(c));break;case"delete":this.top.deleteImg(r,c,(function(){n.top.delGeneratedImg(r,c)}));break;case"save":this.top.saveImg(r,c,"display")}},handleClick:function(t){this.currentIdx=t,this.imageViewerVisible=!0},handleViewerOperate:function(t,e){var n,o=(null===(n=this.top.selectedImgInfo)||void 0===n||null===(n=n.generatedImg)||void 0===n?void 0:n[e])||{},r=o.id,l=void 0===r?"":r,c=o.url,v=void 0===c?"":c,h=o.index,f=void 0===h?0:h;switch(t){case"save":this.top.saveImg(l,f,"display");break;case"delete":default:break;case"download":Object(d.M)(v,"ai-model-fitting-".concat(e))}},handleLog:function(t){this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_function_page"})}}},ct=(n(5105),Object(m.a)(lt,(function(){var t,e,n,o,r,l,c,d,v=this,h=v._self._c;return h("div",{staticClass:"dialog-content-display"},[h("ModelImage",{ref:"modelImage",on:{handleQuickTask:v.handleQuickTask}}),v._v(" "),h("div",{ref:"content",staticClass:"dialog-content-display-content flex-center",attrs:{id:"content"}},[null!==(t=v.top)&&void 0!==t&&t.selectedImgInfo?h("div",{staticClass:"display-img-box"},[h("div",{staticClass:"display-img",style:v.getWHStyleBg},[h("div",{directives:[{name:"show",rawName:"v-show",value:v.top.uploading&&!(null!==(e=v.top)&&void 0!==e&&null!==(e=e.selectedImgInfo)&&void 0!==e&&e.segment),expression:"top.uploading && !top?.selectedImgInfo?.segment"}],staticClass:"mask-loading"},[h("CircularLoading",{attrs:{font:18,process:(null===(n=v.top)||void 0===n||null===(n=n.selectedImgInfo)||void 0===n?void 0:n.recognitionProcess)||0,circleWH:80}}),v._v(" "),h("div",{staticClass:"txt"},[v._v(v._s(v.$t("uploading"))+"...")])],1),v._v(" "),h("div",{directives:[{name:"show",rawName:"v-show",value:v.isShowOriginal,expression:"isShowOriginal"}],staticClass:"hover-btn"},[h("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":0}},[h("el-upload",{staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:v.top.uploading,"show-file-list":!1,"http-request":v.handleUploadReplace}},[h("div",{staticClass:"item-btn flex-center",on:{click:function(t){return v.handleLog("reupload")}}},[h("i",{staticClass:"iconfont icon-shangchuan"})])]),v._v(" "),h("div",{attrs:{slot:"content"},slot:"content"},[v._v("\n                "+v._s(v.$t("CreativeCenterPopup33"))+"\n              ")])],1),v._v(" "),h("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":0}},[h("div",{staticClass:"item-btn flex-center",on:{click:v.openMaskDialog}},[h("i",{staticClass:"iconfont icon-icon-baoliuqu"})]),v._v(" "),h("div",{attrs:{slot:"content"},slot:"content"},[v._v("\n                "+v._s(v.$t("EditReservedArea"))+"\n              ")])])],1),v._v(" "),h("div",{staticClass:"change-box flex-center",on:{mousedown:function(t){t.preventDefault(),v.isShowOriginal=!1},mouseup:function(t){t.preventDefault(),v.isShowOriginal=!0},mouseleave:function(t){v.isShowOriginal=!0}}},[h("i",{staticClass:"iconfont icon-a-duibi1"}),v._v(" "),h("span",[v._v(v._s(v.$t("preview")))])]),v._v(" "),h("img",{directives:[{name:"show",rawName:"v-show",value:v.isShowOriginal,expression:"isShowOriginal"}],staticClass:"original-img",style:v.getWHStyle,attrs:{src:v.top.selectedImgInfo.url,alt:"selected image"}}),v._v(" "),h("img",{directives:[{name:"show",rawName:"v-show",value:!v.isShowOriginal,expression:"!isShowOriginal"}],staticClass:"comparison-img",style:v.getWHStyle,attrs:{src:null===(o=v.top.selectedImgInfo)||void 0===o?void 0:o.cut_source_url,alt:"comparison image"}})]),v._v(" "),h("div",{staticClass:"display-generated"},[h("div",{directives:[{name:"show",rawName:"v-show",value:null===(r=v.top)||void 0===r?void 0:r.selectedLoading,expression:"top?.selectedLoading"}],staticClass:"item-generated-img loading",style:v.getWHStyle},[h("CircularLoading",{attrs:{font:18,process:v.generatedProcess,circleWH:80}}),v._v(" "),h("div",{staticClass:"txt"},[v._v(v._s(v.$t("photography37"))+"...")]),v._v(" "),h("QuickQueue",{attrs:{quickOptions:v.quickOptions,quickStyle:{height:"36px",fontSize:"14px"}}})],1),v._v(" "),v._l((null===(l=v.top.selectedImgInfo)||void 0===l?void 0:l.generatedImg)||[],(function(t,e){return h("div",{key:"generated-img-".concat(e),staticClass:"item-generated-img"},[h("div",{staticClass:"hover-btns"},v._l(v.hoverBtns,(function(e){return h("el-tooltip",{key:e.type,attrs:{effect:"dark",placement:"top","open-delay":0}},[t.isSavedPersonal?h("div",{staticClass:"item-btn flex-center",on:{click:function(n){return v.handleOperate(e.type,t)}}},[h("i",{staticClass:"iconfont",class:e.icon})]):v._e(),v._v(" "),h("div",{attrs:{slot:"content"},slot:"content"},[v._v("\n                  "+v._s(v.$t(e.tip))+"\n                ")])])})),1),v._v(" "),h("img",{style:v.getWHStyle,attrs:{src:t.url,alt:"generated image"},on:{click:function(t){return v.handleClick(e)}}})])}))],2)]):h("div",{staticClass:"display-uploader"},[h("el-upload",{staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:v.top.uploading,"show-file-list":!1,"http-request":v.handleUpload}},[h("el-button",{staticClass:"display-uploader-btn",attrs:{loading:v.top.uploading}},[v._v("\n            "+v._s(v.$t("ModelFittingUploadBtn"))+"\n          ")])],1),v._v(" "),h("div",{staticClass:"display-uploader-desc"},[v._v("\n          "+v._s(v.$t("ModelFittingUploadDesc"))+"\n        ")]),v._v(" "),h("div",{staticClass:"display-uploader-tip flex-center"},[h("i",{staticClass:"el-icon-bottom"}),v._v(" "),h("span",[v._v(v._s(v.$t("ModelFittingUploadTip")))])]),v._v(" "),h("div",{staticClass:"display-uploader-example"},v._l(v.exampleList,(function(t,e){return h("img",{key:"image-".concat(e),attrs:{alt:"image",src:t},on:{click:function(e){return v.selectExample(t)}}})})),0)],1)]),v._v(" "),h("ModelRedrawModal",{ref:"modelRedrawModal",attrs:{mask:(null===(c=v.top)||void 0===c||null===(c=c.selectedImgInfo)||void 0===c?void 0:c.maskBase64)||""},on:{updateMask:v.updateMask}}),v._v(" "),v.imageViewerVisible?h("ModelFittingImageViewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"2001"},attrs:{"initial-index":v.currentIdx,"on-close":function(){return v.imageViewerVisible=!1},"url-list":v.urlList,originalImg:(null===(d=v.top)||void 0===d||null===(d=d.selectedImgInfo)||void 0===d?void 0:d.url)||""},on:{operate:v.handleViewerOperate}}):v._e()],1)}),[],!1,null,"9835fa8c",null)),ut=ct.exports;installComponents(ct,{QuickQueue:n(119).default});var pt=n(57),vt=n(61);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var gt={name:"WorkAreaContentUpload",inject:["top"],components:{CircularLoading:et.default},data:function(){return{imgSize:{width:0,height:0},loopInterval:null}},mounted:function(){var t=this;this.$EventBus.$on("addModelImages",(function(e,n){"number"==typeof n?t.handleUploadReplace(e,n):t.handleUpload(e)}))},destroyed:function(){this.$EventBus.$off("addModelImages"),this.clearInterval()},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)("user",["isLoggedIn"])),methods:{clearInterval:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){clearInterval(this.loopInterval),this.loopInterval=null})),checkUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoggedIn){n.next=3;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return",!1);case 3:if(["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(t.size/1024/1024>10)){n.next=18;break}return n.prev=8,n.next=11,Object(vt.a)(t,10485760);case 11:t=n.sent,n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(8),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}}),n,null,[[8,14]])})))()},handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,e.checkUpload(o)){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.scaleImage(o,o.type);case 6:r=n.sent,e.top.imgList.push("loading"),e.top.setUploading(!0),new c.a({type:21}).startUpload(r).then((function(t){e.top.uploadSuccess(t,"replace")})).catch((function(t){console.log(e.$t("uploadError"),t),e.top.setUploading(!1),e.top.imgList.pop()}));case 11:case"end":return n.stop()}}),n)})))()},handleUploadReplace:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=t.file,n.checkUpload(r)){o.next=4;break}return o.abrupt("return");case 4:return o.next=6,n.scaleImage(r,r.type);case 6:l=o.sent,new c.a({type:21}).startUpload(l).then((function(t){n.top.uploadSuccessReplace(t,e)})).catch((function(t){console.log(n.$t("uploadError"),t)}));case 9:case"end":return o.stop()}}),o)})))()},scaleImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise((function(n,o){var r=new FileReader;r.onload=function(o){var img=new Image;img.src=o.target.result,img.onload=function(){var o=this.naturalWidth,r=this.naturalHeight,l=2048;if(this.imgSize={width:this.naturalWidth,height:this.naturalHeight},o>l||r>l){var c=Math.min(l/o,l/r),d=o*c,v=r*c,canvas=document.createElement("canvas"),h=canvas.getContext("2d");canvas.width=d,canvas.height=v,h.drawImage(img,0,0,d,v);var f=canvas.toDataURL(e),m=Object(pt.dataURItoBlob)(f),_=new File([m],t.name.replace(/\.\w+$/,".png"),{type:"image/png"});n(_)}else n(t)}},r.readAsDataURL(t)})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},changeCurrentImgInfo:function(t){this.top.changeCurrentImgInfo(t)},getRecognition:function(t,e){var n=this;this.top.setUploading(!0),Object(x.g)({source_url:t,width:this.imgSize.width,height:this.imgSize.height}).then((function(t){var o=((null==t?void 0:t.data)||{}).task_id,r=void 0===o?"":o;r?n.loopGetResult(r,e):n.top.setUploading(!1)})).catch((function(t){console.log("err",t),n.top.setUploading(!1)}))},loopGetResult:function(t,e){var n=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v,h,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(k.batchFetchTaskProcess)({task_ids:[t]});case 3:if(r=o.sent,null!=(l=r.data.items)&&l[0]){o.next=7;break}return o.abrupt("return");case 7:c=l[0],d=c.process,v=c.status_desc,h=c.img_uris,f=c.segment,n.top.setRecognitionProcess(e,d),o.t0=v,o.next="finish"===o.t0?12:"sysCancelDesc"===o.t0?16:"sysTimeoutDesc"===o.t0?20:24;break;case 12:return n.top.saveInfo(h,f,e),clearInterval(n.loopInterval),n.top.setUploading(!1),o.abrupt("break",25);case 16:return clearInterval(n.loopInterval),n.top.setUploading(!1),n.$message.warning(n.$t("systemCancel")),o.abrupt("break",25);case 20:return clearInterval(n.loopInterval),n.top.setUploading(!1),n.$message.warning(n.$t("systemTimeoutCancel")),o.abrupt("break",25);case 24:return o.abrupt("break",25);case 25:o.next=30;break;case 27:o.prev=27,o.t1=o.catch(0),console.log("error",o.t1);case 30:case"end":return o.stop()}}),o,null,[[0,27]])}))),3e3)}}},ft=gt,mt=(n(5106),Object(m.a)(ft,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-content-upload"},[e("div",{staticClass:"dialog-content-upload-images"},t._l(t.top.imgList,(function(n){var o;return e("div",{key:"img-".concat(n.idx),staticClass:"item-img flex-center",class:{active:(null===(o=t.top)||void 0===o||null===(o=o.selectedImgInfo)||void 0===o?void 0:o.idx)==n.idx},on:{click:function(e){return t.changeCurrentImgInfo(n.idx)}}},["loading"==n?e("div",{staticClass:"item-img-loading flex-center"},[e("i",{staticClass:"el-icon-loading image-loading"})]):e("div",{staticClass:"item-img-box"},[n.isLoading||"number"==typeof n.isLoading?e("div",{staticClass:"mask-loading generated"},[e("CircularLoading",{attrs:{process:"number"==typeof n.isLoading?n.isLoading:0,circleWH:38}}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("photography37"))+"...")])],1):e("div",{directives:[{name:"show",rawName:"v-show",value:t.top.uploading&&!(null!=n&&n.segment),expression:"top.uploading && !item?.segment"}],staticClass:"mask-loading"},[e("CircularLoading",{attrs:{process:(null==n?void 0:n.recognitionProcess)||0,circleWH:38}}),t._v(" "),e("div",{staticClass:"txt"},[t._v(t._s(t.$t("uploading"))+"...")])],1),t._v(" "),e("div",{staticClass:"del-item flex-center",on:{click:function(e){return t.top.imgDelItem(n.idx)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{attrs:{src:n.url,alt:"image"}})])])})),0),t._v(" "),e("div",{staticClass:"dialog-content-upload-uploader"},[e("el-upload",{directives:[{name:"show",rawName:"v-show",value:t.top.imgList.length<5,expression:"top.imgList.length < 5"}],staticClass:"uploader",attrs:{action:"/",accept:".jpg,.jpeg,.png,.webp",disabled:t.top.uploading,"show-file-list":!1,"http-request":t.handleUpload}},[e("div",{staticClass:"upload-btn flex-center",class:{loading:t.top.uploading}},[e("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),e("span",[t._v(t._s(t.$t("ContinueUpload")))])])]),t._v(" "),e("div",{staticClass:"del-all flex-center",on:{click:t.top.imgDelAll}},[e("i",{staticClass:"el-icon-delete"}),t._v(" "),e("span",[t._v(t._s(t.$t("DeleteAll")))])])],1)])}),[],!1,null,"4ebd2133",null).exports);n(77);function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt={name:"WorkAreaContentHistories",inject:["top"],components:{ModelFittingImageViewer:tt},data:function(){return{debounceHandleScroll:function(){},list:[],hoverBtns:[{icon:"icon-shanchu",type:"delete"},{icon:"icon-baocun",type:"save"}],moreBtns:[{label:"upsacler_3_H1",type:"upscale"},{label:"ai_erase",type:"erase"},{label:"PartialRedrawing",type:"redraw"},{label:"RemoveBackground",type:"remove_bg"},{label:"Expansion",type:"expansion"}],bottomBtns:[{icon:"icon-icon-edit",label:"EditAgain",type:"edit_again"},{icon:"icon-icon-Download",label:"DownloadImmediately",type:"download"}],imageViewerVisible:!1,currentImg:{}}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),v=e.getSeconds().toString().padStart(2,"0");return Object(d.F)(e,new Date)?"".concat(l,":").concat(c,":").concat(v):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(v)}},mounted:function(){this.debounceHandleScroll=Object(I.debounce)(this.handleScroll,600)},destroyed:function(){this.debounceHandleScroll=function(){}},computed:bt(bt({},Object(l.c)("user",["isCompanyAccount"])),{},{isShowExpireTime:function(){return function(t){return t&&t>0}},urlList:function(){var t;return(null===(t=this.currentImg)||void 0===t||null===(t=t.img_uris)||void 0===t?void 0:t.map((function(t){return t.url})))||[]}}),watch:{"top.isCreationRecord":{handler:function(t){t&&(this.list=[],this.initData())},immediate:!0}},methods:{initData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(x.f)({after_id:e,limit:30}).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[];t.list=t.list.concat(o)}))},handleScroll:function(){try{var t=this.$refs.scrollWrapper;try{if(0===t.scrollTop&&0===t.scrollHeight)return}catch(t){}var e=(null==t?void 0:t.scrollHeight)-t.scrollTop;if(e-=null==t?void 0:t.clientHeight,t&&e<=30){var n,o=this.list.length;this.initData((null===(n=this.list[o-1])||void 0===n?void 0:n.id)||"")}}catch(t){}},getExpireTime:function(t){var e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("ExpiresSoon")},handleOperate:function(t,e,n){var o=this;this.$logEvent("log_actions",{operation:"click_".concat(t),behavior_info:"model_fitting_history_page"});var r=e.id,l=void 0===r?"":r,c=e.img_uris,v=void 0===c?[]:c,h=n.index,f=void 0===h?0:h,m=n.url,_=void 0===m?"":m;switch(t){case"delete":this.top.deleteImg(l,f,(function(){if(v.length>1){var t=o.list.find((function(t){return t.id===l}));if(t){var e=t.img_uris.filter((function(t){return t.index!==f}));o.$set(t,"img_uris",e)}}else o.list=o.list.filter((function(t){return t.id!==l}))}));break;case"save":this.top.saveImg(l,f,"history");break;case"upscale":case"erase":case"redraw":case"remove_bg":case"expansion":default:break;case"edit_again":this.top.sendParams(e,f);break;case"download":Object(d.M)(_,"ai-model-fitting-".concat(f))}},handleClick:function(t,e){this.currentImg=bt(bt({},t),{},{idx:e}),this.imageViewerVisible=!0},handleViewerOperate:function(t,e){var n=this,o=this.currentImg,r=o.id,l=void 0===r?"":r,c=o.img_uris,v=void 0===c?[]:c,h=(null==v?void 0:v[e])||{},f=h.index,m=void 0===f?0:f,_=h.url,y=void 0===_?"":_;switch(t){case"save":this.top.saveImg(l,m,"history");break;case"delete":this.top.deleteImg(l,e,(function(){if(v.length>1){var t=n.list.find((function(t){return t.id===l}));if(t){var o=t.img_uris.filter((function(t){return t.index!==e}));n.$set(t,"img_uris",o)}}else n.list=n.list.filter((function(t){return t.id!==l}))})),this.imageViewerVisible=!1;break;case"download":Object(d.M)(y,"ai-model-fitting-".concat(e))}},getSaveBtnStatus:function(t,e){return"save"==t.type&&!e.is_saved_personal||"save"!=t.type},updateImgStatus:function(t,e){var n=this.list.find((function(e){return e.id===t}));if(n){var o=n.img_uris.find((function(t){return t.index===e}));this.$set(o,"is_saved_personal",!0)}}}},wt=yt,Ct=(n(5107),Object(m.a)(wt,(function(){var t,e,o=this,r=o._self._c;return r("div",{ref:"scrollWrapper",staticClass:"dialog-content-histories",on:{scroll:o.debounceHandleScroll}},[o._l(o.list,(function(t){var e,l,c,d,v,h;return r("div",{key:t.id,staticClass:"dialog-content-histories-item"},[r("div",{staticClass:"dialog-content-histories-item-header"},[r("img",{staticClass:"dialog-content-histories-item-header-logo",attrs:{src:n(275),alt:"logo"}}),o._v(" "),r("span",{staticClass:"dialog-content-histories-item-header-bot"},[o._v("\n          "+o._s(o.$t("SeaArtBot"))+"\n        ")]),o._v(" "),25==(null==t?void 0:t.sub_type)?r("span",{staticClass:"dialog-content-histories-item-header-tag flex-center"},[o._v("\n          "+o._s(o.$t("ModelImage"))+"\n        ")]):o._e(),o._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.create_at,expression:"item.create_at"}],staticClass:"dialog-content-histories-item-header-create-time"},[o._v("\n          "+o._s(o._f("formatDateTime")(t.create_at))+"\n        ")]),o._v(" "),r("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[r("div",{staticClass:"task-info-tips"},[r("p",[r("span",[o._v(o._s(o.$t("TaskID")))]),o._v(" "),r("span",[o._v(o._s(t.id))])]),o._v(" "),3!==t.status||o.isCompanyAccount?o._e():[[1,2,"1","2"].includes(null==t?void 0:t.pub_community)?r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v(o._s(o.$t("status")))]),o._v(" "),r("span",{staticClass:"task-pub-status"},[o._v("\n                  "+o._s([2,"2"].includes(null==t?void 0:t.pub_community)?o.$t("createSetting1"):o.$t("createSetting2"))+"\n                ")])]):o._e(),o._v(" "),r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v(o._s(o.$t("expend")))]),o._v(" "),r("span",{staticClass:"task-info-tips-content"},[r("span",[o._v("\n                    "+o._s(o.$t("tempCoins"))+" :\n                    "+o._s(null==t||null===(e=t.deduction_detail)||void 0===e?void 0:e.temp_hashrate)+"\n                  ")]),o._v(" "),r("span",[o._v("\n                    "+o._s(o.$t("calculateCoins"))+" :\n                    "+o._s(null==t||null===(l=t.deduction_detail)||void 0===l?void 0:l.hashrate)+"\n                  ")])])]),o._v(" "),null!=t&&null!==(c=t.deduction_detail)&&void 0!==c&&c.history_hashrate?r("p",[r("span",{staticClass:"task-info-tips-label"},[o._v("\n                  "+o._s(o.$t("currentBalance"))+"\n                ")]),o._v(" "),r("span",{staticClass:"task-info-tips-content"},[r("span",[o._v("\n                    "+o._s(o.$t("tempCoins"))+" :\n                    "+o._s(null==t||null===(d=t.deduction_detail)||void 0===d?void 0:d.after_temp_hashrate)+"\n                  ")]),o._v(" "),r("span",[o._v("\n                    "+o._s(o.$t("calculateCoins"))+" :\n                    "+o._s(null==t||null===(v=t.deduction_detail)||void 0===v?void 0:v.after_hashrate)+"\n                  ")])])]):o._e()]],2),o._v(" "),r("i",{staticClass:"iconfont icon-task_tips dialog-content-histories-item-header-info",attrs:{slot:"reference"},slot:"reference"})]),o._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:o.isShowExpireTime(t.expiration_time),expression:"isShowExpireTime(item.expiration_time)"}],staticClass:"dialog-content-histories-item-header-expiration-time"},[o._v("\n          "+o._s(o.getExpireTime(t.expiration_time))+"\n        ")])],1),o._v(" "),r("div",{staticClass:"dialog-content-histories-item-images"},[r("div",{staticClass:"original-image item-image"},[r("div",{staticClass:"txt"},[o._v(o._s(o.$t("OriginalPicture")))]),o._v(" "),r("img",{attrs:{src:null==t||null===(h=t.model_beautify_meta)||void 0===h?void 0:h.source_url,alt:"original image"}})]),o._v(" "),o._l((null==t?void 0:t.img_uris)||[],(function(e,i){return r("div",{key:"image-".concat(i),staticClass:"generated-images item-image"},[r("div",{staticClass:"hover-btns"},[o._l(o.hoverBtns,(function(n){return[o.getSaveBtnStatus(n,e)?r("div",{key:n.type,staticClass:"item-btn flex-center",on:{click:function(r){return o.handleOperate(n.type,t,e)}}},[r("i",{staticClass:"iconfont",class:n.icon})]):o._e()]}))],2),o._v(" "),r("img",{attrs:{src:null==e?void 0:e.url,alt:"generated image"},on:{click:function(e){return o.handleClick(t,i)}}}),o._v(" "),r("div",{staticClass:"bottom-btns"},o._l(o.bottomBtns,(function(n){return r("div",{key:n.type,staticClass:"item-btn flex-center",on:{click:function(r){return o.handleOperate(n.type,t,e)}}},[r("i",{staticClass:"iconfont",class:n.icon}),o._v(" "),r("span",[o._v(o._s(o.$t(n.label)))])])})),0)])}))],2)])})),o._v(" "),o.imageViewerVisible?r("ModelFittingImageViewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"2001"},attrs:{"initial-index":(null===(t=o.currentImg)||void 0===t?void 0:t.idx)||0,"on-close":function(){return o.imageViewerVisible=!1},"url-list":o.urlList,originalImg:(null===(e=o.currentImg)||void 0===e||null===(e=e.model_beautify_meta)||void 0===e?void 0:e.source_url)||""},on:{operate:o.handleViewerOperate}}):o._e()],2)}),[],!1,null,"29f3fcdb",null).exports);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kt={name:"WorkAreaDialog",provide:function(){return{top:this}},props:{exampleList:{type:Array,default:function(){return[]}}},components:{WorkAreaTop:_,WorkAreaContentTabs:O,WorkAreaContentDisplay:ut,WorkAreaContentUpload:mt,WorkAreaContentHistories:Ct},data:function(){return{dialogVisible:!1,imgUrl:"",currentTab:"modelImage",imgList:[],selectedImgInfo:null,num:0,uploading:!1,maskUrl:""}},computed:xt(xt({},Object(l.c)("user",["isLoggedIn"])),{},{isModelImage:function(){return"modelImage"===this.currentTab},isCreationRecord:function(){return"creationRecord"===this.currentTab},selectedLoading:function(){var t,e;return(null===(t=this.selectedImgInfo)||void 0===t?void 0:t.isLoading)||"number"==typeof(null===(e=this.selectedImgInfo)||void 0===e?void 0:e.isLoading)}}),watch:{isLoggedIn:{handler:function(t){!t&&this.closeDialog()}},dialogVisible:{handler:function(t){t?this.uploadSuccess(this.imgUrl,"add"):this.imgList=[]},immediate:!0}},methods:{openDialog:function(t){this.imgUrl=t,this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.clearData()},clearData:function(){this.imgUrl="",this.currentTab="modelImage",this.imgList=[],this.selectedImgInfo=null,this.num=0,this.uploading=!1,this.maskUrl=""},changeCurrentTab:function(t){this.currentTab=t},changeCurrentImgInfo:function(t){var e=this.imgList.find((function(e){return e.idx==t}));this.selectedImgInfo=e||{}},addGeneratedImg:function(t,e){var n=t||[],o=this.imgList.find((function(t){return t.idx==e}));null!=o&&o.generatedImg&&(n=t.concat(o.generatedImg)),this.$set(o,"generatedImg",n)},delGeneratedImg:function(t,e){var n,o=null===(n=this.selectedImgInfo)||void 0===n||null===(n=n.generatedImg)||void 0===n?void 0:n.filter((function(n){return n.id==t&&n.index!==e}));this.$set(this.selectedImgInfo,"generatedImg",o)},saveInfo:function(t,e,n){var o=t.find((function(t){return 1==t.sub_type}))||{},mask=t.find((function(t){return 2==t.sub_type}))||{},r=this.imgList.find((function(t){return t.idx==n}));this.$set(r,"segment",e),this.$set(r,"cut_source_url",(null==o?void 0:o.url)||""),this.$set(r,"mask",(null==mask?void 0:mask.url)||"")},setRecognitionProcess:function(t,e){var n=this.imgList.find((function(e){return e.idx==t}));this.$set(n,"recognitionProcess",e)},uploadSuccess:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v,h,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=0==n.imgList.length?0:n.imgList.length-1,o.next=3,n.getImgInfo(t);case 3:l=o.sent,c=l.width,d=void 0===c?0:c,v=l.height,h=void 0===v?0:v,f={url:t,idx:n.num,width:d,height:h},n.num++,"add"==e?n.imgList.push(f):n.$set(n.imgList,r,f),n.selectedImgInfo=f,n.$nextTick((function(){var e;null===(e=n.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.getRecognition(t,f.idx)}));case 13:case"end":return o.stop()}}),o)})))()},uploadSuccessReplace:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.getImgInfo(t);case 2:r=o.sent,l=r.width,c=void 0===l?0:l,d=r.height,v={url:t,idx:e,width:c,height:void 0===d?0:d},n.$set(n.imgList,e,v),n.selectedImgInfo=v,n.$nextTick((function(){var e;null===(e=n.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.getRecognition(t,v.idx)}));case 11:case"end":return o.stop()}}),o)})))()},getImgInfo:function(t){return new Promise((function(e,n){var img=new Image;img.src=t,img.onload=function(){var t=this.naturalWidth,n=this.naturalHeight;e({width:t,height:n})}})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},imgDelItem:function(t){var e;t==(null===(e=this.selectedImgInfo)||void 0===e?void 0:e.idx)&&(this.selectedImgInfo=null);var n=this.imgList.filter((function(e){return e.idx!=t}));this.$set(this,"imgList",n)},imgDelAll:function(){var t=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e;t.imgList=[],t.selectedImgInfo=null,t.setUploading(!1),null===(e=t.$refs)||void 0===e||null===(e=e.workAreaContentUpload)||void 0===e||e.clearInterval()}))},saveImg:function(t,e,n){var o=this;Object(x.h)({folder_no:"default",id:t,index:e}).then((function(r){var l;(console.log("res",r),o.$message.success(o.$t("SaveToPersonalCenter")),"history"==n)&&(null===(l=o.$refs)||void 0===l||null===(l=l.workAreaContentHistoriesRef)||void 0===l||l.updateImgStatus(t,e));"display"==n&&o.updateImgStatus(t,e)}))},updateImgStatus:function(t,e){var n,o=null===(n=this.selectedImgInfo)||void 0===n||null===(n=n.generatedImg)||void 0===n?void 0:n.find((function(n){return n.id==t&&n.index!==e}));this.$set(o,"isSavedPersonal",!0)},deleteImg:function(t,e,n){var o=this;Object(x.d)({id:t,index:e}).then((function(t){"function"==typeof n&&n(),o.$message.success(o.$t("DeleteSuccess"))}))},setUploading:function(t){this.uploading=t},changeMask:function(t,e,n){this.$set(this.selectedImgInfo,"mask",t),this.$set(this.selectedImgInfo,"cut_source_url",e),this.$set(this.selectedImgInfo,"maskBase64",n)},setGeneratedLoading:function(t,e){var n=this.imgList.find((function(e){return e.idx==t}));this.$set(n,"isLoading",e)},sendParams:function(t,e){var n;if(this.imgList.length>=5)this.$message.error(this.$t("ModelFittingSendTip"));else{var o=t.img_uris,r=void 0===o?[]:o,l=t.model_beautify_meta,c=void 0===l?{}:l,d=r[e]||{},v=d.width,h=void 0===v?0:v,f=d.height,m=void 0===f?0:f,_=c.source_url,mask=c.mask,y=c.cut_source_url,w=c.source_segment,C=c.scene_template_id,O=c.models;null===(n=this.$refs)||void 0===n||null===(n=n.workAreaContentDisplay)||void 0===n||null===(n=n.$refs)||void 0===n||null===(n=n.modelImage)||void 0===n||n.changeVal(O,C);var x={url:_,idx:this.num,width:h,height:m,mask:mask,segment:w,cut_source_url:y};this.num++,this.imgList.push(x),this.selectedImgInfo=x,this.currentTab="modelImage"}}}},It=(n(5108),Object(m.a)(kt,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"custom-class":"work-area-dialog","destroy-on-close":"",fullscreen:!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("WorkAreaTop",{on:{closeDialog:t.closeDialog}}),t._v(" "),e("div",{staticClass:"dialog-content"},[e("WorkAreaContentTabs",{attrs:{currentTab:t.currentTab},on:{changeCurrentTab:t.changeCurrentTab}}),t._v(" "),e("WorkAreaContentDisplay",{directives:[{name:"show",rawName:"v-show",value:t.isModelImage,expression:"isModelImage"}],ref:"workAreaContentDisplay",attrs:{exampleList:t.exampleList}}),t._v(" "),e("WorkAreaContentUpload",{directives:[{name:"show",rawName:"v-show",value:t.isModelImage,expression:"isModelImage"}],ref:"workAreaContentUpload"}),t._v(" "),e("WorkAreaContentHistories",{directives:[{name:"show",rawName:"v-show",value:!t.isModelImage,expression:"!isModelImage"}],ref:"workAreaContentHistoriesRef"})],1)],1)}),[],!1,null,"218faf48",null).exports),jt=n(95);function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pt={name:"ModelClothesChanging",head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_model_fitting_title"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{isUploading:!1,exampleList:[]}},components:{WorkAreaDialog:It},mounted:function(){var t=this;Object(jt.s)({type:5}).then((function(e){var n,o=(null==e||null===(n=e.data)||void 0===n?void 0:n.model_beautify_covers)||[];t.exampleList=o.map((function(i){return(null==i?void 0:i.url)||""}))}))},computed:$t($t({},Object(l.e)("user",["cdnHost"])),Object(l.c)("user",["cdnHostFun","isLoggedIn"])),methods:{handleUploadClick:function(){var t=this;console.log("进入上传点击"),this.isLoggedIn?this.$refs.uploadRef.$el.querySelector('input[type="file"]').click():this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.$refs.uploadRef.$el.querySelector('input[type="file"]').click()}})},handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,e.isLoggedIn){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(!e.isUploading){n.next=6;break}return n.abrupt("return");case 6:if(["image/jpeg","image/png","image/jpg","image/webp"].includes(o.type)){n.next=10;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return");case 10:if(!(o.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(vt.a)(o,10485760);case 14:o=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return");case 21:return n.next=23,e.scaleImage(o,o.type);case 23:r=n.sent,e.isUploading=!0,new c.a({type:21}).startUpload(r).then((function(t){e.openWorkArea(t)})).catch((function(t){e.$message.error(e.$t(30005==t.code?"uploadImageViolatesRules":"uploadError"))})).finally((function(){e.isUploading=!1}));case 27:case"end":return n.stop()}}),n,null,[[11,17]])})))()},scaleImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise((function(n,o){var r=new FileReader;r.onload=function(o){var img=new Image;img.src=o.target.result,img.onload=function(){var o=this.naturalWidth,r=this.naturalHeight,l=2048;if(this.imgSize={width:this.naturalWidth,height:this.naturalHeight},o>l||r>l){var c=Math.min(l/o,l/r),d=o*c,v=r*c,canvas=document.createElement("canvas"),h=canvas.getContext("2d");canvas.width=d,canvas.height=v,h.drawImage(img,0,0,d,v);var f=canvas.toDataURL(e),m=Object(pt.dataURItoBlob)(f),_=new File([m],t.name.replace(/\.\w+$/,".png"),{type:"image/png"});n(_)}else n(t)}},r.readAsDataURL(t)})).catch((function(t){return console.error(t),Promise.reject(new Error("error"))}))},openWorkArea:function(t){this.isLoggedIn?this.$refs.workAreaDialog.openDialog(t):this.$EventBus.$emit("openLoginDialog")}}},Tt=Pt,Dt=(n(5109),Object(m.a)(Tt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-model-fitting"},[e("img",{staticClass:"ai-model-fitting-icon",attrs:{src:n(1065),alt:"icon"}}),t._v(" "),e("div",{staticClass:"ai-model-fitting-title"},[t._v(t._s(t.$t("ai_model_fitting_title")))]),t._v(" "),e("div",{staticClass:"ai-model-fitting-desc"},[t._v(t._s(t.$t("ai_model_fitting_desc")))]),t._v(" "),e("div",{staticClass:"ai-model-fitting-content"},[e("div",{staticClass:"ai-model-fitting-content-left"},[e("video",{attrs:{src:"https://".concat(t.cdnHost,"/20240418/089d7871-bd21-451e-9d49-e295e2612952.mov"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"ai-model-fitting-content-right"},[e("el-upload",{ref:"uploadRef",staticClass:"upload-box",attrs:{accept:".jpg, .jpeg, .webp, .png",drag:"",action:"/",multiple:!1,"show-file-list":!1,"http-request":t.handleUpload}},[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n            "+t._s(t.$t("ModelFittingUploadTips"))+"\n          ")])])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"example"},t._l(t.exampleList,(function(n,o){return e("img",{key:o,attrs:{alt:"image",src:n},on:{click:function(e){return t.openWorkArea(n)}}})})),0)],1)]),t._v(" "),e("WorkAreaDialog",{ref:"workAreaDialog",attrs:{exampleList:t.exampleList}})],1)}),[],!1,null,"e37ef44e",null));e.default=Dt.exports},5733:function(t,e,n){"use strict";n.r(e);n(16),n(18),n(11),n(6),n(12),n(13),n(8),n(7);var o=n(2),r=(n(32),n(22),n(4),n(25)),l={name:"noticeModal",data:function(){return{visible:!1,iconUrl:n(1503)}},methods:{openModal:function(){this.visible=!0},handleClose:function(){this.visible=!1},handleConfirm:function(){this.handleClose(),localStorage.setItem("aiPhotographConfirm",!0),this.$emit("confirm")}}},c=(n(5056),n(0)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"提示",visible:t.visible,width:"440px","custom-class":"c-ai-photography-notice-modal","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"notice-modal-wrap"},[e("div",{staticClass:"notice-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"photography-notice-modal-title"},[t._v(t._s(t.$t("photography6")))]),t._v(" "),e("div",{staticClass:"photography-notice-modal-content"},[e("p",[t._v("1. "+t._s(t.$t("photography3")))]),t._v(" "),e("p",[t._v("2. "+t._s(t.$t("photography4")))])]),t._v(" "),e("div",{staticClass:"photography-notice-modal-confirm-btn-wrap",on:{click:function(e){return e.stopPropagation(),t.handleConfirm.apply(null,arguments)}}},[e("div",{staticClass:"confirm-btn"},[t._v(t._s(t.$t("photography5")))])])])])}),[],!1,null,null,null),d=component.exports,v=(n(24),n(14)),h=(n(19),n(50),n(49),n(3433)),f=n(95),m=n(1),_=n(57);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"digitalCloneList",components:{makeDigitalProcessModal:h.default},props:{baseShowNum:{type:Number,default:4}},data:function(){return{list:[],taskInfo:null,loading:!1,pageInfo:{page:1,page_size:30},debounceHandleScroll:null,scrollTop:0}},computed:w(w({},Object(m.c)("creation",["aiPhotoTrainList"])),{},{computedPercentage:function(){var t;return"".concat(this.$t("photography37")," ").concat((null==this||null===(t=this.list[0])||void 0===t?void 0:t.train_process)||0,"%")},showDeleteBtn:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[3,4].includes(null==t?void 0:t.train_status)}},renderBaseShowNum:function(){return this.baseShowNum<=4?4:this.baseShowNum}}),mounted:function(){var t=this;this.getList(),this.$EventBus.$on("refreshAiPhotographyDigitalCloneList",(function(){t.handleSearch()})),this.$EventBus.$on("updateAiPhotographyDigitalCloneList",(function(e){t.updateListItem(e)})),this.debounceHandleScroll=Object(r.debounce)(this.handleScroll,600),window.addEventListener("scroll",this.debounceHandleScroll)},beforeDestroy:function(){this.$EventBus.$off("refreshAiPhotographyDigitalCloneList"),this.$EventBus.$off("updateAiPhotographyDigitalCloneList"),window.removeEventListener("scroll",this.debounceHandleScroll),this.debounceHandleScroll=null},methods:w(w({},Object(m.b)("creation",["setAiPhotographyTrainList"])),{},{openMakeDigitalCloneModal:function(){this.$emit("openModal")},openProcessModal:function(t){[1,2].includes(null==t?void 0:t.train_status)&&this.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process"})},updateListItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(this.list||[]).forEach((function(n){(null==e?void 0:e.id)===(null==n?void 0:n.train_id)&&(console.log(e,"变动---"),t.$set(n,"train_status",e.state||(null==n?void 0:n.train_status)),t.$set(n,"train_process",e.process>100?100:e.process),t.$set(n,"train_status_desc",e.state_desc||n.train_status_desc))}))},handleSearch:function(){this.pageInfo.page=1,this.getList()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||(this.loading=!0),Object(f.l)({limit:100}).then((function(n){var o;if(1e4!==(null==n||null===(o=n.status)||void 0===o?void 0:o.code))return n;if(e){var r,l=n.data,data=void 0===l?{}:l,c=Object(_.objectArrayDeduplicationMerge)(t.list,(null==data?void 0:data.items)||[]);c=(c||[]).map((function(e){return e.name="".concat(t.$t("photography7")).concat(e.name),[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e})),(r=t.list).push.apply(r,Object(v.a)(c))}else{var d;t.list=((null==n||null===(d=n.data)||void 0===d?void 0:d.items)||[]).map((function(e){return e.name="".concat(t.$t("photography7")).concat(e.name),[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e}))}})).finally((function(){t.loading=!1}))},handleScroll:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<300&&(console.log("loadMore------------"),t.handleLoadMore())}))},handleLoadMore:function(){var t=this.list.length?this.list[this.list.length-1]:"",e=t?t.id:"";this.getList(e)},deleteDigitalCloneItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};[3,4].includes(null==e?void 0:e.train_status)&&this.$confirm(this.$t("photography33"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){Object(f.w)({id:e.id}).then((function(n){var o;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)){var r=t.list.findIndex((function(t){return t.id===e.id}));-1!==r&&t.list.splice(r,1),t.$message.success(t.$t("deleteSuccess"))}})).finally((function(){}))})).catch((function(){}))}})},O=C,x=(n(5058),Object(c.a)(O,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-ai-photography-digital-clone-list",style:{gridTemplateColumns:"repeat(".concat(t.renderBaseShowNum,", 1fr)")}},[e("div",{staticClass:"card-item card-item-add",on:{click:function(e){return e.stopPropagation(),t.openMakeDigitalCloneModal.apply(null,arguments)}}},[e("span",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"card-item-add-title"},[t._v(t._s(t.$t("photography9")))])]),t._v(" "),t._l(t.list,(function(n,o){return e("div",{directives:[{name:"loading",rawName:"v-loading",value:[1,2].includes(null==n?void 0:n.train_status),expression:"[1, 2].includes(item?.train_status)"}],key:o,staticClass:"card-item",class:[[4].includes(null==n?void 0:n.train_status)?"cart-item-failed":""],attrs:{"element-loading-text":t.computedPercentage},on:{click:function(e){return e.stopPropagation(),t.openProcessModal(n)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteBtn(n),expression:"showDeleteBtn(item)"}],staticClass:"card-item-delete-btn",on:{click:function(e){return e.stopPropagation(),t.deleteDigitalCloneItem(n)}}},[e("span",{staticClass:"el-icon-delete"})]),t._v(" "),null!=n&&n.cover?e("img",{directives:[{name:"webp",rawName:"v-webp",value:t.$imgL,expression:"$imgL"},{name:"show",rawName:"v-show",value:[3].includes(null==n?void 0:n.train_status),expression:"[3].includes(item?.train_status)"}],staticClass:"card-item-image",attrs:{src:(null==n?void 0:n.cover)||"",alt:""}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:[4].includes(null==n?void 0:n.train_status),expression:"[4].includes(item?.train_status)"}],staticClass:"card-item-failed"},[t._v("\n      "+t._s(t.$t("photography46"))+"\n    ")]),t._v(" "),e("div",{staticClass:"bottom-bar"},[t._v("\n      "+t._s(n.name)+"\n    ")])])}))],2)}),[],!1,null,"40ac59f2",null)),k=x.exports,I=(n(122),n(43),n(77),n(10)),j=n(35),S=n.n(j),$=n(45),P=n(29),T=n(593),D=(n(21),n(302)),L=n(124);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={name:"MessageImg",components:{taskImageViewer:D.default,SaveTo:L.default},props:{src:{type:String,required:!0,default:function(){return""}},nsfw:{type:Number,default:2},message:{type:Object,default:function(){return{}}},gridBanner:{type:Object,default:function(){return{}}},operateNumber:{type:Number,default:function(){return 1}}},data:function(){return{loading:!0,loaded:!0,error:!1,dialogVisible:!1,retryCount:0,isShowImage:!0,baseImageWidth:337,imageUrl:"",hoverBtnList:[{code:"extraUpscale",icon:"upload-image-icon",useText:!1,order:1,tips:"photography39",show:!0,showTypeOptions:[]},{code:"download",icon:"modelDownload",useText:!1,order:5,tips:"DownloadImg",show:!0,showTypeOptions:[]}]}},computed:E(E(E({},Object(m.c)(["isSupportWebp"])),Object(m.e)("user",["cdnHost"])),{},{showExtraUpscale:function(){return[22,"22","23",23].includes(this.message.type)},showRemoveBackground:function(){return[2,"2",13,"13"].includes(this.message.type)},isShowBtn:function(){var t={extraUpscale:[this.showExtraUpscale],download:[!0]};return function(e){return!!Object.keys(t).includes(e)&&t[e].every((function(t){return!!t}))}},hoverBtnRenderList:function(){var t=this;return this.hoverBtnList.map((function(e){return e.show=t.isShowBtn(e.code),e})).filter((function(t){return t.show}))},renderUrl:function(){return"https://".concat(this.cdnHost,"/static/upload/20230401/62f66fbd-bc27-44f6-b744-5c5d7e5b18ee.webp")},isShowOperateBtn:function(){return["22",22,4,"4",23,"23"].includes(this.message.type)&&!this.error},convertPictureWidthAndHeight:function(){var t=this.message.banner,e=(void 0===t?{}:t)||{},n=e.width,o=void 0===n?200:n,r=e.height,l=void 0===r?200:r,c=Object(_.resizeImage)(o,l,this.baseImageWidth);return isNaN(c.height)?{}:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},covertSmallWidth:function(){var t=this.message.banner,e=void 0===t?{}:t,n=e.width,o=void 0===n?0:n;e.height;return o<=200?{minWidth:"".concat(150,"px"),maxWidth:"".concat(150,"px")}:{}},viewImageList:function(){var t=this.message,e=t.banner,n=void 0===e?{}:e,o=t.img_uris,r=void 0===o?[]:o;t.preprocess_images,t.type;return Array.isArray(r)&&r.length?(S()(this.message.img_uris||[])||[]).map((function(t,e){return t.operateNumber=e+1,t})).filter((function(t){return![1,"1"].includes(t.nsfw)})):[Object.assign({},S()(n),{operateNumber:1})]},currentImageIndex:function(){var t,e=this;return-1===(t=this.viewImageList.findIndex((function(t){return t.operateNumber===e.operateNumber})))?0:t},getImageUrl:function(){return this.isShowImage?this.imageUrl:""}}),mounted:function(){},watch:{src:{handler:function(t){t&&"string"==typeof t&&(this.imageUrl=Object(I.K)(t,"low"))},immediate:!0}},methods:{downloadImage:function(){Object(I.M)(this.src,this.$t("photography8"))},onLoad:function(t){this.loading=!1,this.loaded=!0,this.error=!1,this.$EventBus.$emit("needScrollBottom",S()(this.message))},onError:function(){this.loading=!1,this.imageUrl&&(this.imageUrl.includes("_high.webp")||this.imageUrl.includes("_low.webp"))&&(this.imageUrl=this.src),this.reLoadImage(),this.error=!0},reLoadImage:function(){var t=this;this.retryCount>=1||(this.isShowImage=!1,this.retryCount++,this.loading=!0,this.$nextTick((function(){t.isShowImage=!0})))},clickReloadImage:function(){this.retryCount=0,this.error=!1,this.imageUrl=this.isSupportWebp?Object(I.K)(this.src,"low"):this.src,this.reLoadImage()},viewBigImage:function(){this.dialogVisible=!0},closeViewBigImage:function(){this.dialogVisible=!1},handleContextMenu:function(t){1===this.nsfw&&t.preventDefault()},handleClick:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"download"!==e?this.$emit("imageOperate",e,this.operateNumber,null===(t=this.message)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.url):this.downloadImage()}}},R=M,N=(n(5059),n(5060),Object(c.a)(R,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-media-attachments-container"},[e("div",{staticClass:"attachments-wrap"},[e("div",{staticClass:"message-attachment-media"},[e("div",{staticClass:"image-content"},[e("div",{staticClass:"image-content-wrap",style:{"max-width":"".concat(t.baseImageWidth,"px"),"min-width":"".concat(200,"px")}},[e("div",{staticClass:"image-render-box"},[1===t.nsfw?[e("img",{staticClass:"media-attachments-img image-opacity-0",style:t.loading?t.convertPictureWidthAndHeight:t.covertSmallWidth,attrs:{src:t.renderUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,contextmenu:function(e){return t.handleContextMenu(e)}}})]:[e("img",{staticClass:"media-attachments-img",class:[t.loading?"":"media-attachments-img-show",t.loading?"image-opacity-0":""],style:t.loading?t.convertPictureWidthAndHeight:t.covertSmallWidth,attrs:{src:t.getImageUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,click:t.viewBigImage,contextmenu:function(e){return t.handleContextMenu(e)}}})],t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading&&1!==t.nsfw,expression:"loading && nsfw !== 1"}],staticClass:"loading-wrapper"},[e("div",{staticClass:"loading-wrapper-inner"},[e("span",{staticClass:"spinner",attrs:{role:"img","aria-label":t.$t("Loading")}},[t._m(0)])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOperateBtn&&t.isShowImage&&t.src&&!t.loading&&![0,"0"].includes(this.operateNumber),expression:"isShowOperateBtn && isShowImage && src && !loading && ![0, '0'].includes(this.operateNumber)"}],staticClass:"image-hover-mask",on:{click:t.viewBigImage}},[e("div",{staticClass:"image-hover-mask-btn-box"},[t._l(t.hoverBtnRenderList,(function(n){return[e("el-tooltip",{key:n.code,attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"top",content:t.$t(null==n?void 0:n.tips)}},[e("span",{staticClass:"image-hover-mask-btn image-hover-mask-btn-single",on:{click:function(e){return e.stopPropagation(),t.handleClick(n.code)}}},[n.useText?[t._v("\n                        "+t._s(n.text)+"\n                      ")]:e("i",{staticClass:"iconfont image-hover-mask-btn-icon",class:"icon-".concat(n.icon)})],2)])]}))],2)])],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.error&&!t.loading,expression:"error && !loading"}],staticClass:"image-load-error"},[e("i",{staticClass:"iconfont icon-image-load-error image-load-error-icon"}),t._v(" "),e("span",{staticClass:"image-load-error-text",on:{click:function(e){return e.stopPropagation(),t.clickReloadImage.apply(null,arguments)}}},[t._v(t._s(t.$t("reloadImage")))])])])]),t._v(" "),t.dialogVisible?e("task-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"on-close":t.closeViewBigImage,"initial-index":t.currentImageIndex,"show-operate-btn":!1,message:t.message,"url-list":t.viewImageList}}):t._e()],1)])}),[function(){var t=this._self._c;return t("span",{staticClass:"inner-MGEKwh wanderingCubes-2A046F"},[t("span",{staticClass:"item-2VgEex"}),t("span",{staticClass:"item-2VgEex"})])}],!1,null,"90a1fc9c",null)),U=N.exports,F=n(119);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H={name:"MsgItem",mixins:[$.a],props:{message:{type:Object,default:function(){return{}},required:!0}},components:{MessageImg:U,SwipeList:T.default,QuickQueue:F.default},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(I.F)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},computed:V(V(V(V({},Object(m.c)(["isSupportWebp"])),Object(m.c)("user",["userInfo","isCompanyAccount"])),Object(m.e)("payment",["paymentInfo"])),{},{getTemplateName:function(){var t,e,text="";["custom_portrait_template"].includes(null===(t=this.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_template_id)?text=this.$t("photography19"):text=(null===(e=this.message)||void 0===e||null===(e=e.create_metadata)||void 0===e?void 0:e.portrait_template_name)||"";return text},computedRemakeTaskCost:function(){var t;return["custom_portrait_template"].includes(null===(t=this.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_template_id)?4:12},isShowExpireTime:function(){var t=this.message.expire_time;return t&&t>0},getExpireTime:function(){var t=this.message.expire_time,e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("TaskExpireTime",{param:0})},computedPercentage:function(){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).process;return void 0===t?0:t}},convertStatusText:function(){var t={userCancelDesc:this.$t("userCancel"),sysCancelDesc:this.$t("systemCancel"),sysTimeoutDesc:this.$t("photography56")};return this.message.status_desc?t[this.message.status_desc]:""},getGridImageUrl:function(){return function(t){var e="";return t&&!["",null,void 0].includes(t.url)?e=t.url:e}},getImageInfo:function(){return function(t){return Object.assign(S()(this.message),{banner:t})}}}),data:function(){return{customColor:"#2E9E60",isPosting:!1,morePopoverVisible:!1}},mounted:function(){},beforeDestroy:function(){},methods:{autoResizeScrollBtn:function(){var t=this;this.$nextTick((function(){try{var e;null==t||null===(e=t.$refs)||void 0===e||e.swipeList.setMoveBtnShow()}catch(t){}}))},moreActions:function(){if("delete"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""))this.handleDeleteTask()},handleDeleteTask:function(){var t=this;this.$confirm(this.$t("photography38"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e={ids:[t.message.id]};t.globalLoading=!0,Object(P.deleteTaskRecord)(e).then((function(e){var n,o;["10000",1e4].includes(null==e||null===(n=e.status)||void 0===n?void 0:n.code)?(t.$emit("operate",{type:"deleteTask",info:t.message}),t.$message({message:t.$t("deleteSuccess"),type:"success"})):t.$message({message:(null==e||null===(o=e.status)||void 0===o?void 0:o.msg)||t.$t("ServerError"),type:"error"})})).finally((function(){t.globalLoading=!1}))})).catch((function(t){console.log("err",t)}))},handleReStart:function(){this.$emit("operate",{info:this.message,type:"reStart"})},handleImageOperate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("extraUpscale"===t)this.$emit("operate",{info:this.message,type:"extraUpscale",btnInfo:{btnType:"U",id:e}})}}},z=H,W=(n(5061),n(5062),n(5063),Object(c.a)(z,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{staticClass:"c-msg-item"},[r("div",{staticClass:"chat-message-header"},[r("h3",{staticClass:"chat-message__title"},[r("span",{staticClass:"chat-message__title-task-tag"},[o._v(o._s(o.$t("photography43")))]),o._v(" "),r("span",{staticClass:"chat-message__title-task-text"},[o._v(o._s(o.getTemplateName))]),o._v(" "),r("span",{staticClass:"chat-message__title-task-tag-2"},[o._v(o._s(o.$t("photography7"))+o._s((null===(t=o.message)||void 0===t||null===(t=t.create_metadata)||void 0===t?void 0:t.portrait_model_name)||""))]),o._v(" "),o.message.create_at?r("span",{staticClass:"chat-message__title-time"},[o._v(o._s(o._f("formatDateTime")(o.message.create_at)))]):o._e(),o._v(" "),r("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[r("div",{staticClass:"task-info-tips"},[3===o.message.status?[r("p",[o._v("\n              "+o._s(o.$t("TempTokensConsumption")+(null===(e=o.message)||void 0===e||null===(e=e.task_deduction_detail)||void 0===e?void 0:e.temp_hashrate)+"，"+o.$t("balance")+"："+o.paymentInfo.tempCoins)+"\n            ")]),o._v(" "),r("p",[o._v("\n              "+o._s(o.$t("TokensConsumption")+"  "+(null===(n=o.message)||void 0===n||null===(n=n.task_deduction_detail)||void 0===n?void 0:n.hashrate)+"，"+o.$t("balance")+"："+o.paymentInfo.calculateCoins)+"\n            ")])]:o._e(),o._v(" "),r("p",[o._v(o._s(o.$t("TaskID"))+": "+o._s(o.message.id))])],2),o._v(" "),r("i",{staticClass:"iconfont icon-task_tips task-info-icon",attrs:{slot:"reference"},slot:"reference"})]),o._v(" "),o.isShowExpireTime?r("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:o.$t("photography10")}},[r("span",{staticClass:"chat-message__title-task-tag-expire-time"},[r("span",[o._v(o._s(o.getExpireTime))])])]):o._e()],1)]),o._v(" "),[3,"3",4,"4"].includes(o.message.status)?r("div",{staticClass:"msg-item-more-panel",class:[o.morePopoverVisible?"msg-item-more-panel-show":""]},[r("el-popover",{ref:"myPopover",attrs:{placement:"bottom-end","popper-class":"msg-item-more-popover","visible-arrow":!1,width:"100",trigger:"click"},model:{value:o.morePopoverVisible,callback:function(t){o.morePopoverVisible=t},expression:"morePopoverVisible"}},[r("div",{staticClass:"pop-btns flex"},[r("button",{on:{click:function(t){return o.moreActions("delete")}}},[r("span",{staticClass:"pop-btns-text"},[o._v(o._s(o.$t("Delete")))]),o._v(" "),r("span",{staticClass:"pop-btns-icon"},[r("i",{staticClass:"iconfont icon-shanchu"})])])]),o._v(" "),r("div",{staticClass:"msg-item-more-icon",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"iconfont icon-more"})])]),o._v(" "),![4,"4"].includes(o.message.status)&&[22,"22",23,"23"].includes(o.message.type)?r("div",{staticClass:"msg-item-more-icon",on:{click:function(t){return t.stopPropagation(),o.handleReStart.apply(null,arguments)}}},[r("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:o.$t("photography45",{number:o.computedRemakeTaskCost})}},[r("i",{staticClass:"iconfont icon-refresh-icon2"})])],1):o._e()],1):o._e(),o._v(" "),[2,"2",3,"3"].includes(o.message.status)&&o.message.img_uris.length?r("div",{staticClass:"message-accessories",on:{mouseenter:o.autoResizeScrollBtn}},[r("swipe-list",{ref:"swipeList",attrs:{"move-leng":200}},[r("div",{staticClass:"media-attachments-container"},[o.message&&Array.isArray(o.message.img_uris)&&o.message.img_uris.length?o._l(o.message.img_uris,(function(t,e){return r("message-img",{key:e,attrs:{src:o.getGridImageUrl(t),nsfw:t.nsfw,"grid-banner":o.message.banner,message:o.getImageInfo(t),"operate-number":e+1},on:{imageOperate:o.handleImageOperate}})})):o._e()],2)])],1):o._e(),o._v(" "),[1,"1",2,"2",4,"4"].includes(o.message.status)?r("div",{staticClass:"message-process-container"},[[2,"2"].includes(o.message.status)&&o.computedPercentage(o.message)?r("div",{staticClass:"message-process-panel"},[r("el-progress",{attrs:{percentage:o.computedPercentage(o.message),color:o.customColor,"show-text":!1,"stroke-width":7}})],1):o._e(),o._v(" "),r("div",{staticClass:"message-process-operate-box"},[[1,"1"].includes(o.message.status)?[r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("TaskStatusWaitingToStart"))+" "),r("span",{staticClass:"message-process-loading-span"})]),o._v(" "),r("QuickQueue",{attrs:{quickOptions:o.message,quickStyle:{height:"34px",fontSize:"12px"}}})]:[2,"2"].includes(o.message.status)&&!o.computedPercentage(o.message)?[r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("TaskStatusPreparing"))+" "),r("span",{staticClass:"message-process-loading-span"})])]:[4,"4"].includes(o.message.status)?r("span",{staticClass:"process-operate-box-text",staticStyle:{color:"#da373d"}},[o._v(o._s(o.convertStatusText))]):r("span",{staticClass:"process-operate-box-text"},[o._v(o._s(o.$t("youHaveCompleted"))),r("span",{staticClass:"process-operate-box-text-strong",staticStyle:{"margin-left":"5px"}},[o._v(o._s(o.computedPercentage(o.message))+"%")]),o._v(" "),r("span",{staticClass:"message-process-loading-span"})])],2)]):o._e()])}),[],!1,null,"cb70a7bc",null)),G=W.exports;function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}installComponents(W,{QuickQueue:n(119).default});var J={name:"taskView",inject:["photographyRef"],components:{MsgItem:G},mixins:[n(5064).a],data:function(){return{loading:!1,list:[],emptyImgUrl:n(1031),showScroll:!1,debounceHandleScroll:function(){},last1:0,last2:0,timer:null,scrollTop:0}},mounted:function(){this.getList(),this.debounceHandleScroll=Object(r.debounce)(this.handleScroll,600),window.addEventListener("scroll",this.debounceHandleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.debounceHandleScroll),this.debounceHandleScroll=null},methods:{handleTaskOperate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.info,n=void 0===e?{}:e,o=t.type,r=void 0===o?"":o;t.callback;switch(console.log("type: ",r),r){case"reStart":this.$logEvent("log_actions",{operation:"click_redraw_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleTaskRestart(n);break;case"extraUpscale":this.$logEvent("log_actions",{operation:"click_hd_repair_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleExtraUpscale(t);break;case"deleteTask":this.$logEvent("log_actions",{operation:"click_delete_button",behavior_info:"".concat(null==n?void 0:n.id),behavior_info_sub:"photo_history"}),this.handleDeleteTask(n.id)}},handleTaskRestart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};n.task_id=e.id,Object(f.j)(n).then((function(e){var n=e||{},o=n.status,r=void 0===o?{}:o,l=n.data,data=void 0===l?{}:l;1e4===(null==r?void 0:r.code)&&(t.list.unshift(Q(Q({},data),{},{status:1})),t.$message.success(t.$t("CreateSuccess")),t.checkUpdateMessageNeedScrollToBottom())})).catch((function(t){})).finally((function(){}))},handleExtraUpscale:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{},n=e.info,o=e.btnInfo.id,r={};r.id=n.id,r.num=o,Object(f.z)(r).then((function(e){var n=e||{},o=n.data,data=void 0===o?{}:o,r=n.status,l=(void 0===r?{}:r).code;if([1e4,"10000"].includes(void 0===l?"":l)){var c=Q(Q({},data),{},{status:1});t.list.unshift(c),t.$message.success(t.$t("CreateSuccess")),t.checkUpdateMessageNeedScrollToBottom()}})).finally((function(){}))},checkUpdateMessageNeedScrollToBottom:function(){try{var t=this.$refs.scrollWrapper;t.scrollHeight-t.scrollTop<=2*t.clientHeight&&this.scrollToTop()}catch(t){}},handleDeleteTask:function(t){var e=this.list.findIndex((function(e){return e.id===t}));-1!==e&&this.list.splice(e,1)},handleClick:function(){this.photographyRef.backTo()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.loading)return Promise.resolve();var n={limit:50};["",null,void 0].includes(e)||(n.after_id=e),n.keyword=this.keyword,this.loading=!0,Object(f.v)(n).then((function(e){var o;if(1e4!==(null==e||null===(o=e.status)||void 0===o?void 0:o.code))return e;var r=e.data,data=void 0===r?{}:r;if(n.after_id){var l,c,d=Object(_.objectArrayDeduplicationMerge)(t.list,data.items||[]),h=null===(l=t.$refs)||void 0===l||null===(l=l.scrollWrapper)||void 0===l?void 0:l.scrollHeight;d=d.map((function(t){return t.img_uris=(t.img_uris||[]).filter((function(t){return null==t?void 0:t.url})),t})),(c=t.list).push.apply(c,Object(v.a)(d)),h&&d.length&&t.scrollToTop(h,"instant")}else t.list=(data.items||[]).map((function(t){return t.img_uris=(t.img_uris||[]).filter((function(t){return null==t?void 0:t.url})),t})),t.scrollToTop(0,"instant")})).finally((function(){t.loading=!1}))},sortByField:function(t,e){var n=function(a,b){var t=a[e],n=b[e];return t<n?-1:t>n?1:0};return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?t.sort(n):t.sort((function(a,b){return n(b,a)}))},scrollToTop:function(){this.$nextTick((function(){window.scrollTo(0,0)}))},isScrollEnd:function(){try{var t=this.$refs.scrollWrapper;this.last2=null==t?void 0:t.scrollTop,this.last2==this.last1&&(this.showScroll=!1)}catch(t){}},handleScroll:function(){var t=this,e=document.documentElement.scrollHeight,n=window.innerHeight;this.$nextTick((function(){t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e-t.scrollTop-n<300&&(console.log("loadMore------------"),t.handleLoadMore())}))},handleLoadMore:function(){var t=this.list.length?this.list[this.list.length-1]:"",e=t?t.id:"";this.getList(e)},updateMessageList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.list.findIndex((function(e){return t.id===e.id})),n=Q({},t);-1===e&&this.list.unshift(n)}}},X=J,K=(n(5065),Object(c.a)(X,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-ai-photography-digital-task-view"},[e("div",{staticClass:"tips-title"},[e("span",{staticClass:"el-icon-info tips-title-icon"}),t._v("\n    "+t._s(t.$t("ai_photography_tips"))+"\n  ")]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],ref:"scrollContainer",staticClass:"message-list"},[e("div",{staticClass:"messages-wrapper"},[e("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:[t.showScroll?"":"show-scroll-bar"],on:{scroll:t.debounceHandleScroll}},[t._l(t.list,(function(n){return[n.id?e("msg-item",{key:n.id,attrs:{message:n},on:{operate:t.handleTaskOperate}}):t._e()]}))],2)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.list.length,expression:"!loading && !list.length"}],staticClass:"empty-box"},[e("div",{staticClass:"empty-img-box"},[e("img",{attrs:{src:t.emptyImgUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"empty-text-box"},[t._v("\n      "+t._s(t.$t("photography17"))+"\n    ")]),t._v(" "),e("div",{staticClass:"empty-btn-box"},[e("div",{staticClass:"empty-btn",on:{click:function(e){return e.stopPropagation(),t.handleClick.apply(null,arguments)}}},[t._v(t._s(t.$t("photography11")))])])])])}),[],!1,null,"7c5de315",null)),Z=K.exports,tt=n(3),et=(n(20),n(26),n(51)),it=n(61),at={name:"aiPhotographyUploadImageItem",props:["value","createId","max","showUpload"],components:{},data:function(){return{replaceImageType:I.K,isUploading:!1,accept:".jpg,.jpeg,.png,.svg,.webp,.bmp,.tif",fileList:[],tempList:[],batchSize:2,selectedFilesCount:0}},computed:{showImgLoading:function(){return function(img){return!img.tags&&!img.disabled_tag&&"check"!=img.type&&(100!=img.uploadStatus||!img.error&&!img.ready)}}},watch:{value:function(t){t&&this.$set(this,"fileList",t)}},mounted:function(){this.value&&this.value&&this.$set(this,"fileList",this.value)},methods:{curstomUpload:function(t){var e=this;return Object(tt.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.fileList.length>=e.max)){n.next=2;break}return n.abrupt("return",!1);case 2:if(e.isUploading=!0,!((o=t.file).size/1024/1024>10)){n.next=16;break}return n.prev=5,n.next=8,Object(it.a)(o,10485760);case 8:o=n.sent,n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(5),console.error("Compression failed:",n.t0),e.isUploading=!1,n.abrupt("return",!1);case 16:return n.next=18,e.checkImageSize(o);case 18:r=n.sent,e.addFileByUpload(o).then((function(t){console.log("自定义id",t);var n=new et.a({type:2});n.startUpload(o,{name:"post_img".concat(Date.now(),".png"),type:"png",category:14,size:o.size}).then((function(o){var l=e.fileList.find((function(e){return e.imageId===t}));l.url=o,l.uploadStatus=100,l.ready=!0,l.file_id=n.fileId,l.width=r.width,l.height=r.height})).catch((function(n){var o=e.fileList.findIndex((function(e){return e.imageId===t}));e.deleteFile(o)})).finally((function(){console.log("finally"),e.isUploading=!1}))}));case 20:case"end":return n.stop()}}),n,null,[[5,11]])})))()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t=img.naturalWidth,n=img.naturalHeight;e({width:t,height:n})},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},handleOpenPickArtWorkModal:function(){this.fileList.length>=this.max||this.$emit("openPickWorkModal",this.fileList)},handleChange:function(t,e){var n=this;this.tempList=e,this.$emit("input",this.fileList),setTimeout((function(){n.$emit("handleChange",n.fileList)}),500)},addFileByUpload:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){var o={imageId:e.fileList.length+t.name,uploadStatus:0,ready:!1};e.fileList.push(o),n(o.imageId)},r.onerror=function(t){return o(t)}}))},addFile:function(t){var e=t.imageId,n=t.url;this.fileList.push({file_id:e,url:n,uploadStatus:100,ready:!0})},updateProgress:function(t,e){var n=t.loaded,o=t.total,r=Math.round(n/o*100),l=this.fileList.findIndex((function(t){return t.file_id==e.file_id}));l>-1&&(this.fileList[l].uploadStatus=r)},clear:function(){var t=this;this.$confirm(this.$t("DeleteAllFiles"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){t.fileList=[],t.$emit("clearAll",t.fileList),t.$emit("handleChange",t.fileList)})).catch((function(){}))},deleteFile:function(t){var e=this.fileList[t];this.fileList.splice(t,1),this.$emit("delete",e),this.$emit("handleChange",this.fileList)},fileExceed:function(){this.$message({type:"warning",message:this.$t("CreativeCenterPopup20",{number:this.max})})},refreshUpload:function(t){var e=this.fileList[t].file_id;this.fileList[t].error=!1,this.fileList[t].uploadStatus=0,e?this.startUpload(e):this.getUploadSign(e)},imgError:function(t){console.log("图片加载失败",this.$refs[t.url]),this.$refs[t.url][0].src=t.url}}};n(5066);function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var st={name:"makeDigitalCloneModal",components:{aiPhotographyUploadImageItem:Object(c.a)(at,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-photography-upload-image-item flex flex-col"},[e("div",{staticClass:"upload-content flex flex-wrap"},[e("el-upload",{directives:[{name:"show",rawName:"v-show",value:t.fileList.length<t.max,expression:"fileList.length < max"}],ref:"imageUpload",staticClass:"upload-image",attrs:{action:"/",disabled:t.fileList.length==t.max,drag:"",multiple:"","http-request":t.curstomUpload,limit:20,"on-exceed":t.fileExceed,accept:t.accept,"show-file-list":!1,"on-change":t.handleChange}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),t._l(t.fileList,(function(img,i){return e("div",{key:"upload_".concat(i),staticClass:"image-item flex"},[e("div",{staticClass:"img-handle"},[e("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.deleteFile(i)}}})]),t._v(" "),img.url?e("img",{ref:img.url,refInFor:!0,attrs:{src:t.replaceImageType(img.url,"low")},on:{error:function(e){return t.imgError(img)}}}):t._e(),t._v(" "),t.showImgLoading(img)?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showImgLoading(img),expression:"showImgLoading(img)"}],staticClass:"loading"}):t._e()])}))],2)])}),[],!1,null,"54be300b",null).exports},data:function(){return{visible:!1,step:1,titleMap:{1:{mainText:"photography12",subText:"photography13"},2:{mainText:"photography14",subText:"photography15"}},selectList:[],maxNum:20,accept:".jpg,.jpeg,.png,.svg,.webp,.bmp,.tif",correctConfigList:[{url:"https://image.cdn2.seaart.ai/static/upload/20231120/d06e7555-8de6-46c9-a194-f20aafb11287.webp",text:"多光线 多背景",i18nKey:"photography25",icon:"icon-gpt_select",id:"correctConfigList1"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/8539f608-4055-472f-a238-895af3e30521.webp",text:"多视角",i18nKey:"photography26",icon:"icon-gpt_select",id:"correctConfigList2"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/8f79c4ba-188d-4d4c-b966-678023bbacd1.webp",text:"多表情",i18nKey:"photography27",icon:"icon-gpt_select",id:"correctConfigList3"}],errorConfigList:[{url:"https://image.cdn2.seaart.ai/static/upload/20231120/fb192548-f7c5-42f5-ae14-3414f75646c1.webp",text:"面部有遮挡",i18nKey:"photography28",icon:"round-wrong",id:"errorConfigList1"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/007e9d04-d732-4494-9476-2de4e329372b.webp",text:"头部过小",i18nKey:"photography29",icon:"round-wrong",id:"errorConfigList2"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/63269448-8341-4696-b02d-69385ffd3e6b.webp",text:"多人照片",i18nKey:"photography30",icon:"round-wrong",id:"errorConfigList3"},{url:"https://image.cdn2.seaart.ai/static/upload/20231120/e4c0df7e-d495-4199-be7f-45de940ca1fa.webp",text:"宠物照片",i18nKey:"photography31",icon:"round-wrong",id:"errorConfigList4"}],loading:!0,costNum:1e3,realCostNum:600}},computed:ot(ot({},Object(m.e)("payment",["paymentInfo","activeState","liteActiveState","tempCoins","calculateCoins"])),{},{isVip:function(){return this.activeState||this.liteActiveState},isNoCoins:function(){return(this.tempCoins||0)+(this.calculateCoins||0)<1e3}}),methods:{openModal:function(){this.visible=!0},handleClose:function(){this.visible=!1},handleBeforeUpload:function(t){var e=this;return this.$nextTick((function(){e.$refs.uploadImageItem.curstomUpload({file:t})})),!1},handleBeforeUploadEmpty:function(){},fileExceed:function(){this.$message({type:"warning",message:this.$t("CreativeCenterPopup20",{number:this.maxNum})})},imagDelete:function(){},imgUpChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(t,"视图里的list")},onClearAll:function(){this.selectList=[]},handleStartMake:function(){var t=this;if(this.selectList.length<5)this.$message.warning(this.$t("photography36",{number:5}));else if(this.selectList.length>20)this.$message.warning(this.$t("UploadImageExceed20"));else if(this.isNoCoins)this.$EventBus.$emit(this.isVip?"showVipComputingDialog":"showNotVipComputingDialog");else{var e={};e.images=(this.selectList||[]).map((function(t){return{url:t.url}})),this.loading=!0,Object(f.y)(e).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.handleClose(),t.$EventBus.$emit("refreshAiPhotographyDigitalCloneList"),t.$store.dispatch("creation/setAiPhotographyTrainList",[{id:e.data.id,state:1}]),t.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process",info:{id:e.data.id,state:1}}))})).finally((function(){t.loading=!1}))}}}},lt=st,ct=(n(5067),Object(c.a)(lt,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,"custom-class":"c-make-digital-clone-modal",center:"",width:"974px","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-text-box"},[e("div",{staticClass:"title-main-text"},[t._v(t._s(t.$t("photography21")))]),t._v(" "),e("div",{staticClass:"title-sub-text"},[t._v(t._s(t.$t("photography22")))])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.selectList.length,expression:"!selectList.length"}],staticClass:"upload-box"},[e("el-upload",{ref:"imageUpload2",staticClass:"image-upload",attrs:{action:"#",drag:"","before-upload":t.handleBeforeUpload,accept:t.accept,multiple:"",limit:20,"on-exceed":t.fileExceed,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n        "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n      ")])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectList.length,expression:"selectList.length"}],staticClass:"step-box"},[e("ai-photography-upload-image-item",{ref:"uploadImageItem",attrs:{max:t.maxNum},on:{delete:t.imagDelete,clearAll:t.onClearAll,handleChange:t.imgUpChange},model:{value:t.selectList,callback:function(e){t.selectList=e},expression:"selectList"}})],1),t._v(" "),e("div",{staticClass:"example-box"},[e("div",{staticClass:"example-box-item"},[e("div",{staticClass:"example-box-item-title"},[e("div",{staticClass:"example-box-item-title-line"}),t._v(" "),e("div",{staticClass:"example-box-item-title-text"},[e("svg-icon",{staticClass:"example-box-item-title-text-icon",attrs:{"icon-class":"correct-icon"}}),t._v(t._s(t.$t("photography23"))+"\n        ")],1),t._v(" "),e("div",{staticClass:"example-box-item-title-line"})]),t._v(" "),e("div",{staticClass:"show-example-box"},[t._l(t.correctConfigList,(function(n){return[e("div",{key:n.id,staticClass:"show-example-box-item"},[e("div",{staticClass:"show-example-box-item-img"},[e("img",{attrs:{src:n.url,alt:""}})]),t._v(" "),e("div",{staticClass:"show-example-box-item-text"},[t._v(t._s(t.$t(n.i18nKey)))]),t._v(" "),n.icon?e("div",{staticClass:"show-example-box-item-icon"},[e("i",{staticClass:"iconfont",class:n.icon})]):t._e()])]}))],2)]),t._v(" "),e("div",{staticClass:"example-box-item"},[e("div",{staticClass:"example-box-item-title"},[e("div",{staticClass:"example-box-item-title-line"}),t._v(" "),e("div",{staticClass:"example-box-item-title-text"},[e("svg-icon",{staticClass:"example-box-item-title-text-icon",attrs:{"icon-class":"error-icon"}}),t._v(t._s(t.$t("photography24"))+"\n        ")],1),t._v(" "),e("div",{staticClass:"example-box-item-title-line"})]),t._v(" "),e("div",{staticClass:"show-error-example-box"},[t._l(t.errorConfigList,(function(n){return[e("div",{key:n.id,staticClass:"show-example-box-item"},[e("div",{staticClass:"show-example-box-item-img"},[e("img",{attrs:{src:n.url,alt:""}})]),t._v(" "),e("div",{staticClass:"show-example-box-item-text"},[t._v(t._s(t.$t(n.i18nKey)))]),t._v(" "),n.icon?e("div",{staticClass:"show-example-box-item-icon"},[e("i",{staticClass:"iconfont",class:"icon-".concat(n.icon)})]):t._e()])]}))],2)])]),t._v(" "),e("div",{staticClass:"modal-bottom-btn",on:{click:function(e){return e.stopPropagation(),t.handleStartMake.apply(null,arguments)}}},[e("span",{staticClass:"bottom-btn-text"},[e("span",{staticClass:"bottom-btn-text-main"},[t._v(t._s(t.$t("photography20")))]),t._v(" "),e("span",{staticClass:"bottom-btn-text-sub"},[t._v("\n        ( "+t._s(t.$t("PhysicalExertion"))+" : "),e("span",{staticClass:"bottom-btn-text-sub-text-gray"},[t._v(t._s(t.costNum))]),e("span",{staticClass:"bottom-btn-text-sub-text"},[t._v(t._s(t.realCostNum))]),t._v(" )\n        "),e("el-tooltip",{attrs:{placement:"top",effect:"light","popper-class":"custom-tips-popper",content:t.$t("photography41")}},[e("span",{staticClass:"el-icon-info bottom-btn-text-sub-tips"})])],1),t._v(" "),e("div",{staticClass:"free-try",attrs:{title:t.$t("Sale")}},[t._v("\n        "+t._s(t.$t("Sale"))+"\n      ")])])])])}),[],!1,null,null,null)),ut=ct.exports;installComponents(ct,{SvgIcon:n(115).default});var pt={name:"contentList",props:{baseShowNum:{type:Number,default:5}},components:{digitalCloneList:k,taskView:Z,makeDigitalCloneModal:ut},data:function(){return{loading:!1,activeTab:"photo",tabList:[{label:"数字分身",i18nKey:"photography7",type:"digitalClone"},{label:"写真",i18nKey:"photography8",type:"photo"}]}},mounted:function(){},beforeDestroy:function(){},methods:{handleClick:function(){},changeTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.activeTab=t},openMakeDigitalCloneModal:function(){this.activeTab="digitalClone",this.$refs.makeDigitalCloneModal.openModal()},updateTaskList:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$refs.taskView.updateMessageList(data)}}},vt=pt,ht=(n(5068),Object(c.a)(vt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-content-list"},[e("task-view",{directives:[{name:"show",rawName:"v-show",value:"photo"===t.activeTab,expression:"activeTab === 'photo'"}],ref:"taskView"}),t._v(" "),e("make-digital-clone-modal",{ref:"makeDigitalCloneModal"})],1)}),[],!1,null,null,null).exports);function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mt={name:"makePortraitModal",data:function(){return{visible:!1,costNum:12,detailInfo:null,digitalCloneList:[],type:"normal",info:null,loading:!1,selectDigitalClone:"",submitLoading:!1,activeIndex:0,customTemplate:{url:""},face_image:"",face_image_base64:"",uploading:!1,pollingTimer:null,imageLoading:!1,UPLOAD:new et.a({type:13}),uploadingFaceImage:!1}},computed:ft(ft({},Object(m.e)("payment",["paymentInfo","activeState","liteActiveState","tempCoins","calculateCoins"])),{},{computedTaskCost:function(){return"custom"===this.type?3:12},templateBanners:function(){var t;return(null==this||null===(t=this.detailInfo)||void 0===t?void 0:t.banners)||[]},getBannerUrl:function(){return function(t){return Object(I.K)(t.banners[0]||"","high")||""}},isVip:function(){return this.activeState||this.liteActiveState},isNoCoins:function(){return this.tempCoins<0||this.calculateCoins<0},activeClass:function(){return function(t){var e="";return null!=t&&t.id&&t.id===this.selectDigitalClone&&(e="digital-clone-item-active"),e}}}),methods:{openModal:function(t){var e=t.info,n=t.type;this.resetData(),this.detailInfo=e||null,this.type=n||"normal",this.visible=!0},removeFaceImage:function(){this.face_image="",this.face_image_base64=""},handleClose:function(){this.visible=!1,this.resetData()},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.getList(!0)}catch(t){}},setActiveIndex:function(t){this.activeIndex=t,console.log(this.activeIndex,"当前的activeIndex")},removeCustomImage:function(){this.customTemplate={url:""},this.uploading=!1},handleImageLoad:function(){this.imageLoading=!1},handleImageLoadError:function(){this.imageLoading=!1},resetData:function(){this.type="normal",this.digitalCloneList=[],this.detailInfo=null,this.selectDigitalClone="",this.activeIndex=0,this.customTemplate={url:""},this.face_image_base64="",this.face_image="",this.uploadingFaceImage=!1},handleSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(null==t?void 0:t.id)||"";e&&this.selectDigitalClone===e||(this.selectDigitalClone=e)},handleAddDigitalClone:function(){this.handleClose(),this.$EventBus.$emit("openMakeDigitalCloneModal")},getList:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={limit:100};n&&(o.after_id=this.digitalCloneList.length?null===(t=this.digitalCloneList[this.digitalCloneList.length-1])||void 0===t?void 0:t.id:"");this.loading=!0,Object(f.l)(o).then((function(t){var o;if(1e4===(null==t||null===(o=t.status)||void 0===o?void 0:o.code))if(n){var r=e.digitalCloneList.map((function(t){return t.id})),l=(t.data.items||[]).filter((function(t){return!r.includes(t.id)})).map((function(t){return t.name="".concat(e.$t("photography7")).concat(t.name),t})).filter((function(t){return[3,"3"].includes(null==t?void 0:t.train_status)}));e.digitalCloneList=e.digitalCloneList.concat(l)}else{var c;e.digitalCloneList=((null==t||null===(c=t.data)||void 0===c?void 0:c.items)||[]).map((function(t){return t.name="".concat(e.$t("photography7")).concat(t.name),t})).filter((function(t){return[3,"3"].includes(null==t?void 0:t.train_status)})),e.selectDigitalClone=e.digitalCloneList.length?e.digitalCloneList[0].id:""}})).finally((function(){e.loading=!1}))},handleSubmit:function(){var t=this;if(["",null,void 0].includes(this.face_image))this.$message.warning(this.$t("photography55"));else if("custom"===this.type&&["",null,void 0].includes(this.customTemplate.url))this.$message.warning(this.$t("photography35"));else{this.submitLoading=!0;var e=this.getParams();Object(f.j)(e).then((function(e){var n=e||{},o=n.status,r=void 0===o?{}:o;n.data;1e4===(null==r?void 0:r.code)&&(t.handleClose(),t.$EventBus.$emit("jumpToPhotoList",e.data||{}))})).catch((function(t){})).finally((function(){t.submitLoading=!1}))}},getParams:function(){var t={};return t.portrait_model_id=this.selectDigitalClone||"","normal"===this.type?(t.portrait_template_id=this.detailInfo.id,t.portrait_template_num=this.activeIndex):t.custom_portrait_template=this.customTemplate.url,t.face_image=this.face_image||"",t},handleBeforeUploadEmpty:function(){},handleBeforeUpload:function(t){var e=this;return Object(tt.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.loading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(l.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(it.a)(l,10485760);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploading){n.next=23;break}return n.abrupt("return");case 23:return e.uploading=!0,o.startUpload(l,{category:13}).then((function(t){e.uploading=!1,e.imageLoading=!0,e.customTemplate.url=t})).catch((function(t){console.log(t),e.uploading=!1,e.imageLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 26:case"end":return n.stop()}}),n,null,[[11,17]])})))()},handleFaceImageBeforeUpload:function(t){var e=this;return Object(tt.a)(regeneratorRuntime.mark((function n(){var o,r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.loading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(l.size/1024/1024>10)){n.next=21;break}return n.prev=11,n.next=14,Object(it.a)(l,10485760);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploadingFaceImage){n.next=23;break}return n.abrupt("return");case 23:return n.next=25,e.checkImageSize(t);case 25:return c=n.sent,e.face_image_base64=(null==c?void 0:c.url)||"",e.uploadingFaceImage=!0,o.startUpload(l,{category:13}).then((function(t){e.uploadingFaceImage=!1,e.face_image=t})).catch((function(t){console.log(t),e.uploadingFaceImage=!1,e.$message.error(e.$t("uploadError")),e.face_image="",e.face_image_base64=""})),n.abrupt("return",!1);case 30:case"end":return n.stop()}}),n,null,[[11,17]])})))()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t={width:img.width,height:img.height,realWidth:img.naturalWidth,realHeight:img.naturalHeight};t.url=img.src,e(t)},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))}}},_t=mt,bt=(n(5069),Object(c.a)(_t,(function(){var t,e,n,o,r=this,l=r._self._c;return l("el-dialog",{attrs:{title:r.$t("photography11"),visible:r.visible,width:"729px","custom-class":"c-make-portrait-modal",center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":r.handleClose},on:{"update:visible":function(t){r.visible=t}}},[l("div",{staticClass:"make-portrait-modal-content"},[l("div",{staticClass:"category-box"},["normal"===r.type?l("el-carousel",{attrs:{autoplay:!1,"initial-index":0},on:{change:r.setActiveIndex}},r._l(r.templateBanners,(function(t,e){var n;return l("el-carousel-item",{key:e},[l("div",{staticClass:"category-card-item"},[l("img",{staticClass:"content-list-item-image",attrs:{src:t,alt:""}}),r._v(" "),l("div",{staticClass:"content-list-item-bottom"},[l("div",{staticClass:"main-title"},[r._v(r._s(null===(n=r.detailInfo)||void 0===n?void 0:n.name))])])])])})),1):r._e(),r._v(" "),"custom"===r.type?l("div",{staticClass:"category-card-item category-card-item-custom"},[null!==(t=r.customTemplate)&&void 0!==t&&t.url?r._e():[l("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:r.uploading,expression:"uploading"}],staticClass:"image-upload custom-item-banner",attrs:{action:"#",drag:"","before-upload":r.handleBeforeUpload,"http-request":r.handleBeforeUploadEmpty,"show-file-list":!1,disabled:r.uploading}},[l("span",{staticClass:"el-icon-plus custom-item-banner-icon"}),r._v(" "),l("div",{staticClass:"custom-item-banner-text"},[r._v(r._s(r.$t("photography19")))])])],r._v(" "),null!==(e=r.customTemplate)&&void 0!==e&&e.url?l("img",{staticClass:"content-list-item-image",attrs:{src:null===(n=r.customTemplate)||void 0===n?void 0:n.url,alt:""},on:{load:r.handleImageLoad,error:r.handleImageLoadError}}):r._e(),r._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:(null===(o=r.customTemplate)||void 0===o?void 0:o.url)&&!r.uploading&&!r.imageLoading&&!r.submitLoading,expression:"customTemplate?.url && !uploading && !imageLoading && !submitLoading"}],staticClass:"image-viewer__close",on:{click:function(t){return t.stopPropagation(),r.removeCustomImage.apply(null,arguments)}}},[l("i",{staticClass:"el-icon-close"})]),r._v(" "),l("div",{staticClass:"content-list-item-bottom"},[l("div",{staticClass:"main-title"},[r._v(r._s(r.$t("photography18")))])])],2):r._e()],1),r._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],ref:"scrollWrapper",staticClass:"digital-clone-box"},[l("div",{staticClass:"digital-clone-item digital-clone-item-add"},[l("div",{staticClass:"digital-clone-item-name"}),r._v(" "),l("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:r.uploadingFaceImage,expression:"uploadingFaceImage"}],staticClass:"image-file-upload",attrs:{action:"#",drag:"","before-upload":r.handleFaceImageBeforeUpload,"http-request":r.handleBeforeUploadEmpty,"show-file-list":!1,disabled:r.uploadingFaceImage}},[l("div",{staticClass:"digital-clone-item-content",attrs:{slot:"trigger"},slot:"trigger"},[l("span",{staticClass:"el-icon-plus"}),r._v(" "),l("div",{staticClass:"digital-clone-item-content-add-title"},[r._v(r._s(r.$t("photography53")))]),r._v(" "),l("div",{staticClass:"digital-clone-item-content-add-title"},[r._v(r._s(r.$t("photography54")))])])])],1),r._v(" "),r.face_image_base64?l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.uploadingFaceImage,expression:"uploadingFaceImage"}],staticClass:"digital-clone-item"},[l("div",{staticClass:"digital-clone-item-image"},[l("img",{attrs:{src:r.face_image_base64||r.face_image||"",alt:""}}),r._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:r.face_image&&!r.uploadingFaceImage&&!r.submitLoading,expression:"face_image && !uploadingFaceImage && !submitLoading"}],staticClass:"image-viewer__close",on:{click:function(t){return t.stopPropagation(),r.removeFaceImage.apply(null,arguments)}}},[l("i",{staticClass:"el-icon-close"})])])]):r._e()])]),r._v(" "),"custom"===r.type?l("div",{staticClass:"tips-box"},[l("span",{staticClass:"el-icon-info tips-box-icon"}),r._v("\n    "+r._s(r.$t("photography34"))+"\n  ")]):r._e(),r._v(" "),l("div",{staticClass:"make-portrait-modal-bottom-btn",on:{click:function(t){return t.stopPropagation(),r.handleSubmit.apply(null,arguments)}}},[l("span",{staticClass:"bottom-btn-text"},[l("span",{staticClass:"bottom-btn-text-main"},[r._v(r._s(r.$t("startGenerate")))]),r._v(" "),l("span",{staticClass:"bottom-btn-text-sub"},[r._v("( "+r._s(r.$t("PhysicalExertion"))+" : "+r._s(r.computedTaskCost)+" )")])])])])}),[],!1,null,null,null));function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct={name:"AiPhotography",components:{noticeModal:d,contentList:ht,makePortraitModal:bt.exports},provide:function(){return{photographyRef:this}},data:function(){return{formatNumberForeign:I.p,iconUrl:n(1428),loading:!1,categoryList:[],orderList:[{name:"默认",value:"default",i18nKey:"createModeType1",iconClass:"sort-arrow-down"},{name:"最近",value:"new",i18nKey:"New",iconClass:"new1"},{name:"最热",value:"hot",i18nKey:"Hot",iconClass:"hot"}],queryParams:{category:"",order_by:"default"},customTemplate:{id:"custom",type:"custom",name:"自定义写真模版",i18nKey:"photography18"},list:[],baseShowNum:5,activeTab:"",currentPage:"category",lastTemplate:null,processItem:null}},mounted:function(){var t=this;this.debounceResize=Object(r.debounce)(this.handleResize,500),window.addEventListener("resize",this.debounceResize),this.$nextTick((function(){t.handleResize()})),this.getCategoryList(),this.getList(),this.$EventBus.$on("backToAiPhotography",(function(e){t.currentPage="category"})),this.$EventBus.$on("jumpToPhotoList",(function(e){t.jumpToPhotoList(e)}))},beforeDestroy:function(){window.removeEventListener("resize",this.debounceResize),this.$EventBus.$off("openMakeDigitalCloneModal"),this.$EventBus.$off("updateAiPhotographyDigitalCloneItem"),this.$EventBus.$off("backToAiPhotography"),this.debounceResize=null,this.lastTemplate=null},computed:wt(wt({},Object(m.e)("user",["token"])),{},{getBannerUrl:function(){return function(t){return null!=t&&t.banners?Object(I.K)(t.banners[0]||"","high"):""}},renderCategoryList:function(){return this.categoryList},computedPercentage:function(){var t;return"".concat((null==this||null===(t=this.processItem)||void 0===t?void 0:t.process)||0,"%")},getCurrentOrderItem:function(){var t=this.queryParams.order_by;return this.orderList.find((function(e){return e.value===t}))||null}}),watch:{currentPage:function(t){document.querySelector(".page-seo").style.display="category"===t?"block":"none"}},methods:wt(wt({},Object(m.b)("creation",["setAiPhotographyTrainList"])),{},{checkProcessingDigitalClone:function(){var t=this;Object(f.l)({limit:30}).then((function(e){var n,o;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&((null==e||null===(o=e.data)||void 0===o?void 0:o.items)||[]).map((function(e){return[1,2].includes(null==e?void 0:e.train_status)&&t.setAiPhotographyTrainList([{id:e.train_id,state:null==e?void 0:e.train_status,process:(null==e?void 0:e.train_process)||0}]),e}))})).finally((function(){}))},openProcessModal:function(){this.$EventBus.$emit("openMakeDigitalProcessModal",{type:"process"})},handleCommand:function(t){this.queryParams.order_by!==t&&(this.queryParams.order_by=t,this.$logEvent("log_actions",{operation:"click_filter_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.order_by||""}),this.handleSearch())},updateListItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$set(this,"processItem",t)},openMakePortraitModal:function(){this.$refs.makePortraitModal.openModal(this.lastTemplate)},openMakeDigitalCloneModal:function(){var t=this;this.changeCurrentPage("generate"),this.$nextTick((function(){t.$refs.contentList.changeTab("digitalClone"),t.$refs.contentList.openMakeDigitalCloneModal()}))},jumpToPhotoList:function(){var t=this,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.changeCurrentPage("generate"),this.$nextTick((function(){var e,n;null===(e=t.$refs.contentList)||void 0===e||e.changeTab("photo"),null===(n=t.$refs.contentList)||void 0===n||n.updateTaskList(data)}))},backTo:function(){"generate"!==this.currentPage?this.$router.back():this.currentPage="category"},handleResize:function(){try{var t=this.$refs.aiPhotography.offsetWidth,e=this.$refs.operateBarLeft.offsetWidth;e>900&&console.log(e,"tempWidth---------"),console.log("海艺页面实际宽度变为：",t),this.computedBaseNum(t)}catch(t){}},computedBaseNum:function(t){try{var e=Math.floor((t-16)/278);t>=1534&&(e=5),t>1300&&t<1534&&(e=5),t>=1120&&t<=1300&&(e=4),t<1120&&(e=4),t<900&&(e=3),this.baseShowNum=isNaN(e)||e>=5?5:e}catch(t){}},getList:function(){var t=this,e={};e.category=this.queryParams.category,e.order_by_field=this.queryParams.order_by,this.loading=!0,Object(f.n)(e).then((function(e){var n;1e4===e.status.code&&(t.list=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[])})).finally((function(){t.loading=!1}))},getCategoryList:function(){var t=this;Object(f.m)({}).then((function(e){var n;1e4===e.status.code&&(t.categoryList=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[])})).finally((function(){}))},selectCategory:function(t){t.value!==this.queryParams.category&&(this.$logEvent("log_actions",{operation:"click_up_tab_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.category||""}),this.queryParams.category=t.value,this.handleSearch())},handleSelectChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(t),this.$logEvent("log_actions",{operation:"click_filter_button",behavior_info:"ai_photo_template_square",behavior_info_sub:this.queryParams.order_by||""}),this.handleSearch()},handleSearch:function(){this.loading=!0,this.list=[],this.getList()},handleGenerate:function(t,e){if(this.$logEvent("log_actions",{operation:"click_photo_template",behavior_info:"ai_photo_template_square"}),this.token){if(this.lastTemplate=null,!(localStorage.getItem("aiPhotographConfirm")||!1))return this.lastTemplate={info:t,type:e},void this.$refs.noticeModal.openModal();this.$refs.makePortraitModal.openModal({info:t,type:e})}else this.$EventBus.$emit("openLoginDialog")},changeCurrentPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentPage=t,e&&this.$logEvent("log_actions",{operation:"click_digital_avatar_jump_button",behavior_info:"ai_photo_template_square"})}}),head:function(){return{title:this.$t("seoPortrait_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoPortrait_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIPortraitKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoPortrait_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoPortrait_tag_desc")}],script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("AIPortrait_top_title"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}}},Ot=Ct,xt=(n(5070),Object(c.a)(Ot,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{ref:"aiPhotography",staticClass:"c-fast-tools-ai-photography"},[r("el-backtop",{attrs:{bottom:30,right:30}},[r("i",{staticClass:"el-icon-top"})]),o._v(" "),r("div",{staticClass:"tools-back-to",on:{click:function(t){return t.stopPropagation(),o.backTo.apply(null,arguments)}}},[r("i",{staticClass:"el-icon-back"})]),o._v(" "),["category"].includes(o.currentPage)?[r("div",{staticClass:"top-bar"},[r("div",{staticClass:"top-bar-icon"},[r("img",{attrs:{src:o.iconUrl,alt:""}})]),o._v(" "),r("h1",{staticClass:"top-bar-main-title"},[o._v(o._s(o.$t("AIPortrait_top_title")))]),o._v(" "),r("div",{staticClass:"top-bar-sub-title"},[o._v(o._s(o.$t("AIPortrait_top_sub")))])]),o._v(" "),r("div",{staticClass:"content-list-operate-bar"},[r("div",{ref:"operateBarLeft",staticClass:"content-list-operate-bar-left"},[o._l(o.renderCategoryList,(function(t,e){return[r("span",{key:"category_".concat(e),staticClass:"category-btn",class:[t.value===o.queryParams.category?"category-btn-active":""],attrs:{"data-event":"ai-tools-portrait-category-item","data-id":t.value},on:{click:function(e){return e.stopPropagation(),o.selectCategory(t)}}},[o._v(o._s(t.name))])]}))],2),o._v(" "),r("div",{staticClass:"content-list-operate-bar-right"},[r("el-dropdown",{attrs:{trigger:"click"},on:{command:o.handleCommand}},[r("div",{staticClass:"el-dropdown-link"},[r("div",[r("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(null===(t=o.getCurrentOrderItem)||void 0===t?void 0:t.iconClass)}),o._v(" "),r("span",[o._v(o._s(o.$t(null===(e=o.getCurrentOrderItem)||void 0===e?void 0:e.i18nKey)))])]),o._v(" "),r("i",{staticClass:"el-icon-arrow-down"})]),o._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},o._l(o.orderList,(function(t,e){return r("el-dropdown-item",{key:e,attrs:{command:t.value}},[r("div",{staticClass:"el-dropdown-item el-dropdown-item-2"},[r("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.iconClass)}),o._v(" "),r("span",[o._v(o._s(o.$t(t.i18nKey)))])])])})),1)],1),o._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:o.token,expression:"token"}],staticClass:"jump-btn-wrapper",attrs:{"data-event":"ai-tools-portrait-jump-btn"},on:{click:function(t){return t.stopPropagation(),o.changeCurrentPage("generate",!0)}}},[r("div",{staticClass:"jump-btn"},[r("span",{staticClass:"jump-btn-text"},[o._v(o._s(o.$t("MyArtworks")))]),o._v(" "),r("span",{staticClass:"el-icon-right jump-btn-icon"})])])],1)]),o._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],staticClass:"content-list",style:{gridTemplateColumns:"repeat(".concat(o.baseShowNum,", 1fr)")}},[o._l(o.list,(function(t,e){return["custom"===t.id?r("div",{key:"".concat((null==t?void 0:t.id)+e),staticClass:"content-list-item content-list-item-custom"},[r("div",{staticClass:"bottom-btn-mask"}),o._v(" "),r("div",{staticClass:"custom-item-banner"},[r("span",{staticClass:"el-icon-plus custom-item-banner-icon"}),o._v(" "),r("div",{staticClass:"custom-item-banner-text"},[o._v(o._s(o.$t("photography19")))])]),o._v(" "),r("div",{staticClass:"content-list-item-bottom"},[r("div",{staticClass:"main-title"},[o._v(o._s(o.$t(o.customTemplate.i18nKey)))]),o._v(" "),r("div",{staticClass:"sub-title"},[r("span",{staticClass:"sub-title-left"},[r("span",{staticClass:"el-icon-time sub-tittle-left-icon"}),o._v(" "),r("span",{staticClass:"sub-tittle-left-title"},[o._v(o._s(o.$t("recentlyUsed")))])]),o._v(" "),r("span",{staticClass:"sub-title-right"},[r("span",{staticClass:"sub-title-right-text"},[o._v(o._s(o.formatNumberForeign((null==t?void 0:t.total_used)||0)))]),o._v(" "),o._m(0,!0)])])]),o._v(" "),r("span",{staticClass:"bottom-play-btn",attrs:{"data-event":"ai-tools-portrait-generate-btn"},on:{click:function(t){return t.stopPropagation(),o.handleGenerate(o.customTemplate,"custom")}}},[r("i",{staticClass:"iconfont icon-play bottom-download-btn-icon"}),o._v(" "),r("span",{staticClass:"bottom-download-btn-text"},[o._v(o._s(o.$t("photography2")))])])]):r("div",{key:"".concat((null==t?void 0:t.id)+e),staticClass:"content-list-item"},[r("div",{staticClass:"bottom-btn-mask"}),o._v(" "),r("img",{staticClass:"content-list-item-image",attrs:{src:o.getBannerUrl(t),alt:""}}),o._v(" "),r("div",{staticClass:"content-list-item-bottom"},[r("div",{staticClass:"main-title"},[o._v(o._s(t.name))]),o._v(" "),r("div",{staticClass:"sub-title"},[r("span",{staticClass:"sub-title-left"},[r("span",{staticClass:"el-icon-time sub-tittle-left-icon"}),o._v(" "),r("span",{staticClass:"sub-tittle-left-title"},[o._v(o._s(o.$t("recentlyUsed")))])]),o._v(" "),r("span",{staticClass:"sub-title-right"},[r("span",{staticClass:"sub-title-right-text"},[o._v(o._s(o.formatNumberForeign((null==t?void 0:t.total_used)||0)))]),o._v(" "),o._m(1,!0)])])]),o._v(" "),r("span",{staticClass:"bottom-play-btn",attrs:{"data-event":"ai-tools-portrait-generate-btn"},on:{click:function(e){return e.stopPropagation(),o.handleGenerate(t)}}},[r("i",{staticClass:"iconfont icon-play bottom-download-btn-icon"}),o._v(" "),r("span",{staticClass:"bottom-download-btn-text"},[o._v(o._s(o.$t("photography2")))])])])]}))],2)]:o._e(),o._v(" "),["generate"].includes(o.currentPage)&&o.token?[r("content-list",{ref:"contentList",attrs:{baseShowNum:o.baseShowNum}})]:o._e(),o._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:o.processItem&&[1,2].includes(null===(n=o.processItem)||void 0===n?void 0:n.state)&&["category"].includes(o.currentPage),expression:"processItem && [1, 2].includes(processItem?.state) && ['category'].includes(currentPage)"}],staticClass:"process-bar",on:{click:o.openProcessModal}},[o._v("\n    "+o._s(o.$t("photography37"))),r("span",{staticClass:"process-bar-text"},[o._v(o._s(o.computedPercentage))])]),o._v(" "),r("notice-modal",{ref:"noticeModal",on:{confirm:o.openMakePortraitModal}}),o._v(" "),r("make-portrait-modal",{ref:"makePortraitModal"})],2)}),[function(){var t=this._self._c;return t("span",{staticClass:"sub-title-right-icon"},[t("i",{staticClass:"iconfont icon-hot"})])},function(){var t=this._self._c;return t("span",{staticClass:"sub-title-right-icon"},[t("i",{staticClass:"iconfont icon-hot"})])}],!1,null,null,null));e.default=xt.exports},5734:function(t,e,n){"use strict";n.r(e);var o=n(615),r=n(616),l=(n(18),{name:"FirstContainer",props:{showGender:{type:String,default:"female"}},computed:{boxColors:function(){return{male:{borderColor:"#0099FF",boxShadow:"rgba(181, 133, 249, 0.27) 0px 0px 64px 20px, rgb(87, 60, 125) 0px 0px 40px 1px inset"},female:{borderColor:"#BF96FA",boxShadow:"0px 0px 64px 20px rgba(181, 133, 249, 0.27), inset 0px 0px 40px 1px #573C7D"},other:{borderColor:"#6098FD",boxShadow:"rgba(181, 133, 249, 0.27) 0px 0px 64px 20px, rgb(87, 60, 125) 0px 0px 40px 1px inset"}}[this.showGender]}},data:function(){return{rateValue:4.5,genders:[{value:"male",name:"Male",icon:"icon-icon-male"},{value:"female",name:"Female",icon:"icon-icon-female"},{value:"other",name:"otherSex",icon:"icon-icon-Non-binary"}]}},methods:{changeGender:function(t){this.showGender!==t.value&&(this.$emit("changeGender",t.value),this.$logEvent("log_actions",{operation:"click_select_character",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.value}))},handleGenerate:function(){this.$emit("generate"),this.$logEvent("log_actions",{operation:"click_start_generate",behavior_info:"on_ai_profile_generation_page"})}}}),c=(n(5424),n(0)),d=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"first-container"},[e("div",{staticClass:"select-container"}),t._v(" "),e("div",{staticClass:"select-content"},[e("div",{staticClass:"select-title justify-center"},[t._v(t._s(t.$t("aiShortTitle")))]),t._v(" "),e("span",{staticClass:"sub-title"},[t._v(t._s(t.$t("aiShortSubTitle")))]),t._v(" "),e("div",{staticClass:"select-gender-fra"},[e("div",{staticClass:"genders"},t._l(t.genders,(function(n,o){return e("div",{key:n+o,staticClass:"gender flex flex-col items-center justify-center",class:{active:t.showGender===n.value},style:t.showGender===n.value?t.boxColors:null,on:{click:function(e){return t.changeGender(n)}}},[e("i",{staticClass:"iconfont",class:n.icon+" ".concat(n.value)}),t._v("\n          "+t._s(t.$t(n.name))+"\n        ")])})),0)]),t._v(" "),e("div",{staticClass:"generate-btn ai-avatar-btn flex items-center",attrs:{title:t.$t("StartGenerating")},on:{click:t.handleGenerate}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("startGeneration"))+"\n    ")])]),t._v(" "),e("div",{staticClass:"footer-rate"},[e("div",{staticClass:"footer-item"},[e("span",{staticClass:"g-text"},[t._v("100M+")]),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("Users")))])]),t._v(" "),e("div",{staticClass:"footer-item"},[e("i",{staticClass:"iconfont icon-maisui-you"}),t._v(" "),e("i",{staticClass:"iconfont icon-maisui-zuo"}),t._v(" "),e("span",{staticClass:"g-text"},[t._v("2000M+")]),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("processImg")))])]),t._v(" "),e("div",{staticClass:"footer-item"},[e("div",{staticClass:"g-text flex"},[e("span",[t._v("4.8")]),t._v(" "),e("el-rate",{attrs:{colors:["#ffffff99","#ffffff99","#ffffff99"],"disabled-void-color":"#2e2e2f",disabled:"","score-template":"{rateValue}"},model:{value:t.rateValue,callback:function(e){t.rateValue=e},expression:"rateValue"}})],1),t._v(" "),e("span",{staticClass:"sm-text"},[t._v(t._s(t.$t("rating")))])])])])}),[],!1,null,"47006281",null).exports,v=(n(11),n(6),n(12),n(13),n(8),n(4),n(7),n(2)),h=n(1);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(v.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={name:"FtBanner",props:{},computed:m(m({},Object(h.e)("user",["cdnHost"])),{},{imgs:function(){return{left:"https://".concat(this.cdnHost,"/static/upload/20241127/61a69aa1-0cc6-4d64-997a-e326e2f388d4_low.webp"),right:"https://".concat(this.cdnHost,"/static/upload/20241127/98ec5e99-3f23-4f1a-b1df-4870f65a0997_high.webp")}}})},y=(n(5425),{name:"StepOne",components:{FtBanner:Object(c.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ft_banner"},[t._m(0),t._v(" "),e("div",{staticClass:"ft_left_banner"},[e("img",{attrs:{src:t.imgs.left,alt:"background-image-left",loading:"lazy",width:"440",height:"487"}})]),t._v(" "),e("div",{staticClass:"ft_right_banner"},[e("img",{attrs:{src:t.imgs.right,alt:"background-image-right",loading:"lazy",width:"390",height:"671"}})]),t._v(" "),e("div",{staticClass:"linear-gradient-left"}),t._v(" "),e("div",{staticClass:"linear-gradient-right"})])}),[function(){var t=this._self._c;return t("div",{staticClass:"ft-bg-container"},[t("div",{staticClass:"ft_bg"})])}],!1,null,"df4979e4",null).exports,FirstContainer:d}}),w=(n(5426),Object(c.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ft-step-one"},[e("FirstContainer",t._g(t._b({},"FirstContainer",t.$attrs,!1),t.$listeners)),t._v(" "),e("FtBanner")],1)}),[],!1,null,"034c8bb0",null).exports),C=(n(2847),n(47),n(1124)),O=n.n(C),x=(n(2848),n(1125)),k=n.n(x),I=(n(16),n(21),{name:"BackArrow"}),j=(n(5427),Object(c.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"arrow",on:{click:function(e){return t.$emit("back")}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.$t("Back")))])}),[],!1,null,"ba145e0e",null).exports),S={name:"ContainerText"},$=(n(5428),Object(c.a)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("p",[t._t("default")],2),t._v(" "),e("p",[t._t("sub")],2)])}),[],!1,null,"2d54d94e",null).exports),P=(n(31),{name:"CardContainer",props:{info:{type:Object,default:function(){return{}}},allSelected:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},components:{},computed:{isSelected:function(){return this.allSelected.includes(this.info.id)},tagText:function(){var t,e=null===(t=this.info)||void 0===t||null===(t=t.labels)||void 0===t?void 0:t[0];if(!e)return"";var n=e.charAt(0).toUpperCase()+e.slice(1);return this.$t(n)},tagBgColor:function(){var t,e=null===(t=this.info)||void 0===t||null===(t=t.labels)||void 0===t?void 0:t[0];if(!e)return{};return{background:{new:"#FF2D5F",hot:"#EDB13C",free:"#0ABF94"}[e]||""}}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}});n(5429);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(v.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"SelectStyle",props:{},components:{BackArrow:j,ContainerText:$,CardContainer:Object(c.a)(P,(function(){var t,e,n,o,r,l=this,c=l._self._c;return c("div",{staticClass:"container"},[c("div",{staticClass:"inner",class:{active:l.isSelected,disable:l.disabled&&!l.isSelected}},[null!==(t=l.info)&&void 0!==t&&null!==(t=t.labels)&&void 0!==t&&t.length?c("div",{staticClass:"tags",class:null===(e=l.info)||void 0===e||null===(e=e.labels)||void 0===e?void 0:e[0],style:l.tagBgColor},[l._v("\n      "+l._s(l.tagText)+"\n    ")]):l._e(),l._v(" "),l._m(0),l._v(" "),null!==(n=l.info)&&void 0!==n&&n.cover?c("div",{staticClass:"img-container"},[c("img",{attrs:{src:null===(o=l.info)||void 0===o?void 0:o.cover,loading:"lazy",alt:"tempalte",width:"155",height:"210"}})]):l._e(),l._v(" "),c("div",{staticClass:"img-bottom"},[l._v("\n      "+l._s(null===(r=l.info)||void 0===r?void 0:r.name)+"\n    ")])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"check-box"},[t("i",{staticClass:"el-icon-check"})])}],!1,null,"6a9def2b",null).exports,ElSkeleton:k.a,ElSkeletonItem:O.a},computed:D(D({},Object(h.c)("AIAvatar",["maleTemplate","femaleTemplate","otherTemplate","styleLanguage"])),{},{selectedNumbers:function(){var t=this;return function(template){var e=((null==template?void 0:template.styles)||[]).filter((function(e){return t.selectedImages.includes(e.id)}));return e.length?e.length:""}},isFullSelected:function(){return this.selectedImages.length>=this.maxSelect},isNotEnoughSelected:function(){return this.selectedImages.length<this.minSelect},languageChanged:function(){return this.$i18n.locale!==this.styleLanguage}}),data:function(){return{allTemplate:[],currentTemplate:null,selectedImages:[],maxSelect:10,minSelect:3}},methods:D(D({},Object(h.b)("AIAvatar",["getTemplate","saveStyleLanguage","clearAlbums"])),{},{getStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"male",e=this[t+"Template"];null==e||!e.length||this.languageChanged?this.getTemplateList(t):(this.allTemplate=e.filter((function(t){return t.styles&&t.styles.length>0}))||[],this.setTemplate(this.allTemplate[0]))},initSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectedImages=t||[]},getTemplateList:function(){var t=this,e={gender:{male:1,female:2,other:3}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"male"]||"male"};this.languageChanged&&this.clearAlbums(),this.getTemplate(e).then((function(e){var n;if(console.log("getTemplate",e),1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o;if(t.allTemplate=(null===(o=e.data)||void 0===o?void 0:o.items.filter((function(t){return t.styles&&t.styles.length>0})))||[],!t.allTemplate.length)return t.$message.warning(t.$t("done_tip")),void t.$emit("back");t.saveStyleLanguage(t.$i18n.locale),console.log("allTemplate",t.allTemplate),t.setTemplate(t.allTemplate[0])}}))},setTemplate:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.currentTemplate=t,null===(e=this.$refs.scrollContent)||void 0===e||e.scrollTo({top:0,behavior:"smooth"}),"click"===n&&this.$logEvent("log_actions",{operation:"click_style",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.name})},toggleCard:function(t){this.selectedImages.includes(t.id)?this.selectedImages=this.selectedImages.filter((function(e){return e!==t.id})):(!this.isFullSelected&&this.selectedImages.push(t.id),this.$logEvent("log_actions",{operation:"click_template",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.id||t.name})),this.$emit("updateSelect",this.selectedImages)},goGenerate:function(){this.$logEvent("log_actions",{operation:"click_continue",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:this.selectedImages}),this.$emit("next")}})},A=L,E=(n(5430),Object(c.a)(A,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"select-style"},[o("div",{staticClass:"content-inner-fra"},[o("div",{staticClass:"head-container"},[o("ContainerText",{scopedSlots:n._u([{key:"sub",fn:function(){return[n._v(n._s(n.$t("selectStyleSub")))]},proxy:!0}])},[n._v("\n        "+n._s(n.$t("selectStyle"))+"\n        ")]),n._v(" "),o("BackArrow",n._g({},n.$listeners))],1),n._v(" "),o("div",{staticClass:"tabs-container"},n._l(n.allTemplate,(function(t,e){var r;return o("div",{key:(null==t?void 0:t.name)+e,staticClass:"tabs_container_item",class:{tabs_active:t.name===(null===(r=n.currentTemplate)||void 0===r?void 0:r.name)},on:{click:function(e){return n.setTemplate(t,"click")}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e>0&&n.selectedNumbers(t),expression:"index > 0 && selectedNumbers(tempType)"}],staticClass:"tabs_container_item_icon"},[o("span",[n._v(n._s(n.selectedNumbers(t)))])]),n._v(" "),o("span",{staticClass:"tabs_container_item_span"},[n._v(n._s(t.name))])])})),0)]),n._v(" "),o("div",{staticClass:"section"},[o("div",{staticClass:"custom-scroll"},[o("div",{ref:"scrollContent",staticClass:"custom-scroll-overflow"},[o("div",{staticClass:"section-select-styles-fra"},[n.currentTemplate?o("div",{staticClass:"ft-scroll-fra"},n._l(null===(t=n.currentTemplate)||void 0===t?void 0:t.styles,(function(t,e){return o("div",{key:t.id+e,staticClass:"scroll-fra-son",on:{click:function(e){return n.toggleCard(t)}}},[o("CardContainer",{attrs:{info:t,allSelected:n.selectedImages,disabled:n.isFullSelected}})],1)})),0):o("el-skeleton",{attrs:{loading:!0,animated:"",count:30}},[o("template",{slot:"template"},[o("el-skeleton-item",{staticStyle:{width:"140px",height:"180px"},attrs:{variant:"rect"}})],1)],2)],1)])])]),n._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"footer-inner"},[o("div",{directives:[{name:"show",rawName:"v-show",value:null===(e=n.selectedImages)||void 0===e?void 0:e.length,expression:"selectedImages?.length"}],staticClass:"select-nums"},[n._v(n._s(n.selectedImages.length))]),n._v(" "),o("div",{staticClass:"footer-btn ai-avatar-btn",class:{"footer-disable-btn":n.isNotEnoughSelected},on:{click:n.goGenerate}},[n._v("\n        "+n._s(n.$t("Continue"))+" "),o("i",{staticClass:"el-icon-right"})])])])])}),[],!1,null,"385b9efb",null).exports),M=n(3);n(20),n(24),n(26);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){Object(v.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"ExampleLeft",props:{genderType:{type:Number,default:1}},components:{},computed:N(N({},Object(h.e)("user",["cdnHost"])),{},{images:function(){return 2!==this.genderType?{good:"https://".concat(this.cdnHost,"/static/upload/20241115/2a5bb3a6-3410-4aa5-b1f5-ad32fb349bd4.webp"),bad:["https://".concat(this.cdnHost,"/static/upload/20241115/a4305a90-2235-4f5d-ab48-09fbd6f1fbd3.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/852ba6de-81e7-46b4-9547-e4fa4b3695e9.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/2abae9ec-a712-4ff6-9b85-bded00dd1175.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/35c1be91-3c16-45b1-ac03-7cac1fe37a7d.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/4f46d597-7976-4143-bea5-a45f0f653be0.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/9c0a43e1-569c-4e4a-86e9-20dc41789f37.webp")]}:{good:"https://".concat(this.cdnHost,"/static/upload/20241115/51f4aaaa-a5f8-49ff-ad95-d95dcb9c0a84.webp"),bad:["https://".concat(this.cdnHost,"/static/upload/20241115/48e79445-bf37-4fb1-acf9-36b2783091bb.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/4681ffd2-2ddd-4ee7-8e30-f11a7b48638f.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/f81fb469-80ba-498b-b2b3-82d8afd3f3a4.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/bc94edda-e00c-4904-8a7a-788658c49a2e.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/e7d4f2a9-1821-4175-861e-cfc3f4d39ba4.webp"),"https://".concat(this.cdnHost,"/static/upload/20241115/6cac4f5b-ce94-45fd-a7d6-00c97fcfd532.webp")]}}}),data:function(){return{photoText:{photoExample:"photoExample",photoExampleDtl:"photoExampleDtl",badTitle:"badPhotoTitle",bad:["badPhoto1","badPhoto2","badPhoto3","badPhoto4","badPhoto5","badPhoto6"]}}},mounted:function(){},methods:{}},F=(n(5431),Object(c.a)(U,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"example"},[e("div",{staticClass:"example-fra_new",staticStyle:{"margin-top":"32px"}},[e("div",{staticClass:"example-content"},[e("p",{staticClass:"titles"},[t._v(t._s(t.$t("photoRequire")))]),t._v(" "),e("div",{staticClass:"example-container"},[e("div",{staticClass:"example-left"},[e("div",{staticClass:"example-goods-top"},[e("img",{attrs:{loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAK3SURBVFiFzZdNSFRRFIC/c+eZouGEY5qLpI3iBCLtykolCFyIUJILkSwIbNXCTQvXLnOdIP2IuBAqkAihiLQ0aBcGoy6FErUxlHQcxvdOC8e/8Y0zjk/trB7v3Hu/j/fu3xHSjOKxviLHNjUCjeJoEKFUIQAgEEaZUSMhhSHjc0bnrt6dT2dcSQke6a9UoQPllqD+dAZVZAnhjSjdc7WtExkJ5A/3FuTmZHeq0A7kpQN2iRVRelbXol3L9Q8W0xYIjA9UWDF7EKjMEJwYE+tZvuZwdctkSoGiTy+vIOaVQIlHcAAUZlGnab6u7WtSgcD4QIUvZn/0Gr5Tws7y3dj5JczmQ/5wb4EVswePCg4gUGLF7MH84d6CPQK5OdmdePfP94vKOGtbIL7U2r0mNRSWMlXdzJPyy7veq9BePNJfuSWgQgeZL7Wk8KfBa/itUzQUliam8+JMpHisr0jXzXS6m8xB4JYY1tXhYegLb3/P7GqjyJJYTrnZ2F6PFw4gqN+xTY0RaDxu+LYEjUYcDZ4EHEAcDRqEPTME4PqZczy+UEWBlX0k8A0DSi2FgNuB0HuxZmsG3/7+noXYmrdwQCFgkiU/LP4EoCzXz+uqm5zNyvEUvhlGIOyWeDQ1vjWYm4QXcIGwQXHtZavSHvrsKuEFHABlxqiRULK8m8S7S/XewAE1EjIKQ/s1SpQ4n3PaEziAwpAxPmdUkaWDSHgDlyXjc0YFoGi0/7mo3kvVySdCW0kZP/7+4dvyQsZwABV5MV/Tet8CEKUbuEOKE9FW5dmv6UOB47ESZ24cx3O1rROi9HgxcjohSs/mdX1rI1pdi3YB+97hPYqJOGtDZmfmRC+lAOHqlknUaVKYPQo46jQl1gYnXpi4Hkbh6pbJSCRaF5+pK4cAr4jSHYlE69zg8D8Xp3tEjqg8/wdElJpvZtfbZgAAAABJRU5ErkJggg==",alt:""}}),t._v(" "),e("div",{staticClass:"example-goods-top-title"},[t._v(t._s(t.$t(t.photoText.photoExample)))])]),t._v(" "),e("div",{staticClass:"example-seat"},[e("div",{staticClass:"container"},[e("img",{staticClass:"lzy",staticStyle:{opacity:"1"},attrs:{loading:"lazy",src:t.images.good},on:{contextmenu:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault()}}})])]),t._v(" "),e("p",[t._v(t._s(t.$t(t.photoText.photoExampleDtl)))])]),t._v(" "),e("div",{staticClass:"example-right-wrap"},[e("div",{staticClass:"example-goods-top"},[e("img",{attrs:{loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALRSURBVFiFzZdPSBRhGIef91tjlQ6CguCli4cMm1IIokMiYUQXQQShS1AG/tuTHTtEB0/Rntws0HMghOBNkAg7KBRoTqEXL14kIcGDqLS7b4dvddd25ptx2YV+p93Z95vnYWfemfcTYkZvjLSA6UYSfYheA66ANttf5Tewg8ommluA/LJsvNuLc16JBHspj4ROgPQDjTF9D0DnyUla/Cm/IgHtGGqirv4FIsPA5Zjgf3OI6nuyx5Pyc3Y/toB6qXYMcwheheB/TohPnkHxp7YiBdQbv0NCPgKtVYEXs0tOB8TPrIQKqJdqJ8GnGsBLJLhX+k+YM3jHUBOGuRrCAVoxzGnHUFOZgL3hqnTNXRE86upfnBNQL+UV7vbyPLkPq2l4/RQaktGAhqStXU3btYESMqxeyjsTsH0e0mrDDyF5CXq7IDPqlmhI2preLrvm2YOwyssFJsY+4aQ/9KSfN4qfu9rCJU7hXW3FY19+hMsi/XpjpMWA6cb1hHv1Ada33RJB8PVtuzY8jWC6DZLoc1VxdAJj0+ESYfCxabvWFUn0iXamvgK33JVY0NtR6CwBrW0XhS4Kt/km2pn6BbTEqQ6UKM3F4AB7pvhKjZGgy1E5HNBmE10UtC7msRgxhWEiXoJuuNO4WjQ08tsAOxXD17ejW9SdHYPKZsXwsWl3i0ZFZdPYGa5C+NFJ9HPCKZBbMJBfBg5CiyYfR/d5mMTLRy78AeSXjZ1edT607PZVN9wlcfe6g6/zsvFuz7ZhTtLAYWDdzCKc/IGlteg+P5VYWrNrZhbDKg8LzOJIpjfH3yAy4VCuXlTT8j3zHEonouzxJIpzhq8OHJ/s8eTp1zMB+Tm7T55BYLeG+F3yDJbuEc49isWf2iKnAzWSKIzl5/cGZe8C8TMr5LhX1cuh+HYcP78nCBSwElNbZI96UA3vjng5RDVN9qgnaFcE//PmtEykRtvzv6RjTYGiRRSXAAAAAElFTkSuQmCC",alt:""}}),t._v(" "),e("div",{staticClass:"example-goods-top-title"},[t._v(t._s(t.$t(t.photoText.badTitle)))])]),t._v(" "),e("div",{staticClass:"example-right"},t._l(t.photoText.bad,(function(n,o){return e("div",{key:"example_bad"+o},[e("div",[e("div",{staticClass:"container"},[e("img",{staticClass:"lzy",staticStyle:{opacity:"1"},attrs:{loading:"lazy",src:t.images.bad[o],width:"90",height:"90",alt:"bad-example"},on:{contextmenu:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault()}}})])]),t._v(" "),e("p",[t._v(t._s(t.$t(n)))])])})),0)])])])])])}),[],!1,null,"9b4e6cfa",null).exports),B=n(119),V=n(61),H=n(51),z=n(291);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(v.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={name:"UploadHead",props:{styles:{type:Array,default:function(){return[]}},genderNumber:{type:Number,default:1}},components:{QuickQueue:B.default,BackArrow:j,ContainerText:$,ExampleLeft:F},computed:G(G(G({},Object(h.c)("user",["isLoggedIn"])),Object(h.e)("user",["cdnHost"])),{},{showCreatBtn:function(){return this.imgUrl&&!this.isLoading&&this.checkSuccesss},taskId:function(){var t;return null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.task}}),data:function(){return{imgUrl:"",uploading:!1,imgLoading:!1,isShowResult:!1,isLoading:!1,checkSuccesss:null,checkReason:"",UPLOAD:new H.a({type:53})}},mounted:function(){},methods:{handleBeforeUpload:function(t){var e=this;return Object(M.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("上传",t),o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=5;break}return n.abrupt("return");case 5:if(r.includes(t.type)){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 8:if(l=t,console.log("大小检测"),!(l.size/1024/1024>5)){n.next=21;break}return n.prev=11,n.next=14,Object(V.a)(l,5242880);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:if(!e.uploading){n.next=23;break}return n.abrupt("return");case 23:return e.uploading=!0,console.log("开始上传"),e.$logEvent("log_actions",{operation:"click_upload_now",behavior_info:"on_ai_profile_generation_page"}),o.startUpload(l).then((function(t){e.uploading=!1,e.imgLoading=!0,e.imgUrl=t,e.scanImage()})).catch((function(t){console.log(t),e.uploading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 28:case"end":return n.stop()}}),n,null,[[11,17]])})))()},handleImageLoad:function(){this.imgLoading=!1},removeImage:function(){this.imgUrl="",this.imgLoading=!1,this.isShowResult=!1,this.checkSuccesss=null,this.checkReason=""},replaceImage:function(){this.removeImage();var input=this.$refs.upload.$el.querySelector('input[type="file"]');input&&input.click()},scanImage:function(){var t=this;this.isLoading=!0;var e={scene:"ai_photo",url:this.imgUrl};Object(z.c)(e).then((function(e){var n;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o;if(t.isLoading=!1,null!=e&&null!==(o=e.data)&&void 0!==o&&o.is_face)t.checkSuccesss=!0;else{var r;t.checkSuccesss=!1;var l=null==e||null===(r=e.data)||void 0===r?void 0:r.error_reason,c={NO_FACE_DETECTED:t.$t("imgNoFace"),FACE_ANGLE_INCORRECT:t.$t("imgWrongAngle"),MULTIPLE_FACES_DETECTED:t.$t("imgMultipleFaces"),FACE_TOO_SMALL:t.$t("imgFaceTooSmall")};t.checkReason=c[l]||t.$t("imgNoFace")}t.$logEvent("log_actions",{operation:"upload_image_detect",behavior_info:"on_ai_profile_generation_page",behavior_info_sub:t.checkSuccesss?"normal":"abnormal"})}})).catch((function(){t.isLoading=!1}))},createTask:function(){var t=this;if(console.log("开始生成",this.styles,this.genderNumber),this.$logEvent("log_actions",{operation:"click_generate_now",behavior_info:"on_ai_profile_generation_page"}),this.isLoggedIn)this.addTask();else{this.$logEvent("log_actions",{operation:"register_popup",behavior_info:"click_generate"});var e="https://".concat(this.cdnHost,"/static/upload/20241128/d41378aa-7629-47b6-b0f1-f4eee435b932.png");this.$EventBus.$emit("openLoginDialog",{callBack:function(){return t.addTask()},backGroundUrl:e||"",autoActive:!0})}},addTask:function(){var t=this,e={gender:this.genderNumber,image:this.imgUrl,styles:this.styles};this.taskId&&(e.task_id=this.taskId),this.$emit("creating",!0),Object(z.d)(e).then((function(e){var n;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o,r,l=null==e||null===(o=e.data)||void 0===o?void 0:o.task_id;if(t.taskId)localStorage.setItem("photoPaySuccessId",l),t.successCallback();else t.$EventBus.$emit("openAIPhotoPayment",l,null===(r=t.styles)||void 0===r?void 0:r.length,(function(){localStorage.setItem("photoPaySuccessId",l),t.successCallback()}))}})).finally((function(){return t.$emit("creating",!1)}))},successCallback:function(){var t=this,e=setTimeout((function(){t.$router.push(t.localePath("/ai-headshot-creations")),clearTimeout(e)}),1e3)},logUpload:function(){this.$logEvent("log_actions",{operation:"click_upload_image",behavior_info:"on_ai_profile_generation_page"})}}},Q=(n(5432),Object(c.a)(Y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-head-page flex w-full"},[e("div",{staticClass:"upload-container"},[e("div",{staticClass:"head-container"},[e("ContainerText",{scopedSlots:t._u([{key:"sub",fn:function(){return[t._v(t._s(t.$t("uploadBestImgSub")))]},proxy:!0}])},[t._v("\n        "+t._s(t.$t("uploadBestImg"))+"\n        ")]),t._v(" "),e("BackArrow",t._g({},t.$listeners))],1),t._v(" "),e("div",{staticClass:"upload-down"},[e("div",{staticClass:"ft-avatar-upload flex_line_c"},[e("div",{staticClass:"ft-avatar-upload-container"},[e("div",{staticClass:"ft-avatar-upload-example"},[e("ExampleLeft",{attrs:{genderType:t.genderNumber}})],1),t._v(" "),e("div",{staticClass:"ft-avatar-upload-operation"},[e("div",{staticClass:"ft-avatar-upload-area"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!imgUrl"}],staticClass:"upload-box"},[[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"upload",staticClass:"image-upload",attrs:{accept:"image/*",action:"/",drag:"","before-upload":t.handleBeforeUpload,"http-request":function(){},"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"ft-avatar-upload-area--title"},[t._v(t._s(t.$t("upload1Photo")))]),t._v(" "),e("div",{staticClass:"ft-avatar-upload-area--desc"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))]),t._v(" "),e("div",{staticClass:"upload-btn ai-avatar-btn flex items-center",on:{click:t.logUpload}},[t._v("\n                      "+t._s(t.$t("uploadPhoto1"))+"\n                    ")])])]],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"},{name:"loading",rawName:"v-loading",value:t.imgUrl&&t.imgLoading,expression:"imgUrl && imgLoading"}],staticClass:"show-content w-full h-full flex flex-col items-center"},[t.imgUrl?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.isShowResult,expression:"!isShowResult"}],attrs:{src:t.imgUrl,alt:""},on:{load:t.handleImageLoad,error:t.handleImageLoad}}):t._e(),t._v(" "),t.isLoading?e("div",{staticClass:"scanner-container"}):t._e(),t._v(" "),[e("span",{directives:[{name:"mytip",rawName:"v-mytip.top",value:t.$t("CreativeCenterPopup33"),expression:"$t('CreativeCenterPopup33')",modifiers:{top:!0}},{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading,expression:"imgUrl && !isLoading"}],staticClass:"el-image-viewer__replace",on:{click:function(e){return e.stopPropagation(),t.replaceImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-task-img-2-img-icon"})]),t._v(" "),e("span",{directives:[{name:"mytip",rawName:"v-mytip.top",value:t.$t("Delete"),expression:"$t('Delete')",modifiers:{top:!0}},{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading,expression:"imgUrl && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-postDelete"})]),t._v(" "),e("el-alert",{directives:[{name:"show",rawName:"v-show",value:!1===t.checkSuccesss&&t.imgUrl,expression:"checkSuccesss === false && imgUrl"}],attrs:{title:t.checkReason,type:"warning",closable:!1,"show-icon":""}})]],2),t._v(" "),e("div",{staticClass:"ft-avatar-upload-tip-txt"},[t._v("\n                "+t._s(t.$t("autoDeleteImage"))+"\n              ")])])])]),t._v(" "),t.showCreatBtn?e("div",{staticClass:"create-btn ai-avatar-btn flex items-center",on:{click:t.createTask}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("StartGenerating"))+"\n        ")]):t._e()])])])])}),[],!1,null,"7b051947",null)),J=Q.exports,X=n(919),K={name:"AIAvatar",components:{HeadTop:o.a,AvatarFrame:r.a,StepOne:w,SelectStyle:E,UploadHead:J,SpinLoading:X.a},computed:{genderNumber:function(){if(!this.showGender)return 2;return{male:1,female:2,other:3}[this.showGender]||2}},data:function(){return{step:1,showGender:"male",allGenderSelected:{},currentSelected:[],isCreateLoading:!1}},mounted:function(){this.initTask()},methods:{initTask:function(){var t,e=this,n=null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.task;n&&(this.step=3,Object(z.g)({task_id:n}).then((function(t){var n;if(1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)){var o,r,l=(null==t||null===(o=t.data)||void 0===o?void 0:o.gender)||2;e.showGender=e.getGenderSring(l);var c=(null==t||null===(r=t.data)||void 0===r?void 0:r.styles)||[];console.log("获取已选中",c,e.showGender),e.currentSelected=c,e.allGenderSelected[e.showGender]=e.currentSelected,e.changeGender(e.showGender),e.generate()}})))},generate:function(){this.showGender&&(this.$refs.SelectStyleRef.getStyle(this.showGender),1===this.step&&this.offsetStep())},changeGender:function(t){this.showGender=t,this.currentSelected=this.allGenderSelected[this.showGender]||[],this.$refs.SelectStyleRef.initSelect(this.currentSelected)},offsetStep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.step=this.step+t},updateSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.showGender;this.currentSelected=t,this.allGenderSelected[e]=t},getGenderSring:function(t){return{1:"male",2:"female",3:"other"}[t]}},head:function(){return{title:this.$t("headshot_home_title"),meta:[{hid:"description",name:"description",content:this.$t("headshot_home_desc")},{hid:"og:title",name:"og:title",content:this.$t("headshot_home_title")},{hid:"og:description",name:"og:description",content:this.$t("headshot_home_desc")}]}}},Z=K,tt=(n(5433),n(5434),Object(c.a)(Z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AIAvatar flex flex-col"},[e("HeadTop"),t._v(" "),e("AvatarFrame",[e("StepOne",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],attrs:{showGender:t.showGender},on:{generate:t.generate,changeGender:t.changeGender}}),t._v(" "),e("SelectStyle",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],ref:"SelectStyleRef",on:{back:function(e){return t.offsetStep(-1)},next:function(e){return t.offsetStep(1)},updateSelect:t.updateSelect}}),t._v(" "),e("UploadHead",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],attrs:{styles:t.currentSelected,genderNumber:t.genderNumber},on:{back:function(e){return t.offsetStep(-1)},creating:function(e){t.isCreateLoading=e}}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCreateLoading,expression:"isCreateLoading"}],staticClass:"loading-part flex flex-col justify-center items-center"},[e("SpinLoading"),t._v(" "),e("div",{staticClass:"waiting"},[t._v(t._s(t.$t("toAlbumLoading")))])],1)],1)}),[],!1,null,"2d5bb4ca",null));e.default=tt.exports},5736:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13);var o=n(3),r=n(2),l=(n(20),n(19),n(6),n(16),n(22),n(24),n(65),n(8),n(4),n(43),n(113),n(21),n(40),n(77),n(7),n(41),n(26),n(141),n(142),n(109),n(1)),c=n(52),d={name:"CTabs",components:{SwipeableList:c.default},props:{tabs:{type:Array,default:function(){return[]}},currentTab:{type:String,default:""},moveLength:{type:Number,default:100}},data:function(){return{}},methods:{changeTab:function(t){this.$emit("changeTab",t)}}},v=(n(5046),n(0)),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-tab"},[e("SwipeableList",{attrs:{top:"0px",iconBntWidth:20,bntTop:"-14px"}},[e("div",{ref:"scrollArea",staticClass:"scroll-box"},t._l(t.tabs,(function(n){return e("div",{key:n.value,staticClass:"item-tab",class:{active:t.currentTab==n.value},on:{click:function(e){return t.changeTab(n)}}},[t._v("\n        "+t._s(t.$t(n.label))+"\n      ")])})),0)])],1)}),[],!1,null,"d471c780",null),h=component.exports;installComponents(component,{SwipeableList:n(52).default});var f={name:"Categorys",components:{SwipeableList:c.default},props:{categorys:{type:Array,default:function(){return[]}},currentCategory:{type:String,default:""},moveLength:{type:Number,default:100}},data:function(){return{}},methods:{changeCategory:function(t){this.$emit("changeCategory",t)}}},m=(n(5047),Object(v.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-category"},[e("SwipeableList",{attrs:{top:"0px",iconBntWidth:20}},[e("div",{ref:"scrollArea",staticClass:"categorys"},t._l(t.categorys,(function(n){return e("div",{key:n.value,staticClass:"item-category",class:{active:t.currentCategory==n.value},on:{click:function(e){return t.changeCategory(n)}}},[t._v("\n        "+t._s(t.$t(n.label))+"\n      ")])})),0)])],1)}),[],!1,null,"f96e63b4",null)),_=m.exports;installComponents(m,{SwipeableList:n(52).default});var y=n(297),w={name:"ExampleDialog",data:function(){return{isShowDialog:!1,correctImgs:["https://image.cdn2.seaart.ai/static/upload/20231226/0f15262a-7083-4e6b-b0f3-960c17d252f9.png","https://image.cdn2.seaart.ai/static/upload/20231226/56cf23ee-9437-4fb7-9a14-ac1748d75c69.png","https://image.cdn2.seaart.ai/static/upload/20231226/f7b59936-ae21-4110-91a3-42f626e1e12b.png","https://image.cdn2.seaart.ai/static/upload/20231226/4be738c1-c7a7-4370-aad3-055ef5073055.png"],incorrectImgs:["https://image.cdn2.seaart.ai/static/upload/20231226/d2feb87d-6575-4120-96f4-ff1b39c69f34.png","https://image.cdn2.seaart.ai/static/upload/20231226/cc7d3b64-ff9a-4263-b132-78639c5c2456.png","https://image.cdn2.seaart.ai/static/upload/20231226/f7f9e378-84ba-4966-bb1e-69648444fd78.png","https://image.cdn2.seaart.ai/static/upload/20231226/011c5a5b-f287-464f-ab43-926d1bae73c4.png"]}},methods:{showDialog:function(){this.isShowDialog=!0},closeDialog:function(){this.isShowDialog=!1}}},C=(n(5048),Object(v.a)(w,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"face-changing-example",attrs:{visible:t.isShowDialog,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"el-icon-close close-icon",on:{click:t.closeDialog}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("MakeHightQuality"))+"\n    ")]),t._v(" "),e("div",{staticClass:"explain"},[e("div",[t._v("1. "+t._s(t.$t("FaceChangingExample1")))]),t._v(" "),e("div",[t._v("2. "+t._s(t.$t("FaceChangingExample2")))]),t._v(" "),e("div",[t._v("3. "+t._s(t.$t("FaceChangingExample3")))])]),t._v(" "),e("div",{staticClass:"correct-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"correct-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography23")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.correctImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)]),t._v(" "),e("div",{staticClass:"incorrect-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"error-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography24")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.incorrectImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)])]),t._v(" "),e("div",{staticClass:"footer"},[e("el-button",{staticClass:"btn",on:{click:t.closeDialog}},[t._v("\n      "+t._s(t.$t("ok_got_it"))+"\n    ")])],1)])}),[],!1,null,"ca3b9012",null)),O=C.exports;installComponents(C,{SvgIcon:n(115).default});var x=n(14),k=n(30),I=(n(32),n(50),n(49),n(823)),j=(n(122),n(10));function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(28);var P=n(832),T=n(172),D=n(35),L=n.n(D),A=n(124),E=n(85),M=n(210),R=(n(18),n(29)),N={props:{info:{type:Object,default:function(){return{}}}},data:function(){return{formList:[]}},computed:{},mounted:function(){this.getMetaInfo()},methods:{isModelItem:function(t){return["CheckpointLoaderSimple","LoraLoader"].includes(t.node_type)},getMetaInfo:function(){var t=this,e=this.info.id;Object(R.getMetaInfo)({id:e}).then((function(e){var n;t.formList=(null==e||null===(n=e.data.meta)||void 0===n?void 0:n.comfyui_inputs)||[]}))},handleJumpDetail:function(){var t=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{}).art_model,e=void 0===t?{}:t;null!=e&&e.id&&window.open("/models/detail/".concat(null==e?void 0:e.id),"_blank")},isWordsLine:function(){return String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).val).length<40},handleCopyAll:function(){var content=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).val||"";content&&(this.$message.success(this.$t("CopySuccess")),Object(j.g)(content))}}},U=N,F=(n(5049),Object(v.a)(U,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"config-databox"},t._l(t.formList,(function(n,o){var r,l,c;return e("div",{key:n.field+o},[t.isModelItem(n)?[e("div",{staticClass:"easy-tooltip-wraper-model-box"},[e("div",{staticClass:"easy-tooltip-wraper-model-box-item",on:{click:function(e){return e.stopPropagation(),t.handleJumpDetail(n)}}},[e("div",{staticClass:"easy-tooltip-wraper-model-box-item-cover"},[e("img",{attrs:{src:null==n||null===(r=n.art_model)||void 0===r||null===(r=r.banner)||void 0===r?void 0:r.url,alt:""}})]),t._v(" "),e("div",{staticClass:"easy-tooltip-wraper-model-box-item-content"},[e("div",{staticClass:"easy-tooltip-model-box-model-type-box"},[e("span",{staticClass:"easy-tooltip-model-box-model-type"},[t._v(t._s(t.$t(null==n||null===(l=n.art_model)||void 0===l?void 0:l.type)))])]),t._v(" "),e("div",{staticClass:"easy-tooltip-model-box-model-name"},[t._v("\n              "+t._s((null==n||null===(c=n.art_model)||void 0===c?void 0:c.name)||"")+"\n            ")])])])])]:t._e(),t._v(" "),t.isModelItem(n)?t._e():[n.val&&t.isWordsLine(n)?e("div",{staticClass:"line-cell flex"},[e("div",{staticClass:"title"},[t._v(t._s(n.field||""))]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(n.val||""))])]):t._e(),t._v(" "),n.val&&!t.isWordsLine(n)?e("div",{staticClass:"lines-cell"},[e("div",{staticClass:"title flex_m"},[e("span",[t._v(" "+t._s(n.field||""))]),t._v(" "),e("span",{staticClass:"iconfont icon-codeCopy1 copy",on:{click:function(e){return e.stopPropagation(),t.handleCopyAll(n)}}})]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(n.val||""))])]):t._e()]],2)})),0)}),[],!1,null,"079e61df",null).exports),B=n(301),V=n(102),H=n(54),z=n(276),W=n(46);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q={name:"historyImg",inject:["top"],provide:function(){return{easyTop:this.top}},components:{AiAppsImageViewer:P.a,SaveTo:A.default,ElImageViewer:T.a,auditDialog:M.a,CreateConfig:F,SelectVideoModelModal:B.default,ShowNsfw:z.default},props:{src:{type:String,required:!0,default:function(){return""}},nsfw:{type:Number,default:2},width:{type:Number,default:100},height:{type:Number,default:100},message:{type:Object,default:function(){return{}}},imgInfo:{type:Object,default:function(){return{}}},operateNumber:{type:Number,default:function(){return 1}},baseSize:{type:String,default:""}},data:function(){return{loading:!0,loaded:!0,error:!1,dialogVisible:!1,retryCount:0,isShowImage:!0,baseImageWidth:200,imageUrl:"",checked:!1,alreadySave:!1,hoverBtnList:[{code:"play",icon:"icon_play",useText:!1,order:3,tips:"play_tips",show:!0,showTypeOptions:[]},{code:"aiGenerateVideo",icon:"a-icon-VideoGeneration",useText:!1,order:6,tips:"ImageToVideoTip",show:!0,showTypeOptions:[]},{code:"download",icon:"modelDownload",useText:!1,order:5,tips:"DownloadImg",show:!0,showTypeOptions:[]},{code:"save",icon:"save",useText:!1,order:5,tips:"Save",show:!0,showTypeOptions:[]},{code:"deleteSingleImg",icon:"moveDeleteTask",useText:!1,order:5,tips:"Delete",show:!0,showTypeOptions:[]},{code:"post",icon:"post-icon2",useText:!1,order:5,tips:"Post",show:!0,showTypeOptions:[]}],bigImageBtns:[{code:"chat",icon:"a-home-top-personl1",useText:!1,order:0,tips:"createChartacterToChat",show:!0,showTypeOptions:[]},{code:"aiGenerateVideo",icon:"a-icon-VideoGeneration",useText:!1,order:6,tips:"ImageToVideoTip",show:!0,showTypeOptions:[]}],isShowHoverMask:!1,isAlreadyFeedback:!1,isVideoPlay:!1}},computed:Y(Y(Y(Y({},Object(l.c)(["isSupportWebp"])),Object(l.c)("user",["userInfo","isCompanyAccount","isLoggedIn"])),Object(l.e)("user",["cdnHost"])),{},{currentImageIndex:function(){var t,e=this;return-1===(t=this.viewImageList.findIndex((function(t){return t.operateNumber===e.operateNumber})))?0:t},viewImageList:function(){var t=this,e=[],n=this.message.components,o=void 0===n?[]:n;return Array.isArray(o)&&o.length&&(e=(L()(o)||[]).map((function(t,e){return t.operateNumber=e+1,t})).filter((function(e){if(t.checkIsShowViewNsfw&&t.enableNsfwMode)return![1,"1"].includes(e.nsfw)&&(null==e?void 0:e.canViewNsfw);var n=[0,1,"0","1"].includes(e.type);return![1,"1"].includes(null==e?void 0:e.nsfw)&&n}))),e},renderUrl:function(){return"https://".concat(this.cdnHost,"/static/upload/20230401/62f66fbd-bc27-44f6-b744-5c5d7e5b18ee.webp")},isShowNsfwBg:function(){var t="";return 1===this.nsfw||(t=this.checkIsShowViewNsfw?this.handleShowNsfwImageUrl():this.isShowImage?this.imageUrl:"",this.renderUrl===t)},isBlur:function(){return 1===this.nsfw||(this.checkIsShowViewNsfw?(null==this||null===(t=this.imgInfo)||void 0===t?void 0:t.is_nsfw_plus)&&!this.imgInfo.canViewNsfw:1===this.nsfw);var t},isShowOperateBtn:function(){return!this.isBlur&&!this.error},isShowHover:function(){var t,e;return!!this.checkIsShowViewNsfw&&((null==this||null===(t=this.imgInfo)||void 0===t?void 0:t.is_nsfw_plus)&&!(null!=this&&null!==(e=this.imgInfo)&&void 0!==e&&e.canViewNsfw))},isNsfwPlus:function(){var t;return(null==this||null===(t=this.imgInfo)||void 0===t?void 0:t.is_nsfw_plus)&&1!==this.nsfw},getImageUrl:function(){return this.isShowImage?this.imageUrl:""},isVideoUrl:function(){var t=this;return[".mp4",".mkv",".webm",".avi",".mov",".flv",".wmv"].some((function(e){return(t.imageUrl||"").toLowerCase().endsWith(e)}))},isImageUrl:function(){return/^https?:\/\/.*\.(jpg|jpeg|png|webp)$/i.test(this.imageUrl)},isGifUrl:function(){var t=this;return[".gif"].some((function(e){return(t.imageUrl||"").toLowerCase().endsWith(e)}))},checkIsShowViewNsfw:function(){var t;return null==this||null===(t=this.userInfo)||void 0===t?void 0:t.enable_nsfw_plus},hoverBtnRenderList:function(){var t=this;return this.hoverBtnList.map((function(e){return e.show=t.isShowBtn(e.code),e})).filter((function(t){return t.show}))},isShowSaveTo:function(){var t,e,n=this.message.components,o=void 0===n?[]:n;return!!o.length&&!(null!==(t=o[this.operateNumber-1])&&void 0!==t&&t.is_saved_personal||null!==(e=o[this.operateNumber-1])&&void 0!==e&&e.alreadySave||this.alreadySave)},isShowBtn:function(){var t={save:[this.isShowSaveTo&&1!==this.nsfw],play:[1!==this.nsfw&&(this.isVideoUrl||this.isImageUrl)],aiGenerateVideo:[1!==this.nsfw&&!this.isVideoUrl&&!this.isGifUrl],post:[1!==this.nsfw]};return function(e){return!!Object.keys(t).includes(e)&&t[e].every((function(t){return!!t}))}},isShowNsfwIcon:function(){return this.checkIsShowViewNsfw&&this.isNsfwPlus},enableNsfwMode:function(){var t;return![2,"2"].includes(null==this||null===(t=this.userInfo)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.nsfw_plus)},checkIsAlreadyFeedback:function(){var t;return null===(t=this.imgInfo)||void 0===t?void 0:t.is_nsfw_appeal}}),mounted:function(){this.$set(this.imgInfo,"canViewNsfw",this.checkIsShowViewNsfw&&this.enableNsfwMode)},beforeDestroy:function(){document.body.style.overflow=""},watch:{src:{handler:function(t){t&&"string"==typeof t&&(this.imageUrl=this.isSupportWebp?Object(j.K)(t,"high"):this.src)},immediate:!0},dialogVisible:function(t){try{document.body.style.overflow=t?"hidden":""}catch(t){document.body.style.overflow=""}}},methods:Y(Y({},Object(l.b)("user",["getAccountInfo"])),{},{handleSaveSuccess:function(){try{this.message.components[this.operateNumber-1].alreadySave=!0}catch(t){}this.alreadySave=!0,this.$emit("saveSuccess")},deleteSingleImg:function(){var t=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){t.$emit("deleteSingleImg",t.operateNumber,t.message)}))},handleShowNsfwImageUrl:function(){var t;return null!=this&&null!==(t=this.imgInfo)&&void 0!==t&&t.is_nsfw_plus&&!this.imgInfo.canViewNsfw?this.renderUrl:this.isShowImage?this.imageUrl:""},onLoad:function(t){this.loading=!1,this.loaded=!0,this.error=!1,this.$EventBus.$emit("needScrollBottom",L()(this.message))},onError:function(){this.loading=!1,this.imageUrl&&(this.imageUrl.includes("_high.webp")||this.imageUrl.includes("_low.webp"))&&(this.imageUrl=this.src),this.reLoadImage(),this.error=!0},reLoadImage:function(){var t=this;this.retryCount>=1||(this.isShowImage=!1,this.retryCount++,this.loading=!0,this.$nextTick((function(){t.isShowImage=!0})))},clickReloadImage:function(){this.retryCount=0,this.error=!1,this.imageUrl=this.isSupportWebp?Object(j.K)(this.src,"high"):this.src,this.reLoadImage()},viewBigImage:function(){1!==this.nsfw&&(this.isShowHover||(this.$logEvent("log_actions",{operation:"click",entity_type:"card",entity_name:"work",entity_id:this.message.id,obj_type:""}),this.dialogVisible=!0))},closeViewBigImage:function(){this.dialogVisible=!1},handleContextMenu:function(t){1===this.nsfw&&t.preventDefault()},downloadImage:function(){Object(j.M)(this.src,this.$t("WorkFlow"))},handleClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.handleLogEvent(t),["deleteSingleImg"].includes(t))this.deleteSingleImg();else if("download"!==t){if("aiGenerateVideo"===t)return console.log("图生视频"),void this.handleAiGenerateVideo();var e;if(["save"].includes(t))null===(e=this.$refs)||void 0===e||null===(e=e.saveToPopover[0])||void 0===e||e.doShow();["post"].includes(t)?this.handlePost():["play"].includes(t)&&this.openPlayModal(this.imgInfo.url,this.imgInfo.index)}else this.downloadImage()},handleLogEvent:function(t){},settingViewNsfw:function(){var t;this.enableNsfwMode||1===(null===(t=this.userInfo)||void 0===t?void 0:t.is_audit)?this.applyNsfw(!1):this.$refs.auditDialog.showDialog()},applyNsfw:function(){var t=this;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var e={};e.nsfw_plus=this.enableNsfwMode?2:1,e.mode=1,e.age_confirm=!0,Object(E.c)(e).then((function(e){var n=(e||{}).status.code;["10000",1e4].includes(void 0===n?"":n)&&(t.$message.success(t.$t(t.enableNsfwMode?"ClosedSuccessfully":"OpenedSuccessfully")),t.getAccountInfo())})).finally((function(){t.$set(t.imgInfo,"canViewNsfw",!t.imgInfo.canViewNsfw)}))}else this.$set(this.imgInfo,"canViewNsfw",!this.imgInfo.canViewNsfw)},handImageBtns:function(){},handleAiGenerateVideo:function(){console.log("图生视频",this.src),this.isLoggedIn?this.handleSelectVideoModel({},this.src):this.$EventBus.$emit("openLoginDialog")},handleSelectVideoModel:function(t,e){console.log("选择视频模型",t,e);var n=Object.assign({},t,{imageToVideoUrl:e});this.$EventBus.$emit("openGenerate",{action:0,taskVersion:"v2",data:{source:n}})},handlePost:function(){var t={taskId:this.message.id,index:this.imgInfo.index,url:this.imgInfo.url},e={types:[H.CONTRIBUTION_TYPE_ENUM.WORK],source:"task",selectedData:[t],remoteParams:{tags:["faceswap"]}};this.$EventBus.$emit("openContribution",e)},openPlayModal:function(t,e){var n=this,o=Object(j.v)(t);this.$EventBus.$emit("showDialog",{name:"HyAssembleModal",data:{doorCode:"video"==o?"aiVideoApp":"aiImageApp",workUrl:t,source:7,taskReferIndex:e,taskId:this.message.id,onAfterAction:function(){n.$EventBus.$emit("hideDialog","HyAssembleModal")}}})},handleImageOperate:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"save"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||this.handleVideoSave(t)},handleVideoSave:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.message,r=o.id,l=void 0===r?"":r,c=o.components,d=t.index||0,Object(V.a)({folder_no:"default",id:l,index:d}).then((function(){e.$message.success(e.$t("SaveSuccess")),e.handleSaveSuccess()})).catch((function(t){console.log("saveFail",t)}));case 3:case"end":return n.stop()}}),n)})))()},handleCopyGenerationData:function(t){this.$emit("copyGenerationData")},updateImageInfo:function(t,e,n,o){this.$emit("updateImageInfo",t,e,n,o)},handleAppeal:function(){var t,e,n=this;if(this.checkIsAlreadyFeedback)this.$message.warning(this.$t("feedbackTips3"));else{var o={appeal:{index:null==this||null===(t=this.imgInfo)||void 0===t?void 0:t.index,task_id:null===(e=this.message)||void 0===e?void 0:e.id}};Object(W.feedbackNSFWImage)(o).then((function(t){var e,o=(null==t||null===(e=t.data)||void 0===e?void 0:e.result)||{};((null==o?void 0:o.success)||!1)&&(n.updateImageInfo(n.message.id,n.imgInfo.index,"is_nsfw_appeal",!0),n.$message.success(n.$t("feedbackTips2")))})).finally((function(){}))}},getUrlType:function(){return this.isVideoUrl?"video":this.isImageUrl?"image":this.isGifUrl?"gif":"other"},handleMouseEnter:function(){var t=this.$refs.videoRef;!this.isVideoUrl||this.isShowNsfwIcon&&this.isShowNsfwBg||1==this.nsfw?this.isVideoPlay=!1:(this.isVideoPlay=!0,null==t||t.play())},handleMouseLeave:function(){this.isVideoPlay=!1;var t=this.$refs.videoRef;t&&(t.currentTime=0,null==t||t.pause())}})},J=Q,X=(n(5050),n(5051),Object(v.a)(J,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-history-img"},[e("div",{staticClass:"attachments-wrap"},[e("div",{staticClass:"message-attachment-media"},[e("div",{staticClass:"image-content"},[e("div",{staticClass:"image-content-wrap",class:[1===t.nsfw?"image-content-wrap-background":""],style:{"max-width":"".concat(t.baseSize),"min-width":"".concat(t.baseSize,"px")}},[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.nsfw,expression:"nsfw === 1"}],staticClass:"nsfw-flag"},[t._v("NSFW")]),t._v(" "),e("div",{staticClass:"image-render-box",on:{mouseover:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isVideoUrl&&!t.isVideoPlay&&!t.isShowNsfwBg,expression:"isVideoUrl && !isVideoPlay && !isShowNsfwBg"}],staticClass:"video-tag"},[e("i",{staticClass:"iconfont icon-icon-tag-creation"})]),t._v(" "),1===t.nsfw?[e("img",{staticClass:"media-attachments-img image-opacity-0",attrs:{src:t.renderUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,contextmenu:function(e){return t.handleContextMenu(e)}}})]:[t.isVideoUrl?t._e():e("img",{staticClass:"media-attachments-img",class:[t.loading?"":"media-attachments-img-show",t.loading?"image-opacity-0":"",t.isShowNsfwBg?"blurBackground":""],attrs:{src:t.getImageUrl,alt:"",decoding:"async",loading:"lazy"},on:{load:t.onLoad,error:t.onError,click:t.viewBigImage,contextmenu:function(e){return t.handleContextMenu(e)}}}),t._v(" "),t.isVideoUrl&&t.getImageUrl?e("video",{ref:"videoRef",class:["media-attachments-video",t.loading?"image-opacity-0":"",t.isShowNsfwBg?"blurBackground":""],style:{borderRadius:"8px"},attrs:{src:t.getImageUrl,loop:"",muted:"",controls:!1},domProps:{muted:!0},on:{canplay:t.onLoad,error:t.onError}}):t._e()],t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading&&1!==t.nsfw,expression:"loading && nsfw !== 1"}],staticClass:"loading-wrapper"},[e("div",{staticClass:"loading-wrapper-inner"},[e("span",{staticClass:"spinner",attrs:{role:"img","aria-label":t.$t("Loading")}},[t._m(0)])])]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.isShowNsfwBg&&t.isShowNsfwIcon,expression:"isShowNsfwBg && isShowNsfwIcon"}],staticClass:"generate-view-nsfw-warning iconfont icon-report"}),t._v(" "),e("ShowNsfw",{attrs:{"is-show-nsfw-icon":t.isShowNsfwIcon,"img-info":t.imgInfo},on:{settingViewNsfw:t.settingViewNsfw,deleteSingleImg:t.deleteSingleImg,handleAppeal:t.handleAppeal}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowSaveTo,expression:"!isShowSaveTo"}],staticClass:"save-status-flag"},[e("i",{staticClass:"iconfont icon-yibaocun"})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOperateBtn&&t.isShowImage&&t.src&&!t.loading||1===t.nsfw,expression:"(isShowOperateBtn && isShowImage && src && !loading) || nsfw === 1"}],staticClass:"image-hover-mask",on:{click:t.viewBigImage}},[e("div",{staticClass:"image-hover-mask-btn-box"},t._l(t.hoverBtnRenderList,(function(n){var o;return e("el-tooltip",{key:n.code,attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"top",content:t.$t(null==n?void 0:n.tips)}},["save"!==n.code?e("span",{staticClass:"image-hover-mask-btn image-hover-mask-btn-single",attrs:{"data-event":"swap-face-history-image","data-type":"detail-button","data-id":n.code,"data-pt":t.getUrlType(),"data-desc":"换脸图片按钮"},on:{click:function(e){return e.stopPropagation(),t.handleClick(n.code)}}},[n.useText?[t._v("\n                      "+t._s(n.text)+"\n                    ")]:e("i",{staticClass:"iconfont image-hover-mask-btn-icon",class:"icon-".concat(n.icon)})],2):t._e(),t._v(" "),"save"===n.code&&t.isShowSaveTo?e("save-to",{ref:"saveToPopover",refInFor:!0,attrs:{type:"artwork",category:!0,title:t.$t("Save"),message:$($({},t.message),{},{img_uris:(null===(o=t.message)||void 0===o?void 0:o.components)||[]}),operateNumber:t.operateNumber,showArrowIcon:!1},on:{saveSuccess:t.handleSaveSuccess}},[e("span",{staticClass:"image-hover-mask-btn image-hover-mask-btn-single",on:{click:function(e){return e.stopPropagation(),t.handleClick("save")}}},[n.useText?[t._v("\n                        "+t._s(n.text)+"\n                      ")]:e("i",{staticClass:"iconfont image-hover-mask-btn-icon",class:"icon-".concat(n.icon)})],2)]):t._e()],1)})),1)])],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.error&&!t.loading,expression:"error && !loading"}],staticClass:"image-load-error"},[e("i",{staticClass:"iconfont icon-image-load-error image-load-error-icon"}),t._v(" "),e("span",{staticClass:"image-load-error-text",on:{click:function(e){return e.stopPropagation(),t.clickReloadImage.apply(null,arguments)}}},[t._v(t._s(t.$t("reloadImage")))])])])])]),t._v(" "),t.dialogVisible?e("AiAppsImageViewer",{staticClass:"work-message-img-viewer",staticStyle:{"z-index":"999"},attrs:{"on-close":t.closeViewBigImage,"initial-index":t.currentImageIndex,"show-operate-btn":!0,hoverBtnRenderList:t.bigImageBtns,message:t.message,"url-list":t.viewImageList,customForm:!0,"is-from-history":!0,"is-show-save-btn":t.isShowSaveTo},on:{onClickBtns:t.handImageBtns,openEasyVideoRecModal:t.handleAiGenerateVideo,handleDeleteSingleImg:t.deleteSingleImg,imageOperate:t.handleImageOperate,copyGenerationData:t.handleCopyGenerationData,updateImageInfo:t.updateImageInfo},scopedSlots:t._u([{key:"customContent",fn:function(){return[e("CreateConfig",{attrs:{info:t.message}})]},proxy:!0}],null,!1,1028422645)}):t._e(),t._v(" "),e("auditDialog",{ref:"auditDialog",on:{confirm:t.applyNsfw}}),t._v(" "),e("SelectVideoModelModal",{ref:"selectVideoModelModal",attrs:{changeBtnColor:!0},on:{confirm:t.handleSelectVideoModel}})],1)}),[function(){var t=this._self._c;return t("span",{staticClass:"inner-MGEKwh wanderingCubes-2A046F"},[t("span",{staticClass:"item-2VgEex"}),t("span",{staticClass:"item-2VgEex"})])}],!1,null,"0eb9101e",null)),K=X.exports;installComponents(X,{ShowNsfw:n(276).default,SaveTo:n(124).default});var Z=n(119),tt=n(319);function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at=n(275),nt={name:"historyItem",components:{historyImg:K,TryCreateMask:tt.default,QuickQueue:Z.default},inject:["top"],props:{message:{type:Object,default:function(){return{}},required:!0},viewMode:{type:String,default:""}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(j.F)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},data:function(){return{defaultAvatar:at,alreadySave:!1,customColor:"#2E9E60"}},computed:it(it(it({},Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["isLoggedIn"])),{},{getComponentsArr:function(){var t,e=(null===(t=this.message)||void 0===t?void 0:t.components)||[],n={4:1,2:2,3:3,0:4,1:5,6:6};return e.sort((function(a,b){var t=String(a.type),e=String(b.type);return n[t]-n[e]}))},computedPercentage:function(){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).process;return void 0===t?0:t}},convertStatusText:function(){var t,e={userCancelDesc:this.$t("userCancel"),sysCancelDesc:this.$t("systemCancel"),sysTimeoutDesc:this.$t("systemTimeoutCancel")};return null!==(t=this.message)&&void 0!==t&&t.status_desc?e[this.message.status_desc]:""},isVip:function(){var t,e;return!!(null!==(t=this.paymentInfo)&&void 0!==t&&t.activeState||null!==(e=this.paymentInfo)&&void 0!==e&&e.liteActiveState)}}),methods:{handleDeleteTask:function(){var t=this;this.isLoggedIn?this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var e=t.message.id;e&&(t.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"delete",entity_id:t.message.id,obj_type:""}),Object(R.deleteTaskRecord)({ids:[e]}).then((function(){t.$message.success(t.$t("deleteSuccess")),t.$emit("deleteTask",e)})))})):this.$EventBus.$emit("openLoginDialog")},updateImageInfo:function(t,e,n,o){this.$emit("updateImageInfo",t,e,n,o)},deleteSingleImg:function(t){var e=this,n=this.message,o=n.id,r=void 0===o?"":o,l=n.components,c=(void 0===l?[]:l)[t-1].index,d=void 0===c?-1:c;Object(V.b)({id:r,index:d}).then((function(){var t;(e.$message({message:e.$t("deleteSuccess"),type:"success"}),e.message.components=e.message.components.filter((function(t){return t.index!==d})),e.message.components.length)||e.$emit("deleteTask",null==e||null===(t=e.message)||void 0===t?void 0:t.id)}))},retryWork:function(){var t=this;"retry"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"retry")&&this.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"retry",entity_id:this.message.id,obj_type:""}),Object(R.getMetaInfo)({id:this.message.id}).then((function(e){var n=e||{},data=n.data,code=n.status.code;[1e4,"10000"].includes(code)&&t.$emit("onRetryWork",data)}))},quickQueueLog:function(t){"exposure"===t&&this.$logEvent("log_actions",{operation:"exposure",entity_type:"modal",entity_name:"try_the_express_queue",entity_id:this.message.id,obj_type:"",page_name:"history_record_page"}),"click"===t&&this.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"try_the_express_queue",entity_id:this.message.id,obj_type:"",page_name:"history_record_page"})},taskInfoLog:function(){this.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"info",entity_id:this.message.id,obj_type:""})}}},ot=nt,st=(n(5052),Object(v.a)(ot,(function(){var t,e,n,o,r,l,c,d,v,h=this,f=h._self._c;return f("div",{staticClass:"c-workflow-history-item"},[f("div",{staticClass:"workflow-history-item-header"},[f("div",{staticClass:"workflow-history-item__title"},[f("img",{staticClass:"workflow-history-item__avatar",attrs:{src:h.defaultAvatar,alt:"Avatar"}}),h._v(" "),f("el-tooltip",{attrs:{effect:"dark",content:h.$t("SeaArtBot"),placement:"top"}},[f("div",{staticClass:"workflow-history-item__title-task-tag"},[f("span",[h._v(h._s(h.$t("SeaArtBot")))])])]),h._v(" "),f("div",{staticClass:"workflow-history-item__btn-box"},[f("i",{directives:[{name:"show",rawName:"v-show",value:[3,"3"].includes(h.message.status),expression:"[3, '3'].includes(message.status)"}],staticClass:"iconfont icon-refresh-icon2",on:{click:function(t){return h.retryWork("retry")}}}),h._v(" "),f("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"},on:{show:h.taskInfoLog}},[f("div",{staticClass:"task-info-tips"},[f("p",[f("span",[h._v(h._s(h.$t("TaskID")))]),f("span",[h._v(h._s(h.message.id))])]),h._v(" "),3===h.message.status?[[1,2,"1","2"].includes(null===(t=h.message)||void 0===t?void 0:t.pub_community)?f("p",[f("span",{staticClass:"task-info-tips-label"},[h._v(h._s(h.$t("status")))]),h._v(" "),f("span",{staticClass:"task-pub-status"},[h._v(h._s([2,"2"].includes(null===(e=h.message)||void 0===e?void 0:e.pub_community)?h.$t("createSetting1"):h.$t("createSetting2")))])]):h._e(),h._v(" "),f("p",[f("span",{staticClass:"task-info-tips-label"},[h._v(h._s(h.$t("expend")))]),h._v(" "),f("span",{staticClass:"task-info-tips-content"},[f("span",[h._v(h._s(h.$t("tempCoins"))+" : "+h._s(null===(n=h.message)||void 0===n||null===(n=n.deduction_detail)||void 0===n?void 0:n.temp_hashrate))]),h._v(" "),f("span",[h._v(h._s(h.$t("calculateCoins"))+" : "+h._s(null===(o=h.message)||void 0===o||null===(o=o.deduction_detail)||void 0===o?void 0:o.hashrate))])])]),h._v(" "),null!==(r=h.message)&&void 0!==r&&null!==(r=r.deduction_detail)&&void 0!==r&&r.history_hashrate?f("p",[f("span",{staticClass:"task-info-tips-label"},[h._v(h._s(h.$t("currentBalance")))]),h._v(" "),f("span",{staticClass:"task-info-tips-content"},[f("span",[h._v(h._s(h.$t("tempCoins"))+" : "+h._s(null===(l=h.message)||void 0===l||null===(l=l.deduction_detail)||void 0===l?void 0:l.after_temp_hashrate))]),h._v(" "),f("span",[h._v(h._s(h.$t("calculateCoins"))+" : "+h._s(null===(c=h.message)||void 0===c||null===(c=c.deduction_detail)||void 0===c?void 0:c.after_hashrate))])])]):h._e()]:h._e()],2),h._v(" "),f("i",{staticClass:"iconfont icon-task_tips task-info-icon",attrs:{slot:"reference"},slot:"reference"})]),h._v(" "),f("span",{staticClass:"el-icon-delete task-info-icon",staticStyle:{"margin-left":"5px"},on:{click:h.handleDeleteTask}})],1)],1)]),h._v(" "),f("div",{staticClass:"workflow-history-item__title-time"},[h.message.create_at?f("span",[h._v(" "+h._s(h._f("formatDateTime")(h.message.create_at))+" ")]):h._e()]),h._v(" "),[2,"2",3,"3"].includes(h.message.status)?f("div",{staticClass:"workflow-history-image-container",class:[1===(null===(d=h.message)||void 0===d||null===(d=d.components)||void 0===d?void 0:d.length)&&"workflow-history-image-container-full"]},[!h.isLoggedIn&&null!==(v=h.message)&&void 0!==v&&null!==(v=v.components)&&void 0!==v&&v.length?f("TryCreateMask",{attrs:{behavior_info:"on_swift_ai_detail_page",reg_source:"swift_ai_detail_page"}}):h._e(),h._v(" "),h._l(h.getComponentsArr,(function(t,e){return f("div",{key:"list-item-img_".concat(e),staticClass:"c-history-box c-history-box-img"},[f("history-img",{attrs:{src:t.url,nsfw:t.nsfw,width:t.width,height:t.height,"operate-number":e+1,"img-info":t,message:h.message},on:{updateImageInfo:h.updateImageInfo,deleteSingleImg:h.deleteSingleImg,saveSuccess:function(t){h.alreadySave=!0},copyGenerationData:function(t){return h.retryWork()}}})],1)}))],2):h._e(),h._v(" "),[1,"1",2,"2",4,"4"].includes(h.message.status)?f("div",{staticClass:"message-process-container"},[[2,"2"].includes(h.message.status)&&h.computedPercentage(h.message)?f("div",{staticClass:"message-process-panel"},[f("el-progress",{attrs:{percentage:h.computedPercentage(h.message),color:h.customColor,"show-text":!1,"stroke-width":7}})],1):h._e(),h._v(" "),f("div",{staticClass:"message-process-operate-box"},[[1,"1"].includes(h.message.status)?[f("div",{staticClass:"process-operate-box-wrap"},[f("span",{staticClass:"process-operate-box-text"},[h._v(h._s(h.$t("TaskStatusWaitingToStart"))+"\n            "),f("span",{staticClass:"message-process-loading-span"})]),h._v(" "),f("div",{staticClass:"process-operate-box-wrap-quick"},[f("QuickQueue",{attrs:{quickOptions:h.message,quickStyle:{height:"26px",fontSize:"12px"}},on:{success:function(t){return h.quickQueueLog("click")},showDialog:function(t){return h.quickQueueLog("exposure")}}})],1)])]:[2,"2"].includes(h.message.status)&&!h.computedPercentage(h.message)?[f("span",{staticClass:"process-operate-box-text"},[h._v(h._s(h.$t("TaskStatusPreparing"))+" "),f("span",{staticClass:"message-process-loading-span"})])]:[4,"4"].includes(h.message.status)?f("span",{staticClass:"process-operate-box-text",staticStyle:{color:"#da373d"}},[h._v(h._s(h.convertStatusText))]):f("span",{staticClass:"process-operate-box-text"},[h._v(h._s(h.$t("youHaveCompleted"))),f("span",{staticClass:"process-operate-box-text-strong",staticStyle:{"margin-left":"5px"}},[h._v(h._s(h.computedPercentage(h.message))+"%")]),h._v(" "),f("span",{staticClass:"message-process-loading-span"})])],2)]):h._e()])}),[],!1,null,"0bf83058",null)),lt=st.exports;installComponents(st,{TryCreateMask:n(319).default,QuickQueue:n(119).default});var ct=n(5053),ut=n(57),pt=n(25),vt=n(302),ht=n(129),gt={name:"workFlowAppDetailHistoryPage",inject:["top"],data:function(){return{list:[],loading:!1,queryParams:{limit:10},hasMore:!0,showScroll:!0,debounceHandleScroll:function(){},dialogVisible:!1,viewImageList:[],activeCard:null,currentImageIndex:0,afterId:""}},mixins:[ct.a],components:{historyItem:lt,taskImageViewer:vt.default,NoData:ht.default},mounted:function(){this.initScrollBar(),this.debounceHandleScroll=Object(pt.debounce)(this.handleScroll,600),this.getList(),this.initEventBus()},destroyed:function(){this.debounceHandleScroll=function(){}},methods:{initEventBus:function(){var t=this;this.$EventBus.$on("deleteHistoriesList",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=function(){var n=t.list.filter((function(t){return t.id!=e}));t.$set(t,"list",n),t.top.changeSelectedId("")};if(n.length){var r,l=t.list.findIndex((function(t){return t.id==e}))||0,c=null===(r=t.list)||void 0===r?void 0:r[l];if(c){var d=c.components.filter((function(t){return!n.includes(t.index)}));d.length?t.$set(t.list[l],"components",d):o()}}else o()}))},viewBigImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.activeCard=t,this.viewImageList=[e],this.dialogVisible=!0},closeViewBigImage:function(){this.dialogVisible=!1,this.viewImageList=[],this.activeCard=null},insertDataToList:function(t){this.list.unshift(t)},handleDeleteTask:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.list.findIndex((function(e){return e.id===t}));-1!==e&&this.list.splice(e,1)},updateImageInfo:function(t,e,n,o){var r,l,c=this.list.find((function(e){return e.id===t}));if(null!=c&&null!==(r=c.components)&&void 0!==r&&r.length){var d=null==c||null===(l=c.components)||void 0===l?void 0:l.find((function(t){return t.index===e}));d&&this.$set(d,n,o)}},scrollToTop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var e=this.$refs.scrollWrapper;if(e){e.scrollTo({top:0,behavior:t})}}catch(t){}},addHeadItem:function(t){var e=this,n=t||[],o=Object(k.a)(n,1)[0];this.list.unshift(o),this.$nextTick((function(){e.$refs.scrollWrapper.scrollTop=0}))},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={limit:20,scene:1,after_id:e||null};this.loading||(this.loading=!0,this.isLoggedIn||(n.g_mode=1),Object(I.a)(n).then((function(e){var o=(null==e?void 0:e.data)||{},r=o.items,l=void 0===r?[]:r,c=o.has_more,d=void 0===c||c,v=o.after_id;if(t.hasMore=d,null!=n&&n.time_from){var h,f,m=Object(ut.objectArrayDeduplicationMerge)(t.list,l||[]),_=null===(h=t.$refs)||void 0===h||null===(h=h.scrollWrapper)||void 0===h?void 0:h.scrollHeight;(f=t.list).push.apply(f,Object(x.a)(m)),_&&m.length&&t.scrollToTop(_,"instant")}else t.list=Array.isArray(l)&&null!=l&&l.length?l:[],t.scrollToTop(0,"instant");t.afterId=v})).finally((function(){t.loading=!1})))},initScrollBar:function(){var t=this;try{this.$refs.scrollWrapper.addEventListener("scroll",this.initScrollBarStatus),this.$once("hook:beforeDestroy",(function(){t.$refs.scrollWrapper.removeEventListener("scroll",t.initScrollBarStatus)}))}catch(t){}},initScrollBarStatus:function(){this.showScroll=!0},handleScroll:function(){try{var t=this.$refs.scrollWrapper;try{if(0===t.scrollTop&&0===t.scrollHeight)return}catch(t){}var e=(null==t?void 0:t.scrollHeight)-t.scrollTop;e-=null==t?void 0:t.clientHeight,t&&e<=30&&this.hasMore&&this.handleLoadMore()}catch(t){}},handleLoadMore:function(){var t=this.list.length?this.list[this.list.length-1]:"";t&&t.create_at;this.getList(afterId)},retryWork:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$emit("onRetryWork",data)}}},ft=gt,mt=(n(5054),Object(v.a)(ft,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-workflow-history-modal"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading&&!this.afterId,expression:"loading && !this.afterId"}],ref:"scrollWrapper",staticClass:"workflow-history-modal__content",on:{scroll:t.debounceHandleScroll}},[t._l(t.list,(function(n){return e("history-item",{key:n.id,attrs:{message:n,viewMode:"list"},on:{deleteTask:t.handleDeleteTask,updateImageInfo:t.updateImageInfo,onRetryWork:t.retryWork}})})),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&t.list.length&&!t.hasMore,expression:"!loading && list.length && !hasMore"}],staticClass:"workflow-history-modal-no-more"},[t._v("\n      "+t._s(t.$t("workFlow35"))+"\n    ")]),t._v(" "),t.list.length?t._e():e("no-data")],2),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading&&this.afterId,expression:"loading && this.afterId"}],staticClass:"loadBox"}),t._v(" "),t.dialogVisible?e("task-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"on-close":t.closeViewBigImage,"initial-index":t.currentImageIndex,"show-operate-btn":!1,message:t.activeCard,"url-list":t.viewImageList}}):t._e()],1)}),[],!1,null,"71b3896c",null)),_t=mt.exports;installComponents(mt,{NoData:n(129).default});var bt=n(181),yt=n(51),wt=n(71),Ct=n(403),Ot=n(61),xt=n(9),kt=n(83);function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var St={name:"AiFaceChanging",mixins:[Ct.videoCoverMixIn],components:{Tabs:h,Categorys:_,HelpTip:y.default,ExampleDialog:O,GenerateResults:_t,HyUploadModal:kt.default},inject:["app"],provide:function(){return{top:this}},data:function(){return{materialSource:[],tabs:[{label:"Video",value:"video"},{label:"Image",value:"image"},{label:"Gif",value:"gif"},{label:"MultipleFaceSwap",value:"multipleImage"}],categorys:[],currentTab:"video",currentCategory:"",uploading:!1,faceUploading:!1,source:{video:{url:"",cover:"",estimated:3},image:{url:"",estimated:3},gif:{url:"",estimated:3},multipleImage:{url:"",estimated:3}},targetFace:"",multipleTargetFace:[],multipleOriginalFace:[],faceArr:[],postParams:{type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""},loopInterval:null,page:1,pageSize:20,total:20,debounceHandleScroll:function(){},templateId:"",requesting:!1,lastTimeTab:"",activeTab:"1",loginUploadOrigin:null,muiltFaceIndex:0}},mounted:function(){var t=this.$route.query,e=t.info,n=t.artWorkNo;e&&(e=JSON.parse(e),this.handleTryLogic(e)),n&&this.getTaskCreateReferData(n);var o=JSON.parse(localStorage.getItem("faceArr"));this.faceArr=o||[],this.getCategory(),this.debounceHandleScroll=Object(pt.debounce)(this.handleScroll,600)},beforeDestroy:function(){clearInterval(this.loopInterval),this.loopInterval=null,this.debounceHandleScroll=null},computed:jt(jt(jt(jt({},Object(l.e)("user",["token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["cdnHostFun","isCompanyAccount","isLoggedIn"])),{},{getExplain:function(){return this.$t(this.isVideo?"ai_face_changing_support_video":"ai_face_changing_support_img")},getSource:function(){return this.source[this.currentTab]},getRightSource:function(){return this.isVideo?this.getSource.cover:this.getSource.url},getTip:function(){var t=this.isVideo?"FaceSwapVideoLimit":"FaceSwapImageLimit";return this.$t(t)},replaceLowWebp:function(){var t=this;return function(e){return Object(j.K)(e,t.$imgL)}},isMultiple:function(){return"multipleImage"===this.currentTab},isVideo:function(){return"video"===this.currentTab},isGif:function(){return"gif"===this.currentTab},getUploaderAccept:function(){return this.isVideo?"video/*":"image/*"},getEstimatedCost:function(){var t=this.getSource,e=t.type,n=t.estimated;return"image"===e?3:n},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},containerStyle:function(){return this.app.bannerTotallyShow?"height: calc(100vh - 168px)":"height: calc(100vh - 64px)"},uploadFileTypes:function(){return["image"]}}),methods:{scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})},getCategory:function(){var t=this;Object(wt.d)({show_area:"ishow"}).then((function(e){1e4==e.status.code&&(e.data.length&&e.data.forEach((function(e){e.label=e[xt.r[t.$i18n.locale]]||e.en||"",e.value=e.id})),t.categorys=e.data,t.setDefaultCategory())}))},setDefaultCategory:function(){var t;this.currentCategory=null===(t=this.categorys)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value,this.getTemplates()},getTemplates:function(){var t=this,e=Math.ceil(this.total/this.pageSize);if(!(this.page>e||this.requesting)){this.requesting=!0;Object(I.c)({category:this.currentCategory,page:this.page,page_size:this.pageSize,template_type:{video:1,image:2,multipleImage:3,gif:4}[this.currentTab]}).then((function(e){var n=e.data,o=n.items,r=n.total;t.total=r;var l=o.map((function(e){var time=e.duration,n=t.formatSecondsToTime(time);return jt(jt({},e),{},{duration:n})}));t.materialSource=t.materialSource.concat(l),t.page++})).finally((function(){t.requesting=!1}))}},formatSecondsToTime:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,": ").concat(n.toString().padStart(2,"0"))},changeTab:function(t){if(!this.requesting&&!this.uploading){var e=t.value;this.clearPageData(),this.currentTab=e,this.setDefaultCategory()}},changeCategory:function(t){this.requesting||(this.clearPageData(),this.currentCategory=t.value,this.getTemplates())},clearPageData:function(){this.page=1,this.total=20,this.materialSource=[]},handleScroll:function(){var t=this.$refs.scrollWrapper;try{t&&t.scrollTop+t.clientHeight>=t.scrollHeight-30&&this.getTemplates()}catch(t){console.log("error",t)}},openExampleDialog:function(){this.$refs.exampleDialog.showDialog()},changeSource:function(t){var e=t.id,n=t.cover,o=t.store_url,r=void 0===o?"":o,l=t.estimated,c=t.face_urls,d=void 0===c?[]:c;this.templateId=e,this.activeTab="1",this.isMultiple?null!=d&&d.length?this.handleMuiltFaceData(d,n):(this.requesting=!0,this.getFaceTask(n)):(this.source[this.currentTab].url=this.isVideo||this.isGif?r:n,this.source[this.currentTab].estimated=l||3,this.isVideo&&(this.source[this.currentTab].cover=n)),!this.targetFace&&this.faceArr.length>0&&(this.targetFace=this.faceArr[0])},clearTargetFace:function(){this.targetFace=""},clearMtpTargetFaces:function(t){this.$set(this.multipleTargetFace,t,"")},clear:function(){this.source={video:{url:"",cover:"",estimated:3},image:{url:"",estimated:3},gif:{url:"",estimated:3},multipleImage:{url:"",estimated:3}},this.targetFace="",this.multipleOriginalFace=[],this.postParams={type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""}},generateThumbnail:function(t){return this.getBestPoster(t,30)},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isVideo?e.uploadVideo(t):e.uploadImage(t);case 1:case"end":return n.stop()}}),n)})))()},uploadVideo:function(t){this.uploading=!0;if(!["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb","video/quicktime"].includes(t.type))return this.uploading=!1,this.$message.warning(this.$t("OnlySupportVideo"));if(t.size>524288e3)return this.$message.warning(this.$t("ExceedingNumberMB",{number:500})),void(this.uploading=!1);this.handleUploadVideo(t)},uploadImage:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.uploading=!0,o=t.size,r=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)||e.isGif){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),e.uploading=!1,n.abrupt("return");case 8:if(!e.isGif||["image/gif"].includes(t.type)){n.next=12;break}return e.$message.error(e.$t("ai_gif_toast")),e.uploading=!1,n.abrupt("return");case 12:if(!(o>r)){n.next=24;break}return n.prev=13,n.next=16,Object(Ot.a)(t,10485760);case 16:t=n.sent,n.next=24;break;case 19:return n.prev=19,n.t0=n.catch(13),console.error("Compression failed:",n.t0),e.uploading=!1,n.abrupt("return");case 24:if(!e.isGif){n.next=26;break}return n.abrupt("return",e.handleUploadVideo(t));case 26:e.handleUploadImage(t);case 27:case"end":return n.stop()}}),n,null,[[13,19]])})))()},handleUploadVideo:function(t){var e=this;new bt.a({file:t,category:this.isGif?54:15}).beforeUpload().then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(o){var r,l,c,d,v,h,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o.url,l=o.info,c=l.frame_count,d=l.resolution,e.templateId="",v=e.getVideoEstimated(c,d)){n.next=5;break}return n.abrupt("return");case 5:return e.isGif?e.source.gif={url:r,cover:"",estimated:v}:e.source.video={url:r,cover:"",estimated:v},h=URL.createObjectURL(t),n.next=9,e.generateThumbnail(h);case 9:f=n.sent,m=f.posterUrl,e.isGif?e.source.video.gif=m:e.source.video.cover=m,URL.revokeObjectURL(h),e.uploading=!1;case 14:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){console.log("outer err",t),e.uploading=!1}))},handleUploadImage:function(t){var e=this;new yt.a({type:16}).startUpload(t).then((function(t){e.templateId="",e.isMultiple?e.getFaceTask(t):(e.source.image={url:t,estimated:3},e.uploading=!1)})).catch((function(t){console.log(e.$t("uploadError"),t),e.uploading=!1}))},handleFaceBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.faceUploading=!0,o=t.size,r=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=8;break}return e.$message.error(e.$t("AllowImageFiles")),e.faceUploading=!1,n.abrupt("return");case 8:if(!(o>r)){n.next=20;break}return n.prev=9,n.next=12,Object(Ot.a)(t,10485760);case 12:t=n.sent,n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(9),console.error("Compression failed:",n.t0),e.faceUploading=!1,n.abrupt("return");case 20:e.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"generate",obj_type:"1"}),e.handleUploadFace(t);case 22:case"end":return n.stop()}}),n,null,[[9,15]])})))()},handleMtpFaceUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.file,r=t.data,l=r.index,c=r.item,e.token){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(e.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"generate",obj_type:"1"}),e.$set(c,"loading",!0),d=o.size,v=10485760,["image/jpeg","image/png","image/jpg","image/webp"].includes(o.type)){n.next=13;break}return e.$message.error(e.$t("AllowImageFiles")),e.$set(c,"loading",!1),n.abrupt("return");case 13:if(!(d>v)){n.next=25;break}return n.prev=14,n.next=17,Object(Ot.a)(o,10485760);case 17:o=n.sent,n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(14),console.error("Compression failed:",n.t0),e.$set(c,"loading",!1),n.abrupt("return");case 25:new yt.a({type:16}).startUpload(o).then((function(t){e.handleUploadMuiltFaceData(t,l)})).finally((function(t){e.$set(c,"loading",!1)}));case 27:case"end":return n.stop()}}),n,null,[[14,20]])})))()},handleUploadFace:function(t){var e=this;new yt.a({type:16}).startUpload(t).then((function(t){e.handleUploadFaceData(t)})).finally((function(){e.faceUploading=!1}))},handleUploadFaceData:function(t){var e=localStorage.getItem("faceArr");(e=e?JSON.parse(e):[]).length>=10?this.$message.warning(this.$t("FaceLimit")):(e.unshift(t),this.faceArr=e,localStorage.setItem("faceArr",JSON.stringify(e)),!this.getSource.url&&this.targetFace||(this.targetFace=t))},handleUploadMuiltFaceData:function(t,e){this.$set(this.multipleTargetFace,e,t)},handleMuiltFaceData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;this.source.multipleImage={url:e,estimated:null!=t&&t.length?3+2*(t.length-1):0};var n=this.multipleTargetFace.filter((function(t){return!!t}));this.multipleOriginalFace=[],this.multipleTargetFace=[];for(var i=0;i<t.length;i++){var o=t[i];this.multipleOriginalFace.push({url:o,loading:!1}),this.multipleTargetFace.push(n[i]||"")}},handleSelectedFace:function(t){this.targetFace=t},handleDeleteFace:function(t){var e=this;this.$confirm(this.$t("DeleteFace"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){var n=JSON.parse(localStorage.getItem("faceArr"));n=n.filter((function(e){return e!=t})),e.faceArr=n;var o=JSON.stringify(n);localStorage.setItem("faceArr",o)})).catch((function(t){console.log("err",t)}))},handleGenerate:function(){var t,e,n=this;if(this.token)if(this.getSource.url){var o,r=Object(j.H)(this.getSource.url)||(null===(t=this.getSource.url)||void 0===t?void 0:t.includes(".gif"));if(this.isMultiple){if(this.multipleTargetFace.every((function(t){return!t})))return this.$message.warning(this.$t("first_pls_add_face"));this.multipleTargetFace.forEach((function(t){!t&&(t="")})),o={action:22,source:17100,template_id:this.templateId,meta:{exchange_face:{action:2,target_uri:this.getSource.url,source_uris:this.multipleTargetFace}}}}else{if(!this.targetFace)return void this.$message.warning(this.$t("PlsAddFace"));o={action:r?26:22,source:17100,template_id:this.templateId,meta:{exchange_face:{target_uri:this.getSource.url,source_uri:this.targetFace,face_distance:1.5}}}}this.isGif&&null!==(e=this.getSource.url)&&void 0!==e&&e.includes(".gif")&&(o.meta.exchange_face.action=3),Object(R.createTask)(o).then((function(t){var e=t.data.id;e&&(n.$refs.generateResultsRef.addHeadItem([{id:e,process:0,components:[],expiration_time:0,deduction_detail:{},create_at:0,creativity:{},status_desc:"waiting",status:1,speed_type:n.isVip?2:1}]),n.activeTab="2"),n.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:"generate",entity_id:e,obj_type:"1"})})).catch((function(t){console.log("err",t)}))}else this.$message.warning(this.$t("PlsAddMaterial"));else this.$EventBus.$emit("openLoginDialog")},handleTryLogic:function(t){var e=this,n=t.url,o=t.cover,r=t.template_id;this.templateId=r,Object(R.getPreVideoInfo)({url:n}).then((function(t){var r=t.data,l=r.frame_count,c=r.resolution,d=e.getVideoEstimated(l,c);d&&(e.source.video={url:n,cover:o,estimated:d})}))},getVideoEstimated:function(t,e){var n=3;if(!(e>1080))return n=e>720?.2*t:.1*t,n=Number(n.toFixed(2));this.$message.warning(this.$t(this.isGif?"ai_gif_definition":"VideoClarityLimit"))},getFaceTask:function(t){var e=this,n={action:22,source:17100,template_id:this.templateId,meta:{exchange_face:{action:1,target_uri:t}}};Object(R.createTask)(n).then((function(n){var o=n.data.id;o&&e.loopGetFaceResult(o,t)}))},loopGetFaceResult:function(t,e){var n=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(R.batchFetchTaskProcess)({task_ids:[t]});case 3:if(r=o.sent,null!=(l=r.data.items)&&l[0]){o.next=7;break}return o.abrupt("return");case 7:if(c=l[0],c.process,d=c.status_desc,v=c.img_uris,2!=c.reason){o.next=15;break}return n.$message.warning(n.$t("NotFaceError")),n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.clear(),o.abrupt("return");case 15:v=v||[],o.t0=d,o.next="finish"===o.t0?19:"sysCancelDesc"===o.t0?24:"sysTimeoutDesc"===o.t0?30:36;break;case 19:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.handleMuiltFaceData(v.map((function(t){return t.url})),e),o.abrupt("break",37);case 24:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.$message.warning(n.$t("systemCancel")),n.clear(),o.abrupt("break",37);case 30:return n.uploading=!1,n.requesting=!1,clearInterval(n.loopInterval),n.$message.warning(n.$t("systemTimeoutCancel")),n.clear(),o.abrupt("break",37);case 36:return o.abrupt("break",37);case 37:o.next=42;break;case 39:o.prev=39,o.t1=o.catch(0),console.log("error",o.t1);case 42:case"end":return o.stop()}}),o,null,[[0,39]])}))),3e3)},changeRightTab:function(t){this.activeTab=t},getTaskCreateReferData:function(t){var e=this;Object(I.b)({art_work_no:t,source:4}).then((function(t){var n=t.data,o=n.template_id,meta=n.meta;e.retryWork({template_id:o,meta:meta})}))},retryWork:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.activeTab="1",this.clear();var t=data.meta.exchange_face,e=t.target_uri,n=t.source_uris,o=void 0===n?[]:n,r=t.source_uri,l=t.target_cover_uri,c=data.template_id;this.templateId=c,this.currentTab="image";if([".mp4",".mkv",".webm",".avi",".mov",".flv",".wmv"].some((function(t){return(e||"").toLowerCase().endsWith(t)}))&&(this.currentTab="video"),(e||"").toLowerCase().endsWith(".gif")&&(this.currentTab="gif"),null!=o&&o.length)return this.requesting=!0,this.currentTab="multipleImage",this.source[this.currentTab].url=e,void this.getFaceTask(l);this.source[this.currentTab].url=this.isVideo||this.isGif?e:l,this.source[this.currentTab].cover=l;var d={action:this.isVideo||this.isGif?26:22,source:17100,template_id:this.templateId,meta:{exchange_face:{target_uri:e,source_uri:r,face_distance:1.5}}};this.getEstimatedCostData(d)},getEstimatedCostData:function(t){var e=this;Object(W.easyEstimatedConsumption)(t).then((function(t){var n=t.data.calculate_coins;e.source[e.currentTab].estimated=n||3}))},openLoginUploadModal:function(t,e){var n;this.loginUploadOrigin=t,"muiltFace"==t&&(this.muiltFaceIndex=e),null===(n=this.$refs)||void 0===n||null===(n=n.hyUploadMoaldRef)||void 0===n||n.openModal()},uploadConfirm:function(t){var e,n=null==t||null===(e=t[0])||void 0===e?void 0:e.url;switch(this.loginUploadOrigin){case"face":this.handleUploadFaceData(n);break;case"muiltFace":this.handleUploadMuiltFaceData(n,this.muiltFaceIndex)}this.loginUploadOrigin=""}},head:function(){return{title:this.$t("AIFaceTitle"),meta:[{hid:"description",name:"description",content:this.$t("AIFaceDesc")},{hid:"keywords",name:"keywords",content:this.$t("AIFaceKeyword")},{hid:"og:title",name:"og:title",content:this.$t("AIFaceTitle")},{hid:"og:description",name:"og:description",content:this.$t("AIFaceDesc")}],script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_face_changing"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}}},$t=St,Pt=(n(5055),Object(v.a)($t,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-face-changing"},[e("div",{staticClass:"face-swap",style:t.containerStyle},[e("div",{staticClass:"left-area"},[e("Tabs",{class:{"not-allow":t.uploading},attrs:{tabs:t.tabs,currentTab:t.currentTab},on:{changeTab:t.changeTab}}),t._v(" "),e("Categorys",{attrs:{categorys:t.categorys,currentCategory:t.currentCategory},on:{changeCategory:t.changeCategory}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],ref:"scrollWrapper",staticClass:"content-container",on:{scroll:t.debounceHandleScroll}},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploader",staticClass:"left-uploader item-box",attrs:{action:"#","before-upload":t.handleBeforeUpload,accept:t.getUploaderAccept,"show-file-list":!1,"http-request":function(){}}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"tip"},[e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography19")))]),t._v(" "),e("HelpTip",{staticClass:"help",attrs:{color:"rgb(163, 166, 173)",content:t.getTip}})],1)])]),t._v(" "),t._l(t.materialSource,(function(n,o){return e("div",{key:o,staticClass:"item-box",on:{click:function(e){return t.changeSource(n)}}},[t.isVideo?e("div",{staticClass:"duration"},[t._v(t._s(n.duration))]):t._e(),t._v(" "),e("div",{staticClass:"author"},[t._v(t._s(t.$t("by"))+" "+t._s(n.author))]),t._v(" "),e("img",{staticClass:"material",attrs:{src:t.replaceLowWebp(n.cover),alt:"image"}})])}))],2)],1),t._v(" "),e("div",{staticClass:"middle-area"},[e("img",{staticClass:"icon",attrs:{src:n(1427),alt:"face changing"}}),t._v(" "),e("h1",{staticClass:"title"},[t._v(t._s(t.$t("ai_face_changing")))]),t._v(" "),e("div",{staticClass:"explain"},[e("span",{staticClass:"words"},[t._v(t._s(t.getExplain))]),t._v(" "),t.isMultiple?t._e():e("HelpTip",{staticClass:"help",attrs:{color:"rgb(105, 103, 110)",content:t.$t("FaceChangingSuggestion")}})],1),t._v(" "),e("div",{staticClass:"preview-box"},[e("div",{staticClass:"before-generate"},[t.getSource.url?[e("div",{staticClass:"close-btn",on:{click:function(e){return t.clear()}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),t.isVideo?e("video",{staticClass:"video-preview",attrs:{src:t.getSource.url,autoplay:"",loop:"",controls:""}}):e("img",{staticClass:"image-preview",attrs:{src:t.getSource.url,alt:"img"}})]:e("span",{staticClass:"empty",domProps:{innerHTML:t._s(t.$t("PlsSelectTemplate"))}})],2)])]),t._v(" "),e("div",{staticClass:"right-area"},[e("div",{staticClass:"title"},[e("span",{staticClass:"words",class:{active:"1"===t.activeTab},on:{click:function(e){return t.changeRightTab("1")}}},[t._v(t._s(t.$t("FaceChanging")))]),t._v(" "),t.isMultiple?t._e():e("i",{staticClass:"iconfont icon-help-icon",on:{click:t.openExampleDialog}}),t._v(" "),e("span",{staticClass:"words last",class:{active:"2"===t.activeTab},on:{click:function(e){return t.changeRightTab("2")}}},[t._v(t._s(t.$t("workFlow11")))])]),t._v(" "),e("div",{staticClass:"content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.activeTab,expression:"activeTab === '1'"}],staticClass:"process-face-container"},[t.isMultiple?e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("Process")))]),t._v(" "),e("div",{staticClass:"multiple-avatar-container"},t._l(t.multipleOriginalFace,(function(n,o){return e("div",{key:"face_".concat(o),staticClass:"avatar-container"},[e("div",{staticClass:"original-box"},[n.url?e("img",{staticClass:"source-image",attrs:{src:n.url,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"target-box"},[t.multipleTargetFace[o]?[e("div",{staticClass:"delete-face",on:{click:function(e){return t.clearMtpTargetFaces(o)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"target-face",attrs:{src:t.multipleTargetFace[o],alt:"target face"}})]:[t.isLoggedIn?e("div",{staticClass:"face-uploader item-face",on:{click:function(e){return t.openLoginUploadModal("muiltFace",o)}}},[e("div",{staticClass:"el-upload el-upload--text"},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])])]):e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"item.loading"}],staticClass:"face-uploader item-face",attrs:{action:"/",accept:"image/*","show-file-list":!1,data:{item:n,index:o},"http-request":t.handleMtpFaceUpload}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])])]],2)])})),0)]):[e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("Process")))]),t._v(" "),e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"original-box"},[t.getRightSource?e("img",{staticClass:"source-image",attrs:{src:t.getRightSource,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"target-box",class:{active:t.targetFace}},[t.targetFace?e("div",{staticClass:"delete-face",on:{click:t.clearTargetFace}},[e("i",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),t.targetFace?e("img",{staticClass:"target-face",attrs:{src:t.targetFace,alt:"target face"}}):t._e()])])]),t._v(" "),e("div",{staticClass:"select-face"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("SelectFace")))]),t._v(" "),e("div",{staticClass:"face-box"},[t.isLoggedIn?e("div",{staticClass:"face-uploader item-face",on:{click:function(e){return t.openLoginUploadModal("face")}}},[e("div",{staticClass:"el-upload el-upload--text"},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])])]):e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.faceUploading,expression:"faceUploading"}],staticClass:"face-uploader item-face",attrs:{action:"/",accept:"image/*","show-file-list":!1,"before-upload":t.handleFaceBeforeUpload}},[e("div",{staticClass:"uploader"},[e("i",{staticClass:"el-icon-plus"})])]),t._v(" "),t._l(t.faceArr,(function(n,o){return e("div",{key:o,staticClass:"item-face",on:{click:function(e){return t.handleSelectedFace(n)}}},[e("div",{staticClass:"delete-face",on:{click:function(e){return e.stopPropagation(),t.handleDeleteFace(n)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"face-image",attrs:{src:n,alt:"face image"}})])}))],2)])]],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.activeTab,expression:"activeTab === '2'"}],staticClass:"history"},[e("generate-results",{ref:"generateResultsRef",on:{onRetryWork:t.retryWork}})],1)]),t._v(" "),"1"===t.activeTab?e("div",{staticClass:"generate-box"},[e("div",{staticClass:"generate",on:{click:t.handleGenerate}},[t._v("\n          "+t._s(t.$t("Generate"))+"\n          "),t.getSource.url&&!t.isCompanyAccount?e("span",{staticClass:"estimated-cost"},[t._v("\n            ("+t._s(t.$t("estimatedCost"))+": "+t._s(t.getEstimatedCost)+")\n          ")]):t._e()])]):t._e()])]),t._v(" "),e("ExampleDialog",{ref:"exampleDialog"}),t._v(" "),e("HyUploadModal",{ref:"hyUploadMoaldRef",attrs:{"is-need-login":!1,category:16,isSingleSelect:"",fileTypes:t.uploadFileTypes},on:{onConfirm:t.uploadConfirm}})],1)}),[],!1,null,"555530ab",null));e.default=Pt.exports;installComponents(Pt,{HelpTip:n(297).default})},5741:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=(n(16),n(19),n(24),n(685)),l={inject:["top"],props:{lowImg:{type:String,default:""},highImg:{type:String,default:""},isDetail:{type:Boolean,default:!0},radius:{type:Number,default:0},showRange:{type:Boolean,default:!0}},data:function(){return{sliderWidth:50,dragging:!1,scale:1,translate:{x:0,y:0,x1:0,y1:0}}},mounted:function(){this.top.eventFn.initImagePoin=this.initImagePoin},methods:{handleWheel:function(t){if(this.isDetail){var e=t.deltaY,n=e>0,o=e<0,r=this.scale;t.preventDefault(),n&&(this.scale=r>.4?r-.1:.4),o&&(this.scale=r<3?r+.1:3)}},startDrag:function(t){if(this.isDetail&&"range"!==t.target.getAttribute("data-type")){var e=this.translate,n=e.x,o=e.y;this.dragging=!0,this.translate.x1=t.clientX-n,this.translate.y1=t.clientY-o,document.addEventListener("mousemove",this.dragIng)}},dragIng:function(t){var e=this.translate,n=e.x1,o=e.y1;this.dragging&&(this.translate.x=t.clientX-n,this.translate.y=t.clientY-o)},endDrag:function(){this.dragging=!1,document.removeEventListener("mousemove",this.dragIng)},initImagePoin:function(){this.scale=1,this.translate.x=0,this.translate.y=0,this.translate.x1=0,this.translate.y1=0,this.sliderWidth=100,document.querySelector("#afterImageId").style.opacity=0},highImgloadEnd:function(){this.sliderWidth=50,document.querySelector("#afterImageId").style.opacity=1}}},c=(n(5075),n(0)),d=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"diff-img-box",class:t.isDetail&&"has-detail",on:{wheel:t.handleWheel}},[e("div",{staticClass:"low-img-box flex_c_m",style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{src:t.lowImg}})]),t._v(" "),e("div",{staticClass:"high-img-box flex_c_m"},[e("img",{staticClass:"img-item",style:{transform:"scale(".concat(t.scale,") translate(").concat(t.translate.x,"px, ").concat(t.translate.y,"px)"),borderRadius:t.radius+"px"},attrs:{id:"afterImageId",src:t.highImg},on:{load:t.highImgloadEnd,error:t.highImgloadEnd}})]),t._v(" "),e("div",{staticClass:"step-box",on:{mousedown:t.startDrag,mouseup:t.endDrag}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"}],staticClass:"guide-line",style:"left: calc(".concat(t.sliderWidth,"% - 1px);")}),t._v(" "),e("input",{directives:[{name:"show",rawName:"v-show",value:t.showRange,expression:"showRange"},{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{"data-type":"range",type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{__r:function(e){t.sliderWidth=e.target.value}}})])])}),[],!1,null,"445782e5",null).exports,v=(n(26),n(32),n(50),n(22),n(18),n(3)),h=(n(20),n(21),n(51)),f=n(57),m=n(1),_=n(61);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var w={props:{type:{type:String,default:"big"}},data:function(){return{imgUrl:"",uploading:!1,UPLOAD:new h.a({type:19}),realWidth:0,realHeight:0,style:{}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(m.e)("user",["token"])),methods:{handleUploadClick:function(){this.$refs.uploadRef.$el.querySelector('input[type="file"]').click()},handleBeforeUpload:function(t){var e=this;return Object(v.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=5;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 5:if(!(r=t)||r.size){n.next=8;break}return n.abrupt("return",!1);case 8:return n.next=10,e.checkImageSize(t);case 10:if("boundary"!==(l=n.sent)){n.next=14;break}return e.$message.warning(e.$t("HD_Erorr_Minimum")),n.abrupt("return",!1);case 14:if(l){n.next=17;break}return e.$message.warning(e.$t("HD_Erorr")),n.abrupt("return",!1);case 17:if(!(r.size/1024/1024>10)){n.next=28;break}return n.prev=18,n.next=21,Object(_.a)(r,10485760);case 21:r=n.sent,n.next=28;break;case 24:return n.prev=24,n.t0=n.catch(18),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 28:if(!e.uploading){n.next=30;break}return n.abrupt("return");case 30:return e.uploading=!0,o.startUpload(r).then((function(t){e.uploading=!1,e.imgUrl=t,e.$emit("onSuccess",{url:e.imgUrl})})).catch((function(t){e.uploading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 33:case"end":return n.stop()}}),n,null,[[18,24]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;(t<512||o<512)&&n("boundary");var r=Object(f.resizeImage)(t,o,512);e.$set(e,"realWidth",img.naturalWidth),e.$set(e,"realHeight",img.naturalHeight),e.$set(e,"style",{width:"".concat(r.width,"px"),height:"".concat(r.height,"px")}),n(3072>t&&3072>o)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleBeforeUploadEmpty:function(){}}},C=w,O=(n(5076),Object(c.a)(C,(function(){var t=this,e=t._self._c;return e("div",{class:["big"===t.type?"upload-box":"min-upload-box"]},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploadRef",attrs:{drag:"",action:"#","before-upload":t.handleBeforeUpload,disabled:t.uploading,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},["big"===t.type?[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n          "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n        ")])])]:t._e(),t._v(" "),"min"===t.type?[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n          "+t._s(t.$t("TaskUploadImageClickUploadTips"))+"\n        ")])])]:t._e()],2)],1)}),[],!1,null,"57456a66",null)),x=O.exports,k=n(95),I=n(35),j=n.n(I);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={inject:["top"],components:{UploadImg:x},props:{lowImg:{type:String,default:""},repairing:{type:Boolean,default:!1}},data:function(){return{numList:[{num:"x2",val:2,active:!0},{num:"x4",val:4,active:!1},{num:"x6",val:6,active:!1},{num:"x8",val:8,active:!1}],formData:{image_url:"",hd_scale:2,prompt:"",width:0,height:0,creativity:0,fractality:0,hdr:0,resemblance:0,engine:"",style:""},sliderData:[{label:"parameter1",tips:"parameter1_tips",key:"creativity",value:.4,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter2",tips:"parameter2_tips",key:"hdr",value:.5,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter3",tips:"parameter3_tips",key:"resemblance",value:.5,step:.1,min:.1,max:1,handle:function(){}},{label:"parameter4",tips:"parameter4_tips",key:"fractality",value:.6,step:.1,min:.1,max:1,handle:this.getEstimate}],styleList:[],engineList:[],estimate:0,setting:!0}},watch:{},computed:$({imgRate:function(){var t=this.formData,e=t.width,n=t.height,o=t.hd_scale,r=this.handleAutoSize(e*o,n*o);return r.x+"x"+r.y}},Object(m.c)("user",["isLoggedIn"])),methods:{handleAutoSize:function(t,e){var n=t,o=e;if(n/o>0&&n>1e4){var r=n/1e4;n=1e4,o=parseInt(o/r)}else if(o>1e4){var l=o/1e4;o=1e4,n=parseInt(n/l)}return{x:n,y:o}},fileSuccess:function(t){var e=this,n=t.url;Object(r.a)(n,(function(t){var o=t.width,r=t.height;e.formData.image_url=n,e.formData.width=o,e.formData.height=r,e.formData.hd_scale=2,e.formData.prompt="",e.changeScale(2),e.getEstimate(),e.$emit("onFileSuccess",{url:n}),e.$logEvent("log_actions",{operation:"click_upload_image",behavior_info:"on_hd_restoration_detail_page"})}))},changePrompt:function(){this.$logEvent("log_actions",{operation:"input_prompt",behavior_info:"on_hd_restoration_detail_page"})},changeScaleFn:function(t){this.$logEvent("log_actions",{operation:"click_adjust_magnification",behavior_info:"on_hd_restoration_detail_page"}),this.changeScale(t)},changeScale:function(t){var e=this.numList.findIndex((function(e){return e.val===t}));this.formData.hd_scale=t,this.numList=this.numList.map((function(t){return $($({},t),{},{active:!1})})),this.numList[e].active=!0,this.getEstimate()},submitForm:function(){if(!this.repairing)if(this.isLoggedIn){var t=j()(this.formData);t.style=Number(t.style)||0,t.engine=Number(t.engine),this.sliderData.forEach((function(e){t[e.key]=e.value})),this.$emit("onSubmit",t)}else this.$EventBus.$emit("openLoginDialog")},initForm:function(t){var e,n,o=this,r=t.lowImg,l=t.hdScale,c=t.prompt,d=t.width,v=t.height,h=t.defFormData;this.formData.image_url=r,this.formData.hd_scale=l,this.formData.prompt=c,this.formData.width=d,this.formData.height=v;var f=function(t){o.sliderData.forEach((function(e){if(e.key===t){var n=h[t],o=n.max,r=n.min,l=n.default_val,c=n.type,d=n.step;e.max=o,e.min=r,e.value=l,e.type=c,e.step=d}}))};for(var m in h)f(m);this.engineList=null===(e=h.engine)||void 0===e||null===(e=e.enums)||void 0===e?void 0:e.map((function(t){return{label:t.name,value:t.value}})),this.formData.engine=h.engine.default_val,this.styleList=null===(n=h.style)||void 0===n||null===(n=n.enums)||void 0===n?void 0:n.map((function(t){return{label:t.name,value:t.value}})),this.formData.style=h.style.default_val,this.changeScale(l),console.log(this.formData,"data===")},resetForm:function(){this.formData.image_url="",this.formData.hd_scale=2,this.formData.prompt="",this.formData.width=0,this.formData.height=0,this.formData.fractality=1,this.formData.hdr=1,this.formData.resemblance=1,this.formData.fractality=1,this.formData.style="",this.formData.engine="",this.changeScale(2)},delImg:function(){this.formData.image_url="",this.formData.width=0,this.formData.height=0,this.formData.hd_scale=2,this.formData.prompt="",this.changeScale(2),this.top.eventFn.initImagePoin()},getEstimate:function(){var t,e=this,n=this.formData,o=n.width,r=n.height,l={action:17,meta:{width:o,height:r,swift_tool_uhd_meta:{hd_scale:n.hd_scale,fractality:(null===(t=this.sliderData.find((function(t){return"fractality"===t.key})))||void 0===t?void 0:t.value)||.5}}};o&&r?Object(k.r)(l).then((function(t){e.estimate=t.data.calculate_coins})):this.estimate=0},handleCollapse:function(){this.setting&&this.$logEvent("log_actions",{operation:"click_expand_settings",behavior_info:"on_hd_restoration_page"}),this.setting=!this.setting},handleStyle:function(t){t&&this.$logEvent("log_actions",{operation:"click_expand_template",behavior_info:"on_hd_restoration_page"})}}},T=(n(5077),Object(c.a)(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[""===t.formData.image_url?[e("upload-img",{attrs:{type:"min"},on:{onSuccess:t.fileSuccess}})]:t._e(),t._v(" "),""!==t.formData.image_url?[e("div",{staticClass:"img-thumbnail"},[e("el-image",{staticClass:"img-item",attrs:{src:t.formData.image_url}}),t._v(" "),e("div",{staticClass:"close-img flex_c_m",on:{click:t.delImg}},[e("i",{staticClass:"el-icon-close"})])],1)]:t._e(),t._v(" "),e("div",{staticClass:"magnification-box"},[e("div",{staticClass:"title-box flex_m"},[e("div",{staticClass:"left flex_m"},[e("i",{staticClass:"el-icon-zoom-in"}),t._v(" "),e("span",[t._v(t._s(t.$t("magnification")))])])]),t._v(" "),e("div",{staticClass:"num-list flex"},t._l(t.numList,(function(n,i){return e("div",{key:i,staticClass:"item flex_c_m",class:n.active&&"act-item",attrs:{"data-event":"ai_tools_hd_repair_magnification_item","data-id":n.num},on:{click:function(e){return t.changeScaleFn(n.val)}}},[t._v("\n        "+t._s(n.num)+"\n      ")])})),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.formData.width>0,expression:"formData.width > 0"}],staticClass:"text-info"},[e("span",[t._v(t._s(t.$t("theImageSize")))]),t._v(" "),e("b",[t._v(t._s(t.imgRate))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("HD_Tips"),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1)]),t._v(" "),e("div",{staticClass:"up-style"},[e("div",{staticClass:"left"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("up_style")))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t("newVaeTip"),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1),t._v(" "),e("div",{staticClass:"right"},[e("el-select",{staticClass:"custom-select-transparent",attrs:{"popper-append-to-body":!0,"popper-class":"custom-select","data-event":"ai_tools_hd_repair_style_item","data-id":t.formData.value},on:{"visible-change":t.handleStyle},model:{value:t.formData.style,callback:function(e){t.$set(t.formData,"style",e)},expression:"formData.style"}},t._l(t.styleList,(function(t,i){return e("el-option",{key:"item_"+i,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),e("div",{staticClass:"setup-box",class:{hide:t.setting},attrs:{"data-event":"ai_tools_hd_repair_setting_box"}},[e("div",{staticClass:"title-box flex_m",on:{click:t.handleCollapse}},[e("div",{staticClass:"left flex_m"},[e("i",{staticClass:"el-icon-s-tools"}),t._v(" "),e("span",[t._v(t._s(t.$t("TaskUploadImageMoreSetting")))])]),t._v(" "),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-caret-bottom",class:{iconRate:!t.setting}})])]),t._v(" "),e("div",{staticClass:"tips-word-box"},[e("div",{staticClass:"word-text"},[e("span",[t._v(t._s(t.$t("Prompt")))])]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:3,placeholder:""},on:{change:t.changePrompt},model:{value:t.formData.prompt,callback:function(e){t.$set(t.formData,"prompt",e)},expression:"formData.prompt"}})],1),t._v(" "),e("div",{staticClass:"up-style"},[e("div",{staticClass:"left"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("parameter5")))])]),t._v(" "),e("div",{staticClass:"right"},[e("el-select",{staticClass:"custom-select-transparent",attrs:{"popper-append-to-body":!0,"popper-class":"custom-select"},model:{value:t.formData.engine,callback:function(e){t.$set(t.formData,"engine",e)},expression:"formData.engine"}},t._l(t.engineList,(function(t,i){return e("el-option",{key:"item_"+i,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._v(" "),e("div",{staticClass:"slider-box"},t._l(t.sliderData,(function(n,o){return e("div",{key:n.label,staticClass:"slider-list"},[e("div",{staticClass:"top"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t(n.label)))]),t._v(" "),e("el-tooltip",{attrs:{"popper-class":"custom-tips-popper",effect:"light",content:t.$t(n.tips),placement:"top-start"}},[e("span",{staticClass:"el-icon-warning custom-tips"})])],1),t._v(" "),e("div",{staticClass:"slider"},[e("el-slider",{attrs:{min:.1,max:1,step:n.step,"show-tooltip":!0,"show-input":""},on:{change:n.handle},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1)])})),0)]),t._v(" "),e("div",{staticClass:"submit-box flex_c_m"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.repairing,expression:"repairing"}],staticClass:"btn",on:{click:t.submitForm}},[e("p",{staticClass:"text-1"},[t._v(t._s(t.$t("Tasks")))]),t._v(" "),e("p",{staticClass:"text-2"},[t._v(t._s(t.$t("expend"))+"："+t._s(t.estimate||"--"))])])])],2)}),[],!1,null,"31ed0e2c",null).exports),D=n(14),L=(n(43),n(77),n(10));function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var E={inject:["top"],props:{repairing:{type:Boolean,default:!1}},data:function(){return{loading:!1,list:[],logo:n(1443),layerType:"one",actIndex:-1}},mounted:function(){this.isLoggedIn&&this.getHdHistoryList()},watch:{isLoggedIn:function(t){t&&this.getHdHistoryList()}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(m.c)("user",["isLoggedIn"])),methods:{getHdHistoryList:function(){var t=this,param={after_id:this.getListLast(),limit:3};this.loading=!0,Object(k.t)(param).then((function(e){var n=(e.data.items||[]).map((function(t){var e=t.meta,meta=void 0===e?{}:e,n=t.create_at,o=t.local_prompt,r=t.id,l=t.deduction_detail,c=t.status,d=meta.swift_tool_uhd_meta,v=t.img_uris?t.img_uris[0]:{};return{id:r,lowImg:d.image,highImg:(null==v?void 0:v.url)||"",hdScale:d.hd_scale,prompt:o,createAt:n,deduction_detail:l,style:d.style||1,engine:d.engine||1,hdr:d.hdr||1,fractality:d.fractality||1,resemblance:d.resemblance||1,creativity:d.creativity||1,status:c}}));t.list=[].concat(Object(D.a)(t.list),Object(D.a)(n)),t.loading=!1})).catch((function(){t.loading=!1}))},getListLast:function(){var t=this.list;return(t[t.length-1]||{}).id||""},updateList:function(){this.actIndex=-1,this.list=[],this.getHdHistoryList()},toggleType:function(t){this.layerType=t},goHistoryItem:function(t,e){this.repairing?this.$message(this.$t("loading_tip")):(this.actIndex=e,this.top.eventFn.initImagePoin(),this.$emit("onClick",t))},scroolLoad:function(){var t=this.$refs.historyListRef;t.scrollTop+t.clientHeight>=t.scrollHeight&&!this.loading&&this.getHdHistoryList()},delHdHistoryItem:function(t){var e=this,param={ids:[t]};this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning"}).then((function(){Object(k.k)(param).then((function(){e.updateList()}))})).catch((function(){}))},downloadImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"hd_restoration"}),Object(L.M)(t,this.$t("ai_tools_1")))},handleStatus:function(t){return this.$t({1:"Queuing",2:"Queuing",3:"upsacle",4:"up_task_failed"}[t.status]||"upsacle")}}},M=E,R=(n(5078),Object(c.a)(M,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("div",{staticClass:"nav-sell flex_m"},[e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont icon-workflow_icon_list left_iconfont",class:"one"===t.layerType&&"active-icon",on:{click:function(e){return e.stopPropagation(),t.toggleType("one")}}}),t._v(" "),e("i",{staticClass:"iconfont icon-workflow_icon_grid left_iconfont",class:"two"===t.layerType&&"active-icon",on:{click:function(e){return e.stopPropagation(),t.toggleType("two")}}})]),t._v(" "),e("div",{staticClass:"right"},[e("i",{staticClass:"iconfont icon-zhonghui",on:{click:t.updateList}})])]),t._v(" "),e("div",{ref:"historyListRef",staticClass:"history-list flex",on:{scroll:t.scroolLoad}},[t._l(t.list,(function(n,i){var o,r,l,c,d;return e("div",{key:n.id,class:"itembox-".concat(t.layerType)},[e("div",{directives:[{name:"show",rawName:"v-show",value:"one"===t.layerType,expression:"layerType === 'one'"}],staticClass:"item"},[e("div",{staticClass:"title-nav flex_m"},[e("div",{staticClass:"left flex_m"},[e("el-image",{staticClass:"head-img",attrs:{src:t.logo}}),t._v(" "),e("span",{staticClass:"name-text"},[t._v(t._s(t.$t("SeaArtBot")))]),t._v(" "),e("div",{staticClass:"tag-box"},[t._v(t._s(t.handleStatus(n)))])],1),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t._f("formatDateTime")(n.createAt)))]),t._v(" "),e("el-popover",{attrs:{trigger:"click","popper-class":"custom-popver"}},[e("div",{staticClass:"task-info-tips"},[e("p",[e("span",[t._v(t._s(t.$t("TaskID")))]),e("span",[t._v(t._s(n.id))])]),t._v(" "),e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("expend")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==n||null===(o=n.deduction_detail)||void 0===o?void 0:o.temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==n||null===(r=n.deduction_detail)||void 0===r?void 0:r.hashrate))])])]),t._v(" "),null!=n&&null!==(l=n.deduction_detail)&&void 0!==l&&l.history_hashrate?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("currentBalance")))]),t._v(" "),e("span",{staticClass:"√"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==n||null===(c=n.deduction_detail)||void 0===c?void 0:c.after_temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==n||null===(d=n.deduction_detail)||void 0===d?void 0:d.after_hashrate))])])]):t._e()]),t._v(" "),e("i",{staticClass:"iconfont icon-task_tips task-info-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"img-box"},[e("el-image",{staticClass:"action-img",class:t.actIndex===i&&"hisact-item",attrs:{fit:"cover",src:n.highImg||n.lowImg},on:{click:function(e){return t.goHistoryItem(n,i)}}}),t._v(" "),e("div",{staticClass:"btn-bord"},[3===n.status?e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.downloadImage(n.highImg)}}},[e("i",{staticClass:"iconfont icon-icon_xiazai",staticStyle:{"font-size":"14px"}})]):t._e(),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.delHdHistoryItem(n.id)}}},[e("i",{staticClass:"iconfont icon-shanchu3"})])])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"two"===t.layerType,expression:"layerType === 'two'"}],staticClass:"item-two"},[e("el-image",{staticClass:"action-img",class:t.actIndex===i&&"hisact-item",attrs:{fit:"cover",src:n.highImg||n.lowImg},on:{click:function(e){return t.goHistoryItem(n,i)}}}),t._v(" "),e("div",{staticClass:"btn-bord"},[3===n.status?e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.downloadImage(n.highImg)}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"})]):t._e(),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:function(e){return t.delHdHistoryItem(n.id)}}},[e("i",{staticClass:"iconfont icon-shanchu3"})])])],1)])})),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length === 0"}],staticClass:"nolist-item flex_c_m"},[e("span",[t._v(t._s(t.$t("no_data"))+"...")])]),t._v(" "),e("div",{staticClass:"loading-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loading-item"})])],2)])}),[],!1,null,"501aadd0",null).exports),N=n(119),U=n(29);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V={inject:["top"],components:{ImageDiffLook:d,LeftParams:T,RightHistory:R,QuickQueue:N.default},data:function(){return{dialogVisible:!1,showHistory:!1,repairing:!1,pollingTimer:null,lowImg:"",highImg:"",actImageItem:{},parameterList:[{label:"parameter1",key:"creativity",value:.5},{label:"parameter2",key:"hdr",value:.5},{label:"parameter3",key:"resemblance",value:.5},{label:"parameter4",key:"fractality",value:.5}],quickOptions:{},quickStyle:{height:"32px",fontSize:"14px",background:"rgba(0,0,0,0.3)"}}},methods:{show:function(t){var e=this,n=t.lowImg,o=t.defFormData,l=void 0===o?{}:o;this.dialogVisible=!0,this.lowImg=n,this.highImg="",this.$nextTick((function(){e.top.eventFn.initImagePoin(),e.$refs.rightHistoryRef.actIndex=-1,e.showHistory=!1,Object(r.a)(n,(function(t){var o=t.width,r=t.height;e.$refs.leftParamsRef.initForm({lowImg:n,hdScale:2,prompt:"",width:o,height:r,defFormData:l})}))}))},close:function(){this.dialogVisible=!1},fileSuccess:function(t){var e=t.url;this.lowImg=e,this.highImg=""},submitForm:function(t){var e=this;this.lowImg=t.image_url,this.top.eventFn.initImagePoin(),Object(k.x)(t).then((function(n){var o=n.data.task_id;e.actImageItem=B(B(B({},e.actImageItem),t),{},{id:o}),e.parameterList.forEach((function(e){e.value=t[e.key]})),e.pollingTask(o)}))},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.repairing=!0,e.pollingTimer=setTimeout((function(){Object(U.batchFetchTaskProcess)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.repairing=!1,void o();if(3===l[0].status){var c=l[0]||{},d=c.img_uris,v=void 0===d?[]:d,h=c.task_id,f=(v[0]||{}).url,m=void 0===f?"":f;Object(k.u)({id:h}).then((function(t){var o,r=(null===(o=t.data)||void 0===o||null===(o=o.meta)||void 0===o||null===(o=o.swift_tool_uhd_meta)||void 0===o?void 0:o.image)||"";e.highImg=m,e.lowImg=r,e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.repairing=!1,e.$refs.rightHistoryRef.updateList(),n()}))}else[1,2].includes(l[0].status)&&e.pollingTask(t)})).catch((function(n){e.$message.error(e.$t("ServerError")),e.repairing=!1,e.pollingTask(t),o()}))}),1e3)}))},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},toggleHistory:function(t){this.showHistory=!t},handHistory:function(t){this.lowImg=t.lowImg,this.highImg=t.highImg,this.actImageItem=B({id:t.id,image_url:t.lowImg,hd_scale:t.hdScale},t),this.parameterList.forEach((function(e){e.value=t[e.key]}));try{delete this.actImageItem.lowImg,delete this.actImageItem.hdScale}catch(t){}},downloadImage:function(){var t=this.highImg,e=void 0===t?"":t;e&&(this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"hd_restoration"}),Object(L.M)(e,this.$t("ai_tools_1")))},delHdimg:function(){var t=this,param={ids:this.actImageItem.id?[this.actImageItem.id]:[]};this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning"}).then((function(){Object(k.k)(param).then((function(){t.lowImg="",t.highImg="",t.$refs.leftParamsRef.resetForm(),t.$refs.rightHistoryRef.updateList()}))})).catch((function(){}))},copyfn:function(){var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";text&&(Object(L.g)(text),this.$message.success(this.$t("CopySuccess")))},repeatParam:function(t){var e=this,n=this.$refs.leftParamsRef.formData,o=this.actImageItem;"img"===t&&Object(r.a)(o.image_url,(function(t){var r=t.width,l=t.height;n.image_url=o.image_url,n.width=r,n.height=l,e.lowImg=o.image_url,e.highImg=""})),"data"===t&&(n.hd_scale=o.hd_scale,n.prompt=o.prompt,this.$refs.leftParamsRef.changeScale(o.hd_scale))}}},H=V,z=(n(5079),Object(c.a)(H,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"my-eldialog-style",attrs:{visible:t.dialogVisible,fullscreen:"","show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{attrs:{slot:"title"},slot:"title"}),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"}),t._v(" "),e("div",{staticClass:"work-content-box"},[e("div",{staticClass:"nav-box flex"},[e("div",{staticClass:"left flex_m"},[e("div",{staticClass:"back flex_c_m",on:{click:t.close}},[e("i",{staticClass:"iconfont icon-back"})])]),t._v(" "),e("div",{staticClass:"center flex_c_m"},[e("p",[t._v(t._s(t.$t("hdnavTips")))])]),t._v(" "),e("div",{staticClass:"right flex"},[e("div",{staticClass:"history-btn flex_c_m",on:{click:function(e){return t.toggleHistory(t.showHistory)}}},[e("i",{staticClass:"iconfont icon-qulishirenwu"}),t._v(" "),e("span",[t._v(t._s(t.$t("workFlow11")))])])])]),t._v(" "),e("div",{staticClass:"update-work-box flex"},[e("div",{staticClass:"left-params"},[e("left-params",{ref:"leftParamsRef",attrs:{lowImg:t.lowImg,repairing:t.repairing},on:{onFileSuccess:t.fileSuccess,onSubmit:t.submitForm}})],1),t._v(" "),e("div",{staticClass:"centre-hdimg"},[e("div",{staticClass:"diffimg-box",class:t.repairing&&"vague-box"},[e("image-diff-look",{ref:"imageDiffLookRef",attrs:{lowImg:t.lowImg,highImg:t.highImg||t.lowImg,showRange:""!==t.highImg&&!t.repairing}})],1),t._v(" "),e("div",{staticClass:"loading-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.repairing,expression:"repairing"}],staticClass:"repairing-tips flex_c_m"},[e("i",{staticClass:"el-icon-loading"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_1"))+"...")])]),t._v(" "),e("QuickQueue",{attrs:{quickOptions:t.quickOptions,quickStyle:t.quickStyle}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.highImg&&!t.repairing,expression:"highImg !== '' && !repairing"}],staticClass:"operate-tool-box flex"},[e("div",{staticClass:"left flex"},[e("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e("div",{staticClass:"item flex_c_m",attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"iconfont icon-zhonghui"})]),t._v(" "),e("div",{staticClass:"use-param-item flex_m",on:{click:function(e){return t.repeatParam("img")}}},[e("span",[t._v(t._s(t.$t("repeatImage")))])])]),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:t.downloadImage}},[e("i",{staticClass:"iconfont icon-icon_xiazai"})]),t._v(" "),e("div",{staticClass:"item flex_c_m",on:{click:t.delHdimg}},[e("i",{staticClass:"iconfont icon-shanchu3"})])],1),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"parameter"},t._l(t.parameterList,(function(n,o){return e("div",{key:o,staticClass:"top-list"},[e("span",[t._v(t._s(t.$t(n.label)))]),t._v(" "),e("span",[t._v(t._s(n.value))])])})),0),t._v(" "),e("div",{staticClass:"param-list flex"},[e("div",{staticClass:"prompt"},[e("div",{staticClass:"name-text flex_c_m"},[e("span",[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("span",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("div",{staticClass:"info-prompt"},[e("p",{staticStyle:{"margin-bottom":"8px"}},[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("p",[t._v(t._s(t.actImageItem.prompt))]),t._v(" "),e("div",{staticClass:"copy-text",on:{click:function(e){return t.copyfn(t.actImageItem.prompt)}}},[e("i",{staticClass:"iconfont icon-copy-template1"}),t._v("\n                      "+t._s(t.$t("CopyPrompts"))+"\n                    ")])])])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showHistory,expression:"showHistory"}],staticClass:"right-history-list"},[e("right-history",{ref:"rightHistoryRef",attrs:{repairing:t.repairing},on:{onClick:t.handHistory}})],1)])])])],1)}),[],!1,null,"66802196",null)),W=z.exports;installComponents(z,{QuickQueue:n(119).default});var G=n(895),Y=n(587),Q=n(5081);function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"HDRestoration",provide:function(){return{top:this}},components:{ImageDiffLook:d,ImageWorkModal:W,UploadImg:x,CommonProblem:G.default,CardList:Y.a},head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("upsacler_3_H1"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{eventFn:{initImagePoin:null},decsData:Q.a,iconUrl:n(737),eximgList:[],diffImgix:0,defFormData:{}}},mounted:function(){this.getExampleData()},computed:X(X(X({},Object(m.e)("user",["cdnHost"])),Object(m.c)("user",["cdnHostFun"])),{},{diffImgExample:function(){return{low:"https://".concat(this.cdnHost,"/static/upload/20240314/206f8d51-0e87-4f87-afd6-ee782fa7b984.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240314/f823bd3f-b398-40a8-91ac-fd07ba097609.png")}},diffImgList:function(){return[{name:"canvas_car",low:"https://".concat(this.cdnHost,"/static/upload/20240318/949c5e13-2d9e-4a06-9dbd-4928ee90a7fb.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/6f7913a9-451b-410f-9c60-7f7b5388779e.png")},{name:"upsacler_photo_alt_2",low:"https://".concat(this.cdnHost,"/static/upload/20240318/ee764164-c7bc-4a2f-b55a-2be696273316.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/5a0aa93a-999c-49bf-940d-3c42ca10ff1d.png")},{name:"upsacler_photo_alt_3",low:"https://".concat(this.cdnHost,"/static/upload/20240318/9d782a47-eeb3-4fd5-a753-562cfdc68dec.png"),high:"https://".concat(this.cdnHost,"/static/upload/20240318/fdb055a0-b507-42a5-bfa2-f6ec9d773e3e.jpg")}]}}),methods:{goWorkView:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).before,e=void 0===t?"":t;this.$refs.ImageWorkModal.show({lowImg:e,defFormData:this.defFormData})},getExampleData:function(){var t=this;Object(k.s)({type:1}).then((function(e){var n=e.status.code,code=void 0===n?"":n,o=e.data,r=o.extra_upscale,l=void 0===r?[]:r,c=o.ultra_hd_param,d=void 0===c?{}:c;[1e4,"10000"].includes(code)&&(t.eximgList=l,t.defFormData=d)}))},fileSuccess:function(t){var e=t.url;this.$refs.ImageWorkModal.show({lowImg:e,defFormData:this.defFormData})},changeTypeImg:function(i){this.diffImgix=i}}},Z=K,tt=(n(5082),Object(c.a)(Z,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"c-fast-tools-hd-restoration"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("upsacler_3_H1")))]),t._v(" "),e("p",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("upsacler_4_H1_value")))])])]),t._v(" "),e("div",{staticClass:"example-bord-box flex_c"},[e("div",{staticClass:"left"},[e("image-diff-look",{attrs:{isDetail:!1,lowImg:t.diffImgExample.low,highImg:t.diffImgExample.high,radius:24}})],1),t._v(" "),e("div",{staticClass:"right"},[e("upload-img",{attrs:{type:"big"},on:{onSuccess:t.fileSuccess}}),t._v(" "),e("div",{staticClass:"example-title flex_c_m"},[e("span",{staticClass:"el-icon-bottom example-title-icon"}),t._v("\n        "+t._s(t.$t("ai_tools_9"))+"\n      ")]),t._v(" "),e("div",{staticClass:"example-img-list flex_c_m"},t._l(t.eximgList,(function(n,i){return e("el-image",{key:i,staticClass:"item",attrs:{src:n.before},on:{click:function(e){return t.goWorkView(n)}}})})),1)],1)]),t._v(" "),e("image-work-modal",{ref:"ImageWorkModal",attrs:{"data-group":"ai_tools_hd_repair_work_modal"}})],1)}),[],!1,null,"13c3d14c",null));e.default=tt.exports},5743:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13),n(7);var o=n(2),r=(n(763),n(47),n(456)),l=n.n(r),c=(n(764),n(457)),d=n.n(c),v=(n(6),n(16),n(8),n(4),n(90),n(1)),h=n(85),f=(n(92),n(27));function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={name:"ChangePassword",props:{},computed:{},data:function(){return{loading:!1,formData:{passwordNow:"",passwordNew:"",passwordNewAgain:""},rules:{passwordNow:[{required:!0,message:this.$t("PleaseIAP"),trigger:"blur"},{min:8,max:20,message:this.$t("PasswordLMBB"),trigger:"blur"},{pattern:/^\S*$/,message:this.$t("PasswordANATCS"),trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]*$/,message:"密码不能包含汉字",trigger:"blur"}],passwordNew:[{required:!0,message:this.$t("passwordNewTips"),trigger:"blur"},{min:8,max:20,message:this.$t("PasswordLMBB"),trigger:"blur"},{pattern:/^\S*$/,message:this.$t("PasswordANATCS"),trigger:"blur"},{pattern:/^(?=.*[A-Z]).+$/,message:this.$t("PasswordUpper"),trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]*$/,message:"密码不能包含汉字",trigger:"blur"},{validator:this.validateConfirmPassword2,trigger:"blur"}],passwordNewAgain:[{required:!0,message:this.$t("PleaseETPA"),trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]}}},mounted:function(){},methods:_(_({},Object(v.b)("user",["logout"])),{},{validateConfirmPassword:function(t,e,n){e!==this.formData.passwordNew?n(new Error(this.$t("EnterPswDis"))):n()},validateConfirmPassword2:function(t,e,n){e===this.formData.passwordNow?n(new Error(this.$t("EnterPswSame"))):n()},handleSaveSettings:function(){var t=this;this.$refs.formData.validate((function(e){if(e){var n={old:t.formData.passwordNow,new:t.formData.passwordNew};t.loading=!0,Object(f.h)(n).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.$message({message:t.$t("SaveSuccess"),type:"success"}),t.toHome())})).finally((function(){t.loading=!1}))}}))},toHome:function(){var t=this;this.logout().then((function(){t.$router.push(t.localePath("/?openLoginDialog=1"))}))}})},w=(n(4813),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"change-password"},[e("el-form",{ref:"formData",staticClass:"tagView-form",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px","label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNow"),prop:"passwordNow"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("PleaseIAP")},model:{value:t.formData.passwordNow,callback:function(e){t.$set(t.formData,"passwordNow","string"==typeof e?e.trim():e)},expression:"formData.passwordNow"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNew"),prop:"passwordNew"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("passwordNewTips")},model:{value:t.formData.passwordNew,callback:function(e){t.$set(t.formData,"passwordNew","string"==typeof e?e.trim():e)},expression:"formData.passwordNew"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("passwordNewAgain"),prop:"passwordNewAgain"}},[e("el-input",{attrs:{type:"password",maxlength:"20","show-password":"",placeholder:t.$t("passwordNewAgainTips")},model:{value:t.formData.passwordNewAgain,callback:function(e){t.$set(t.formData,"passwordNewAgain","string"==typeof e?e.trim():e)},expression:"formData.passwordNewAgain"}})],1)],1),t._v(" "),e("el-col",[e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)])],1)],1)}),[],!1,null,"eb6b6482",null).exports,O=(n(18),n(21),n(3)),x=n(14),k=(n(20),n(32),n(50),n(22),n(49),n(10));function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"NameAndTag",props:{},computed:j(j(j({},Object(v.e)("user",["userInfo"])),Object(v.c)("user",["accountSettingsData","name","allTags","officialTags","myCollectTags"])),{},{zhLang:function(){return this.$i18n.locale.startsWith("zh")}}),data:function(){return{replaceImageType:k.K,loading:!1,officialTagsLocal:[],collectTagsLocal:[],oldCollectTags:[],sameName:!1,sameTags:!1,formData:{name:"",tags:[]},rules:{name:[{pattern:/^[^~!@$%^&*()_+]+$/,message:this.$t("UserNameRule"),trigger:"blur"},{min:2,max:20,message:this.$t("UserNameRuleLength"),trigger:"blur"}]},codeMap:{10405:"code_10405",10407:"code_10407",10408:"code_10408",20302:"UserNameRepeat",20305:"NicknameLimitReached",20306:"ImgLimitReached"},interestTag:[],userInterestTag:[]}},beforeDestroy:function(){this.officialTagsLocal.forEach((function(t){t.selected=!1}))},mounted:function(){this.formData.name=this.name||JSON.parse(localStorage.getItem("userInfo")).name,this.getSettingsInfo()},methods:j(j({},Object(v.b)("user",["getAccountInfo","getHotTags","getMyCollectTags","getOfficialTags"])),{},{goTagDetails:function(t){this.$router.push(this.localePath("/tagInfo/"+t))},getCollect:function(){this.officialTags.length>0?(this.oldCollectTags=this.myCollectTags.map((function(t){return t.id})),this.collectTagsLocal=Object(x.a)(this.myCollectTags),this.officialTagsLocal=Object(x.a)(this.officialTags),this.handleTags()):this.getSavedTags()},getSettingsInfo:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:t.loading=!0,!t.sameName&&t.getAccountInfo().finally((function(){t.loading=!1})),!t.sameTags&&t.getSavedTags(),t.getUserInterestTag();case 6:case"end":return e.stop()}}),e)})))()},getUserInterestTag:function(){var t=this;Object(f.V)({}).then((function(e){var n=(null==e?void 0:e.data)||{},o=n.interests,r=n.choosed_interest;t.interestTag=o.map((function(t){return{id:t.id,name:t.web,cover:t.cover.url}})),t.userInterestTag=r,t.$set(t,"interestTag",t.interestTag),t.$set(t,"userInterestTag",t.userInterestTag)}))},getSavedTags:function(){var t=this;this.getMyCollectTags().then(function(){var e=Object(O.a)(regeneratorRuntime.mark((function e(n){var o,r,code,l,data,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(o=n||{}).status.code,code=void 0===r?"":r,l=o.data,data=void 0===l?{mine:[],other:[]}:l,!["10000",1e4].includes(code)){e.next=14;break}return c=(null==data?void 0:data.mine)||[],t.oldCollectTags=c.map((function(t){return t.id})),t.collectTagsLocal=c,e.prev=5,e.next=8,t.getOfficialTags();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:t.officialTagsLocal=t.officialTags||[],t.handleTags();case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},handleTags:function(){var t=this;this.collectTagsLocal.length>0&&this.officialTagsLocal.forEach((function(e){var n=t.collectTagsLocal.some((function(t){return t.id===e.id}));e.selected=n}))},collectAdd:function(t){this.collectTagsLocal.find((function(e){return e.id===t.id}))||this.collectTagsLocal.push(t)},collectRemove:function(t){this.collectTagsLocal=this.collectTagsLocal.filter((function(e){return e.id!==t.id})),this.officialTagsLocal.forEach((function(e){e.id===t.id&&(e.selected=!1)}))},handleSaveSettings:function(){var t=this;this.$refs.formData.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.tags=Object(x.a)(t.collectTagsLocal),console.log("this.formData",t.formData),t.submitPerson(j({},t.formData))}))},submitPerson:function(t){var e,n=this,o=t.name,r=t.tags;this.sameName=(null===(e=this.userInfo)||void 0===e?void 0:e.name)===o;this.sameName;var l=r.map((function(t){var e=t.id,o=t.name;return n.oldCollectTags.includes(t.id)||(n.sameTags=!1),{id:e,name:o}})),param={collect_tags:l,tags:null,name:o,home_set:{interest_tag:this.userInterestTag}};Object(f.A)(param).then((function(t){var code=t.status.code;1e4===code?(n.$message.success(n.$t("SaveSuccess")),n.getSettingsInfo()):n.handleTaskError(code)})).finally((function(){n.sameTags=!1,n.sameName=!1}))},selectInterestTag:function(t,e){var n=this.userInterestTag.findIndex((function(e){return e===t.id}));-1!==n?this.userInterestTag.length>3?this.userInterestTag.splice(n,1):this.$message.warning(this.$t("Setting_Interest_warn")):this.userInterestTag.push(t.id)},selectTag:function(t,e){this.collectTagsLocal.length>20&&!t.selected?this.$message.warning(this.$t("error_code_40312")):(t.selected=!t.selected,t.selected?this.collectAdd(t):this.collectRemove(t),this.$set(this.officialTagsLocal,e,t))},handleImgError:function(img){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myTagImg")+img.id;this.$refs[t].src=img.cover},handleTaskError:function(code){code&&Object.keys(this.codeMap).includes(String(code))?this.$message.error(this.$t(this.codeMap[String(code)])):this.$message.error(this.$t("ServerError"))}})},$=S,P=(n(4814),n(4815),Object(w.a)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-and-tag-setting"},[e("div",{staticClass:"person-content"},[e("el-form",{ref:"formData",staticClass:"tagView-form",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px","label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title",attrs:{label:t.$t("EnterNickname"),prop:"name"}},[e("el-input",{attrs:{placeholder:t.$t("Nickname"),minlength:"2",maxlength:"20","show-word-limit":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),t._v(" "),e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title"},[e("template",{slot:"label"},[e("div",{staticClass:"label-wrap flex"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("settingTag1")))]),t._v(" "),e("el-popover",{attrs:{placement:"right",trigger:"hover","visible-arrow":!1,"popper-class":"tag-setting-tips"}},[e("div",{staticClass:"balance-tips-text"},[t._v("\n                  "+t._s(t.$t("settingTagTxt1"))+"\n                ")]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon balance-tips-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap selected-tag"},t._l(t.collectTagsLocal,(function(n,i){return e("button",{key:"_tag".concat(i),staticClass:"tag-btn flex items-center inline-flex",class:{"zh-width":t.zhLang}},[e("div",{staticClass:"content flex justify-between items-center w-full"},[e("div",{staticClass:"left flex items-center text-no-wrap",on:{click:function(e){return t.goTagDetails(n.id)}}},[e("div",{staticClass:"tag-img"},[n.cover?e("img",{ref:"myTagImg".concat(n.id),refInFor:!0,staticClass:"tag-img",attrs:{src:t.replaceImageType(n.cover,"low")},on:{error:function(e){return t.handleImgError(n,"myTagImg")}}}):t._e()]),t._v(" "),e("span",{attrs:{title:t.$t(n.name)}},[t._v(t._s(t.$t(n.name)))])]),t._v(" "),e("div",{staticClass:"right",on:{click:function(e){return t.collectRemove(n)}}},[e("i",{staticClass:"iconfont icon-close"})])])])})),0)],2)],1),t._v(" "),e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title"},[e("template",{slot:"label"},[e("div",{staticClass:"label-wrap flex"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("settingTag2")))]),t._v(" "),e("el-popover",{attrs:{placement:"right",trigger:"hover","visible-arrow":!1,"popper-class":"tag-setting-tips"}},[e("div",{staticClass:"balance-tips-text"},[t._v("\n                  "+t._s(t.$t("settingTagTxt2"))+"\n                ")]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon balance-tips-icon",attrs:{slot:"reference"},slot:"reference"})])],1)]),t._v(" "),e("div",{staticClass:"flex flex-wrap interestTag-wrap"},t._l(t.officialTagsLocal,(function(n,i){return e("el-button",{key:"_tag".concat(i),staticClass:"tag-btn flex items-center inline-flex",class:{"zh-width":t.zhLang,selected:n.selected},attrs:{round:"",size:"mini"},on:{click:function(e){return t.selectTag(n,i)}}},[e("div",{staticClass:"content flex items-center"},[e("div",{staticClass:"tag-img"},[n.cover?e("img",{ref:"sysTagImg".concat(n.id),refInFor:!0,staticClass:"tag-img",attrs:{src:t.replaceImageType(n.cover,"low")},on:{error:function(e){return t.handleImgError(n,"sysTagImg")}}}):t._e()]),t._v(" "),e("span",{attrs:{title:t.$t(n.name)}},[t._v(t._s(t.$t(n.name)))])])])})),1)],2)],1),t._v(" "),t.userInterestTag.length>0?e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:24}},[e("el-form-item",{staticClass:"setting-card-main-title"},[e("template",{slot:"label"},[e("div",{staticClass:"label-wrap flex"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("My_Interest")))])])]),t._v(" "),e("div",{staticClass:"flex flex-wrap interestTag-wrap"},t._l(t.interestTag,(function(n,i){return e("el-button",{key:"_tag".concat(i),staticClass:"tag-btn flex items-center inline-flex",class:{"zh-width":t.zhLang,selected:t.userInterestTag.includes(n.id)},attrs:{round:"",size:"mini"},on:{click:function(e){return t.selectInterestTag(n,i)}}},[e("div",{staticClass:"content flex items-center"},[e("div",{staticClass:"tag-img"},[n.cover?e("img",{ref:"sysTagImg".concat(n.id),refInFor:!0,staticClass:"tag-img",attrs:{src:t.replaceImageType(n.cover,"low")},on:{error:function(e){return t.handleImgError(n,"sysTagImg")}}}):t._e()]),t._v(" "),e("span",{attrs:{title:t.$t(n.name)}},[t._v(t._s(t.$t(n.name)))])])])})),1)],2)],1):t._e(),t._v(" "),e("el-col",[e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)])],1)],1)])}),[],!1,null,"18b54ee8",null).exports);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"DeleteAccount",props:{},computed:D({},Object(v.e)("user",["userInfo"])),data:function(){return{loading:!1,dialogVisible:!1,inputValue:""}},mounted:function(){},methods:D(D({},Object(v.b)("user",["logout"])),{},{handleDelete:function(){var t,e=this;if(console.log("value",this.inputValue),this.inputValue&&this.inputValue===(null===(t=this.userInfo)||void 0===t?void 0:t.name)){console.log("调接口");var n={username:this.inputValue};this.loading=!0,Object(f.w)(n).then((function(t){var n;1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&(e.$message({message:e.$t("deleteSus"),type:"success"}),e.toHome())})).finally((function(){e.loading=!1,e.dialogVisible=!1,e.inputValue=""}))}else{var o=this.inputValue?this.$t("nameErrorTip"):this.$t("inputRightPls");this.$message({message:o,type:"warning"})}},toHome:function(){var t=this;this.logout().then((function(){t.$router.push(t.localePath("/"))}))}})},A=(n(4816),n(4817),Object(w.a)(L,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"delete-account"},[n("div",{staticClass:"up-content flex"},[e._m(0),e._v(" "),n("div",{staticClass:"delete-account-text flex flex-col"},[n("div",{staticClass:"delete-account-title"},[n("span",{staticClass:"delete-account-title-text"},[e._v(e._s(e.$t("delActTitle")))])]),e._v(" "),n("div",{staticClass:"delete-account-content"},[n("div",{staticClass:"delete-account-content-text"},[n("span",[e._v(e._s(e.$t("delActTipsTxt")))])])])])]),e._v(" "),n("div",{staticClass:"flex justify-center"},[n("el-button",{staticClass:"bottom-btn",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("delActBtn")))])],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"delete-account-dialog","close-on-press-escape":!0,"close-on-click-modal":!1,"append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"}),e._v(" "),n("div",{staticClass:"main-part"},[n("div",{staticClass:"title flex justify-center items-center flex-col"},[n("div",{staticClass:"title-main"},[e._v(e._s(e.$t("delActTitle")))]),e._v(" "),n("div",{staticClass:"title-sub"},[e._v(e._s(e.$t("delActDlgTips")))])]),e._v(" "),n("div",{staticClass:"confirm-input flex flex-col items-center"},[n("div",{staticClass:"input-text"},[n("div",{staticClass:"text"},[e._v("\n            "+e._s(e.$t("delActDlgCfmTxt1"))+"\n            "),n("span",{staticClass:"name"},[e._v(" "+e._s(null===(t=e.userInfo)||void 0===t?void 0:t.name))]),e._v("\n            "+e._s(e.$t("delActDlgCfmTxt2"))+"\n          ")])]),e._v(" "),n("el-input",{ref:"input",staticClass:"input",attrs:{placeholder:e.$t("delActDlgInput"),maxlength:20,"show-word-limit":!0},model:{value:e.inputValue,callback:function(t){e.inputValue="string"==typeof t?t.trim():t},expression:"inputValue"}})],1)]),e._v(" "),n("span",{staticClass:"dialog-footer flex justify-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"my-dialog-btn btn-left",on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("Cancel")))]),e._v(" "),n("el-button",{staticClass:"my-dialog-btn btn-right",on:{click:e.handleDelete}},[e._v(e._s(e.$t("delActBtn")))])],1)])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"warning flex justify-center items-center"},[t("i",{staticClass:"iconfont icon-warningTip warning-icon"})])}],!1,null,"4c0346ae",null).exports),E={name:"PrivacySettings",data:function(){return{showList:!1}},methods:{goToBlacklist:function(){this.$router.push(this.localePath("/settings/blacklist"))}}},M=(n(4818),Object(w.a)(E,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"privacy-settings"},[e("div",{staticClass:"privacy-header-card clickable",on:{click:t.goToBlacklist}},[e("span",{staticClass:"privacy-header-title"},[t._v(t._s(t.$t("block_list")))]),t._v(" "),e("i",{staticClass:"el-icon-arrow-right"})])])}),[],!1,null,"fd201d70",null).exports),R=n(153);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={name:"PersonalCenter",components:{DeleteAccount:A,ChangePassword:C,NameAndTag:P,PrivacySettings:M,ElMenu:d.a,ElMenuItem:l.a},watch:{accountSettingsData:{handler:function(){this.updatePublicSetting()},immediate:!0,deep:!0}},computed:U(U(U(U({},Object(v.e)("user",["userInfo"])),Object(v.c)("user",["accountSettingsData","name","isCompanyAccount"])),Object(v.c)("payment",["productLevel","activeState"])),{},{showDeleteAccount:function(){var t;return!(null!==(t=this.userInfo)&&void 0!==t&&null!==(t=t.enterprise)&&void 0!==t&&t.id)},isEmailLogin:function(){var t;return 1===(null===(t=this.userInfo)||void 0===t?void 0:t.account_login_channel)},isAllowEditAutoPublishedToCommunity:function(){return this.activeState&&this.productLevel&&this.productLevel>=3},zhLang:function(){return this.$i18n.locale.startsWith("zh")}}),mounted:function(){this.paymentInfo=JSON.parse(localStorage.getItem("paymentInfo"));var t=this.$route.query.tab;t&&["1","2","3","4","5"].includes(t+"")&&(this.activeIndex=String(t))},data:function(){return{loading:!1,form:{autoPublishedToCommunity:!0,offLocalization:!1,isAutoUnlock:!0,auto_save_artwork:!1},paymentInfo:null,activeIndex:"1",personLoading:!1}},methods:U(U(U(U({},Object(v.b)("user",["getAccountInfo","updateAccountSettings","logout"])),Object(v.b)("chatgpt",["getMainMessage"])),Object(v.b)("app",["setLang"])),{},{showTxt:function(){this.$EventBus.$emit("showBreakDialog","PrivateWorkTipWeb","basic"),this.paymentInfo.show_auto_pub_switch||(this.form.autoPublishedToCommunity=!0)},updatePublicSetting:function(){this.updateSettingsConfig(this.accountSettingsData)},updateSettingsConfig:function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=data.is_auto_pub_community,e=void 0===t||t,n=data.localization,o=data.is_off_localization,r=void 0!==o&&o,l=data.ai_video_auto_play,c=data.auto_save_artwork,d=void 0===c?2:c,v=n?2===n:r;this.form.autoPublishedToCommunity=e,this.form.offLocalization=v,this.form.isAutoUnlock=1==l,this.form.auto_save_artwork=1===d},selectTag:function(t,e){t.selected=!t.selected,this.$set(this.tags,e,t)},handleClick:function(){var t=this;this.$refs.formData.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.formData.tags=t.tags.filter((function(t){return t.selected})),console.log("this.formData",t.formData),t.submit(U({},t.formData))}))},handleSaveSettings:function(){var t,e,n,o=this;this.loading=!0;var r={};r.is_auto_pub_community=this.form.autoPublishedToCommunity,r.localization=this.form.offLocalization?2:1,r.ai_video_auto_play=this.form.isAutoUnlock?1:2,r.auto_save_artwork=this.form.auto_save_artwork?1:2;var l=r.is_auto_pub_community===(null===(t=this.accountSettingsData)||void 0===t?void 0:t.is_auto_pub_community),c=r.localization===(null===(e=this.accountSettingsData)||void 0===e?void 0:e.is_off_localization),d=r.ai_video_auto_play===(null===(n=this.accountSettingsData)||void 0===n?void 0:n.ai_video_auto_play);if(l&&c&&d)return this.$message.success(this.$t("SaveSuccess")),void(this.loading=!1);Object(h.c)(r).then((function(t){var e=(t||{}).status.code;["10000",1e4].includes(void 0===e?"":e)?(o.loading=!1,o.$message.success(o.$t("SaveSuccess")),o.updateAccountSettings(r),o.$logEvent("log_actions",{operation:r.is_auto_pub_community?"click_all_public":"click_all_hidden"}),o.$logEvent("log_actions",{operation:1==r.ai_video_auto_play?"click_open_auto_unlock":"click_close_auto_unlock",behavior_info:"on_personal_settings"})):o.updateSettingsConfig(o.accountSettingsData)})).finally((function(){o.loading=!1}))},changeLang:function(){this.$i18n.locale!==this.language&&(Object(R.b)(this.language),localStorage.setItem("language",this.language),this.$i18n.setLocale(this.language))},initLang:function(){var t=this.$i18n.locale;this.language=t||"en"},handleSelect:function(t){this.activeIndex=t,console.log("当前选中的菜单项：",t)},backTo:function(){window.history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))}})},B=F,V=(n(4819),Object(w.a)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-settings-page"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("div",{staticClass:"backIcon",on:{click:function(e){return e.stopPropagation(),t.backTo.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-back"})]),t._v(" "),e("div",{staticClass:"settings-page__wrapper"},[e("div",{staticClass:"setting-card-box-wrapper"},[e("el-menu",{staticClass:"my-el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[t._v(t._s(t.$t("PersonalSettings")))]),t._v(" "),e("el-menu-item",{attrs:{index:"2"}},[t._v(t._s(t.$t("SystemSettings")))]),t._v(" "),e("el-menu-item",{attrs:{index:"3"}},[t._v(t._s(t.$t("settings_privacy")))]),t._v(" "),e("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isEmailLogin,expression:"isEmailLogin"}],attrs:{index:"4"}},[t._v(t._s(t.$t("ChangePassword")))]),t._v(" "),e("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteAccount,expression:"showDeleteAccount"}],attrs:{index:"5"}},[t._v(t._s(t.$t("delAct")))])],1),t._v(" "),"1"===t.activeIndex?e("div",[e("NameAndTag")],1):t._e(),t._v(" "),"2"===t.activeIndex?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{staticClass:"setting-card-box"},[e("h2",{staticClass:"setting-card-main-title"},[t._v(t._s(t.$t("SystemSettings")))]),t._v(" "),e("div",{staticClass:"settings--card-content"},[t.isCompanyAccount?t._e():e("div",{staticClass:"settings--card-content-item"},[e("div",{on:{click:function(e){!t.paymentInfo.show_auto_pub_switch&&t.showTxt()}}},[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.autoPublishedToCommunity,callback:function(e){t.$set(t.form,"autoPublishedToCommunity",e)},expression:"form.autoPublishedToCommunity"}})],1),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("AutomaticallyPublished")))])]),t._v(" "),e("div",{staticClass:"settings--card-content-item"},[e("div",[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.auto_save_artwork,callback:function(e){t.$set(t.form,"auto_save_artwork",e)},expression:"form.auto_save_artwork"}})],1),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("auto_save_artwork")))])]),t._v(" "),e("div",{staticClass:"settings--card-content-item"},[e("el-switch",{staticClass:"settings-switch",attrs:{disabled:t.loading},model:{value:t.form.offLocalization,callback:function(e){t.$set(t.form,"offLocalization",e)},expression:"form.offLocalization"}}),t._v(" "),e("span",{staticClass:"settings-name"},[t._v(t._s(t.$t("offLocalization")))])],1)])]),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("el-button",{staticClass:"bottom-btn",attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSaveSettings}},[t._v(t._s(t.$t("SaveSettings")))])],1)]):t._e(),t._v(" "),"3"===t.activeIndex?e("div",[e("PrivacySettings")],1):t._e(),t._v(" "),"4"===t.activeIndex&&t.isEmailLogin?e("div",[e("ChangePassword")],1):t._e(),t._v(" "),"5"===t.activeIndex?e("div",[e("DeleteAccount")],1):t._e()],1)]),t._v(" "),e("button",{staticClass:"settings-page-close-button close-button",on:{click:t.backTo}},[e("i",{staticClass:"el-icon-close"})])],1)}),[],!1,null,"29b64475",null));e.default=V.exports},5749:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13),n(8);var o=n(3),r=n(30),l=n(2),c=(n(20),n(6),n(16),n(22),n(4),n(7),n(26),n(32),n(31),n(21),n(71)),d=n(36),v=(n(24),{name:"AiFilterStyleItem",props:{styleInfo:{type:Object,default:function(){return{}}},activeFilter:{type:[String,Number],default:function(){return""}}},computed:{isSelected:function(){return this.styleInfo.id===this.activeFilter?"is-selected":""},getGifUrl:function(){var t;return(null===(t=this.styleInfo.cover)||void 0===t?void 0:t.url)||""}},methods:{selectItem:function(){this.$emit("selectFilter",this.styleInfo)}}}),h=(n(5071),n(0)),component=Object(h.a)(v,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"c-ai-filter-style-item"},[null!==(t=e.styleInfo.sys_tag)&&void 0!==t&&t.length?n("div",{class:["tag","".concat(e.styleInfo.sys_tag[0].toLowerCase(),"-tag")]},[e._v("\n    "+e._s(e.styleInfo.sys_tag[0])+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"filter-style-card-img",class:[e.isSelected],attrs:{"data-event":"ai_tools_ai_filter_style_item","data-id":e.styleInfo.id},on:{click:function(t){return t.stopPropagation(),e.selectItem.apply(null,arguments)}}},[n("img",{staticClass:"defImg",attrs:{loading:"lazy",src:e.getGifUrl,alt:""}}),e._v(" "),e.getGifUrl?e._e():n("div",{staticClass:"image-placeholder"})]),e._v(" "),n("div",{staticClass:"filter-style-card-title"},[e._v(e._s(e.styleInfo.title))])])}),[],!1,null,"7eb5b66c",null),f=component.exports,m={name:"Categorys",components:{SwipeableList:n(52).default},props:{categorys:{type:Array,default:function(){return[]}},currentCategory:{type:String,default:""},moveLength:{type:Number,default:100}},data:function(){return{}},methods:{changeCategory:function(t){this.$emit("changeCategory",t)}}},_=(n(5072),Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-category"},[e("SwipeableList",{attrs:{top:"0px",iconBntWidth:20}},[e("div",{ref:"scrollArea",staticClass:"categorys"},t._l(t.categorys,(function(n,o){return e("div",{key:"filter_style_".concat(o),staticClass:"item-category",class:{active:t.currentCategory==n.label},attrs:{"data-event":"ai_tools_ai_filter_category_item","data-id":n.id},on:{click:function(e){return t.changeCategory(n)}}},[t._v("\n        "+t._s(n.label)+"\n      ")])})),0)])],1)}),[],!1,null,"68d69407",null)),y=_.exports;installComponents(_,{SwipeableList:n(52).default});var w=n(9),C=n(1);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"AiFilterStyle",components:{AiFilterStyleItem:f,Categorys:y},props:{isLoading:{type:Boolean,default:!1}},data:function(){return{activeTab:"",list:[],loading:!0,activeTabInfo:null,activeFilter:"",searchKeyword:"",filterList:[],allFilterList:[],isFirstExposure:!1}},mounted:function(){this.getFilterTabList(),this.getFilterList(),this.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:"search_box"})},computed:x(x({},Object(C.e)("user",["token"])),{},{isSelected:function(){return function(t){return t.id===this.activeFilter?"is-selected":""}},filteredTemplates:function(){var t=this.searchKeyword.toLowerCase();return t?this.allFilterList.filter((function(template){return template.title&&template.title.toLowerCase().includes(t)})):this.filterList}}),methods:{getFilterTabList:function(){var t=this;this.loading=!0,Object(c.d)({show_area:"swift_ai_ai_filter"}).then((function(e){var n;if(1e4==e.status.code){e.data.length&&e.data.forEach((function(e){e.label=e[w.r[t.$i18n.locale]],t.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:e.en+"_tab"})}));var o=e.data&&Array.isArray(e.data)?e.data:[];t.$set(t,"activeTab",o[0].label||""),t.$set(t,"activeTabInfo",o[0]||null),t.getFilterList(null===(n=t.activeTabInfo)||void 0===n?void 0:n.id),t.list=o}})).finally((function(){t.list.unshift({label:t.$t("recently"),id:"recent"}),t.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:"Recent_tab"})}))},getRecentList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.token){e.next=3;break}return t.filterList=[],e.abrupt("return");case 3:return t.loading=!0,e.next=6,Object(d.getRecentSquare)({page:1,page_size:35,source_types:[23]});case 6:if(1e4==(n=e.sent).status.code){e.next=9;break}return e.abrupt("return");case 9:t.filterList=n.data.items,t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},getFilterList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loading=!0,Object(d.getWaterAiApp)({page:1,page_size:300,comfy_ui_type:8,tag_ids:e?[e]:[]}).then((function(n){if(1e4==n.status.code)if(e){if(t.filterList=n.data.items,!t.isFirstExposure){t.isFirstExposure=!0;try{var o=n.data.items.map((function(t){return t.id}));t.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:"ai_filter",position:o.slice(0,9)})}catch(t){}}}else t.allFilterList=n.data.items})).finally((function(){t.loading=!1}))},handleClick:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.label&&(this.activeTab=e.label),this.activeTabInfo=(this.list||[]).find((function(e){return e.label===t.activeTab}))||null,this.searchKeyword="","recent"===e.id?(this.getRecentList(),this.$logEvent("log_actions",{operation:"click_tag",behavior_info:"on_ai_filter_page",behavior_info_sub:"Recent"})):(this.getFilterList(null==e?void 0:e.id),this.$logEvent("log_actions",{operation:"click_tag",behavior_info:"on_ai_filter_page",behavior_info_sub:e.en})),this.activeFilter="",this.$parent.selectTemplate=""},selectFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.activeFilter!==t.id&&!this.isLoading){this.$logEvent("log_actions",{operation:"click_ai_filter",behavior_info:"on_ai_filter_page",behavior_info_sub:t.id}),this.activeFilter=t.id;var e=(null==t?void 0:t.title)||"";this.$emit("selectFilter",this.activeFilter,e,t)}},handleSearch:function(){this.filteredTemplates.length>0&&!this.activeFilter&&this.selectFilter(this.filteredTemplates[0])},handleFocus:function(){this.$logEvent("log_actions",{operation:"click_search",behavior_info:"on_ai_filter_page"})}}},I=k,j=(n(5073),Object(h.a)(I,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-fast-tools-ai-filter-style"},[e("div",{staticClass:"filter-search-container"},[e("el-input",{attrs:{placeholder:t.$t("SearchFilter"),clearable:""},on:{input:t.handleSearch,focus:t.handleFocus},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}},[e("i",{staticClass:"iconfont icon-sousuo3",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("Categorys",{directives:[{name:"show",rawName:"v-show",value:!t.searchKeyword,expression:"!searchKeyword"}],attrs:{categorys:t.list,currentCategory:t.activeTab},on:{changeCategory:t.handleClick}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.filteredTemplates.length&&!t.loading,expression:"filteredTemplates.length === 0 && !loading"}],staticClass:"filter-style-list-no-result"},[e("img",{attrs:{src:n(1067),alt:"no-result"}}),t._v(" "),e("div",[t._v("\n      "+t._s(t.$t("RelatedFilter"))+"\n    ")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.filteredTemplates.length>0&&t.searchKeyword,expression:"filteredTemplates.length > 0 && searchKeyword"}],staticClass:"filter-style-list-result-title"},[e("span",{staticStyle:{color:"#ffffff"}},[t._v(t._s(t.filteredTemplates.length))]),t._v("\n    "+t._s(t.$t("Results"))+"\n  ")]),t._v(" "),t.activeTabInfo?e("div",{staticClass:"filter-style-list"},[t._l(t.filteredTemplates,(function(n){return[e("ai-filter-style-item",{key:n.id,attrs:{"style-info":n,"active-filter":t.activeFilter},on:{selectFilter:t.selectFilter}})]}))],2):t._e()],1)}),[],!1,null,null,null).exports),S=n(80),$=n(10),P=n(29),T=n(1123),D=n(583),L=n(51),A=n(119),E=n(472),M=n(901);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"AiFilter",components:{AiFilterStyle:j,QuickQueue:A.default,HyUploadBtn:E.default,GuestUpload:M.a},mixins:[T.a,D.a],head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_tools_4"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{iconUrl:n(740),isFirstExposure:!1,isFirstPlay:!1,pollingTimer:null,isLoading:!1,uploading:!1,imgLoading:!1,selectTemplate:"",resultList:[{id:1,url:"",prompt:""}],renderList:[],imgUrl:"",styleName:"",itemInfo:{},UPLOAD:new L.a({type:26}),isShowResult:!1,quickOptions:{},imgInfo:{},estimateCoins:0,inputs:[],isFreeGuestMode:!1,category:26,guestUploadStorageMapId:"ai_tools_ai_filter"}},mounted:function(){this.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:"upload_picture"})},watch:{$route:{handler:function(t){t.query.imgUrl&&this.uploadHandleConfirm([{url:decodeURIComponent(t.query.imgUrl)}])},immediate:!0,deep:!0}},computed:N(N(N(N({},Object(C.e)("payment",["paymentInfo","activeState","liteActiveState"])),Object(C.e)("user",["token"])),Object(C.c)("user",["isCompanyAccount","isLoggedIn"])),{},{isVip:function(){return this.activeState||this.liteActiveState},getResult:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(this.renderList.length?this.renderList[t]:{url:""})||{url:""}}},showCreatBtn:function(){return this.imgUrl&&!this.isLoading&&!this.renderList.some((function(t){return t.url}))},getResultImgUrl:function(){var t;return(null===(t=this.renderList[0])||void 0===t?void 0:t.url)||""},computedPercentage:function(){var t;return(null===(t=this.renderList[0])||void 0===t?void 0:t.process)||0},processLoading:function(){return this.isLoading},isShowHandleBtn:function(){return this.imgUrl&&!this.isLoading&&this.getResultImgUrl}}),methods:{handleImageLoad:function(){this.imgLoading=!1},setGuestUploadSrcData:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).pop();this.uploadHandleConfirm([t]),this.$refs.uploadBtn.handleClose()},startGuestPendingUploadFile:function(){this.uploading=!0},uploadFail:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.uploading=!1,this.saveGuestPendingUploadFile&&this.saveGuestPendingUploadFile(e.map((function(e){return N(N({},e),{},{category:t.category})})))},reUpload:function(){this.uploading||(this.isLoggedIn?this.$refs.uploadBtn.handleClick():this.$refs.guestUploadRef.reUpload())},handleUploadClick:function(){this.$logEvent("log_actions",{operation:"click_upload_picture",behavior_info:"on_ai_filter_page"})},uploadHandleConfirm:function(t){var e=Object(r.a)(t,1)[0];this.removeImage(),this.imgUrl=e.url,this.resultList=[{url:this.imgUrl,prompt:""}],this.storageGuestUploadTempData&&this.storageGuestUploadTempData([N(N({},e),{},{category:this.category})]),this.isFirstExposure||(this.isFirstExposure=!0,this.$logEvent("log_actions",{operation:"exposure",behavior_info:"on_ai_filter_page",behavior_info_sub:"change_picture"}))},handleStartTask:function(){if(!this.isLoading)if(this.imgUrl)if(this.selectTemplate)if(this.paymentInfo.calculateCoins<=0&&this.paymentInfo.tempCoins<=0&&!this.isCompanyAccount)this.$EventBus.$emit(this.isVip?"showVipComputingDialog":"showNotVipComputingDialog");else{if(this.$logEvent("log_actions",{operation:"click_create",behavior_info:"on_ai_filter_page"}),this.isLoggedIn)return this.imgUrl&&!this.resultList[0].prompt?(this.isLoading=!0,void this.extraPrompt(this.imgUrl)):void 0;this.$EventBus.$emit("openLoginDialog")}else this.$message.warning(this.$t("PleaseSelectFilter"));else this.$message.warning(this.$t("pleaseUoloadImage"))},handleSelectFilter:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,data,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:"",r=t.length>1&&void 0!==t[1]?t[1]:"",l=t.length>2&&void 0!==t[2]?t[2]:{},!e.isLoading){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,Object(S.h)({template_id:o});case 7:c=n.sent,data=c.data,1e4===c.status.code&&(e.estimateCoins=data.estimate_coins,e.inputs=data.inputs,e.isFreeGuestMode=!(null==data||!data.is_free_guest_mode));try{e.styleName=r,e.itemInfo=l}catch(t){}if(d=e.renderList.some((function(t){return[1,2].includes(null==t?void 0:t.status)||[3].includes(null==t?void 0:t.status)&&(null==t?void 0:t.process)<100})),!d){n.next=16;break}return e.$message.warning(e.$t("fastToolsProcessTips")),n.abrupt("return");case 16:e.selectTemplate=o,e.resultList[0].url&&(e.imgUrl=e.resultList[0].url,e.renderList=[],e.isShowResult=!1);case 18:case"end":return n.stop()}}),n)})))()},handleSelectImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";["",null,void 0].includes(t)||this.isLoading||this.imgUrl===t||(this.imgLoading=!0,this.imgUrl=t)},removeImage:function(){this.imgUrl="",this.resultList.forEach((function(t){t.url=""})),this.uploading=!1,this.imgLoading=!1,this.isShowResult=!1,this.renderList=[]},downloadImage:function(){this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_ai_filter_page",behavior_info_sub:this.styleName}),Object($.M)(this.getResultImgUrl||"",this.$t("ai_tools_4"))},justPlay:function(){var t,e,n=this;this.$logEvent("log_actions",{operation:"click_play_around",behavior_info:"on_ai_filter_page"}),this.$EventBus.$emit("showDialog",{name:"HyAssembleModal",data:{doorCode:"aiImageApp",workUrl:null===(t=this.imgInfo)||void 0===t?void 0:t.img_uris[0].url,source:7,taskReferIndex:null===(e=this.imgInfo)||void 0===e?void 0:e.img_uris[0].index,taskId:this.imgInfo.task_id,onAfterAction:function(){n.$EventBus.$emit("hideDialog","HyAssembleModal")}}})},extraPrompt:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:""){n.next=5;break}return e.$message.warning(e.$t("pleaseUoloadImage")),e.isLoading=!1,n.abrupt("return");case 5:return r={apply_id:e.selectTemplate,inputs:e.inputs.filter((function(t){return"image"===t.field})).map((function(t){return{field:t.field,node_id:t.node_id,node_type:t.node_type,val:o}}))},e.isLoggedIn||(r.g_mode=1),n.abrupt("return",Object(S.f)(r).then((function(t){var n,o=null==t||null===(n=t.data)||void 0===n?void 0:n.id;return!!o&&e.pollingPromptTask(o)})).catch((function(){e.isLoading=!1})));case 8:case"end":return n.stop()}}),n)})))()},mouseup:function(){this.$logEvent("log_actions",{operation:"click_compare",behavior_info:"on_ai_filter_page"}),this.isShowResult=!0},pollingPromptTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(P.batchFetchTaskProcess)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,e.renderList=[],void o();if(3===l[0].status){e.imgInfo=l[0];var c=l[0],d=c.img_uris,v=void 0===d?{}:d,h=c.process,f=void 0===h?0:h,m=c.status,_=void 0===m?0:m,y=v||[];e.renderList.forEach((function(t){var n;e.$set(t,"process",f||0),e.$set(t,"status",_||0),e.$set(t,"url",(null===(n=y[0])||void 0===n?void 0:n.url)||"")})),e.isFirstPlay||(e.isFirstPlay=!0,e.$logEvent("exposure",{operation:"generate_result",behavior_info:"on_ai_filter_page",behavior_info_sub:"play_around"}),e.$logEvent("exposure",{operation:"generate_result",behavior_info:"on_ai_filter_page",behavior_info_sub:"download"}),e.$logEvent("exposure",{operation:"generate_result",behavior_info:"on_ai_filter_page",behavior_info_sub:"compare"})),e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,e.isShowResult=!0,n()}else{var w=l[0],C=w.process,O=void 0===C?0:C,x=w.status,k=void 0===x?0:x;e.renderList.length?e.renderList.forEach((function(t){e.$set(t,"process",O||0),e.$set(t,"status",k||0)})):e.renderList=[{url:"",process:O||0,status:k||0}],[1,2].includes(l[0].status)&&e.pollingPromptTask(t)}})).catch((function(n){var r;if(e.resultList.length&&(null===(r=e.resultList[0])||void 0===r||!r.prompt))return e.pollingPromptTask(t);e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))}}},F=U,B=(n(5074),Object(h.a)(F,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"c-fast-tools-ai-filter"},[n("div",{staticClass:"result-area-left"},[n("ai-filter-style",{attrs:{"is-loading":e.isLoading},on:{selectFilter:e.handleSelectFilter}})],1),e._v(" "),n("div",{staticClass:"result-area"},[n("div",{staticClass:"top-bar"},[n("div",{staticClass:"top-bar-icon"},[n("img",{attrs:{src:e.iconUrl,alt:""}})]),e._v(" "),n("h1",{staticClass:"top-bar-main-title"},[e._v(e._s(e.$t("ai_filter_h1")))]),e._v(" "),n("div",{staticClass:"top-bar-sub-title"},[e._v(e._s(e.$t("ai_filter_h1_intro")))])]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"},{name:"show",rawName:"v-show",value:!e.imgUrl&&e.isLoggedIn,expression:"!imgUrl && isLoggedIn"}],staticClass:"upload-box",on:{click:e.handleUploadClick}},[n("HyUploadBtn",{ref:"uploadBtn",attrs:{boxw:"100%",boxh:"100%",category:e.category,isSingleSelect:"",coverImg:e.imgUrl,styleObj:{txtSize:"22px",iconSize:"32px"},isNeedLogin:!1,"data-event":"ai_tools_ai_filter_upload_btn"},on:{onConfirm:e.uploadHandleConfirm}})],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"},{name:"show",rawName:"v-show",value:!e.imgUrl&&!e.isLoggedIn,expression:"!imgUrl && !isLoggedIn"}],staticClass:"upload-box custom-upload-box"},[n("guest-upload",{ref:"guestUploadRef",attrs:{fileTypes:["image"],category:e.category,uploadObj:{},"data-event":"ai_tools_ai_filter_guest_upload_btn"},on:{onUploadStart:function(t){e.uploading=!0},onUploadSuccess:e.uploadHandleConfirm,onUploadFail:e.uploadFail}},[n("div",{staticClass:"guest-upload-btn flex_c_m box-border"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgUrl,expression:"!imgUrl"}],staticClass:"content-box flex_c_m"},[n("i",{staticClass:"iconfont icon-a-icon-addimg2img"}),e._v(" "),n("p",{staticClass:"text"},[e._v("\n              "+e._s(e.$t("selectImage"))+"\n            ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl,expression:"imgUrl"}],staticClass:"content-img-box flex_c_m"},[n("img",{staticClass:"cover-img",attrs:{src:e.imgUrl,alt:"img"}}),e._v(" "),n("div",{staticClass:"delete-btn"},[n("i",{staticClass:"iconfont icon-postDelete"})])])])])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl,expression:"imgUrl"},{name:"loading",rawName:"v-loading",value:e.imgUrl&&(e.imgLoading||e.uploading),expression:"imgUrl && (imgLoading || uploading)"}],staticClass:"show-content"},[e.imgUrl?n("img",{directives:[{name:"show",rawName:"v-show",value:!e.isShowResult,expression:"!isShowResult"}],attrs:{src:e.imgUrl,alt:""},on:{load:e.handleImageLoad,error:e.handleImageLoad}}):e._e(),e._v(" "),e.imgUrl&&e.getResultImgUrl?n("img",{directives:[{name:"show",rawName:"v-show",value:e.isShowResult,expression:"isShowResult"}],attrs:{src:e.getResultImgUrl,alt:""}}):e._e(),e._v(" "),[n("span",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl&&e.imgUrl===(null==this||null===(t=this.resultList[0])||void 0===t?void 0:t.url)&&!e.isLoading,expression:"imgUrl && imgUrl === this?.resultList[0]?.url && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(t){return t.stopPropagation(),e.reUpload.apply(null,arguments)}}},[n("i",{staticClass:"iconfont icon-qiehuantupian"}),e._v("\n          "+e._s(e.$t("ChangePicture"))+"\n        ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHandleBtn,expression:"isShowHandleBtn"}],staticClass:"bottom-btn-box"},[n("span",{staticClass:"bottom-download-btn",on:{click:function(t){return t.stopPropagation(),e.justPlay.apply(null,arguments)}}},[n("i",{staticClass:"iconfont icon-icon_play1"}),e._v("\n            "+e._s(e.$t("remix_magic"))+"\n          ")]),e._v(" "),n("span",{staticClass:"bottom-download-btn",on:{click:function(t){return t.stopPropagation(),e.downloadImage.apply(null,arguments)}}},[n("i",{staticClass:"iconfont icon-icon_xiazai"})]),e._v(" "),n("span",{staticClass:"bottom-download-btn",on:{mousedown:function(t){e.isShowResult=!1},mouseup:e.mouseup}},[n("i",{staticClass:"iconfont icon-a-duibi1",staticStyle:{"font-size":"18px"}})])])],e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading-mask"},[e._v("\n        "+e._s(e.computedPercentage?e.computedPercentage+"%":e.$t("TaskStatusPreparing")+"...")+"\n        "),n("el-progress",{attrs:{percentage:e.computedPercentage,"show-text":!1}}),e._v(" "),n("QuickQueue",{attrs:{quickOptions:e.quickOptions,quickStyle:{height:"40px",fontSize:"14px"}}})],1)],2),e._v(" "),n("div",{staticClass:"bottom-generate-btn",class:[(e.isLoading||!e.imgUrl)&&"bottom-generate-btn-disable"],attrs:{"data-event":"ai_tools_ai_filter_generate_btn"},on:{click:function(t){return t.stopPropagation(),e.handleStartTask.apply(null,arguments)}}},[e.isFreeGuestMode?n("span",{staticClass:"free-guest-mode-badge"},[n("p",{staticClass:"free-guest-mode-badge-text"},[e._v(e._s(e.$t("blog_try")))])]):e._e(),e._v(" "),n("p",{staticClass:"bottom-download-btn-text"},[e._v(e._s(e.$t("taskTabCreate")))]),e._v(" "),e.estimateCoins&&e.isLoggedIn?n("p",{staticClass:"bottom-download-btn-text-1"},[e._v("\n        "+e._s(e.$t("expend"))+" : "+e._s(e.estimateCoins)+"\n      ")]):e._e()])])])}),[],!1,null,null,null));e.default=B.exports;installComponents(B,{QuickQueue:n(119).default})},5750:function(t,e,n){"use strict";n.r(e);n(18),n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(3),r=n(2),l=(n(26),n(20),n(16),n(31),n(40),n(41),n(141),n(142),n(109),n(10)),c=n(119),d=n(61),v=n(1);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var f={props:["info","quickOptions"],data:function(){return{isShowResult:!1,downLoading:!1}},components:{QuickQueue:c.default},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(v.c)("user",["isLoggedIn"])),methods:{handleUploadClick:function(){this.$refs.uploadRef.$el.querySelector('input[type="file"]').click()},handleUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.size/1024/1024>10)){n.next=11;break}return n.prev=1,n.next=4,Object(d.a)(t,10485760);case 4:t=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),console.error("Compression failed:",n.t0),n.abrupt("return");case 11:o=URL.createObjectURL(new Blob([e.fileToBlob(t)])),Object(l.x)(o).then((function(t){var n=t.width,o=t.height;e.$emit("change",{width:n,height:o})})),e.$emit("change",{base64:o,file:t});case 14:case"end":return n.stop()}}),n,null,[[1,7]])})))()},fileToBlob:function(t){return t.slice(0,t.size,t.type)},delImg:function(){this.$emit("change",{base64:"",img_url:"",resultUrl:"",file:null})},changeStrength:function(t){this.$emit("change",{beauty_gear:t})},downloadImg:function(){var t=this;this.downLoading||(this.downLoading=!0,Object(l.M)(this.info.resultUrl,"seaart",(function(){t.downLoading=!1})),this.collectionData("click_download_image"))},collectionData:function(t){var e;this.$logEvent("log_actions",{operation:t,behavior_info:"on_ai_makeup",behavior_info_sub:(null==this||null===(e=this.info)||void 0===e?void 0:e.resultUrl)||""})},viewImage:function(){this.info.resultUrl&&this.$viewImage([this.info.resultUrl])},imgLoad:function(){3===this.info.loading&&this.$emit("change",{loading:0})}}},m=f,_=(n(5093),n(0)),component=Object(_.a)(m,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"handle-panel"},[n("div",{staticClass:"upload-box"},[null!==(t=e.info)&&void 0!==t&&t.base64?[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.isShowResult,expression:"!isShowResult"}],attrs:{src:e.info.resultUrl||e.info.base64||e.info.img_url,alt:""},on:{click:e.viewImage,load:e.imgLoad}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isShowResult,expression:"isShowResult"}],attrs:{src:e.info.base64||e.info.img_url,alt:""}}),e._v(" "),n("span",{staticClass:"del-btn handle-btn",on:{click:e.delImg}},[e._v("×")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.info.resultUrl,expression:"info.resultUrl"}],staticClass:"handle-btns"},[n("span",{staticClass:"handle-btn",on:{click:e.downloadImg}},[n("i",{class:e.downLoading?"el-icon-loading":"iconfont icon-icon_xiazai"})]),e._v(" "),n("span",{staticClass:"handle-btn",on:{mousedown:function(t){e.isShowResult=!0},click:function(t){return e.collectionData("click_ai_makeup_compare")},mouseup:function(t){e.isShowResult=!1}}},[n("i",{staticClass:"iconfont icon-a-duibi1"})])])]:n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.info.loading,expression:"info.loading"}],ref:"uploadRef",staticClass:"upload-btn",attrs:{action:"/",drag:"","before-upload":e.handleUpload,accept:".jpg,.png,.jpeg,.webp","show-file-list":!1}},[n("div",{staticClass:"upload-box-content",on:{click:function(t){return t.stopPropagation(),e.handleUploadClick.apply(null,arguments)}}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("p",[e._v(e._s(e.$t("UploadImg")))])])])],2),e._v(" "),n("div",{staticClass:"strength-box"},[e._v("\n    "+e._s(e.$t("MakeupIntensity"))+"\n    "),n("el-slider",{staticClass:"custom-tooltip",attrs:{value:e.info.beauty_gear,min:1,max:5,step:1},on:{input:e.changeStrength}}),e._v(" "),n("span",{staticClass:"num"},[e._v(e._s(e.info.beauty_gear))])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.info.loading,expression:"info.loading"}],staticClass:"loading"},[[1,3].includes(e.info.loading)?[n("i",{staticClass:"el-icon-loading"}),e._v(" "),n("p",[e._v(e._s(e.$t(1===e.info.loading?"Uploading":"loading_tip"))+"...")])]:2===e.info.loading?[e._v("\n      "+e._s(e.info.process?e.info.process+"%":e.$t("TaskStatusPreparing")+"...")+"\n      "),n("el-progress",{attrs:{percentage:e.info.process,"show-text":!1}}),e._v(" "),n("p",{staticClass:"wait-text"},[e._v(e._s(e.$t("MakeupWait")))]),e._v(" "),n("QuickQueue",{attrs:{quickOptions:e.quickOptions,quickStyle:{height:"36px",fontSize:"14px"}}})]:e._e()],2)])}),[],!1,null,"7fce3273",null),y=component.exports;installComponents(component,{QuickQueue:n(119).default});var w=n(51),C=n(1150),O=n(29);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={components:{UploadBox:y},props:["exampleList"],data:function(){return{isShowPopup:!1,loading:0,process:0,template_id:0,UPLOAD:new w.a({type:27}),pollingTimer:null,imgInfo:{width:0,height:0,base64:"",img_url:"",resultUrl:"",file:null,beauty_gear:2},quickOptions:{}}},computed:k(k(k({},Object(v.e)("user",["token"])),Object(v.c)("user",["isCompanyAccount"])),{},{info:function(){return k({loading:this.loading,process:this.process},this.imgInfo)}}),methods:{show:function(t){var e=t.id,n=t.beauty_gear;this.template_id=e,this.imgInfo.beauty_gear=n,this.isShowPopup=!0},changeImg:function(t){void 0===t.loading?this.$set(this,"imgInfo",k(k({},this.imgInfo),t)):this.loading=t.loading},changeTemp:function(t){var e=t.id,n=t.beauty_gear;this.loading||(this.template_id=e,this.imgInfo.beauty_gear=n)},generate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.imgInfo.file,t.token){e.next=4;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return",t.$message.error(t.$t("pleaseSelectImage")));case 6:if(t.loading=1,e.prev=7,null!==(o=t.imgInfo)&&void 0!==o&&o.img_url){e.next=12;break}return e.next=11,t.UPLOAD.startUpload(n);case 11:t.imgInfo.img_url=e.sent;case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(7),t.loading=0,e.abrupt("return");case 18:t.loading=2,Object(C.a)(t.getParams()).then((function(e){t.pollingTask(e.data.id)})).catch((function(e){t.clearPolltime(0)}));case 20:case"end":return e.stop()}}),e,null,[[7,14]])})))()},pollingTask:function(t){var e=this;this.pollingTimer=setTimeout((function(){Object(O.batchFetchTaskProcess)({task_ids:[t]}).then((function(n){e.quickOptions=n.data.items[0],e.handlePollResult(n.data.items[0],t)})).catch((function(t){e.clearPolltime()}))}),3e3)},handlePollResult:function(t,e){var n=t.status,o=t.process,r=t.img_uris;this.process=o,n<3?this.pollingTask(e):3===n?(this.imgInfo.resultUrl=r[0].url,this.clearPolltime(3)):this.clearPolltime(0)},clearPolltime:function(t){clearTimeout(this.pollingTimer),this.pollingTimer=null,this.loading=t,this.process=0},getParams:function(){var t=this.template_id,e=this.imgInfo,n=e.width,o=e.height,r=e.img_url;return{template_id:t,width:n,height:o,beauty_gear:e.beauty_gear,img_url:r}},closePopup:function(){this.imgInfo={width:0,height:0,base64:"",img_url:"",resultUrl:"",file:null,beauty_gear:2},this.clearPolltime(),this.isShowPopup=!1}}},j=(n(5094),Object(_.a)(I,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"custom-dialog beauty-popup",attrs:{visible:t.isShowPopup,title:t.$t("AiMakeupBtn"),"before-close":t.closePopup,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isShowPopup=e}}},[e("div",{staticClass:"dialog-body"},[e("upload-box",{attrs:{info:t.info,quickOptions:t.quickOptions},on:{change:t.changeImg}}),t._v(" "),e("div",{staticClass:"style-panel"},t._l(t.exampleList,(function(n){return e("div",{key:"style_"+n.id,staticClass:"style-item",class:{active:n.id===t.template_id},on:{click:function(e){return t.changeTemp(n)}}},[e("img",{attrs:{src:n.cover,alt:""}}),t._v(" "),e("p",[t._v(t._s(n.name))])])})),0)],1),t._v(" "),e("div",{staticClass:"btn-group",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:Boolean(t.loading)},on:{click:t.generate}},[t._v("\n      "+t._s(t.$t("photography20"))+"\n      "),t.isCompanyAccount?t._e():e("span",{staticClass:"tips"},[t._v("("+t._s(t.$t("expend"))+": 5)")])])],1)])}),[],!1,null,"2d180bc6",null).exports),S=n(208),$={props:["item"]},P=(n(5095),Object(_.a)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"style-banner"},[e("el-carousel",{staticClass:"banner-list",attrs:{interval:4e3,"indicator-position":"outside"}},t._l(t.item.sample_covers,(function(n,i){return e("el-carousel-item",{key:t.item.id+i,staticClass:"banner-item",style:{backgroundImage:"url(".concat(n.before,")")}},[e("div",{staticClass:"show-img",style:{backgroundImage:"url(".concat(n.after,")")}})])})),1),t._v(" "),e("div",{staticClass:"style-name"},[t._v(t._s(t.item.name))])],1)}),[],!1,null,"bd02ce36",null).exports),T={components:{BeautyPopup:j,LineLoading:S.default,StyleBanner:P},head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_makeup"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{exampleList:[]}},mounted:function(){this.getBeautyTemp()},methods:{showBeautyPopup:function(t){this.$refs.beautyPopup.show(t)},getBeautyTemp:function(){var t=this;Object(C.b)().then((function(e){var n=(e.data||{}).items;t.$set(t,"exampleList",n||[])}))}}},D=(n(5096),Object(_.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"beauty-page"},[e("div",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-Union1"}),t._v(" "),e("h1",[t._v(t._s(t.$t("ai_makeup")))]),t._v(" "),e("i",{staticClass:"iconfont icon-icon_star"})]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("ai_makeup_desc")))]),t._v(" "),e("div",{staticClass:"example-list"},[t.exampleList.length?t._l(t.exampleList,(function(n){return e("style-banner",{key:n.id,attrs:{item:n},nativeOn:{click:function(e){return t.showBeautyPopup(n)}}})})):e("div",{staticClass:"loading"},[e("line-loading")],1)],2),t._v(" "),e("beauty-popup",{ref:"beautyPopup",attrs:{exampleList:t.exampleList}})],1)}),[],!1,null,"1f862852",null));e.default=D.exports},5751:function(t,e,n){"use strict";n.r(e);n(18),n(11),n(6),n(12),n(13),n(8);var o=n(3),r=n(2),l=(n(777),n(47),n(511)),c=n.n(l),d=(n(778),n(512)),v=n.n(d),h=(n(20),n(49),n(4),n(7),n(26),n(921)),f=n(61),m=n(51),_=n(95),y=(n(1098),{data:function(){return{visible:!1,storys:[],storyDesc:"",num:4,character_desc:"",loading:!1}},watch:{visible:{handler:function(t){t||(this.storyDesc="")}}},methods:{show:function(t){var e=t.list,n=t.num,o=t.character_desc;this.storys=e,this.num=n,this.character_desc=o,this.visible=!0},sub:function(){var t=this;this.loading||(this.storyDesc?(this.loading=!0,Object(_.g)({num:this.num,story_desc:this.storyDesc,character_desc:this.character_desc}).then((function(e){1e4===e.status.code&&(t.$emit("change",e.data.storyboards),t.visible=!1)})).finally((function(){t.loading=!1}))):this.$message.warning(this.$t("comicPage18")))}}}),w=(n(5110),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,"custom-class":"comicStoryboardAssistant","modal-append-to-body":!0,"append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":"",title:t.$t("comicPage20"),width:"960px"},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"cnt"},[e("div",{staticClass:"tit"},[t._v(t._s(t.$t("comicPage21")))]),t._v(" "),e("div",{staticClass:"storyList"},t._l(t.storys,(function(n,o){return e("div",{key:o,staticClass:"storyItme",on:{click:function(e){t.storyDesc=n.desc}}},[t._v("\n        "+t._s(n.title)+"\n      ")])})),0),t._v(" "),e("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":"",placeholder:t.$t("comicPage22")},model:{value:t.storyDesc,callback:function(e){t.storyDesc=e},expression:"storyDesc"}})],1),t._v(" "),e("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),e("el-button",{attrs:{loading:t.loading},on:{click:t.sub}},[t._v(t._s(t.$t("Confirm")))])],1)])}),[],!1,null,"22e3d1d3",null).exports,O=n(29),x=n(10),k=(n(16),n(19),n(43),n(77),n(21),n(249)),I=n(45),j=n(27),S=n(260),$={props:{workInfo:{type:Object,default:function(){}}},mixins:[I.a],components:{CollectionCreate:k.default},data:function(){return{dialogVisible:!1,createShow:!1,folderlist:[],onloading:!1,keyword:"",isLoding:!1,replaceImageType:x.K}},computed:{filteredList:function(){var t=this;return this.folderlist.filter((function(e){return e.name.includes(t.keyword)&&"all"!=e.id}))}},watch:{dialogVisible:{handler:function(t){this.keyword="",t?(this.onloading=!0,this.getCollectionList()):this.folderlist=[]}}},methods:{onSave:function(t){var e=this;this.isLoding||(this.isLoding=!0,Object(S.h)({folder_no:t.id,id:this.workInfo.id,index:this.workInfo.index}).then((function(t){1e4==t.status.code&&(e.$message.success(e.$t("SaveSuccess")),e.dialogVisible=!1,e.$emit("onSave"))})).finally((function(){e.isLoding=!1})))},getCollectionList:function(){var t=this;Object(j.J)({type:1,category:2}).then((function(e){var n=JSON.parse(JSON.stringify(e.data.items));n.forEach((function(element){element.imgList=[];var e=element.artwork_items?element.artwork_items:null;if(e){var n={url:1==e.status&&(2==e.primary||e.account_no==t.userInfo.id)&&e.banner&&e.banner.url?e.banner.url:null,nsfw:e.nsfw,id:e.id};element.imgList.push(n)}})),t.folderlist=n})).finally((function(){t.onloading=!1}))}}},P=(n(5111),Object(w.a)($,(function(){var t=this,e=t._self._c;return e("div",[e("el-popover",{attrs:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({placement:"bottom-start",width:"309","popper-class":"folderList"},"popper-class","folderList ".concat(t.createShow?"display_none":"")),"visible-arrow",!1),"title",t.$t("Save")),"trigger","click"),model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e("div",{staticClass:"cltpop-cent"},[e("div",{staticStyle:{padding:"0 10px"}},[e("div",{staticClass:"search"},[e("i",{staticClass:"iconfont icon-folder-search"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:t.$t("Search")},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.keyword.length,expression:"keyword.length == 0"}]},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("deffcollect")))]),t._v(" "),e("div",{staticClass:"itembox",on:{click:function(e){return t.onSave({id:"default"})}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[e("i",{staticClass:"iconfont icon-deff-mycollect"})]),t._v(" "),e("span",[t._v(t._s(t.$t("UnorganizedIdeas")))])]),t._v(" "),e("el-button",{attrs:{loading:t.isLoding}},[t._v(t._s(t.$t("Save")))])],1)]),t._v(" "),e("div",{staticClass:"popTitle"},[t._v(t._s(t.$t("myfolder")))]),t._v(" "),t.onloading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.onloading,expression:"onloading"}],staticClass:"loadbox"}):t._e(),t._v(" "),e("div",{staticClass:"list"},t._l(t.filteredList,(function(n,o){return e("div",{key:o,staticClass:"itembox",on:{click:function(e){return t.onSave(n)}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[n.imgList&&n.imgList[0]&&n.imgList[0].url?e("img",{attrs:{decoding:"async",loading:"lazy",src:t.replaceImageType(n.imgList[0].url,"high")}}):e("i",{staticClass:"iconfont icon-deff-collect"})]),t._v(" "),e("span",[t._v(t._s(n.name))])]),t._v(" "),e("el-button",{attrs:{loading:t.isLoding}},[t._v(t._s(t.$t("move")))])],1)})),0)]),t._v(" "),e("div",{staticClass:"create"},[e("div",{staticClass:"itembox",on:{click:function(e){t.createShow=!0}}},[e("div",{staticClass:"itemboxinfo"},[e("div",{staticClass:"itemboxinfoleft"},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("span",[t._v(t._s(t.$t("collectBox1")))])])])])]),t._v(" "),e("template",{slot:"reference"},[t._t("default")],2)],2),t._v(" "),e("collection-create",{attrs:{category:!0,width:"718px",type:"artwork"},on:{create:function(e){t.dialogVisible=!1}},model:{value:t.createShow,callback:function(e){t.createShow=e},expression:"createShow"}})],1)}),[],!1,null,"432453fb",null)),T=P.exports;installComponents(P,{CollectionCreate:n(249).default});var D={data:function(){return{isGrid:!1,list:[],show:!1,loading:!1,after_id:"",isMore:!0,deleteLoading:!1}},watch:{show:{handler:function(t){t&&this.intList()}}},components:{saveWork:T},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(x.F)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},methods:{downLoad:function(t){Object(x.M)(t)},handleDeleteImge:function(t,e,n,o){var r=this;this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var l={id:t,index:e};r.deleteLoading=!0,Object(S.d)(l).then((function(t){var e,l,c,d;["10000",1e4].includes(null==t||null===(e=t.status)||void 0===e?void 0:e.code)?(null===(l=r.list[n])||void 0===l||l.img_uris.splice(o,1),0==(null===(c=r.list[n])||void 0===c?void 0:c.img_uris.length)&&r.list.splice(n,1),0==r.list.length&&(r.isMore=!1),r.$message({message:r.$t("deleteSuccess"),type:"success"})):r.$message({message:(null==t||null===(d=t.status)||void 0===d?void 0:d.msg)||r.$t("ServerError"),type:"error"})})).finally((function(){r.deleteLoading=!1}))})).catch((function(t){}))},handleDeleteTask:function(t){var e=this;this.$confirm(this.$t("deleteTaskConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){var n={ids:[e.list[t].id]};e.deleteLoading=!0,Object(O.deleteTaskRecord)(n).then((function(n){var o,r;["10000",1e4].includes(null==n||null===(o=n.status)||void 0===o?void 0:o.code)?(e.list.splice(t,1),0==e.list.length&&(e.isMore=!1),e.$message({message:e.$t("deleteSuccess"),type:"success"})):e.$message({message:(null==n||null===(r=n.status)||void 0===r?void 0:r.msg)||e.$t("ServerError"),type:"error"})})).finally((function(){e.deleteLoading=!1}))})).catch((function(t){}))},checkLoadMore:function(){var t=this.$refs.list,e=t.scrollTop,n=t.scrollHeight;e+t.clientHeight>=n-300&&this.getList()},intList:function(){this.list=[],this.isMore=!0,this.loading=!1,this.after_id="",this.getList()},getList:function(){var t=this;if(!this.loading&&this.isMore){this.loading=!0;var e={limit:10};this.after_id&&(e.after_id=this.after_id),Object(_.h)(e).then((function(e){1e4===e.status.code&&(t.list=t.list.concat(e.data.items||[]),t.list.length>0&&(t.after_id=t.list[t.list.length-1].id),t.list.forEach((function(t){t.srcList=[],t.img_uris&&t.img_uris.forEach((function(e){t.srcList.push(e.url)}))})),0==e.data.items.length&&(t.isMore=!1))})).finally((function(){t.loading=!1}))}}}},L=(n(5112),n(5113),Object(w.a)(D,(function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{placement:"bottom",trigger:"manual","visible-arrow":!1,"popper-class":"historyPopover"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"cnt"},[e("div",{staticClass:"head"},[e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont icon-workflow_icon_list",style:{color:t.isGrid?null:"#ffffff"},on:{click:function(e){t.isGrid=!1}}}),t._v(" "),e("i",{staticClass:"iconfont icon-workflow_icon_grid",style:{color:t.isGrid?"#ffffff":null},on:{click:function(e){t.isGrid=!0}}})]),t._v(" "),e("span",{staticClass:"workflow-history-modal__header-icon el-icon-refresh",on:{click:function(e){return e.stopPropagation(),t.intList()}}})]),t._v(" "),e("div",{ref:"list",staticClass:"list",on:{scroll:t.checkLoadMore}},[t._l(t.list,(function(o,r){var l,c,d,v,h;return e("div",{key:r,staticClass:"row"},[e("div",{staticClass:"tit"},[e("div",{staticClass:"info"},[e("img",{attrs:{src:n(275),alt:""}}),t._v(" "),e("span",[t._v(t._s(t.$t("SeaArtBot")))]),t._v(" "),e("span",[t._v(t._s(t._f("formatDateTime")(o.create_at)))])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",[e("div",{staticClass:"task-info-tips"},[e("p",[e("span",[t._v(t._s(t.$t("TaskID")))]),e("span",[t._v(t._s(o.id))])]),t._v(" "),3===o.status?[[1,2,"1","2"].includes(null==o?void 0:o.pub_community)?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("status")))]),t._v(" "),e("span",{staticClass:"task-pub-status"},[t._v(t._s([2,"2"].includes(null==o?void 0:o.pub_community)?t.$t("createSetting1"):t.$t("createSetting2")))])]):t._e(),t._v(" "),e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("expend")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==o||null===(l=o.deduction_detail)||void 0===l?void 0:l.temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==o||null===(c=o.deduction_detail)||void 0===c?void 0:c.hashrate))])])]),t._v(" "),null!=o&&null!==(d=o.deduction_detail)&&void 0!==d&&d.history_hashrate?e("p",[e("span",{staticClass:"task-info-tips-label"},[t._v(t._s(t.$t("currentBalance")))]),t._v(" "),e("span",{staticClass:"task-info-tips-content"},[e("span",[t._v(t._s(t.$t("tempCoins"))+" : "+t._s(null==o||null===(v=o.deduction_detail)||void 0===v?void 0:v.after_temp_hashrate))]),t._v(" "),e("span",[t._v(t._s(t.$t("calculateCoins"))+" : "+t._s(null==o||null===(h=o.deduction_detail)||void 0===h?void 0:h.after_hashrate))])])]):t._e()]:t._e()],2)]),t._v(" "),e("i",{staticClass:"iconfont icon-task_tips",attrs:{slot:"reference"},slot:"reference"})]),t._v(" "),e("span",{staticClass:"el-icon-delete task-info-icon",on:{click:function(e){return t.handleDeleteTask(r)}}})],1)]),t._v(" "),e("div",{staticClass:"imgs"},t._l(o.img_uris,(function(n,l){return e("div",{key:l,staticClass:"imgBox",class:{"bg-nsfw":1===o.nsfw,gridImg:!t.isGrid}},[1!==o.nsfw?e("el-image",{attrs:{src:n.url,"preview-src-list":o.srcList,fit:"cover"}}):t._e(),t._v(" "),e("div",{staticClass:"btnMask"},[e("div",{staticClass:"hoverBtnBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("DownloadImg"),placement:"top"}},[e("div",{staticClass:"hoverBtn",on:{click:function(e){return t.downLoad(n.url)}}},[e("i",{staticClass:"iconfont icon-modelDownload"})])]),t._v(" "),n.is_saved_personal?t._e():e("saveWork",{attrs:{workInfo:{id:o.id,index:n.index}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Save"),placement:"top"}},[e("div",{staticClass:"hoverBtn"},[e("i",{staticClass:"iconfont icon-save"})])])],1),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Delete"),placement:"top"}},[e("div",{staticClass:"hoverBtn",on:{click:function(e){return t.handleDeleteImge(o.id,n.index,l,r)}}},[e("i",{staticClass:"iconfont icon-moveDeleteTask"})])])],1)])],1)})),0)])})),t._v(" "),t.isMore?t._e():e("div",{staticClass:"defBox"},[t._v(t._s(t.$t("done_tip")))]),t._v(" "),t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loadBox"}):t._e()],2)]),t._v(" "),e("div",{attrs:{slot:"reference"},slot:"reference"},[t._t("default")],2)])}),[],!1,null,"14a6c7c3",null).exports),A=n(213),E=n(1);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_comic_fitting_title"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{isAdv:!1,formData:{},imgs:[],previewImgs:[],defaultData:{},isFaceRefer:!1,isUploading:!1,defComic_descs:[],activateSeed:1,loading:!1,sampleShow:!0,imgIndex:0,downLoading:!1,taskId:"",pageLoading:!0,promptLoading:!1,samplePopoverShow:!1,loadingProgress:0,use_render:!1,hasSave:!1}},components:{pickWorkModal:h.a,comicStoryboardAssistant:C,historyPageVue:L,saveWork:T,LoadingStatus:A.default,ElCollapse:v.a,ElCollapseItem:c.a},computed:R(R({},Object(E.c)("user",["isLoggedIn"])),{},{expend:function(){var t=4,e=this.formData.height;return this.formData.width>this.formData.height&&(e=this.formData.width),[{max:512,min:0,val:4},{max:768,min:512,val:6},{max:1024,min:768,val:8}].forEach((function(n){e>n.min&&e<=n.max&&(t=n.val||4)})),t*this.formData.num}}),watch:{isFaceRefer:{handler:function(t){t||(this.formData.ref_images=[])}},samplePopoverShow:{handler:function(t){this.$logEvent("log_actions",{operation:"click_example",behavior_info:"on_ai_comic_create_page"})}},"formData.num":{handler:function(t){var e,n,o,r,l=this;this.formData.comic_descs=[];for(var i=0;i<this.formData.num;i++)this.formData.comic_descs.push("");null!==(e=this.defaultData)&&void 0!==e&&e.default_comic_text_descs&&(null===(n=this.defaultData)||void 0===n||null===(n=n.default_comic_text_descs)||void 0===n?void 0:n.length)>0&&(null===(r=this.defaultData)||void 0===r||r.default_comic_text_descs.forEach((function(t,e){(l.formData.comic_descs[e]||""==l.formData.comic_descs[e])&&l.$set(l.formData.comic_descs,e,t)})));this.defComic_descs&&(null===(o=this.defComic_descs)||void 0===o?void 0:o.length)>0&&this.formData.comic_descs.forEach((function(t,e){(l.formData.comic_descs[e]||""==l.formData.comic_descs[e])&&l.$set(l.formData.comic_descs,e,l.defComic_descs[e])}))}},activateSeed:{handler:function(t){1==t&&(this.formData.seed=this.getRandomSeed()),2==t&&(this.formData.seed="")}},taskId:{handler:function(t){this.hasSave=!1}}},created:function(){this.getComicConfig(),this.isLoggedIn&&this.getComicRunTask()},beforeDestroy:function(){clearTimeout(this.inTimes)},methods:{backTo:function(){window.history.length>2?this.$router.back():this.$router.push(this.localePath("/ai-tools"))},openHistory:function(){this.$refs.historyPageVue.show=!this.$refs.historyPageVue.show,this.$logEvent("log_actions",{operation:"click_history",behavior_info:"on_ai_comic_create_page"})},characterPrompt:function(){var t=this;this.promptLoading||(this.promptLoading=!0,Object(_.c)({character_desc:this.formData.character_desc}).then((function(e){1e4===e.status.code&&(t.formData.character_desc=e.data.rendered_character_desc)})).finally((function(){t.promptLoading=!1})))},downLoad:function(){Object(x.M)(this.imgs[this.imgIndex].url)},getTaskInfo:function(t){var e=this,n={};n.task_ids=t,n.scene=1,Object(O.batchFetchTaskProcess)(n).then((function(n){var o,r,l,c,d;1e4==n.status.code&&(e.loadingProgress=null===(o=n.data)||void 0===o?void 0:o.items[0].process,null!==(r=n.data)&&void 0!==r&&r.items[0]&&3==(null===(l=n.data)||void 0===l||null===(l=l.items[0])||void 0===l?void 0:l.status)?(clearTimeout(e.inTimes),e.imgs=n.data.items[0].img_uris,e.previewImgs=[],e.imgs.forEach((function(t){e.previewImgs.push(t.url)})),e.taskId=n.data.items[0].task_id,e.loading=!1):null!==(c=n.data)&&void 0!==c&&c.items[0]&&4==(null===(d=n.data)||void 0===d||null===(d=d.items[0])||void 0===d?void 0:d.status)?(clearTimeout(e.inTimes),e.$message.warning(e.$t("comicPage17")),e.loading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)))})).catch((function(n){clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}))},onGenerate:function(){var t=this;if(this.isLoggedIn){if(!this.loading)if("simple"!=this.formData.generate_type||this.formData.story_desc){if("advance"==this.formData.generate_type){var e=!0;if(this.formData.comic_descs.forEach((function(t){t||(e=!1)})),!e)return void this.$message.warning(this.$t("comicPage19"));if(!this.formData.character_desc)return void this.$message.warning(this.$t("comicPage24"))}this.loading=!0;var n=this.formData,o=n.generate_type,l=n.story_desc,c=n.style_template,d=n.ref_images,v=n.num,h=n.type_setting_style,f=n.character_desc,m=n.comic_descs,y=n.model_type,w=n.negative_prompt,C=n.seed,O=n.steps,x=n.cfg_scale,k=n.width,I=n.height,j={generate_type:o,story_desc:l,style_template:c,ref_images:d,num:v,type_setting_style:h};"advance"==this.formData.generate_type&&(j={generate_type:o,style_template:c,ref_images:d,type_setting_style:h,character_desc:f,comic_descs:m,model_type:y,negative_prompt:w,seed:C,steps:O,cfg_scale:x,width:k,height:I}),this.use_render&&(j.use_render=!0),Object(_.e)(j).then((function(e){1e4==e.status.code?(t.loadingProgress=0,t.getTaskInfo([e.data.task_id])):70040==e.status.code&&(t.$alert(t.$t("comicPage25"),t.$t("Tip"),Object(r.a)({confirmButtonText:t.$t("Confirm"),callback:function(t){}},"callback",(function(t){}))),t.loading=!1)})).catch((function(e){t.$message.warning(t.$t("comicPage17")),t.loading=!1}))}else this.$message.warning(this.$t("comicPage18"))}else this.$EventBus.$emit("openLoginDialog")},setdefComic_descs:function(){this.defComic_descs=this.formData.comic_descs},setStoryBoard:function(t){var e=this;this.defComic_descs=t,this.formData.comic_descs.forEach((function(t,n){e.$set(e.formData.comic_descs,n,e.defComic_descs[n])})),this.use_render=!0},setNum:function(t,e,n){this.formData[t]<e&&(this.formData[t]=e),this.formData[t]>n&&(this.formData[t]=n),this.formData[t]=parseInt(this.formData[t])},handleImgUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,l,c,i,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isUploading){n.next=2;break}return n.abrupt("return");case 2:if(l=t.target.files,!(3-(null===(r=e.formData.ref_images)||void 0===r?void 0:r.length)<l.length)){n.next=6;break}return e.$message(e.$t("newTrainIntrTip3")),n.abrupt("return");case 6:e.isUploading=!0,c=0,i=0;case 9:if(!(i<l.length)){n.next=29;break}if(!((d=l[i]).size/1024/1024>2)){n.next=24;break}return n.prev=12,n.next=15,Object(f.a)(d,2097152);case 15:d=n.sent,n.next=24;break;case 18:return n.prev=18,n.t0=n.catch(12),++c==l.length&&(e.isUploading=!1),console.error("Compression failed:",n.t0),n.abrupt("continue",26);case 24:new m.a({type:2}).startUpload(d,{name:"face_img".concat(Date.now(),".png"),type:"png",category:2,size:d.size}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formData.ref_images.push(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){})).finally((function(){++c==l.length&&(e.isUploading=!1)}));case 26:i++,n.next=9;break;case 29:case"end":return n.stop()}}),n,null,[[12,18]])})))()},uploadImg:function(){var t;this.isUploading||null!==(t=this.$refs)&&void 0!==t&&t.imgInput&&(this.$refs.imgInput.value=null,this.$refs.imgInput.click())},onFaceDelete:function(t){this.formData.ref_images.splice(t,1)},handlePickImage:function(t){var e=this;t.urls.forEach((function(t){e.formData.ref_images.push(t.url)}))},getRandomSeed:function(){return Math.floor(4294967294*Math.random())+1},getComicRunTask:function(){var t=this;Object(_.f)({scenes:"comicStoryDiffusion"}).then((function(e){1e4===e.status.code&&e.data.task_ids&&e.data.task_ids.length>0&&(t.loading=!0,t.getTaskInfo(e.data.task_ids))}))},getComicConfig:function(){var t=this;Object(_.d)().then((function(e){if(1e4===e.status.code){t.defaultData=e.data;var n=e.data,o=n.default_character_desc,r=n.default_story_desc,l=n.model_type,c=n.style_templates,d=n.type_setting_styles,v=(n.samples,n.default_advance_img_gen_setting);t.formData={generate_type:"simple",story_desc:r.desc,style_template:c[0].id,ref_images:[],num:4,type_setting_style:d[0].id,character_desc:o,comic_descs:[],model_type:l[0],negative_prompt:(null==v?void 0:v.negative_prompt)||"",seed:t.getRandomSeed(),steps:(null==v?void 0:v.steps)||3,cfg_scale:(null==v?void 0:v.cfg_scale)||3,width:(null==v?void 0:v.width)||512,height:(null==v?void 0:v.height)||512},t.pageLoading=!1}}))}}},U=N,F=(n(5114),n(5115),Object(w.a)(U,(function(){var t,e,n,o=this,r=o._self._c;return r("div",[o.pageLoading?r("LoadingStatus",{attrs:{bgColor:"#02050e"}}):r("div",{staticClass:"AiComic"},[r("div",{staticClass:"top"},[r("div",{staticClass:"back",on:{click:function(t){return o.$router.back()}}},[r("i",{staticClass:"el-icon-back"})]),o._v(" "),r("div",{staticClass:"rightBtn"},[o.imgs.length>0?r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.downLoading,expression:"downLoading"}],staticClass:"btnBox",on:{click:o.downLoad}},[r("i",{staticClass:"header-btn-icon iconfont icon-icon_xiazai"}),o._v(" "),r("span",[o._v(o._s(o.$t("Download")))])]):o._e(),o._v(" "),o.imgs.length>0&&!o.hasSave?r("saveWork",{attrs:{workInfo:{id:o.taskId,index:o.imgs[this.imgIndex].index}},on:{onSave:function(t){o.hasSave=!0}}},[r("div",{staticClass:"btnBox"},[r("i",{staticClass:"header-btn-icon iconfont icon-baocun"}),o._v(" "),r("span",[o._v(o._s(o.$t("Save")))])])]):o._e(),o._v(" "),r("historyPageVue",{ref:"historyPageVue",attrs:{"data-event":"ai_tools_ai_comic_history_btn"}},[r("div",{staticClass:"btnBox",on:{click:o.openHistory}},[r("i",{staticClass:"iconfont icon-workflow_icon_lishi header-btn-icon"}),o._v(" "),r("span",[o._v(o._s(o.$t("workFlow11")))])])])],1)]),o._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"funBox"},[r("div",{staticClass:"funCnt"},[r("div",{staticClass:"funBase"},[r("div",{staticClass:"funTab"},[r("div",{class:{activateTab:"simple"==o.formData.generate_type},on:{click:function(t){o.formData.generate_type="simple"}}},[o._v("\n                "+o._s(o.$t("comicPage1"))+"\n              ")]),o._v(" "),r("div",{class:{activateTab:"advance"==o.formData.generate_type},on:{click:function(t){o.formData.generate_type="advance"}}},[o._v("\n                "+o._s(o.$t("tavern24"))+"\n              ")])]),o._v(" "),"simple"==o.formData.generate_type?[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage2")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("comicPage3"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1),o._v(" "),r("el-popover",{attrs:{placement:"right-start",trigger:"click","visible-arrow":!1,"popper-class":"samplePopover"},model:{value:o.samplePopoverShow,callback:function(t){o.samplePopoverShow=t},expression:"samplePopoverShow"}},[r("div",{staticClass:"storySample"},o._l(o.defaultData.story_descs,(function(t,e){return r("div",{key:e,staticClass:"storyItem",on:{click:function(e){o.formData.story_desc=t.desc}}},[o._v("\n                      "+o._s(t.title)+"\n                    ")])})),0),o._v(" "),r("div",{staticClass:"sample",attrs:{slot:"reference"},slot:"reference"},[r("span",[o._v(o._s(o.$t("comicPage4")))]),o._v(" "),r("i",{staticClass:"el-icon-arrow-right"})])])],1),o._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.story_desc,callback:function(t){o.$set(o.formData,"story_desc",t)},expression:"formData.story_desc"}})]:o._e(),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage5")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("comicPage6"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1)]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.style_template,callback:function(t){o.$set(o.formData,"style_template",t)},expression:"formData.style_template"}},o._l(o.defaultData.style_templates,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),o._v(" "),r("div",{staticClass:"faceBox"},[r("div",{staticClass:"faceTit"},[r("span",[o._v(o._s(o.$t("comicPage7")))]),o._v(" "),r("el-switch",{model:{value:o.isFaceRefer,callback:function(t){o.isFaceRefer=t},expression:"isFaceRefer"}})],1),o._v(" "),o.isFaceRefer?r("div",{staticClass:"faceList"},[(null===(t=o.formData.ref_images)||void 0===t?void 0:t.length)<3?r("div",{directives:[{name:"loading",rawName:"v-loading",value:this.isUploading,expression:"this.isUploading"}],staticClass:"faceBnt",on:{click:o.uploadImg}},[r("i",{staticClass:"el-icon-plus"}),o._v(" "),r("span",[o._v(o._s(o.$t("Upload")))]),o._v(" "),r("input",{ref:"imgInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg', image/webp",multiple:""},on:{change:o.handleImgUpload}})]):o._e(),o._v(" "),(null===(e=o.formData.ref_images)||void 0===e?void 0:e.length)<3?r("div",{directives:[{name:"loading",rawName:"v-loading",value:this.isUploading,expression:"this.isUploading"}],staticClass:"faceBnt",on:{click:function(t){!o.isUploading&&o.$refs.pickWorkModal.openModal([])}}},[r("i",{staticClass:"el-icon-plus"}),o._v(" "),r("span",[o._v(o._s(o.$t("CreativeCenterPopup21")))])]):o._e(),o._v(" "),o._l(o.formData.ref_images,(function(t,e){return r("div",{key:e,staticClass:"faceImg"},[r("div",{staticClass:"faceDelete",on:{click:function(t){return o.onFaceDelete(e)}}},[r("i",{staticClass:"el-icon-delete-solid"})]),o._v(" "),r("img",{attrs:{src:t,alt:""}})])}))],2):o._e()]),o._v(" "),"advance"==o.formData.generate_type?[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("tavern6")))]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("newComicPage9"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1)]),o._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.promptLoading,expression:"promptLoading"}],staticClass:"characterBox"},[r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.character_desc,callback:function(t){o.$set(o.formData,"character_desc",t)},expression:"formData.character_desc"}}),o._v(" "),o.formData.character_desc&&o.formData.character_desc.length<200?r("i",{staticClass:"iconfont icon-mofabang1",on:{click:o.characterPrompt}}):o._e()],1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage10"))+" ("+o._s(o.formData.num)+"/8)")]),o._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("newComicPage23"),placement:"right"}},[r("i",{staticClass:"el-icon-warning-outline"})])],1),o._v(" "),r("div",{staticClass:"sample",attrs:{slot:"reference"},on:{click:function(t){return o.$refs.comicStoryboardAssistant.show({list:o.defaultData.comic_descs,num:o.formData.num,character_desc:o.formData.character_desc})}},slot:"reference"},[r("span",[o._v(o._s(o.$t("comicPage12")))]),o._v(" "),r("i",{staticClass:"el-icon-arrow-right"})])])]:o._e(),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("comicPage13")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("num",2,8)}},model:{value:o.formData.num,callback:function(t){o.$set(o.formData,"num",o._n(t))},expression:"formData.num"}})],1),o._v(" "),r("el-slider",{attrs:{max:8,min:2},on:{change:function(t){return o.setNum("num",2,8)}},model:{value:o.formData.num,callback:function(t){o.$set(o.formData,"num",t)},expression:"formData.num"}})],1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("comicPage14")))])])]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.type_setting_style,callback:function(t){o.$set(o.formData,"type_setting_style",t)},expression:"formData.type_setting_style"}},o._l(o.defaultData.type_setting_styles,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),o._v(" "),"advance"==o.formData.generate_type?[r("div",{staticClass:"storyboardBox"},o._l(o.formData.comic_descs,(function(t,e){return r("div",{key:e,staticClass:"storyboardItem"},[r("div",{staticClass:"prepend"},[o._v("P "+o._s(e+1))]),o._v(" "),r("el-input",{attrs:{placeholder:o.$t("comicPage16"),type:"textarea"},on:{blur:o.setdefComic_descs},model:{value:o.formData.comic_descs[e],callback:function(t){o.$set(o.formData.comic_descs,e,t)},expression:"formData.comic_descs[index]"}})],1)})),0)]:o._e()],2),o._v(" "),"advance"==o.formData.generate_type?r("div",{staticClass:"funMore"},[r("el-collapse",[r("el-collapse-item",{attrs:{title:o.$t("TaskUploadImageMoreSetting"),name:"1"}},[r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("AIModel")))])])]),o._v(" "),r("el-select",{attrs:{"popper-class":"custom-select"},model:{value:o.formData.model_type,callback:function(t){o.$set(o.formData,"model_type",t)},expression:"formData.model_type"}},o._l(o.defaultData.model_type,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("NegativePrompts")))])])]),o._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:o.formData.negative_prompt,callback:function(t){o.$set(o.formData,"negative_prompt",t)},expression:"formData.negative_prompt"}}),o._v(" "),r("div",{staticClass:"funTit"},[r("div",{staticClass:"funTitInfo"},[r("span",[o._v(o._s(o.$t("Seed")))])]),o._v(" "),r("div",{staticClass:"seedBox"},[r("div",{class:{activateSeed:1==o.activateSeed},on:{click:function(t){o.activateSeed=1}}},[o._v("\n                      "+o._s(o.$t("Random"))+"\n                    ")]),o._v(" "),r("div",{class:{activateSeed:2==o.activateSeed},on:{click:function(t){o.activateSeed=2}}},[o._v("\n                      "+o._s(o.$t("Customization"))+"\n                    ")])])]),o._v(" "),r("el-input",{attrs:{type:"number",disabled:1==o.activateSeed},model:{value:o.formData.seed,callback:function(t){o.$set(o.formData,"seed",o._n(t))},expression:"formData.seed"}}),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("SamplingSteps")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("steps",20,40)}},model:{value:o.formData.steps,callback:function(t){o.$set(o.formData,"steps",o._n(t))},expression:"formData.steps"}})],1),o._v(" "),r("el-slider",{attrs:{max:40,min:20},on:{change:function(t){return o.setNum("steps",20,40)}},model:{value:o.formData.steps,callback:function(t){o.$set(o.formData,"steps",t)},expression:"formData.steps"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("CFGScale")))]),o._v(" "),r("el-input",{attrs:{type:"number"},on:{change:function(t){return o.setNum("cfg_scale",3,10)}},model:{value:o.formData.cfg_scale,callback:function(t){o.$set(o.formData,"cfg_scale",o._n(t))},expression:"formData.cfg_scale"}})],1),o._v(" "),r("el-slider",{attrs:{max:10,min:3},on:{change:function(t){return o.setNum("cfg_scale",3,10)}},model:{value:o.formData.cfg_scale,callback:function(t){o.$set(o.formData,"cfg_scale",t)},expression:"formData.cfg_scale"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("width")))]),o._v(" "),r("el-input",{attrs:{disabled:"",type:"number"},on:{change:function(t){return o.setNum("width",512,1024)}},model:{value:o.formData.width,callback:function(t){o.$set(o.formData,"width",o._n(t))},expression:"formData.width"}})],1),o._v(" "),r("el-slider",{attrs:{max:1024,min:512,step:32},on:{change:function(t){return o.setNum("width",512,1024)}},model:{value:o.formData.width,callback:function(t){o.$set(o.formData,"width",t)},expression:"formData.width"}})],1),o._v(" "),r("div",{staticClass:"numBox"},[r("div",{staticClass:"numBoxTit"},[r("span",[o._v(o._s(o.$t("height")))]),o._v(" "),r("el-input",{attrs:{disabled:"",type:"number"},on:{change:function(t){return o.setNum("height",512,1024)}},model:{value:o.formData.height,callback:function(t){o.$set(o.formData,"height",o._n(t))},expression:"formData.height"}})],1),o._v(" "),r("el-slider",{attrs:{max:1024,min:512,step:32},on:{change:function(t){return o.setNum("height",512,1024)}},model:{value:o.formData.height,callback:function(t){o.$set(o.formData,"height",t)},expression:"formData.height"}})],1)],1)],1)],1):o._e()]),o._v(" "),r("el-button",{staticClass:"funBtn",attrs:{loading:o.loading},on:{click:o.onGenerate}},[r("div",[o._v(o._s(o.$t("Generate")))]),o._v(" "),r("div",[r("span",[o._v(o._s(o.$t("PhysicalExertion"))+":"+o._s(o.expend))])])])],1),o._v(" "),r("div",{staticClass:"imgLoadBox"},[o.loading?r("div",{staticClass:"progressBox"},[r("el-progress",{attrs:{type:"circle",percentage:o.loadingProgress,width:80,"stroke-width":5,color:"#3F8FFF","text-color":"#ffffff"}}),o._v(" "),r("div",{staticClass:"progressTip"},[o._v(o._s(o.$t("photography37"))+" ...")])],1):o._e(),o._v(" "),o.imgs.length>0?r("div",{staticClass:"imgBox"},[r("el-carousel",{attrs:{arrow:"always",autoplay:!1},on:{change:function(t){return o.imgIndex=t}}},o._l(o.imgs,(function(t){return r("el-carousel-item",{key:t.id},[r("div",{staticClass:"imgCnt",class:[1===t.nsfw?"bg-nsfw":""]},[r("el-image",{attrs:{src:t.url,"preview-src-list":o.previewImgs,fit:"contain"}})],1)])})),1)],1):o.sampleShow?r("div",{staticClass:"imgBox"},[r("div",{staticClass:"clear",on:{click:function(t){o.sampleShow=!1}}},[r("i",{staticClass:"el-icon-close"})]),o._v(" "),r("el-carousel",{attrs:{arrow:"always",autoplay:!1}},o._l(o.defaultData.samples,(function(t){return r("el-carousel-item",{key:t},[r("el-image",{attrs:{src:t,"preview-src-list":o.defaultData.samples,fit:"contain"}})],1)})),1)],1):o._e()])]),o._v(" "),r("pick-work-modal",{ref:"pickWorkModal",attrs:{maxNum:3-(null===(n=o.formData.ref_images)||void 0===n?void 0:n.length)},on:{confirm:o.handlePickImage}}),o._v(" "),r("comicStoryboardAssistant",{ref:"comicStoryboardAssistant",on:{change:o.setStoryBoard}})],1)],1)}),[],!1,null,"5ffa9e0e",null));e.default=F.exports;installComponents(F,{LoadingStatus:n(213).default})},5752:function(t,e,n){"use strict";n.r(e);n(18);var o=n(2),r=n(120),l=n(3),c=(n(20),n(11),n(19),n(6),n(22),n(12),n(13),n(8),n(4),n(7),n(26),{name:"TagItem",props:{itemData:{type:Object,required:{id:"",name:"",show_in:1,style:""}}},methods:{jumpRead:function(){this.$router.push(this.localePath("/tagInfo/ai-novel/".concat(this.itemData.id)))}}}),d=(n(5411),n(0)),v=Object(d.a)(c,(function(){var t=this;return(0,t._self._c)("span",{staticClass:"tag-item",on:{click:t.jumpRead}},[t._v("\n  "+t._s(t.itemData.name)+"\n")])}),[],!1,null,"0c6d896d",null).exports,h=n(3435),f=(n(24),n(58)),m={props:{updateTime:{type:Number,default:function(){return null}}},computed:{time:function(){return Object(f.i)(this.updateTime,"yyyy/MM/dd hh:mm")}}},_=(n(5413),Object(d.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"novel-update-time"},[e("span",[t._v(t._s(t.time)+" "+t._s(t.$t("renew")))])])}),[],!1,null,"1d24807d",null).exports),y={props:{previewContent:{type:String,default:function(){return""}}}},w=(n(5414),Object(d.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"trial-reading"},[e("div",{staticClass:"preview-content"},[t._v(t._s(t.previewContent))]),t._v(" "),e("button",{staticClass:"read-btn",on:{click:function(e){return t.$emit("jump")}}},[t._v(t._s(t.$t("continueReading")))])])}),[],!1,null,"4fa1b732",null).exports),C=n(116),O=n(250),x=n(64),k=n(53),I=n(436),j=n(10),S=n(27),$=n(39),P=n(1),T=n(162),D=n(34),L=["content"],A=["content"];function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R={name:"NovelDetail",asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,data,l,c,title,d,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,e.prev=1,e.next=4,n.$post("/api/v1/fast_ai/detail",{name:"Ai-Novel"});case 4:return o=e.sent,data=o.data,c=(l=data||{}).module,title=l.title,d=l.meta_description,v=l.key_words,h=null!=c&&c.length?c.map((function(t){var content=t.content;return M(M({},Object(r.a)(t,L)),{},{content:JSON.parse(content)})})):[],f={tempList:h||[],title:title,meta_description:d,key_words:v},e.abrupt("return",{pageSEO:f});case 12:e.prev=12,e.t0=e.catch(1),console.log("快捷AI详情页-> asyncData错误啦：",e.t0),error({statusCode:404,message:e.t0});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},components:{TagItem:v,TextEllipsis:h.a,TimeUpdate:_,TrialReading:w,CmtComments:C.default,HyWaterfallFlowList:x.default,PageSeo:O.a,BaseAvatar:k.default},data:function(){return{isExpanded:!1,isOverflow:!1,detail:{cover:{width:190,height:270,id:"",url:"",has_meta:""},is_preset:1,chapter_count:0,word_count:0,title:"",desc:"",author:{is_follow:!1,head:"",id:"",name:""},curr_read_chapter_id:"",has_history_read:"",id:"",tags:[],update_at:null,stat:{num_of_comment:0,num_of_view:0}},errorAuthorAvatar:!1,previewContent:"",pageSEO:{tempList:[],title:"",meta_description:"",key_words:""},listData:[],page:1,loading:!1,isLoading:!1,totalLoading:!1,hasMore:!0,Is404:!1}},computed:M(M({},Object(P.c)("user",["isLoggedIn"])),{},{currentChapterId:function(){return this.detail.curr_read_chapter_id}}),mounted:function(){this.getDetail(),this.getNovelPerview(),this.getList()},activated:function(){this.getDetail()},watch:{detail:{handler:function(t){var e=this;t.tags&&this.$nextTick((function(){e.checkOverflow()}))},deep:!0},isLoggedIn:{handler:function(t){this.getDetail()},immediate:!0,deep:!0}},methods:{checkOverflow:function(){var t=document.querySelector(".novel-tags");this.isOverflow=t.scrollHeight>t.clientHeight},backTo:function(){"bookReading"!==this.$route.query.from&&history.length?this.$router.back():this.$router.push(this.localePath("/novel"))},showLoginModal:function(t){var e=this;t&&this.$logEvent("log_actions",{operation:t,behavior_info:"on_novel_reading_detail_page"}),this.$EventBus.$emit("openLoginDialog",{callBack:function(){e.getDetail(),e.getNovelPerview(),e.getList()},dot:!1})},getSeoData:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,l,title,c,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)({name:"Ai-Novel"});case 2:1e4===(n=e.sent).status.code&&(o=n.data||{},l=o.module,title=o.title,c=o.meta_description,d=o.key_words,v=null!=l&&l.length?l.map((function(t){var content=t.content;return M(M({},Object(r.a)(t,A)),{},{content:JSON.parse(content)})})):[],t.pageSEO={tempList:v||[],title:title,meta_description:c,key_words:d});case 4:case"end":return e.stop()}}),e)})))()},getList:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn||!(t.listData.length>0)){e.next=2;break}return e.abrupt("return");case 2:if(t.hasMore){e.next=4;break}return e.abrupt("return");case 4:return t.isLoading=!0,e.next=7,Object(I.e)({id:t.$route.params.id,order_by:"new",page:t.page,page_size:30});case 7:1e4===(n=e.sent).status.code&&(t.isLoggedIn?(n.data.items.length?t.page++:t.hasMore=!1,t.listData=t.listData.concat(n.data.items)):t.listData=n.data.items),t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},getDetail:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.totalLoading=!0,e.next=3,Object(I.b)(t.$route.params.id);case 3:1e4===(n=e.sent).status.code?(t.detail=Object.assign(t.detail,n.data),t.reportView(t.$route.params.id,t.detail.stat)):t.Is404=!0,t.totalLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},reportView:function(t,e){var n,o=null==this||null===(n=this.paymentInfo)||void 0===n?void 0:n.productLevel;Object($.i)({items:[{category:"default",action:"view",obj_no:t,obj_type:21,stat:e,vip:o}]})},translateNovelPreview:function(content){var t=arguments;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:"en",e.prev=1,"zhCN"===(o=n)&&(o="zh-cn"),"zhTW"===o&&(o="zh-tw"),e.next=7,Object(T.a)(content,{to:o});case 7:return r=e.sent,e.abrupt("return",r.text);case 11:throw e.prev=11,e.t0=e.catch(1),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},getNovelPerview:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(I.c)(t.$route.params.id);case 3:if(1e4!==(n=e.sent).status.code){e.next=19;break}if(!n.data.preview_content){e.next=9;break}t.previewContent=n.data.preview_content,e.next=19;break;case 9:return e.prev=9,e.next=12,t.translateNovelPreview(n.data.preview_content_default,t.$i18n.locale);case 12:o=e.sent,t.previewContent=o,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),t.previewContent=n.data.preview_content_default;case 19:t.loading=!1;case 20:case"end":return e.stop()}}),e,null,[[9,16]])})))()},jumpAuthor:function(){this.$router.push(this.localePath("/user/".concat(this.detail.author.id)))},goRead:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$logEvent("log_actions",{operation:t,behavior_info:"on_novel_reading_detail_page"}),n.next=3,Object(I.g)({id:e.$route.params.id});case 3:if(e.isLoggedIn){n.next=7;break}return o=e,e.$EventBus.$emit("openLoginDialog",{callBack:function(){e.getDetail(),o.$watch("detail",(function(t){setTimeout((function(){e.$router.push(e.localePath("/book/reading/".concat(e.detail.id,"?cid=").concat(t.curr_read_chapter_id,"&from=ai_novel&character_id=").concat(e.detail.character_id)))}),100)}),{deep:!0})},dot:!1}),n.abrupt("return");case 7:e.$router.push(e.localePath("/book/reading/".concat(e.detail.id,"?cid=").concat(e.currentChapterId,"&from=ai_novel&character_id=").concat(e.detail.character_id)));case 8:case"end":return n.stop()}}),n)})))()},handleShare:function(){this.isLoggedIn?(this.$message.success(this.$t("CopiedURLToClipboard")),Object(j.g)(location.href)):this.showLoginModal()},follow_cancelFollow:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=3;break}return t.showLoginModal(),e.abrupt("return");case 3:if(!t.detail.author.is_follow){e.next=10;break}return e.next=6,Object(S.D)({follow_account_no:t.detail.author.id});case 6:1e4===e.sent.status.code&&(t.detail.author.is_follow=!t.detail.author.is_follow,t.$message.success(t.$t("OperateSuccess"))),e.next=14;break;case 10:return e.next=12,Object(S.C)({follow_account_no:t.detail.author.id});case 12:1e4===e.sent.status.code&&(t.detail.author.is_follow=!t.detail.author.is_follow,t.$message.success(t.$t("OperateSuccess")));case 14:case"end":return e.stop()}}),e)})))()},handleReportEbook:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.f)({id:t.$route.params.id,obj_type:21});case 2:1e4===e.sent.status.code&&t.$message.success(t.$t("ReportSuccess"));case 4:case"end":return e.stop()}}),e)})))()}},head:function(){var t=this.detail,e=t.title,title=void 0===e?"":e,n=t.desc,desc=void 0===n?"":n,o=(t.author,t.cover);return{title:title,meta:[{hid:"description",name:"description",content:desc},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:desc},{hid:"og:image",name:"og:image",content:(void 0===o?{url:""}:o).url}]}}},N=function(){Object(D.useCssVars)((function(t,e){return{"7ba31959":t.listData.length?"-880px":"0"}}))},U=R.setup;R.setup=U?function(t,e){return N(),U(t,e)}:N;var F=R,B=(n(5415),Object(d.a)(F,(function(){var t,e,n=this,o=n._self._c;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:n.totalLoading,expression:"totalLoading"}],staticClass:"ai-novel-container"},[o("el-backtop",{attrs:{bottom:30,right:30}},[o("i",{staticClass:"el-icon-top"})]),n._v(" "),o("div",{staticClass:"back-to",on:{"~click":function(t){return t.stopPropagation(),n.backTo.apply(null,arguments)}}},[o("i",{staticClass:"el-icon-back"})]),n._v(" "),o("div",{staticClass:"ai-novel-detail"},[o("div",{staticClass:"novel-cover novel-coverbg"},[o("img",{directives:[{name:"show",rawName:"v-show",value:!n.totalLoading,expression:"!totalLoading"}],attrs:{src:n.detail.cover.url,alt:""}}),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.totalLoading,expression:"totalLoading"}],staticClass:"loading-spinner"},[o("i",{staticClass:"el-icon-loading"})]),n._v(" "),1===n.detail.is_preset?o("span",[n._v(n._s(n.detail.title))]):n._e()]),n._v(" "),o("div",{staticClass:"novel-detail"},[n.detail.id?o("CmtComments",{attrs:{type:21,infos:n.detail},scopedSlots:n._u([{key:"cmtInner",fn:function(){return[o("div",{staticClass:"novel-detail-header"},[o("BaseAvatar",{attrs:{"user-data":n.detail.author,size:20,theme:"dark","to-user":""}}),n._v(" "),o("span",{staticClass:"author-name",on:{click:n.jumpAuthor}},[n._v(n._s(n.detail.author.name))]),n._v(" "),o("button",{staticClass:"btn-follow btn",on:{click:n.follow_cancelFollow}},[n._v("\n              "+n._s(n.detail.author.is_follow?n.$t("UnFollow"):n.$t("Follow"))+"\n            ")]),n._v(" "),o("button",{staticClass:"btn-read btn",on:{click:function(t){return n.goRead("/start_read")}}},[n._v("\n              "+n._s(n.detail.has_history_read?n.$t("continueReading"):n.$t("startReading"))+"\n            ")])],1),n._v(" "),o("el-tooltip",{attrs:{effect:"dark",content:n.detail.title,placement:"top-start"}},[o("h1",{staticClass:"novel-title"},[n._v(n._s(n.detail.title))])]),n._v(" "),o("div",{staticClass:"word-chapter"},[o("span",{staticClass:"wordcount"},[n._v(n._s(n.$t("word"))+"："+n._s(n.detail.word_count))]),n._v(" "),o("span",{staticClass:"chapter"},[n._v(n._s(n.$t("chapter"))+"："+n._s(n.detail.chapter_count))])]),n._v(" "),o("div",{staticClass:"novel-tags",class:{more:n.isExpanded}},n._l(n.detail.tags,(function(t){return o("TagItem",{key:t.id,attrs:{itemData:t}})})),1),n._v(" "),o("div",{staticClass:"novel-desc"},[o("TextEllipsis",{attrs:{lines:4,expandText:n.$t("ModelMore"),closeText:n.$t("PackUp"),expandable:"",closeable:"",forceExpandable:n.isOverflow},on:{moreClick:function(t){n.isExpanded=!0},retractClick:function(t){n.isExpanded=!1}}},[n._v("\n              "+n._s(n.detail.desc)+"\n            ")])],1),n._v(" "),o("TimeUpdate",{attrs:{"update-time":n.detail.update_at}})]},proxy:!0},{key:"cmtMore",fn:function(){return[o("div",{staticClass:"icon"},[n.isLoggedIn?o("el-tooltip",{attrs:{effect:"dark",content:n.$t("Report"),placement:"top"}},[o("i",{staticClass:"iconfont icon-warning-error",on:{click:n.handleReportEbook}})]):n._e(),n._v(" "),o("el-tooltip",{attrs:{effect:"dark",content:n.$t("Share"),placement:"top"}},[o("i",{staticClass:"iconfont icon-share-icon",on:{click:n.handleShare}})])],1)]},proxy:!0},{key:"custom-inner",fn:function(){return[o("TrialReading",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{previewContent:n.previewContent},on:{jump:function(t){return n.goRead("go_on_read")}}})]},proxy:!0},{key:"empty",fn:function(){return[o("div",{staticClass:"empty"},[n._v(n._s(n.$t("aiNovelEmpty")))])]},proxy:!0}],null,!1,2461745380)}):n._e()],1)]),n._v(" "),o("div",{staticClass:"hot-recommend"},[n.listData.length&&!n.Is404?[o("h3",{staticClass:"title"},[n._v(n._s(n.$t("ExploreRelated")))]),n._v(" "),o("div",{ref:"hot",staticClass:"hot-list"},[o("HyWaterfallFlowList",{style:{overflow:n.isLoggedIn?"":"hidden"},attrs:{list:n.listData,isNovel:!0,container:"hot",fixedHeight:n.isLoggedIn?0:800,isVirtualList:!1},on:{load:n.getList}}),n._v(" "),o("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],staticClass:"loadBox"})],1)]:n._e(),n._v(" "),n.isLoggedIn?n._e():o("div",{staticClass:"mask"},[o("div",{staticClass:"login-btn"},[o("div",{staticClass:"tips"},[n._v(n._s(n.$t("loginLookWorks")))]),n._v(" "),o("button",{staticClass:"go-login-btn",on:{click:function(t){return n.showLoginModal("click_login_now")}}},[n._v(n._s(n.$t("loginNow")))])]),n._v(" "),null!==(t=n.pageSEO)&&void 0!==t&&t.tempList.length?o("PageSeo",{attrs:{tempList:null===(e=n.pageSEO)||void 0===e?void 0:e.tempList}}):n._e()],1)],2)],1)}),[],!1,null,"6c7e97d6",null));e.default=B.exports;installComponents(B,{BaseAvatar:n(53).default,TextEllipsis:n(1289).default,CmtComments:n(116).default})},5758:function(t,e,n){"use strict";n.r(e);n(31),n(18),n(11),n(6),n(12),n(13),n(8);var o=n(3),r=n(2),l=(n(20),n(32),n(16),n(22),n(4),n(28),n(21),n(44),n(7),n(26),n(24),{name:"AiFilterCard",props:{source:{type:Object,default:function(){return{}}},order:{type:[String,Number],default:function(){return 1}},isLoading:{type:Boolean,default:!1}},computed:{showRefreshBtn:function(){var t;return![1,"1"].includes(this.order)&&!["",null,void 0].includes(null==this||null===(t=this.source)||void 0===t?void 0:t.url)&&!this.taskLoading},showRemoveBtn:function(){var t;return[1,"1"].includes(this.order)&&!["",null,void 0].includes(null==this||null===(t=this.source)||void 0===t?void 0:t.url)},taskLoading:function(){var t=this.source||{},e=t.status,n=void 0===e?0:e,o=t.process,r=void 0===o?100:o;return[1,2].includes(n)||[3].includes(n)&&r<100},computedPercentage:function(){var t=(this.source||{}).process;return void 0===t?0:t},processLoading:function(){return 1!==this.order&&(this.isLoading||this.taskLoading)}},data:function(){return{loading:!1}},methods:{handleReMake:function(){this.taskLoading||this.$emit("reMake",this.source)},handleRemove:function(){this.$emit("removeImage")},changeImage:function(){this.taskLoading||this.$emit("selectImage",this.source.url)}}}),c=(n(5083),n(0)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-ai-filter-card"},[t.showRefreshBtn?e("span",{staticClass:"refresh-btn",on:{click:function(e){return e.stopPropagation(),t.handleReMake.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-refresh-icon1 refresh-btn-icon"})]):t._e(),t._v(" "),t.showRemoveBtn?e("span",{staticClass:"refresh-btn",on:{click:function(e){return e.stopPropagation(),t.handleRemove.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close refresh-btn-icon"})]):t._e(),t._v(" "),t.source&&t.source.url?e("img",{staticClass:"filter-card-result-img",style:{opacity:t.processLoading?.3:1},attrs:{src:t.source.url,alt:""},on:{click:function(e){return e.stopPropagation(),t.changeImage.apply(null,arguments)}}}):t._e(),t._v(" "),e("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.processLoading,expression:"processLoading"}],staticClass:"ai-filter-card-progress",attrs:{type:"circle",percentage:t.computedPercentage,width:65,"stroke-width":4,"define-back-color":"#000",color:"#fff"}})],1)}),[],!1,null,null,null),d=component.exports,v=n(1),h=n(95),f=n(10),m=(n(19),{name:"DrawBoard",props:{autoStyle:{type:Object,default:function(){return{}}},brushSize:{type:Number,default:function(){return 1}},eraserSize:{type:Number,default:function(){return 5}},maskUrl:{type:String,default:function(){return""}}},watch:{toolsType:{handler:function(){this.setDrawType(),this.setCanvasStyle()}}},data:function(){return{brushColor:"black",isDrawing:!1,lastX:0,lastY:0,canvasStyle:{},blankCanvas:"",canvas:null,context:null,toolsType:"PEN",undoStack:[],redoStack:[],currentStep:-1,historyList:[]}},computed:{activeTools:function(){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})===this.toolsType?"active-tools":""}},activePre:function(){return this.historyList.length&&(this.currentStep>=0||-1!==this.currentStep)&&this.currentStep<=this.historyList.length?"active-btn":""},activeNext:function(){return this.historyList.length&&(this.currentStep>=0||-1===this.currentStep)&&this.currentStep+1<this.historyList.length?"active-btn":""}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.setCanvasStyle(),this.setDrawType(),this.ctx.strokeStyle=this.brushColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.blankCanvas=this.canvas.toDataURL()},beforeDestroy:function(){this.canvas.removeEventListener("mousedown",this.startDrawing),this.canvas.removeEventListener("mousemove",this.draw),this.canvas.removeEventListener("mouseup",this.stopDrawing),window.removeEventListener("mouseup",this.stopDrawing)},methods:{changeToolsType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.toolsType=t,this.setCanvasStyle(),this.setDrawType()},displayMaskToCanvas:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",img=new Image;img.onload=function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(img,0,0,t.canvas.width,t.canvas.height),t.saveDrawingToBase64(!0)},img.onerror=function(t){},img.src=e},setCanvasStyle:function(){var t="ERASER"===this.toolsType?4*this.eraserSize:4*this.brushSize;if("PEN"!==this.toolsType){if("ERASER"===this.toolsType){var e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 32 32">\n  <path fill="none" stroke="#000" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.9048" d="M31.048 16c0 8.311-6.737 15.048-15.048 15.048s-15.048-6.737-15.048-15.048c0-8.311 6.737-15.048 15.048-15.048s15.048 6.737 15.048 15.048z"></path>\n  </svg>'),n=btoa(e),o="data:image/svg+xml;base64,".concat(n);this.canvasStyle={cursor:"url(".concat(o,") ").concat(t/2," ").concat(t/2,", auto")}}}else{var r=btoa('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n  <circle cx="5" cy="5" r="2.5" fill="black" />\n</svg>'),l="data:image/svg+xml;base64,".concat(r);this.canvasStyle={cursor:"url(".concat(l,") 5 5, auto")}}},setDrawType:function(){this.ctx&&(this.ctx.strokeStyle=this.brushColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth="ERASER"===this.toolsType?4*this.eraserSize:4*this.brushSize,this.ctx.globalCompositeOperation="ERASER"===this.toolsType?"destination-out":"source-over")},clearCanvas:function(){this.undoStack=[],this.redoStack=[],this.historyList=[],this.currentStep=-1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},saveDrawing:function(){var img=new Image;img.src=this.canvas.toDataURL("image/png",.05);var link=document.createElement("a");link.download="drawing.png",link.href=img.src,link.click()},saveDrawingToBase64:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,t.bgCtx.clearRect(0,0,t.canvas2.width,t.canvas2.height),t.bgCtx.fillStyle="black",t.bgCtx.fillRect(0,0,t.canvas2.width,t.canvas2.height),t.bgCtx.drawImage(t.canvas,0,0,t.canvas2.width,t.canvas2.height),n=t.canvas2.toDataURL("image/png",.05),t.canvas.toDataURL()!==t.blankCanvas){e.next=10;break}return t.$emit("updateMask",""),e.abrupt("return");case 10:if(n!==t.blankBgCanvas){e.next=13;break}return t.$emit("updateMask",""),e.abrupt("return");case 13:return e.next=15,t.checkIsSameImage(n);case 15:if(!e.sent){e.next=18;break}return e.abrupt("return");case 18:t.$emit("updateMask",n.slice(n.indexOf(",")+1)),e.next=23;break;case 21:e.prev=21,e.t0=e.catch(1);case 23:case"end":return e.stop()}}),e,null,[[1,21]])})))()},checkIsSameImage:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!1,(o=t.length>0&&void 0!==t[0]?t[0]:"").slice(o.indexOf(",")+1)!==e.maskUrl){n.next=5;break}return n.abrupt("return",!0);case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},startDrawing:function(t){this.isDrawing=!0,this.lastX=t.offsetX,this.lastY=t.offsetY},draw:function(t){if(this.isDrawing){var e=t.offsetX,n=t.offsetY;this.context.beginPath(),this.context.moveTo(this.lastX,this.lastY),this.context.lineTo(e,n),this.context.stroke(),this.lastX=e,this.lastY=n}},stopDrawing:function(){this.isDrawing=!1,this.undoStack.push(this.canvas.toDataURL()),this.redoStack=[],this.saveToHistory()},saveToHistory:function(){this.historyList=this.historyList.slice(0,this.currentStep+1),this.historyList.push(this.canvas.toDataURL()),this.currentStep++},loadFromHistory:function(){var t=this;this.toolsType="PEN";var image=new Image;image.src=this.historyList[this.currentStep],image.onload=function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.fillStyle="white",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),t.context.drawImage(image,0,0)}},handlePre:function(){this.activePre&&(this.currentStep>0?(this.currentStep--,this.loadFromHistory()):(this.currentStep=-1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)))},handleNext:function(){this.activeNext&&this.currentStep<=this.historyList.length-1&&(this.currentStep++,this.loadFromHistory())},saveImage:function(){var t,e;return(null==this||null===(t=this.canvas)||void 0===t?void 0:t.toDataURL())===this.blankCanvas?"":null==this||null===(e=this.canvas)||void 0===e?void 0:e.toDataURL()}}}),_=m,y=(n(5084),Object(c.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-draw-board"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:"512",height:"512"},on:{mousedown:t.startDrawing,mousemove:t.draw,mouseup:t.stopDrawing}}),t._v(" "),e("div",{staticClass:"toolbar"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsPen"),placement:"right"}},[e("span",{class:[t.activeTools("PEN")],on:{click:function(e){return t.changeToolsType("PEN")}}},[e("i",{staticClass:"iconfont icon-draw-board-icon1"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsEraser"),placement:"right"}},[e("span",{class:[t.activeTools("ERASER")],on:{click:function(e){return t.changeToolsType("ERASER")}}},[e("i",{staticClass:"iconfont icon-draw-board-icon5"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsClearCanvas"),placement:"right"}},[e("span",{on:{click:t.clearCanvas}},[e("i",{staticClass:"iconfont icon-draw-board-icon4"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"right"}},[e("span",{staticClass:"gray-btn",class:[t.activePre],on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"right"}},[e("span",{staticClass:"gray-btn",class:[t.activeNext],on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])])],1)])}),[],!1,null,"301b8f21",null).exports),w=n(1123),C=n(57),O=n(51),x=n(119),k=n(61);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"DraftDesign",components:{AiFilterCard:d,DrawBoard:y,QuickQueue:x.default},mixins:[w.a],head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("sketchToImg_h1"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{uploading:!1,pollingTimer:null,isLoading:!1,imgLoading:!1,iconUrl:n(739),uploadMode:"board",resultList:[{id:1,url:"",prompt:""}],promptInput:"",style:{},promptStyle:"",exampleList:[],exampleImageList:[],imgUrl:"",renderList:[],UPLOAD:new O.a({type:28}),quickOptions:{}}},computed:j(j(j({},Object(v.c)("creation",["promptStyles"])),Object(v.e)("user",["token"])),{},{renderSelectList:function(){var t=this;return(this.promptStyles||[]).map((function(e){var n="sdxl_".concat(e.replace(/\s/g,""));return{label:t.$t(n)||e,id:e}}))},isActive:function(){return function(t){return this.uploadMode===t?"upload-model-btn-active":""}},getResult:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(this.renderList.length?this.renderList[t]:{url:""})||{url:""}}}}),mounted:function(){this.getExampleData()},beforeDestroy:function(){},methods:{promptStyleChange:function(t){try{var e=this.exampleList.find((function(e){return e.id===t}));null!=e&&e.name&&this.$logEvent("log_actions",{operation:"click_draft_style",behavior_info:e.name})}catch(t){console.log("error",t)}},getExampleData:function(){var t=this;return Object(h.s)({type:3}).then((function(e){var n=e||{},o=n.status.code,code=void 0===o?"":o,r=n.data,data=void 0===r?{}:r,l=data.draft_to_img,c=void 0===l?[]:l,d=data.draft_to_img_sample,v=void 0===d?[]:d;[1e4,"10000"].includes(code)&&(t.exampleList=c||[],t.exampleImageList=v||[],t.promptStyle=t.exampleList.length&&t.exampleList[0].id||"")})).finally((function(){}))},handleUploadClick:function(){this.$refs.uploadRef.$el.querySelector('input[type="file"]').click()},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(l.size/1024/1024>5)){n.next=21;break}return n.prev=11,n.next=14,Object(k.a)(l,5242880);case 14:l=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(11),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 21:return n.next=23,e.checkImageSize(t);case 23:if(n.sent){n.next=27;break}return e.$message.warning(e.$t("ImageSizeExceedsError")),n.abrupt("return",!1);case 27:if(!e.uploading){n.next=29;break}return n.abrupt("return");case 29:return e.uploading=!0,o.startUpload(l).then((function(t){e.uploading=!1,e.imgUrl=t,e.resultImgUrl="",e.resultList=[{url:e.imgUrl,prompt:""}]})).catch((function(t){console.log(t),e.uploading=!1,e.isLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 32:case"end":return n.stop()}}),n,null,[[11,17]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[2*t,2*o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleStart:function(){this.token?"upload"!==this.uploadMode?"board"===this.uploadMode&&this.saveImage():this.startTask("upload"):this.$EventBus.$emit("openLoginDialog")},handleBeforeUploadEmpty:function(){},changeUploadType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t!==this.uploadMode&&(this.uploadMode=t)},handleSelectExample:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.token){if(!this.isLoading){var n=e.url,o=void 0===n?"":n,r=e.template_id,l=void 0===r?"":r,c=e.prompt,d=void 0===c?"":c;this.imgLoading=!0,this.uploadMode="upload",this.resultList.forEach((function(e){t.$set(e,"url",o)})),this.renderList=[],this.imgUrl=o,this.promptStyle=l||"",this.promptInput=d||"",this.startTask(),this.scrollBottom()}}else this.$EventBus.$emit("openLoginDialog")},handleSetImageSize:function(t){var e=t.target.naturalWidth,n=t.target.naturalHeight;this.$set(this,"style",{width:e,height:n})},handleSelectImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.imgUrl&&this.imgUrl===t?this.imgLoading=!1:["",null,void 0].includes(t)||this.isLoading||(this.imgLoading=!0,this.imgUrl=t)},handleImageLoad:function(){this.imgLoading=!1},handleReMake:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.startSingleTask(t)},startSingleTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={action:3};return n.draft_to_img={num:1,scale:"1:1",template_id:this.promptStyle,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.promptInput},["",null,void 0].includes(n.draft_to_img.prompt)?(this.isLoading=!1,void this.$message.warning(this.$t("PromptNotEmpty"))):n.draft_to_img.template_id?["",null,void 0].includes(n.draft_to_img.image)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):Object(h.i)(n).then((function(n){var o;if(!(null==n||null===(o=n.data)||void 0===o?void 0:o.task_id))return!1;(t.renderList||[]).forEach((function(o,r){var l;o.url===e.url&&(t.$set(o,"status",1),t.$set(o,"id",null==n||null===(l=n.data)||void 0===l?void 0:l.task_id))}))})).catch((function(){})):(this.$message.warning(this.$t("fastToolsWarningTips")),void(this.isLoading=!1))},startTask:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.isLoading){var n={action:3};if(n.draft_to_img={num:3,scale:"1:1",template_id:this.promptStyle,width:this.style.width,height:this.style.height,image:this.resultList[0].url,prompt:this.promptInput},e&&(n.draft_to_img.type=1),!["",null,void 0].includes(n.draft_to_img.prompt))return this.promptStyle?["",null,void 0].includes(n.draft_to_img.image)?(this.$message.warning(this.$t("pleaseUoloadImage")),void(this.isLoading=!1)):(this.isLoading=!0,Object(h.i)(n).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.task_id;return!!o&&(t.scrollBottom(),t.renderList=[{process:0,status:0},{process:0,status:0},{process:0,status:0}],t.pollingTask(o))})).catch((function(){t.isLoading=!1}))):(this.$message.warning(this.$t("fastToolsWarningTips")),void(this.isLoading=!1));this.$message.warning(this.$t("PromptNotEmpty"))}},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(h.a)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],console.log(e.quickOptions,"quick==========="),4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=l[0],d=c.result,v=void 0===d?{}:d,h=c.process,f=void 0===h?0:h,m=c.status,_=void 0===m?0:m,y=v.images||[];e.renderList=Array.isArray(y)&&y.length?y:[],(e.renderList||[]).forEach((function(t){e.$set(t,"process",f||0),e.$set(t,"status",_||0)})),e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,n()}else{var w=l[0],C=w.process,O=void 0===C?0:C,x=w.status,k=void 0===x?0:x;(e.renderList||[]).forEach((function(t){e.$set(t,"process",O||0),e.$set(t,"status",k||0)})),[1,2].includes(l[0].status)&&e.pollingTask(t)}})).catch((function(n){if(!e.renderList.length||e.renderList.length&&!e.renderList[0].url)return e.pollingTask(t);e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},scrollBottom:function(){try{this.$nextTick((function(){window.scrollTo({top:1e4,behavior:"smooth"})}))}catch(t){}},removeImage:function(){this.isLoading||(this.imgUrl="",this.resultList.forEach((function(t){t.url=""})),this.imgLoading=!1,this.renderList=[],this.promptInput="",this.promptStyle=this.exampleList.length&&this.exampleList[0].id||"")},downloadImage:function(){var t=this;try{var e=this.exampleList.find((function(e){return e.id===t.promptStyle}));null!=e&&e.name&&this.$logEvent("log_actions",{operation:"click_download_images_on_draft",behavior_info:e.name})}catch(t){console.log("error",t)}Object(f.M)(this.imgUrl,this.$t("ai_tools_3"))},saveImage:function(){try{var t,e=this.$refs.drawBoard.saveImage();if(!e)return null!=this&&null!==(t=this.resultList[0])&&void 0!==t&&t.url?void this.startTask():void this.$message.warning(this.$t("pleaseUoloadImage"));this.uploadMaskImage(e)}catch(t){}},uploadMaskImage:function(mask){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.UPLOAD,o=Object(C.dataURItoBlob)(mask),e.next=4,t.checkImageSize(o);case 4:if(e.sent){e.next=8;break}return t.$message.warning(t.$t("ImageSizeExceedsError")),e.abrupt("return",!1);case 8:if(!t.uploading){e.next=10;break}return e.abrupt("return");case 10:return t.uploading=!0,e.abrupt("return",n.startUpload(o,{name:"draft-design-image".concat(Date.now(),".png"),type:"png"}).then((function(e){t.uploading=!1,t.imgUrl=e,t.resultImgUrl="",t.resultList=[{url:t.imgUrl,prompt:""}],t.renderList=[],t.startTask("board")})).catch((function(e){console.log(e),t.uploading=!1,t.isLoading=!1,t.$message.error(t.$t("uploadError"))})));case 12:case"end":return e.stop()}}),e)})))()}}},$=S,P=(n(5085),n(5086),Object(c.a)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-draft-design"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("sketchToImg_h1")))]),t._v(" "),e("div",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("sketchToImg_h1_intro")))])]),t._v(" "),e("div",{staticClass:"tools-content"},[e("span",{staticClass:"upload-model-box"},[e("span",{staticClass:"upload-model-btn",class:[t.isActive("board")],on:{click:function(e){return t.changeUploadType("board")}}},[t._v(t._s(t.$t("Board")))]),t._v(" "),e("span",{staticClass:"upload-model-btn",class:[t.isActive("upload")],on:{click:function(e){return t.changeUploadType("upload")}}},[t._v(t._s(t.$t("UPLOAD")))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.resultList[0].url&&"upload"===t.uploadMode,expression:"!resultList[0].url && uploadMode === 'upload'"}],staticClass:"upload-box"},[[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploadRef",staticClass:"image-upload",attrs:{action:"#",drag:"","before-upload":t.handleBeforeUpload,disabled:t.uploading,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n              "+t._s(t.$t("TaskUploadImageDragTips"))),e("em",[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])])])])]],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"board"===t.uploadMode,expression:"uploadMode === 'board'"}],staticClass:"draw-board-box-wrap"},[e("div",{staticClass:"draw-board-box"},[e("draw-board",{ref:"drawBoard"})],1)])]),t._v(" "),t.resultList[0].url&&"upload"===t.uploadMode?e("div",{staticClass:"show-content-wrap"},[e("div",{staticClass:"show-content"},[t.resultList[0].url?e("img",{attrs:{src:t.resultList[0].url,alt:""},on:{load:t.handleSetImageSize}}):t._e(),t._v(" "),[e("span",{directives:[{name:"show",rawName:"v-show",value:t.resultList[0].url&&!t.isLoading,expression:"resultList[0].url && !isLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close"})])]],2)]):t._e(),t._v(" "),e("div",{staticClass:"prompt-input-area-wrap"},[e("div",{staticClass:"prompt-input-area"},[e("div",{staticClass:"input-box"},[e("el-input",{staticClass:"input-box-input",attrs:{disabled:t.isLoading,placeholder:t.$t("PromptNotEmpty"),clearable:""},model:{value:t.promptInput,callback:function(e){t.promptInput=e},expression:"promptInput"}})],1),t._v(" "),e("div",{staticClass:"operate-btn-box"},[e("div",{staticClass:"select-item"},[e("el-select",{attrs:{"popper-append-to-body":!1,"popper-class":"custom-select","data-group":"class_p-fast-tools",disabled:t.isLoading},on:{change:t.promptStyleChange},model:{value:t.promptStyle,callback:function(e){t.promptStyle=e},expression:"promptStyle"}},t._l(t.exampleList,(function(t,i){return e("el-option",{key:"method_"+i,attrs:{label:t.name,value:t.id,"data-event":"ai_tools_draft_design_style_item","data-id":t.id}})})),1)],1),t._v(" "),e("div",{staticClass:"submit-btn",on:{click:function(e){return e.stopPropagation(),t.handleStart.apply(null,arguments)}}},[t._v(t._s(t.$t("Generate")))])])])]),t._v(" "),e("div",{staticClass:"example-display"},[e("div",{staticClass:"example-title"},[e("span",{staticClass:"el-icon-bottom example-title-icon"}),t._v(t._s(t.$t("ai_tools_9")))]),t._v(" "),e("div",{staticClass:"example-list"},[t._l(t.exampleImageList.slice(0,4),(function(n,o){return[n&&n.url?e("div",{key:o,staticClass:"example-list-item",on:{click:function(e){return e.stopPropagation(),t.handleSelectExample(n)}}},[e("img",{attrs:{src:n.url}})]):t._e()]}))],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&t.isLoading||t.renderList.length,expression:"(imgUrl && isLoading) || renderList.length"}],staticClass:"result-show-area"},[e("div",{staticClass:"result-show-content"},[t.isLoading||t.imgUrl&&t.imgLoading?e("div",{staticClass:"quick-box"},[e("i",{staticClass:"el-icon-loading image-loading loading-icon-draf"}),t._v(" "),e("QuickQueue",{attrs:{quickOptions:t.quickOptions}})],1):t._e(),t._v(" "),t.imgUrl?e("img",{attrs:{src:t.imgUrl,alt:""},on:{load:t.handleImageLoad,error:t.handleImageLoad}}):t._e(),t._v(" "),[e("span",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading&&!t.imgLoading,expression:"imgUrl && !isLoading && !imgLoading"}],staticClass:"el-image-viewer__close",on:{click:function(e){return e.stopPropagation(),t.removeImage.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl&&!t.isLoading&&!t.imgLoading,expression:"imgUrl && !isLoading && !imgLoading"}],staticClass:"bottom-download-btn",attrs:{"data-event":"ai_tools_draft_design_download_btn"},on:{click:function(e){return e.stopPropagation(),t.downloadImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-icon-Download bottom-download-btn-icon"}),t._v(" "),e("span",{staticClass:"bottom-download-btn-text"},[t._v(t._s(t.$t("DownloadImg")))])])]],2),t._v(" "),e("div",{staticClass:"show-result-bottom-list"},[t._l(t.resultList,(function(n,o){return e("ai-filter-card",{key:"result_card_".concat(o),attrs:{source:n,"is-loading":t.isLoading,order:o+1},on:{selectImage:t.handleSelectImage,removeImage:t.removeImage}})})),t._v(" "),t._l(3,(function(n,o){return e("ai-filter-card",{key:"result_card_".concat(o+2),attrs:{source:t.getResult(o),"is-loading":t.isLoading,order:o+2},on:{reMake:t.handleReMake,selectImage:t.handleSelectImage}})}))],2)])])}),[],!1,null,"22bf7f57",null));e.default=P.exports;installComponents(P,{QuickQueue:n(119).default})},5759:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(4),n(51)),c=n(61),d=(n(18),n(19),n(199),n(16),n(22),n(49),n(40),n(41),n(26),n(57)),v=(n(24),{props:{item:{type:Object,default:function(){}},index:{type:Number,default:0},size:{type:Number,default:100}},data:function(){return{isDragging:!1,offset:{},draggable:null,container:null,parentW:0,intW:0,intH:0,intT:0,intL:0}},watch:{size:{handler:function(t){this.resizeChildElement()}}},mounted:function(){this.container=document.getElementById("draggable"),this.draggable=this.$refs["rectItem"+this.index],this.parentW=JSON.parse(JSON.stringify(this.container.offsetWidth)),this.intW=JSON.parse(JSON.stringify(parseInt(this.draggable.style.width))),this.intH=JSON.parse(JSON.stringify(parseInt(this.draggable.style.height))),this.intT=JSON.parse(JSON.stringify(parseInt(this.draggable.style.top))),this.intL=JSON.parse(JSON.stringify(parseInt(this.draggable.style.left)))},methods:{resizeChildElement:function(){var t=this.container.offsetWidth/this.parentW;this.draggable.style.top=this.intT*t+"px",this.draggable.style.left=this.intL*t+"px",this.draggable.style.width=this.intW*t+"px",this.draggable.style.height=this.intH*t+"px",this.$emit("change",{index:this.index,top:parseInt(this.draggable.style.top),left:parseInt(this.draggable.style.left),width:parseInt(this.draggable.style.width),height:parseInt(this.draggable.style.height)})},onMousedown:function(t){this.isDragging=!0;var e=this.draggable.getBoundingClientRect();this.offset.x=t.clientX-e.left,this.offset.y=t.clientY-e.top},onMousemove:function(t){if(this.isDragging){var e=t.clientX-this.offset.x-this.container.getBoundingClientRect().left,n=t.clientY-this.offset.y-this.container.getBoundingClientRect().top;e=Math.min(this.container.clientWidth-this.draggable.clientWidth,Math.max(0,e)),n=Math.min(this.container.clientHeight-this.draggable.clientHeight,Math.max(0,n)),this.draggable.style.left=e+"px",this.draggable.style.top=n+"px",this.draggable.style.zIndex=9999}},onMouseup:function(t){this.isDragging=!1,this.draggable.style.zIndex=2,this.intW=JSON.parse(JSON.stringify(parseInt(this.draggable.style.width))),this.intH=JSON.parse(JSON.stringify(parseInt(this.draggable.style.height))),this.intT=JSON.parse(JSON.stringify(parseInt(this.draggable.style.top))),this.intL=JSON.parse(JSON.stringify(parseInt(this.draggable.style.left))),this.$emit("change",{index:this.index,top:this.intT,left:this.intL,width:this.intW,height:this.intH})}}}),h=(n(5089),n(0)),component=Object(h.a)(v,(function(){var t=this,e=t._self._c;return e("div",{ref:"rectItem"+t.index,staticClass:"rectItem",style:{width:t.item.width+"px",height:t.item.height+"px",left:t.item.left+"px",top:t.item.top+"px"},on:{"&mousedown":function(e){return t.onMousedown.apply(null,arguments)},"&mousemove":function(e){return t.onMousemove.apply(null,arguments)},"&mouseup":function(e){return t.onMouseup.apply(null,arguments)},mouseleave:function(e){return e.preventDefault(),t.onMouseup.apply(null,arguments)}}},[e("div",{staticClass:"clear",on:{click:function(e){return t.$emit("delete",t.index)}}},[e("i",{staticClass:"el-icon-close"})])])}),[],!1,null,"4c10d0ec",null),f=component.exports,m=n(422),_=n(29),y=n(104),w=n(95),C=n(10),O=n(1);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("ai_erase"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{dialogVisible:!1,intLoading:!0,intImg:{url:"",width:0,height:0,size:50},MasterDrawing:"",intHeight:0,intWidth:0,mouseX:0,mouseY:0,isMousedown:!1,sizeList:[{name:"400%",value:400},{name:"200%",value:200},{name:"125%",value:125},{name:"100%",value:100},{name:"75%",value:75},{name:"50%",value:50},{name:"25%",value:25},{name:"10%",value:10},{name:"fitToScreen",value:50},{name:"ai_erase3",value:100}],toolTyoe:"smear",toolList:[{name:this.$t("erasePage1"),icon:"iconfont icon-tumo",value:"smear"},{name:this.$t("erasePage2"),icon:"iconfont icon-juxing",value:"rectangle"},{name:this.$t("erasePage3"),icon:"iconfont icon-taosuo",value:"noose"}],brushSize:40,canvas:null,context:null,startX:0,startY:0,blankCanvas:"",currentStep:-1,historyList:[],isDrawing:!1,uploading:!1,UPLOAD:new l.a({type:30}),drewPoints:[],rectList:[],imgSegmentUrlList:[],hoverMaskUrl:"",hasHover:!0,debounceHandleMouseMove:null,imagesList:[],loading:!1,inTimes:!1,retryCount:0,jsonUrl:"",imgUrl:"",imgShow:!0,lengthOfLongSide:0,consumption:1,quickOptions:{}}},watch:{dialogVisible:{handler:function(t){t||(this.intImg={url:"",width:0,height:0,size:100},this.toolTyoe="smear",this.historyList=[],this.imagesList=[],this.debounceHandleMouseMove=null,this.currentStep=-1,this.imgUrl="",this.imgShow=!0,this.MasterDrawing="")}}},components:{rectItemVue:f,QuickQueue:n(119).default},computed:k(k(k({},Object(O.c)("user",["isLoggedIn","accountSettingsData","cdnHostFun"])),Object(O.e)("app",["ABInfo"])),{},{setCanvasStyle:function(){var t="";if("smear"==this.toolTyoe){var e=this.brushSize;e<10&&(e=10);var n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e,'" viewBox="0 0 32 32">\n        <path fill="none" stroke="#000" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.9048" d="M31.048 16c0 8.311-6.737 15.048-15.048 15.048s-15.048-6.737-15.048-15.048c0-8.311 6.737-15.048 15.048-15.048s15.048 6.737 15.048 15.048z"></path>\n        </svg>'),o=btoa(n),r="data:image/svg+xml;base64,".concat(o);t="url(".concat(r,") ").concat(e/2," ").concat(e/2,", auto")}return"rectangle"==this.toolTyoe&&(t="url(https://".concat(this.cdnHostFun(),"/20240312/cb26a6cd-7ca5-4e32-a633-df7094cb570d.cur) 8 8, auto")),"noose"==this.toolTyoe&&(t="url(https://".concat(this.cdnHostFun(),"/20240307/3b553f30-1a01-4287-85b9-b1840754b717.cur) 8 8, auto")),"drag"==this.toolTyoe&&(t="grab"),t}}),created:function(){this.debounceHandleMouseMove=Object(y.throttle)(this.handleMouseMove,300)},mounted:function(){document.addEventListener("keydown",this.shortcutKey),this.postExposureLogEvent()},beforeDestroy:function(){document.removeEventListener("keydown",this.shortcutKey)},methods:{reupload:function(){this.dialogVisible=!1,this.$logEvent("log_actions",{operation:"click_reupload_image",behavior_info:"on_ai_remove"})},shortcutKey:function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&"z"===t.key.toLowerCase()?this.handleNext():(t.ctrlKey||t.metaKey)&&"z"===t.key.toLowerCase()&&this.handlePre()},dwn:function(){this.$logEvent("log_actions",{operation:"click_download_image",behavior_info:"on_ai_remove"}),Object(C.M)(this.imgUrl)},changeTool:function(t){this.toolTyoe=t.value;var e="smudge";"rectangle"==this.toolTyoe&&(e="rectangular_marquee"),"noose"==this.toolTyoe&&(e="lasso_tool"),this.$logEvent("log_actions",{operation:"click_"+e,behavior_info:"on_ai_remove"}),"quick"!=this.toolTyoe||this.imgSegmentUrlList.length||this.getSegmentMaskData()},handleMouseMove:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 2:(o=n.sent)&&-1!=o&&e.hasHover&&e.setHoverMask(o);case 4:case"end":return n.stop()}}),n)})))()},setHoverMask:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!["",null,void 0,-1].includes(t)){n.next=3;break}return e.hoverMaskUrl="",n.abrupt("return");case 3:(r=new Image).src=e.imgSegmentUrlList[t],r.onload=Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("canvas")).width=e.intImg.width,n.height=e.intImg.height,(o=n.getContext("2d")).clearRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-in",o.fillStyle="#21FEFF",o.fillRect(0,0,e.intImg.width,e.intImg.height),o.globalCompositeOperation="source-over",o.drawImage(r,0,0,e.intImg.width,e.intImg.height),e.hoverMaskUrl=n.toDataURL();case 11:case"end":return t.stop()}}),t)})));case 6:case"end":return n.stop()}}),n)})))()},selectRegion:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("quick"==e.toolTyoe){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.checkCoordinate(t.offsetX,t.offsetY,e.imagesList);case 4:(o=n.sent)&&-1!=o&&e.selectSegmentMask(o);case 6:case"end":return n.stop()}}),n)})))()},selectSegmentMask:function(t){var e=this,n=new Image,o=this.$refs.canvas.getContext("2d"),r=this.intImg,l=r.width,c=r.height;n.src=this.imgSegmentUrlList[t],n.onload=function(){for(var t=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],i=0;i<t.length;i+=2)o.drawImage(n,0+4*t[i],0+4*t[i+1],l,c);o.drawImage(n,0,0,l,c),e.saveToHistory()}},checkCoordinate:function(t,e,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.detectClickedImage(t,e,n));case 1:case"end":return o.stop()}}),o)})))()},detectClickedImage:function(t,e,n){for(var o=this.canvas.width/this.canvas.offsetWidth,i=n.length-1;i>=0;i--){var r=n[i],l=parseInt(t*o),c=parseInt(e*o);if(this.checkPixelTransparency(r,l,c))return i}},checkPixelTransparency:function(t,e,n){return 0!==t.data[4*(e+n*t.width)+3]},getSegmentMaskData:function(){var t=this;if(!(this.loading||this.imgSegmentUrlList.length||this.uploading)){this.loading=!0;var e={image_url:this.intImg.url,width:this.intImg.width,height:this.intImg.height};Object(m.b)(e).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.id])})).catch((function(e){t.loading=!1}))}},getTaskInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o={};o.task_ids=t,o.scene=1,Object(_.batchFetchTaskProcess)(o).then((function(o){var r,l,c,d,v,h;if(1e4==o.status.code)if(e.quickOptions=null===(r=o.data)||void 0===r?void 0:r.items[0],null!==(l=o.data)&&void 0!==l&&l.items[0]&&3==(null===(c=o.data)||void 0===c||null===(c=c.items[0])||void 0===c?void 0:c.status))if(clearTimeout(e.inTimes),e.jsonUrl=null===(h=o.data)||void 0===h?void 0:h.items[0].segment,1==n)e.loadJsonFile(e.jsonUrl);else{var f,m;e.imgUrl=null===(f=o.data)||void 0===f||null===(f=f.items[0])||void 0===f||null===(f=f.img_uris[0])||void 0===f?void 0:f.url;var img=new Image;img.src=null===(m=o.data)||void 0===m||null===(m=m.items[0])||void 0===m||null===(m=m.img_uris[0])||void 0===m?void 0:m.url,img.onload=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()},img.onerror=function(){e.intImg.url=img.src,e.uploading=!1,e.loading=!1,e.intLoading=!1,e.rectList=[],e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.saveToHistory()}}else null!==(d=o.data)&&void 0!==d&&d.items[0]&&4==(null===(v=o.data)||void 0===v||null===(v=v.items[0])||void 0===v?void 0:v.status)?(clearTimeout(e.inTimes),e.$message.warning(e.$t(1==n?"获取切片失败":"消除失败")),e.loading=!1,e.intLoading=!1,e.uploading=!1):(clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t,n)}),1e3))})).catch((function(t){e.$message.warning(e.$t(1==n?"获取切片失败":"消除失败")),e.loading=!1,e.uploading=!1,e.intLoading=!1}))},loadJsonFile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch(e).then((function(e){return e.ok||t.$message.error(t.$t("ServerError")),e.json()})).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initCanvas(null==data?void 0:data.result);case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(n){console.error("There has been a problem with your fetch operation:",n),0===t.retryCount?(t.loadJsonFile(e).finally((function(){t.loading=!1})),t.retryCount++):t.$message.error(t.$t("ServerError"))}))},initCanvas:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return data=t.length>0&&void 0!==t[0]?t[0]:[],e.imgSegmentUrlList=data.map((function(t){return"data:image/png;base64,".concat(t.mask_png)})),n.next=4,e.loadAllMask(e.imgSegmentUrlList);case 4:e.imagesList=n.sent;case 5:case"end":return n.stop()}}),n)})))()},loadAllMask:function(){var t=this,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.intImg||{},n=e.width,o=e.height,r=(source||[]).map((function(t){return new Promise((function(e,n){var img=new Image;img.onload=function(){return e(img)},img.onerror=function(t){return n(t)},img.src=t}))}));return Promise.all(r).then((function(e){for(var r=[],i=0;i<e.length;i++){var img=e[i],l=document.createElement("canvas");l.width=n,l.height=o;var c=l.getContext("2d");c.drawImage(img,0,0,t.intImg.width,t.intImg.height);var d=c.getImageData(0,0,t.intImg.width,t.intImg.height);d.data;c.putImageData(d,0,0);var v=l.toDataURL();t.$set(t.imgSegmentUrlList,i,v);var h=c.getImageData(0,0,t.intImg.width,t.intImg.height);r.push(h),l=null,c=null}return r}))},show:function(t){var e=this;this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolTyoe="smear",this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url="",this.imgUrl="",this.MasterDrawing="",this.imagesList=[],this.debounceHandleMouseMove=null,this.intLoading=!0,this.$nextTick((function(){e.intImg.url=t,e.MasterDrawing=t,e.dialogVisible=!0,e.imgLoad()}))},intSize:function(){var t=window.innerHeight-240,e=this.intImg.height;this.intImg.width>2*this.intImg.height&&(t=window.innerWidth-100,e=window.innerWidth),this.intImg.size=parseInt(t/e*100)},changeSize:function(t){var e=this;if("fitToScreen"==t.name){var n=this.$refs.draggable;return n.style.left=null,n.style.top=null,void this.$nextTick((function(){e.intSize()}))}this.intImg.size=t.value},setConsumption:function(){this.consumption=1,this.lengthOfLongSide>=1024&&this.lengthOfLongSide<=2048?this.consumption=1.5:this.lengthOfLongSide>=2048&&this.lengthOfLongSide<=4096&&(this.consumption=4)},imgLoad:function(){this.intLoading=!0;var img=new Image;img.src=this.intImg.url;var t=this;img.onload=function(){t.lengthOfLongSide=Math.max(this.width,this.height),t.setConsumption(),t.intImg.width=this.width,t.intImg.height=this.height,t.intSize(),t.intLoading=!1,t.$nextTick((function(){t.canvas=t.$refs.canvas,t.context=t.canvas.getContext("2d"),t.context.fillStyle="rgba(255, 255, 255, 1)",t.context.lineJoin="round",t.context.lineCap="round",t.rectCanvas=t.$refs.rectCanvas,t.rectText=t.rectCanvas.getContext("2d"),t.rectText.strokeStyle="rgba(0,0,0,1)",t.rectText.fillStyle="rgba(255, 255, 255, 1)",t.rectText.lineJoin="round",t.rectText.lineCap="round",t.blankCanvas=t.canvas.toDataURL(),t.saveToHistory()}))},img.onerror=function(){t.$message.error(t.$t("ai_erase4")),t.intLoading=!1}},downElement:function(t){if("drag"==this.toolTyoe){this.isMousedown=!0;var e=this.$refs.draggable;this.mouseX=t.clientX-e.offsetLeft,this.mouseY=t.clientY-e.offsetTop}},moveElement:function(t){if(this.isMousedown&&"drag"==this.toolTyoe){var e=this.$refs.draggable;e.style.left=t.clientX-this.mouseX+"px",e.style.top=t.clientY-this.mouseY+"px"}},seupElement:function(){"drag"==this.toolTyoe&&(this.isMousedown=!1)},startDrawing:function(t){if(["smear","noose"].includes(this.toolTyoe))if(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY,"smear"==this.toolTyoe)this.context.strokeStyle="#F14E4E",this.context.lineWidth=this.brushSize<10?10:this.brushSize,this.context.setLineDash([]);else if("noose"==this.toolTyoe){var e=this.$refs.draggable;this.context.strokeStyle="rgba(0,0,0,1)";var n=e.getBoundingClientRect();this.drewPoints.push([{x:t.clientX-n.left,y:t.clientY-n.top}]),this.context.setLineDash([10,5]),this.context.lineWidth=2}},draw:function(t){if(this.isDrawing){var e,n,o=this.canvas.width/this.canvas.offsetWidth;if(this.context.scale(o,o),"smear"==this.toolTyoe){var r=t.offsetX,l=t.offsetY;this.context.beginPath(),this.context.moveTo(this.startX,this.startY),this.context.lineTo(r,l),this.context.stroke(),this.startX=r,this.startY=l}else if("noose"==this.toolTyoe){var c,d,v=this.$refs.draggable.getBoundingClientRect();c=t.clientX,d=t.clientY;var h=this.drewPoints[this.drewPoints.length-1];h.push({x:c-v.left,y:d-v.top});var f=h[0],m=h[1],_=h.length;this.context.beginPath(),this.context.moveTo(f.x,f.y);for(var i=1;i<_;i++){var y=(n=m,{x:(e=f).x+(n.x-e.x)/2,y:e.y+(n.y-e.y)/2});this.context.quadraticCurveTo(f.x,f.y,y.x,y.y),f=h[i],m=h[i+1]}this.context.lineTo(f.x,f.y),this.context.stroke()}this.context.scale(1/o,1/o)}},stopDrawing:function(){["smear","noose"].includes(this.toolTyoe)&&this.isDrawing&&(this.isDrawing=!1,"noose"==this.toolTyoe&&(this.context.closePath(),this.context.stroke(),this.context.fill()),this.saveToHistory())},startRectDrawing:function(t){"rectangle"==this.toolTyoe&&(this.isDrawing=!0,this.startX=t.offsetX,this.startY=t.offsetY)},rectDraw:function(t){var e=this;if(this.isDrawing){var n=t.offsetX,o=t.offsetY;this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height),this.$nextTick((function(){var t=e.rectCanvas.width/e.rectCanvas.offsetWidth;e.rectText.scale(t,t),e.rectText.beginPath(),e.rectText.rect(e.startX,e.startY,n-e.startX,o-e.startY),e.rectText.fill(),e.rectText.stroke(),e.rectText.scale(1/t,1/t)})),this.rectCanvas.style.zIndex=9999}},stopRectDrawing:function(t){if("rectangle"==this.toolTyoe&&this.isDrawing){this.isDrawing=!1,this.rectText.clearRect(0,0,this.rectCanvas.width,this.rectCanvas.height);var e=t.offsetX,n=t.offsetY;this.rectList.push({left:e-this.startX>0?this.startX:e,top:n-this.startY>0?this.startY:n,width:Math.abs(e-this.startX),height:Math.abs(n-this.startY)}),this.saveToHistory(),this.rectCanvas.style.zIndex=2}},rectDelete:function(t){this.rectList.splice(t,1)},rectChange:function(t){this.rectList[t.index].top=t.top,this.rectList[t.index].left=t.left,this.rectList[t.index].width=t.width,this.rectList[t.index].height=t.height},saveToHistory:function(){var t=JSON.parse(JSON.stringify(this.rectList)),e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),img=JSON.parse(JSON.stringify(this.intImg.url));this.currentStep++,1==this.currentStep&&this.historyList.splice(1,this.historyList.length-1),this.historyList.push({currentImageData:e,rects:t,img:img}),this.currentStep=this.historyList.length-1},handlePre:function(){this.historyList.length>0&&this.currentStep>0&&(this.currentStep--,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleNext:function(){this.currentStep<this.historyList.length-1&&(this.currentStep++,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.putImageData(this.historyList[this.currentStep].currentImageData,0,0),this.rectList=JSON.parse(JSON.stringify(this.historyList[this.currentStep].rects)),this.intImg.url=JSON.parse(JSON.stringify(this.historyList[this.currentStep].img)))},handleReset:function(){this.historyList.length>1&&(this.currentStep=-1,this.historyList=[],this.rectList=[],this.toolTyoe="smear",this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.intImg.url=this.MasterDrawing,this.imgUrl="",this.imgLoad())},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;e.$set(e,"style",{width:t,height:o});var r=[t,o].every((function(t){return t<=4096}));n(r)},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},uploadMaskImage:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,i,l,c,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=3;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return");case 3:if(t.intImg.width){e.next=5;break}return e.abrupt("return");case 5:if(!t.uploading&&!t.loading){e.next=7;break}return e.abrupt("return");case 7:for(t.$logEvent("log_actions",{operation:"click_start_remove",behavior_info:"on_ai_remove"}),t.uploading=!0,t.loading=!0,(n=document.createElement("canvas")).width=t.intImg.width,n.height=t.intImg.height,(o=n.getContext("2d")).clearRect(0,0,n.width,n.height),r=t.context.getImageData(0,0,t.canvas.width,t.canvas.height),i=0;i<r.data.length;i+=4)255===r.data[i]&&255===r.data[i+1]&&255===r.data[i+2]||(r.data[i]=255,r.data[i+1]=255,r.data[i+2]=255);if(o.putImageData(r,0,0),l=t.canvas.width/t.canvas.offsetWidth,t.rectList.length>0&&t.rectList.forEach((function(t){o.fillStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.rect(t.left*l,t.top*l,t.width*l,t.height*l),o.fill()})),(c=n.toDataURL())!==t.blankCanvas||0!=t.rectList.length){e.next=26;break}return t.uploading=!1,t.loading=!1,t.$message.warning(t.$t("erasePage4")),e.abrupt("return");case 26:return v=t.UPLOAD,h=Object(d.dataURItoBlob)(c),e.next=30,t.checkImageSize(h);case 30:if(e.sent){e.next=36;break}return t.$message.warning(t.$t("ImageSizeExceedsError")),t.uploading=!1,t.loading=!1,e.abrupt("return");case 36:return e.abrupt("return",v.startUpload(h,{name:"draft-design-image".concat(Date.now(),".png"),type:"png",category:46}).then((function(e){var n,o={image_url:t.intImg.url,mask_url:e,width:t.intImg.width,height:t.intImg.height,ab_test:null!==(n=t.ABInfo)&&void 0!==n&&n.ai_erase_new_workflow?t.ABInfo.ai_erase_new_workflow.toLowerCase():""};return Object(w.b)(o).then((function(e){1e4==e.status.code&&t.getTaskInfo([e.data.task_id],2)}))})).catch((function(){t.uploading=!1,t.loading=!1})));case 37:case"end":return e.stop()}}),e)})))()},postExposureLogEvent:function(){this.$xyLogEvent({front_operation:"exposure",entity_name:" ai-tools-ai-erase-page",entity_type:"ai-tools-ai-app-erase-page",event_name:"log_action_front",obj_category:"ai-tools-erase-page",obj_desc:"快应用智能消除页面-曝光",obj_id:this.appId})}}},j=I,S=(n(5090),n(5091),Object(h.a)(j,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"aiErase",fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.intLoading,expression:"intLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"bntBox"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsUndo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:1==t.historyList.length||0==t.currentStep},on:{click:function(e){return t.handlePre()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon3"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fastToolsRedo"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.currentStep==t.historyList.length-1},on:{click:function(e){return t.handleNext()}}},[e("i",{staticClass:"iconfont icon-draw-board-icon2"})])]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("S_ResetPrompt"),placement:"bottom"}},[e("div",{staticClass:"bnt",class:{disabledStyle:t.historyList.length<2},on:{click:function(e){return t.handleReset()}}},[e("i",{staticClass:"el-icon-refresh"})])])],1)]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.intLoading||t.loading}},[e("div",{staticClass:"rightBnt",on:{click:function(e){!t.loading&&t.reupload()}}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" "),e("span",[t._v(t._s(t.$t("CreativeCenterPopup33")))])]),t._v(" "),e("div",{staticClass:"rightBnt",class:{disabledStyle:!t.imgUrl},on:{click:function(e){t.imgUrl&&t.dwn()}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])]),t._v(" "),e("div",{staticClass:"right",class:{disabledStyle:t.intLoading}},[e("div",{staticClass:"dragIcon",on:{click:function(e){"drag"==t.toolTyoe?t.toolTyoe="smear":t.toolTyoe="drag"}}},[e("i",{staticClass:"iconfont icon-zhuashou-copy",style:{color:"drag"==t.toolTyoe?"#4784FF":null}})]),t._v(" "),e("div",{staticClass:"sizeBox"},[e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size<=10},on:{click:function(e){t.intImg.size>10&&(t.intImg.size-=10)}}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("el-popover",{attrs:{placement:"top",trigger:"hover","visible-arrow":!1,"popper-class":"sizeListBox"}},[e("div",{staticClass:"sizeList"},t._l(t.sizeList,(function(n,o){return e("div",{key:o,staticClass:"sizeItem",on:{click:function(e){return t.changeSize(n)}}},[t._v("\n              "+t._s(t.$t(n.name))+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"sizeNum",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.intImg.size)+"%")])]),t._v(" "),e("div",{staticClass:"sizeBnt",class:{disabledStyle:t.intImg.size>=400},on:{click:function(e){t.intImg.size<400&&(t.intImg.size+=10)}}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("div",{staticClass:"compare",on:{mousedown:function(e){t.imgShow=!1},mouseup:function(e){t.imgShow=!0}}},[e("i",{staticClass:"iconfont icon-icon_duibi"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase2")))])])]),t._v(" "),e("div",{staticClass:"left",class:{disabledStyle:t.intLoading}},t._l(t.toolList,(function(n,o){return e("div",{key:o,staticClass:"toolItem",class:{activateToolItem:t.toolTyoe==n.value},attrs:{"data-event":"ai_tools_ai_erase_tool_item","data-id":n.value},on:{click:function(e){return t.changeTool(n)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))]),t._v(" "),"smear"==n.value&&"smear"==t.toolTyoe?e("div",{staticClass:"lineSize"},[e("span",[t._v(t._s(t.$t("Size")))]),t._v(" "),e("el-slider",{attrs:{"show-input":"","show-input-controls":!1,min:10},model:{value:t.brushSize,callback:function(e){t.brushSize=e},expression:"brushSize"}})],1):t._e()])})),0),t._v(" "),t.intLoading?t._e():e("div",{ref:"draggable",staticClass:"draggable",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px",cursor:t.setCanvasStyle},attrs:{id:"draggable"},on:{mousedown:function(e){return e.preventDefault(),t.downElement.apply(null,arguments)},mousemove:function(e){return e.preventDefault(),t.moveElement.apply(null,arguments)},mouseup:function(e){return e.preventDefault(),t.seupElement.apply(null,arguments)}}},[t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"laodMsk"}):t._e(),t._v(" "),t.loading?e("div",{staticClass:"quick-box"},[e("QuickQueue",{staticClass:"quick-con",attrs:{quickOptions:t.quickOptions}})],1):t._e(),t._v(" "),t.intImg.url?e("img",{directives:[{name:"show",rawName:"v-show",value:t.imgShow,expression:"imgShow"}],attrs:{src:t.intImg.url,alt:""}}):t._e(),t._v(" "),t.MasterDrawing?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.imgShow,expression:"!imgShow"}],attrs:{src:t.MasterDrawing,alt:""}}):t._e(),t._v(" "),e("canvas",{ref:"canvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startDrawing.apply(null,arguments)},"&mousemove":function(e){"quick"==t.toolTyoe?t.debounceHandleMouseMove(e):t.draw(e)},"&mouseup":function(e){return t.stopDrawing.apply(null,arguments)},mouseenter:function(e){t.hasHover=!0},mouseleave:function(e){t.hasHover=!1,t.hoverMaskUrl="",t.stopDrawing()},mousedown:t.selectRegion}}),t._v(" "),t.hoverMaskUrl?e("img",{staticClass:"segment-image-draw-img-hover-mask",style:{width:t.intImg.width*t.intImg.size/100+"px",height:t.intImg.height*t.intImg.size/100+"px"},attrs:{src:t.hoverMaskUrl,alt:""}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:"rectangle"==t.toolTyoe,expression:"toolTyoe == 'rectangle'"}],ref:"rectCanvas",staticClass:"rectCanvas",attrs:{width:t.intImg.width,height:t.intImg.height},on:{"&mousedown":function(e){return t.startRectDrawing.apply(null,arguments)},"&mousemove":function(e){return t.rectDraw.apply(null,arguments)},"&mouseup":function(e){return t.stopRectDrawing.apply(null,arguments)}}}),t._v(" "),t._l(t.rectList,(function(n,o){return e("rectItemVue",{key:"rect"+o,attrs:{item:n,index:o,size:t.intImg.size},on:{delete:t.rectDelete,change:t.rectChange}})}))],2),t._v(" "),e("el-button",{staticClass:"start",class:{disabledStyle:t.intLoading},attrs:{loading:t.uploading},on:{click:t.uploadMaskImage}},[e("i",{staticClass:"iconfont icon-mofabang"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_erase1"))+"（ "+t._s(t.$t("PhysicalExertion")+"："+t.consumption)+" ）")])])],1)])}),[],!1,null,"526777d8",null)),$=S.exports;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}installComponents(S,{QuickQueue:n(119).default});var D={data:function(){return{isUploading:!1}},computed:T(T({},Object(O.c)("user",["cdnHostFun","isLoggedIn"])),{},{exList:function(){return["https://".concat(this.cdnHostFun(),"/static/upload/20240305/6cde277a-f629-4056-ae19-d90f825d434e.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240305/a45133d6-909b-45d5-b529-bae08ab839e0.JPG"),"https://".concat(this.cdnHostFun(),"/static/upload/20240320/9fa4862a-1c6e-4354-82be-a2788d94821b.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240305/da534cbf-5591-4f5e-ba90-31fe26654d6f.jpg")]}}),components:{aiEraseVue:$},methods:{openWorkArea:function(t){this.$refs.aiEraseVue.show(t)},handleUploadClick:function(){this.$refs.uploadRef.$el.querySelector('input[type="file"]').click()},handleImgUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isUploading){n.next=2;break}return n.abrupt("return");case 2:if(r=t.raw,e.isUploading=!0,!(r.size/1024/1024>5)){n.next=16;break}return n.prev=5,n.next=8,Object(c.a)(r,5242880);case 8:r=n.sent,n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(5),console.error("Compression failed:",n.t0),e.isUploading=!1,n.abrupt("return");case 16:e.$refs.aiEraseVue.intLoading=!0,new l.a({type:30}).startUpload(r,{name:"train_img".concat(Date.now(),".png"),type:"png",size:r.size}).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.aiEraseVue.show(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){30005==t.code&&e.$message.error(e.$t("uploadImageViolatesRules")),e.$refs.aiEraseVue.intLoading=!1})).finally((function(){e.isUploading=!1}));case 19:case"end":return n.stop()}}),n,null,[[5,11]])})))()}},head:function(){return{title:this.$t("seoEraser_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoEraser_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIEraserKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoEraser_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoEraser_tag_desc")}]}}},L=D,A=(n(5092),Object(h.a)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai_erase"},[e("img",{staticClass:"topIcon",attrs:{src:n(1458),alt:""}}),t._v(" "),e("h1",{staticClass:"title"},[t._v(t._s(t.$t("ai_erase")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("ai_erase_tip")))]),t._v(" "),e("div",{staticClass:"cnt"},[e("div",{staticClass:"left"},[e("video",{attrs:{src:"https://".concat(this.cdnHostFun(),"/20240228/5d70fb9c-1d3a-4a55-91ff-655ff07e9b27.mp4"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"right"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.isUploading,expression:"isUploading"}],ref:"uploadRef",staticClass:"uploadBox",attrs:{multiple:!1,"show-file-list":!1,"auto-upload":!1,accept:".jpg, .jpeg, .webp, .png",drag:"",action:"/","on-change":t.handleImgUpload}},[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"ex"},t._l(t.exList,(function(n,o){return e("img",{key:o,attrs:{src:n,alt:""},on:{click:function(e){return t.openWorkArea(n)}}})})),0)],1)]),t._v(" "),e("aiEraseVue",{ref:"aiEraseVue",on:{reupload:function(e){t.$refs.uploadRef.$el.querySelector("input").click()}}})],1)}),[],!1,null,"b28c12ea",null));e.default=A.exports},5762:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13);var o=n(3),r=n(2),l=(n(20),n(19),n(32),n(16),n(73),n(22),n(31),n(18),n(24),n(8),n(4),n(28),n(21),n(44),n(7),n(26),n(1)),c=n(268),d=n(39),v=n(45),h=n(10),f=n(318),m=n(85),_={name:"UnlockConfirmDialog",props:{},data:function(){return{isShowDialog:!1,isAutoUnlock:!0,price:0,no:0,from:""}},methods:{show:function(t,e,n){this.$logEvent("log_actions",{operation:"ai_vedio_pay_pop_show",behavior_info:"on_ai_vedio_page",behavior_info_sub:"pop_2"}),this.isShowDialog=!0,this.isAutoUnlock=!0,this.price=e,this.no=t,this.from=n,this.$emit("exitFullscreen")},close:function(){this.isShowDialog=!1,this.price=0,this.no=0,this.from=""},handleUnlock:function(){this.$logEvent("log_actions",{operation:"finish_unlock",behavior_info:"on_ai_vedio_page",behavior_info_sub:this.isAutoUnlock?1:0}),this.$emit("unlock",this.no,this.from),Object(m.c)({ai_video_auto_play:this.isAutoUnlock?1:2,mode:1}),this.close()}}},y=(n(5407),n(0)),w=Object(y.a)(_,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"unlock-confirm-dialog",attrs:{width:"416px",visible:t.isShowDialog,"show-close":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"unlock-confirm-dialog-close el-icon-close",on:{click:t.close}}),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-title"},[t._v(t._s(t.$t("photography6")))]),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-content words-wrap"},[e("span",{staticClass:"txt-1"},[t._v(t._s(t.$t("UnlockTxt1",{number:t.price})))]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(169),alt:"credit"}}),t._v(" "),e("span",{staticClass:"txt-2"},[t._v(t._s(t.$t("UnlockTxt2",{number:1})))])]),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-btns"},[e("el-button",{staticClass:"leave",on:{click:t.close}},[t._v(t._s(t.$t("BrutalExit")))]),t._v(" "),e("el-button",{staticClass:"unlock",on:{click:t.handleUnlock}},[t._v("\n      "+t._s(t.$t("UnlockNow"))+"\n    ")])],1),t._v(" "),e("div",{staticClass:"unlock-confirm-dialog-auto-unlock"},[e("el-checkbox",{model:{value:t.isAutoUnlock,callback:function(e){t.isAutoUnlock=e},expression:"isAutoUnlock"}},[t._v(t._s(t.$t("AutoUnlock")))])],1)])}),[],!1,null,null,null).exports,C=(n(65),n(90),n(126)),O=n(127);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"UnlockBuyDialog",provide:function(){return{top:this}},props:{},components:{PaymentForm:C.a,RightPart:O.a},data:function(){return{isShowDialog:!1,isAutoUnlock:!0,isYearly:!1,language:"en",goodsData:[],subYearly3:{},step:"inGoods",defaultThirdType:0,goodsId:"",isUpgrade:!1,btnLabel:"",loading:!1,dotFrom:"ai_video_detail_pop",maxDiscount:""}},mounted:function(){this.$EventBus.$on("showUnlockBuyDialog",this.show),this.language=this.$i18n.locale.includes("zh")||this.$i18n.locale.includes("ZH")?"zh":"en"},destroyed:function(){this.$EventBus.$off("showUnlockBuyDialog",this.show)},computed:k(k(k({},Object(l.e)("user",["cdnHost","userInfo"])),Object(l.e)("payment",["subThirdType","paymentInfo"])),{},{getBg:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20241123/3294f806-3035-48e7-8317-b151096b09af.webp)")}},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},isFont2level:function(){var t,e=(this.paymentInfo||{}).vipType,n=["svip_1","svip_2","svip_1_trial","svip_2_trial"].includes(e);return!(!this.isVip||!n)&&(this.isYearly=3===(null===(t=this.paymentInfo)||void 0===t?void 0:t.payRange),!0)},getItemGoodsStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20241127/ec23c4e7-9957-4159-a99e-36aac1e2016a.webp)")}},getGif:function(){return"https://".concat(this.cdnHost,"/static/upload/20240428/45f27cdd-f248-4681-a3d0-e8d9e17b91d5.gif")},getSvipStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20240717/fd567045-75a5-47d5-a5ae-b4a43f472260.webp)")}},priceItem:function(){var t;return null===(t=this.subYearly3)||void 0===t?void 0:t.local_price_web},getPrice:function(){var t,e;return this.priceItem?this.isYearly?null===(t=this.priceItem)||void 0===t?void 0:t.price:null===(e=this.priceItem)||void 0===e?void 0:e.price_old:""},getNowPrice:function(){var t;return this.priceItem?(12*(null===(t=this.priceItem)||void 0===t?void 0:t.price)).toFixed(2):""},getOriginalPrice:function(){var t;return this.priceItem?(12*(null===(t=this.priceItem)||void 0===t?void 0:t.price_old)).toFixed(2):""},getUnit:function(){var t,e;return null!==(t=this.subYearly3)&&void 0!==t&&t.local_price_web&&(null===(e=this.subYearly3)||void 0===e||null===(e=e.local_price_web)||void 0===e?void 0:e.currency)||""}}),methods:k(k({},Object(l.b)("payment",["getSubUrlAndThirdType","getSubscriptionList","getCalculateList"])),{},{getGoodsList:function(){var t=this;this.loading=!0,this.getCalculateList().then((function(e){var n=e.data,o=(n.day,n.calculate);n.paid_coins,n.can_sign;if(null!=o&&o.length){var r=o.reduce((function(t,e){return Math.max(t,e.discount)}),0);t.maxDiscount=r?"".concat(r,"0% OFF"):""}t.maxDiscount="";var l=[];l=t.maxDiscount?o.filter((function(t){return t.discount})).slice(0,3):o.slice(0,3);var c=t.maxDiscount?["mall/mall_credit_4.webp","mall/mall_credit_5.webp","mall/mall_credit_5.webp"]:["mall/mall_credit_1.webp","mall/mall_credit_2.webp","mall/mall_credit_3.webp"];t.goodsData=l.map((function(t,e){return k({cp_product_id:t.cp_product_id,btnLoad:!1,bgUrl:c[e]},t)})),t.loading=!1})).catch((function(e){t.loading=!1}))},updateGoodsData:function(){var t=this;this.getSubscriptionList().then((function(e){var n=e.data,data=void 0===n?{}:n;t.handleSubData(data)}))},handleSubData:function(t){this.subYearly3=null==t?void 0:t.year.find((function(t){return"sub_yearly3"===(null==t?void 0:t.id)}))},checkGoodsInfo:function(){this.getGoodsList()},checkVip3Info:function(){this.updateGoodsData()},show:function(){this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"ai_vedio_detail_pop",behavior_info_sub:"pop_1"}),this.checkGoodsInfo(),this.checkVip3Info(),this.isShowDialog=!0,this.isAutoUnlock=!0,this.$emit("exitFullscreen")},close:function(){this.isShowDialog=!1},goMall:function(){var t="".concat(location.origin,"/mall?openTab=Credit");window.open(t,"_blank")},getGoodsPrice:function(t){var e,n;return(null==t||null===(e=t.local_price_web)||void 0===e?void 0:e.currency)+(null==t||null===(n=t.local_price_web)||void 0===n?void 0:n.price)||""},getGoodsPriceOld:function(t){var e,n;return(null==t||null===(e=t.local_price_web)||void 0===e?void 0:e.currency)+(null==t||null===(n=t.local_price_web)||void 0===n?void 0:n.price_old)||""},buySvip:function(){if(this.dotFrom="ai_vedio_pop_calculate",this.isFont2level){var t;this.isUpgrade=!0;var e=3===(null===(t=this.paymentInfo)||void 0===t?void 0:t.payRange);this.goodsId=e?"sub_yearly3":"sub_monthly3",this.btnLabel=this.$t(e?"Upgrade20off":"SubscribeNow")}else this.isUpgrade=!1,this.goodsId=this.isYearly?"sub_yearly3":"sub_monthly3",this.btnLabel=this.$t(this.isYearly?"Upgrade20off":"SubscribeNow");this.switchPayment()},buyCredits:function(t){this.btnLabel=this.$t("businesSwiperBtn1"),this.goodsId=t,this.switchPayment()},switchPayment:function(){var t=this;if(this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"ai_vedio_detail_pop",behavior_info_sub:"pop_2"}),this.goodsId.startsWith("calculate"))return this.isUpgrade=!1,void(this.step="inPay");this.subThirdType?(this.defaultThirdType=this.subThirdType,this.step="inPay"):this.getSubUrlAndThirdType().then((function(e){var n;if(1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var data=e.data;t.defaultThirdType=null==data?void 0:data.third_type,t.step="inPay"}}))},quitPay:function(){this.step="inGoods"},handleUnlock:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.close(),t.step="inGoods",e.next=4,Object(m.c)({ai_video_auto_play:t.isAutoUnlock?1:2,mode:1});case 4:location.reload();case 5:case"end":return e.stop()}}),e)})))()}})},j=(n(5408),Object(y.a)(I,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"unlock-buy-dialog",class:"inGoods"==t.step?"goods-page":"payment-page",attrs:{visible:t.isShowDialog,"show-close":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},["inGoods"===t.step?e("div",{staticClass:"unlock-buy-dialog-goods",class:{"discount-active":t.maxDiscount}},[e("i",{staticClass:"el-icon-close",on:{click:t.close}}),t._v(" "),t.isFont2level?t._e():e("div",{staticClass:"switch-tab"},[t.isYearly?e("div",{staticClass:"title monthly",on:{click:function(e){t.isYearly=!1}}},[t._v("\n        "+t._s(t.$t("PayMonthly"))+"\n        "),e("i",{staticClass:"el-icon-right"})]):e("div",{staticClass:"title yearly",on:{click:function(e){t.isYearly=!0}}},[t._v("\n        "+t._s(t.$t("PayYearly"))+"\n        "),e("img",{staticClass:"icon",attrs:{src:t.getGif,alt:"icon"}}),t._v(" "),e("span",{staticClass:"discount"},[t._v("\n          "+t._s(t.$t("save20"))+"\n        ")]),t._v(" "),e("i",{staticClass:"el-icon-right"})])]),t._v(" "),e("div",{staticClass:"svip-card",style:t.getSvipStyle,on:{click:t.buySvip}},[e("div",{staticClass:"left"},[e("div",{staticClass:"left-top words-wrap"},[e("span",[t._v(t._s(t.$t("ToB_professionalPlan")))]),t._v(" "),e("span",[t._v("SVIP")]),t._v(" "),e("span",[t._v("·")]),t._v(" "),e("span",[t._v(t._s(t.$t(t.isYearly?"AnnualCard":"MonthlyCard")))])]),t._v(" "),e("div",{staticClass:"left-bottom"},[e("span",[t._v("\n            "+t._s(t.$t(t.isYearly?"UnlockAllEpisodesYear":"UnlockAllEpisodesMonth"))+"\n          ")])])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"right-top"},[e("span",{staticClass:"sign"},[t._v("\n            "+t._s(t.getUnit)+"\n          ")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n            "+t._s(t.getPrice)+"\n          ")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("months"))+"\n          ")])]),t._v(" "),t.isYearly?e("div",{staticClass:"right-bottom"},[e("div",{staticClass:"now-price words-wrap"},[e("span",{staticClass:"sign"},[t._v("\n              "+t._s(t.getUnit)+"\n            ")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n              "+t._s(t.getNowPrice)+"\n            ")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n              "+t._s(t.$t("years"))+"\n            ")])]),t._v(" "),e("div",{staticClass:"original-price"},[e("span",{staticClass:"sign"},[t._v("\n              "+t._s(t.getUnit)+"\n            ")]),t._v(" "),e("span",{staticClass:"price"},[t._v("\n              "+t._s(t.getOriginalPrice)+"\n            ")]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"type"},[t._v("\n              "+t._s(t.$t("years"))+"\n            ")])])]):t._e()])]),t._v(" "),e("div",{staticClass:"goods-box"},[e("div",{staticClass:"header"},[e("div",{staticClass:"price"},[e("span",[t._v(t._s(t.$t("Price"))+": 14")]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(169),alt:"credit"}}),t._v(" "),e("span",[t._v(t._s(t.$t("PermanentlyUnlocked")))])]),t._v(" "),e("div",{staticClass:"view-more",on:{click:t.goMall}},[t._v("\n          "+t._s(t.$t("viewMore"))+"\n          "),e("i",{staticClass:"el-icon-right"})])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-all"},[t._l(t.goodsData,(function(o){return[e("div",{key:o.id,staticClass:"item-goods item-goods-gray",style:t.getItemGoodsStyle,on:{click:function(e){return t.buyCredits(o.cp_product_id)}}},[e("client-only",[[o.give_calculate_coins||null!=o&&o.web_give_ratio?e("div",{staticClass:"discount-spacial"},[t._v("\n                  +"+t._s(null==o?void 0:o.web_give_ratio)+"%\n                ")]):t._e(),t._v(" "),o.discount?e("div",{staticClass:"half-discount flex-center",style:t.getBg},[t._v("\n                  "+t._s("".concat(o.discount,"0% OFF"))+"\n                ")]):t._e()]],2),t._v(" "),e("div",{staticClass:"goods-info"},[e("div",{staticClass:"goods-info-top flex-center"},[e("img",{staticClass:"icon",attrs:{src:n(499)("./".concat(o.bgUrl)),alt:"Credit"}}),t._v(" "),e("div",{staticClass:"num-detail flex-center"},[e("span",{staticClass:"num-1"},[t._v(t._s(o.calculate_coins-o.give_calculate_coins))]),t._v(" "),e("span",[t._v("+")]),t._v(" "),e("span",{staticClass:"num-2"},[t._v(t._s(o.give_calculate_coins))])])]),t._v(" "),e("div",{staticClass:"mall-Credit"},[e("span",{staticClass:"words"},[t._v("\n                  "+t._s(o.calculate_coins)+"\n                ")]),t._v(" "),e("img",{staticClass:"icon",attrs:{src:n(169),alt:"Credit"}})])]),t._v(" "),e("el-button",{staticClass:"purchase-btn",attrs:{loading:o.btnLoad}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.maxDiscount,expression:"maxDiscount"}],staticClass:"price-old"},[t._v(t._s(t.getGoodsPriceOld(o)))]),t._v(" "),e("span",{staticClass:"price-new"},[t._v(t._s(t.getGoodsPrice(o)))])])],1)]}))],2)]),t._v(" "),e("div",{staticClass:"auto-unlock"},[e("el-checkbox",{model:{value:t.isAutoUnlock,callback:function(e){t.isAutoUnlock=e},expression:"isAutoUnlock"}},[t._v(t._s(t.$t("AutoUnlock")))])],1)]):t._e(),t._v(" "),"inPay"===t.step?e("PaymentForm",{attrs:{defaultThirdType:t.defaultThirdType,initMount:!0,upgrade:t.isUpgrade,goodsId:t.goodsId,purchParams:{},btnLabel:t.btnLabel,isSubscription:!1},on:{"in-pay-back":t.quitPay,"pay-success":t.handleUnlock}},[e("right-part",{attrs:{showBg:!0,showText:!0,showStep:!1,showAvatar:!0}})],1):t._e()],1)}),[],!1,null,null,null).exports),S=n(971),$=n(915),P=n(916),T=n(917),D=n(918),L=n(3434);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={name:"AIVideo",mixins:[v.a],components:{MyPlayer:f.default,UnlockConfirmDialog:w,UnlockBuyDialog:j,VideoInfo:$.a,VideoComments:P.a,VideoAiPerson:T.a,VideoRelated:D.a,BookCard:L.a},data:function(){return{pageInfo:{page:1,page_size:30},videoData:{},tags:[],paginationArr:[],currentEpisode:1,currentEpisodeArr:[],player:null,videoConfig:{id:"ai-video-player",width:"100%",height:"100%",url:"",autoplay:!0,dynamicBg:{disable:!1,mode:"firstframe"}},expandField:{durationNum:8e3,videoProdType:15,relatedWh:{w:146,h:198}},videoLoading:!0,formatNumberForeign:h.p,dotReportInfo:{view_domain:"",batch_id:"",action:"",obj_no:"",obj_type:1,negative_ids:[],category:"default"},nextVideoId:"",currentPlayTime:0,realViewTimer:null}},mounted:function(){var t=this;this.getData("init"),this.realViewTimer=setTimeout((function(){t.$logEvent("log_actions",{operation:"real_view",behavior_info:15,behavior_info_sub:t.$route.params.id})}),5e3)},beforeDestroy:function(){this.closePlayer(),this.$refs.MyPlayerRef.expandAttrs.destroyMyPlayer(),this.realViewTimer&&clearTimeout(this.realViewTimer)},activated:function(){var t;this.currentEpisode==(null===(t=this.videoData)||void 0===t?void 0:t.max_episode)&&this.getData("init")},computed:E(E(E(E(E({},Object(l.e)("app",["topBanner"])),Object(l.e)("user",["cdnHost","token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["accountSettingsData"])),{},{getVideoStyle:function(){var t=this.topBanner?118:74;return{maxHeight:"calc(100vh - 24px - 165px - ".concat(t,"px)")}},isSuperVip:function(){var t=this.paymentInfo.vipType;return["svip_3","svip_4"].includes(t)},getSvipStyle:function(){return{backgroundImage:"url(https://".concat(this.cdnHost,"/static/upload/20240713/c6818c06-32a6-4b28-9024-118c5c2f9e28.webp)")}},currentPlay:function(){var t;return(null===(t=this.videoData)||void 0===t?void 0:t.now_play)||{}},isAudioBook:function(){var t;return 1===(null===(t=this.videoData)||void 0===t?void 0:t.video_type)}}),watch:{currentEpisode:{handler:function(t){var e,n,o="".concat(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id,":").concat(t);Object(d.i)({items:[{action:"view",obj_no:null===(n=this.$route)||void 0===n||null===(n=n.params)||void 0===n?void 0:n.id,obj_type:15},{action:"view",obj_no:o,obj_type:15}]})},immediate:!0}},methods:{getDetailDynamicData:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.u)({obj_id:data.id,obj_type:15});case 2:n=e.sent,t.videoData=Object.assign({},t.videoData,n);case 4:case"end":return e.stop()}}),e)})))()},backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))},handleLike:function(){var t,e={video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:"click_like",behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(e)}),this.setLike(this.videoData,"ai_video","ai_video_detail")},handleShare:function(){var t,e={video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:"click_share",behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(e)});var n=location.href;this.$message.success(this.$t("CopiedURLToClipboard")),Object(h.g)(n)},getData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=E({video_id:(null===(o=e.$route)||void 0===o||null===(o=o.params)||void 0===o?void 0:o.id)||"",goto_play:"init"==t},e.pageInfo),n.next=3,Object(c.b)(r).then((function(n){var o,l,c,data=(null==n?void 0:n.data)||{},d=data.max_episode,v=void 0===d?1:d,h=data.episodes,f=void 0===h?[]:h,m=data.tags,_=void 0===m?[]:m;"init"==t&&(e.videoData=E(E({},data),{},{id:r.video_id}),1===data.video_type&&(e.expandField.relatedWh.w=221,e.expandField.relatedWh.h=128),e.changeVideoUrl(),e.tags=_,e.currentEpisode=(null===(l=e.currentPlay)||void 0===l?void 0:l.play_episode)||1,e.paginateEpisodes(v,e.pageInfo.page_size),e.$logEvent("log_watch_vedio",{vedio_source:"moreshort",vedio_id:(null===(c=e.$route)||void 0===c||null===(c=c.params)||void 0===c?void 0:c.id)||"",episode_id:e.currentEpisode,watch_type:"auto"}));e.currentEpisodeArr=f,null===(o=e.$refs)||void 0===o||null===(o=o.relatedVideo)||void 0===o||o.getVideoRelated(),e.getDetailDynamicData(e.videoData)}));case 3:case"end":return n.stop()}}),n)})))()},paginateEpisodes:function(t,e){this.paginationArr=[];for(var n=1,o=1;o<=t;o+=e){var r=Math.min(o+e-1,t);this.paginationArr.push({page:n,val:"".concat(o,"-").concat(r)}),o<=this.currentEpisode&&r>=this.currentEpisode&&(this.pageInfo.page=n),n++}},handleEpisodeClick:function(t){var e,n=t.no,o=t.price,r=t.status,l=this.paymentInfo.calculateCoins;if(this.$refs.MyPlayerRef.expandAttrs.hideVideoPop(),this.token||1!=r){if(this.currentEpisode!=n){var c=0;if(this.currentEpisodeArr.forEach((function(t){var e;1==t.status&&!c&&(c=t.no),1==(null==t||null===(e=t.pre_episode)||void 0===e?void 0:e.status)&&(c=1)})),1!=r||n==c){var d=1==(null===(e=this.accountSettingsData)||void 0===e?void 0:e.ai_video_auto_play);2==r||d?this.playEpisode(n,"manual"):l>=o?this.$refs.unlockConfirm.show(n,o,"manual"):this.$refs.unlockBuy.show()}else this.$message.warning(this.$t("PleaseUnlockEpisodesInOrder"))}}else this.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}})},playEpisode:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$logEvent("log_watch_vedio",{vedio_source:"moreshort",vedio_id:(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"",episode_id:this.currentEpisode,watch_type:n}),this.currentEpisode=t,this.getEpisodeData()},getEpisodeData:function(){var t,e=this;Object(c.e)({episode:this.currentEpisode,video_id:(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||""}).then((function(t){if(1e4==t.status.code){var n,data=(null==t?void 0:t.data)||{};delete data.play_resolution,Object.assign((null==e||null===(n=e.videoData)||void 0===n?void 0:n.now_play)||{},data),e.changeVideoUrl(),e.currentEpisodeArr.forEach((function(t){e.currentEpisode==t.no&&(t.status=2)})),e.handleDataReport(0,"beginning")}}))},handlePaginationClick:function(t){this.pageInfo.page=t.page,this.getData("pagination")},handleDataReport:function(t){var e,n,o,r,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$logEvent("log_vedio_time",{duration:t,resolution:null===(e=this.currentPlay)||void 0===e?void 0:e.play_resolution,vedio_id:(null===(n=this.$route)||void 0===n||null===(n=n.params)||void 0===n?void 0:n.id)||"",episode_id:this.currentEpisode,video_source:this.isAudioBook?"audio_novel":"moreshort",report_type:d,is_selected:!(null===(o=this.$route)||void 0===o||null===(o=o.query)||void 0===o||!o.isRecommend)}),this.token&&Object(c.a)({plays:[{duration:t,episode:this.currentEpisode,resolution:null===(r=this.currentPlay)||void 0===r?void 0:r.play_resolution,video_id:(null===(l=this.$route)||void 0===l||null===(l=l.params)||void 0===l?void 0:l.id)||""}]})},playerReady:function(t){var e=this,n=t.player,o=t.Events,r=t.expandAttrs;this.player=n,n.on(o.LOADED_DATA,(function(data){var t=e.currentPlay.play_duration;n.currentTime=t,e.videoLoading=!1})),n.on(o.DESTROY,(function(){e.handleDataReport(Math.floor(e.currentPlayTime),"exit")})),n.on(o.ENDED,(function(data){e.handleAutoPlay({player:n,expandAttrs:r})})),n.on(o.USER_ACTION,(function(data){var t=data.action,n=data.currentTime,o=data.to;switch(t){case"click":e.handleDataReport(Math.floor(n),"drag");break;case"change_definition":e.videoData.now_play.play_resolution=o.definition,e.videoData.now_play.play_duration=n,e.handleDataReport(Math.floor(n),"clarity");break;case"switch_play_pause":e.handleDataReport(Math.floor(n),"stop")}})),n.on(o.URL_CHANGE,(function(data){e.videoLoading=!0})),n.on(o.ERROR,(function(data){6!==data.mediaError.code&&(e.videoLoading=!1)}))},changeVideoUrl:function(){var t=Number(localStorage.getItem("definitionLevel")||"2"),e=this.currentPlay,n=e.episodes,o=void 0===n?[]:n,r=(e.play_resolution,e.dash_url),l=e.hls_url,c=o.find((function(e){return e.resolutions===t}))||o[0],d={dash:r,hls:l,other:(null==c?void 0:c.url)||""},v=Object(S.outputPath)(d),path=v.path,h=v.isSupport;this.player.switchURL(path),this.player.playNext({url:path}),!h&&this.changeDefinition()},changeDefinition:function(){var t=this.currentPlay.episodes,e=void 0===t?[]:t,n=Number(localStorage.getItem("definitionLevel")||"2"),o={1:360,2:480,3:720,4:1080,5:1440,6:2160},r=e.map((function(t,e){var r=o[t.resolutions]||480;return{id:e,active:t.resolutions===n,level:t.resolutions,height:r,definition:r+"p",url:t.url}}));this.$refs.MyPlayerRef.updateDefinitionList({list:r,type:"other"})},handleAutoPlay:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,v,h,f,m,_,y,w,C,O,x,k,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.expandAttrs,l=e.videoData.max_episode,e.currentEpisode!=l){n.next=10;break}if(!e.nextVideoId){n.next=10;break}return Object(c.a)({plays:[{duration:0,episode:1,resolution:null===(d=e.currentPlay)||void 0===d?void 0:d.play_resolution,video_id:(null===(v=e.$route)||void 0===v||null===(v=v.params)||void 0===v?void 0:v.id)||""}]}),h=e.$refs.relatedVideo.videoList[0],f={id:h.id,cover:h.cover,duration:h.ai_video.duration,name:h.ai_video.title},m=function(){e.$router.replace({path:e.localePath("/ai-video/detail/".concat(e.nextVideoId))})},r.nextPlayVideo({params:f,call:m}),n.abrupt("return");case 10:if(_=e.paginationArr.find((function(t){return t.page==e.pageInfo.page})),y=_.val.split("-")[1],e.currentEpisode!=Number(y)){n.next=16;break}return e.pageInfo.page++,n.next=16,e.getData("pagination");case 16:if(w=1==(null===(o=e.accountSettingsData)||void 0===o?void 0:o.ai_video_auto_play),C=e.currentEpisode+1,O=e.currentEpisodeArr.find((function(t){return t.no==C})),x=O.price,k=O.status,I=e.paymentInfo.calculateCoins,e.token||1!=k){n.next=24;break}return e.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}}),n.abrupt("return");case 24:2==k||w?e.playEpisode(C,"auto"):I>=x?e.$refs.unlockConfirm.show(C,x,"auto"):e.$refs.unlockBuy.show();case 25:case"end":return n.stop()}}),n)})))()},handRelatedItem:function(data){var t=data.id;this.$router.replace({path:this.localePath("/ai-video/detail/".concat(t))})},timeUpdate:function(data){var t=data.currentTime;this.currentPlayTime=t,0!==Object.keys(this.currentPlay).length&&this.handleDataReport(Math.floor(t),"tens")},openGoodsDialog:function(){this.token?this.$refs.unlockBuy.show():this.$EventBus.$emit("openLoginDialog",{callBack:function(){location.reload()}})},exitFullscreen:function(){var t;null===(t=this.player)||void 0===t||t.exitFullscreen()},handleMark:function(){this.isLoggedIn?this.setCollectData(this.videoData).includes("collect_selected")?(this.$refs.collectPopover.visible=!1,this.setCollect(this.videoData,"ai_video")):this.$refs.collectPopover.visible=!0:this.$EventBus.$emit("openLoginDialog")},closePlayer:function(){var t;this.player&&(null===(t=this.player)||void 0===t||t.reset())},clickInfoDot:function(t){var e,n={video_id:(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"",episode_id:this.currentEpisode};this.$logEvent("log_actions",{operation:t,behavior_info:"on_ai_video_detail_page",behavior_info_sub:JSON.stringify(n)})}},head:function(){var t,e=this.videoData,n=e.title,o=e.desc,r=e.tags,l=e.cover_url,c=e.create_at,d=e.now_play.episodes,v=e.author,h=e.stat,f=null===(t=d[0])||void 0===t?void 0:t.url,m=r.map((function(t){return t.title})).join(","),_=parseInt(100/60),y=(null==o?void 0:o.length)>200?o.slice(0,200)+"...":o;return{title:n,meta:[{hid:"description",name:"description",content:y},{hid:"keywords",name:"keywords",content:m},{hid:"og:title",name:"og:title",content:n},{hid:"og:description",name:"og:description",content:y},{hid:"og:image",name:"og:image",content:l}],script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"VideoObject",name:n,description:y,thumbnailUrl:l,uploadDate:c?new Date(c).toISOString():"",contentUrl:f,duration:"PT00H".concat(_,"M").concat(40,"S"),interactionStatistic:{"@type":"InteractionCounter",interactionType:{"@type":"WatchAction"},userInteractionCount:(null==h?void 0:h.num_of_view)||0},creator:{name:null==v?void 0:v.name,"@type":"Person"}}}],__dangerouslyDisableSanitizers:["script"]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o=t.$axios,r=t.error,l=null==n?void 0:n.id,c={page:1,page_size:30},e.prev=3,e.next=6,o.$post("/api/v1/ai-video/detail",E({goto_play:!0,video_id:l},c));case 6:return d=e.sent,data=d.data,e.abrupt("return",{videoData:data,pageInfo:c});case 11:e.prev=11,e.t0=e.catch(3),console.log("ai视频详情页-> asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()}},R=M,N=(n(5410),Object(y.a)(R,(function(){var t,e,n,o,r,l,c,d,v,h,f=this,m=f._self._c;return m("div",{staticClass:"ai-video-detail",attrs:{"data-group":"ai-video-detail-page"}},[m("div",{staticClass:"ai-video-detail-back",on:{click:f.backTo}},[m("i",{staticClass:"el-icon-back"})]),f._v(" "),m("div",{staticClass:"ai-video-detail-left"},[m("MyPlayer",{ref:"MyPlayerRef",style:f.getVideoStyle,attrs:{config:f.videoConfig,expandField:f.expandField,onReady:f.playerReady,loading:f.videoLoading},on:{onTimeUpdate:f.timeUpdate,onRelatedItem:f.handRelatedItem}},[m("div",{staticClass:"video-header",attrs:{slot:"title"},slot:"title"},[m("span",{staticClass:"video-header-name"},[f._v(f._s(null===(t=f.videoData)||void 0===t?void 0:t.title))]),f._v(" "),null!==(e=f.currentPlay)&&void 0!==e&&e.play_episode?m("span",{staticClass:"video-header-episode"},[f._v("\n            "+f._s(f.$t("WhichEpisode",{number:f.currentPlay.play_episode}))+"\n          ")]):f._e()])]),f._v(" "),null!==(n=f.videoData)&&void 0!==n&&null!==(n=n.author)&&void 0!==n&&n.id?m("VideoInfo",{attrs:{authorInfo:null===(o=f.videoData)||void 0===o?void 0:o.author,videoType:9,tags:f.tags,info:f.videoData},on:{infoDot:f.clickInfoDot}}):f._e(),f._v(" "),m("VideoComments",{attrs:{videoType:9,videoInfo:f.videoData}})],1),f._v(" "),m("div",{staticClass:"ai-video-detail-right"},[null!==(r=f.videoData)&&void 0!==r&&null!==(r=r.related_characters)&&void 0!==r&&r.length?m("VideoAiPerson",{attrs:{personData:null===(l=f.videoData)||void 0===l?void 0:l.related_characters}}):f._e(),f._v(" "),f.isAudioBook&&null!==(c=f.videoData)&&void 0!==c&&null!==(c=c.related_ebooks)&&void 0!==c&&c.length?m("BookCard",{attrs:{videoBookData:f.videoData},on:{closePlayer:f.closePlayer}}):f._e(),f._v(" "),m("div",{staticClass:"pagination-box"},[m("div",{staticClass:"title"},[m("span",{staticClass:"episode-list"},[f._v(f._s(f.isAudioBook?f.$t("ChapterList"):f.$t("EpisodeList")))]),f._v(" "),(null===(d=f.videoData)||void 0===d?void 0:d.max_episode)>1?m("span",{staticClass:"episode-all"},[f._v("\n            "+f._s(f.$t("EpisodeAll",{number:null===(v=f.videoData)||void 0===v?void 0:v.max_episode}))+"\n          ")]):f._e()]),f._v(" "),m("div",{directives:[{name:"show",rawName:"v-show",value:f.paginationArr.length>1,expression:"paginationArr.length > 1"}],staticClass:"pages-tabs"},f._l(f.paginationArr,(function(t){return m("div",{key:t.page,staticClass:"item-tab",class:{active:f.pageInfo.page==t.page},on:{click:function(e){return f.handlePaginationClick(t)}}},[f._v("\n            "+f._s(t.val)+"\n          ")])})),0),f._v(" "),m("div",{staticClass:"episodes-box"},f._l(f.currentEpisodeArr,(function(t){return m("div",{key:t.no,staticClass:"item-episode flex-center",class:{active:f.currentEpisode==t.no},on:{click:function(e){return f.handleEpisodeClick(t)}}},[1==t.status?m("div",{staticClass:"lock-box flex-center"},[m("i",{staticClass:"el-icon-lock"})]):f._e(),f._v("\n            "+f._s(t.no)+"\n          ")])})),0)]),f._v(" "),m("VideoRelated",{ref:"relatedVideo",attrs:{videoType:9,objType:15,objId:null===(h=f.videoData)||void 0===h?void 0:h.id,isAudioBook:f.isAudioBook},on:{nextVideo:function(t){f.nextVideoId=t}}})],1),f._v(" "),m("UnlockConfirmDialog",{ref:"unlockConfirm",on:{unlock:f.playEpisode,exitFullscreen:f.exitFullscreen}}),f._v(" "),m("UnlockBuyDialog",{ref:"unlockBuy",on:{exitFullscreen:f.exitFullscreen}})],1)}),[],!1,null,"210b5a19",null));e.default=N.exports;installComponents(N,{MyPlayer:n(318).default})},5767:function(t,e,n){"use strict";n.r(e);n(6),n(18),n(4);var o=n(3),r=n(2),l=(n(20),n(69),n(16),n(22),n(31),n(11),n(12),n(13),n(8),n(28),n(43),n(21),n(40),n(44),n(7),n(1)),c=n(45),d=n(822),v=n(58),h=n(10),f=n(9),m=n(39),_=n(116),y=n(63),w=n(36),C=n(53);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"RelatedArticles",mixins:[c.a],components:{BaseAvatar:C.default},data:function(){return{list:[]}},mounted:function(){this.getList()},computed:x(x({},Object(l.e)("user",["userInfo"])),{},{formatAuthorName:function(){return function(t){var e=t.name,n=t.id,o=e||n;return o?o[0].toUpperCase():"-"}}}),methods:{getList:function(){var t=this;Object(w.getSquarePost)({page:1,page_size:10,run_available:0,sub_channel:"article",order_by:"hot"}).then((function(e){var n,data=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[],o=t.$route.params.id||"";t.list=data.filter((function(t){return t.id!==o}))}))},goArticle:function(t){var path="/articleDetail/"+t;this.$router.push(this.localePath(path))},jumpToOtherUser:function(t){var e,n=(null==t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);o==n&&(path="/personal"),this.$router.push(this.localePath(path))}}},I=(n(4972),n(0)),component=Object(I.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"related-articles"},[e("div",{staticClass:"related-articles-title"},[t._v("\n    "+t._s(t.$t("RelatedArticles"))+"\n  ")]),t._v(" "),t.list.length?e("div",{staticClass:"related-articles-list"},t._l(t.list,(function(n){var o,r,l,c,d,v;return e("div",{key:n.id,staticClass:"item-article",on:{click:function(e){return t.goArticle(null==n?void 0:n.id)}}},[e("img",{staticClass:"item-article-cover",attrs:{src:null==n?void 0:n.cover,alt:"cover"}}),t._v(" "),e("div",{staticClass:"item-article-content"},[e("div",{staticClass:"info"},[e("div",{staticClass:"article-title",attrs:{title:null==n||null===(o=n.portfolio)||void 0===o?void 0:o.name}},[t._v("\n            "+t._s(null==n||null===(r=n.portfolio)||void 0===r?void 0:r.name)+"\n          ")]),t._v(" "),e("div",{staticClass:"article-author",on:{click:function(e){return e.stopPropagation(),t.jumpToOtherUser(null==n?void 0:n.author)}}},[e("BaseAvatar",{attrs:{"user-data":null==n?void 0:n.author}}),t._v(" "),e("div",{staticClass:"author-name overflow-ellipsis",attrs:{title:null==n||null===(l=n.author)||void 0===l?void 0:l.name}},[t._v("\n              "+t._s(null==n||null===(c=n.author)||void 0===c?void 0:c.name)+"\n            ")])],1)]),t._v(" "),e("div",{staticClass:"article-data"},[e("div",{staticClass:"article-data-like",on:{click:function(e){return e.stopPropagation(),t.setLike(n,"gallery")}}},[e("i",{staticClass:"iconfont",class:t.setlikeData(n)}),t._v(" "),e("span",[t._v(t._s(null==n||null===(d=n.stat)||void 0===d?void 0:d.num_of_like))])]),t._v(" "),e("div",{staticClass:"article-data-view"},[e("i",{staticClass:"iconfont icon-eye"}),t._v(" "),e("span",[t._v(t._s(null==n||null===(v=n.stat)||void 0===v?void 0:v.num_of_view))])])])])])})),0):t._e()])}),[],!1,null,"426e05c8",null),j=component.exports;installComponents(component,{BaseAvatar:n(53).default});var S=n(162),$=n(966),P=n(575);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"ArticleDetail",components:{CmtComments:_.default,CollectPopover:y.default,RelatedArticles:j,BaseAvatar:C.default,DetailInfoTag:P.default},mixins:[c.a],data:function(){return{formatNumberForeign:h.p,dataLoading:!0,authorInfo:{},articleInfo:{},dotReportInfo:{view_domain:"",batch_id:"",action:"",obj_no:"",obj_type:4,negative_ids:[],category:"default"},commonsObj:{},pointArr:[],isOpen:!0,hasLookTranslate:!1,isTranslating:!1,titleBackup:"",contentBackup:""}},mounted:function(){var t,e,n=this;this.getData(),this.$nextTick((function(){var t=n.$refs.richText.querySelectorAll("img");t.length&&Array.from(t).forEach((function(t){t.style.cursor="pointer",t.addEventListener("click",(function(){n.$viewImage([t.src])}))}))})),this.titleBackup=(null===(t=this.articleInfo)||void 0===t?void 0:t.name)||"",this.contentBackup=(null===(e=this.articleInfo)||void 0===e?void 0:e.content)||""},computed:D(D(D({},Object(l.e)("user",["userInfo"])),Object(l.c)("user",["isLoggedIn"])),{},{inviteCode:function(){var t;return(null===(t=this.userInfo)||void 0===t?void 0:t.invite_user_code)||""},authorName:function(){var t,e;return(null===(t=this.authorInfo)||void 0===t?void 0:t.name)||(null===(e=this.authorInfo)||void 0===e?void 0:e.id)||""},publishTime:function(){var t;return this.$t("blog_updated")+" "+Object(v.h)(null===(t=this.articleInfo)||void 0===t?void 0:t.create_at)},processedContent:function(){var t,content=(this.articleInfo||{}).content;return content?content=null===(t=content)||void 0===t?void 0:t.replace(/<a(?![^>]*rel=)/g,'<a rel="ugc"'):""}}),methods:{backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push("/")},getData:function(){var t=this,e=this.$route.params.id||"";Object(d.a)({id:e}).then((function(e){var n=e.data,o=n.portfolio,r=n.author;n.list;t.authorInfo=r,t.articleInfo=o,t.commonsObj=D(D({},o),{},{author:D({},r)}),t.getDetailDynamicData(t.articleInfo),t.$nextTick((function(){t.generatePoints()}))})).finally((function(){t.dataLoading=!1}))},getDetailDynamicData:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.u)({obj_id:data.id,obj_type:4});case 2:n=e.sent,t.articleInfo=Object.assign({},t.articleInfo,n);case 4:case"end":return e.stop()}}),e)})))()},jumpToOtherUser:function(){var t,e,n=(null===(t=this.authorInfo)||void 0===t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);o==n&&(path="/personal"),this.$router.push(this.localePath(path))},handleShare:function(){var t=location.href+(this.inviteCode?"?u_code=".concat(this.inviteCode):"");this.$message.success(this.$t("CopiedURLToClipboard")),Object(h.g)(t)},handleReport:function(){var t,e=this,n=null===(t=this.articleInfo)||void 0===t?void 0:t.id;Object(m.t)({id:n,obj_type:4}).then((function(){e.$message({message:e.$t("ReportSuccess"),type:"success",duration:5e3})}))},generatePoints:function(){var t,e=null===(t=this.$refs)||void 0===t?void 0:t.richText;if(e){var n=e.querySelectorAll("h1, h2, h3");this.pointArr=Array.from(n).map((function(t,e){return t.id||(t.id="heading-".concat(e)),{text:t.innerText,id:t.id}}))}},scrollTo:function(t){var element=document.getElementById(t);element&&element.scrollIntoView({behavior:"smooth"})},handleMark:function(t){this.isLoggedIn?this.setCollectData(this.articleInfo).includes("collect_selected")?(this.$refs["collectPopover".concat(t)].visible=!1,this.setCollect(this.articleInfo,"gallery")):this.$refs["collectPopover".concat(t)].visible=!0:this.$EventBus.$emit("openLoginDialog")},handleTranslate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,content,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.$i18n.locale,content=(null===(n=t.articleInfo)||void 0===n?void 0:n.name)||"",r={zhCN:"zh-cn",zhTW:"zh-tw"}[o]||o,t.isTranslating=!0,t.hasLookTranslate=!t.hasLookTranslate,t.hasLookTranslate){e.next=12;break}t.articleInfo.name=t.titleBackup,t.articleInfo.content=t.contentBackup,t.isTranslating=!1,e.next=28;break;case 12:return Object(S.a)(content,{to:r}).then((function(e){t.articleInfo.name=e.text})),e.prev=13,l=t.articleInfo.content,e.next=17,Object($.a)(l,r);case 17:c=e.sent,t.articleInfo.content=c,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),t.hasLookTranslate=!1,t.$message.error(t.$t("novelRetry"));case 25:return e.prev=25,t.isTranslating=!1,e.finish(25);case 28:t.$logEvent("log_actions",{operation:"click_translate",behavior_info:"on_article_detail_page"});case 29:case"end":return e.stop()}}),e,null,[[13,21,25,28]])})))()}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,param,c,data,d,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,o=t.params,r=t.error,l=o.id,param={id:l,ss:f.e.TitleDescription},e.prev=3,e.next=6,n.post("/api/v1/post/article/detail",param);case 6:if(c=e.sent,data=c.data.data,v=(d=data||{}).portfolio,h=d.author,d.list,data){e.next=11;break}throw new Error("");case 11:return e.abrupt("return",{articleInfo:v,authorInfo:h,commonsObj:D(D({},v),{},{author:D({},h)})});case 14:e.prev=14,e.t0=e.catch(3),console.log("文章投稿详情页-> asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()},head:function(){var t=this.articleInfo||{},e=t.intro,n=t.name,o=t.tag,r=t.cover,l=null!=o&&o.length?o.map((function(t){return t.title})).toString():"",title=this.$t("PostDetailsTitle",{name:n||l}),c=(null==r?void 0:r.url)||"";return{title:title,meta:[{hid:"description",name:"description",content:(e||n||l).slice(0,160)},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:(e||n||l).slice(0,160)},{hid:"og:image",name:"og:image",content:c||"https://image.cdn2.seaart.ai/static/upload/20240105/74f78417-21a7-457b-ac87-eafcaf8abf61.webp"}]}}},A=(n(4974),Object(I.a)(L,(function(){var t,e,n,o,r,l,c,d,v,h,f,m,_,y=this,w=y._self._c;return w("div",{directives:[{name:"loading",rawName:"v-loading",value:y.dataLoading,expression:"dataLoading"}],staticClass:"article-detail"},[w("div",{staticClass:"article-detail-back",on:{click:y.backTo}},[w("i",{staticClass:"el-icon-back"})]),y._v(" "),w("div",{directives:[{name:"show",rawName:"v-show",value:!y.dataLoading,expression:"!dataLoading"}],staticClass:"article-detail-container"},[w("div",{staticClass:"article-detail-container-left"},[w("img",{staticClass:"article-cover",attrs:{src:null===(t=y.articleInfo)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,alt:"article cover"}}),y._v(" "),w("h1",{staticClass:"article-title"},[y._v(y._s(null===(e=y.articleInfo)||void 0===e?void 0:e.name))]),y._v(" "),w("div",{staticClass:"article-infos"},[w("div",{staticClass:"left"},[w("div",{staticClass:"article-author"},[w("div",{staticClass:"article-author-avatar",on:{click:y.jumpToOtherUser}},[w("BaseAvatar",{attrs:{size:32,"user-data":y.authorInfo,theme:"dark"}})],1),y._v(" "),w("div",{staticClass:"article-author-name overflow-ellipsis",attrs:{title:y.authorName},on:{click:y.jumpToOtherUser}},[y._v("\n              "+y._s(y.authorName)+"\n            ")]),y._v(" "),w("div",{staticClass:"article-publish"},[y._v("\n              "+y._s(y.publishTime)+"\n            ")]),y._v(" "),w("el-button",{directives:[{name:"loading",rawName:"v-loading",value:y.isTranslating,expression:"isTranslating"}],staticClass:"article-translate-btn",attrs:{type:"text"},on:{click:y.handleTranslate}},[y._v("\n              "+y._s(y.hasLookTranslate?y.$t("ViewOriginal"):y.$t("ViewTranslation"))+"\n            ")])],1)]),y._v(" "),w("div",{staticClass:"right flex-center"},[w("div",{staticClass:"right-like",on:{click:function(t){return y.setLike(y.articleInfo,"gallery")}}},[w("i",{staticClass:"iconfont",class:y.setlikeData(y.articleInfo)}),y._v(" "),w("span",[y._v(y._s(null===(n=y.articleInfo)||void 0===n||null===(n=n.stat)||void 0===n?void 0:n.num_of_like))])]),y._v(" "),w("client-only",[w("div",{on:{click:function(t){return t.preventDefault(),y.handleMark(1)}}},[w("CollectPopover",{ref:"collectPopover1",attrs:{triggerMode:"click",type:"gallery",hideBtn:!0,folder:y.articleInfo,dotReportInfo:y.dotReportInfo}},[w("div",{staticClass:"right-collection"},[w("i",{staticClass:"iconfont",class:y.setCollectData(y.articleInfo)}),y._v(" "),w("span",[y._v("\n                    "+y._s(y.formatNumberForeign(null===(o=y.articleInfo.stat)||void 0===o?void 0:o.num_of_collection))+"\n                  ")])])])],1)]),y._v(" "),w("div",{staticClass:"right-share",on:{click:y.handleShare}},[w("i",{staticClass:"iconfont icon-share-icon"})]),y._v(" "),w("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"}},[w("div",{staticClass:"pop-btns flex"},[w("button",{on:{click:y.handleReport}},[y._v("\n                "+y._s(y.$t("Report"))+"\n              ")])]),y._v(" "),w("div",{staticClass:"right-more",attrs:{slot:"reference"},slot:"reference"},[w("i",{staticClass:"iconfont icon-more"})])])],1)]),y._v(" "),(null===(r=y.articleInfo)||void 0===r||null===(r=r.tag)||void 0===r?void 0:r.length)>0?w("div",{staticClass:"article-tags"},y._l(null===(l=y.articleInfo)||void 0===l?void 0:l.tag.filter((function(t){return t.id})),(function(t){return w("div",{key:t.id,staticClass:"item-tag flex-center"},[w("a",{attrs:{target:"_self",href:y.localePath("/tagInfo/post/"+t.id)}},[y._v(" #"+y._s(null==t?void 0:t.title)+" ")])])})),0):y._e(),y._v(" "),1===(null===(c=y.articleInfo)||void 0===c||null===(c=c.theme_activity)||void 0===c?void 0:c.activity_type)?w("DetailInfoTag",{attrs:{title:(null===(d=y.articleInfo)||void 0===d||null===(d=d.theme_activity)||void 0===d?void 0:d.title)||"",pathData:"/event-center/activity/"+(null===(v=y.articleInfo)||void 0===v||null===(v=v.theme_activity)||void 0===v?void 0:v.id)}}):y._e(),y._v(" "),w("div",{directives:[{name:"show",rawName:"v-show",value:y.processedContent,expression:"processedContent"}],ref:"richText",staticClass:"article-content",domProps:{innerHTML:y._s(y.processedContent)}}),y._v(" "),w("div",{staticClass:"article-operate"},[w("div",{staticClass:"left"},[w("div",{staticClass:"item-operate view"},[w("i",{staticClass:"iconfont icon-eye"}),y._v(" "),w("span",[y._v(y._s(null===(h=y.articleInfo)||void 0===h||null===(h=h.stat)||void 0===h?void 0:h.num_of_view))])]),y._v(" "),w("div",{staticClass:"item-operate like",on:{click:function(t){return y.setLike(y.articleInfo,"gallery")}}},[w("i",{staticClass:"iconfont",class:y.setlikeData(y.articleInfo)}),y._v(" "),w("span",[y._v(y._s(null===(f=y.articleInfo)||void 0===f||null===(f=f.stat)||void 0===f?void 0:f.num_of_like))])]),y._v(" "),w("client-only",[w("div",{on:{click:function(t){return t.preventDefault(),y.handleMark(2)}}},[w("CollectPopover",{ref:"collectPopover2",attrs:{triggerMode:"click",type:"gallery",hideBtn:!0,folder:y.articleInfo,dotReportInfo:y.dotReportInfo}},[w("div",{staticClass:"item-operate collection"},[w("i",{staticClass:"iconfont",class:y.setCollectData(y.articleInfo)}),y._v(" "),w("span",[y._v("\n                    "+y._s(y.formatNumberForeign(null===(m=y.articleInfo.stat)||void 0===m?void 0:m.num_of_collection))+"\n                  ")])])])],1)])],1),y._v(" "),w("div",{staticClass:"right"},[w("div",{staticClass:"item-operate share",on:{click:y.handleShare}},[w("i",{staticClass:"iconfont icon-share-icon"})]),y._v(" "),w("el-popover",{ref:"myPopover",attrs:{placement:"top-start","popper-class":"my-popover","visible-arrow":!1,width:"100",trigger:"hover"}},[w("div",{staticClass:"pop-btns flex"},[w("button",{on:{click:y.handleReport}},[y._v("\n                "+y._s(y.$t("Report"))+"\n              ")])]),y._v(" "),w("div",{staticClass:"item-operate more",staticStyle:{color:"#f1f1f1"},attrs:{slot:"reference"},slot:"reference"},[w("i",{staticClass:"iconfont icon-more"})])])],1)]),y._v(" "),null!==(_=y.commonsObj)&&void 0!==_&&_.id?w("CmtComments",{attrs:{infos:y.commonsObj,type:4}}):y._e()],1),y._v(" "),w("div",{staticClass:"article-detail-container-right"},[y.pointArr.length?w("div",{staticClass:"table-of-contents"},[w("div",{staticClass:"table-of-contents-title",on:{click:function(t){y.isOpen=!y.isOpen}}},[w("span",[y._v(y._s(y.$t("catalogue")))]),y._v(" "),w("i",{staticClass:"el-icon-caret-top",class:{"is-open":this.isOpen}})]),y._v(" "),w("div",{staticClass:"table-of-contents-box",class:{"is-open":this.isOpen}},y._l(y.pointArr,(function(t,e){return w("div",{key:e,staticClass:"item-point overflow-ellipsis",attrs:{title:t.text},on:{click:function(e){return y.scrollTo(t.id)}}},[y._v("\n            "+y._s(t.text)+"\n          ")])})),0)]):y._e(),y._v(" "),w("RelatedArticles")],1)])])}),[],!1,null,"0fa69402",null));e.default=A.exports;installComponents(A,{BaseAvatar:n(53).default,CollectPopover:n(63).default,DetailInfoTag:n(575).default,CmtComments:n(116).default})},5770:function(t,e,n){"use strict";n.r(e);n(19),n(11),n(6),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(16),n(4),n(21),n(26),n(29)),c=n(10),d=n(95),v=n(57),h=n(51),f=n(1),m={name:"RemoveBgDialog",props:{isLoading:{type:Boolean,default:!1},imgUrl:{type:String,default:""},resultImgUrl:{type:String,default:""}},components:{},computed:{},data:function(){return{dialogVisible:!1}},mounted:function(){},methods:{show:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogVisible=t},dwn:function(){Object(c.M)(this.resultImgUrl,"hd_restoration_result")},reupload:function(){this.$emit("reupload")}}},_=m,y=(n(5087),n(0)),w=Object(y.a)(_,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"remove-bg-dialog",fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"topItem"},[e("div",{staticClass:"back",on:{click:function(e){t.dialogVisible=!1}}},[e("i",{staticClass:"el-icon-back"})])]),t._v(" "),e("div",{staticClass:"topItem",class:{disabledStyle:t.isLoading}},[e("div",{staticClass:"rightBnt",on:{click:function(e){!t.isLoading&&t.reupload()}}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" "),e("span",[t._v(t._s(t.$t("CreativeCenterPopup33")))])]),t._v(" "),e("div",{staticClass:"rightBnt",class:{disabledStyle:!t.resultImgUrl},on:{click:function(e){t.resultImgUrl&&t.dwn()}}},[e("i",{staticClass:"iconfont icon-icon_xiazai"}),t._v(" "),e("span",[t._v(t._s(t.$t("Download")))])])])]),t._v(" "),e("div",{staticClass:"content"},[t._t("default")],2)])])}),[],!1,null,"48699056",null).exports,C=(n(119),n(61));function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"RemoveBackground",components:{RemoveBgDialog:w},computed:x(x(x({},Object(f.e)("user",["token","cdnHost"])),Object(f.c)("user",["cdnHostFun"])),{},{resultStyle:function(){var t=this,style={};return style=(this.exampleList||[]).some((function(e){return e.before===t.imgUrl}))||this.isLoading?{width:"512px",height:"512px",backgroundColor:"#293045"}:this.style,this.isLoading||this.imgLoading?style:{}}}),mounted:function(){this.getExampleData()},data:function(){return{imgUrl:"",resultImgUrl:"",uploading:!1,sliderWidth:10,pollingTimer:null,isLoading:!1,imgLoading:!0,style:{},iconUrl:n(738),exampleList:[],UPLOAD:new h.a({type:29}),quickOptions:{}}},beforeDestroy:function(){this.stopTask()},methods:{getExampleData:function(){var t=this;return Object(d.s)({type:2}).then((function(e){var n=e||{},o=n.status.code,code=void 0===o?"":o,r=n.data,l=(void 0===r?{}:r).remove_background,c=void 0===l?[]:l;[1e4,"10000"].includes(code)&&(t.exampleList=c||[])})).finally((function(){}))},handleRangeChange:function(){this.$logEvent("log_actions",{operation:"click_compare_images_on_tools",behavior_info:"remove_background"})},handleImageLoad:function(){this.imgLoading=!1,this.sliderWidth=10,this.openWorkArea()},handleUploadClick:function(){var t=this;this.token?this.$refs.uploadRef.$el.querySelector('input[type="file"]').click():this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.$refs.uploadRef.$el.querySelector('input[type="file"]').click()}})},handleBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("handleBeforeUpload"),e.token){n.next=4;break}return e.$EventBus.$emit("openLoginDialog"),n.abrupt("return");case 4:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/webp"],!e.isLoading){n.next=8;break}return n.abrupt("return");case 8:if(r.includes(t.type)){n.next=11;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 11:if(!(l=t)||l.size){n.next=14;break}return n.abrupt("return",!1);case 14:if(!(l.size/1024/1024>10)){n.next=25;break}return n.prev=15,n.next=18,Object(C.a)(l,10485760);case 18:l=n.sent,n.next=25;break;case 21:return n.prev=21,n.t0=n.catch(15),console.error("Compression failed:",n.t0),n.abrupt("return",!1);case 25:return n.next=27,e.checkImageSize(t);case 27:if(n.sent,!e.uploading){n.next=30;break}return n.abrupt("return");case 30:return e.uploading=!0,o.startUpload(l).then((function(t){return e.uploading=!1,e.isLoading=!0,e.imgUrl=t,e.resultImgUrl="",e.sliderWidth=10,e.openWorkArea(),e.startTask()})).catch((function(t){console.log(t),e.uploading=!1,e.isLoading=!1,e.$message.error(e.$t("uploadError"))})),n.abrupt("return",!1);case 33:case"end":return n.stop()}}),n,null,[[15,21]])})))()},checkImageSize:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var img=new Image;img.onload=function(){var t=img.width,o=img.height;if(t>512){var r=Object(v.resizeImage)(t,o,512);t=r.width,o=r.height}e.$set(e,"style",{width:"".concat(t,"px"),height:"".concat(o,"px")}),n()},img.onerror=function(){o(!1)},img.src=t.target.result},r.readAsDataURL(t)}))},handleBeforeUploadEmpty:function(){},startTask:function(){var t=this,e={action:19,source:8,meta:{remove_background:{uri:this.imgUrl}}};return Object(l.createTask)(e).then((function(e){var n,o=null==e||null===(n=e.data)||void 0===n?void 0:n.id;return t.pollingTask(o)}))},stopTask:function(){this.pollingTimer&&window.clearTimeout(this.pollingTimer),this.pollingTimer=null,this.isLoading=!1},pollingTask:function(t){var e=this;return new Promise((function(n,o){e.isLoading=!0,e.pollingTimer=setTimeout((function(){Object(l.batchFetchTaskProcess)({task_ids:[t]}).then((function(r){var l=r.data.items;if(e.quickOptions=l[0],4===l[0].status)return e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.$message.error(e.$t("ServerError")),e.isLoading=!1,void o();if(3===l[0].status){var c=l[0].img_url,d=void 0===c?"":c;e.resultImgUrl=d,e.imgLoading=!0,e.pollingTimer&&window.clearTimeout(e.pollingTimer),e.pollingTimer=null,e.isLoading=!1,n()}else[1,2].includes(l[0].status)&&e.pollingTask(t)})).catch((function(t){e.$message.error(e.$t("ServerError")),e.isLoading=!1,o()}))}),1e3)}))},removeImage:function(){this.imgUrl="",this.resultImgUrl="",this.sliderWidth=10,this.openWorkArea(!1)},downloadImage:function(){this.$logEvent("log_actions",{operation:"click_download_images_on_tools",behavior_info:"remove_background"}),Object(c.M)(this.resultImgUrl,"hd_restoration_result")},handleSelectExample:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:{},!e.isLoading){n.next=3;break}return n.abrupt("return");case 3:r=o.before,l=void 0===r?"":r,c=o.after,d=void 0===c?"":c,e.imgUrl="",e.resultImgUrl="",e.imgLoading=!0,e.imgUrl=l,e.resultImgUrl=d,e.sliderWidth=10,e.openWorkArea();case 11:case"end":return n.stop()}}),n)})))()},scrollBottom:function(){try{window.scrollTo({top:500,behavior:"smooth"})}catch(t){}},openWorkArea:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.RemoveBgDialog.show(t)},scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})}},head:function(){return{title:this.$t("seoRemoveBg_tag_title"),meta:[{hid:"description",name:"description",content:this.$t("seoRemoveBg_tag_desc")},{hid:"keywords",name:"keywords",content:this.$t("AIRemoveBgKeyword")},{hid:"og:title",name:"og:title",content:this.$t("seoRemoveBg_tag_title")},{hid:"og:description",name:"og:description",content:this.$t("seoRemoveBg_tag_desc")}],script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("AIRemoveBg_top_title"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}}},I=k,j=(n(5088),Object(y.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-fast-tools-remove-background"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"top-bar-icon"},[e("img",{attrs:{src:t.iconUrl,alt:""}})]),t._v(" "),e("h1",{staticClass:"top-bar-main-title"},[t._v(t._s(t.$t("AIRemoveBg_top_title")))]),t._v(" "),e("div",{staticClass:"top-bar-sub-title"},[t._v(t._s(t.$t("AIRemoveBg_top_sub")))])]),t._v(" "),e("div",{staticClass:"cnt"},[e("div",{staticClass:"left"},[e("video",{attrs:{src:"https://".concat(this.cdnHostFun(),"/static/video/AITool/removeBackgroundv2.mp4"),loop:"",autoplay:"",muted:""},domProps:{muted:!0}})]),t._v(" "),e("div",{staticClass:"right"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploadRef",staticClass:"uploadBox",attrs:{accept:".jpg, .jpeg, .webp, .png",action:"#",drag:"","before-upload":t.handleBeforeUpload,"http-request":t.handleBeforeUploadEmpty,"show-file-list":!1}},[e("div",{staticClass:"upload-box-content",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-upload image-upload-icon"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("TaskUploadImageClickUploadTips")))])])]),t._v(" "),e("div",{staticClass:"tip"},[e("i",{staticClass:"el-icon-bottom"}),t._v(" "),e("span",[t._v(t._s(t.$t("ai_tools_9")))])]),t._v(" "),e("div",{staticClass:"ex"},[t._l(t.exampleList,(function(n,o){return[null!=n&&n.before?e("img",{key:(null==n?void 0:n.before)+o,attrs:{src:null==n?void 0:n.before,alt:""},on:{click:function(e){return e.stopPropagation(),t.handleSelectExample(n)}}}):t._e()]}))],2)],1)]),t._v(" "),e("remove-bg-dialog",{ref:"RemoveBgDialog",attrs:{isLoading:t.isLoading,imgUrl:t.imgUrl,resultImgUrl:t.resultImgUrl},on:{reupload:t.removeImage}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading||t.resultImgUrl&&t.imgLoading,expression:"isLoading || (resultImgUrl && imgLoading)"}],staticClass:"result-show-area",style:t.resultStyle},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.resultImgUrl&&!t.imgLoading,expression:"resultImgUrl && !imgLoading"}],staticClass:"background-board"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],staticClass:"result-content-box"},[e("div",{style:"clip-path: polygon(0px 0px, ".concat(t.sliderWidth,"% 0px, ").concat(t.sliderWidth,"% 100%, 0px 100%);")},[e("img",{staticClass:"result-raw-img",staticStyle:{"clip-path":"polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%)"},attrs:{src:t.imgUrl,id:"rm-bg-original",alt:"Original image"},on:{mousedown:function(t){t.preventDefault()},contextmenu:function(t){t.preventDefault()}}})]),t._v(" "),t.resultImgUrl?e("div",{staticClass:"process-img-box"},[e("img",{staticClass:"processed-img",attrs:{src:t.resultImgUrl,alt:"Processed image"},on:{load:t.handleImageLoad,error:t.handleImageLoad,mousedown:function(t){t.preventDefault()},contextmenu:function(t){t.preventDefault()}}})]):t._e(),t._v(" "),t.resultImgUrl?e("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderWidth,expression:"sliderWidth"}],staticClass:"image-view-slider",attrs:{type:"range",step:.01,min:0,max:100},domProps:{value:t.sliderWidth},on:{change:t.handleRangeChange,__r:function(e){t.sliderWidth=e.target.value}}}):t._e()]),t._v(" "),t.imgUrl&&t.resultImgUrl&&!t.isLoading&&!t.imgLoading?[e("span",{staticClass:"bottom-download-btn",on:{click:function(e){return e.stopPropagation(),t.downloadImage.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-icon-Download bottom-download-btn-icon"}),t._v(" "),e("span",{staticClass:"bottom-download-btn-text"},[t._v(t._s(t.$t("DownloadImg")))])])]:t._e()],2),t._v(" "),t.isLoading||t.resultImgUrl&&t.imgLoading?e("div",{staticClass:"quick-box"},[e("QuickQueue",{staticClass:"quick-con",attrs:{quickOptions:t.quickOptions}})],1):t._e()])],1)}),[],!1,null,null,null));e.default=j.exports;installComponents(j,{QuickQueue:n(119).default})},5771:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13),n(7);var o=n(3),r=n(2),l=(n(20),n(19),n(6),n(16),n(22),n(8),n(4),n(28),n(43),n(21),n(77),n(44),n(26),n(1)),c=n(1185),d=n(297);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var h={name:"ExampleDialog",data:function(){return{isShowDialog:!1,correctImgs:[],incorrectImgs:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)("user",["cdnHostFun"])),mounted:function(){var t=["https://".concat(this.cdnHostFun(),"/static/upload/20240507/88f6ab82-fbe3-4572-88bc-7809c58e4d95.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/004bec84-a27c-425c-91ec-d2344b68fe12.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/2d639328-99aa-46fc-a7cb-0ed3d93dcd11.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/d1c777ec-f87e-4ca5-bfac-2091dcb507ac.jpg")],e=["https://".concat(this.cdnHostFun(),"/static/upload/20240507/54d39caf-5852-4278-80bd-bb6733f81b27.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/e0d08b8e-88e0-4366-82f6-458d189521d2.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/9969d1e8-6e0a-4ac1-b559-d09b34b02b71.jpg"),"https://".concat(this.cdnHostFun(),"/static/upload/20240507/5c784578-2070-4965-a38d-129d34aa3d1c.jpg")];this.correctImgs=t,this.incorrectImgs=e},methods:{showDialog:function(){this.isShowDialog=!0},closeDialog:function(){this.isShowDialog=!1}}},f=h,m=(n(5117),n(0)),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"face-changing-example",attrs:{visible:t.isShowDialog,"destroy-on-close":!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("i",{staticClass:"el-icon-close close-icon",on:{click:t.closeDialog}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("MakeHightQuality"))+"\n    ")]),t._v(" "),e("div",{staticClass:"explain"},[e("div",[t._v("1. "+t._s(t.$t("danceChangingExample1")))]),t._v(" "),e("div",[t._v("2. "+t._s(t.$t("danceChangingExample2")))]),t._v(" "),e("div",[t._v("3. "+t._s(t.$t("danceChangingExample3")))])]),t._v(" "),e("div",{staticClass:"correct-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"correct-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography23")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.correctImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)]),t._v(" "),e("div",{staticClass:"incorrect-example"},[e("div",{staticClass:"header"},[e("svg-icon",{attrs:{"icon-class":"error-icon"}}),t._v(" "),e("span",{staticClass:"words"},[t._v(t._s(t.$t("photography24")))])],1),t._v(" "),e("div",{staticClass:"img-container"},t._l(t.incorrectImgs,(function(t,n){return e("img",{key:n,staticClass:"item-img",attrs:{src:t,alt:"correct images"}})})),0)])]),t._v(" "),e("div",{staticClass:"footer"},[e("el-button",{staticClass:"btn",on:{click:t.closeDialog}},[t._v("\n      "+t._s(t.$t("ok_got_it"))+"\n    ")])],1)])}),[],!1,null,"0041fe23",null),_=component.exports;installComponents(component,{SvgIcon:n(115).default});var y=n(587),w=n(895),C=n(51),O=n(10),x=n(61),k=n(29),I=n(951),j=n(403),S=n(583),$=(n(25),n(3185)),P=n(54);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"AiFaceChanging",mixins:[j.videoCoverMixIn,S.a],components:{CTabs:c.default,HelpTip:d.default,ExampleDialog:_,CardList:y.a,CommonProblem:w.default},head:function(){return{script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"SoftwareApplication",name:this.$t("AI_dance_h1"),operatingSystem:"Web, Android, iOS",applicationCategory:"EntertainmentApplication",offers:{"@type":"Offer",price:"0"},creator:{name:"SeaArt AI","@type":"Organization"}}}]}},data:function(){return{decsData:$.a,guides:$.b,materialSource:[],tabs:[{label:"ai_dance_tabs",value:"video"}],uploading:!1,faceUploading:!1,currentTab:"video",tabStyle:{"justify-content":"start"},source:{url:"",cover:"",compute_coin:""},targetDance:"",danceArr:[],generateStatus:"before",percentComplete:0,result:{type:"",url:"",width:"",height:"",duration:0},postParams:{type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""},loopInterval:null,page:1,pageSize:20,total:20,isShare:!0,templateId:"",requesting:!1,faceIndex:"",pendingUploadFile:null,category:25,guestUploadStorageMapId:"ai_tools_ai_dance"}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("danceArr"));this.danceArr=e||[],this.isLoggedIn&&Object(I.c)({scenes:"anyoneDance"}).then((function(e){var n,o=null===(n=e.data)||void 0===n?void 0:n.task_ids[0];o&&(t.generateStatus="generating",t.loopGetResult(o))})),this.getDanceList()},beforeDestroy:function(){clearInterval(this.loopInterval),this.loopInterval=null},computed:D(D(D(D({},Object(l.e)("user",["token"])),Object(l.e)("payment",["paymentInfo"])),Object(l.c)("user",["cdnHostFun","isCompanyAccount","isLoggedIn"])),{},{replaceLowWebp:function(){var t=this;return function(e){return Object(O.K)(e,t.$imgL)}},isBeforeGenerate:function(){return"before"==this.generateStatus},isGenerating:function(){return"generating"==this.generateStatus},isAfterGenerate:function(){return"after"==this.generateStatus},isForbidden:function(){return this.isGenerating||this.isAfterGenerate},getPercentComplete:function(){return Math.max(0,Math.min(100,this.percentComplete))},getEstimatedCost:function(){return this.source.compute_coin},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount}}),watch:{isLoggedIn:function(){this.uploadGuestPendingFile()}},methods:{uploadGuestPendingFile:function(){this.isLoggedIn&&!this.faceUploading&&this.pendingUploadFile&&(this.faceUploading=!0,this.handleUploadFace(this.pendingUploadFile,!0))},scrollTop:function(){window.scrollTo({top:0,behavior:"smooth"})},getDanceList:function(){var t=this,e=Math.ceil(this.total/this.pageSize);this.page>e||this.requesting||(this.requesting=!0,Object(I.d)({page:this.page,page_size:this.pageSize}).then((function(e){var n=e.data,o=n.items,r=n.total;t.total=r;var l=o.map((function(e){var time=e.duration,n=t.formatSecondsToTime(time);return D(D({},e),{},{duration:n})}));t.materialSource=t.materialSource.concat(l)})).finally((function(){t.requesting=!1})))},formatSecondsToTime:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,": ").concat(n.toString().padStart(2,"0"))},changeTab:function(t){},clearPageData:function(){this.page=1,this.total=20,this.materialSource=[]},openExampleDialog:function(){this.$refs.exampleDialog.showDialog()},toMall:function(){this.isVip?this.$EventBus.$emit("showVipComputingDialog","GetMoreCredits"):this.$EventBus.$emit("openDailyDialog")},changeSource:function(t){if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));var e=t.id,n=t.cover,o=t.video,video=void 0===o?"":o,r=t.compute_coin;this.templateId=e,this.source={url:video,cover:n,compute_coin:r||""},!this.targetDance&&this.danceArr.length>0&&(this.faceIndex=0,this.targetDance=this.danceArr[0])},clearTargetFace:function(){if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));this.targetDance="",this.faceIndex=""},clearData:function(t){var e=this;"clear"!=t?this.$confirm(this.$t("DeleteResourceConfim"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){Object(I.b)({scenes:"anyoneDance"}),e.clear()})).catch((function(t){console.log("err",t)})):this.clear()},clear:function(){this.source={url:"",cover:"",compute_coin:""},this.result={type:"",url:"",width:"",height:"",duration:0},this.generateStatus="before",this.percentComplete=0,this.targetDance="",this.postParams={type:"",cover:"",video:"",cover_height:0,cover_width:0,duration:0,url:""}},generateThumbnail:function(t){return this.getBestPoster(t,30)},handleUploadClick:function(){this.$refs.uploadRef.$el.querySelector('input[type="file"]').click()},handleFaceBeforeUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.faceUploading=!0,o=t.size,["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),e.faceUploading=!1,n.abrupt("return");case 7:if(!(o>10485760)){n.next=19;break}return n.prev=8,n.next=11,Object(x.a)(t,10485760);case 11:t=n.sent,n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(8),console.error("Compression failed:",n.t0),e.faceUploading=!1,n.abrupt("return");case 19:e.handleUploadFace(t);case 20:case"end":return n.stop()}}),n,null,[[8,14]])})))()},handleUploadFace:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];new C.a({type:this.category}).startUpload(t).then(function(){var r=Object(o.a)(regeneratorRuntime.mark((function o(r){var l,c,d,v,h,f,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(l=localStorage.getItem("danceArr"))){o.next=13;break}if(!((c=JSON.parse(l)).length>=10)){o.next=7;break}return e.$message.warning(e.$t("ai_dance_limit")),e.faceUploading=!1,o.abrupt("return");case 7:e.danceArr.unshift(r),c.unshift(r),d=JSON.stringify(c),localStorage.setItem("danceArr",d),o.next=16;break;case 13:e.danceArr=[r],v=JSON.stringify([r]),localStorage.setItem("danceArr",v);case 16:return(e.source.url||!e.targetDance.url&&""===e.faceIndex)&&(e.targetDance=r,e.faceIndex=0),e.source.url||""===e.faceIndex||e.faceIndex++,e.faceUploading=!1,o.next=21,e.checkImageSize(t);case 21:if(h=o.sent){o.next=24;break}return o.abrupt("return");case 24:f=h.width,m=h.height,n&&e.saveGuestStorageFieldToPersonal&&e.saveGuestStorageFieldToPersonal([{category:e.category,url:r,width:f,height:m}]),!e.isLoggedIn&&e.storageGuestUploadTempData&&e.storageGuestUploadTempData([{category:e.category,url:r,width:f,height:m}]);case 27:case"end":return o.stop()}}),o)})));return function(t){return r.apply(this,arguments)}}()).catch((function(n){console.log(e.$t("uploadError"),n),e.pendingUploadFile=t,e.faceUploading=!1}))},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t=img.naturalWidth,n=img.naturalHeight;e({width:t,height:n})},img.onerror=function(t){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},handleSelectedFace:function(t,e){return this.isForbidden?this.$message.warning(this.$t("ai_dance_loading_toast")):this.source.url?void(this.isForbidden||(this.targetDance=t,this.faceIndex=e)):this.$message.warning(this.$t("ai_dance_tem_toast"))},handleDeleteFace:function(t){var e=this;if(this.isForbidden)return this.$message.warning(this.$t("ai_dance_loading_toast"));this.isForbidden||this.$confirm(this.$t("ai_dance_delete"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"ai-face-swap-confirm"}).then((function(){var n=JSON.parse(localStorage.getItem("danceArr"));n=n.filter((function(e){return e!=t})),e.danceArr=n;var o=JSON.stringify(n);localStorage.setItem("danceArr",o),e.danceArr.length<=0&&(e.faceIndex="")})).catch((function(t){console.log("err",t)}))},handleGenerate:function(){var t=this;if(this.isLoggedIn){if(this.percentComplete=0,this.isAfterGenerate)return this.targetDance="",this.generateStatus="before",void(this.faceIndex="");if(this.source.url)if(this.targetDance){this.generateStatus="generating";var e={id:this.templateId,image_url:this.targetDance};Object(I.a)(e).then((function(e){var n=e.data.task_id;n&&t.loopGetResult(n)})).catch((function(e){t.generateStatus="before",t.clear(),console.log("err",e)}))}else this.$message.warning(this.$t("ai_pls_add_dance"));else this.$message.warning(this.$t("ai_dance_tem_toast"))}else this.$EventBus.$emit("openLoginDialog")},loopGetResult:function(t){var e=this;this.loopInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(k.batchFetchTaskProcess)({task_ids:[t],scene:2});case 3:if(o=n.sent,null!=(r=o.data.items)&&r[0]){n.next=7;break}return n.abrupt("return");case 7:l=r[0],c=l.process,d=l.status_desc,v=l.img_uris,l.type,h=null==v?void 0:v[0],e.percentComplete=c,n.t0=d,n.next="finish"===n.t0?13:"sysCancelDesc"===n.t0?21:"sysTimeoutDesc"===n.t0?25:29;break;case 13:return clearInterval(e.loopInterval),e.result.url=null==h?void 0:h.url,e.result.width=null==h?void 0:h.width,e.result.height=null==h?void 0:h.height,e.result.type="video",e.generateStatus="after",e.$message.success(e.$t("ai_dance_success")),n.abrupt("break",30);case 21:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemCancel")),e.clear(),n.abrupt("break",30);case 25:return clearInterval(e.loopInterval),e.$message.warning(e.$t("systemTimeoutCancel")),e.clear(),n.abrupt("break",30);case 29:return n.abrupt("break",30);case 30:n.next=35;break;case 32:n.prev=32,n.t1=n.catch(0),console.log("error",n.t1);case 35:case"end":return n.stop()}}),n,null,[[0,32]])}))),3e3)},handlePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,video;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.result,o=n.url,r=n.width,l=n.height,c=n.duration,t.postParams={type:P.CONTRIBUTION_TYPE_ENUM.LOCAL_VIDEO,cover:o.replace(".mp4","_low.webp"),video:"",cover_height:l,cover_width:r,duration:c,url:o,originalUrl:t.source.url,templateId:t.templateId},(video=document.createElement("video")).src=o,video.addEventListener("loadedmetadata",(function(){var e=video.duration;t.postParams.duration=Math.floor(e),video=null,t.openPostDialog()}));case 5:case"end":return e.stop()}}),e)})))()},openPostDialog:function(){this.$EventBus.$emit("openContribution",{types:[this.postParams.type],source:"ai_dance",remoteParams:this.postParams})},handleDownload:function(){Object(O.N)({url:this.result.url})}}},A=L,E=(n(5118),Object(m.a)(A,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ai-face-changing"},[e("div",{staticClass:"face-swap"},[e("div",{staticClass:"left-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("CTabs",{style:t.tabStyle,attrs:{tabs:t.tabs,currentTab:t.currentTab},on:{changeTab:t.changeTab}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.requesting,expression:"requesting"}],ref:"scrollWrapper",staticClass:"content-container"},t._l(t.materialSource,(function(n,o){return e("div",{key:o,staticClass:"item-box",on:{click:function(e){return t.changeSource(n)}}},[e("div",{staticClass:"duration"},[t._v(t._s(n.duration))]),t._v(" "),e("div",{staticClass:"author"},[t._v(t._s(t.$t("by"))+" "+t._s(n.author_name))]),t._v(" "),e("img",{staticClass:"material",attrs:{src:t.replaceLowWebp(n.cover),alt:"image"}})])})),0)],1),t._v(" "),e("div",{staticClass:"middle-area"},[e("i",{staticClass:"iconfont icon-icon_quanminwuwang icon"}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("ai_dance_fitting_title")))]),t._v(" "),e("div",{staticClass:"explain"},[e("span",{staticClass:"words"},[t._v(t._s(t.$t("ai_dance_fitting_desc")))])]),t._v(" "),e("div",{staticClass:"preview-box"},[t.isBeforeGenerate?e("div",{staticClass:"before-generate"},[t.source.url?[e("div",{staticClass:"close-btn",on:{click:function(e){return t.clearData("clear")}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("video",{staticClass:"video-preview",attrs:{src:t.source.url,autoplay:"",loop:"",controls:""}})]:e("span",{staticClass:"empty",domProps:{innerHTML:t._s(t.$t("PlsSelectTemplate3"))}})],2):t.isGenerating?e("div",{staticClass:"generating"},[e("i",{staticClass:"el-icon-loading dance-loading"}),t._v(" "),e("div",{staticClass:"tips"},[t._v(t._s(t.$t("ai_dance_generatingAndWait")))]),t._v(" "),e("div",{staticClass:"get-more-credits",on:{click:t.toMall}},[t._v("\n              "+t._s(t.$t("GetMoreCredits"))+"\n              "),e("i",{staticClass:"el-icon-right"})])]):e("div",{staticClass:"after-generate"},[t.result.url?[e("div",{staticClass:"post-btn",on:{click:t.handlePost}},[e("i",{staticClass:"iconfont icon-myPostIcon"})]),t._v(" "),e("div",{staticClass:"download-btn",on:{click:t.handleDownload}},[e("i",{staticClass:"iconfont icon-icon-Download download-svg"})]),t._v(" "),e("div",{staticClass:"delete-btn",on:{click:function(e){return t.clearData("delete")}}},[e("i",{staticClass:"iconfont icon-shanchu"})]),t._v(" "),e("video",{staticClass:"video-preview",attrs:{id:"danceVideo",src:t.result.url,autoplay:"",loop:"",controls:""}})]:t._e()],2)]),t._v(" "),t.isGenerating?t._e():e("div",{staticClass:"generate-box"},[e("div",{staticClass:"generate",on:{click:t.handleGenerate}},[t._v("\n            "+t._s(t.$t(t.isAfterGenerate?"TryAgain":"Generate"))+"\n            "),this.source.url&&t.isBeforeGenerate&&!t.isCompanyAccount?e("span",{staticClass:"compute_coin-cost"},[t._v("\n              ("+t._s(t.$t("expend"))+": "+t._s(t.getEstimatedCost)+" "+t._s(this.$t("coin"))+")\n            ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"right-area",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[e("div",{staticClass:"process"},[e("div",{staticClass:"sub-title"},[e("span",[t._v(t._s(t.$t("Process")))]),t._v(" "),e("i",{staticClass:"iconfont icon-help-icon",on:{click:t.openExampleDialog}})]),t._v(" "),e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"left-box"},[t.source.cover?e("img",{staticClass:"source-image",attrs:{src:t.source.cover,alt:"target face"}}):t._e()]),t._v(" "),e("div",{staticClass:"right-box",class:{active:t.targetDance,generating:t.isGenerating,"after-generate":t.isAfterGenerate}},[t.targetDance?e("div",{staticClass:"delete-face",on:{click:t.clearTargetFace}},[e("i",{staticClass:"el-icon-close"})]):t._e(),t._v(" "),t.targetDance?e("img",{staticClass:"target-face",attrs:{src:t.targetDance,alt:"target face"}}):t._e()])])]),t._v(" "),e("div",{staticClass:"select-face"},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("selectImage")))]),t._v(" "),e("div",{staticClass:"sub-title-tip"},[t._v(t._s(t.$t("ai_dance_pic_tips")))]),t._v(" "),e("div",{staticClass:"face-box"},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.faceUploading,expression:"faceUploading"}],ref:"uploadRef",staticClass:"face-uploader item-face",attrs:{disabled:t.isForbidden,action:"/",accept:"image/*","show-file-list":!1,"before-upload":t.handleFaceBeforeUpload}},[e("div",{staticClass:"uploader",on:{click:function(e){return e.stopPropagation(),t.handleUploadClick.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-plus"})])]),t._v(" "),t._l(t.danceArr,(function(n,o){return e("div",{key:n,staticClass:"item-face",class:{"item-face-active":t.faceIndex===o},on:{click:function(e){return t.handleSelectedFace(n,o)}}},[e("div",{staticClass:"delete-face",class:{generating:t.isGenerating,"after-generate":t.isAfterGenerate},on:{click:function(e){return e.stopPropagation(),t.handleDeleteFace(n)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),e("img",{staticClass:"face-image",attrs:{src:n,alt:"face image"}})])}))],2)])])]),t._v(" "),e("ExampleDialog",{ref:"exampleDialog"})],1)}),[],!1,null,"523ddfd5",null));e.default=E.exports;installComponents(E,{CTabs:n(1185).default})},5774:function(t,e,n){"use strict";n.r(e);n(32),n(18),n(4);var o=n(2),r=n(3),l=n(30),c=(n(20),n(11),n(19),n(6),n(16),n(22),n(49),n(24),n(65),n(243),n(3448),n(12),n(13),n(8),n(28),n(43),n(21),n(77),n(7),n(26),n(256)),d=n(61),v=n(9),h=n(51),f=n(71),m=n(82),_=n(903),y=n(38),w=n(821),C=n(14),O=n(10),x={data:function(){return{notFinishArr:[4,6,8],setDate:O.O,dialogVisible:!1,formData:{page:1,page_size:10},list:[],noMoreData:!1,loading:!1}},watch:{dialogVisible:{handler:function(t){t?0==this.list.length&&this.getList():(this.formData.page_size=10,this.noMoreData=!1,this.list=[])},immediate:!0}},methods:{show:function(){this.dialogVisible=!0},goTrainDet:function(t){if(console.log(789456,t),!this.notFinishArr.includes(t.status)){var e=this.localePath("/ai-audio/detail/".concat(t.timbre_id));this.$router.push(e)}},getList:function(){var t=this;this.loading||this.noMoreData||(this.loading=!0,Object(y.mb)(this.formData).then((function(e){var n;1e4==e.status.code&&((n=t.list).push.apply(n,Object(C.a)(e.data.items)),e.data.has_more?t.formData.page++:t.noMoreData=!0)})).finally((function(){t.loading=!1})))},checkLoadMore:function(){var t=this.$refs.list,e=t.scrollTop,n=t.scrollHeight;e+t.clientHeight>=n-300&&this.getList()},setStatus:function(t){var e="expired";switch(t){case 1:e=this.$t("trainingCompleted");break;case 4:case 6:e=this.$t("TRAINING")+"...";break;case 8:e=this.$t("newTrainDet2")}return e},setSateClass:function(t){var e="";switch(t){case 1:e="success";break;case 8:e="fail";break;case 4:case 6:e="ing"}return e},getExpireTime:function(t){var e=(new Date).getTime();if(t&&t>e){var n=t-e,o=Math.floor(n/864e5);return o?this.$t("TaskExpireTime",{param:o}):this.$t("ExpiresSoon")}return this.$t("ExpiresSoon")}}},k=(n(5419),n(0)),I=Object(k.a)(x,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("trainiRecords"),visible:t.dialogVisible,width:"800px",top:"10vh","custom-class":"trainDialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"LoraTrainingHistory",on:{scroll:t.checkLoadMore}},[e("div",{staticClass:"title row"},[e("span",[t._v(t._s("ID"))]),t._v(" "),e("span",[t._v(t._s(t.$t("trainingTime")))]),t._v(" "),e("span",[t._v(t._s(t.$t("status")))]),t._v(" "),e("span",[t._v(t._s(t.$t("operation")))])]),t._v(" "),t._l(t.list,(function(n,o){return e("div",{key:n.create_at+","+o,ref:"list",refInFor:!0,staticClass:"list row"},[e("span",[t._v(t._s(n.id))]),t._v(" "),e("span",[t._v(t._s(t.setDate(n.create_at)))]),t._v(" "),e("div",{staticClass:"statusBox"},[e("div",{class:t.setSateClass(n.status)},[t._v(t._s(t.setStatus(n.status)))])]),t._v(" "),e("span",{class:{"not-cursor":t.notFinishArr.includes(n.status)},style:{color:t.notFinishArr.includes(n.status)?"#909399":"#4784FF"},on:{click:function(e){return t.goTrainDet(n)}}},[t._v(t._s(8!==n.status?t.$t("audioTrainSee"):t.$t("cannotView")))])])}))],2)])}),[],!1,null,"65f8c7e8",null).exports,j=n(614),S=n(472);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"AIAudioTrain",mixins:[w.a],components:{HistoryDialog:I,AudioListItem:j.a,AudioPlayer:c.a,HyUploadBtn:S.default,LocalAudioPlayer:_.a},data:function(){return{detailsData:{},textLoading:!1,tagValue:"",customStyle:{height:"44px",background:"#282933",borderRadius:"10px",padding:"10px"},isEditText:!1,title:this.$t("trainSound"),trinLoading:!1,lastFormData:{},cover:{width:0,height:0},loading:!1,tagOptions:[],allowCreateTag:!0,totalDuration:0,recommend:{minDuration:10,recDuration:45,maxDuration:30},accept:".jpg,.jpeg,.png,.webp",UPLOAD:new h.a({type:48}),showImage:!1,isCoverLoading:!1,coverAudioLoading:!1,soundsTypeInfo:v.ob,trail_voices_copy:{},trail_voices:{},langList:[{i18Key:"en",value:"en"},{i18Key:"cn",value:"zh-cn"},{i18Key:"japaneseForSound",value:"ja"},{i18Key:"ko",value:"ko"}],createFormCopy:{id:"",cover:"",gender:"",age:"",langs:"",tones:"",name:"",text:"",tags:[],publish_status:1,audios:[],hasAudio:!1},createForm:{id:"",cover:"",gender:"",age:"",langs:"",tones:"",name:"",text:"",tags:[],publish_status:1,audios:[],hasAudio:!1},rules:Object(v.lb)(this),timer:null,uploadAudioLimit:1,progress:0,gressStartTime:null,gressTotalDuration:null,gressRemainingTime:0,isCoverLoading2:!1,fileList:[],acceptTypes:".mp3,.wav,.aac,audio/mpeg,audio/wav,audio/aac",fileSizes:{},uploadedFiles:[],totalSize:0,trainAudioForm:null}},computed:{expend:function(){return this.getScoreByDuration(this.totalDuration)},computedDownTime:function(){return this.formatTime(this.gressRemainingTime||0)},fillWidth:function(){var t=this.totalDuration/this.recommend.maxDuration*85;return"".concat(Math.floor(t)>=85?100:Math.floor(t),"%")},minMillLeft:function(){return"".concat(Math.floor(this.recommend.minDuration/this.recommend.maxDuration*85),"%")},reMillLeft:function(){return"".concat(Math.floor(this.recommend.recDuration/this.recommend.maxDuration*85),"%")},maxMillLeft:function(){return"85%"},timeUnqualified:function(){return this.totalDuration<this.recommend.minDuration?this.$t("update_prompt5"):this.totalDuration>this.recommend.maxDuration?this.$t("update_prompt6"):""}},watch:{"createForm.audios":{handler:function(t){this.createForm.hasAudio=!(!t||!t.length)},immediate:!0,deep:!0}},methods:{onSelectFocus:function(){this.handleGetRemmodTag("")},getScoreByDuration:function(t){var e={"<20":28,"20-50":28,"51-110":33,"111-170":38,"171-230":44,"231-300":48,">300":48},n=Object.keys(e).find((function(e){if("<20"===e)return t<20;if(">300"===e)return t>300;var n=e.split("-").map(Number),o=Object(l.a)(n,2),r=o[0],c=o[1];return t>=r&&t<=c}));if(n)return e[n];throw new Error("Invalid duration")},textToVoice:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.textLoading){e.next=3;break}return t.$message.warning(t.$t("code_10405")),e.abrupt("return");case 3:t.$refs.ruleForm.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var o,r,l,c,d,data,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=25;break}return e.prev=1,t.textLoading=!0,e.next=5,Object(y.db)({text:t.createForm.text,timbre_id:null===(o=t.createForm)||void 0===o?void 0:o.id,ss:v.e.GenerateCreate});case 5:if(r=e.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,80008!==c.code){e.next=14;break}return t.$EventBus.$emit(t.isVip?"showVipComputingDialog":"showNotVipComputingDialog"),t.textLoading=!1,e.abrupt("return");case 14:if(70026!==c.code){e.next=18;break}return t.$message.error(t.$t("audio_Inpu_detection1",{X:t.$t("audio_Inpu_detection2")})),t.textLoading=!1,e.abrupt("return");case 18:1e4===c.code&&data.url?(t.textLoading=!1,t.isEditText=!1,t.createForm.voiceUrl=data.url,t.trail_voices.id=null===(h=t.detailsData)||void 0===h?void 0:h.id,t.trail_voices.text=t.createForm.text):(t.textLoading=!1,t.isEditText=!1,t.$message.error(t.$t("audioCreateFail")),t.inputError=10608===c.code?"audioTxtError2":"audioTxtError1"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),t.textLoading=!1,t.isEditText=!1;case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},triggerUsernameValidation:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;this.$refs[t].validateMessage=2===o?this.$t("audioTxtError2"):this.$t("audioTxtError1"),this.$refs[t].validateState="error",this.$nextTick((function(){e.$refs[t].$el.querySelector(".el-form-item__error").style.display=n?"none":"block"}))},handleValidator:function(t,e){var n=this,o=t.target.value||"";o&&Object(y.gb)({ss:v.e.GenerateCreate,text:o,type:1,domain:"timbre_train",langs:["zh","en","ja","ko"]}).then((function(t){var r=t.status,l=void 0===r?{}:r,c=t.data,data=void 0===c?{}:c;1e4===l.code&&(0===data.err_code?n.$refs.ruleForm.clearValidate(2===e?"name":"text"):(2===e&&(n.triggerUsernameValidation("nameField",!1,data.err_code),n.createForm.name=Object(v.kb)(o,data.sensitive)),1===e&&(n.triggerUsernameValidation("textField",!1,data.err_code),n.createForm.text=Object(v.kb)(o,data.sensitive))))})).catch((function(t){console.log(t)}))},filterMethod:function(){var t=this;this.$nextTick((function(){try{t.$refs.tagSelect.$el.querySelector(".el-select__input").setAttribute("maxlength",20)}catch(t){}}))},taskIsIng:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,data,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.mb)({page:1,page_size:100});case 2:if(e=t.sent,n=e.status,o=void 0===n?{}:n,r=e.data,data=void 0===r?{}:r,1e4!==o.code){t.next=12;break}return c=!(null===(l=data.items)||void 0===l||!l.length)&&data.items.some((function(t){return[4,6].includes(t.status)})),t.abrupt("return",c);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})))()},handleCancel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.$confirm(this.$t("audioEditCancel"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){if("all"===e)return t.createForm=t.createFormCopy,t.$refs.ruleForm1.clearValidate(),t.$refs.ruleForm.clearValidate(),void t.backPage();"text"===e&&(t.$refs.ruleForm.clearValidate("text"),t.createForm.text=t.createFormCopy.text,t.isEditText=!1)}))},handleHistory:function(){this.$refs.history.show()},formatTime:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%60,r=e.toString().padStart(2,"0"),l=n.toString().padStart(2,"0"),c=o.toString().padStart(2,"0");return"".concat(r,":").concat(l,":").concat(c)},updateProgressForTrain:function(t){this.progress=t,100===t&&(this.gressRemainingTime=0,this.$message.success(this.$t("audioTrainSuccess")))},getTrainProgressFn:function(){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,data,v,h,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:null){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,Object(y.b)({task_ids:[o]});case 6:if(r=n.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,1e4!==(null==c?void 0:c.code)){n.next=21;break}if(8!==(null==data||null===(v=data.items[0])||void 0===v?void 0:v.status)){n.next=14;break}return e.$message.error(e.$t("audioCreateFail")),e.updateProgressForTrain(0),e.timer&&clearInterval(e.timer),n.abrupt("return");case 14:if(100!==(null==data||null===(h=data.items[0])||void 0===h?void 0:h.progress)||1!==(null==data||null===(f=data.items[0])||void 0===f?void 0:f.status)){n.next=19;break}return e.updateProgressForTrain(100),e.getTrainAudioForm(o),e.timer&&clearInterval(e.timer),n.abrupt("return");case 19:e.gressRemainingTime=data.estimated_time_sec||0,e.updateProgressForTrain((null==data||null===(m=data.items[0])||void 0===m?void 0:m.progress)||0);case 21:n.next=29;break;case 23:n.prev=23,n.t0=n.catch(3),console.log("error",n.t0),e.$message.error(e.$t("uploadError")),e.updateProgressForTrain(0),e.timer&&clearInterval(e.timer);case 29:case"end":return n.stop()}}),n,null,[[3,23]])})))()},getTrainAudioForm:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(y.G)({id:t});case 2:o=n.sent,r=o.status,l=void 0===r?{}:r,c=o.data,data=void 0===c?{}:c,1e4===l.code&&data?e.trainAudioForm=data:e.trainAudioForm=null;case 5:case"end":return n.stop()}}),n)})))()},handleBeforeUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(/\.(mp3|wav|aac)$/i.test(t.name)){n.next=6;break}return e.$message.error(e.$message.warning(e.$t("audioUploadFileError2"))),n.abrupt("return");case 6:if(!e.uploadedFiles.includes(t.name)){n.next=9;break}return e.$message.error(e.$t("audioUploadFileError3",{fileName:t.name})),n.abrupt("return");case 9:if(o=e.fileList.reduce((function(t,e){return t+e.size}),0),e.totalSize=o,!(o>20971520)){n.next=14;break}return e.$message.error(e.$t("Explanation_text2")),n.abrupt("return");case 14:return e.beforeUpload(t),n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n)})))()},handleBeforeUploadEmpty:function(){},handleRemove:function(t,e){var n=this;if(this.isCoverLoading2)this.$message.warning(this.$t("newTrainIntr12"));else{this.totalSize-=e.size;var o=this.uploadedFiles.indexOf(e.name);-1!==o&&this.uploadedFiles.splice(o,1),this.fileList.splice(t,1),this.createForm.audios.splice(t,1),this.totalDuration=0,this.fileList.length&&this.fileList.forEach(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.getTotalDuration(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}},updateFileSizes:function(t,e){var n=this;if(t.raw){var o=t.size,r=o<1048576?"".concat((o/1024).toFixed(2)," KB"):"".concat((o/1048576).toFixed(2)," MB");this.$set(this.fileSizes,t.uid,r)}else e.forEach((function(t){var e=t.size,o=e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB");n.$set(n.fileSizes,t.uid,o)}))},getTotalDuration:function(t){var e=this;return new Promise((function(n,o){var r=new FileReader;r.onload=function(){(new AudioContext).decodeAudioData(r.result).then((function(t){var o=Math.floor(t.duration);e.totalDuration+=o,n(o)})).catch((function(t){console.error("无法解码音频文件:",t),e.$message.warning(e.$t("uploadError")),o(t)}))},r.readAsArrayBuffer(t)}))},handleGetRemmodTag:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,data,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.loading=!0,e.allowCreateTag=!0,o=t?{except_num:10,prefix:t,source_type:3}:{show_area:"timbre"},n.prev=3,!t){n.next=10;break}return n.next=7,Object(m.e)(o);case 7:n.t0=n.sent,n.next=13;break;case 10:return n.next=12,Object(f.d)(o);case 12:n.t0=n.sent;case 13:r=n.t0,l=r.status,c=r.data,data=void 0===c?{}:c,1e4===l.code&&(d=t?(null==data?void 0:data.items)||[]:data,t?e.tagOptions=d.map((function(t){return{value:"".concat(t.source_id,"?").concat(t.title),title:t.title}})):(e.tagOptions=[],d.forEach((function(t){t.title=t[v.r[e.$i18n.locale]],t.title&&e.tagOptions.push({value:"".concat(t.id,"?").concat(t.title),title:t.title})}))),e.setTagOptionsByDetails(),e.loading=!1),n.next=24;break;case 18:n.prev=18,n.t1=n.catch(3),e.loading=!1,e.tagOptions=[],150002===(null===n.t1||void 0===n.t1?void 0:n.t1.code)&&(e.allowCreateTag=!1),e.setTagOptionsByDetails();case 24:case"end":return n.stop()}}),n,null,[[3,18]])})))()},setTagOptionsByDetails:function(){var t,e=this;null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.tags)&&void 0!==t&&t.length&&this.detailsData.tags.map((function(t){e.tagOptions.unshift({value:"".concat(t.id,"?").concat(t.title),title:t.title})}))},formatDuration:function(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,":").concat(n<10?"0":"").concat(n)},handleDelAudio:function(t){this.createForm.cover="",this.coverAudioLoading=!1},removeImage:function(){this.createForm.cover="",this.coverAudioLoading=!1},handleRoleCoverBeforeUpload:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.UPLOAD,r=["image/jpeg","image/png","image/jpg","image/gif","image/webp"],!e.isCoverLoading){n.next=4;break}return n.abrupt("return");case 4:if(r.includes(t.type)){n.next=7;break}return e.$message.error(e.$t("AllowImageFiles")),n.abrupt("return",!1);case 7:if(!(l=t)||l.size){n.next=10;break}return n.abrupt("return",!1);case 10:if(!(t.size/1024/1024>30)){n.next=13;break}return e.$message.warning(e.$t("audioUploadMax30")),n.abrupt("return");case 13:if(!(t.size/1024/1024>5)){n.next=24;break}return n.prev=14,n.next=17,Object(d.a)(t,5242880);case 17:l=n.sent,n.next=24;break;case 20:return n.prev=20,n.t0=n.catch(14),console.error("Compression failed:",n.t0),n.abrupt("return");case 24:return n.next=26,e.checkImageSize(l);case 26:if(c=n.sent,e.createForm.cover=c.url||"",e.cover.width=c.realWidth||0,e.cover.height=c.realHeight||0,!e.isCoverLoading){n.next=32;break}return n.abrupt("return");case 32:return e.isCoverLoading=!0,o.startUpload(l).then((function(t){e.isCoverLoading=!1,e.coverAudioLoading=!0,e.createForm.cover=t||""})).catch((function(t){e.isCoverLoading=!1,e.coverAudioLoading=!1,e.createForm.cover="",e.cover.width=0,e.cover.height=0})),n.abrupt("return",!1);case 35:case"end":return n.stop()}}),n,null,[[14,20]])})))()},uploadHandleConfirm:function(t){var e=Object(l.a)(t,1)[0];this.createForm.cover=e.url,this.coverAudioLoading=!0},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t={width:img.width,height:img.height,realWidth:img.naturalWidth,realHeight:img.naturalHeight};t.url=img.src,e(t)},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},submitForm:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.ruleForm1.validate((function(e){e&&t.$refs.ruleForm.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var o,l,c,d,h,f,m,_,w,C,O,x,k,I,j,S,$,data,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=35;break}if(!t.timeUnqualified||null!==(o=t.$route.params)&&void 0!==o&&o.id){e.next=4;break}return t.$message.warning(t.$t("re-upload")),e.abrupt("return");case 4:if(!t.isCoverLoading2){e.next=7;break}return t.$message.warning(t.$t("newTrainIntr12")),e.abrupt("return");case 7:return d=null===(l=t.$route.params)||void 0===l?void 0:l.id,h=t.detailsData||{},f=h.model_id,m=void 0===f?"":f,_=h.model_type,w=void 0===_?"":_,C=h.model_version,O=void 0===C?"":C,(x=Object.assign({},t.createForm,{cover:{url:t.createForm.cover,width:t.cover.width,height:t.cover.height},tones:[t.createForm.tones],langs:[t.createForm.langs],model_id:d?m:"sovits",model_type:d?w:"chat_gpt",model_version:d?O:"v4",ss:v.e.GenerateCreate})).tags=t.createForm.tags.length?t.createForm.tags.map((function(t){var e=t.split("?");return{id:e.length>1?e[0]:"",title:e.length>1?e[1]:e[0]}})):[],delete x.hasAudio,t.trinLoading=!0,k=null!==(c=t.$route.params)&&void 0!==c&&c.id?y.kb:y.lb,e.prev=14,e.next=17,k(x);case 17:I=e.sent,j=I.status,S=void 0===j?{}:j,$=I.data,data=void 0===$?{}:$,1e4===S.code&&(null!==(P=t.$route.params)&&void 0!==P&&P.id?(t.$message.success(t.$t("SaveSuccess")),t.backPage()):(t.$message.success(t.$t("audioTrainSuccessWait")),t.timer=setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTrainProgressFn(null==data?void 0:data.task_id);case 2:case"end":return e.stop()}}),e)}))),5e3))),t.trinLoading=!1,e.next=35;break;case 23:e.prev=23,e.t0=e.catch(14),e.t1=null===e.t0||void 0===e.t0?void 0:e.t0.code,e.next=10625===e.t1?28:10626===e.t1?30:10627===e.t1?32:34;break;case 28:return t.$message.error(t.$t("audio_Inpu_detection1",{X:t.$t("audioSoundName")})),e.abrupt("break",34);case 30:return t.$message.error(t.$t("audio_Inpu_detection1",{X:t.$t("Tags")})),e.abrupt("break",34);case 32:return t.$message.error(t.$t("audio_Inpu_detection1",{X:t.$t("audio_Inpu_detection2")})),e.abrupt("break",34);case 34:t.trinLoading=!1;case 35:case"end":return e.stop()}}),e,null,[[14,23]])})));return function(t){return e.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})))()},resetForm:function(t){this.$refs[t].resetFields()},backPage:function(){this.$router.back()},handleGoCreate:function(){var t=this.localePath("/ai-audio/create/".concat(this.trainAudioForm.id));this.$router.push(t)},getDetails:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r,c,d,data,v,h,f,m,_,w,C;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(y.G)({id:t});case 2:o=n.sent,r=o.status,c=void 0===r?{}:r,d=o.data,data=void 0===d?{}:d,1e4===c.code&&data?(e.detailsData=data,C=P(P({},e.createForm),Object.fromEntries(Object.entries(e.detailsData).filter((function(t){return Object(l.a)(t,1)[0]in e.createForm})))),e.createForm=C,e.createForm.tones=e.createForm.tones[0],e.createForm.hasAudio=!0,e.createForm.langs=e.createForm.langs&&null!==(v=e.createForm.langs)&&void 0!==v&&v.length?e.createForm.langs[0]:"",null!==(h=e.detailsData.tags)&&void 0!==h&&h.length?(e.setTagOptionsByDetails(),e.createForm.tags=e.createForm.tags.map((function(t){return"".concat(t.id,"?").concat(t.title)}))):e.createForm.tags=[],e.createForm.cover=(null===(f=e.createForm.cover)||void 0===f?void 0:f.url)||"",e.cover=(null===(m=e.detailsData)||void 0===m?void 0:m.cover)||{width:0,height:0},e.trail_voices={txt:null===(_=e.detailsData)||void 0===_?void 0:_.text,id:null===(w=e.detailsData)||void 0===w?void 0:w.id},e.trail_voices_copy=JSON.parse(JSON.stringify(e.trail_voices)),e.trail_voices_copy.txt=e.createForm.text,e.createFormCopy=JSON.parse(JSON.stringify(e.createForm))):e.$message.warning(e.$t("BindAccountWarn1"));case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){var t;if(null!==(t=this.$route.params)&&void 0!==t&&t.id){var e;this.title=this.$t("audioEdit"),this.getDetails(null===(e=this.$route.params)||void 0===e?void 0:e.id)}else{this.title=this.$t("trainSound");var n=Math.floor(5*Math.random());this.createForm.text=["en","zhCN","ja"].includes(this.$i18n.locale)?v.J[this.$i18n.locale][n]:v.J.en[n]}}},D=T,L=(n(5420),Object(k.a)(D,(function(){var t,e,n,o,r=this,l=r._self._c;return l("div",{staticClass:"ai-audio-train"},[l("div",{staticClass:"ai-audio-train-top"},[l("div",{staticClass:"ai-audio-train-top-left"},[l("div",{staticClass:"title"},[l("div",{staticClass:"back-btn",on:{click:r.backPage}},[l("i",{staticClass:"iconfont icon-back"})]),r._v(" "),l("span",[r._v(r._s(r.title))]),r._v(" "),r.gressRemainingTime?[l("span",[r._v(r._s(r.$t("newTrainDet1")))]),r._v(" "),l("span",[r._v(r._s(r.computedDownTime))])]:r._e()],2),r._v(" "),0!==r.progress&&100!==r.progress?l("div",{staticClass:"progress"},[l("div",{staticClass:"progress-inner",style:{width:r.progress+"%"}}),r._v(" "),l("span",{staticClass:"txt"},[r._v("\n          "+r._s(r.$t("trainingTaskProgress"))+"\n          "),l("span",{staticClass:"num"},[r._v(r._s(r.progress+"%"))])])]):r._e()]),r._v(" "),l("div",{staticClass:"ai-audio-train-top-right"},[null!==(t=r.$route.params)&&void 0!==t&&t.id?l("div",{staticClass:"edit-box"},[l("div",{staticClass:"btn-item cancel-btn",on:{click:function(t){return r.handleCancel("all")}}},[r._v("\n          "+r._s(r.$t("Cancel"))+"\n        ")]),r._v(" "),l("div",{staticClass:"btn-item query-btn",on:{click:r.submitForm}},[r._v("\n          "+r._s(r.$t("Save"))+"\n        ")])]):l("div",{staticClass:"btn",on:{click:r.handleHistory}},[r._v("\n        "+r._s(r.$t("trainiRecords"))+"\n      ")])])]),r._v(" "),l("div",{staticClass:"container"},[l("div",{staticClass:"container-left"},[l("el-form",{ref:"ruleForm1",staticClass:"rule-form",attrs:{"label-position":"top",model:r.createForm,rules:r.rules}},[l("el-form-item",{attrs:{label:r.$t("CreativeCenterPopup32"),prop:"cover"}},[l("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:r.createForm.cover,callback:function(t){r.$set(r.createForm,"cover",t)},expression:"createForm.cover"}}),r._v(" "),l("HyUploadBtn",{attrs:{boxw:"98px",boxh:"98px",category:48,isSingleSelect:"",coverImg:r.createForm.cover},on:{onConfirm:r.uploadHandleConfirm,onDelete:function(t){return r.removeImage("cover")}}})],1),r._v(" "),l("div",{staticClass:"attr-box"},[l("el-form-item",{attrs:{label:r.$t("gender"),prop:"gender"}},[l("el-select",{attrs:{placeholder:r.$t("Pls_select"),"popper-class":"custom-select"},model:{value:r.createForm.gender,callback:function(t){r.$set(r.createForm,"gender",t)},expression:"createForm.gender"}},r._l(r.soundsTypeInfo[1].value,(function(t,e){return l("el-option",{key:e,attrs:{label:r.$t(t.i18Key),value:t.value}})})),1)],1),r._v(" "),l("el-form-item",{attrs:{label:r.$t("AI_person_age"),prop:"age"}},[l("el-select",{attrs:{placeholder:r.$t("Pls_select"),"popper-class":"custom-select"},model:{value:r.createForm.age,callback:function(t){r.$set(r.createForm,"age",t)},expression:"createForm.age"}},r._l(r.soundsTypeInfo[2].value,(function(t,e){return l("el-option",{key:e,attrs:{label:r.$t(t.i18Key),value:t.value}})})),1)],1),r._v(" "),l("el-form-item",{attrs:{label:r.$t("intonation"),prop:"tones"}},[l("el-select",{attrs:{placeholder:r.$t("Pls_select"),"popper-class":"custom-select"},model:{value:r.createForm.tones,callback:function(t){r.$set(r.createForm,"tones",t)},expression:"createForm.tones"}},r._l(r.soundsTypeInfo[3].value,(function(t,e){return l("el-option",{key:e,attrs:{label:r.$t(t.i18Key),value:t.value}})})),1)],1)],1),r._v(" "),l("div",{staticClass:"attr-box"},[l("el-form-item",{ref:"nameField",attrs:{label:r.$t("audioSoundName"),prop:"name"}},[l("el-input",{attrs:{placeholder:r.$t("audioInputSound"),maxlength:"20","show-word-limit":"",clearable:""},model:{value:r.createForm.name,callback:function(t){r.$set(r.createForm,"name",t)},expression:"createForm.name"}})],1),r._v(" "),l("el-form-item",{attrs:{label:r.$t("audioLang"),prop:"langs"}},[l("template",{slot:"label"},[l("span",[r._v(r._s(r.$t("audioLang")))]),r._v(" "),l("span",{staticClass:"tip tip2"},[r._v(r._s(r.$t("language_prompt")))])]),r._v(" "),l("el-select",{attrs:{placeholder:r.$t("Pls_select"),"popper-class":"custom-select"},model:{value:r.createForm.langs,callback:function(t){r.$set(r.createForm,"langs",t)},expression:"createForm.langs"}},r._l(r.langList,(function(t,e){return l("el-option",{key:e,attrs:{label:r.$t(t.i18Key),value:t.value}})})),1)],2)],1),r._v(" "),null!==(e=r.$route.params)&&void 0!==e&&e.id?r._e():l("el-form-item",{ref:"textField",attrs:{label:"",prop:"text"}},[l("template",{slot:"label"},[l("span",[r._v(r._s(r.$t("audioExample")))]),r._v(" "),l("span",{staticClass:"tip tip2"},[r._v(r._s(r.$t("Explanation_text1")))])]),r._v(" "),l("el-input",{attrs:{placeholder:r.$t("pleaseEnte"),maxlength:"50","show-word-limit":"",clearable:""},model:{value:r.createForm.text,callback:function(t){r.$set(r.createForm,"text",t)},expression:"createForm.text"}})],2),r._v(" "),l("el-form-item",{staticClass:"el-form-item-tag",attrs:{label:r.$t("Tags"),prop:"tag"}},[l("el-select",{ref:"tagSelect",staticClass:"tag-select",attrs:{"automatic-dropdown":"","allow-create":r.allowCreateTag,"show-word-limit":"","popper-class":"show-tag-select",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:r.$t("pleaseEnte"),"multiple-limit":5,"remote-method":r.handleGetRemmodTag,loading:r.loading},on:{focus:r.onSelectFocus},nativeOn:{input:function(t){return r.filterMethod.apply(null,arguments)}},model:{value:r.createForm.tags,callback:function(t){r.$set(r.createForm,"tags",t)},expression:"createForm.tags"}},r._l(r.tagOptions,(function(t){return l("el-option",{key:t.value,attrs:{label:t.title,value:t.value}})})),1),r._v(" "),l("div",{staticClass:"limt"},[r._v(r._s((null===(n=r.createForm.tags)||void 0===n?void 0:n.length)||"0")+"/5")])],1),r._v(" "),l("el-form-item",{attrs:{label:r.$t("hasPublic"),prop:"publish_status"}},[l("div",{staticClass:"is-public"},[l("div",{staticClass:"is-public-item",class:{"is-public-item-active":1===r.createForm.publish_status},on:{click:function(t){r.createForm.publish_status=1}}},[r._v("\n              "+r._s(r.$t("Publish"))+"\n            ")]),r._v(" "),l("div",{staticClass:"is-public-item",class:{"is-public-item-active":2===r.createForm.publish_status},on:{click:function(t){r.createForm.publish_status=2}}},[r._v("\n              "+r._s(r.$t("createSetting2"))+"\n            ")])])])],1)],1),r._v(" "),l("div",{staticClass:"container-right"},[l("el-form",{ref:"ruleForm",staticClass:"rule-form rule-form-right",attrs:{"label-position":"top",model:r.createForm,rules:r.rules}},[null!==(o=r.$route.params)&&void 0!==o&&o.id?[l("el-form-item",{attrs:{label:"",prop:"text"}},[l("template",{slot:"label"},[l("span",[r._v(r._s(r.$t("audioExample")))]),r._v(" "),l("span",{staticClass:"tip tip2"},[r._v(r._s(r.$t("Explanation_text1")))])]),r._v(" "),r.isEditText?l("el-input",{directives:[{name:"loading",rawName:"v-loading",value:r.textLoading,expression:"textLoading"}],attrs:{disabled:r.textLoading,type:"textarea",placeholder:r.$t("pleaseEnte"),maxlength:"50","show-word-limit":"",clearable:""},model:{value:r.createForm.text,callback:function(t){r.$set(r.createForm,"text",t)},expression:"createForm.text"}}):l("AudioListItem",{attrs:{showPlayer:!1,"custom-style":r.customStyle,obj:r.createForm,modelPlay:"",item:r.trail_voices,showMore:!1},scopedSlots:r._u([{key:"custom_header",fn:function(t){var e;return[l("div",{staticClass:"header-info"},[l("AudioPlayer",{attrs:{modelPlay:"",authorId:null===(e=r.detailsData.author)||void 0===e?void 0:e.id,item:t.data,customClass:"try-class",playIconCustomStyle:{position:"unset"}}}),r._v(" "),l("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[l("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[r._v("\n                      "+r._s(r.createForm.text||r.$t("no_data"))+"\n                    ")]),r._v(" "),l("div",{staticClass:"header"},[r._v("\n                      "+r._s(r.createForm.text||r.$t("no_data"))+"\n                    ")])])],1)]}}],null,!1,1107745946)})],2),r._v(" "),l("div",{staticClass:"btn-box"},[r.isEditText?[l("div",{directives:[{name:"show",rawName:"v-show",value:!r.textLoading,expression:"!textLoading"}],staticClass:"btn-item",on:{click:function(t){return r.handleCancel("text")}}},[r._v(r._s(r.$t("Cancel")))]),r._v(" "),l("div",{staticClass:"btn-item btn-item-create",on:{click:r.textToVoice}},[l("i",{directives:[{name:"show",rawName:"v-show",value:r.textLoading,expression:"textLoading"}],staticClass:"el-icon-loading"}),r._v(" "),l("span",[r._v(r._s(r.$t("audioTrainEdit")))]),r._v(" "),l("el-tooltip",{attrs:{content:r.$t("audioCreateTip"),"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[l("span",{staticClass:"iconfont icon-ruleIcon"})])],1)]:l("div",{staticClass:"btn-item",on:{click:function(t){r.isEditText=!0}}},[l("i",{staticClass:"icon-icon-edit2 iconfont"}),r._v("\n              "+r._s(r.$t("audioEditRset"))+"\n            ")])],2)]:[l("el-form-item",{attrs:{label:"",prop:"hasAudio"}},[l("template",{slot:"label"},[l("span",[r._v(r._s(r.$t("upload_prompt2")))]),r._v(" "),l("span",{staticClass:"tip tip2"},[r._v(r._s(r.$t("upload_prompt1")))])]),r._v(" "),l("el-switch",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:r.createForm.hasAudio,callback:function(t){r.$set(r.createForm,"hasAudio",t)},expression:"createForm.hasAudio"}}),r._v(" "),l("el-upload",{staticClass:"audio-upload",attrs:{action:"#",drag:"","before-upload":r.handleBeforeUpload,disabled:r.isCoverLoading2,accept:r.acceptTypes,"file-list":r.fileList,"http-request":r.handleBeforeUploadEmpty,"show-file-list":!1}},[l("div",{staticClass:"image-upload-trigger",attrs:{slot:"trigger"},slot:"trigger"},[l("i",{staticClass:"el-icon-upload"}),r._v(" "),l("span",{staticClass:"tip1"},[r._v(r._s(r.$t("audioUploadAudioTip")))]),r._v(" "),l("span",{staticClass:"tip2"},[r._v(r._s(r.$t("upload_prompt3")))])])]),r._v(" "),r.isCoverLoading2?l("div",{staticClass:"progress-box"},[l("el-progress",{staticClass:"upload-progress",attrs:{type:"circle","stroke-width":10,width:60,color:"#22D19D","text-color":"#ffffff",percentage:r.uploadProgress}}),r._v(" "),l("div",{staticClass:"progressTip"},[r._v(r._s(r.isCoverLoading2?r.$t("newTrainIntr12"):r.$t("newTrainIntr13")))])],1):r._e()],2),r._v(" "),l("div",{staticClass:"upload-tips ellipsis"},[l("i",{staticClass:"iconfont icon-icon-information1"}),r._v(" "),l("span",[r._v(r._s(r.$t("upload_prompt4")))])]),r._v(" "),l("div",{staticClass:"add-audio-box"},[r.fileList.length?l("div",{staticClass:"audio-box"},[r._l(r.fileList,(function(t,e){var n;return l("div",{key:e,staticClass:"upload-box-item"},[l("div",{staticClass:"icon-box"},[l("i",{staticClass:"iconfont icon-icon-audio1"})]),r._v(" "),l("div",{staticClass:"info-box"},[l("div",{staticClass:"info-1 ellipsis"},[r._v(r._s(t.name)+" - "+r._s(r.fileSizes[t.uid]))]),r._v(" "),l("div",{staticClass:"info-2"},[r._v("\n                    "+r._s(null===(n=r.createForm.audios.find((function(audio){return audio.name===t.name})))||void 0===n?void 0:n.duration)+"s\n                  ")])]),r._v(" "),l("div",{staticClass:"play-icon-box"},[l("LocalAudioPlayer",{attrs:{data:r.createForm.audios.find((function(audio){return audio.name===t.name})),fontSize:"22px"}})],1),r._v(" "),l("div",{staticClass:"del-icon",on:{click:function(n){return r.handleRemove(e,t)}}},[l("i",{staticClass:"el-icon-close"})])])})),r._v(" "),r.totalDuration&&r.timeUnqualified?l("div",{staticClass:"upload-tips-box"},[l("span",[r._v(r._s(r.timeUnqualified))])]):r._e()],2):r._e(),r._v(" "),r.trainAudioForm?l("el-form-item",{attrs:{label:r.$t("audition")}},[l("AudioListItem",{attrs:{showPlayer:!1,"custom-style":r.customStyle,obj:r.trainAudioForm,modelPlay:"",showMore:!1},scopedSlots:r._u([{key:"custom_header",fn:function(t){var e;return[l("div",{staticClass:"header-info"},[l("AudioPlayer",{attrs:{modelPlay:"",authorId:null===(e=r.trainAudioForm)||void 0===e||null===(e=e.author)||void 0===e?void 0:e.id,item:t.data,playIconCustomStyle:{position:"unset"},customClass:"try-class"}}),r._v(" "),l("div",{staticClass:"tooltip-txt ellipsis"},[l("span",[r._v(r._s(t.data.text||r.$t("no_data")))])]),r._v(" "),l("div",{staticClass:"audio-btn",on:{click:r.handleGoCreate}},[l("i",{staticClass:"iconfont icon-a-AICreation-line"}),r._v("\n                      "+r._s(r.$t("createaudio"))+"\n                    ")])],1)]}}],null,!1,4134152120)})],1):r._e(),r._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:r.trinLoading,expression:"trinLoading"}],staticClass:"handle-btn",on:{click:r.submitForm}},[l("div",{staticClass:"btn-1"},[r._v(r._s(r.$t("trainNow")))]),r._v(" "),l("div",{staticClass:"btn-1 btn-2"},[l("span",[r._v(r._s(r.$t("expend"))+":"+r._s(r.expend))])])])],1)]],2)],1)]),r._v(" "),l("HistoryDialog",{ref:"history"})],1)}),[],!1,null,"469b2cc8",null));e.default=L.exports},5775:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(13),n(8),n(7);var o=n(2),r=(n(19),n(6),n(16),n(4),n(26),n(1)),l=n(615),c=n(616),d=(n(31),n(3)),v=(n(20),n(22),n(29)),h=n(97),f=n(925),m=n(27),_=n(58),y={name:"AlbumCard",props:{info:{type:Object,default:function(){return{}}}},components:{MorePopover:f.a,commonConfirmModal:h.default},computed:{imgList:function(){return this.imagesByTaskId.length?this.imagesByTaskId:(null===(t=this.info)||void 0===t?void 0:t.components)||[];var t},imgCount:function(){var t,e;return(null===(t=this.imgList)||void 0===t?void 0:t.length)||(null===(e=this.imgList)||void 0===e?void 0:e.length)},isWaiting:function(){var t,e;return 1===(null===(t=this.info)||void 0===t?void 0:t.status)&&"waiting"===(null===(e=this.info)||void 0===e?void 0:e.status_desc)||1===this.status},isRestart:function(){var t;return"finishResetWaiting"===(null===(t=this.info)||void 0===t?void 0:t.status_desc)},isProcessing:function(){var t;return 2===(null===(t=this.info)||void 0===t?void 0:t.status)||2===this.status},isFinished:function(){var t;return 3===(null===(t=this.info)||void 0===t?void 0:t.status)&&!this.isRestart||this.imagesByTaskId.length},isCanceled:function(){var t;return 4===(null===(t=this.info)||void 0===t?void 0:t.status)||4===this.status},waitTime:function(){return this.process?Math.ceil((100-this.process)/20):5}},data:function(){return{imagesByTaskId:[],status:null,process:0,inTimes:null}},created:function(){},mounted:function(){if(this.isProcessing||this.isWaiting){var t,e=null===(t=this.info)||void 0===t?void 0:t.task_id;e&&this.getTaskInfo(e)}},beforeDestroy:function(){this.inTimes&&clearTimeout(this.inTimes)},methods:{getTaskInfo:function(t){var e=this,n={};n.task_ids=[t],Object(v.batchFetchTaskProcess)(n).then((function(n){var o,r,l,c,d,v,h;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code))if(e.status=(null==n||null===(r=n.data)||void 0===r||null===(r=r.items[0])||void 0===r?void 0:r.status)||null,null!=n&&null!==(l=n.data)&&void 0!==l&&l.items[0]&&3===(null==n||null===(c=n.data)||void 0===c||null===(c=c.items[0])||void 0===c?void 0:c.status))clearTimeout(e.inTimes),e.imagesByTaskId=(null==n||null===(h=n.data)||void 0===h||null===(h=h.items[0])||void 0===h?void 0:h.img_uris)||[];else if(null!=n&&null!==(d=n.data)&&void 0!==d&&d.items[0]&&4===(null==n||null===(v=n.data)||void 0===v||null===(v=v.items[0])||void 0===v?void 0:v.status))clearTimeout(e.inTimes),e.$message.warning(e.$t("comicPage17"));else{var f;e.process=(null==n||null===(f=n.data)||void 0===f||null===(f=f.items[0])||void 0===f?void 0:f.process)||0,clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}})).catch((function(n){clearTimeout(e.inTimes),e.inTimes=setTimeout((function(){e.getTaskInfo(t)}),5e3)}))},toDetail:function(){if(this.isFinished){var path=this.localePath("/ai-headshot-creations/".concat(this.info.task_id));this.$logEvent("log_actions",{operation:"click_detail",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"}),this.$router.push(path)}else if(this.isRestart||this.isCanceled){var t=this.localePath("/ai-headshot-generator?task=".concat(this.info.task_id));this.$logEvent("log_actions",{operation:"click_retry",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"go_to_create"}),window.open(t,"_blank")}else(this.isWaiting||this.isProcessing)&&this.$message.warning(this.$t("waitingGenerate"))},deleteAlbum:function(){var t=this;this.$refs.commonConfirmModal.show({subTitle:"deleteConfirm",btnStyle:{background:"linear-gradient(81deg, #387cda 0%, #1dd5d6 100%)"}}).then((function(){t.$emit("deleteAlbum",t.info.task_id)})),this.$logEvent("log_actions",{operation:"click_delete",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"})},saveAlbum:function(){var t,e=this;if(null!==(t=this.info)&&void 0!==t&&null!==(t=t.components)&&void 0!==t&&t.length){this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"ai_profile_album"});var n=this.info.components.map((function(t){return t.url}));Object(m.f)({scene:"task_v2_flow",urls:n}).then((function(t){var n=t.data.task_id;e.loopCallDownload(n)}))}},loopCallDownload:function(t){var e=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=setInterval(Object(d.a)(regeneratorRuntime.mark((function n(){var r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(m.f)({task_id:t,scene:"task_v2_flow"});case 3:r=n.sent,l=r.data.url,e.batchLoading=!1,l&&(clearInterval(o),e.downloadFile(l)),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),clearInterval(o),e.batchLoading=!1,console.log("error",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,9]])}))),3e3);case 2:case"end":return n.stop()}}),n)})))()},downloadFile:function(t){var link=document.createElement("a");link.href=t,link.download="ai-headshot-".concat(Object(_.i)((new Date).getTime(),"yyyyMMddhhmmss")),link.click()}}},w=(n(5436),n(5437),n(0)),C=Object(w.a)(y,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"AlbumCard"},[n("div",{staticClass:"inner flex flex-col",on:{click:e.toDetail}},[n("div",{staticClass:"img-container flex_line_c_m"},[e.isFinished&&null!==(t=e.imgList)&&void 0!==t&&t.length?[e._l(e.imgList.slice(0,4),(function(img,t){var o;return n("div",{directives:[{name:"show",rawName:"v-show",value:(null===(o=e.imgList)||void 0===o?void 0:o.length)&&t<4,expression:"imgList?.length && index < 4"}],key:"img_"+t,staticClass:"img-box w-full h-full flex items-center justify-center"},[null!=img&&img.url?n("img",{attrs:{src:null==img?void 0:img.url,width:"120",height:"150",alt:"avatar",loading:"lazy"}}):e._e()])})),e._v(" "),n("MorePopover",{attrs:{showDelete:!0,showSave:!0},on:{delete:e.deleteAlbum,save:e.saveAlbum}})]:e.isProcessing||e.isWaiting?[n("div",{staticClass:"loading-part flex flex-col justify-center items-center"},[n("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],attrs:{type:"circle",percentage:e.process,"stroke-width":6,color:"#4784ff","text-color":"#FFFFFF","define-back-color":"#4A4852"}}),e._v(" "),n("div",{staticClass:"waiting"},[e._v(e._s(e.isProcessing?e.$t("waittingTime",{num:e.waitTime}):e.$t("Queuing")))])],1)]:e.isRestart||e.isCanceled?[n("div",{staticClass:"loading-part flex flex-col justify-center items-center"},[n("div",{staticClass:"waiting"},[e._v(e._s(e.isRestart?e.$t("taskNotStarted"):e.$t("systemCancel")))]),e._v(" "),n("div",{staticClass:"btn-content"},[n("i",{staticClass:"iconfont icon-icon-Download"}),e._v(" "),n("span",[e._v(e._s(e.isRestart?e.$t("CreativeCenterPopup33"):e.$t("Regenerate")))])])])]:e._e()],2),e._v(" "),n("div",{staticClass:"numbers flex flex-col"},[n("span",{staticClass:"name"},[e._v(e._s(e.$t("AIAvatarAlbum")))]),e._v(" "),e.imgCount&&!e.isRestart?n("span",{staticClass:"count"},[e._v(e._s(e.$t("ImgsNumber",{num:e.imgCount})))]):e._e()])]),e._v(" "),n("common-confirm-modal",{ref:"commonConfirmModal"})],1)}),[],!1,null,"0d99fa04",null).exports,O=n(291);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"AIAvatarCreations",props:{},components:{AvatarFrame:c.a,HeadTop:l.a,AlbumCard:C},computed:{paiedAndExist:function(){var t=this;return this.cardList.some((function(e){return e.task_id===t.rollTaskId}))}},data:function(){return{loading:!1,noMore:!1,params:{after_id:"",limit:24},cardList:[],rollTaskId:""}},mounted:function(){this.getHistory(),this.rollTaskId=localStorage.getItem("photoPaySuccessId"),this.rollTaskId&&this.checkTaskExist(this.rollTaskId)},methods:k(k({},Object(r.b)("AIAvatar",["saveAllAlbum"])),{},{toCreate:function(){var path=this.localePath("/ai-headshot-generator");window.open(path,"_blank"),this.$logEvent("log_actions",{operation:"click_create_button",behavior_info:"on_my_ai_profile_page",behavior_info_sub:"go_to_create"})},handleScroll:function(){var t=this.$refs.scrollContent;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.getHistory(!0)},getHistory:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.loading&&!this.noMore){var e=t?"add":"init";this.requestHistory(e)}},requestHistory:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init";"init"===e&&(this.params.after_id=""),this.loading=!0,Object(O.e)(this.params).then((function(n){var o;if(1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)){var r,l,c,d;if(t.params.after_id=null==n||null===(r=n.data)||void 0===r?void 0:r.after_id,t.noMore=!(null!=n&&null!==(l=n.data)&&void 0!==l&&l.has_more),"init"===e)t.cardList=(null==n||null===(c=n.data)||void 0===c?void 0:c.items)||[];else t.cardList=t.cardList.concat((null==n||null===(d=n.data)||void 0===d?void 0:d.items)||[]);t.saveAllAlbum(t.cardList)}})).finally((function(){return t.loading=!1}))},deleteAlbum:function(t){var e=this,n={ids:[t]};Object(v.deleteTaskRecord)(n).then((function(n){var o,r;["10000",1e4].includes(null==n||null===(o=n.status)||void 0===o?void 0:o.code)?(e.noMore=!1,e.$message({message:e.$t("deleteSuccess"),type:"success"}),e.cardList=e.cardList.filter((function(e){return e.task_id!==t}))):e.$message({message:(null==n||null===(r=n.status)||void 0===r?void 0:r.msg)||e.$t("ServerError"),type:"error"})}))},handleBack:function(){this.$router.push(this.localePath("/ai-headshot-generator"))},checkTaskExist:function(t){var e=this;if(console.log("checkTaskExist",t,this.paiedAndExist),t&&!this.paiedAndExist)var n=setInterval((function(){e.requestHistory(),e.paiedAndExist&&(localStorage.removeItem("photoPaySuccessId"),clearInterval(n))}),5e3)}})},j=I,S=(n(5438),Object(w.a)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AIAvatarCreations flex flex-col"},[e("HeadTop"),t._v(" "),e("AvatarFrame",[e("div",{staticClass:"content"},[e("div",{staticClass:"album-main w-full"},[e("div",{staticClass:"top flex items-center"},[e("div",{staticClass:"arrow",on:{click:t.handleBack}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" "+t._s(t.$t("Back")))]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("AIAvatarAlbum")))])]),t._v(" "),e("div",{ref:"scrollContent",staticClass:"custom-scroll w-full",on:{scroll:t.handleScroll}},[e("div",{staticClass:"album-list flex"},[e("div",{staticClass:"to-create flex",on:{click:t.toCreate}},[e("div",{staticClass:"inner flex flex-col"},[e("div",{staticClass:"box-container flex justify-center items-center"},[e("i",{staticClass:"iconfont icon-search-magic"})]),t._v(" "),e("div",{staticClass:"info flex justify-between"},[t._v(t._s(t.$t("toCreate"))+" "),e("i",{staticClass:"iconfont icon-right"})])])]),t._v(" "),t._l(t.cardList,(function(n){return[e("AlbumCard",{key:null==n?void 0:n.task_id,attrs:{info:n},on:{deleteAlbum:t.deleteAlbum}})]}))],2)])])])])],1)}),[],!1,null,"0882a616",null));e.default=S.exports},5776:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(4),n(7);var o=n(2),r=(n(2847),n(47),n(1124)),l=n.n(r),c=(n(2848),n(1125)),d=n.n(c),v=(n(16),n(22),n(49),n(8),n(21),n(1)),h=n(615),f=n(616),m=n(209),_=(n(92),n(28),n(44),n(291)),y={name:"SatisfactionDialog",computed:{dilogClass:function(){return this.addAnimation?"scale-down-animation custom-dialog":"custom-dialog"},stepConfig:function(){return{title:"feedbackTitle".concat(this.step),subtitle:"feedbackSubtitle".concat(this.step)}}},data:function(){return{loading:!1,dialogVisible:!1,addAnimation:!1,rateOptions:[{label:"unsatisfactory",value:3,emoji:"😭",key:"click_not_satisfied"},{label:"generally",value:2,emoji:"😊",key:"click_ordinary"},{label:"satisfaction",value:1,emoji:"😄",key:"click_satisfied"}],suggestion:"",submitLoading:!1,step:1}},methods:{show:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1},handleClose:function(){this.$logEvent("log_actions",{operation:"click_close",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"}),this.close()},handleSelect:function(t){3===t.value?this.step=2:this.handleRate(t.value),this.$logEvent("log_actions",{operation:t.key,behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"})},handleRate:function(t){var e=this;console.log("rateValue",t,this.suggestion);var n={assessment:t,task_id:this.$route.params.id};3===t&&(n.suggestion=this.suggestion,this.$logEvent("log_actions",{operation:"click_not_satisfied_submit",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"})),this.submitLoading=!0,Object(_.b)(n).then((function(n){var o;1e4===(null==n||null===(o=n.status)||void 0===o?void 0:o.code)&&(3!==t&&(e.$emit("finish"),e.close()),e.suggestion="",e.$message.success(e.$t("ThksFeedback")))})).finally((function(){e.submitLoading=!1}))},resetAlbum:function(){var t=this;this.$logEvent("log_actions",{operation:"click_confirm_regenerate",behavior_info:"on_ai_profile_album_detail_page",behavior_info_sub:"satisfaction_popup"}),this.loading=!0,Object(_.h)({task_id:this.$route.params.id}).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.close(),t.$router.replace(t.localePath("/ai-headshot-creations")))})).finally((function(){t.loading=!1}))},closeDialog:function(){this.addAnimation=!0},closeFinish:function(){this.step=1,this.addAnimation=!1},showHaiyiServices:function(){var t;SUHelpSupport&&(null===(t=SUHelpSupport)||void 0===t||t.show())}}},w=(n(5492),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"SatisfactionDialog"},[e("el-dialog",{attrs:{top:"0",visible:t.dialogVisible,"custom-class":t.dilogClass,modal:!1,"destroy-on-close":!0,"lock-scroll":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDialog,closed:t.closeFinish}},[e("span",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"dialog-title flex items-center justify-between"},[e("span",{staticClass:"dialog-title"},[t._v(t._s(t.$t("Tip")))]),t._v(" "),e("i",{staticClass:"el-icon-close",on:{click:t.handleClose}})])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content flex flex-col"},[e("div",{staticClass:"upper flex flex-col"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t(t.stepConfig.title)))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t(t.stepConfig.subtitle)))]),t._v(" "),1===t.step?e("div",{staticClass:"btns flex"},t._l(t.rateOptions,(function(n){return e("div",{key:n.value,staticClass:"btn flex items-center justify-center",on:{click:function(e){return t.handleSelect(n)}}},[e("div",{staticClass:"emoji"},[t._v(t._s(n.emoji))]),t._v(" "),e("div",{staticClass:"label"},[t._v(t._s(t.$t(n.label)))])])})),0):2===t.step?e("el-input",{attrs:{max:500,placeholder:t.$t("feedBackHolder")},scopedSlots:t._u([{key:"append",fn:function(){var n;return[e("el-button",{attrs:{type:"primary",disabled:!(null!==(n=t.suggestion)&&void 0!==n&&n.length)||t.submitLoading},on:{click:function(e){return t.handleRate(3)}}},[t._v("\n              "+t._s(t.$t("Submit"))+"\n            ")])]},proxy:!0}]),model:{value:t.suggestion,callback:function(e){t.suggestion="string"==typeof e?e.trim():e},expression:"suggestion"}}):t._e()],1),t._v(" "),e("div",{staticClass:"bottom flex justify-center"},[e("span",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],staticClass:"help",on:{click:t.showHaiyiServices}},[t._v(t._s(t.$t("needHelp")))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],staticClass:"generate-btn ai-avatar-btn flex items-center",on:{click:function(e){t.step=3}}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("Regenerate"))+"\n        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],staticClass:"btn-container flex w-full"},[e("div",{staticClass:"btn",on:{click:t.close}},[t._v(t._s(t.$t("later")))]),t._v(" "),e("div",{staticClass:"btn generate-btn ai-avatar-btn",on:{click:t.resetAlbum}},[e("i",{staticClass:"iconfont icon-search-magic"}),t._v(" "+t._s(t.$t("Regenerate"))+"\n          ")])])])])])],1)}),[],!1,null,"75bdc5f4",null).exports,O=n(97),x=n(80),k=n(10),I=n(58),j=n(925),S=n(29);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"AIAvatarListDetail",components:{MorePopover:j.a,ViewImage:m.a,AvatarFrame:f.a,SatisfactionDialog:C,HeadTop:h.a,ElSkeleton:d.a,ElSkeletonItem:l.a,commonConfirmModal:O.default},computed:P(P({},Object(v.c)("AIAvatar",["allAlbums"])),{},{isShowed:function(){var t;return this.isShowedList.includes(null===(t=this.info)||void 0===t?void 0:t.task_id)},imgList:function(){var t;return null===(t=this.info)||void 0===t||null===(t=t.components)||void 0===t?void 0:t.map((function(t){return t.url}))}}),data:function(){return{info:{},showSatisfaction:!1,isShowedList:[],fileName:""}},mounted:function(){this.getAlbumInfo(),this.getIsShowed()},methods:P(P({},Object(v.b)("AIAvatar",["saveAllAlbum"])),{},{getAlbumInfo:function(){var t=this,e=this.$route.params.id;if(e){var n=this.allAlbums[e];if(n)return this.info=n,void this.checkIsShowComment();Object(_.g)({task_id:e}).then((function(e){var n;1e4===(null==e||null===(n=e.status)||void 0===n?void 0:n.code)&&(t.info=e.data,t.checkIsShowComment(),t.saveAllAlbum(t.info))}))}else this.$router.push(this.localePath("/ai-headshot-creations"))},viewBigImage:function(t,e){this.fileName="ai-headshot-".concat(Object(I.i)((new Date).getTime(),"yyyyMMddhhmmss")),this.$refs.viewImage.show(t,e.target)},showDialog:function(){this.$refs.satisfactionDialog.show(),this.$logEvent("log_actions",{operation:"satisfaction_popup",behavior_info:"on_ai_profile_album_detail_page"})},checkIsShowComment:function(){var t,e=this,n=null===(t=this.info)||void 0===t?void 0:t.task_id;Object(_.a)({task_id:n}).then((function(t){var n,o;1e4===(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&(e.showSatisfaction=1===(null==t||null===(o=t.data)||void 0===o||null===(o=o.collect)||void 0===o?void 0:o.status));e.initShowDialog()}))},initShowDialog:function(){this.showSatisfaction&&!this.isShowed&&(this.showDialog(),this.saveIsShowed())},saveIsShowed:function(){var t;this.isShowedList.push(null===(t=this.info)||void 0===t?void 0:t.task_id),localStorage.setItem("isFirstShow",JSON.stringify(this.isShowedList))},getIsShowed:function(){try{var t=localStorage.getItem("isFirstShow");t&&(this.isShowedList=JSON.parse(t))}catch(t){return!1}},saveImage:function(t){this.fileName="ai-headshot-".concat(Object(I.i)((new Date).getTime(),"yyyyMMddhhmmss")),Object(k.M)(t.url,this.fileName),this.$logEvent("log_actions",{operation:"click_download",behavior_info:"on_ai_profile_album_detail_page"})},deleteFile:function(t,e){var n=this;this.$refs.commonConfirmModal.show({subTitle:"deleteConfirm",btnStyle:{background:"linear-gradient(81deg, #387cda 0%, #1dd5d6 100%)"}}).then((function(){var o;if(1!==n.info.components.length){var r={items:[{id:null===(o=n.info)||void 0===o?void 0:o.task_id,index:t}]};Object(x.c)(r).then((function(t){var o;1e4===(null==t||null===(o=t.status)||void 0===o?void 0:o.code)&&(n.info.components.splice(e,1),n.$logEvent("log_actions",{operation:"click_delete",behavior_info:"on_ai_profile_album_detail_page"}))}))}else n.deleteAlbum()}))},deleteAlbum:function(){var t,e=this,n={ids:[null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id]};Object(S.deleteTaskRecord)(n).then((function(t){var n,o;["10000",1e4].includes(null==t||null===(n=t.status)||void 0===n?void 0:n.code)?e.$router.push(e.localePath("/ai-headshot-creations")):e.$message({message:(null==t||null===(o=t.status)||void 0===o?void 0:o.msg)||e.$t("ServerError"),type:"error"})}))}})},D=(n(5493),n(5494),Object(w.a)(T,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"avatar-detail flex flex-col"},[n("HeadTop"),e._v(" "),n("AvatarFrame",[n("div",{staticClass:"content"},[n("div",{staticClass:"album-main w-full"},[n("div",{staticClass:"top flex items-center"},[n("div",{staticClass:"arrow",on:{click:function(t){return e.$router.go(-1)}}},[n("i",{staticClass:"el-icon-arrow-left"}),e._v(" "+e._s(e.$t("Back")))]),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(e.$t("AIAvatarAlbum")))])]),e._v(" "),n("div",{staticClass:"custom-scroll w-full"},[null!==(t=e.info)&&void 0!==t&&null!==(t=t.components)&&void 0!==t&&t.length?n("div",{staticClass:"album-list flex"},e._l(e.info.components,(function(t,o){return n("div",{key:t+o,staticClass:"img-container"},[null!=t&&t.url?n("div",{staticClass:"inner"},[n("el-image",{attrs:{fit:"cover",lazy:!0,alt:"avatar",src:null==t?void 0:t.url,"preview-src-list":e.imgList}}),e._v(" "),n("MorePopover",{attrs:{showSave:!0,showDelete:!0},on:{save:function(n){return e.saveImage(t)},delete:function(n){return e.deleteFile(t.index,o)}}})],1):e._e()])})),0):n("el-skeleton",{attrs:{loading:!0,animated:"",count:4}},[n("template",{slot:"template"},[n("el-skeleton-item",{staticStyle:{width:"160px",height:"210px"},attrs:{variant:"rect"}})],1)],2)],1)])])]),e._v(" "),n("view-image",{ref:"viewImage",attrs:{fileName:e.fileName}}),e._v(" "),e.showSatisfaction?n("div",{directives:[{name:"mytip",rawName:"v-mytip.left",value:e.$t("comfyui_evaluate"),expression:"$t('comfyui_evaluate')",modifiers:{left:!0}}],staticClass:"satisfaction",on:{click:e.showDialog}},[n("i",{staticClass:"iconfont icon-icon-smile-ellipse"})]):e._e(),e._v(" "),n("SatisfactionDialog",{ref:"satisfactionDialog",on:{finish:function(t){e.showSatisfaction=!1}}}),e._v(" "),n("common-confirm-modal",{ref:"commonConfirmModal"})],1)}),[],!1,null,"6c050535",null));e.default=D.exports},5783:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(19),n(32),n(50),n(16),n(73),n(22),n(31),n(4),n(524),n(28),n(43),n(21),n(40),n(44),n(92),n(41),n(1)),c=n(481),d=n(919),v=(n(4997),n(0)),h=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"error-content"},[t._v("\n  \\\n  "),e("img",{attrs:{src:n(1459),alt:""}}),t._v(" "),e("p",[t._v(t._s(t.$t("novelRetry")))]),t._v(" "),e("div",{staticClass:"btn-box",on:{click:function(e){return t.$emit("retry")}}},[e("button",{staticClass:"btn"},[t._v(t._s(t.$t("up_retry")))])])])}),[],!1,null,"5e82b324",null).exports,f=n(45),m=n(162),_=n(63),y=n(206),w=n(5690),C=n(411);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"bookReading",mixins:[f.a],components:{SpinLoading:d.a,ErrorContent:h,CollectPopover:_.default,SelectSoundModel:C.a},watch:{"$route.query":{handler:function(){var t=this.$route.query.cid,e=void 0===t?"":t;this.requestError=!1,this.getText(e)}}},computed:x(x({},Object(l.c)("user",["isLoggedIn"])),{},{infos:function(){return x(x({},this.chapterInfo),{},{id:this.$route.params.id})},showLoading:function(){return!!this.isLoggedIn&&this.mainLoading},isShowLanguage:function(){return this.languageList.includes(this.$i18n.locale)},currentChapter:function(){var t,e,n,o,r=this;if(null===(t=this.chapters)||void 0===t||null===(t=t.items)||void 0===t||!t.length||null===(e=this.chapterInfo)||void 0===e||!e.chapter_id)return{};var l=!1,c=!1,d="",v="";if(null!==(n=this.chapters)&&void 0!==n&&null!==(n=n.items)&&void 0!==n&&n.length&&null!==(o=this.chapterInfo)&&void 0!==o&&o.chapter_id){var h,f,m,_,y,w,C,O,k,I,j=this.chapters.items.findIndex((function(t){return t.chapter_id===r.chapterInfo.chapter_id}));if(0===this.activeSortTab)l=(null===(h=this.chapterInfo)||void 0===h?void 0:h.chapter_id)===(null===(f=this.chapters)||void 0===f||null===(f=f.items[0])||void 0===f?void 0:f.chapter_id),c=(null===(m=this.chapterInfo)||void 0===m?void 0:m.chapter_id)===(null===(_=this.chapters)||void 0===_||null===(_=_.items[(null===(y=this.chapters)||void 0===y||null===(y=y.items)||void 0===y?void 0:y.length)-1])||void 0===_?void 0:_.chapter_id),j>0&&(d=this.chapters.items[j-1].chapter_id),j<this.chapters.items.length-1&&(v=this.chapters.items[j+1].chapter_id);else l=(null===(w=this.chapterInfo)||void 0===w?void 0:w.chapter_id)===(null===(C=this.chapters)||void 0===C||null===(C=C.items[(null===(O=this.chapters)||void 0===O||null===(O=O.items)||void 0===O?void 0:O.length)-1])||void 0===C?void 0:C.chapter_id),c=(null===(k=this.chapterInfo)||void 0===k?void 0:k.chapter_id)===(null===(I=this.chapters)||void 0===I||null===(I=I.items[0])||void 0===I?void 0:I.chapter_id),j>0&&(v=this.chapters.items[j-1].chapter_id),j<this.chapters.items.length-1&&(d=this.chapters.items[j+1].chapter_id)}return x(x({},this.chapterInfo),{},{isFirst:l,isLast:c,prevChapterId:d,nextChapterId:v})}}),data:function(){return{languageList:["zhCN","en","ja"],selectedSounds:[],fixedMargin:16,fontSize:16,mainLoading:!1,menuLoading:!1,chapterInfo:{},menuVisible:!1,chapters:{},activeSortTab:0,bookData:{},requestError:!1,readStartTime:null,audioControls:null,isPlaying:!1,voiceMap:{voice_avatar:"",voice_id:""},isShowBtn:!0,isShowControls:!1,isPaused:!1,isCurrentTextInViewport:!0,characterAvatar:"",playStartIndex:0,initTextNum:200,isLoading:!0,codeList:[80214,70039,80008],isInsufficientPower:!1,currentText:"",listenIconShow:!0,userIsScrolling:!1,autoScrolling:!1,cacheText:[]}},mounted:function(){this.isLoggedIn&&(this.getText(),this.getMenus(),this.getNovelVoiceId(),this.getNovelCharacterAvatar()),this.fontSize=+localStorage.getItem("readBookFontSize")||16,this.readStartTime=new Date,this.getMargin(),window.addEventListener("resize",this.getMargin),window.addEventListener("mousewheel",this.handleMouseWheel)},beforeDestroy:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.body.style.overflow="auto",!t.audioControls){e.next=7;break}return e.next=5,t.audioControls.pause();case 5:t.audioControls.removeAllEventListeners(),t.audioControls=null;case 7:window.removeEventListener("mousewheel",t.handleMouseWheel);case 8:case"end":return e.stop()}}),e)})))()},methods:{handleSelectVoice:function(){this.$logEvent("log_actions",{operation:"click_audio_select",behavior_info:"on_novel_detial_page"}),this.isShowLanguage&&this.$refs.aiChatSoundsSelectModel.openModal()},handleSelectSound:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.selectedSounds=[t.id],e.voiceMap.voice_avatar=t.cover,e.voiceMap.voice_id=t.id,e.$refs.aiChatSoundsSelectModel.visible=!1,n.next=6,Object(c.f)({id:e.$route.params.id,voice_id:t.id});case 6:1e4===n.sent.status.code&&(e.$message.success(e.$t("SetSuccess")),e.audioControls&&(e.audioControls.reset(),e.audioControls=null,e.isPlaying=!1,e.isPaused=!1,e.isLoading=!0,e.clearHighlight(),e.getAudio(e.playStartIndex)));case 8:case"end":return n.stop()}}),n)})))()},handleMouseWheel:function(){var t;this.userIsScrolling=!0;var e=null===(t=this.$refs.articleContent)||void 0===t?void 0:t.querySelector(".highlight-text");this.isCurrentTextInViewport=!!e&&this.isElementInViewport(e),this.isCurrentTextInViewport&&(this.userIsScrolling=!1)},getNovelCharacterAvatar:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.f)({id:null===(n=t.$route)||void 0===n||null===(n=n.query)||void 0===n?void 0:n.character_id});case 2:null!=(r=e.sent)&&null!==(o=r.data)&&void 0!==o&&o.cover.url&&(t.characterAvatar=r.data.cover.url);case 4:case"end":return e.stop()}}),e)})))()},getNovelVoiceId:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.d)({id:null===(n=t.$route)||void 0===n||null===(n=n.params)||void 0===n?void 0:n.id});case 2:null!=(r=e.sent)&&null!==(o=r.data)&&void 0!==o&&o.voice_id&&(t.voiceMap.voice_id=r.data.voice_id,t.voiceMap.voice_avatar=r.data.voice_avatar,t.selectedSounds.push(r.data.voice_id));case 4:case"end":return e.stop()}}),e)})))()},toCharacter:function(){var t;this.$logEvent("log_actions",{operation:"click_agent",behavior_info:"on_tarven_detail_page"}),this.isPlaying&&(this.audioControls.reset(),this.isPlaying=!1,this.isPaused=!1,this.isShowControls=!1,this.listenIconShow=!0,this.audioControls=null),this.$router.push(this.localePath("/aiChat/".concat(null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.character_id)))},splitTextByBoundary:function(text){var t=[],e=new RegExp("[\\s\\S]{1,".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,"}(?=\\b|$)"),"g");return text.replace(e,(function(e){return t.push(e.trim()),""})),t},translateHttp:function(t){var e=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:"en",o.prev=1,"zhCN"===(l=r)&&(l="zh-cn"),"zhTW"===l&&(l="zh-tw"),c=n.splitTextByBoundary(t,400),d=c.map((function(t){return Object(m.a)(t,{to:l}).then((function(t){return t.text}))})),o.next=10,Promise.all(d);case 10:return v=o.sent,o.abrupt("return",v.join(""));case 14:throw o.prev=14,o.t0=o.catch(1),new Error(o.t0);case 17:case"end":return o.stop()}}),o,null,[[1,14]])})))()},escapeHtml:function(text){var div=document.createElement("div");return div.textContent=text,div.innerHTML},scrollToHighlight:function(){var element=this.$refs.articleContent.querySelector(".highlight-text");if(element){this.autoScrolling=!0;var t=element.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:t-50,behavior:"smooth"}),this.autoScrolling=!1}},handleTextHighlight:function(t,e){var n=this,o=this.$refs.articleContent;if(o&&t){var r=o.querySelector(".highlight-text");if(!r||r.textContent!==t)try{r&&(r.outerHTML=r.textContent);var html=o.innerHTML,l=o.textContent.indexOf(t,e);if(-1===l)return void console.warn("Target text not found:",t);for(var c=0,d=0;d<l&&c<html.length;){if("<"===html[c]){var v=html.indexOf(">",c);if(-1!==v){c=v+1;continue}}d++,c++}var h=html.slice(0,c),f=html.slice(c);o.innerHTML="".concat(h,'<span class="highlight-text">').concat(t,"</span>").concat(f.slice(t.length)),this.$nextTick((function(){var t=n.$refs.articleContent.querySelector(".highlight-text");n.isCurrentTextInViewport=!!t&&n.isElementInViewport(t)})),this.userIsScrolling||this.scrollToHighlight()}catch(t){console.error("Highlight error:",t),this.clearHighlight()}}},clearHighlight:function(){var t=this.$refs.articleContent;if(t){var text=t.textContent;t.innerHTML=this.escapeHtml(text)}},getPlayText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.$refs.articleContent;if(e){var text=e.textContent.trim();return this.playStartIndex=t>0?t:this.getVisibleText(),text.slice(this.playStartIndex,this.playStartIndex+this.initTextNum)}return console.warn("Article content element not found"),null},isElementInViewport:function(element){if(!element)return!1;var rect=element.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight;return rect.top>=0&&rect.top<=t||rect.bottom>=0&&rect.bottom<=t||rect.top<=0&&rect.bottom>=t},getVisibleText:function(){var t=this.$refs.articleContent;if(!t)return 0;var rect=t.getBoundingClientRect(),text=t.textContent,e=parseInt(window.getComputedStyle(t).lineHeight),n=Math.floor(text.length/(t.offsetHeight/e)),o=window.pageYOffset||document.documentElement.scrollTop,r=rect.top+o,l=Math.max(0,o-r),c=Math.floor(l/e);return Math.max(0,c*n)},getAudio:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,text,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:0,e.$logEvent("log_actions",{operation:"click_listen_to_novel",behavior_info:"on_literature_note_voice",behavior_info_sub:e.voiceMap.voice_id}),e.listenIconShow=!1,text=e.getPlayText(o)){n.next=6;break}return n.abrupt("return");case 6:return r=e.voiceMap.voice_id,n.next=9,Object(c.c)({text:text,timbre_id:r,scene:"ebook"});case 9:if(1e4!==(l=n.sent).status.code){n.next=24;break}return e.isInsufficientPower=!1,e.cacheText.push({url:l.data.url,text:text,index:e.playStartIndex}),e.audioControls=new w.a,e.audioControls.connect(l.data.url),n.next=17,e.audioControls.play();case 17:e.audioControls.addEventListener("sseComplete",(function(){e.playStartIndex+=e.initTextNum,e.playNextSegment()})),e.audioControls.addEventListener("playbackStart",(function(){e.isLoading=!1,e.isPlaying=!0,e.isPaused=!1})),e.audioControls.addEventListener("playbackComplete",(function(){e.isPlaying=!1,e.isPaused=!1,e.isShowControls=!1,e.listenIconShow=!0,e.audioControls=null,e.playStartIndex=0,e.isLoading=!0,e.clearHighlight()})),e.audioControls.addEventListener("currentText",(function(t){if(e.isInsufficientPower)e.handleInsufficientPower();else{var n=t.detail.urlId,o=e.cacheText.find((function(t){return t.url.includes(n)}));o&&e.handleTextHighlight(o.text,o.index)}})),e.isShowControls=!0,n.next=25;break;case 24:e.codeList.includes(l.status.code)?(e.handleInsufficientPower(),e.isInsufficientPower=!0):(e.playStartIndex+=e.initTextNum,e.getAudio(e.playStartIndex));case 25:case"end":return n.stop()}}),n)})))()},playNextSegment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,text,o,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isInsufficientPower){e.next=2;break}return e.abrupt("return");case 2:if(n=t.$refs.articleContent){e.next=6;break}return console.warn("Article content element not found"),e.abrupt("return",null);case 6:if(text=n.textContent,!(t.playStartIndex>=text.length)){e.next=9;break}return e.abrupt("return");case 9:if(o=text.slice(t.playStartIndex,t.playStartIndex+t.initTextNum),r=t.voiceMap.voice_id,o){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,Object(c.c)({text:o,timbre_id:r,scene:"ebook"});case 16:1e4===(l=e.sent).status.code?(t.isInsufficientPower=!1,t.cacheText.push({url:l.data.url,text:o,index:t.playStartIndex}),t.audioControls.connect(l.data.url)):t.codeList.includes(l.status.code)?(t.handleInsufficientPower(),t.isInsufficientPower=!0):(t.playStartIndex+=t.initTextNum,t.getAudio(t.playStartIndex)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),console.error("Failed to get audio:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[13,20]])})))()},handleInsufficientPower:function(){this.isPlaying=!1,this.isPaused=!1,this.audioControls&&(this.audioControls.reset(),this.audioControls=null),this.audioControls=null,this.isLoading=!0,this.listenIconShow=!0,this.isShowControls=!1},handleAudioControl:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audioControls&&!t.isLoading){e.next=2;break}return e.abrupt("return");case 2:if(!t.isPlaying){e.next=10;break}return e.next=5,t.audioControls.pause();case 5:t.isPaused=!0,t.isPlaying=!1,t.$logEvent("log_actions",{operation:"click_stop",behavior_info:"on_literature_note_voice",behavior_info_sub:t.voiceMap.voice_id}),e.next=14;break;case 10:return e.next=12,t.audioControls.play();case 12:t.isPaused=!1,t.isPlaying=!0;case 14:case"end":return e.stop()}}),e)})))()},handleCloseAudioControl:function(){this.clearHighlight(),this.$logEvent("log_actions",{operation:"click_exit_listen",behavior_info:"on_literature_note_voice",behavior_info_sub:this.voiceMap.voice_id}),this.audioControls&&this.audioControls.reset(),this.audioControls=null,this.isPlaying=!1,this.isPaused=!1,this.isShowControls=!1,this.playStartIndex=0,this.isLoading=!0,this.listenIconShow=!0},handleCurrentPageStart:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheText=[],t.playStartIndex=t.getVisibleText(),!t.audioControls){e.next=6;break}return e.next=5,t.audioControls.reset();case 5:t.audioControls=null;case 6:t.isPlaying=!1,t.isPaused=!1,t.isShowControls=!1,t.isLoading=!0,t.getAudio();case 11:case"end":return e.stop()}}),e)})))()},handleRetry:function(){this.requestError=!1,this.getText()},getText:function(){var t,e,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.mainLoading){var l=r||(null===(t=this.$route.query)||void 0===t?void 0:t.cid)||"0",d=(null===(e=this.$route)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.id)||"";this.mainLoading=!0,this.requestError=!1;var v={};v="ai_novel"===this.$route.query.from||"novel_page"===this.$route.query.from?{chapter_id:l,id:d}:{chapter_index:+l,id:d},Object(c.a)(v).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e){var o,text,r,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.chapterInfo=(null==e?void 0:e.data)||{},!e.data.url){t.next=13;break}return t.next=4,fetch(e.data.url);case 4:if((o=t.sent).ok){t.next=7;break}throw new Error("获取章节内容失败: ".concat(o.statusText));case 7:return t.next=9,o.text();case 9:return text=t.sent,n.chapterInfo.paragraph=text,n.mainLoading=!1,t.abrupt("return");case 13:if(!e.data.default_url){t.next=36;break}return t.next=16,fetch(e.data.default_url);case 16:if((r=t.sent).ok){t.next=19;break}throw new Error("获取章节内容失败: ".concat(r.statusText));case 19:return t.next=21,r.text();case 21:return l=t.sent,t.prev=22,t.next=25,n.translateHttp(l,n.$i18n.locale);case 25:return d=t.sent,n.chapterInfo.paragraph=d,n.mainLoading=!1,t.next=30,Object(c.e)({chapter_id:n.chapterInfo.chapter_id,content:d,lang:n.$i18n.locale});case 30:t.next=36;break;case 32:t.prev=32,t.t0=t.catch(22),n.chapterInfo.paragraph=l,n.mainLoading=!1;case 36:case"end":return t.stop()}}),t,null,[[22,32]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(){n.mainLoading=!1,n.requestError=!0})).finally((function(){n.mainLoading=!1}))}},forceTranslate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,d,v,text;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isError=!1,t.mainLoading=!0,r=(null===(n=t.$route.query)||void 0===n?void 0:n.cid)||"0",l=(null===(o=t.$route)||void 0===o||null===(o=o.params)||void 0===o?void 0:o.id)||"",e.next=7,Object(c.a)({id:l,chapter_id:r,force_translate:!0});case 7:if(null!=(d=e.sent)&&d.data){e.next=10;break}throw new Error("获取章节详情失败");case 10:if(t.chapterInfo=d.data,!d.data.url&&!d.data.default_url){e.next=22;break}return e.next=14,fetch(d.data.url?d.data.url:d.data.default_url);case 14:if((v=e.sent).ok){e.next=17;break}throw new Error("获取章节内容失败: ".concat(v.statusText));case 17:return e.next=19,v.text();case 19:text=e.sent,t.chapterInfo.paragraph=text,t.requestError=!1;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),t.isError=!0;case 27:return e.prev=27,t.mainLoading=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,24,27,30]])})))()},getMenus:function(){var t,e,n=this,o=(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"";if(o&&(null===(e=this.chapters)||void 0===e||null===(e=e.items)||void 0===e||!e.length)){this.menuLoading=!0;var r={};r="ai_novel"===this.$route.query.from||"novel_page"===this.$route.query.from?{id:o,scene:2}:{id:o},Object(c.b)(r).then((function(t){n.chapters=(null==t?void 0:t.data)||{},n.menuLoading=!1}))}},backTo:function(){var t=this,e=(Date.now()-this.readStartTime)/1e3,n=this.setCollectData(this.infos).includes("collect_selected");if(e>=30&&!n)return this.$logEvent("log_actions",{operation:"novel_collect_popup",behavior_info:"on_novel_reading_detail_page"}),void this.$confirm('<span style="color: #fff;"><i class="iconfont icon-shoucang"></i>'.concat(this.$t("collect_confirm"),"？</span>"),this.$t("Tip"),{confirmButtonText:this.$t("collect_confirm_title"),cancelButtonText:this.$t("collect_confirm_cancel"),distinguishCancelAndClose:!0,dangerouslyUseHTMLString:!0,customClass:"collect-confirm-dialog"}).then((function(){t.handleCollect(),t.$logEvent("log_actions",{operation:"click_comfirm",behavior_info:"on_novel_reading_detail_page",behavior_info_sub:"novel_collect_popup"})})).catch((function(e){"cancel"===e?(t.goBack(),t.$logEvent("log_actions",{operation:"click_cancel",behavior_info:"on_novel_reading_detail_page",behavior_info_sub:"novel_collect_popup"})):t.$logEvent("log_actions",{operation:"click_close",behavior_info:"on_novel_reading_detail_page",behavior_info_sub:"novel_collect_popup"})}));this.goBack()},goBack:function(){"ai_novel"!==this.$route.query.from?"novel_page"!==this.$route.query.from?history.length>1?this.$router.back():this.$router.push(this.localePath("/")):this.$router.push(this.localePath("/novel")):this.$router.replace(this.localePath("/novel/detail/".concat(this.$route.params.id,"?from=bookReading")))},toVideoPage:function(){this.$router.push(this.localePath("/ai-video"))},videoLogin:function(){var t=this;this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.getText()}})},getMargin:function(){var t,e=null===(t=window)||void 0===t?void 0:t.innerWidth,n=document.querySelector(".reading-main").offsetWidth;e<1100||e&&n&&(this.fixedMargin=(e-n)/2-76)},toggleMenu:function(){var t=this;this.isLoggedIn?(this.getMenus(),this.menuVisible=!this.menuVisible):this.$EventBus.$emit("openLoginDialog",{callBack:function(){t.getMenus()}})},fontSizeChange:function(t){t&&localStorage.setItem("readBookFontSize",t)},sortMenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.activeSortTab!==t&&(this.activeSortTab=t,this.chapters.items=this.chapters.items.reverse())},toChapter:function(){var t,e,n,o,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(this.menuVisible=!1,this.requestError=!1,l)?e=l:e=r?null===(n=this.currentChapter)||void 0===n?void 0:n.nextChapterId:null===(o=this.currentChapter)||void 0===o?void 0:o.prevChapterId;var c=(null===(t=this.$route)||void 0===t||null===(t=t.params)||void 0===t?void 0:t.id)||"";e&&c&&(this.$route.query.from?this.$router.push(this.localePath("/book/reading/".concat(c,"?cid=").concat(e,"&from=").concat(this.$route.query.from))):this.$router.push(this.localePath("/book/reading/".concat(c,"?cid=").concat(e))),this.handleCloseAudioControl())},saveBook:function(t){t&&(this.bookData.hasOwnProperty(t)||(this.bookData[t]=this.chapterInfo))},setBodyScroll:function(t){document.body.style.overflow=t?"auto":"hidden"},handleCollect:function(){this.setCollectData(this.infos).includes("collect_selected")?(this.$refs.collectPopover.visible=!1,this.setCollect(this.infos,"ai_novel")):this.$refs.collectPopover.visible=!0}}},I=k,j=(n(5001),n(5002),Object(v.a)(I,(function(){var t,e,o,r,l,c,d,v,h,f,m,_,y,w,C,O=this,x=O._self._c;return x("div",{staticClass:"book-reading"},[x("a",{staticClass:"logo flex-center",attrs:{href:"/ai-video"},on:{click:function(t){return t.preventDefault(),O.toVideoPage.apply(null,arguments)}}},[x("img",{attrs:{src:n(275),alt:""}}),O._v(" "),x("p",[O._v(O._s(O.$t("SeaArt")))])]),O._v(" "),x("div",{staticClass:"reading-back",on:{click:O.backTo}},[x("i",{staticClass:"el-icon-back"})]),O._v(" "),x("div",{staticClass:"reading-main"},[x("div",{staticClass:"content w-full flex justify-center items-center",class:{"items-start":(null===(t=O.chapterInfo)||void 0===t?void 0:t.paragraph)&&!O.showLoading}},[x("div",{directives:[{name:"show",rawName:"v-show",value:!O.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"not-login flex flex-col justify-center items-center"},[x("span",{staticClass:"text"},[O._v(O._s(O.$t("loginToView")))]),O._v(" "),x("span",{staticClass:"btn flex items-center",on:{click:O.videoLogin}},[O._v(O._s(O.$t("loginNow")))])]),O._v(" "),O.requestError?x("ErrorContent",{on:{retry:O.handleRetry}}):[x("div",{directives:[{name:"show",rawName:"v-show",value:O.showLoading,expression:"showLoading"}],staticClass:"loading-part flex flex-col items-center"},[x("SpinLoading"),O._v(" "),x("div",{staticClass:"waiting"},[O._v(O._s(O.$t("ChapterLoading")))])],1),O._v(" "),null!==(e=O.chapterInfo)&&void 0!==e&&e.paragraph&&!O.showLoading?x("div",{staticClass:"chapter-info"},[x("article",{staticClass:"article-content",style:{fontSize:O.fontSize+"px"}},[x("div",{staticClass:"title"},[x("h1",[O._v("\n                "+O._s((null===(o=O.chapterInfo)||void 0===o?void 0:o.title)||"")+"\n              ")])]),O._v(" "),x("p",{ref:"articleContent",staticClass:"paragraph"},[O._v(O._s(O.chapterInfo.paragraph||""))]),O._v(" "),!O.isPlaying&&!O.isPaused||O.isCurrentTextInViewport?O._e():x("div",{staticClass:"start-page",on:{click:O.handleCurrentPageStart}},[x("span",[O._v(O._s(O.$t("StartFromCurrentPage")))])])])]):O._e()],O._v(" "),x("div",{staticClass:"fixed-paragraph-settings flex flex-col",style:{marginRight:O.fixedMargin+"px"}},[x("div",{staticClass:"collect",on:{click:O.handleCollect}},[x("CollectPopover",{ref:"collectPopover",attrs:{triggerMode:"click",hideBtn:!0,folder:O.infos,type:"ai_novel"}},[x("div",{staticClass:"right-btn"},[x("i",{staticClass:"iconfont",class:O.setCollectData(O.infos)}),O._v(" "),x("span",{staticClass:"name"},[O._v(O._s(O.$t("Collect")))])])])],1),O._v(" "),x("el-popover",{directives:[{name:"click-outside",rawName:"v-click-outside",value:O.menuVisible?O.toggleMenu:null,expression:"menuVisible ? toggleMenu : null"}],attrs:{placement:"left","popper-class":"menu-popover reading-popover","append-to-body":!1,"visible-arrow":!1,trigger:"manual"},on:{show:function(t){return O.setBodyScroll(!1)},hide:function(t){return O.setBodyScroll(!0)}},model:{value:O.menuVisible,callback:function(t){O.menuVisible=t},expression:"menuVisible"}},[x("div",{staticClass:"menu-content flex flex-col"},[x("div",{staticClass:"top-image flex"},[null!==(r=O.chapters)&&void 0!==r&&null!==(r=r.cover)&&void 0!==r&&r.url?x("img",{directives:[{name:"webp",rawName:"v-webp",value:O.$imgL,expression:"$imgL"}],attrs:{src:null===(l=O.chapters)||void 0===l||null===(l=l.cover)||void 0===l?void 0:l.url,alt:"book-cover",width:"96",height:"72"}}):O._e(),O._v(" "),x("div",{staticClass:"info flex flex-col justify-center"},[x("h4",[O._v(O._s((null===(c=O.chapters)||void 0===c?void 0:c.title)||""))]),O._v(" "),x("p",[O._v(O._s((null===(d=O.chapters)||void 0===d?void 0:d.author_name)||""))])])]),O._v(" "),x("div",{staticClass:"chapter-sort flex w-full justify-between items-center"},[x("div",{staticClass:"menu-text"},[O._v("\n                "+O._s(O.$t("catalogue"))+" ("+O._s(O.$t("ChapterTotal",{num:null===(v=O.chapters)||void 0===v||null===(v=v.items)||void 0===v?void 0:v.length}))+")\n              ")]),O._v(" "),x("div",{staticClass:"btn-content flex justify-between items-center"},[x("button",{staticClass:"switch-btn",class:{active:0===O.activeSortTab},on:{click:function(t){return O.sortMenu(0)}}},[O._v("\n                  "+O._s(O.$t("sortAB"))+"\n                ")]),O._v(" "),x("button",{staticClass:"switch-btn",class:{active:1===O.activeSortTab},on:{click:function(t){return O.sortMenu(1)}}},[O._v("\n                  "+O._s(O.$t("sortBA"))+"\n                ")])])]),O._v(" "),x("div",{staticClass:"data-count"},[x("span",{staticClass:"data-item-title"},[O._v(O._s(O.$t("bookMain")))]),O._v(" "),x("span",{staticClass:"data-item-value"},[O._v(O._s(O.$t("bookTotal",{number:null===(h=O.chapters)||void 0===h||null===(h=h.items)||void 0===h?void 0:h.length})))]),O._v(" "),x("span",{staticClass:"data-item-value"},[O._v(O._s(O.$t("bookTotalWord",{number:(null===(f=O.chapters)||void 0===f?void 0:f.word_count)||0})))])]),O._v(" "),null!==(m=O.chapters)&&void 0!==m&&null!==(m=m.items)&&void 0!==m&&m.length?x("div",{staticClass:"menu-list flex flex-col"},O._l(O.chapters.items,(function(menu,t){var e;return x("div",{key:menu.chapter_id+t,staticClass:"menu-item",class:{activeMenu:(null==menu?void 0:menu.chapter_id)===(null===(e=O.currentChapter)||void 0===e?void 0:e.chapter_id)},on:{click:function(t){return O.toChapter(!1,menu.chapter_id)}}},[x("span",{staticClass:"name"},[O._v(O._s(menu.title))])])})),0):O._e()]),O._v(" "),x("div",{staticClass:"menu right-btn",attrs:{slot:"reference"},on:{click:O.toggleMenu},slot:"reference"},[x("i",{staticClass:"iconfont icon-a-Button-liebiao"}),O._v(" "),x("span",{staticClass:"name"},[O._v(O._s(O.$t("catalogue")))])])]),O._v(" "),x("el-popover",{attrs:{placement:"left","popper-class":"fontsize-popover reading-popover flex items-center","append-to-body":!1,"visible-arrow":!1,trigger:"click"}},[x("div",{staticClass:"font-size-adjust w-full flex"},[x("el-slider",{staticClass:"w-full flex items-center",attrs:{min:16,max:32,"show-stops":!1,step:2},on:{change:O.fontSizeChange},model:{value:O.fontSize,callback:function(t){O.fontSize=t},expression:"fontSize"}})],1),O._v(" "),x("template",{slot:"reference"},[x("div",{staticClass:"font-size right-btn"},[x("i",{staticClass:"iconfont icon-a-Button-daxie"}),O._v(" "),x("span",{staticClass:"name"},[O._v(O._s(O.$t("fontSize")))])]),O._v(" "),O.isShowLanguage&&O.isLoggedIn?x("div",{staticClass:"controls"},[O.characterAvatar?x("div",{staticClass:"controls-item"},[x("img",{attrs:{src:O.characterAvatar,alt:O.$t("Agent")},on:{click:O.toCharacter}}),O._v(" "),x("span",[O._v(O._s(O.$t("Agent")))])]):O._e(),O._v(" "),O.isPaused||O.isPlaying?x("div",{staticClass:"controls-item controls-item-close",on:{click:O.handleCloseAudioControl}},[x("div",{staticClass:"icon"},[x("span",{staticClass:"icon-close-audio"})]),O._v(" "),x("span",[O._v(O._s(O.$t("gpt_stop")))])]):O._e(),O._v(" "),O.listenIconShow?x("div",{staticClass:"controls-item",on:{click:O.getAudio}},[x("i",{staticClass:"iconfont icon-icon-listen"}),O._v(" "),x("span",[O._v(O._s(O.$t("Read")))])]):O._e(),O._v(" "),O.isShowControls?x("div",{staticClass:"controls-item controls-item-voice"},[x("div",{staticClass:"voice-avatar",class:{"is-playing":O.isPlaying},on:{click:O.handleSelectVoice}},[x("img",{attrs:{src:O.voiceMap.voice_avatar,alt:""}})]),O._v(" "),x("div",{staticClass:"icon",class:{await:O.isLoading},on:{click:O.handleAudioControl}},[x("i",{staticClass:"iconfont",class:{"icon-zanting1":!O.isPlaying,"icon-bofangz":O.isPlaying}})])]):O._e()]):O._e()])],2)],1)],2),O._v(" "),x("div",{directives:[{name:"show",rawName:"v-show",value:O.isLoggedIn,expression:"isLoggedIn"}],staticClass:"btns"},[null!==(_=O.currentChapter)&&void 0!==_&&_.prevChapterId?x("div",{staticClass:"preview-chapter-btn btn",on:{click:function(t){return O.toChapter(!1)}}},[O._v("\n        "+O._s(O.$t("prevChapter"))+"\n      ")]):O._e(),O._v(" "),null!==(y=O.currentChapter)&&void 0!==y&&y.prevChapterId&&null!==(w=O.currentChapter)&&void 0!==w&&w.nextChapterId?x("span",{staticClass:"divider"}):O._e(),O._v(" "),null!==(C=O.currentChapter)&&void 0!==C&&C.nextChapterId?x("div",{staticClass:"next-chapter-btn btn",on:{click:function(t){return O.toChapter(!0)}}},[O._v("\n        "+O._s(O.$t("nextChapter"))+"\n      ")]):O._e()]),O._v(" "),x("SelectSoundModel",{ref:"aiChatSoundsSelectModel",attrs:{selectList:O.selectedSounds},on:{selectModel:O.handleSelectSound}})],1)])}),[],!1,null,"71d7dcd5",null));e.default=j.exports;installComponents(j,{CollectPopover:n(63).default})},5784:function(t,e,n){"use strict";n.r(e);n(31),n(18),n(19),n(4),n(7);var o=n(184),r=n(171),l=n(10),c=n(904),d={name:"ComfyUIList",data:function(){return{queryParam:{page:1,page_size:60,order_by:"hot",tag:"",nodes_type:[],run_available:0,offset:0,comfy_ui_type:1},loading:!1,noMore:!1,filterShow:!1,fliterLoading:!1,list:[],appList:[],tagList:[],nodeList:[],intNodeList:[],tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}],timeName:"All",timeTypeOption:[{name:"All",startTime:null,endTime:null},{name:"days",startTime:Object(l.B)().startTimestamp,endTime:Object(l.B)().endTimestamp},{name:"week",startTime:Object(l.C)().startTimestamp,endTime:Object(l.C)().endTimestamp},{name:"months",startTime:Object(l.A)().startTimestamp,endTime:Object(l.A)().endTimestamp}]}},components:{homeList:r.a,comfyTagList:c.a},computed:{checkRun:{get:function(){return 1===this.queryParam.run_available},set:function(t){this.queryParam.run_available=t?1:0}}},watch:{checkRun:{handler:function(t){t&&this.$logEvent("log_actions",{operation:"click_checkbox",behavior_info:"on_comfyui_landing_page"})}}},created:function(){this.getAppList(),this.getList(),this.getConfit()},methods:{goMore:function(){this.$router.push(this.localePath("/comfyUIappList")),this.$logEvent("log_actions",{operation:"click_more",behavior_info:"on_comfyui_waterfall_flow_app"})},nodeListChange:function(t){this.$logEvent("log_actions",{operation:"click_node_on",behavior_info:"on_comfyui_landing_page",behavior_info_sub:t}),this.intList()},openWork:function(){this.$logEvent("log_actions",{operation:"create_comfyui",behavior_info:"on_comfyui_landing_page"}),this.$router.push(this.localePath("/workflow"))},tagChange:function(t){this.queryParam.tag==t.value?this.queryParam.tag="":(this.queryParam.tag=t.value,this.$logEvent("log_actions",{operation:"click_workflow_tag",behavior_info:"on_comfyui_landing_page",behavior_info_sub:t})),this.intList()},remoteMethod:function(t){var e=this;t?(this.fliterLoading=!0,Object(o.e)({keyword:t}).then((function(t){1e4!==!t.status.code&&(e.nodeList=t.data.nodes)})).finally((function(){e.fliterLoading=!1}))):this.nodeList=this.intNodeList},handleCommand:function(t){this.tagIndex=t,this.queryParam.order_by=this.tagIndex,this.$logEvent("log_actions",{operation:"click_"+this.tagIndex,behavior_info:"on_comfyui_landing_page"}),this.intList()},handleTimeCommand:function(t){this.timeName=t.name,this.queryParam.time_from=t.startTime,this.queryParam.time_to=t.endTime,this.intList()},setIcon:function(){var t=this,e="homeIcon1";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},intList:function(){this.queryParam.page=1,this.queryParam.offset=0,this.loading=!1,this.noMore=!1,this.list=[],this.getList()},getList:function(){var t=this;this.loading||this.noMore||(this.loading=!0,Object(o.d)(this.queryParam).then((function(e){var n,o,r;if(1e4!==!e.status.code){var l;if(t.noMore=!(null!==(n=e.data)&&void 0!==n&&n.has_more),t.list=t.list.concat((null===(o=e.data)||void 0===o?void 0:o.items)||[]),1===t.queryParam.page&&null!==(r=e.data)&&void 0!==r&&r.offset)t.queryParam.offset=null===(l=e.data)||void 0===l?void 0:l.offset;t.queryParam.page++}})).finally((function(){t.loading=!1})))},getAppList:function(){var t=this;Object(o.d)({comfy_ui_type:2,page_size:5}).then((function(e){var n;1e4!==!e.status.code&&(t.appList=(null===(n=e.data)||void 0===n?void 0:n.items)||[],t.queryParam.page++)}))},getConfit:function(){var t=this;this.fliterLoading||(this.fliterLoading=!0,Object(o.b)().then((function(e){1e4!==!e.status.code&&(t.tagList=e.data.categories,t.nodeList=e.data.nodes,t.intNodeList=e.data.nodes)})).finally((function(){t.fliterLoading=!1})))},onFilterReset:function(){this.queryParam.tag="",this.queryParam.nodes_type=[],this.queryParam.run_available=0,this.intList()}}},v=(n(4699),n(4700),n(0)),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ComfyUI_list"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("WorkFlow")))])]),t._v(" "),e("div",{staticClass:"funBox"},[e("div",{staticClass:"funItem"},[e("div",{staticClass:"bnt graBorder",on:{click:t.openWork}},[e("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),e("span",[t._v(t._s(t.$t("comfyUIList1")))])]),t._v(" "),e("div",{staticClass:"tip",domProps:{innerHTML:t._s(t.$t("comfyUIList2"))}})]),t._v(" "),e("div",{staticClass:"funItem"},[e("el-popover",{attrs:{placement:"bottom","popper-class":"comfyFilter",trigger:"click"},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[e("div",{staticClass:"filterCnt"},[e("el-checkbox",{on:{change:t.intList},model:{value:t.checkRun,callback:function(e){t.checkRun=e},expression:"checkRun"}},[t._v(t._s(t.$t("comfyFilter1")))]),t._v(" "),e("div",{staticClass:"filterTit"},[t._v(t._s(t.$t("comfyFilter3")))]),t._v(" "),e("el-select",{staticClass:"filterSelect",attrs:{"popper-class":"custom-select comfyFilter",filterable:"",remote:"",multiple:"",placeholder:t.$t("Pls_select"),"popper-append-to-body":!1,"remote-method":t.remoteMethod,loading:t.fliterLoading},on:{change:t.nodeListChange},model:{value:t.queryParam.nodes_type,callback:function(e){t.$set(t.queryParam,"nodes_type",e)},expression:"queryParam.nodes_type"}},t._l(t.nodeList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1),t._v(" "),e("div",{staticClass:"filterReset graBorder",on:{click:t.onFilterReset}},[t._v("\n            "+t._s(t.$t("resetSelection"))+"\n          ")])],1),t._v(" "),e("div",{staticClass:"filterBox",attrs:{slot:"reference"},slot:"reference"},[e("div",[e("i",{staticClass:"iconfont icon-a-filterIcon"}),t._v(" "),e("span",[t._v(t._s(t.$t("Filter")))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})])]),t._v(" "),e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTimeCommand}},[e("div",{staticClass:"el-dropdown-link selectTime"},[e("div",[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",[t._v(t._s(t.$t(t.timeName)))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.timeTypeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n}},[e("div",{staticClass:"el-dropdown-item el-dropdown-item-time"},[e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},[e("div",[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(n.icon)}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)]),t._v(" "),e("comfyTagList",{attrs:{renderList:t.tagList},on:{changeTags:t.tagChange}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"wraper",staticClass:"workList"},[e("homeList",{attrs:{list:t.list,container:"wraper",cols:5},on:{load:t.getList}})],1)],1)}),[],!1,null,"20f57e72",null);e.default=component.exports},5785:function(t,e,n){"use strict";n.r(e);n(31),n(18),n(19),n(4),n(7);var o=n(184),r=n(171),l=n(904),c=n(10),d={data:function(){return{queryParam:{page:1,page_size:60,order_by:"hot",tag:"",nodes_type:[],run_available:0,comfy_ui_type:2,offset:0},loading:!1,noMore:!1,list:[],tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}],tagList:[],timeName:"All",timeTypeOption:[{name:"All",startTime:null,endTime:null},{name:"days",startTime:Object(c.B)().startTimestamp,endTime:Object(c.B)().endTimestamp},{name:"week",startTime:Object(c.C)().startTimestamp,endTime:Object(c.C)().endTimestamp},{name:"months",startTime:Object(c.A)().startTimestamp,endTime:Object(c.A)().endTimestamp}]}},components:{homeList:r.a,comfyTagList:l.a},mounted:function(){this.getList(),this.getConfit()},methods:{handleTimeCommand:function(t){this.timeName=t.name,this.queryParam.time_from=t.startTime,this.queryParam.time_to=t.endTime,this.intList()},getConfit:function(){var t=this;Object(o.b)().then((function(e){1e4!==!e.status.code&&(t.tagList=e.data.categories,console.log(t.tagList))}))},setIcon:function(){var t=this,e="homeIcon1";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},handleCommand:function(t){this.tagIndex=t,this.queryParam.order_by=this.tagIndex,this.intList()},changeTag:function(t){this.queryParam.tag=t.value,this.intList()},intList:function(){this.queryParam.page=1,this.queryParam.offset=0,this.loading=!1,this.noMore=!1,this.list=[],this.getList()},getList:function(){var t=this;this.loading||this.noMore||(this.loading=!0,Object(o.d)(this.queryParam).then((function(e){var n,o,r;if(1e4!==!e.status.code){var l;if(t.noMore=!(null!==(n=e.data)&&void 0!==n&&n.has_more),t.list=t.list.concat((null===(o=e.data)||void 0===o?void 0:o.items)||[]),1===t.queryParam.page&&null!==(r=e.data)&&void 0!==r&&r.offset)t.queryParam.offset=null===(l=e.data)||void 0===l?void 0:l.offset;t.queryParam.page++}})).finally((function(){t.loading=!1})))},backTo:function(){history.length>2?this.$router.back():this.$router.push(this.localePath("/comfyUIList"))}}},v=(n(4701),n(0)),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"applist"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("div",{staticClass:"mobile-back-to",on:{click:function(e){return e.stopPropagation(),t.backTo.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-back"})]),t._v(" "),e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("featuredApps")))]),t._v(" "),e("div",{staticClass:"filterBox"},[e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleTimeCommand}},[e("div",{staticClass:"el-dropdown-link selectTime"},[e("div",[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",[t._v(t._s(t.$t(t.timeName)))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.timeTypeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n}},[e("div",{staticClass:"el-dropdown-item el-dropdown-item-time"},[e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},[e("div",[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},[e("i",{staticClass:"iconfont custom-iconfont",class:"icon-".concat(n.icon)}),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)]),t._v(" "),e("comfyTagList",{attrs:{renderList:t.tagList},on:{changeTags:t.changeTag}}),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"wraper",staticClass:"workList"},[e("homeList",{attrs:{list:t.list,container:"wraper",cols:5},on:{load:t.getList}})],1)],1)}),[],!1,null,"151e132f",null);e.default=component.exports},5789:function(t,e,n){"use strict";n.r(e);n(18),n(4);var o=n(27),r={name:"SettingsBlacklist",components:{BaseAvatar:n(53).default},data:function(){return{blacklist:[],unblockLoading:!1}},mounted:function(){this.getBlacklist()},methods:{goBack:function(){this.$router.go(-1)},unblockUser:function(t){var e=this;if(!this.unblockLoading){this.unblockLoading=!0;var n=t.account_id;t.ban_id;Object(o.d)({target_act_id:n}).then((function(t){1e4==t.status.code&&(e.$message.success(e.$t("toast_block_undo")),e.getBlacklist())})).finally((function(){e.unblockLoading=!1}))}},getBlacklist:function(){var t=this;Object(o.H)({}).then((function(e){var n;1e4==e.status.code&&(t.blacklist=(null==e||null===(n=e.data)||void 0===n?void 0:n.items)||[],t.$xyLogEvent({front_operation:"exposure",event_name:"blacklist_exposure",entity_type:"class_blacklist-page",obj_info:JSON.stringify(t.blacklist)}))}))},goUserCenter:function(t){this.$router.push(this.localePath("/user/".concat(t)))}}},l=(n(4820),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.unblockLoading,expression:"unblockLoading"}],staticClass:"blacklist-page"},[e("div",{staticClass:"blacklist-header"},[e("i",{staticClass:"el-icon-arrow-left back-btn",on:{click:t.goBack}}),t._v(" "),e("span",{staticClass:"blacklist-title"},[t._v(t._s(t.$t("block_list")))])]),t._v(" "),e("div",{staticClass:"blacklist-list"},t._l(t.blacklist,(function(n){return e("div",{key:n.account_id,staticClass:"blacklist-item"},[e("BaseAvatar",{staticClass:"user-avatar clickable",attrs:{size:44,avatarUrl:n.avatar,userData:n},nativeOn:{click:function(e){return t.goUserCenter(n.account_id)}}}),t._v(" "),e("span",{staticClass:"user-nickname clickable",on:{click:function(e){return t.goUserCenter(n.account_id)}}},[t._v(t._s(n.name))]),t._v(" "),e("div",{staticClass:"unblock-btn",attrs:{"data-event":"blacklist_undo","data-id":n.account_id,"data-desc":"取消拉黑按钮点击","data-info":JSON.stringify(n)},on:{click:function(e){return t.unblockUser(n)}}},[t._v("\n        "+t._s(t.$t("block_undo"))+"\n      ")])],1)})),0)])}),[],!1,null,"10188692",null);e.default=component.exports;installComponents(component,{BaseAvatar:n(53).default})},5794:function(t,e,n){"use strict";n.r(e);var o={name:"Personal",components:{UserInfo:n(572).default}},r=n(0),component=Object(r.a)(o,(function(){return(0,this._self._c)("UserInfo")}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UserInfo:n(572).default})},5796:function(t,e,n){"use strict";n.r(e);var o={name:"JoinGroup",props:{visible:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,wechatShow:!0,qqShow:!0}},mounted:function(){this.initJoinGroupView()},computed:{},watch:{visible:function(t){this.dialogVisible=t}},methods:{initJoinGroupView:function(){var t=this;this.$EventBus.$on("openJoinGroupModal",(function(e){console.log("eventBus openJoinGroupModal"),t.showDialog(e)}))},showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"Wechat"==t?(this.wechatShow=!0,this.qqShow=!1):"QQ"==t?(this.wechatShow=!1,this.qqShow=!0):(this.wechatShow=!0,this.qqShow=!0),this.dialogVisible=!0},handleClose:function(){this.$emit("close-waitting")}}},r=o,l=(n(4949),n(4950),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{"max-width":"512px",visible:t.dialogVisible,"custom-class":"join-group-dialog","close-on-click-modal":!0,"close-on-press-escape":!0,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("加入讨论群")]),t._v(" "),e("div",{staticClass:"main-part"},[e("div",{staticClass:"title"}),t._v(" "),e("div",{staticClass:"info flex w-full items-center justify-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.qqShow,expression:"qqShow"}],staticClass:"qq-part"},[e("img",{attrs:{src:n(5695),alt:"qq"}}),t._v(" "),e("p",[t._v("QQ交流群")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wechatShow,expression:"wechatShow"}],staticClass:"wechat-part"},[e("img",{attrs:{src:n(5696),alt:"wechat"}}),t._v(" "),e("p",[t._v("微信交流群")])])]),t._v(" "),e("div",{staticClass:"note"})])])],1)}),[],!1,null,"0cfd5812",null);e.default=component.exports},5797:function(t,e,n){"use strict";n.r(e);n(8);var o={name:"ArticleDetailPreview",data:function(){return{previewArticleInfo:{}}},mounted:function(){this.getData()},methods:{getData:function(){try{var t=localStorage.getItem("previewArticleData");t?this.previewArticleInfo=JSON.parse(t):this.$message.error(this.$t("no_data"))}catch(t){console.error("获取预览文章数据失败:",t),this.$message.error(this.$t("no_data"))}}},head:function(){return{title:"Article Preview"}}},r=(n(4975),n(0)),component=Object(r.a)(o,(function(){var t,e,n,o,r=this,l=r._self._c;return l("div",{staticClass:"article-detail"},[null!==(t=r.previewArticleInfo)&&void 0!==t&&t.title?l("div",{staticClass:"article-detail-container"},[l("div",{staticClass:"article-detail-container-left"},[l("img",{staticClass:"article-cover",attrs:{src:null===(e=r.previewArticleInfo)||void 0===e||null===(e=e.cover)||void 0===e?void 0:e.uri,alt:"article cover"}}),r._v(" "),l("h1",{staticClass:"article-title"},[r._v(r._s(null===(n=r.previewArticleInfo)||void 0===n?void 0:n.title))]),r._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:null===(o=r.previewArticleInfo)||void 0===o?void 0:o.content,expression:"previewArticleInfo?.content"}],ref:"richText",staticClass:"article-content",domProps:{innerHTML:r._s(r.previewArticleInfo.content)}})])]):r._e()])}),[],!1,null,"4e3c6156",null);e.default=component.exports},5800:function(t,e,n){"use strict";n.r(e);var o={name:"User",components:{UserInfo:n(572).default}},r=n(0),component=Object(r.a)(o,(function(){return(0,this._self._c)("UserInfo")}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UserInfo:n(572).default})},5801:function(t,e,n){"use strict";n.r(e);n(16);var o=n(14),r=n(2),l=(n(19),n(6),n(18),n(4),n(21),n(36)),c=n(56),d=n(27),v=n(201),h=n(606),f=n(45),m=n(574),_=n(171),y={mixins:[f.a],name:"CollectionDetail",components:{WaterFallVue:v.default,SearchInput:h.default,EditTitle:m.default,homeList:_.a},data:function(){return{queryParam:Object(r.a)(Object(r.a)({page:1,page_size:60,type:"bookmarks",folder_no:"default",keyword:"",after:0,start_at:0,end_at:0},"after",0),"artwork_types",[]),list:[],isLoading:!0,isReq:!1,isLock:!1,type:"artwork",checkList:{},isCheck:!1,isTiemRow:!1,filterImgType:[],isFilterNSFW:!1,checkMaxNum:-1,dotReportInfo:{category:"default",view_domain:"personal_center",batch_id:""},thresholdValue:60}},computed:{getAccountNo:function(){var t;return(null===(t=this.$route)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.account_no)||""}},mounted:function(){var t=this;this.type=this.$route.query.type;var e=this.$route.query?"all"==this.$route.query.id?"":this.$route.query.id:"default";this.queryParam.folder_no=e,this.getList(),this.updateThreshold(),new MutationObserver((function(){t.updateThreshold()})).observe(document.body,{childList:!0,subtree:!0})},methods:{setName:function(){return this.$route.query.name?"all"==this.$route.query.name?2==this.$route.query.category?this.$t("AllWorks"):this.$t("Allcollect"):this.$route.query.name:this.$t("boardBoardDetail")},checkAll:function(){this.$refs.WaterFallVue.checkAll()},getChecList:function(t){this.checkList=t},onChangeTitleBar:function(t){this.editSuccess(),this.$refs.WaterFallVue.isCheckAll=!1;var e=t.workType,n=t.searchKeyword,o=t.start_at,r=t.end_at,l=t.order_by,c=t.publish_status;e&&(this.queryParam.artwork_types=e),![void 0,void 0,null].includes(n)&&(this.queryParam.keyword=n),!["",void 0,void 0,null].includes(o)&&(this.queryParam.start_at=o),!["",void 0,void 0,null].includes(r)&&(this.queryParam.end_at=r),l&&(this.queryParam.order_by=l),!["",void 0,void 0,null].includes(c)&&(this.queryParam.publish_status=c),delete this.queryParam.time_to,this.list=[],this.isLock=!1,this.isReq=!1,this.queryParam.after=0,this.queryParam.page=1,this.getList()},editSuccess:function(){if(this.checkList.ids){var t=Object(o.a)(this.checkList.ids);this.$refs.WaterFallVue.clearCheck(t),this.queryParam.page=1}},getList:function(){var t=this;if(!this.isReq&&!this.isLock){this.isReq=!0,this.queryParam.type="bookmarks",delete this.queryParam.source_type,this.$route.query.account_no?this.queryParam.account_no=this.$route.query.account_no:delete this.queryParam.account_no,2==this.$route.query.category?this.queryParam.category=2:this.queryParam.category=1;var e="";"artwork"==this.type?e=this.$route.query.account_no?l.artworkListOther:l.artworkList:"model"==this.type?e=this.$route.query.account_no?c.t:c.s:"post"==this.type?(delete this.queryParam.type,this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),e=d.rb):"palette"==this.type?(this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),e=d.jb):"swtft_app"==this.type||"workflow"==this.type?(this.$route.query.account_no&&(delete this.queryParam.account_no,this.queryParam.act_id=this.$route.query.account_no),this.queryParam.source_type=7,"swtft_app"==this.type&&(this.queryParam.source_type=8),e=d.v):"character"==this.type?(this.queryParam.type=0,e=d.i):"ai_audio"==this.type?(this.queryParam.type=0,e=d.c):"ai_novel"==this.type&&(this.queryParam.source_types=[21],this.queryParam.type=21,e=l.getAiNovelCollect),e(this.queryParam).then((function(e){if(e.data.has_more?t.isLock=!1:t.isLock=!0,t.list=t.list.concat(e.data.items||[]),t.isReq=!1,1===t.queryParam.page&&(t.queryParam.time_to=e.data.time_ms),e.data.items.length>0){var n,o,r=e.data.items[e.data.items.length-1];t.queryParam.after=(null==r||null===(n=r.folder_no)||void 0===n?void 0:n.collect_at)||(null==r||null===(o=r.collect)||void 0===o?void 0:o.collect_at)}t.queryParam.page++,t.isLoading=!1})).catch((function(e){t.isReq=!1,t.isLoading=!1}))}},cancleCollect:function(t){this.list=this.list.filter((function(i){return i.id!==t.id}))},updateThreshold:function(){var t=document.querySelector(".top-banner");this.thresholdValue=t&&"none"!==window.getComputedStyle(t).display?100:60}}},w=(n(4988),n(0)),component=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"CollectionDetail"},[e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})]),t._v(" "),e("EditTitle",{attrs:{title:t.setName(),titleSize:36,checkList:t.checkList,backShow:!0,editShow:!t.$route.query.account_no,listLenth:t.$route.query.account_no?t.list.length:2==t.$route.query.category?t.setPortfolioList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id).length:t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id).length,threshold:t.thresholdValue,account_no:t.getAccountNo,isScreen:2==t.$route.query.category,category:2==t.$route.query.category,showSearch:!0,showFilter:2==t.$route.query.category,type:t.type,collectionDetail:!0},on:{changeCheck:function(e){t.isCheck=e},checkAll:t.checkAll,editSuccess:function(e){return t.editSuccess()},changeTitleBar:t.onChangeTitleBar,changeTiemRow:function(e){return t.isTiemRow=e},ImgTypeChange:function(e){t.filterImgType=e,e.length>0?t.isFilterNSFW=!0:t.isFilterNSFW=!1,e.length>0?t.checkMaxNum=20:t.checkMaxNum=-1}}}),t._v(" "),e("div",{ref:"wraper",staticClass:"wraper"},[["post","palette","swtft_app","workflow","character","ai_audio","ai_novel"].includes(t.type)?e("homeList",{ref:"WaterFallVue",attrs:{list:t.$route.query.account_no?t.list:t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id),container:"wraper",fromPage:"userPage",dotReportInfo:t.dotReportInfo,isTiemRow:t.isTiemRow,isCheck:t.isCheck,type:t.type},on:{load:function(e){return t.getList(!0)},getChecList:t.getChecList,onCancleCollect:t.cancleCollect}}):e("WaterFallVue",{ref:"WaterFallVue",attrs:{type:t.type,cols:7,fromPage:"userPage",category:2==t.$route.query.category,container:"wraper",list:t.$route.query.account_no?t.list:2==t.$route.query.category?t.setPortfolioList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id):t.setCollectList(t.list,"all"==t.$route.query.id?"all":t.$route.query.id),lazy:!0,isCheck:t.isCheck,isTiemRow:t.isTiemRow,filterImgType:t.filterImgType,isFilterNSFW:t.isFilterNSFW,checkMax:t.checkMaxNum,needGridSource:!0,dotReportInfo:t.dotReportInfo},on:{load:t.getList,getChecList:t.getChecList}})],1)],1)}),[],!1,null,"6c78efc7",null);e.default=component.exports;installComponents(component,{EditTitle:n(574).default})},5805:function(t,e,n){"use strict";n.r(e);var o=n(3),r=n(2),l=n(120),c=(n(20),n(11),n(6),n(16),n(22),n(18),n(12),n(13),n(8),n(4),n(21),n(7),n(290)),d=n(250),v=n(95),h=["content"],f=["content"];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={components:{BackIcon:c.default,PageSeo:d.a},name:"fastTools",data:function(){return{activeTool:"",fromPath:"",pageSEO:{tempList:[],title:"",meta_description:"",key_words:""},scrollTop:0}},computed:{showBackTo:function(){var t=this;return!["fastTools","videoGeneration","aiFaceSwap","aiPortrait","aiDance","aiComic","aiFilter","videoEffects"].some((function(e){return t.$route.name.includes(e)}))},isToolsList:function(){var t=this.pageSEO.tempList;return this.$route.name.includes("fastToolsList")||!t.length}},watch:{$route:function(t,e){this.getTempList()}},activated:function(){var t=this;this.$nextTick((function(){window.scrollTo(0,t.scrollTop)}))},deactivated:function(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset},methods:{backTo:function(){this.$router.back()},back:function(){this.fromPath?this.$router.back():this.$router.push(this.localePath("/ai-tools"))},getTempList:function(t){var e=this,n=(t||window.location.pathname).split("/").pop();n&&Object(v.p)({name:n}).then((function(t){var n=t.data||{},o=n.module,title=n.title,r=n.meta_description,c=n.key_words,d={tempList:(null!=o&&o.length?o.map((function(t){var content=t.content;return _(_({},Object(l.a)(t,h)),{},{content:JSON.parse(content)})})):[])||[],title:title,meta_description:r,key_words:c};Object.assign(e.pageSEO,_({},d))}))}},head:function(){var t=this.pageSEO,title=t.title,e=t.meta_description,n=t.key_words;if(!title)return{};title=this.$t(title);var desc=this.$t(e);return{title:title,meta:[{hid:"description",name:"description",content:desc},{hid:"keywords",name:"keywords",content:n=this.$t(n)},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:desc}]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,d,data,v,h,title,m,y,w,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$axios,t.app,t.params,o=t.error,r=t.route,c=r.path.split("/").pop()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,n.$post("/api/v1/fast_ai/detail",{name:c});case 7:return d=e.sent,data=d.data,h=(v=data||{}).module,title=v.title,m=v.meta_description,y=v.key_words,w=null!=h&&h.length?h.map((function(t){var content=t.content;return _(_({},Object(l.a)(t,f)),{},{content:JSON.parse(content)})})):[],C={tempList:w||[],title:title,meta_description:m,key_words:y},e.abrupt("return",{pageSEO:C});case 15:e.prev=15,e.t0=e.catch(4),console.log("快捷AI详情页-> asyncData错误啦：",e.t0),o({statusCode:404,message:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()}},w=y,C=(n(5024),n(0)),component=Object(C.a)(w,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"p-fast-tools"},[n("router-view"),e._v(" "),e.isToolsList?e._e():n("page-seo",{attrs:{tempList:null===(t=e.pageSEO)||void 0===t?void 0:t.tempList}}),e._v(" "),e.showBackTo?n("back-icon",{attrs:{back:e.back}}):e._e()],1)}),[],!1,null,"55c0eb0e",null);e.default=component.exports;installComponents(component,{BackIcon:n(290).default})},5806:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(20),{name:"fastToolsList",components:{cardList:n(587).a},data:function(){return{appList:[],hasOver:!1}},mounted:function(){this.postExposureLogEvent()},methods:{postExposureLogEvent:function(){this.$xyLogEvent({front_operation:"exposure",entity_name:" ai-tools_web_page",entity_type:"ai-tools_web_page_gateway",event_name:"log_action_front",obj_category:"ai-tools-ai-app-page",obj_desc:"快捷AI入口页面-曝光"})}},head:function(){return{title:this.$t("FreeToolsTitle"),meta:[{hid:"description",name:"description",content:this.$t("FreeToolsDesc")},{hid:"keywords",name:"keywords",content:this.$t("FreeToolsKeyword")},{hid:"og:title",name:"og:title",content:this.$t("FreeToolsTitle")},{hid:"og:description",name:"og:description",content:this.$t("FreeToolsDesc")}]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.app,t.store,r=null==o||null===(n=o.store)||void 0===n||null===(n=n.state)||void 0===n||null===(n=n.user)||void 0===n?void 0:n.token,e.next=4,o.$axios.$post("/api/v1/square/v3/app/list",{offset:"",page:1,page_size:60,sub_channel:[],tones:[],languages:[],genders:[],ages:[],model_types:[],base_models:[],run_available:0,nodes_type:[],source_types:[],tag_ids:[],character_type:0,output_types:[],order_by:r?"month_hot":"hot",order_by_time:r?"month_hot":"hot",timeType:r?"month":"All"});case 4:return l=e.sent,data=l.data,e.abrupt("return",{appList:(null==data?void 0:data.items)||[],hasOver:null==data?void 0:data.has_more});case 7:case"end":return e.stop()}}),e)})))()}}),l=(n(5027),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"toolsBox"},[e("card-list",{attrs:{list:t.appList,hasOver:t.hasOver}})],1)}),[],!1,null,"3d732048",null);e.default=component.exports},5807:function(t,e,n){"use strict";n.r(e);n(18);var o=[function(){var t=this._self._c;return t("div",{staticClass:"decorations"},[t("img",{attrs:{src:n(1068),alt:"decorations"}})])},function(){var t=this._self._c;return t("div",{staticClass:"decorations"},[t("img",{attrs:{src:n(1068),alt:"decorations"}})])}],r=(n(11),n(6),n(12),n(13),n(8),n(4),n(7),n(2)),l=(n(19),n(48)),c=n(172),d=n(1),v=n(39);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"Publicize",components:{ElImageViewer:c.a},data:function(){return{descArrs:[{icon:"publicize-desc-icon-1",bgColor:"#AC6AFF",title:"PublicizeDescItemTitleOne",content:"PublicizeDescItemContentOne"},{icon:"publicize-desc-icon-2",bgColor:"#FEBE4F",title:"PublicizeDescItemTitleTwo",content:"PublicizeDescItemContentTwo"},{icon:"publicize-desc-icon-3",bgColor:"#7ADB78",title:"PublicizeDescItemTitleThree",content:"PublicizeDescItemContentThree"}],createTabs:["Txt2Img","TaskUploadImage","conditionToImage"],createCurrentTab:"Txt2Img",toolsCurrentTab:"HDRepair",bigImgDialogVisible:!1,currentUrl:""}},mounted:function(){localStorage.getItem("from_url")||this.$logEvent("log_actions",{operation:"publicize_page_show",source:"bilibili"}),localStorage.setItem("from_url","/publicize"),Object(v.i)({items:[{action:"visit_page"}]})},computed:f(f(f({},Object(d.c)("user",["cdnHostFun"])),Object(d.e)("user",["cdnHost"])),{},{toolsTabs:function(){return[{name:"HDRepair",tabTitle:"taskTabUpscale",tabDesc:"ai_tools_5",video:"https://".concat(this.cdnHost,"/static/video/AITool/HDrepair.mp4"),img:n(737),title:"taskTabUpscale",desc:"PublicizeToolsDescOne"},{name:"RemoveBackground",tabTitle:"RemoveBackground",tabDesc:"ai_tools_6",video:"https://".concat(this.cdnHost,"/static/video/AITool/removeBackgroundv2.mp4"),img:n(738),title:"RemoveBackground",desc:"PublicizeToolsDescTwo"},{name:"DraftIntoDrawing",tabTitle:"ai_tools_3",tabDesc:"ai_tools_7",video:"https://".concat(this.cdnHost,"/static/video/AITool/draftToImgv2.mp4"),img:n(739),title:"ai_tools_3",desc:"PublicizeToolsDescThree"},{name:"AIFilter",tabTitle:"ai_tools_4",tabDesc:"ai_tools_8",video:"https://".concat(this.cdnHost,"/static/video/AITool/AIFilterv2.mp4"),img:n(740),title:"ai_tools_4",desc:"PublicizeToolsDescFour"}]},notEN:function(){return"en"!=this.$i18n.locale},getSlogan:function(){return"SeaArt"},getTopStyle:function(){var t=this.$route.meta.background,e=void 0===t?1:t;return{backgroundImage:"url(".concat(n(5700)("./publicize-bg-".concat(e,".webp")),")")}},getCreateImgUrl:function(){var t="zhCN"===this.$i18n.locale?"zhcn":"en";return{Txt2Img:n(5701)("./publicize-text2img-".concat(t,".webp")),TaskUploadImage:n(5702)("./publicize-img2img-".concat(t,".webp")),conditionToImage:n(5703)("./publicize-condition2img-".concat(t,".webp"))}[this.createCurrentTab]},getAimation:function(){var t=this;return function(e,o){t.$nextTick((function(){var n=t.$refs[e][0],r={duration:1e3*(Math.floor(5*Math.random())+4),iterations:1/0},l=10*(Math.floor(7*Math.random())+2),c=10*(Math.floor(7*Math.random())+2);switch(o){case 1:default:break;case 2:c=-c;break;case 3:l=-l,c=-c;break;case 4:l=-l}n.animate({transform:["none","rotate(180deg) translate3d(".concat(l,"px, ").concat(c,"px, 0) rotate(90deg)")],opacity:[0,1,0]},r)}));var r=Math.floor(5*Math.random())+4,l=Math.floor(31*Math.random())-15,c=Math.floor(3*Math.random())+1;return{width:"".concat(r,"px"),height:"".concat(r,"px"),top:"calc(50% - ".concat(r,"px)"),left:"calc(50% - ".concat(l,"px)"),backgroundImage:"url(".concat(n(5704)("./publicize-animation-".concat(c,".png")),")")}}}}),methods:{login:function(t){"current"!==t||Object(l.q)()?window.open("/home?openLoginDialog=1"):this.$EventBus.$emit("openLoginDialog",{redirect:"/home"})},closeViewBigImage:function(){this.bigImgDialogVisible=!1},viewBigImage:function(t){this.bigImgDialogVisible=!0,this.currentUrl=t.currentTarget.currentSrc}}},_=(n(5119),n(0)),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"publicize-container"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left-container"},[e("img",{staticClass:"logo",attrs:{src:n(275),alt:"Avatar"}}),t._v(" "),e("span",{staticClass:"slogan"},[t._v(t._s(t.getSlogan)+".")]),t._v(" "),e("span",{staticClass:"ai"},[t._v("AI")])]),t._v(" "),e("div",{staticClass:"right-container"},[e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("new_window")}}},[t._v("\n        "+t._s(t.$t("GetStarted"))+"\n      ")])],1)]),t._v(" "),e("div",{staticClass:"top",style:t.getTopStyle},[e("div",{staticClass:"content"},[e("div",{staticClass:"line-one"},[e("span",{staticClass:"words"},[t._v("\n          "+t._s(t.$t("PublicizeRowOne"))+"\n          "),t._m(0)])]),t._v(" "),e("div",{staticClass:"line-two"},[t._v("\n        "+t._s(t.$t("PublicizeRowTwo"))+"\n      ")]),t._v(" "),e("div",{staticClass:"line-three"},[t._v("\n        "+t._s(t.$t("PublicizeRowThree"))+"\n      ")]),t._v(" "),e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("current")}}},[t._v("\n        "+t._s(t.$t("sign_up"))+"\n        "),e("i",{staticClass:"el-icon-right"}),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_1_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_1_".concat(n),1)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_2_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_2_".concat(n),2)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_3_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_3_".concat(n),3)})})),0),t._v(" "),e("div",{staticClass:"animation-div"},t._l(10,(function(n){return e("div",{key:n,ref:"particle_4_".concat(n),refInFor:!0,staticClass:"particle",style:t.getAimation("particle_4_".concat(n),4)})})),0)])],1)]),t._v(" "),e("div",{staticClass:"desc"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("[ AI PAINTING FOR CREATORS ]")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n      "+t._s(t.$t("PublicizeDescTitle"))+"\n    ")]),t._v(" "),e("div",{staticClass:"contianer"},t._l(t.descArrs,(function(n,o){return e("div",{key:o,staticClass:"desc-item"},[e("div",{staticClass:"icon-contianer",style:{background:n.bgColor}},[e("i",{staticClass:"iconfont",class:"icon-".concat(n.icon)})]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.$t(n.content)))])])})),0)]),t._v(" "),e("div",{staticClass:"create"},[e("div",{staticClass:"bg-container"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("[ MULTIPLE MODES TO CHOOSE FROM ]")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[e("span",{staticClass:"words"},[t._v("\n          "+t._s(t.$t("PublicizeCreateTitle"))+"\n          "),t._m(1)])]),t._v(" "),e("div",{staticClass:"tabs"},t._l(t.createTabs,(function(n,o){return e("div",{key:o,staticClass:"item-tab",class:{active:t.createCurrentTab===n},on:{click:function(e){t.createCurrentTab=n}}},[e("span",{staticClass:"words"},[t._v(t._s(t.$t(n)))])])})),0),t._v(" "),e("div",{staticClass:"create-img"},[t._l(t.createTabs,(function(n,o){return[e("img",{directives:[{name:"show",rawName:"v-show",value:t.createCurrentTab===n,expression:"createCurrentTab === tab"}],key:o,staticClass:"img",class:{animate:t.createCurrentTab===n},attrs:{src:t.getCreateImgUrl,alt:"create img"}})]}))],2)])]),t._v(" "),e("div",{staticClass:"tools"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("[ A VARIETY OF PORTABLE AI TOOLS ]")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n      "+t._s(t.$t("PublicizeToolsTitle"))+"\n    ")]),t._v(" "),e("div",{staticClass:"tabs"},t._l(t.toolsTabs,(function(n){return e("div",{key:n.name,staticClass:"item-tab",class:{active:t.toolsCurrentTab===n.name},on:{click:function(e){t.toolsCurrentTab=n.name}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.tabTitle)))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t(n.tabDesc)))])])])})),0),t._v(" "),t._l(t.toolsTabs,(function(n){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.toolsCurrentTab===n.name,expression:"toolsCurrentTab === item.name"}],key:n.name,staticClass:"content",class:{animate:t.toolsCurrentTab===n.name}},[e("div",{staticClass:"left"},[e("img",{staticClass:"img",attrs:{src:n.img,alt:"tools img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t(n.title)))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t(n.desc)))])]),t._v(" "),e("div",{staticClass:"right"},[e("video",{staticClass:"video",attrs:{autoplay:"",muted:"",loop:"",controls:"",src:n.video},domProps:{muted:!0}})])])]}))],2),t._v(" "),e("div",{staticClass:"style"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("[ RECOMMENDED STYLE ]")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n      "+t._s(t.$t("StudioStyle"))+"\n    ")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"column column-one"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254523524802565/3e8cf20dfa7a6b8ca2df0369d8c4383b4c8c31b1_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_classic")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("labStyleTypeText_classic")))])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"450px",objectfit:"cover"},attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254366764779525/3c4972410287df84923fef1ffc5e2cf7d670fcb2_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_foodphotography")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("labStyleTypeText_foodphotography")))])])]),t._v(" "),e("div",{staticClass:"column column-two"},[e("div",{staticClass:"item",staticStyle:{margintop:"80px"}},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254704555180037/9c75aaa1c6963118e0c12eb740d0591c4af92c90_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_cinematic_portrait")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n            "+t._s(t.$t("labStyleTypeText_cinematic_portrait"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16255282629863429/5e5b1d20029c1445a995f6b6d1a5935eee767f3b_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_illustration_anime")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n            "+t._s(t.$t("labStyleTypeText_illustration_anime"))+"\n          ")])])]),t._v(" "),e("div",{staticClass:"column column-three"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254815632904197/ac7fcd0cc69a0ac9079050a5d2a56eef220e5b54_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_artdeco")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n            "+t._s(t.$t("labStyleTypeText_artdeco"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"520px",objectfit:"cover"},attrs:{src:"https://".concat(t.cdnHostFun(),"/style/2023-09-04/16254847052441605/f1a8749f2e248b65694ab6a292eb404b9f54a609_high.webp"),alt:"style img"}}),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("labStyleType_watercolorart")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("\n            "+t._s(t.$t("labStyleTypeText_watercolorart"))+"\n          ")])])])])]),t._v(" "),e("div",{staticClass:"square"},[t.notEN?e("div",{staticClass:"special-title"},[t._v("[ SQUARE WORK DISPLAY ]")]):t._e(),t._v(" "),e("div",{staticClass:"part-title"},[t._v("\n      "+t._s(t.$t("PublicizeSquareTitle"))+"\n    ")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"column column-one"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image2.jpeg"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image5.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image9.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-two"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image4.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image3.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-three"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image7.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"242px"},attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image6.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image11.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])]),t._v(" "),e("div",{staticClass:"column column-four"},[e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image1.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image10.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})]),t._v(" "),e("div",{staticClass:"item"},[e("img",{staticClass:"img",staticStyle:{height:"340px"},attrs:{src:"https://".concat(t.cdnHostFun(),"/publicize/image8.png"),alt:"square img"},on:{click:function(e){return t.viewBigImage(e)}}})])])]),t._v(" "),e("div",{staticClass:"btn"},[e("el-button",{staticClass:"get-started",on:{click:function(e){return t.login("new_window")}}},[t._v("\n        "+t._s(t.$t("GetStarted"))+"\n      ")])],1)]),t._v(" "),t.bigImgDialogVisible?e("el-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"99"},attrs:{"on-close":t.closeViewBigImage,"url-list":[t.currentUrl]}}):t._e()],1)}),o,!1,null,"4108cf52",null);e.default=component.exports},5813:function(t,e,n){"use strict";n.r(e);var o={name:"searchView",components:{PageView:n(825).a},data:function(){return{}}},r=n(0),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",[t("PageView")],1)}),[],!1,null,"7b41c858",null);e.default=component.exports},5814:function(t,e,n){"use strict";n.r(e);var o={name:"searchResult",components:{PageView:n(825).a},data:function(){return{}}},r=n(0),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",[t("PageView")],1)}),[],!1,null,"fd6ea0be",null);e.default=component.exports},5819:function(t,e,n){"use strict";n.r(e);n(18);var o=n(14),r=n(2),l=n(3),c=(n(20),n(19),n(6),n(32),n(16),n(73),n(22),n(11),n(12),n(13),n(8),n(7),n(4),n(28),n(21),n(44),n(39)),d=n(9),v=n(256),h=n(1),f=n(45),m=n(38),_=n(614),y=n(10),w=n(25),C=n(240),O=n(608);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={name:"AIAudioDetail",mixins:[f.a],components:{AudioListItem:_.a,AuthorInfo:C.default,AudioPlayer:v.a,HyMorePopover:O.default},asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,param,c,data,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$axios,t.app,o=t.params,r=t.error,t.query,l=o.id,param={id:l},e.prev=3,!l){e.next=15;break}return e.next=7,n.$post("/api/v1/timbre/detail",param);case 7:if(c=e.sent,data=c.data,1e4===c.status.code){e.next=12;break}return e.abrupt("return");case 12:return d=JSON.parse(JSON.stringify((null==data?void 0:data.stat)||{})),data.stat={num_of_task:d.num_of_task||0,num_of_collection:d.num_of_collection||0,num_of_share:d.num_of_share||0},e.abrupt("return",{detailsData:data||{}});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.log("音频详情页面-> asyncData错误啦：",e.t0),r({statusCode:404,message:e.t0});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))()},head:function(){var t,e=(null===(t=this.detailsData)||void 0===t?void 0:t.name)||"";return{title:this.$t("AiVoiceSeoTitle",{name:e}),meta:[{hid:"description",name:"description",content:this.$t("AiVoiceSeoDesc",{name:e})},{hid:"og:title",name:"og:title",content:this.$t("AiVoiceSeoTitle",{name:e})},{hid:"og:description",name:"og:description",content:this.$t("AiVoiceSeoDesc",{name:e})}]}},data:function(){return{pb100:!1,has_more:!0,listData:[],listQueryParams:{order_by:"new",page_size:14,page:1,parent_id:"",ss:72},loading:!0,reList:[],play:!1,formatNumberForeign:y.p,langPopoverContent:"",i18nKeyForNum:{num_of_task:"Generate",num_of_collection:"Stars",num_of_share:"ShareLink"},setIconForNum:{num_of_task:"icon-play",num_of_collection:"icon-icon-collect1",num_of_share:"icon-icons-Share"},gridNum:3,debounceResize:null,isPlaying:!1,getVoiceLoading:!1,moreActions:[{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"}],detailsData:{},moreList:[{ctype:"report",isBack:!0},{ctype:"noLike",isBack:!0}]}},mounted:function(){var t,e=this;window.addEventListener("scroll",this.handleScroll),this.getList(),Object(m.n)({items:[{action:"view",obj_id:null===(t=this.detailsData)||void 0===t?void 0:t.id,obj_type:16,count:1}]}),this.debounceResize=Object(w.debounce)(this.handleResize,500),window.addEventListener("resize",this.debounceResize),this.$nextTick((function(){e.handleResize()}))},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},computed:k(k(k(k(k({},Object(h.e)("app",["topBanner"])),Object(h.e)("user",["cdnHost","token"])),Object(h.e)("payment",["paymentInfo"])),Object(h.c)("user",["isLoggedIn","accountSettingsData"])),{},{isSharePage:function(){return this.$route.params.isShare&&this.$route.params.listId},selfTag:function(){var t,e=this.detailsData||null,n=[];return null!=e&&null!==(t=e.tags)&&void 0!==t&&t.length&&(n=null==e?void 0:e.tags.map((function(t){return t.title}))),n},langTags:function(){var t,e,n=this,o=[];return null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.langs)&&void 0!==t&&t.length?((null===(e=this.detailsData)||void 0===e||null===(e=e.langs)||void 0===e?void 0:e.length)<4?o=this.detailsData.langs.map((function(t){var e=d.ob[0].value.find((function(e){return e.value===t}));return e?e.i18Key:""})):(o=["Multilingual"],this.langPopoverContent=this.detailsData.langs.map((function(t){var e=d.ob[0].value.find((function(e){return e.value===t})),o=d.K.find((function(e){return e.value===t}));return e?n.$t(e.i18Key):o?n.$t(o.i18Key):""})).join(",")),o):o},attrTags:function(){var t=this.detailsData||null,e=[];if(t){var n=[],r=[],l=[];if(t.gender){var c=d.I.filter((function(e){return e.value===(null==t?void 0:t.gender)}))||[];c.length&&r.push(c[0].i18Key)}if(t.age){var v=d.I.filter((function(e){return e.value===(null==t?void 0:t.age)}))||[];v.length&&n.push(v[0].i18Key)}return null!=t&&t.tones&&null!=t&&t.tones.length&&(l=null==t?void 0:t.tones.map((function(t){var e=d.I.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e=[].concat(n,r,Object(o.a)(l))}return e},styleObj:function(){var t;return{background:"url(".concat(null===(t=this.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,") no-repeat"),backgroundPosition:"center",backgroundSize:"cover",backgroundAttachment:"fixed"}},targetItem:function(){var t;return{id:null===(t=this.detailsData)||void 0===t?void 0:t.id,obj_type:16}}}),methods:{handleScroll:Object(w.throttle)((function(){this.has_more&&(this.pb100=!0);var t=document.documentElement.scrollHeight;document.documentElement.scrollTop+(window.innerHeight||document.documentElement.clientHeight)>=t-50&&!this.loading&&this.has_more&&(console.log("Reached bottom of page"),this.isSharePage||this.getList())}),500),handleClickAuthorInfo:function(){var t;this.$logEvent("log_actions",{operation:"click_author_info",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(t=this.detailsData)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id})},handleFollow:function(){var t;this.$logEvent("log_actions",{operation:"click_follow",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(t=this.detailsData)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id})},getTagType:function(){var t=this.$route,e=t.name,n=t.params;e=e.split("___")[0];var o=d.D.find((function(t){return e="TagDetail"===e?null==n?void 0:n.type:e,t.name.includes(e)}));return null==o?void 0:o.path},handleClickTag:function(t){this.$logEvent("log_actions",{operation:"click_tab",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null==t?void 0:t.id});var path=this.getTagType();this.$router.push(this.localePath("/tagInfo"+path+"/"+(null==t?void 0:t.id)))},getList:function(){var t,e,n,r=this;this.has_more?(this.loading=!0,null!==(t=this.$route.params)&&void 0!==t&&t.listId&&this.isSharePage?this.getListById(null===(n=this.$route.params)||void 0===n?void 0:n.listId):(this.listQueryParams.parent_id=null===(e=this.detailsData)||void 0===e?void 0:e.id,Object(m.J)(this.listQueryParams).then((function(t){var e;1e4===t.status.code&&t.data&&(r.listData=[].concat(Object(o.a)(r.listData),Object(o.a)(null===(e=t.data)||void 0===e?void 0:e.items)),r.has_more=t.data.has_more||!1,t.data.has_more&&r.listQueryParams.page++)})).finally((function(){r.loading=!1,r.pb100=!1})))):this.pb100=!1},getListById:function(t){var e=this;Object(m.jb)({id:t}).then((function(t){1e4===t.status.code&&t.data&&(e.listData=[],e.listData.unshift(t.data))})).finally((function(){e.loading=!1}))},handleSeeMore:function(){var t=this.$route.path.replace(/\/share$/,"");console.log("this.$route",t),this.$router.replace(t)},handlePlayTry:function(){var t;this.play=!0,this.$refs.playAudio.handleClickPlay();var e=null==this||null===(t=this.paymentInfo)||void 0===t?void 0:t.productLevel;this.$dotReport({action:"listen_timbre",obj_type:16,obj_no:this.detailsData.id,stat:this.detailsData.stat,vip:e})},handleClickNum:function(t){var e,n,o,r=this;switch(console.log(t),t){case"num_of_task":this.$logEvent("log_actions",{operation:"click_creation",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(e=this.detailsData)||void 0===e||null===(e=e.author)||void 0===e?void 0:e.id}),this.handleGoCreate();break;case"num_of_collection":if(this.$logEvent("log_actions",{operation:"click_collect",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(n=this.detailsData)||void 0===n||null===(n=n.author)||void 0===n?void 0:n.id}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){r.setCollect(r.detailsData,"ai_audio")}});this.setCollect(this.detailsData,"ai_audio");break;default:this.$logEvent("log_actions",{operation:"click_share",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(o=this.detailsData)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id}),this.handleShare()}},handleResize:function(){try{var t=window.innerWidth-172;this.gridNum=t>1747?3:2}catch(t){}},handleGoCreate:function(){var t;this.$logEvent("log_actions",{operation:"same_create",behavior_info:"on_ai_audio_create_page",behavior_info_sub:null===(t=this.detailsData)||void 0===t?void 0:t.id});var e=this.localePath("/ai-audio/create/".concat(this.detailsData.id));this.$router.push(e)},handleShare:function(){var t;Object(c.i)({items:[{action:"share",obj_no:this.detailsData.id,obj_type:16}]});var e=location.host+this.localePath("/ai-audio/detail/".concat(this.detailsData.id,"/share"));Object(y.g)(e),this.$message.success(this.$t("CopiedURLToClipboard")),this.detailsData.stat.num_of_share=this.detailsData.stat.num_of_share+1,console.log("66666",null===(t=this.detailsData.stat)||void 0===t?void 0:t.num_of_share)},backTo:function(){history.length>1&&"/"!=this.fromPath?this.$router.back():this.$router.push(this.localePath("/"))}}},j=(n(5417),n(5418),n(0)),component=Object(j.a)(I,(function(){var t,e,o,r,l,c,d=this,v=d._self._c;return v("div",{ref:"scrollContainer",staticClass:"ai-audio-detail",class:{pb100:d.pb100},style:d.styleObj,attrs:{"data-group":"ai_audio_detail_page"},on:{scroll:d.handleScroll}},[v("el-backtop",{attrs:{bottom:30,right:30}},[v("i",{staticClass:"el-icon-top"})]),d._v(" "),v("div",{staticClass:"ai-audio-detail-mask-bg"}),d._v(" "),v("div",{staticClass:"ai-audio-detail-back",on:{click:d.backTo}},[v("i",{staticClass:"el-icon-back"})]),d._v(" "),v("div",{staticClass:"ai-audio-detail-user-info"},[v("div",{staticClass:"avatar-box"},[v("img",{attrs:{src:null===(t=d.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url,alt:null===(e=d.detailsData)||void 0===e?void 0:e.name,loading:"lazy"}})]),d._v(" "),v("div",{staticClass:"user-name"},[d._v("\n        "+d._s(null===(o=d.detailsData)||void 0===o?void 0:o.name)+"\n      ")]),d._v(" "),null!==(r=d.detailsData.tags)&&void 0!==r&&r.length?v("div",{staticClass:"tag-box"},d._l(d.detailsData.tags,(function(t,e){return v("div",{key:t+e,staticClass:"tag-box-item",on:{click:function(e){return d.handleClickTag(t)}}},[d._v("\n          "+d._s(t.title)+"\n        ")])})),0):d._e(),d._v(" "),d.langTags.length||d.attrTags.length||d.selfTag.length?v("div",{staticClass:"lang-box"},[d._l(d.attrTags,(function(t,e){return v("div",{key:t+e,staticClass:"lang-item"},[d._v("\n          "+d._s(d.$t(t))+"\n        ")])})),d._v(" "),d._l(d.langTags,(function(t,e){return v("div",{key:e,staticClass:"lang-item"},["Multilingual"===t?[v("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover","popper-class":"audio-detail-lang-popover",content:d.langPopoverContent}},[v("span",{attrs:{slot:"reference"},slot:"reference"},[d._v("\n                "+d._s(d.$t(t))+"\n              ")])])]:[d._v("\n            "+d._s(d.$t(t))+"\n          ")]],2)}))],2):d._e(),d._v(" "),v("div",{staticClass:"other-use-info"},[v("AuthorInfo",{attrs:{type:"aiAudio",activeImg:d.detailsData},on:{handleFollow:d.handleFollow,handleClickAuthorInfo:d.handleClickAuthorInfo}},[v("div",{staticClass:"button-try",attrs:{"data-event":"click_generate_btn"},on:{click:d.handleGoCreate}},[d._v("\n            "+d._s(d.$t("Generate"))+"\n          ")])])],1),d._v(" "),v("div",{staticClass:"num-box"},d._l(d.detailsData.stat,(function(t,e){return v("div",{key:e,staticClass:"num-box-item",attrs:{"data-event":"click_action_item","data-id":e},on:{click:function(t){return t.stopPropagation(),d.handleClickNum(e)}}},[v("div",{staticClass:"title"},[d._v("\n            "+d._s(d.$t("".concat(d.i18nKeyForNum[e])))+"\n          ")]),d._v(" "),v("div",{staticClass:"info"},[v("span",{staticClass:"num"},[d._v(d._s(d.formatNumberForeign(t||0)))]),d._v(" "),v("div",{staticClass:"i-box",class:"bg-".concat(d.setIconForNum[e])},[v("i","num_of_collection"===e?{staticClass:"iconfont",class:d.setCollectData(d.detailsData)}:{staticClass:"iconfont",class:d.setIconForNum[e]})])])])})),0),d._v(" "),v("div",{staticClass:"explam"},[d._v("\n        "+d._s(d.$t("audioSampleVoice"))+"\n        "),v("HyMorePopover",{attrs:{list:d.moreList,targetItem:d.targetItem,placement:"bottom-end"}})],1),d._v(" "),v("div",{staticClass:"try-sound"},[v("div",{staticClass:"info"},[v("div",{staticClass:"info-text"},[d._v("\n            "+d._s((null===(l=d.detailsData)||void 0===l?void 0:l.text)||d.$t("no_data"))+"\n          ")])]),d._v(" "),v("div",{staticClass:"btn",attrs:{"data-event":"click_audition_btn"},on:{click:d.handlePlayTry}},[v("AudioPlayer",{ref:"playAudio",attrs:{modelPlay:"",item:d.detailsData,customClass:"try-class",playIconCustomStyle:{position:"unset"},logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:null===(c=d.detailsData)||void 0===c||null===(c=c.author)||void 0===c?void 0:c.id}},on:{playEnd:function(t){d.play=!1},playIng:function(t){d.play=!0}}}),d._v(" "),v("span",[d._v(d._s(d.play?d.$t("audioStop"):d.$t("audition")))])],1)])]),d._v(" "),v("div",{staticClass:"ai-audio-detail-list"},[v("div",{staticClass:"title"},[d._v("\n        "+d._s(d.$t("CommunityVoices"))+"\n      ")]),d._v(" "),v("div",{staticClass:"table-list",class:{"hide-scrollbar":0===d.listData.length},style:{gridTemplateColumns:d.listData.length?"repeat(".concat(d.gridNum,", 1fr)"):"repeat(".concat(1,", 1fr)")}},[d.listData.length?[d.isSharePage?[v("AudioListItem",{attrs:{logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:"audio_community"},behaviorInfo:"on_ai_audio_community_detail_page",behaviorInfoSub:"from_audio_community",showMoreList:"",item:d.listData[0],obj:d.listData[0]}})]:d._l(d.listData,(function(t,e){return v("AudioListItem",{key:e,attrs:{logParams:{operation:"click_audition",behavior_info:"on_ai_audio_community_detail_page",behavior_info_sub:"audio_community"},behaviorInfo:"on_ai_audio_community_detail_page",behaviorInfoSub:"from_audio_community",obj:t,item:t.voice}})}))]:d._e(),d._v(" "),0!==d.listData.length||d.loading?d._e():[v("div",{staticClass:"table-list-empty"},[v("img",{attrs:{src:n(746),loading:"lazy",alt:d.$t("willShowAudioToHere")}}),d._v(" "),v("span",[d._v(d._s(d.$t("willShowAudioToHere")))])])]],2),d._v(" "),v("p",{directives:[{name:"show",rawName:"v-show",value:d.loading,expression:"loading"},{name:"loading",rawName:"v-loading",value:d.loading,expression:"loading"}],staticClass:"load-tip load-tip-loading",class:{empty_loading:0===d.listData.length},attrs:{"element-loading-text":"".concat(d.$t("loading_tip"),"...")}}),d._v(" "),v("p",{directives:[{name:"show",rawName:"v-show",value:!d.has_more&&!d.loading&&d.listData.length>2,expression:"!has_more && !loading && listData.length > 2"}],staticClass:"load-tip"},[d._v(d._s(d.$t("done_tip")))])])],1)}),[],!1,null,"fa41c5de",null);e.default=component.exports},5820:function(t,e,n){"use strict";n.r(e);n(16),n(18),n(11),n(12),n(13);var o=n(3),r=n(14),l=n(2),c=(n(20),n(19),n(6),n(32),n(73),n(22),n(8),n(4),n(28),n(21),n(44),n(7),n(26),n(256)),d=n(409),v=n(411),h=n(9),f=n(292),m=n(1),_=n(45),y=n(38),w=n(36),C=n(614),O=n(10),x=n(240),k=n(25);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={name:"AIAudioCreate",mixins:[_.a],components:{AudioListItem:C.a,AuthorInfo:x.default,selectSoundModel:v.a,CircularLoading:d.default,AudioPlayer:c.a},data:function(){return{playIconCustomStyle:{position:"absolute",left:"49px",bottom:"5px"},langPopoverContent:"",mockObj:{},hideBar:!0,dataId:null,timer:null,timer2:null,randomNumber:1,inputError:"",process:0,customStyle:{height:"114px",background:"#282933",borderRadius:"10px",padding:"16px"},inputValue:"",handleScrollThrottled:null,has_more:!0,listData:[],listQueryParams:{order_by:"new",page_size:8,page:1,account_no:""},createLoading:!1,loading:!1,reList:[],play:!1,formatNumberForeign:O.p,i18nKeyForNum:{num_of_task:"Generate",num_of_collection:"Stars",num_of_like:"ShareLink"},setIconForNum:{num_of_task:"icon-play",num_of_collection:"icon-icon-collect1",num_of_like:"icon-icons-Share"},debounceResize:null,isPlaying:!1,getVoiceLoading:!1,moreActions:[{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"}],detailsData:{},expandAdvancedSetting:!1,advancedSetting:{speed:1,pitch:0,emotion:"neutral"}}},mounted:function(){var t,e,n=this;(this.handleScrollThrottled=Object(k.throttle)(this.handleScroll,500),null!==(t=this.$route.params)&&void 0!==t&&t.id)?(this.dataId=null===(e=this.$route.params)||void 0===e?void 0:e.id,this.getDataInfo()):this.getMinimaxData();this.$nextTick((function(){n.isLoggedIn&&n.getList()}))},beforeDestroy:function(){clearInterval(this.timer),clearTimeout(this.timer2)},computed:j(j(j(j(j(j({},Object(m.e)("app",["topBanner"])),Object(m.e)("user",["cdnHost","token","userInfo"])),Object(m.e)("payment",["paymentInfo"])),Object(m.c)("aiAudio",["emotionList"])),Object(m.c)("user",["isLoggedIn","accountSettingsData","isCompanyAccount"])),{},{userId:function(){var t;return null===(t=this.userInfo)||void 0===t?void 0:t.id},isVip:function(){var t,e;return(null===(t=this.paymentInfo)||void 0===t?void 0:t.activeState)||(null===(e=this.paymentInfo)||void 0===e?void 0:e.liteActiveState)||this.isCompanyAccount},isSharePage:function(){return this.$route.params.isShare||!1},selfTag:function(){var t,e=this.detailsData||null,n=[];return null!=e&&null!==(t=e.tags)&&void 0!==t&&t.length&&(n=null==e?void 0:e.tags.map((function(t){return t.title}))),n},langTags:function(){var t,e,n=this,o=[];return null!==(t=this.detailsData)&&void 0!==t&&null!==(t=t.langs)&&void 0!==t&&t.length?((null===(e=this.detailsData)||void 0===e||null===(e=e.langs)||void 0===e?void 0:e.length)<4?(o=this.detailsData.langs.map((function(t){var e=h.ob[0].value.find((function(e){return e.value===t}));return e?e.i18Key:""})),this.langPopoverContent=""):(o=["Multilingual"],this.langPopoverContent=this.detailsData.langs.map((function(t){var e=h.ob[0].value.find((function(e){return e.value===t})),o=h.K.find((function(e){return e.value===t}));return e?n.$t(e.i18Key):o?n.$t(o.i18Key):""})).join(",")),o):o},attrTags:function(){var t=this.detailsData||null,e=[];if(t){var n=[],o=[],l=[];if(t.gender){var c=h.I.filter((function(e){return e.value===(null==t?void 0:t.gender)}))||[];c.length&&o.push(c[0].i18Key)}if(t.age){var d=h.I.filter((function(e){return e.value===(null==t?void 0:t.age)}))||[];d.length&&n.push(d[0].i18Key)}return null!=t&&t.tones&&null!=t&&t.tones.length&&(l=null==t?void 0:t.tones.map((function(t){var e=h.I.find((function(e){return e.value===t}));return e?e.i18Key:""}))),e=[].concat(n,o,Object(r.a)(l))}return e},supportLangsView:function(){var t,e,n;return"sovits"===(null===(t=this.detailsData)||void 0===t?void 0:t.model_id)&&"gpt-sovits"===(null===(e=this.detailsData)||void 0===e?void 0:e.model_type)&&"v4"===(null===(n=this.detailsData)||void 0===n?void 0:n.model_version)},processList:function(){return console.log("this.listData",this.listData.filter((function(t){return!(null!=t&&t.is_ready)}))),this.listData.filter((function(t){return!(null!=t&&t.is_ready)})).map((function(t){return t.id}))},currentModel:function(){var t;return(null===(t=this.detailsData)||void 0===t?void 0:t.model_type)||""},showPitch:function(){return["minimax"].includes(this.currentModel)},showEmotion:function(){return["minimax"].includes(this.currentModel)},speedMax:function(){switch(this.currentModel){case"minimax":default:return 2;case"chat_gpt":return 1.65}},speedMin:function(){switch(this.currentModel){case"minimax":default:return.5;case"chat_gpt":return.6}}}),watch:{processList:{handler:function(){this.pollingProcess()},deep:!0}},methods:{handleValidate:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]&&t[0],e.inputValue){n.next=4;break}return e.inputError="audioCreatePlaceholder",n.abrupt("return");case 4:return n.next=6,Object(y.gb)({text:e.inputValue,type:1,domain:"timbre_train",langs:e.supportLangsView?["zh","en","ja","ko"]:e.detailsData.langs&&e.detailsData.langs.length>3?e.detailsData.langs:["zh","en","ja"]});case 6:if(r=n.sent,l=r.status,c=void 0===l?{}:l,d=r.data,data=void 0===d?{}:d,1e4!==c.code){n.next=18;break}if(0!==data.err_code){n.next=14;break}if(e.inputError=null,!o){n.next=13;break}return n.abrupt("return",1);case 13:return n.abrupt("return");case 14:if(e.inputValue=Object(h.kb)(e.inputValue,data.sensitive),e.inputError=2===data.err_code?"audioTxtError2":supportLangsView?"Explanation_text1":"audioTxtError1",!o){n.next=18;break}return n.abrupt("return",2);case 18:case"end":return n.stop()}}),n)})))()},getMinimaxData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)({type:0});case 2:n=e.sent,o=n.data,data=void 0===o?{}:o,r=n.status,1e4===(null==(l=void 0===r?{}:r)?void 0:l.code)&&(t.dataId=null==data||null===(c=data.items[0])||void 0===c?void 0:c.id,t.getDataInfo());case 8:case"end":return e.stop()}}),e)})))()},getHotData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,data,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,page_size:1,order_by:"hot"},e.next=3,Object(w.getAiaudioList)(n);case 3:o=e.sent,r=o.status,l=void 0===r?{}:r,c=o.data,data=void 0===c?{}:c,1e4===l.code&&(t.dataId=null==data||null===(d=data.items[0])||void 0===d||null===(d=d.timbre)||void 0===d?void 0:d.id,t.getDataInfo());case 6:case"end":return e.stop()}}),e)})))()},handleCopyAll:function(){var content=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";["",null,void 0].includes(content)||(Object(O.g)(content),this.$message.success(this.$t("CopySuccess")))},handleRetry:function(t){var e;this.dataId=null==t||null===(e=t.timbre)||void 0===e?void 0:e.id;var n=t.voice,o=void 0===n?{}:n;this.inputValue=(null==o?void 0:o.txt)||"",this.advancedSetting={speed:(null==o?void 0:o.speed)||1,pitch:(null==o?void 0:o.pitch)||0,emotion:(null==o?void 0:o.emotion)||"neutral"},this.getDataInfo()},getTagType:function(){var t=this.$route,e=t.name,n=t.params;e=e.split("___")[0];var o=h.D.find((function(t){return e="TagDetail"===e?null==n?void 0:n.type:e,t.name.includes(e)}));return null==o?void 0:o.path},handleClickTag:function(t){this.$logEvent("log_actions",{operation:"click_tab",behavior_info:"on_ai_audio_create_detail_page",behavior_info_sub:null==t?void 0:t.id});var path=this.getTagType();this.$router.push(this.localePath("/tagInfo"+path+"/"+(null==t?void 0:t.id)))},loop1To5:function(){var t=Math.floor(5*Math.random());this.inputValue=["en","zhCN","ja"].includes(this.$i18n.locale)?h.J[this.$i18n.locale][t]:h.J.en[t],this.inputError=null},selectModel:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$refs.selectSoundModel.handleClose(),e.dataId=t.id,e.getDataInfo();case 3:case"end":return n.stop()}}),n)})))()},getDataInfo:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,data,c,d,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dataId){e.next=6;break}return e.next=3,Object(y.G)({id:t.dataId});case 3:n=e.sent,o=n.status,r=void 0===o?{}:o,l=n.data,data=void 0===l?{}:l,1e4===r.code&&(h=JSON.parse(JSON.stringify((null==data?void 0:data.stat)||{})),data.stat={num_of_task:h.num_of_task||0,num_of_collection:h.num_of_collection||0,num_of_like:h.num_of_like||0},t.detailsData=data,t.mockObj={id:null===(c=t.detailsData)||void 0===c?void 0:c.id,timbre:{cover:{url:null===(d=t.detailsData)||void 0===d||null===(d=d.cover)||void 0===d?void 0:d.url},duration:0,id:null,name:null===(v=t.detailsData)||void 0===v?void 0:v.name,txt:t.inputValue,url:""}});case 6:case"end":return e.stop()}}),e)})))()},updateUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var e=this.localePath("/ai-audio/create/".concat(t));this.$router.replace(e)}},handleSelectSound:function(){this.$logEvent("log_actions",{operation:"click_switch",behavior_info:"on_ai_audio_create_detail_page"}),this.$refs.selectSoundModel.openModal()},submitCreate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,l,c,d,v,data,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.inputValue){e.next=3;break}return t.inputError="audioCreatePlaceholder",e.abrupt("return");case 3:if(!t.createLoading){e.next=6;break}return t.$message.error(t.$t("code_10405")),e.abrupt("return");case 6:if(t.isLoggedIn){e.next=9;break}return t.$EventBus.$emit("openLoginDialog",{callBack:function(){t.submitCreate()}}),e.abrupt("return");case 9:if(!t.inputError){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,t.scrollToTop(),t.createLoading=!0,o={speed:t.advancedSetting.speed},t.showPitch&&(o.pitch=t.advancedSetting.pitch),t.showEmotion&&(o.emotion=t.advancedSetting.emotion),e.next=19,Object(y.db)(j({text:t.inputValue,timbre_id:null===(n=t.detailsData)||void 0===n?void 0:n.id,ss:h.e.GenerateCreate},o));case 19:if(l=e.sent,c=l.status,d=void 0===c?{}:c,v=l.data,data=void 0===v?{}:v,f={70039:["showVipComputingDialog","vipDialogComputedTit2"],70010:["showBreakDialog","VipTip","basic"],80008:t.isVip?["showVipComputingDialog"]:["showNotVipComputingDialog"]},!d.code||!f[d.code]){e.next=26;break}return(m=t.$EventBus).$emit.apply(m,Object(r.a)(f[d.code])),t.createLoading=!1,e.abrupt("return");case 26:if(1e4!==d.code||!data.url){e.next=32;break}t.getList(!0),t.inputError=null,t.createLoading=!1,e.next=40;break;case 32:t.createLoading=!1,t.inputError=null,e.t0=d.code,e.next=70026===e.t0?37:39;break;case 37:return t.$message.error(t.$t("HttpErrorCode_70026")),e.abrupt("break",40);case 39:t.$message.error(t.$t("audioCreateFail"));case 40:e.next=47;break;case 42:e.prev=42,e.t1=e.catch(11),console.log(e.t1),t.inputError=null,t.createLoading=!1;case 47:case"end":return e.stop()}}),e,null,[[11,42]])})))()},incrementProgressFn:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.process=60),!e&&clearInterval(this.timer),this.timer=setInterval(Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.process<100)){n.next=7;break}if(e||!(t.process>70)){n.next=4;break}return t.process=80,n.abrupt("return");case 4:t.process+=20,n.next=11;break;case 7:clearInterval(t.timer),t.process=0,t.createLoading=!1,t.$message.success(t.$t("CreateSuccess"));case 11:case"end":return n.stop()}}),n)}))),1e3)},pollingProcess:function(){var t=this;clearInterval(this.timer),this.timer=null,this.processList.length&&(this.timer=setInterval((function(){Object(f.e)({ids:t.processList}).then((function(e){var n=e.data,o=(void 0===n?{}:n).items;(void 0===o?[]:o).forEach((function(e){t.listData.forEach((function(t){t.id===e.id&&(t.is_ready=e.is_ready,t.process=e.process)}))}))})).catch((function(t){console.error("轮询查进度失败",t)}))}),1e3))},scrollToTop:function(){this.$refs.scrollContainer.scrollTop=0},handleCustomTrain:function(){this.$logEvent("log_actions",{operation:"click_custom_create",behavior_info:"on_ai_audio_create_detail_page"}),this.$router.push(this.localePath("/ai-audio/train"))},resetListParams:function(){this.listData=[],this.has_more=!0,this.listQueryParams={order_by:"new",page_size:8,page:1,account_no:""}},handleScroll:function(t){t.preventDefault();var e=this.$refs.scrollContainer,n=e.scrollHeight;e.scrollTop+e.clientHeight>=n&&!this.loading&&this.has_more&&(console.log("当滚动到底部时触发加载数据"),this.getList())},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.has_more&&!e)return!1;e&&this.resetListParams(),this.loading=!0,this.listQueryParams.account_no=this.userId||"",Object(y.J)(this.listQueryParams).then((function(e){var n,o;1e4===e.status.code&&e.data&&(null===(n=e.data)||void 0===n||n.items.forEach((function(t){var e;t.voice.cover=null===(e=t.author)||void 0===e?void 0:e.head})),t.listData=[].concat(Object(r.a)(t.listData),Object(r.a)(null===(o=e.data)||void 0===o?void 0:o.items)),t.has_more=e.data.has_more||!1,t.has_more&&t.listQueryParams.page++)})).finally((function(){t.loading=!1}))},backTo:function(){this.$router.back()}}},$=S,P=(n(5421),n(0)),component=Object(P.a)($,(function(){var t,e,o,r,l,c,d=this,v=d._self._c;return v("div",{staticClass:"ai-audio-create dot-group"},[v("div",{staticClass:"ai-audio-create-back",on:{click:d.backTo}},[v("i",{staticClass:"el-icon-back"})]),d._v(" "),v("div",{staticClass:"ai-audio-create-left"},[v("div",{staticClass:"left-1"},[v("div",{staticClass:"left-1-l"},[v("div",{staticClass:"left-1-l-1"},[d._v("\n          "+d._s(d.$t("audioCreateTitle"))+"\n        ")]),d._v(" "),d.langPopoverContent?d._e():v("div",{staticClass:"left-1-l-2"},[d._v("\n          "+d._s(d.supportLangsView?d.$t("Explanation_text1"):d.$t("audioCreateTips"))+"\n        ")])]),d._v(" "),v("div",{staticClass:"left-1-r",on:{click:d.loop1To5}},[v("i",{staticClass:"iconfont icon-dice-square"}),d._v(" "),v("div",{staticClass:"left-1-r-2"},[d._v("\n          "+d._s(d.$t("audioCreateMadomTxt"))+"\n        ")])])]),d._v(" "),v("el-input",{staticClass:"left-2",style:{marginBottom:d.inputError?"4px":"18px"},attrs:{"show-word-limit":"",placeholder:d.$t("audioCreatePlaceholder"),maxlength:"500",autosize:{minRows:6},type:"textarea"},model:{value:d.inputValue,callback:function(t){d.inputValue=t},expression:"inputValue"}}),d._v(" "),d.inputError?v("p",{staticClass:"inputError"},[v("i",{staticClass:"el-icon-warning"}),d._v(" "+d._s(d.$t(d.inputError)))]):d._e(),d._v(" "),v("div",{staticClass:"left-3"},[v("div",{staticClass:"left"},[d._v(d._s(d.$t("audioCreateSelectVoice")))])]),d._v(" "),v("div",{staticClass:"left-4"},[v("AudioListItem",{attrs:{behaviorInfo:"on_ai_audio_create_detail_page",behaviorInfoSub:"from_audio_model",showPlayer:!1,modelPlay:"",item:d.detailsData,obj:d.detailsData,"custom-style":d.customStyle,"handle-options":["download","share"]}},[v("template",{slot:"custom_header"},[v("div",{staticClass:"custom-box"},[["",null,void 0].includes(null===(t=d.detailsData)||void 0===t||null===(t=t.cover)||void 0===t?void 0:t.url)?[v("div",{staticClass:"log-empty"},[d._v(d._s(d.$t("EmptyBannerText")))])]:[v("el-image",{staticClass:"log",attrs:{lazy:"",src:null===(e=d.detailsData)||void 0===e||null===(e=e.cover)||void 0===e?void 0:e.url,alt:null===(o=d.detailsData)||void 0===o?void 0:o.name}})],d._v(" "),v("AudioPlayer",{attrs:{customClass:"custom-player-create-1",item:d.detailsData,modelPlay:"",playIconCustomStyle:d.playIconCustomStyle,logParams:{operation:"click_audition",behavior_info:"on_ai_audio_create_detail_page"}}}),d._v(" "),v("div",{staticClass:"info-right"},[v("span",{staticClass:"info-1"},[d._v(d._s(null===(r=d.detailsData)||void 0===r?void 0:r.name))]),d._v(" "),v("span",{staticClass:"info-3"},d._l(d.detailsData.tags,(function(t,e){return v("div",{key:t+e,staticClass:"info-3-item",on:{click:function(e){return d.handleClickTag(t)}}},[d._v("\n                  "+d._s(t.title)+"\n                ")])})),0),d._v(" "),d.langTags.length||d.attrTags.length||d.selfTag.length?v("span",{staticClass:"info-2"},[d._l(d.attrTags,(function(t,e){return v("div",{key:t+e,staticClass:"info-2-item"},[d._v("\n                  "+d._s(d.$t(t))+"\n                ")])})),d._v(" "),d._l(d.langTags,(function(t,e){return v("div",{key:t+e,staticClass:"info-2-item"},["Multilingual"===t?[v("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover","popper-class":"audio-detail-lang-popover",content:d.langPopoverContent}},[v("span",{attrs:{slot:"reference"},slot:"reference"},[d._v("\n                        "+d._s(d.$t(t))+"\n                      ")])])]:[d._v("\n                    "+d._s(d.$t(t))+"\n                  ")]],2)}))],2):d._e()]),d._v(" "),v("div",{staticClass:"switch-voice-btn",on:{click:d.handleSelectSound}},[v("i",{staticClass:"iconfont icon-qiehuan"}),d._v(" "),v("div",{staticClass:"txt"},[d._v(d._s(d.$t("audioCreateChange")))])])],2)])],2)],1),d._v(" "),v("div",{staticClass:"left-advanced-setting"},[v("div",{staticClass:"left-advanced-setting-header",on:{click:function(t){d.expandAdvancedSetting=!d.expandAdvancedSetting}}},[v("div",{staticClass:"left-advanced-setting-header-title"},[d._v("\n          "+d._s(d.$t("AdvancedConfig"))+"\n        ")]),d._v(" "),v("div",{staticClass:"left-advanced-setting-header-btns"},[v("i",{class:d.expandAdvancedSetting?"el-icon-caret-top":"el-icon-caret-bottom"})])]),d._v(" "),d.expandAdvancedSetting?v("div",{staticClass:"left-advanced-setting-content"},[v("div",{staticClass:"left-advanced-setting-content-item"},[v("div",{staticClass:"left-advanced-setting-content-item-title"},[d._v("\n            "+d._s(d.$t("audio_speed"))+"\n            "),v("span",{staticClass:"right-title-number"},[d._v(d._s(d.advancedSetting.speed))])]),d._v(" "),v("div",{staticClass:"left-advanced-setting-content-item-content"},[v("el-slider",{staticClass:"speed-slider-item",attrs:{min:d.speedMin,max:d.speedMax,step:.05,"show-tooltip":!1,"data-event":"ai-audio-create-speed"},model:{value:d.advancedSetting.speed,callback:function(t){d.$set(d.advancedSetting,"speed",t)},expression:"advancedSetting.speed"}})],1)]),d._v(" "),d.showPitch?v("div",{staticClass:"left-advanced-setting-content-item"},[v("div",{staticClass:"left-advanced-setting-content-item-title"},[d._v("\n            "+d._s(d.$t("intonation"))+"\n            "),v("span",{staticClass:"right-title-number"},[d._v(d._s(d.advancedSetting.pitch))])]),d._v(" "),v("div",{staticClass:"left-advanced-setting-content-item-content"},[v("el-slider",{staticClass:"speed-slider-item",attrs:{min:-12,max:12,step:1,"show-tooltip":!1,"data-event":"ai-audio-create-pitch"},model:{value:d.advancedSetting.pitch,callback:function(t){d.$set(d.advancedSetting,"pitch",t)},expression:"advancedSetting.pitch"}})],1)]):d._e(),d._v(" "),d.showEmotion?v("div",{staticClass:"left-advanced-setting-content-item"},[v("div",{staticClass:"left-advanced-setting-content-item-title"},[d._v("\n            "+d._s(d.$t("audio_emotion"))+"\n          ")]),d._v(" "),v("div",{staticClass:"left-advanced-setting-content-item-content"},[v("el-select",{staticClass:"emotion-select",attrs:{"popper-class":"custom-select"},model:{value:d.advancedSetting.emotion,callback:function(t){d.$set(d.advancedSetting,"emotion",t)},expression:"advancedSetting.emotion"}},d._l(d.emotionList,(function(t){return v("el-option",{key:t.id,attrs:{label:d.$t(t.label),value:t.id,"data-id":t.id,"data-event":"ai-audio-create-emotion"}})})),1)],1)]):d._e()]):d._e()]),d._v(" "),v("div",{staticClass:"transfer-btn"},[v("i",{staticClass:"iconfont icon-icon-audio2"}),d._v(" "),v("div",{staticClass:"txt ellipsis"},[d._v(d._s(d.$t("upload_prompt1")))]),d._v(" "),v("div",{staticClass:"btn-box",on:{click:d.handleCustomTrain}},[v("i",{staticClass:"iconfont icon-icon-audio3"}),d._v(" "),v("span",{staticClass:"btn"},[d._v(d._s(d.$t("trytrain")))])])]),d._v(" "),v("div",{staticClass:"left-5"},[v("div",{staticClass:"btn",class:{loadingClass:d.createLoading},on:{click:d.submitCreate}},[d.createLoading?[v("i",{staticClass:"el-icon-loading"}),d._v(" "),v("span",{staticClass:"loading-tip"},[d._v(d._s(d.$t("ai_dance_loading_toast")))])]:v("div",{staticClass:"btn-box"},[v("span",{staticClass:"btn-text-1"},[d._v(d._s(d.$t("Generate")))]),d._v(" "),v("span",{staticClass:"btn-text-2"},[v("el-tooltip",{attrs:{content:d.$t("audioCreateTip"),"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[v("span",{staticClass:"iconfont icon-ruleIcon"})])],1)])],2)])],1),d._v(" "),v("div",{staticClass:"ai-audio-create-right"},[v("div",{staticClass:"title"},[d._v("\n      "+d._s(d.$t("workFlow11"))+"\n    ")]),d._v(" "),v("div",{directives:[{name:"loading",rawName:"v-loading",value:1===d.listQueryParams.page&&d.loading,expression:"listQueryParams.page === 1 && loading"}],ref:"scrollContainer",staticClass:"content",class:{"hide-scrollbar":d.hideBar},style:{height:d.listQueryParams.page>1&&d.loading?"calc(100% - 180px)":"calc(100% - 40px)"},on:{mouseenter:function(t){d.hideBar=!1},mouseleave:function(t){d.hideBar=!0},scroll:d.handleScrollThrottled}},[d.listData.length?d._l(d.listData,(function(t,e){return v("AudioListItem",{key:e,attrs:{showPlayer:!1,behaviorInfo:"on_ai_audio_create_detail_page",logParams:{operation:"click_audition",behavior_info:"on_ai_audio_create_detail_page"},behaviorInfoSub:"history_record","custom-style":{width:"430px",height:"85px",background:"#282933",borderRadius:"10px",padding:"16px"},item:t.voice,obj:t,"handle-options":["download","share","del"],deleteSure:""},on:{updateList:function(t){return d.getList(!0)}},scopedSlots:d._u([{key:"custom_header",fn:function(e){var n,o,r,l,c,h,f,m,_,y,w,C;return[v("div",{staticClass:"header-info"},[["",null,void 0].includes(null===(n=e.data)||void 0===n||null===(n=n.timbre)||void 0===n||null===(n=n.cover)||void 0===n?void 0:n.url)?[v("div",{staticClass:"log-empty"},[d._v(d._s(d.$t("EmptyBannerText")))])]:[v("img",{staticClass:"log",attrs:{loading:"lazy",src:null===(o=e.data)||void 0===o||null===(o=o.timbre)||void 0===o||null===(o=o.cover)||void 0===o?void 0:o.url,alt:null===(r=e.data.timbre)||void 0===r?void 0:r.name}})],d._v(" "),v("div",{staticClass:"info-right"},[v("div",{staticClass:"info-right-content"},[v("span",{staticClass:"name"},[d._v(d._s((null===(l=e.data.timbre)||void 0===l?void 0:l.name)||d.$t("no_data")))]),d._v(" "),v("div",{staticClass:"name-txt-handle"},[v("i",{staticClass:"iconfont icon-refresh-icon2",attrs:{"data-event":"click_retry","data-id":e.data.id},on:{click:function(t){return d.handleRetry(e.data)}}}),d._v(" "),v("el-popover",{attrs:{trigger:"hover","popper-class":"custom-popver"}},[v("div",{staticClass:"easy-task-info-tips"},[v("p",[v("span",{staticClass:"task-info-tips-label"},[d._v(d._s(d.$t("TaskID")))]),v("span",{staticClass:"task-info-tips-copy",on:{click:function(t){return d.handleCopyAll(e.data.id)}}},[d._v(d._s(e.data.id)+" "),v("i",{staticClass:"iconfont icon-copy-ops"})])]),d._v(" "),v("p",[v("span",{staticClass:"task-info-tips-label"},[d._v(d._s(d.$t("expend")))]),d._v(" "),v("span",{staticClass:"task-info-tips-content"},[v("span",[d._v(d._s(d.$t("tempCoins"))+" : "+d._s(null===(c=e.data)||void 0===c||null===(c=c.voice)||void 0===c?void 0:c.temp_hashrate))]),d._v(" "),v("span",[d._v(d._s(d.$t("calculateCoins"))+" : "+d._s(null===(h=e.data)||void 0===h||null===(h=h.voice)||void 0===h?void 0:h.hashrate))])])]),d._v(" "),v("p",[v("span",{staticClass:"task-info-tips-label"},[d._v(d._s(d.$t("currentBalance")))]),d._v(" "),v("span",{staticClass:"task-info-tips-content"},[v("span",[d._v(d._s(d.$t("tempCoins"))+" : "+d._s(null===(f=e.data)||void 0===f||null===(f=f.voice)||void 0===f?void 0:f.after_temp_hashrate))]),d._v(" "),v("span",[d._v(d._s(d.$t("calculateCoins"))+" : "+d._s(null===(m=e.data)||void 0===m||null===(m=m.voice)||void 0===m?void 0:m.after_hashrate))])])])]),d._v(" "),v("div",{staticClass:"msg-item-header-operate-bar-refresh-btn",attrs:{slot:"reference"},slot:"reference"},[v("i",{staticClass:"iconfont icon-icon-information"})])])],1)]),d._v(" "),v("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[v("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[d._v("\n                    "+d._s((null===(_=e.data.voice)||void 0===_?void 0:_.txt)||(null===(y=e.data.timbre)||void 0===y?void 0:y.txt)||d.$t("no_data"))+"\n                  ")]),d._v(" "),v("span",{staticClass:"txt"},[d._v("\n                    "+d._s((null===(w=e.data.voice)||void 0===w?void 0:w.txt)||(null===(C=e.data.timbre)||void 0===C?void 0:C.txt)||d.$t("no_data"))+"\n                  ")])])],1),d._v(" "),v("AudioPlayer",{staticClass:"player-history-list",attrs:{obj:t,item:t.voice,logParams2:{operation:"click_broadcast",behavior_info:"on_ai_audio_list",behavior_info_sub:null==t?void 0:t.id},customClass:"custom-player-create"}})],2)]}}],null,!0)},[d._v(" "),t.is_ready?d._e():v("template",{slot:"createIng"},[v("div",{staticClass:"create-ing"},[v("CircularLoading",{attrs:{font:14,process:t.process,circleWH:54}}),d._v(" "),v("div",{staticClass:"loading-tip"},[v("span",[d._v(d._s(d.$t("audioCreateIng")))]),d._v(" "),v("span",{staticClass:"loading-tip-animo"})])],1)])],2)})):d._e(),d._v(" "),0!==d.listData.length||d.loading?d._e():[v("div",{staticClass:"table-list-empty"},[v("img",{attrs:{src:n(746),loading:"lazy",alt:d.$t("AiAudioCreateEmpty")}}),d._v(" "),v("span",[d._v(d._s(d.$t("AiAudioCreateEmpty")))])])]],2),d._v(" "),d.listQueryParams.page>1&&d.loading?v("div",{staticClass:"loading-more-box"},[v("div",{directives:[{name:"loading",rawName:"v-loading",value:d.listQueryParams.page>1&&d.loading,expression:"listQueryParams.page > 1 && loading"}],staticClass:"loading-more"})]):d._e()]),d._v(" "),v("selectSoundModel",{ref:"selectSoundModel",attrs:{selectList:null!==(l=d.detailsData)&&void 0!==l&&l.id?[null===(c=d.detailsData)||void 0===c?void 0:c.id]:[]},on:{selectModel:d.selectModel}})],1)}),[],!1,null,"88afd068",null);e.default=component.exports},5824:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{}}},r=(n(5532),n(0)),component=Object(r.a)(o,(function(){var t=this;return(0,t._self._c)("div",[t._v(t._s(t.$t("AccessDenied")))])}),[],!1,null,"c3910246",null);e.default=component.exports},5825:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=n(10),l=n(1);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var d={props:["error"],layout:"default",mounted:function(){Object(r.P)("pageError",{error:this.error,userInfo:this.userInfo,path:location.href})},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.e)("user",["userInfo"]))},v=d,h=(n(5533),n(0)),component=Object(h.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"error-page"},[e("img",{attrs:{src:"https://image.cdn2.seaart.ai/static/upload/20240420/3a7bb78f-4c11-468a-9b1a-3e1862008087.png",alt:""}}),t._v(" "),e("div",{staticClass:"info"},[e("h1",[t._v(t._s(t.$t("NotFound")))]),t._v(" "),e("a",{attrs:{href:t.localePath("/")}},[t._v(t._s(t.$t("Home")))])])])}),[],!1,null,"fd84c18c",null);e.default=component.exports},5857:function(t,e,n){"use strict";n.r(e);n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=(n(19),n(16),n(18),n(27)),l=n(1),c=n(10);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"InviteDialog",props:{visible:{type:Boolean,default:!1}},data:function(){return{copyTextToClipboard:c.g,dialogVisible:!1,shareUrl:""}},mounted:function(){this.handleGenerateUrl(),this.initJoinGroupView()},computed:v(v({},Object(l.e)("user",["userInfo"])),Object(l.c)("user",["isCompanyAccount"])),watch:{visible:function(t){this.dialogVisible=t}},methods:v(v({},Object(l.b)("user",["setShortUrl","setDownloadURL","setCDNHost","setCloudCDN"])),{},{initJoinGroupView:function(){var t=this;this.$EventBus.$on("openInviteDialog",(function(e){console.log("eventBus openInviteDialog"),t.dialogVisible||t.showDialog(e)}))},showDialog:function(){this.dialogVisible=!0},copyLink:function(){this.copyTextToClipboard(this.shareUrl),this.$message.success(this.$t("InvitationCopy"))},handleGenerateUrl:function(){var t=this,e={};e.target_host="".concat(window.location.origin,"/"),e.url="".concat(window.location.origin,"/")+"home?u_code="+this.userInfo.invite_user_code;var n=(this.userInfo.name?this.userInfo.name:this.userInfo.id)+""+this.$t("shareText");Object(r.u)(e).then((function(e){var o,r,l,c,d="",v="",h="",f="",m=e||{},_=m.status.code,code=void 0===_?"":_;m.data.canary;null!=e&&e.data&&(d=(null==e||null===(o=e.data)||void 0===o?void 0:o.url)||"",v=(null==e||null===(r=e.data)||void 0===r?void 0:r.qr_code)||"",h=(null==e||null===(l=e.data)||void 0===l?void 0:l.cdn_host)||"",f=(null==e||null===(c=e.data)||void 0===c?void 0:c.cloud_cdn)||"");[1e4,"10000"].includes(code)&&!["",null,void 0].includes(d)&&(t.shareUrl="".concat(n,"\r\n").concat(d),t.setShortUrl(d),t.setDownloadURL(v||""),t.setCDNHost(h),t.setCloudCDN(f))}))},handleUserInfo:function(){var t,e=null===(t=this.userInfo)||void 0===t||null===(t=t.emp_assets)||void 0===t?void 0:t.compute;if(e&&this.isCompanyAccount){var n,o=(null===(n=this.userInfo)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.enterprise)||void 0===n?void 0:n.show_entry)?"ToB_GPULimitAdmin":"ToB_GPULimit";(e>144e5&&e<18e6||e>324e5&&e<36e6||e>1044e5&&e<108e6)&&this.$message.warning(this.$t(o))}}})},f=(n(5564),n(5565),n(0)),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"task-invite-dialog","close-on-click-modal":!0,"close-on-press-escape":!0,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"}),t._v(" "),e("div",{staticClass:"main-part"},[e("div",{staticClass:"title flex justify-center"},[e("div",{staticClass:"img-part"},[e("img",{attrs:{src:n(5707),alt:"wechat"}})])]),t._v(" "),e("div",{staticClass:"info flex w-full items-center justify-center"},[t._v("\n        "+t._s(t.$t("invite_dialog_text"))+"\n      ")])]),t._v(" "),e("span",{staticClass:"dialog-footer w-full flex justify-center",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"my-dialog-btn btn-left",on:{click:t.copyLink}},[t._v(t._s(t.$t("Invite")))])],1)])],1)}),[],!1,null,"2b7a75b5",null);e.default=component.exports},586:function(t,e,n){"use strict";n(6),n(16),n(22),n(31),n(24),n(4),n(113);var o=n(3),r=n(30),l=(n(20),n(19),n(185),n(40),n(1098),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(7),n(41),n(26),n(1176)),c=n(767),d=n(4389).OrbitControls,v=n(5692).GLTFLoader,h={name:"ModelDisplay",components:{GradientProgress:l.default},props:{},data:function(){return{scene:null,camera:null,renderer:null,controls:null,loader:new v,loading:!1,loadingProgress:0,currentModel:null,animationFrameId:null,textureEnabled:!0,originalMaterials:new Map,textureEnabledArr:[{value:!1,text:"DisableTexture",icon:"icon-wenliguan"},{value:!0,text:"EnableTexture",icon:"icon-wenlikai"}],modelInfo:{vertices:0,faces:0,topology:""}}},mounted:function(){window.addEventListener("resize",this.onWindowResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize),this.cleanup(),this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{initScene:function(){var t=this;this.scene=new c.Scene;var canvas=document.createElement("canvas");canvas.width=this.$refs.container.clientWidth,canvas.height=this.$refs.container.clientHeight;var e=canvas.getContext("2d"),n=e.createLinearGradient(0,0,0,canvas.height);n.addColorStop(0,"#06080d"),n.addColorStop(.47,"#23252b"),n.addColorStop(1,"#06080d"),e.fillStyle=n,e.fillRect(0,0,canvas.width,canvas.height),this.scene.background=new c.CanvasTexture(canvas),this.camera=new c.PerspectiveCamera(75,this.$refs.container.clientWidth/this.$refs.container.clientHeight,.1,1e3),this.camera.position.set(2,2,5),this.renderer=new c.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.$refs.container.clientWidth,this.$refs.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.$refs.modelContainer.appendChild(this.renderer.domElement),this.controls=new d(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;var o=new c.AmbientLight(16777215,1);this.scene.add(o);var l=new c.HemisphereLight(16777215,4473924,.8);this.scene.add(l);var v=10;[[v,0,0],[-10,0,0],[0,v,0],[0,-10,0],[0,0,v],[0,0,-10],[v,v,v],[v,-10,v],[-10,v,v],[-10,-10,v],[v,v,-10],[v,-10,-10],[-10,v,-10],[-10,-10,-10]].forEach((function(e){var n=Object(r.a)(e,3);!function(e,n,o,r){var l=new c.DirectionalLight(16777215,r);l.position.set(e,n,o),l.castShadow=!0,l.shadow.bias=-.001,l.shadow.mapSize.width=2048,l.shadow.mapSize.height=2048,t.scene.add(l)}(n[0],n[1],n[2],.5)})),this.animate()},getModel:function(t){this.loading=!0,this.initScene(),this.initData(t)},initData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.loadingProgress=0,e.currentModel&&e.cleanupModel(),n.next=5,e.loadGLTF(t);case 5:return o=n.sent,e.currentModel=o.scene,e.currentModel.traverse((function(t){t.isMesh&&(e.originalMaterials.set(t.uuid,t.material.clone()),t.material.side=c.DoubleSide,t.material.roughness=.7,t.material.metalness=.3,t.castShadow=!0,t.receiveShadow=!0)})),e.adjustModelPosition(e.currentModel),e.scene.add(e.currentModel),e.controls.reset(),n.next=13,new Promise((function(t){return requestAnimationFrame(t)}));case 13:e.calculateModelInfo(e.currentModel),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error("模型加载失败:",n.t0),e.$message.error(e.$t("ModelLoadFailed"));case 20:return n.prev=20,e.loadingProgress=100,setTimeout((function(){e.loading=!1}),500),n.finish(20);case 24:case"end":return n.stop()}}),n,null,[[0,16,20,24]])})))()},loadGLTF:function(t){var e=this;return new Promise((function(n,o){e.loadingProgress=0,e.loader.load(t,(function(t){return n(t)}),(function(t){t.lengthComputable&&(e.loadingProgress=Math.round(t.loaded/t.total*100))}),(function(t){return o(t)}))}))},adjustModelPosition:function(t){var e=(new c.Box3).setFromObject(t),n=e.getCenter(new c.Vector3),o=e.getSize(new c.Vector3),r=3/Math.max(o.x,o.y,o.z);t.position.sub(n),t.scale.set(r,r,r),t.rotation.set(0,Math.PI/4,0)},onWindowResize:function(){this.camera.aspect=this.$refs.container.clientWidth/this.$refs.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.$refs.container.clientWidth,this.$refs.container.clientHeight)},animate:function(){this.animationFrameId=requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera)},cleanupModel:function(){this.currentModel&&(this.scene.remove(this.currentModel),this.currentModel.traverse((function(t){t.isMesh&&(t.geometry.dispose(),t.material.dispose())})),this.currentModel=null)},cleanup:function(){this.originalMaterials.clear(),this.cleanupModel(),this.renderer.dispose(),this.controls.dispose(),this.scene=null,this.camera=null,this.renderer=null,this.controls=null,window.removeEventListener("resize",this.onWindowResize),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)},toggleTexture:function(t){var e=this;this.currentModel&&(this.textureEnabled=t,this.currentModel.traverse((function(n){if(n.isMesh){if(e.originalMaterials.has(n.uuid)||e.originalMaterials.set(n.uuid,n.material.clone()),t)n.material=e.originalMaterials.get(n.uuid).clone(),n.material.roughness=.7,n.material.metalness=.3,n.material.side=c.DoubleSide;else{var o=new c.MeshStandardMaterial({color:"#bcbcbc",roughness:.5,metalness:.1,side:c.DoubleSide,flatShading:!0,emissive:3355443,emissiveIntensity:.2});n.material=o}n.castShadow=!0,n.receiveShadow=!0}})))},calculateModelInfo:function(t){var e=this,n=0,o=0,r=0,l=0,c=0;t.traverse((function(t){if(t.isMesh){var d=t.geometry,v=e.analyzeTopology(d);r+=v.nonManifoldEdges,l+=v.boundaryEdges,c+=v.connectedComponents,null!==d.index?(n+=d.attributes.position.count,o+=d.index.count/3):(n+=d.attributes.position.count,o+=d.attributes.position.count/3)}}));var d=this.generateTopologyDescription({vertices:n,faces:o,nonManifoldEdges:r,boundaryEdges:l,connectedComponents:c});this.modelInfo={vertices:Math.round(n),faces:Math.round(o),topology:d},this.$emit("update:modelInfo",this.modelInfo)},analyzeTopology:function(t){var e={nonManifoldEdges:0,boundaryEdges:0,connectedComponents:1};if(!t.index)return e;for(var n=new Map,o=t.index.array,i=0;i<o.length;i+=3){var a=o[i],b=o[i+1],r=o[i+2];this.processEdge(n,Math.min(a,b),Math.max(a,b)),this.processEdge(n,Math.min(b,r),Math.max(b,r)),this.processEdge(n,Math.min(r,a),Math.max(r,a))}return n.forEach((function(t){1===t&&e.boundaryEdges++,t>2&&e.nonManifoldEdges++})),e},processEdge:function(t,e,n){var o="".concat(e,"-").concat(n);t.set(o,(t.get(o)||0)+1)},generateTopologyDescription:function(t){var e=0===t.nonManifoldEdges&&0===t.boundaryEdges,n=0===t.boundaryEdges,o="";return e&&n?o=this.$t("ManifoldWatertight"):e?n||(o=this.$t("NonWatertight")):o=this.$t("NonManifold"),o}}},f=(n(4391),n(0)),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"model-display-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-overlay"},[e("div",{staticClass:"progress-text"},[e("span",{staticClass:"progress-text-words"},[t._v(t._s(t.$t("Loading")))]),t._v(" "),e("span",{staticClass:"progress-text-percentage"},[t._v(t._s(t.loadingProgress)+"%")])]),t._v(" "),e("gradient-progress",{staticClass:"loading-progress",attrs:{percentage:t.loadingProgress}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],ref:"modelContainer",staticClass:"model-container"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"texture-control"},t._l(t.textureEnabledArr,(function(n){return e("el-tooltip",{key:n.text,attrs:{"popper-class":"texture-control-popper",placement:"top"}},[e("div",{staticClass:"texture-control-item",class:{active:n.value===t.textureEnabled},on:{click:function(e){return t.toggleTexture(n.value)}}},[e("div",{staticClass:"iconfont",class:n.icon})]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n        "+t._s(t.$t(n.text))+"\n      ")])])})),1)])}),[],!1,null,"45a48010",null),m=component.exports;installComponents(component,{GradientProgress:n(1176).default});var _=n(58),y={name:"ModelInfo",components:{ElImageViewer:n(172).a},props:{modelInfo:{type:Object,default:function(){return{vertices:0,faces:0,topology:"",createTime:0}}},formList:{type:Array,default:function(){return[]}}},data:function(){return{timestampToTime:_.i,initial:0,btns:[{value:"save",text:"Save",icon:"icon-baocun"},{value:"download",text:"Download",icon:"icon-icon_xiazai"},{value:"delete",text:"Delete",icon:"icon-shanchu"}],dialogVisible:!1}},methods:{formatNumber:function(t){return t.toLocaleString()},handleBtnClick:function(t){var e=this;switch(t){case"save":this.$message({message:this.$t("SaveTips"),type:"warning",customClass:"three-d-message-box__wrapper"});break;case"download":var a=document.createElement("a");a.href=this.modelInfo.modelUrl,a.download="model.glb",a.click();break;case"delete":this.$confirm(this.$t("deleteConfirm"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning",customClass:"custom-confirm"}).then((function(){e.$emit("handleOperation","delete",e.modelInfo)})),setTimeout((function(){var t=document.querySelector(".el-message-box__wrapper");t&&t.classList.add("three-d-message-box__wrapper")}))}},handleImageClick:function(t){this.dialogVisible=!0,this.initial=t}}},w=(n(4392),Object(f.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"model-info-container"},[e("div",{staticClass:"model-info-btns"},t._l(t.btns,(function(n){return e("div",{key:n.value,staticClass:"item-btn flex-center",on:{click:function(e){return t.handleBtnClick(n.value)}}},[e("i",{staticClass:"item-btn-icon iconfont",class:n.icon}),t._v(" "),e("span",{staticClass:"item-btn-text"},[t._v(t._s(t.$t(n.text)))])])})),0),t._v(" "),e("div",{staticClass:"model-info-title"},[t._v(t._s(t.$t("authoringParameters")))]),t._v(" "),t.formList.length>0?e("div",{staticClass:"model-info-image"},[e("div",{staticClass:"image-title"},[t._v("\n      "+t._s(t.$t("reference_image"))+"\n    ")]),t._v(" "),e("div",{staticClass:"image-content",class:{"image-content-4":t.formList.length>1},style:{gap:2===t.formList.length?"32px":3===t.formList.length?"16px":"4px"}},t._l(t.formList,(function(n,o){return e("img",{key:o,attrs:{src:n,alt:""},on:{click:function(e){return t.handleImageClick(o)}}})})),0)]):t._e(),t._v(" "),e("div",{staticClass:"model-info-content"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-label"},[t._v(t._s(t.$t("Vertices")))]),t._v(" "),e("div",{staticClass:"info-value"},[t._v(t._s(t.formatNumber(t.modelInfo.vertices)))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-label"},[t._v(t._s(t.$t("Faces")))]),t._v(" "),e("div",{staticClass:"info-value"},[t._v(t._s(t.formatNumber(t.modelInfo.faces)))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("div",{staticClass:"info-label"},[t._v(t._s(t.$t("newGenerate26")))]),t._v(" "),e("div",{staticClass:"info-value"},[t._v(t._s(t.timestampToTime(t.modelInfo.createTime,"yyyy-MM-dd hh:mm:ss")))])])]),t._v(" "),t.dialogVisible?e("el-image-viewer",{staticClass:"message-img-viewer",staticStyle:{"z-index":"9999"},attrs:{"initial-index":t.initial,"on-close":function(){return t.dialogVisible=!1},"url-list":t.formList}}):t._e()],1)}),[],!1,null,"5c1d133e",null).exports),C=n(29),O={name:"ThreeDModelViewer",props:{defaultZIndex:{type:Number,default:2060}},components:{ModelDisplay:m,ModelInfo:w},data:function(){return{dialogVisible:!1,modelInfo:{vertices:0,faces:0,topology:"",createTime:0,modelUrl:""},formList:[]}},mounted:function(){},beforeDestroy:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{show:function(t){var e=this,n=t.url,o=t.createTime,r=t.id;n&&n.toLowerCase().endsWith(".glb")?(this.getMetaInfo(r),document.body.appendChild(this.$el),this.modelInfo.modelUrl=n,this.modelInfo.createTime=o,this.dialogVisible=!0,this.$nextTick((function(){e.$refs.modelDisplay.getModel(n)}))):console.warn("只支持GLB格式的3D模型文件")},close:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.dialogVisible=!1,this.modelInfo={vertices:0,faces:0,topology:"",createTime:0,modelUrl:""}},updateModelInfo:function(t){var e=t.vertices,n=t.faces,o=t.topology;this.modelInfo.vertices=e,this.modelInfo.faces=n,this.modelInfo.topology=o},handleOperation:function(t,e){"delete"===t&&this.close(),this.$emit("handleOperation",t,e)},getMetaInfo:function(t){var e=this;Object(C.getMetaInfo)({id:t}).then((function(t){var n,o=(null==t||null===(n=t.data.meta)||void 0===n?void 0:n.comfyui_inputs)||[],r=["",null,void 0];e.formList=o.filter((function(t){return"image"===t.field})).map((function(t){return!r.includes(t.val)&&t.val})),e.formList=e.formList.slice(0,4)}))}}},x=(n(4393),Object(f.a)(O,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"model-viewer",fullscreen:"","destroy-on-close":!1,"close-on-press-escape":!1,modal:!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"model-viewer-container"},[e("div",{staticClass:"close-box",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-close"})]),t._v(" "),t.dialogVisible?e("ModelDisplay",{ref:"modelDisplay",on:{"update:modelInfo":t.updateModelInfo}}):t._e(),t._v(" "),e("ModelInfo",{attrs:{modelInfo:t.modelInfo,formList:t.formList},on:{handleOperation:t.handleOperation}})],1)])}),[],!1,null,"5604e2dd",null));e.a=x.exports},5866:function(t,e,n){"use strict";n.r(e);n(77),n(11),n(6),n(12),n(13);var o=n(2),r=n(3),l=(n(199),n(16),n(22),n(8),n(4),n(28),n(21),n(44),n(152),n(7),n(26),n(20),n(36)),c=n(106),d=(n(9),n(78)),v=n(128);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"PatFaceDialog",props:{value:Boolean,dialogData:{type:Object,default:function(){return{pages:[]}}}},data:function(){return{visible:!1,pages:[],currentIndex:0,column:{},countdowns:[],timers:[],showCounters:[]}},watch:{value:function(t){this.visible=t},visible:function(t){t||this.$emit("input",!1)},currentIndex:function(t){this.column=this.pages[t]||{}}},beforeDestroy:function(){this.clearAllTimers()},methods:{show:function(){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=t.length>0&&void 0!==t[0]?t[0]:{}).dialogData?e.dialogData=r.dialogData:null!==(o=r.options)&&void 0!==o&&o.data&&(e.dialogData=f({pages:r.options.data.page||[]},r.options.data)),e.dialogData&&!e.dialogData.pages&&e.dialogData.page&&(e.dialogData.pages=e.dialogData.page,delete e.dialogData.page),n.next=5,e.initializeData();case 5:return e.visible=!0,n.next=8,e.$nextTick();case 8:return n.prev=8,n.next=11,Object(l.markFacePhotoPopup)({plat:"web"});case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(8),console.error("[PatFaceDialog] Failed to mark popup as shown via API:",n.t0);case 16:return n.abrupt("return",!0);case 17:case"end":return n.stop()}}),n,null,[[8,13]])})))()},initializeData:function(){var t,e,n,o,r=this;if((null===(t=this.dialogData)||void 0===t||null===(t=t.pages)||void 0===t||!t.length)&&(null!==(e=this.dialogData)&&void 0!==e&&null!==(e=e.dialogData)&&void 0!==e&&null!==(e=e.pages)&&void 0!==e&&e.length?this.dialogData=this.dialogData.dialogData:null!==(n=this.dialogData)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&null!==(n=n.page)&&void 0!==n&&n.length&&(this.dialogData=f(f({},this.dialogData.data),{},{pages:this.dialogData.data.page}),delete this.dialogData.page),null===(o=this.dialogData)||void 0===o||null===(o=o.pages)||void 0===o||!o.length))return void this.reset();this.pages=this.dialogData.pages,this.currentIndex=0,this.column=this.pages[0],this.countdowns=this.pages.map((function(){return{days:0,hours:0,minutes:0,seconds:0}})),this.showCounters=this.pages.map((function(){return!1})),this.clearAllTimers(),this.timers=new Array(this.pages.length).fill(null),this.pages.forEach((function(t,e){1===(null==t?void 0:t.is_counter)&&null!=t&&t.end_at&&null!=t&&t.start_at&&r.checkTimeRange(e)}))},reset:function(){this.pages=[],this.column={},this.countdowns=[],this.showCounters=[],this.clearAllTimers(),this.timers=[]},handleSwiper:function(t){this.currentIndex=t},handleIndicatorClick:function(t){this.$refs.carousel&&this.$refs.carousel.setActiveItem(t)},goPage:function(){if(Object(c.f)("log_actions",{operation:"click_try_now",behavior_info:"on_tap_face_pop"}),this.column&&this.column.link){if(this.column.link.includes("https://online.fliphtml5.com/seaart"))return window.location.href="/annualreport2024",void this.handleClose(!1);if("https://aiart-openresty.dev.seaart.dev/image-generation"===this.column.link)try{this.handleClose(!1),Object(v.a)({source:13,behavior:"enterPage"}),localStorage.setItem("generateMode",2),window.$EventBus?(window.$EventBus.$emit("openGenerate",{action:1,data:""}),window.$EventBus=null):this.$emit("request-generate-flow")}catch(t){console.error("Error handling generate flow:",t)}else window.open(this.handleHrefParams(this.column.link),"_blank")}},handleHrefParams:function(t){var e=localStorage.getItem("t"),n=localStorage.getItem("userInfo");return(n=n?JSON.parse(n):{}).token=e,t&&t.includes("{")&&e?t.replace(/\{(.*?)\}/g,(function(t,e){var o,r=e.toLowerCase();return(null===(o=n)||void 0===o?void 0:o[r])||t})):t},handleLeft:function(){Object(c.f)("log_actions",{operation:"click_change_page_left",behavior_info:"on_tap_face_pop",behavior_info_sub:this.currentIndex}),this.$refs.carousel&&this.$refs.carousel.prev()},handleRight:function(){Object(c.f)("log_actions",{operation:"click_change_page_right",behavior_info:"on_tap_face_pop",behavior_info_sub:this.currentIndex}),this.$refs.carousel&&this.$refs.carousel.next()},handleClose:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(Object(c.f)("log_actions",{operation:"click_maybe_later",behavior_info:"on_tap_face_pop"}),Object(l.noPatFacePop)({plat:"web"})):Object(c.f)("log_actions",{operation:"click_close",behavior_info:"on_tap_face_pop"}),!e&&null!==(t=this.column)&&void 0!==t&&t.id&&Object(l.noPatFacePop)({id:this.column.id}),this.visible=!1,this.$emit("close",d.a.PAT_FACE),this.reset()},startCountdown:function(t){var e=this;this.calculateTime(t),this.timers[t]&&clearInterval(this.timers[t]),this.timers[t]=setInterval((function(){e.calculateTime(t)}),1e3)},calculateTime:function(t){if(this.pages[t]&&this.pages[t].end_at){var e=(new Date).getTime(),n=new Date(this.pages[t].end_at).getTime()-e;if(n<0)return clearInterval(this.timers[t]),this.timers[t]=null,this.$set(this.countdowns,t,{days:0,hours:0,minutes:0,seconds:0}),void this.$set(this.showCounters,t,!1);var o=Math.floor(n/36e5),r=Math.floor(n%36e5/6e4),l=Math.floor(n%6e4/1e3);if(o>=48){var c=Math.floor(n/864e5),d=Math.floor(n%864e5/36e5);this.$set(this.countdowns,t,{days:c,hours:d,minutes:r,seconds:l})}else this.$set(this.countdowns,t,{days:0,hours:o,minutes:r,seconds:l})}},checkTimeRange:function(t){if(this.pages[t]&&this.pages[t].start_at&&this.pages[t].end_at){var e=(new Date).getTime(),n=new Date(this.pages[t].start_at).getTime(),o=new Date(this.pages[t].end_at).getTime();e>=n&&e<=o?(this.$set(this.showCounters,t,!0),this.startCountdown(t)):(this.$set(this.showCounters,t,!1),this.timers[t]&&(clearInterval(this.timers[t]),this.timers[t]=null))}},clearAllTimers:function(){this.timers.forEach((function(t){t&&clearInterval(t)})),this.timers=[]}}},_=m,y=(n(5588),n(0)),component=Object(y.a)(_,(function(){var t,e=this,n=e._self._c;return e.visible?n("div",{staticClass:"popup_parent"},[n("div",{staticClass:"content_face"},[n("div",{staticClass:"header"},[e._t("header",(function(){return[n("span",{staticClass:"close-btn",on:{click:function(t){return e.handleClose(!1)}}},[e._v(" × ")])]}),{column:e.column})],2),e._v(" "),n("el-carousel",{ref:"carousel",staticClass:"swiper",attrs:{interval:1e3*((null===(t=e.column)||void 0===t||null===(t=t.page_set)||void 0===t?void 0:t.duration)||5),height:"100%",trigger:"click",arrow:"never","indicator-position":"none","initial-index":e.currentIndex,loop:!0},on:{change:e.handleSwiper}},[e._l(e.pages,(function(t,o){return n("el-carousel-item",{key:t.id||o},[n("div",{staticClass:"main"},[n("div",{staticClass:"swiperItem"},[1===t.inside_type?n("img",{staticClass:"banner",attrs:{src:t.inside_link,alt:"Banner Image"}}):n("video",{staticClass:"banner video",attrs:{autoplay:!0,loop:!0,controls:!1,src:t.inside_link},domProps:{muted:!0}}),e._v(" "),n("div",{staticClass:"mask"})]),e._v(" "),e._t("main",(function(){return[n("div",{staticClass:"main_con"},[n("div",{staticClass:"title ellipsis",domProps:{innerHTML:e._s(t.title)}}),e._v(" "),n("div",{staticClass:"con"},[e._v(e._s(t.intro))])])]}),{item:t}),e._v(" "),1===t.is_counter&&e.showCounters[o]?n("div",{staticClass:"countdown"},[e.countdowns[o].days>0?n("span",{staticClass:"time-item"},[e._l(String(e.countdowns[o].days).split(""),(function(t,i){return n("span",{key:"day-".concat(i),staticClass:"time-num"},[e._v(e._s(t))])})),e._v(" "),n("span",{staticClass:"time-unit"},[e._v(":")])],2):e._e(),e._v(" "),n("span",{staticClass:"time-item"},[n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].hours).padStart(2,"0")[0]))]),e._v(" "),n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].hours).padStart(2,"0")[1]))]),e._v(" "),n("span",{staticClass:"time-unit"},[e._v(":")])]),e._v(" "),n("span",{staticClass:"time-item"},[n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].minutes).padStart(2,"0")[0]))]),e._v(" "),n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].minutes).padStart(2,"0")[1]))]),e._v(" "),n("span",{staticClass:"time-unit"},[e._v(":")])]),e._v(" "),n("span",{staticClass:"time-item"},[n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].seconds).padStart(2,"0")[0]))]),e._v(" "),n("span",{staticClass:"time-num"},[e._v(e._s(String(e.countdowns[o].seconds).padStart(2,"0")[1]))])])]):e._e()],2)])})),e._v(" "),n("div",{staticClass:"left icon",on:{click:e.handleLeft}},[n("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),n("div",{staticClass:"right icon",on:{click:e.handleRight}},[n("i",{staticClass:"el-icon-arrow-right"})])],2),e._v(" "),n("div",{staticClass:"footer"},[e._t("footer",(function(){var t,o;return[n("div",{staticClass:"button"},[null!==(t=e.column)&&void 0!==t&&null!==(t=t.buttons)&&void 0!==t&&t[1]?n("div",{staticClass:"btn btn_1 ellipsis",on:{click:function(t){return e.handleClose(!0)}}},[e._v("\n            "+e._s(e.column.buttons[1])+"\n          ")]):e._e(),e._v(" "),null!==(o=e.column)&&void 0!==o&&null!==(o=o.buttons)&&void 0!==o&&o[0]?n("div",{staticClass:"btn btn_2 ellipsis",on:{click:e.goPage}},[e._v("\n            "+e._s(e.column.buttons[0])+"\n          ")]):e._e()])]}),{column:e.column}),e._v(" "),n("div",{staticClass:"indicator"},e._l(e.pages,(function(t,o){return n("span",{key:"ind-".concat(o),class:["tips",{selectTip:e.currentIndex===o}],on:{click:function(t){return e.handleIndicatorClick(o)}}})})),0)],2)],1)]):e._e()}),[],!1,null,"1324df0f",null);e.default=component.exports},587:function(t,e,n){"use strict";n(11),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(19),n(6),n(16),n(22),n(31),n(4),n(18),n(21),{name:"cardItem",props:{cardInfo:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{shows:function(){return!this.$route.path.includes(this.cardInfo.path)},path:function(){var t=this.cardInfo,path=t.path,e=t.id;return path?"/ai-tools/".concat(path):"/workFlowAppDetail/".concat(e)}},mounted:function(){},methods:{switchTools:function(){this.$router.push(this.localePath(this.path)),this.$emit("changeTools",this.cardInfo)},getWidth:function(){var t;var e=~~((null===(t=this.$parent)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.cnt)||void 0===t?void 0:t.offsetWidth)/4-12);return e>233?e:233},getHeight:function(){var t=this.getWidth();return parseInt(175*t/430)},goPage:function(){if(this.cardInfo.path)return this.$router.push(this.localePath({path:"/ai-tools/"+this.cardInfo.path}));this.$router.push(this.localePath({path:"/workFlowAppDetail/".concat(this.cardInfo.id)}))}}}),c=(n(5025),n(0)),component=Object(c.a)(l,(function(){var t,e,n,o=this,r=o._self._c;return o.shows?r("div",{staticClass:"c-card-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),o.switchTools.apply(null,arguments)}}},[r("a",{attrs:{href:o.localePath(o.path)}},[r("div",{staticClass:"card-item-describe"},[r("div",{staticClass:"main-title"},[r("span",{staticClass:"main-title-text ellipsis"},[o._v("\n          "+o._s(o.$t(o.cardInfo.title)||(null===(t=o.cardInfo)||void 0===t||null===(t=t.comfy_ui)||void 0===t?void 0:t.name))+"\n        ")])]),o._v(" "),r("div",{staticClass:"sub-title ellipsis-multiline",class:{"ellipsis-multiline-6":o.getHeight()>129}},[o._v("\n        "+o._s(o.$t(o.cardInfo.subTitle)||(null===(e=o.cardInfo)||void 0===e||null===(e=e.comfy_ui)||void 0===e?void 0:e.desc))+"\n      ")])]),o._v(" "),r("div",{staticClass:"card-item-banner"},[r("img",{attrs:{src:o.cardInfo.cover,alt:null===(n=o.cardInfo)||void 0===n||null===(n=n.comfy_ui)||void 0===n?void 0:n.name}})])])]):o._e()}),[],!1,null,"08208b2a",null),d=component.exports,v=n(1),h=n(9),f=n(64),m=n(36);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={name:"cardList",components:{HyWaterfallFlowList:f.default,cardItem:d},props:{isShowApplication:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}}},computed:y(y(y({},Object(v.c)("user",["cdnHostFun"])),Object(v.c)("user",["isCompanyAccount"])),{},{cardList:function(){var t=[{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-video-generator")),title:"ai_video_generation",subTitle:"ai_video_generation_desc",type:"ai_video_generation",dataLoggingName:"ai_video_generation",path:"ai-video-generator"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-face-swap")),title:"ai_face_changing",subTitle:"ai_face_changing_desc",type:"ai_face_changing",dataLoggingName:"ai_face_changing",path:"ai-face-swap"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-filter")),title:"ai_tools_4",subTitle:"ai_tools_8",type:"ai_filter",dataLoggingName:"ai_filters",path:"ai-filter"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-model-fitting")),title:"ai_model_fitting_title",subTitle:"ai_model_fitting_desc",type:"aiModelFitting",path:"ai-model-fitting"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("remove-background")),title:"ai_tools_2",subTitle:"ai_tools_6",type:"remove_background",dataLoggingName:"remove_background",path:"remove-background"},{source1:"",cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai_erase")),title:"ai_erase",subTitle:"ai_erase_tip",type:"ai_erase",dataLoggingName:"",path:"ai_erase"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("image-upscaler")),title:"upsacler_3_H1",subTitle:"upsacler_4_H1_value",type:"hd_restoration",dataLoggingName:"hd_restoration",path:"image-upscaler"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-makeup")),title:"ai_makeup",subTitle:"ai_makeup_desc",type:"ai-makeup",dataLoggingName:"ai-makeup",path:"ai-makeup"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("ai-portrait")),title:"ai_tools_10",subTitle:"ai_tools_11",type:"ai_photography",dataLoggingName:"ai_photography",path:"ai-portrait"},{cover:"https://".concat(this.cdnHostFun()).concat(Object(h.W)("scribble2img")),title:"ai_tools_3",subTitle:"ai_tools_7",type:"character_fixes",dataLoggingName:"from_sketch_to_artwork",path:"scribble2img"}];return this.isCompanyAccount?t.filter((function(t){return!["ai_photography"].includes(t.type)})).map((function(t){var e;return y(y({},t),{},{cover:null==t||null===(e=t.cover)||void 0===e?void 0:e.url})})):t}}),data:function(){return{loading:!1,data:[],isLoading:!1}},mounted:function(){this.data=this.list,this.getAppList()},beforeDestroy:function(){},methods:{goToAppHome:function(){this.$router.push({path:this.localePath("/swift_app")})},getAppList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.data.length>=90)){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,e.next=6,Object(m.getWaterAiApp)({offset:"",page:2,page_size:60,sub_channel:[],tones:[],languages:[],genders:[],ages:[],model_types:[],base_models:[],run_available:0,nodes_type:[],source_types:[],tag_ids:[],character_type:0,output_types:[],order_by:"hot",order_by_time:"hot",timeType:"All"});case 6:n=e.sent,o=n.data,r=o.items,o.has_more,t.data=t.data.concat(r.slice(0,90-t.data.length)),t.scrollToCommunity(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,14,16,19]])})))()},scrollToCommunity:function(){var t=this.$route.query,e=void 0===t?{}:t;null!=e&&e.type&&"community"===(null==e?void 0:e.type)&&this.$nextTick((function(){var t=document.querySelector("#officialAiboxId").offsetTop-20;window.scrollTo({top:t,behavior:"smooth"})}))}}},C=(n(5026),Object(c.a)(w,(function(){var t=this,e=t._self._c;return e("div",{ref:"aiList",staticClass:"aiList"},[t.isShowApplication?e("h2",{staticClass:"title"},[t._v(t._s(t.$t("toolsPage1")))]):t._e(),t._v(" "),t.isShowApplication?e("div",{staticClass:"desc"},[t._v(t._s(t.$t("swift_ai_apps_newsub")))]):t._e(),t._v(" "),e("div",{ref:"cnt",staticClass:"c-fast-tools-card-list"},t._l(t.cardList,(function(t){return e("card-item",{key:t.type,attrs:{"card-info":t}})})),1),t._v(" "),t.isShowApplication?e("div",{attrs:{id:"officialAiboxId"}},[e("div",{staticClass:"box-head"},[e("div",{staticClass:"left"},[e("h2",{staticClass:"title"},[t._v(t._s(t.$t("Community_AI")))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$t("commu_ai_apps_newsub")))])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"more-btn",on:{click:t.goToAppHome}},[e("div",{staticClass:"btn-text"},[t._v(t._s(t.$t("viewMore")))]),t._v(" "),e("i",{staticClass:"el-icon-arrow-right"})])])]),t._v(" "),e("div",{ref:"aiAppWraper",staticClass:"c-fast-tools-card-list"},[e("HyWaterfallFlowList",{ref:"HyWaterfallFlowListRef",attrs:{list:t.data,containerRef:t.$refs.aiAppWraper,waterAllListFn:function(){return t.waterfallList},fixedRatios:[194,280],cols:6}}),t._v(" "),t.loading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loadBox"}):t._e(),t._v(" "),t.data.length?e("div",{staticClass:"more"},[e("div",{staticClass:"more-main",on:{click:t.goToAppHome}},[e("div",{staticClass:"more-text"},[t._v(t._s(t.$t("viewMore")))]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})])]):t._e()],1)]):t._e()])}),[],!1,null,"3cb59670",null));e.a=C.exports},5887:function(t,e,n){"use strict";n.r(e);var o=n(0),component=Object(o.a)({},(function(){return(0,this._self._c)("div",{staticClass:"easy-creation"})}),[],!1,null,null,null);e.default=component.exports},614:function(t,e,n){"use strict";n(16),n(18),n(11),n(12),n(13),n(8),n(7);var o=n(3),r=n(2),l=(n(20),n(19),n(6),n(31),n(65),n(4),n(28),n(43),n(21),n(77),n(44),n(39)),c=n(256),d=n(1),v=n(10),h=n(38),f=n(53),m=n(361);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={components:{AudioPlayer:c.a,BaseAvatar:f.default,Report:m.default},watch:{$route:{handler:function(){var t;null===(t=this.$refs)||void 0===t||null===(t=t.myPopover)||void 0===t||t.doClose()}}},props:{behaviorInfoSub:{type:String,default:"from_audio_model"},behaviorInfo:{type:String,default:"on_ai_audio_create_detail_page"},deleteSure:Boolean,showPlayer:{type:Boolean,default:!0},modelPlay:Boolean,url:{type:String,default:""},showMoreList:Boolean,showMore:{type:Boolean,default:!0},customStyle:{type:Object,default:function(){return{background:"#1A1D23"}}},item:{type:Object,default:function(){}},obj:{type:Object,default:function(){}},handleOptions:{type:Array,default:function(){return["report","share","download"]}}},computed:y(y(y(y({},Object(d.c)("user",["isLoggedIn"])),Object(d.e)("user",["userInfo","token"])),Object(d.e)("payment",["paymentInfo"])),{},{isMine:function(){var t=this;return function(e){var n,o;return(null==e||null===(n=e.author)||void 0===n?void 0:n.id)==(null===(o=t.userInfo)||void 0===o?void 0:o.id)}},moreActions:function(){var t=this;return this.handleEnum.filter((function(e){return t.handleOptions.includes(e.type)}))},targetItem:function(){var t;return{id:null===(t=this.item)||void 0===t?void 0:t.id,obj_type:16}}}),data:function(){return{handleEnum:[{label:"Report",type:"report",icon:"icon-jubao3"},{label:"Download",type:"download",icon:"icon-icon-Download"},{label:"Share",type:"share",icon:"icon-icon_share"},{label:"Edit",type:"edit",icon:"icon-icon-edit"},{label:"Delete",type:"del",icon:"icon-moveDelete"}],isSeeking:!1,currentTime:0,playIconCustomStyle:{position:"unset !important"}}},methods:{clickPlayer:function(){console.log(99999)},getPersonalInfoUrl:function(){var t,e,n=(null===(t=this.obj)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id)||"",o=(null===(e=this.userInfo)||void 0===e?void 0:e.id)||"",path="/user/"+encodeURIComponent(n);return o==n&&(path="/personal"),path},jumpToOtherUser:function(){var t;this.$logEvent("log_actions",{operation:"click_author_image",behavior_info:"on_ai_audio_list",behavior_info_sub:null===(t=this.item)||void 0===t?void 0:t.id});var path=this.getPersonalInfoUrl();this.token?window.open(path,"_blank"):this.$EventBus.$emit("openLoginDialog",{callBack:function(){window.open(path,"_blank")}})},handleSeeMore:function(){var t=this.$route.path.indexOf("/share");if(-1!==t){var e=this.$route.path.slice(0,t);this.$router.replace(e)}},handleActions:function(t){var e=this;switch(console.log(t),t){case"del":if(this.$logEvent("log_actions",{operation:"click_delete",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){e.handleDel()}});this.handleDel();break;case"share":this.$logEvent("log_actions",{operation:"click_share",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),this.handleShare();break;case"download":if(this.$logEvent("log_actions",{operation:"click_download",behavior_info:this.behaviorInfo,behavior_info_sub:this.behaviorInfoSub}),!this.isLoggedIn)return void this.$EventBus.$emit("openLoginDialog",{callBack:function(){e.handleDownload()}});this.handleDownload()}},handleDel:function(){var t=this;this.$confirm(this.$t(this.deleteSure?"audioDelSoundQuery":"audioDeledQuery"),this.$t("Tip"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),customClass:"collectConfirm",type:"warning"}).then(Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.deleteSure){e.next=6;break}return e.next=3,Object(h.hb)(null===(n=t.item)||void 0===n?void 0:n.id);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(h.ib)({ids:[null===(o=t.item)||void 0===o?void 0:o.id]});case 8:e.t0=e.sent;case 9:r=e.t0,l=r.status,1e4===(void 0===l?{}:l).code&&(t.$message.success(t.$t("deleteSuccess")),t.$emit("updateList"));case 12:case"end":return e.stop()}}),e)}))))},handleDownload:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTts();case 2:if(l=e.sent,console.log("downlaodUrl--",l),l){e.next=7;break}return t.$message.warning(t.$t("taskOperateFailed")),e.abrupt("return");case 7:return c=t.$createAudioPlayer(l,null,{mimeType:"audio/mpeg"}),e.prev=8,e.next=11,c.download();case 11:(d=e.sent).success||(t.$message.warning(t.$t("taskOperateFailed")),console.error("Download failed: ".concat(d.error))),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),t.$message.warning(t.$t("taskOperateFailed")),console.error("An error occurred during download:",e.t0);case 19:v=null==t||null===(n=t.paymentInfo)||void 0===n?void 0:n.productLevel,h=null===(o=t.$parent)||void 0===o||null===(o=o.detailsData)||void 0===o?void 0:o.stat,t.$dotReport({action:"download",obj_no:null===(r=t.item)||void 0===r?void 0:r.timbre_id,obj_type:16,vip:v,stat:h});case 22:case"end":return e.stop()}}),e,null,[[8,15]])})))()},getTts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v={author_id:(null===(n=t.item)||void 0===n?void 0:n.author_id)||(null===(o=t.item)||void 0===o||null===(o=o.author)||void 0===o?void 0:o.id)||t.authorId,scene:"trial",timbre_id:(null===(r=t.item)||void 0===r?void 0:r.timbre_id)||(null===(l=t.item)||void 0===l?void 0:l.id),text:null===(c=t.item)||void 0===c?void 0:c.text,voice_id:null===(d=t.item)||void 0===d?void 0:d.id},t.modelPlay&&delete v.voice_id,e.next=4,Object(h.db)(v);case 4:if(1e4!==(f=e.sent).status.code){e.next=9;break}return e.abrupt("return",(null===(m=f.data)||void 0===m?void 0:m.url)||"");case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})))()},handleShare:function(){var t,e,n,o;Object(l.i)({items:[{action:"share",obj_no:null===(t=this.item)||void 0===t?void 0:t.id,obj_type:16}]});var r=location.host+this.localePath("/ai-audio/detail/".concat((null===(e=this.obj)||void 0===e||null===(e=e.timbre)||void 0===e?void 0:e.id)||(null===(n=this.obj)||void 0===n?void 0:n.id),"/share/").concat(null===(o=this.item)||void 0===o?void 0:o.id));Object(v.g)(r),this.$message.success(this.$t("CopiedURLToClipboard"))},formatTime:function(t){if(0===t)return"00:00";if(t<60&&t%1!=0&&(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return t.toFixed(1);var e=Math.floor(t/60),n=Math.floor(t%60),o=e.toString().padStart(2,"0"),r=n.toString().padStart(2,"0");return"".concat(o,":").concat(r)}}},C=w,O=(n(5416),n(0)),component=Object(O.a)(C,(function(){var t,e,n,o=this,r=o._self._c;return r("div",{staticClass:"audio-play-list-item",style:o.customStyle},[o._t("seeMore",(function(){return[r("span",{directives:[{name:"show",rawName:"v-show",value:o.showMoreList,expression:"showMoreList"}],staticClass:"see-more",on:{click:o.handleSeeMore}},[o._v("\n      "+o._s(o.$t("viewMore"))+"\n      "),r("i",{staticClass:"el-icon-d-arrow-right"})])]})),o._v(" "),o.showMore?r("el-popover",{ref:"myPopover",attrs:{placement:"bottom-end","popper-class":"water-fall-popover","append-to-body":!1,"visible-arrow":!1,"popper-options":{boundariesElement:"body"},width:"100",trigger:"click"}},[r("div",{staticClass:"pop-btns flex"},[o._l(o.moreActions,(function(t){return["report"===t.type?r("Report",{key:t.type,attrs:{targetItem:o.targetItem,isBack:t.isBack}},[r("button",[r("span",{staticClass:"pop-btns-text"},[o._v(o._s(o.$t(t.label)))]),o._v(" "),r("span",{staticClass:"pop-btns-icon"},[r("i",{staticClass:"iconfont",class:t.icon})])])]):o._e(),o._v(" "),["report"].includes(t.type)?o._e():r("button",{directives:[{name:"show",rawName:"v-show",value:"del"!==t.type||(o.isMine(o.obj)||o.deleteSure),expression:"action.type === 'del' ? isMine(obj) || deleteSure : true"}],key:t.type,attrs:{"data-event":"click_action_item","data-id":t.type},on:{click:function(e){return e.preventDefault(),o.handleActions(t.type)}}},[r("span",{staticClass:"pop-btns-text"},[o._v(o._s(o.$t(t.label)))]),o._v(" "),r("span",{staticClass:"pop-btns-icon"},[r("i",{staticClass:"iconfont",class:t.icon})])])]}))],2),o._v(" "),r("div",{staticClass:"login-waterFall-btn-icon",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"iconfont icon-more"})])]):o._e(),o._v(" "),o._t("custom_header",(function(){var t,e,n,l;return[r("el-tooltip",{attrs:{"popper-class":"custom-tips-popper custom-tips-popper-role",effect:"light",placement:"bottom"}},[r("div",{staticClass:"tooltip-txt",attrs:{slot:"content"},slot:"content"},[o._v("\n        "+o._s((null===(t=o.item)||void 0===t?void 0:t.txt)||(null===(e=o.item)||void 0===e?void 0:e.text)||o.$t("no_data"))+"\n      ")]),o._v(" "),r("div",{staticClass:"header ellipsis-two-lines"},[o._v("\n        "+o._s((null===(n=o.item)||void 0===n?void 0:n.txt)||(null===(l=o.item)||void 0===l?void 0:l.text)||o.$t("no_data"))+"\n      ")])])]}),{data:o.obj}),o._v(" "),o.showPlayer?r("div",{staticClass:"audio-player"},[r("div",{staticClass:"audio-player-left",on:{click:o.jumpToOtherUser}},[r("BaseAvatar",{attrs:{userData:null===(t=o.obj)||void 0===t?void 0:t.author,size:28,theme:"dark"}}),o._v(" "),r("span",{staticClass:"name"},[o._v(o._s(null===(e=o.obj)||void 0===e||null===(e=e.author)||void 0===e?void 0:e.name))])],1),o._v(" "),r("div",{staticClass:"audio-player-right"},[r("AudioPlayer",o._b({attrs:{item:o.item,modelPlay:o.modelPlay,logParams2:{operation:"click_broadcast",behavior_info:"on_ai_audio_list",behavior_info_sub:null===(n=o.item)||void 0===n?void 0:n.id},playIconCustomStyle:o.playIconCustomStyle,"data-event":"click_audio_player"}},"AudioPlayer",o.$attrs,!1))],1)]):o._e(),o._v(" "),o._t("createIng")],2)}),[],!1,null,"4dc78d06",null);e.a=component.exports;installComponents(component,{BaseAvatar:n(53).default})},615:function(t,e,n){"use strict";n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2),r=n(1);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={name:"HeadTop",components:{UserPopover:n(360).a},computed:c(c({},Object(r.c)("user",["isLoggedIn","companyStatus"])),Object(r.e)("user",["userInfo","cdnHost"])),methods:{goRoute:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",e=arguments.length>2?arguments[2]:void 0;if(this.isLoggedIn&&!t)this.$router.push(this.localePath(path));else if(t&&!this.isLoggedIn){var n="https://".concat(this.cdnHost,"/static/upload/20241128/d41378aa-7629-47b6-b0f1-f4eee435b932.png");this.$EventBus.$emit("openLoginDialog",{backGroundUrl:n||"",redirect:path,autoActive:!0}),e&&this.$logEvent("log_actions",{operation:"register_popup",behavior_info:e})}else this.$router.push(this.localePath(path))},openLang:function(){this.$EventBus.$emit("openLangDialog")}}},v=d,h=(n(5422),n(0)),component=Object(h.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"head-top w-full"},[e("div",{staticClass:"header-content flex justify-between items-center"},[e("div",{staticClass:"left-img",on:{click:function(e){return t.goRoute(!1)}}},[e("img",{staticClass:"logo",attrs:{src:n(315),alt:"SeaArt AI",loading:"lazy"}})]),t._v(" "),e("div",{staticClass:"right flex items-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"tools-item lang flex justify-center items-center",attrs:{title:t.$t("Language")},on:{click:t.openLang}},[e("i",{staticClass:"iconfont icon-lang"})]),t._v(" "),e("div",{staticClass:"check-avatar",on:{click:function(e){return t.goRoute(!0,"/ai-headshot-creations","click_view_my_ai_profile")}}},[t._v("\n        "+t._s(t.$t("checkAvatar"))+"\n      ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],staticClass:"login-btn flex justify-center items-center"},[e("div",{staticClass:"btn1 flex items-center justify-center",on:{click:function(e){return t.goRoute(!0,"/","click_register")}}},[t._v("\n          "+t._s(t.$t("Register"))+"\n        ")]),t._v(" "),e("div",{staticClass:"btn flex items-center justify-center",on:{click:function(e){return t.goRoute(!0,"/","click_login")}}},[t._v("\n          "+t._s(t.$t("LogIn"))+"\n        ")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],staticClass:"userCard"},[e("user-popover")],1)])])])}),[],!1,null,"3ca7d507",null);e.a=component.exports},616:function(t,e,n){"use strict";var o={name:"AvatarFrame"},r=(n(5423),n(0)),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"homePage-container"},[t("div",{staticClass:"homePage_pre-container"},[this._t("default")],2)])])}),[],!1,null,"a504cdb4",null);e.a=component.exports},788:function(t,e,n){"use strict";n.r(e);var o=n(789),r=n.n(o);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);e.default=r.a},789:function(t,e){},825:function(t,e,n){"use strict";n(19),n(32),n(16),n(24),n(4),n(28),n(21),n(44);var o=n(477),r=(n(11),n(6),n(12),n(13),n(8),n(7),n(2));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=n(64),v=n(9),h=n(48);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={props:{tabActive:{type:Number,default:1}},data:function(){return{tabList:v.y,tabActItem:{label:this.$t("Explore"),text:"作品",value:1}}},mounted:function(){(this.$isChinaSite||Object(h.a)(this))&&(this.tabList=this.tabList.filter((function(t){return 9!==t.value})))},methods:{changeTab:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tabActItem=m({},t),this.$emit("onChange",m({},t))},getHref:function(t){var e=this.$route.params.keyword;return this.localePath("/search".concat(t.path,"/").concat(e))}}},y=_,w=(n(5193),n(0)),C=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabs-box-list flex",attrs:{"data-group":"search_tab"}},t._l(t.tabList,(function(n){return e("a",{key:n.value,staticClass:"item",class:t.tabActive===n.value&&"active",attrs:{href:t.getHref(n),"data-id":n.value,"data-event":"click_all_search_tab","data-eventName":"log_action_front_search","data-desc":"点击全局搜索tab"},on:{click:function(e){return e.preventDefault(),t.changeTab(n)}}},[t._v("\n    "+t._s(t.$t(n.label))+"\n  ")])})),0)}),[],!1,null,"fdd20138",null).exports,O={props:{text:{type:Object,default:function(){return{}}}},data:function(){return{nodataImg:n(669)}}},x=(n(5194),Object(w.a)(O,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"nodata-box"},[e("div",{staticClass:"no-img"},[e("el-image",{staticStyle:{width:"90px",height:"66px"},attrs:{src:t.nodataImg}})],1),t._v(" "),e("div",{staticClass:"no-text"},[e("span",[t._v(t._s(t.text.left||""))]),t._v(" "),t.text.word?e("span",{staticClass:"taget-word"},[t._v("“"+t._s(t.text.word||"")+"”")]):t._e(),t._v(" "),e("span",[t._v(t._s(t.text.right||""))])])])])}),[],!1,null,"52d0d473",null).exports);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=n(36);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var $={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterHomeArtwork)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},P=$,T=(n(5195),Object(w.a)(P,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},logEventData:I({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"ae14c3d0",null).exports),D=n(82);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var A={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,AnliList:T},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Explore")+"，"+this.$t("searchNoRight")+this.$t("Explore")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.isReq=!1,this.hasMore=!0,this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,l=e.type,c=e.keywordEn,param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:c,obj_type:l,url:o},this.pageObj);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},E=A,M=(n(5196),Object(w.a)(E,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},logEventData:c({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"87ca676e",null).exports);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(22);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var V={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterModelRecommend)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},H=V,z=(n(5197),Object(w.a)(H,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:F({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"1c8c65a6",null).exports),W=(n(31),n(18),{data:function(){return{tagIndex:"hot",typeOption:[{name:"Hot",id:"hot",icon:"hot"},{name:"New",id:"new",icon:"new1"}]}},methods:{setIcon:function(){var t=this,e="hot";return this.typeOption.forEach((function(n){t.tagIndex==n.id&&(e=n.icon)})),e},handleCommand:function(t){this.tagIndex=t,this.$emit("onChange",t)}}}),G=(n(5198),Object(w.a)(W,(function(){var t=this,e=t._self._c;return e("div",[e("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[e("div",{staticClass:"el-dropdown-link"},["score"===t.tagIndex?e("div",[e("i",{staticClass:"iconfont icon-icon-relativity"}),t._v(" "),e("span",[t._v(t._s(t.$t("relevanceSearch")))])]):t._e(),t._v(" "),"score"!==t.tagIndex?e("div",[e("i",{class:"iconfont icon-".concat(t.setIcon())}),t._v(" "),e("span",[t._v(t._s(t.$t(t.tagIndex.charAt(0).toUpperCase()+t.tagIndex.slice(1))))])]):t._e(),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.typeOption,(function(n,o){return e("el-dropdown-item",{key:o,attrs:{command:n.id}},[e("div",{staticClass:"el-dropdown-item"},["score"!==n.id?e("i",{staticClass:"iconfont iconfont-1",class:"icon-".concat(n.icon)}):t._e(),t._v(" "),"score"===n.id?e("i",{staticClass:"iconfont icon-icon-relativity",staticStyle:{"margin-right":"12px"}}):t._e(),t._v(" "),e("span",[t._v(t._s(t.$t(n.name)))])])])})),1)],1)],1)}),[],!1,null,"fadc9a16",null).exports),Y=n(14),Q=(n(398),n(49),n(399),n(71)),J={data:function(){return{typeIndex:"model",modelTypeSelect:[],baseModelSelect:[],modelTypes:v.db,baseModels:[],baseModelMap:{}}},computed:{lang:function(){return this.$i18n.locale}},created:function(){this.getBaseModels()},methods:{getBaseModels:function(){var t=this;Object(Q.a)({scene:2}).then((function(e){var n;1e4===e.status.code&&(t.baseModels=(null===(n=e.data)||void 0===n||null===(n=n.base_model_select_options)||void 0===n?void 0:n.map((function(e){return t.baseModelMap[e.val]=e.vals||[],e.val})))||[])}))},onFilterReset:function(){this.isReq||(this.modelTypeSelect=[],this.baseModelSelect=[],this.$emit("onChange",{model:this.modelTypeSelect,base:this.baseModelSelect}))},onFilter:function(t,e){var n=this;if(!this.isReq){this.$logEvent("log_actions",{operation:"click_modeltype_filter_button_on_home"}),1==e?this.modelTypeSelect.includes(t)?this.modelTypeSelect.forEach((function(e,o){e==t&&n.modelTypeSelect.splice(o,1)})):this.modelTypeSelect.push(t):this.baseModelSelect.includes(t)?this.baseModelSelect.forEach((function(e,o){e==t&&n.baseModelSelect.splice(o,1)})):this.baseModelSelect.push(t),"recommend"==this.tagIndex&&(this.tagIndex="hot");var base=this.baseModelSelect.flatMap((function(t){var e;return[t].concat(Object(Y.a)((null===(e=n.baseModelMap)||void 0===e?void 0:e[t])||[]))}));this.$emit("onChange",{model:this.modelTypeSelect,base:base})}}}},X=(n(5199),Object(w.a)(J,(function(){var t=this,e=t._self._c;return e("div",["model"==t.typeIndex?e("el-popover",{attrs:{placement:"bottom","popper-class":"homeFilter",trigger:"hover"}},[e("div",{staticClass:"filterCnt"},[t.lang.includes("zh")?e("div",{staticClass:"filterTit"},[t._v("\n        "+t._s(t.$t("Model")+t.$t("Type"))+"\n      ")]):e("div",{staticClass:"filterTit"},[t._v(t._s(t.$t("Model")+" "+t.$t("Type")))]),t._v(" "),e("div",{staticClass:"filterList"},t._l(t.modelTypes,(function(n,o){return e("div",{key:o,staticClass:"filterItem",class:{AfilterItem:t.modelTypeSelect.includes(n.value)},on:{click:function(e){return t.onFilter(n.value,1)}}},[t.modelTypeSelect.includes(n.value)?e("i",{staticClass:"el-icon-check"}):t._e(),t._v(" "),e("span",[t._v(t._s(n.label))])])})),0),t._v(" "),e("div",{staticClass:"filterTit",staticStyle:{"margin-top":"16px"}},[t._v(t._s(t.$t("BaseModel")))]),t._v(" "),e("div",{staticClass:"filterList"},t._l(t.baseModels,(function(n,o){return e("div",{key:o,staticClass:"filterItem",class:{AfilterItem:t.baseModelSelect.includes(n)},on:{click:function(e){return t.onFilter(n,2)}}},[t.baseModelSelect.includes(n)?e("i",{staticClass:"el-icon-check"}):t._e(),t._v(" "),e("span",[t._v(t._s(n))])])})),0),t._v(" "),e("div",{staticClass:"filterReset graBorder",on:{click:t.onFilterReset}},[t._v("\n        "+t._s(t.$t("resetSelection"))+"\n      ")])]),t._v(" "),e("el-badge",{staticClass:"item",attrs:{slot:"reference",value:t.modelTypeSelect.length+t.baseModelSelect.length,hidden:t.modelTypeSelect.length+t.baseModelSelect.length==0},slot:"reference"},[e("div",{staticClass:"filterBox"},[e("div",[e("i",{staticClass:"iconfont icon-a-filterIcon"}),t._v(" "),e("span",[t._v(t._s(t.$t("Filter")))])]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})])])],1):t._e()],1)}),[],!1,null,"741606ea",null).exports);function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tt={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,AnliList:z,MySelect:G,MySelectModel:X},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot",base_models:[],model_types:[]},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("AIModel")+"，"+this.$t("searchNoRight")+this.$t("AIModel")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=Z(Z({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore?(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}}))):this.isReq=!1}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},changModel:function(t){this.formData.base_models=t.base||[],this.formData.model_types=t.model||[],this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.isReq=!1,this.hasMore=!0,this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},et=(n(5200),Object(w.a)(tt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelectModel",{staticStyle:{"margin-right":"10px"},on:{onChange:t.changModel}}),t._v(" "),e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:N({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"814aab2e",null).exports);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=lt(lt({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallTagList)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},ut=(n(5201),Object(w.a)(ct,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},isUser:!0,logEventData:ot({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"1b0953ee",null).exports);function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:ut},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Tags")+"，"+this.$t("searchNoRight")+this.$t("Tags")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=vt(vt({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},gt=(n(5202),Object(w.a)(ht,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},isUser:!0,logEventData:at({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"680af7a8",null).exports);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=wt(wt({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallAccountList)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Ot=(n(5203),Object(w.a)(Ct,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},isUser:!0,logEventData:bt({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"ca57f508",null).exports);function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var It={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:Ot},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("User")+"，"+this.$t("searchNoRight")+this.$t("User")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=kt(kt({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},jt=(n(5204),Object(w.a)(It,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},isUser:!0,logEventData:mt({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"00bf46c4",null).exports);function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Lt={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterArtworkRecommend)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},At=Lt,Et=(n(5205),Object(w.a)(At,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:Tt({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"6b00dd9e",null).exports);function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nt={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,AnliList:Et,MySelect:G},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Post")+"，"+this.$t("searchNoRight")+this.$t("Post")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=Rt(Rt({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Ut=(n(5206),Object(w.a)(Nt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:$t({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"57f08641",null).exports);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qt={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=Wt(Wt({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallWorkfolw)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Gt=(n(5207),Object(w.a)(qt,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:Ht({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"86e59664",null).exports);function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Jt={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:Gt},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("WorkFlow")+"，"+this.$t("searchNoRight")+this.$t("WorkFlow")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=Qt(Qt({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Xt=(n(5208),Object(w.a)(Jt,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],logEventData:Bt({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"43afcc10",null).exports);function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ne={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=ae(ae({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterAiApp)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},oe=(n(5209),Object(w.a)(ne,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:ee({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"cb22ecf8",null).exports);function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:oe},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("aiapply")+"，"+this.$t("searchNoRight")+this.$t("aiapply")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=re(re({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},ce=(n(5210),Object(w.a)(le,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],logEventData:Zt({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"2b77b854",null).exports);function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var ge={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterDesigntRecommend)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},fe=ge,me=(n(5211),Object(w.a)(fe,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:ve({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"fb3e347a",null).exports);function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ye={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:me},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("Canvas")+"，"+this.$t("searchNoRight")+this.$t("Canvas")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=be(be({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},we=(n(5212),Object(w.a)(ye,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],logEventData:de({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"648a9022",null).exports);function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var je={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterCharacterRecommend)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Se=je,$e=(n(5213),Object(w.a)(Se,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:ke({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"4120f41e",null).exports);function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var De={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:$e},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("digitalHuman")+"，"+this.$t("searchNoRight")+this.$t("digitalHuman")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=Te(Te({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Le=(n(5214),Object(w.a)(De,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:Oe({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"e543d842",null).exports);function Ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fe={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=Ue(Ue({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallAiVideo)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Be=(n(5215),Object(w.a)(Fe,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},logEventData:Re({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"1d6bfb54",null).exports);function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ze={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:Be},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("aiVideName")+"，"+this.$t("searchNoRight")+this.$t("aiVideName")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=He(He({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},We=(n(5216),Object(w.a)(ze,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],logEventData:Ee({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"261cae1c",null).exports);function qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ke={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=Xe(Xe({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallAiAudio)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Ze=(n(5217),Object(w.a)(Ke,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},logEventData:Qe({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"cae18132",null).exports);function ti(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ii={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:Ze},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("AIAudio")+"，"+this.$t("searchNoRight")+this.$t("AIAudio")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=ei(ei({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];c=c.map((function(e){return e.obj_filter=t.formData.order_by,e})),t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},ai=(n(5218),Object(w.a)(ii,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},fixedRatios:[260,346],logEventData:Ge({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"4139585e",null).exports);function ni(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ni(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?si(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ci(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ci(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var di={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=ui(ui({},this.pageObj),{},{order_by:"hot"});this.hsaLoading=!0,Object(j.getWaterfallAiEbook)(param).then((function(e){var n,o=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(o),t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}}}},pi=(n(5219),Object(w.a)(di,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},isNovel:"",logEventData:ri({},t.SearchApp.getExposureParams())},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"cb1799b6",null).exports);function vi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vi(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gi={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:pi},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("aiNovelName")+"，"+this.$t("searchNoRight")+this.$t("aiNovelName")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=hi(hi({obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()}}},fi=(n(5220),Object(w.a)(gi,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],isNovel:"",logEventData:oi({},t.SearchApp.getExposureParams())},on:{load:t.getList}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"79133017",null).exports);function mi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mi(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bi(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var Ci={inject:["SearchApp"],components:{HyWaterfallFlowList:d.default},data:function(){return{hsaLoading:!1,isReq:!1,listData:[],pageObj:{page:1,page_size:35,offset:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var param=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wi(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.pageObj);this.hsaLoading=!0,Object(j.getWaterHomeArtwork)(param).then((function(e){var n,o,r=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(r),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||"",t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1})).catch((function(){t.hsaLoading=!1,t.isReq=!1}))}},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Oi=Ci,xi=(n(5221),Object(w.a)(Oi,(function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.listData},logEventData:yi({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e()])}),[],!1,null,"7f6f973c",null).exports);function ki(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ji={inject:["SearchApp"],components:{Tabs:C,HyWaterfallFlowList:d.default,NoSearchData:x,MySelect:G,AnliList:xi},props:{baseParam:{type:Object,default:function(){return{}}},changeType:{type:Function,default:function(){return null}}},data:function(){return{hsaLoading:!1,isReq:!1,hasMore:!0,hasNoWordRes:!1,listData:[],formData:{order_by:"hot"},pageObj:{page:1,page_size:35,offset:0}}},computed:{showNoData:function(){return this.hasNoWordRes&&!this.hsaLoading&&!this.listData.length},noDataWord:function(){return{left:this.$t("searchNoLeft"),word:this.baseParam.keyword,right:this.$t("ai_tools_4")+"，"+this.$t("searchNoRight")+this.$t("ai_tools_4")}}},updated:function(){this.hasNoWordRes=!0},methods:{initParam:function(){this.pageObj.page=1,this.pageObj.offset=0,this.isReq=!1,this.hasMore=!0,this.listData=[],this.getList()},getList:function(){var t=this;if(!this.isReq){this.isReq=!0;var e=this.baseParam,n=e.keyword,o=e.url,r=e.type,l=e.keywordEn,param=Ii(Ii({scene:"square",obj_name:o?"":n.replace(/\-/g," "),obj_name_en:l,obj_type:r,url:o},this.pageObj),this.formData);this.hasMore&&(this.hsaLoading=!0,Object(D.a)(param).then((function(e){var n,o,r,l,c=(null===(n=e.data)||void 0===n?void 0:n.items)||[];t.listData=t.listData.concat(c),t.pageObj.offset=(null===(o=e.data)||void 0===o?void 0:o.offset)||0,t.pageObj.page++,t.hsaLoading=!1,t.isReq=!1,t.hasMore=e.data.has_more,t.SearchApp.setLogEventId({request_id:null===(r=e.status)||void 0===r?void 0:r.request_id,search_keyword:null===(l=e.data)||void 0===l?void 0:l.search_word_en}),0===t.listData.length&&t.SearchApp.onSearchNoResult()})).catch((function(e){if(t.hsaLoading=!1,t.isReq=!1,150002===e.code){var n,o=(null==e||null===(n=e.msg)||void 0===n||null===(n=n.split(":"))||void 0===n?void 0:n.pop())||"";t.SearchApp.onSearchNoResult({sensitive_keyword:o})}})))}},onChangeTab:function(t){var e=t.value;this.changeType&&this.changeType(e)},changeOpin:function(t){this.formData.order_by=t,this.pageObj.page=1,this.pageObj.offset=0,this.listData=[],this.getList()},allAction:function(t){this.SearchApp.onWaterfallCardAction(t)}}},Si=(n(5222),Object(w.a)(ji,(function(){var t=this,e=t._self._c;return e("div",[e("NoSearchData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}],attrs:{text:t.noDataWord}}),t._v(" "),e("div",{staticClass:"screen-nav-box flex_m"},[e("div",{staticClass:"left"},[e("Tabs",{attrs:{tabActive:t.baseParam.type},on:{onChange:t.onChangeTab}})],1),t._v(" "),e("div",{staticClass:"right flex"},[e("MySelect",{on:{onChange:t.changeOpin}})],1)]),t._v(" "),t.showNoData?t._e():e("div",{ref:"wraper1"},[e("HyWaterfallFlowList",{attrs:{list:t.listData,container:"wraper1",waterAllListFn:function(){return t.dataList},fixedRatios:[260,346],logEventData:_i({},t.SearchApp.getExposureParams())},on:{load:t.getList,onAllAction:t.allAction}})],1),t._v(" "),t.hsaLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.hsaLoading,expression:"hsaLoading"}],staticClass:"loading-box"}):t._e(),t._v(" "),t.showNoData?e("AnliList"):t._e()],1)}),[],!1,null,"a647a5e4",null).exports),$i=n(10),Pi={name:"searchView",provide:function(){return{SearchApp:this}},components:{TopMenu:o.a,WorksPlan:M,UserPlan:jt,ModelPlan:et,TagslPlan:gt,PostWorksPlan:Ut,WorkFlowPlan:Xt,SwtftAppPlan:ce,DesignTmpPlan:we,TavernPlan:Le,VideoPlan:We,AudioPlan:ai,NovelPlan:fi,FilterPlan:Si},data:function(){return{baseParam:{keyword:this.$route.params.keyword,keywordEn:"",url:"",type:0},sessionId:"",page_id:"",requestId:"",enSearchKeyword:"",searchSourceType:"type_search",searchSourceObj:{}}},computed:{currentPlan:function(){return{1:"WorksPlan",8:"UserPlan",6:"TagslPlan",14:"SwtftAppPlan",9:"TavernPlan",2:"ModelPlan",4:"PostWorksPlan",15:"VideoPlan",16:"AudioPlan",21:"NovelPlan",13:"WorkFlowPlan",11:"DesignTmpPlan",20:"FilterPlan"}[this.baseParam.type]},currentRouterName:function(){return this.baseParam.type}},mounted:function(){var t=this;this.setParam(),this.setPageId(),this.initSearchSource(),this.$nextTick((function(){var e=t.baseParam.type;t.sessionId=Object($i.r)({prefix:"search"}),t.$refs["tabPlanRef".concat(e)].initParam()}))},head:function(){var t,e=this.$route.params,n=e.keyword,o=e.type;o=o||"";var r=v.y.find((function(t){return t.path.includes(o)}))||{},title=r.title,desc=r.desc;n=null===(t=n)||void 0===t?void 0:t.replace(/\-/g," "),title=this.$t(title,{name:n});var l=this.$t(desc,{name:n});return{title:title,meta:[{hid:"description",name:"description",content:l},{hid:"keywords",name:"keywords",content:n},{hid:"og:title",name:"og:title",content:title},{hid:"og:description",name:"og:description",content:l}]}},methods:{searchFun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.onSearch(t)},initSearchSource:function(t){var e=sessionStorage.getItem("search_source_type")||t||"type_search";this.searchSourceType=e,sessionStorage.removeItem("search_source_type"),this.searchSourceObj={}},setPageId:function(){var t=this.$route.params,e=t.keyword,n=t.type,o=n?"search/".concat(n,"/").concat(e):"search/".concat(e);return this.page_id=o,localStorage.setItem("search_pageId",o),o},setLogEventId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.request_id,n=t.search_keyword;this.requestId=e,this.enSearchKeyword=n,localStorage.setItem("search_requestId",e),localStorage.setItem("search_enSearchKeyword",n)},onSearchNoResult:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sensitive_keyword,e=void 0===t?"":t;this.$logEvent("log_actions",{front_operation:"exposure",event_name:"log_action_front_search",entity_name:"no_result",obj_type:this.currentRouterName,session_id:this.sessionId,page_id:this.page_id,request_id:this.requestId,search_keyword:this.baseParam.keyword,en_search_keyword:this.enSearchKeyword}),this.$xyLogEvent({front_operation:"exposure",event_name:"log_action_front_search",entity_name:"no_result",obj_type:this.currentRouterName,session_id:this.sessionId,request_id:this.requestId,search_keyword:this.baseParam.keyword,en_search_keyword:this.enSearchKeyword,sensitive_keyword:e})},getExposureParams:function(){return{log:"log_test",event_name:"log_action_front_search",entity_name:this.searchSourceType,session_id:this.sessionId,request_id:this.requestId,search_keyword:this.baseParam.keyword,en_search_keyword:this.enSearchKeyword}},onWaterfallCardAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.atype,n=t.id,o=t.cindex,r=t.obj_filter,l={goDetail:"work_card",like:"like",cancel_like:"cancel_like",collect:"collect",cancelCollect:"cancelCollect",taskRemix:"remix",imgToVideo:"video_generate"},c="".concat(n,",").concat(t.cindex);this.$logEvent("log_actions",{front_operation:"click",event_name:"log_action_front_search",entity_name:l[e],obj_type:this.currentRouterName,session_id:this.sessionId,page_id:this.page_id,position:c,request_id:this.requestId,search_keyword:this.baseParam.keyword,en_search_keyword:this.enSearchKeyword}),this.$xyLogEvent({front_operation:"click",event_name:"log_action_front_search",entity_name:l[e],entity_type:"waterfall_box",obj_type:this.currentRouterName,obj_id:n,obj_index:o,obj_filter:r,position:c})},setParam:function(){var t,e=this.$route,n=e.query,o=n.url,r=n.keywordEn,l=e.params,c=l.keyword,d=l.type;d=(null===(t=v.y.find((function(t){return t.path.includes(d)})))||void 0===t?void 0:t.value)||1,this.baseParam.keyword=c,localStorage.setItem("search_keyword",c),this.baseParam.url=o,this.baseParam.type=Number(d),this.baseParam.keywordEn=r},onSearch:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=((null===(t=this.searchSourceObj)||void 0===t?void 0:t.item)||{}).en_text,r=n.type,l=n.keyword,c=n.url,d=n.actionType,v=n.sourceType,h=n.keywordEn;this.baseParam.keyword=l,this.baseParam.keywordEn=o||h,localStorage.setItem("search_keyword",l),this.baseParam.url=c,this.baseParam.type=Number(r),v&&this.initSearchSource(v),this.$nextTick((function(){"enter"===d&&(e.sessionId=Object($i.r)({prefix:"search"})),e.$refs["tabPlanRef".concat(r)].initParam()}))},onChangeType:function(t){this.baseParam.type=Number(t),this.$refs.TopMenuRef.changeType(t),this.$logEvent("log_actions",{front_operation:"click",event_name:"log_action_front_search",entity_name:this.currentRouterName,obj_type:this.currentRouterName,session_id:this.sessionId,page_id:this.page_id,request_id:this.requestId,search_keyword:this.baseParam.keyword,en_search_keyword:this.enSearchKeyword})}}},Ti=Pi,Di=(n(5223),Object(w.a)(Ti,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-page-box"},[e("TopMenu",{ref:"TopMenuRef",staticClass:"menu-box",on:{onSearch:t.searchFun}}),t._v(" "),e("h1",[t._v(t._s(t.baseParam.keyword))]),t._v(" "),e("div",[e(t.currentPlan,{ref:"tabPlanRef".concat(t.baseParam.type),tag:"component",attrs:{baseParam:t.baseParam,changeType:t.onChangeType}})],1),t._v(" "),e("el-backtop",{attrs:{bottom:30,right:30}},[e("i",{staticClass:"el-icon-top"})])],1)}),[],!1,null,"570bd080",null));e.a=Di.exports},832:function(t,e,n){"use strict";n(11),n(6),n(12),n(13),n(8),n(4),n(7);var o=n(2);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=n(3),d=n(14),v=(n(20),n(19),n(32),n(16),n(73),n(22),n(24),n(65),n(177),n(28),n(43),n(113),n(21),n(77),n(44),n(279)),h=n(102),f=n(38),m=n(75),_=n(156),y=n(280),w=n(35),C=n.n(w),O=n(1),x=n(29),k=n(10),I=n(209),j=n(471),S=n(33),$=n(200),P=n(54),T=(n(31),{name:"ImageActionButtons",props:{visible:{type:Boolean,default:!0},buttons:{type:Array,default:function(){return[]}},maxVisibleButtons:{type:Number,default:3}},computed:{visibleButtons:function(){return this.buttons.slice(0,this.maxVisibleButtons)},hiddenButtons:function(){return this.buttons.length>this.maxVisibleButtons?this.buttons.slice(this.maxVisibleButtons):[]}},methods:{handleButtonClick:function(t){this.$emit("button-click",t)}}}),D=(n(4375),n(0)),L=Object(D.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"image-action-buttons"},[t.visible?e("div",{staticClass:"image-action-buttons-tab"},[t._l(t.visibleButtons,(function(n,o){return["slot"===n.type?[t._t(n.label)]:[e("el-tooltip",{attrs:{content:t.$t(n.label),placement:"top"}},[e("div",{key:n.code,staticClass:"action-button",on:{click:function(e){return e.stopPropagation(),t.handleButtonClick(n)}}},[e("i",{class:n.icon})])])]]})),t._v(" "),t.hiddenButtons.length>0?e("el-dropdown",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"action-button more-button"},[e("i",{staticClass:"el-icon-more"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.hiddenButtons,(function(n){return e("el-dropdown-item",{key:n.type,nativeOn:{click:function(e){return e.stopPropagation(),t.handleButtonClick(n)}}},[e("i",{class:n.icon}),t._v(" "),e("span",[t._v(t._s(t.$t(n.label)))])])})),1)],1):t._e()],2):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,"72161a73",null).exports,A=n(276),E=n(46);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},U=Object(_.a)()?"DOMMouseScroll":"mousewheel",F={post:{type:"post",label:"Post",tip:"PostTips"},imageEditing:{type:"imageEditing",label:"SmartImageEditing",tip:"SmartImageEditingTips"},animGen:{type:"animGen",label:"AnimGen",tip:"AnimTips"},extraUpscale:{type:"extraUpscale",label:"ai_tools_1",tip:"ExtraUpscale"},upscale:{type:"upscale",label:"OriginalityUpscale",tip:"WorkUpscale"},variations:{type:"variations",label:"Variations",tip:"WorkVariations"},removeBackground:{type:"removeBackground",label:"RemoveBackground"},chat:{type:"chat",label:"gpt_tab_chat",tip:"createChartacterToChat"},aiGenerateVideo:{type:"aiGenerateVideo",label:"ImageToVideo",tip:"ImageToVideoTip"},play:{type:"play",label:"play",tip:"play_tips"}},B={components:{ViewImage:I.a,AiChatCreateConfirm:v.a,textOverflowArea:j.default,DownloadVideoPop:$.default,ShowNsfw:A.default,ImageActionButtons:L},name:"FastAppImageViewer",inject:{easyTop:{default:function(){return null}}},props:{operateNumber:{type:Number,default:function(){return 1}},urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},showOperateBtn:{type:Boolean,default:function(){return!1}},message:{type:Object,default:function(){return{}}},msgId:{type:String,default:""},loraModels:{type:Object,default:function(){}},hoverBtnRenderList:{type:Array,default:function(){return[]}},nsfw:{type:Number,default:2},customForm:{type:Boolean,default:!1},isFromHistory:{type:Boolean,default:!1},isShowSaveBtn:{type:Boolean,default:!1},isFromGenerate:{type:Boolean,default:!1}},filters:{formatDateTime:function(t){var e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0"),d=e.getSeconds().toString().padStart(2,"0");return Object(k.F)(e,new Date)?"".concat(l,":").concat(c,":").concat(d):"".concat(n,"/").concat(o,"/").concat(r," ").concat(l,":").concat(c,":").concat(d)}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:N.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1},intLoraModel:[],getMetaLoading:!1,alreadySave:!1}},computed:R(R(R(R({},Object(O.c)(["isSupportWebp"])),Object(O.c)("user",["isCompanyAccount","userInfo"])),Object(O.c)("creation",["studioStyle","lab_styles","smart_edit_template_id"])),{},{getModelList:function(){var t,e,n,o=(null===(t=this.message)||void 0===t?void 0:t.art_model)||{};o=R(R({},o),{},{type:"Checkpoint"});var r=((null===(e=this.message.meta)||void 0===e?void 0:e.lora_models)||[]).map((function(t){return R(R(R({},t),(null==t?void 0:t.art_model)||{}),{},{type:"LORA"})}));return o&&null!==(n=o)&&void 0!==n&&n.id?[o].concat(Object(d.a)(r)):r},isMyMsg:function(){var t,e;return(null===(t=this.message)||void 0===t||null===(t=t.messageInfo)||void 0===t||null===(t=t.author)||void 0===t?void 0:t.id)===this.userInfo.id||!(null!==(e=this.message)&&void 0!==e&&e.messageInfo)},isShowSaveTo:function(){var t,e=this.message.img_uris,n=void 0===e?[]:e;return!!n.length&&(!(null!==(t=n[this.operateNumber-1])&&void 0!==t&&t.is_saved_personal)&&this.isMyMsg&&!this.alreadySave)},allBtnPermissionMap:function(){for(var t,e,n=(null===(t=this.currentImgInfo)||void 0===t||null===(t=t.action_capability)||void 0===t?void 0:t.edit)||[],o=(null===(e=this.currentImgInfo)||void 0===e||null===(e=e.action_capability)||void 0===e?void 0:e.extend)||[],r=[].concat(Object(d.a)(n),Object(d.a)(o)),l={},i=0;i<r.length;i++){var c=r[i];l[c.val]=c}return l},topBtnList:function(){var t,e=((null==this||null===(t=this.currentImgInfo)||void 0===t||null===(t=t.action_capability)||void 0===t?void 0:t.basic)||[]).map((function(t){return t.val})).filter((function(t){return"supportFeedback"!==t}));null!=this&&this.isShowSaveBtn||(e=e.filter((function(t){return"supportSave"!==t})));var n=e.map((function(t){return S.IMAGE_OPERATION_BTN_LIST.find((function(e){return e.permissionKey===t}))})).filter(Boolean).map((function(t){return R(R({},t),{},{type:t.code})}));return this.currentImgInfo.is_nsfw_plus&&(n=n.filter((function(t){return"deleteSingleImg"!==t.type}))).push({type:"slot",label:"more"}),n},renderBtn:function(){var t,e,n=this,o=[{type:"play",label:"play",icon:"icon_play",useText:!1,order:3,tip:"play_tips",show:!0}],r=["deleteSingleImg","save","post","imageEditing","chat"],l=null,c=null;if(this.hoverBtnRenderList.forEach((function(t){var e=R(R({},t),F[t.code]);"upscale"===t.code&&n.isStudioMode&&e.tip&&e.tip.replace("2048*2048","3072*3072"),!r.includes(t.code)&&o.push(e),"imageEditing"===t.code&&(l=e),"chat"===t.code&&(c=e)})),l&&o.unshift(l),c&&o.push(c),this.isFromHistory&&((o=o.filter((function(t){return"aiGenerateVideo"!==t.type&&"chat"!==t.type&&"imageEditing"!==t.type}))).unshift({type:"aiGenerateVideo",label:"ImageToVideo",icon:"a-icon-VideoGeneration",tip:"ImageToVideoTip"}),o.push({type:"imageEditing",label:"SmartImageEditing",icon:"icon-zhineng",tip:"SmartImageEditing"}),o.push({type:"chat",label:"gpt_tab_chat",icon:"a-home-top-personl1",tip:"createChartacterToChat"}),this.isFromGenerate&&(this.allBtnPermissionMap.imageSmartErase&&o.push({type:"aiErase",label:"ai_erase",icon:"iconfont icon-icon_zidongcachu",tip:"AIEraserKeyword",creativityTemplateId:this.allBtnPermissionMap.imageSmartErase.creativity_template_id}),this.allBtnPermissionMap.imagePartialRepainting&&o.push({type:"partialRedrawing",label:"PartialRedrawing",icon:"iconfont icon-jubuzhonghui",tip:"PartialRepainting",creativityTemplateId:this.allBtnPermissionMap.imagePartialRepainting.creativity_template_id}),this.allBtnPermissionMap.imageSmartExpand&&o.push({type:"expandImage",label:"expand_image",icon:"iconfont icon-work-picture-create-picture",tip:"ImgExtender_h2_title",creativityTemplateId:this.allBtnPermissionMap.imageSmartExpand.creativity_template_id}))),this.isVideoUrl(this.currentImg)||this.isGifUrl(this.currentImg)){var d=["chat","aiGenerateVideo","imageEditing"];o=o.filter((function(t){return!d.includes(t.type)}))}if([11,12,13,14].includes(null==this||null===(t=this.message)||void 0===t?void 0:t.task_domain_type)){var v,h,f;o=[{type:"videoExtension",icon:"a-Videoextension",label:"videoProlong",tips:"videoProlong_tips"},{type:"videoUpscale",icon:"icon-HD",label:"IntelligentUpscale",tips:"HD_video"}];var m=((null==this||null===(v=this.message)||void 0===v?void 0:v.ckpts)||[]).some((function(t){return(null==t?void 0:t.base_model_name)===S.VIDEO_MODEL_LIST["hunyuan_1.0"]}));((null===(h=this.currentImgInfo)||void 0===h?void 0:h.operation_labels)||[]).includes("videoExtend")||(o=o.filter((function(t){return"videoExtension"!==(null==t?void 0:t.type)}))),![13,14].includes(null==this||null===(f=this.message)||void 0===f?void 0:f.task_domain_type)&&m||(o=o.filter((function(t){return"videoUpscale"!==(null==t?void 0:t.type)})))}return((null===(e=this.currentImgInfo)||void 0===e?void 0:e.operation_labels)||[]).includes("smartEdit")||(o=o.filter((function(t){return"imageEditing"!==(null==t?void 0:t.type)}))),o},studioRenderList:function(){var t=this;return(this.lab_styles||[]).map((function(e){var n="labStyle_".concat(e.value.replace(/\s/g,""));return{label:t.$t(n)||e.value,id:e.value}}))},getStudioStyle:function(){var t,e=(null===(t=this.message.meta)||void 0===t||null===(t=t.lab_base)||void 0===t?void 0:t.style_selections)||[];return(this.studioRenderList||[]).filter((function(t){return e.includes(t.id)})).map((function(t){return t.label})).join("、")||""},isSdModel:function(){var t,e;return[5,"5","sdxl"].includes(null==this||null===(t=this.message)||void 0===t?void 0:t.channel)||[5,"5","sdxl"].includes(null==this||null===(e=this.message)||void 0===e?void 0:e.category)},isStudioMode:function(){var t,e;return["studio",7,"7",11].includes(null==this||null===(t=this.message)||void 0===t?void 0:t.channel)||["studio",7,"7",11].includes(null==this||null===(e=this.message)||void 0===e?void 0:e.category)},isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.getImageUrl(this.urlList[this.index].url)},currentImgInfo:function(){return this.urlList[this.index]},imgStyle:function(){var t=this.transform,e=t.scale,n=t.deg,o=t.offsetX,r=t.offsetY,l=t.enableTransition,style={transform:"scale(".concat(e,") rotate(").concat(n,"deg)"),transition:l?"transform .3s":"","margin-left":"".concat(o,"px"),"margin-top":"".concat(r,"px")};return this.mode===N.CONTAIN&&(style.maxWidth=style.maxHeight="100%"),style},viewerZIndex:function(){var t=y.a.nextZIndex();return this.zIndex>t?this.zIndex:t},checkIsAlreadyFeedback:function(){var t;return null===(t=this.currentImgInfo)||void 0===t?void 0:t.is_nsfw_appeal}}),watch:{index:{handler:function(t){this.reset(),this.onSwitch(t)}},currentImg:function(t){var e=this;this.$nextTick((function(){var t,n=null===(t=e.$refs)||void 0===t||null===(t=t.img)||void 0===t?void 0:t[0];null!=n&&n.complete||(e.loading=!0)}))}},methods:{handleGenerate:function(){this.hide(),this.handleLog("generate"),this.$emit("copyGenerationData",this.msgId)},handleJumpDetail:function(t){["",null,void 0].includes(null==t?void 0:t.id)||window.open("/models/detail/".concat(null==t?void 0:t.id),"_blank")},init:function(){var t,e=this;if(this.msgId){this.getMetaLoading=!0;var n=this.loraModels&&0===Object.keys(this.loraModels).length,o=["",null,void 0].includes(null===(t=this.message)||void 0===t?void 0:t.art_model_name),r=![this.loraModels&&this.loraModels[this.msgId]];[n,o,r].some((function(t){return t}))?Object(x.getMetaInfo)({id:this.msgId,task_flow_version:"v2"}).then((function(t){var o,r,l;if(1e4===t.status.code){e.intLoraModel=(null===(o=t.data.meta)||void 0===o?void 0:o.lora_models)||[];var c={};c[e.msgId]=e.intLoraModel;var d=(null==t||null===(r=t.data)||void 0===r?void 0:r.art_model_name)||"";if(e.$emit("uploadMate",null==t?void 0:t.data),["",null,void 0].includes(null===(l=e.message)||void 0===l?void 0:l.art_model_name)&&(e.$set(e.message,"art_model_name",d),null!=t&&t.data)){var v={},h=null==t?void 0:t.data;v.meta=(null==h?void 0:h.meta)||{},v.art_model=(null==h?void 0:h.art_model)||{},e.$emit("updateModelName",d,null==t?void 0:t.data)}n&&e.$emit("setLoraModel",c)}})).finally((function(){e.getMetaLoading=!1})):this.getMetaLoading=!1,this.intLoraModel&&!this.intLoraModel.length&&(this.intLoraModel=this.loraModels[this.msgId]||[])}},handleConfirm:function(){this.handleChat()},viewImage:function(t){this.$refs.viewImage.show(t,this.$refs.img[0],2)},isVideoUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[".mp4",".mkv",".webm",".avi",".mov",".flv",".wmv"].some((function(e){return(t||"").toLowerCase().endsWith(e)}))},isImageUrl:function(t){return/^https?:\/\/.*\.(jpg|jpeg|png|webp)$/i.test(t)},isGifUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[".gif"].some((function(e){return(t||"").toLowerCase().endsWith(e)}))},openLora:function(t){window.open("/models/detail/"+t.art_model.id)},hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var t=this;this._keyDownHandler=function(e){switch(e.stopPropagation(),e.keyCode){case 27:t.hide();break;case 32:t.toggleMode();break;case 37:t.prev();break;case 38:t.handleActions("zoomIn");break;case 39:t.next();break;case 40:t.handleActions("zoomOut")}},this._mouseWheelHandler=Object(_.b)((function(e){var n,o=e.wheelDelta?e.wheelDelta:-e.detail;["el-image-viewer__canvas task-image-viewer__canvas","el-image-viewer__img task-image-viewer__img"].includes(null==e||null===(n=e.target)||void 0===n?void 0:n.className)&&(o>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1}))})),Object(m.e)(document,"keydown",this._keyDownHandler),Object(m.e)(document,U,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(m.d)(document,"keydown",this._keyDownHandler),Object(m.d)(document,U,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(t){this.loading=!1},handleImgError:function(t){this.loading=!1,t.target.alt="加载失败"},handleMouseDown:function(t){var e=this;if(!this.loading&&0===t.button){var n=this.transform,o=n.offsetX,r=n.offsetY,l=t.pageX,c=t.pageY;this._dragHandler=Object(_.b)((function(t){e.transform.offsetX=o+t.pageX-l,e.transform.offsetY=r+t.pageY-c})),Object(m.e)(document,"mousemove",this._dragHandler),Object(m.e)(document,"mouseup",(function(t){Object(m.d)(document,"mousemove",e._dragHandler)})),t.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var t=Object.keys(N),e=(Object.values(N).indexOf(this.mode)+1)%t.length;this.mode=N[t[e]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var t=this.urlList.length;this.index=(this.index-1+t)%t}},next:function(){if(!this.isLast||this.infinite){var t=this.urlList.length;this.index=(this.index+1)%t}},handleActions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=R({zoomRate:.2,rotateDeg:90,enableTransition:!0},e),o=n.zoomRate,r=n.rotateDeg,l=n.enableTransition,c=this.transform;switch(t){case"zoomOut":c.scale>.2&&(c.scale=parseFloat((c.scale-o).toFixed(3)));break;case"zoomIn":c.scale=parseFloat((c.scale+o).toFixed(3));break;case"clocelise":c.deg+=r;break;case"anticlocelise":c.deg-=r}c.enableTransition=l}},handleOperateBtnClick:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v,h,m,_,y,w,O,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:y=(null===(o=e.urlList)||void 0===o||null===(o=o[e.index||0])||void 0===o?void 0:o.url)||"",e.handleLogEvent(null==t?void 0:t.type),n.t0=t.type,n.next="imageEditing"===n.t0?5:"chat"===n.t0?11:"post"===n.t0?18:"play"===n.t0?21:"animGen"===n.t0?24:"download"===n.t0?26:"aiGenerateVideo"===n.t0?29:"videoExtension"===n.t0?39:"save"===n.t0?44:"deleteSingleImg"===n.t0?47:"aiErase"===n.t0?50:"partialRedrawing"===n.t0?53:"expandImage"===n.t0?56:59;break;case 5:if(e.smart_edit_template_id){n.next=7;break}return n.abrupt("return");case 7:return w=1===(null===(r=e.easyTop)||void 0===r||null===(r=r.listParams)||void 0===r?void 0:r.viewMode)?(null===(l=e.message)||void 0===l||null===(l=l.banner)||void 0===l?void 0:l.cover_url)||(null===(c=e.message)||void 0===c||null===(c=c.banner)||void 0===c?void 0:c.url):null===(d=e.urlList)||void 0===d||null===(d=d[e.index||0])||void 0===d?void 0:d.url,e.$EventBus.$emit("openGenerate",{action:1,data:{activeCategory:"aiApp",creativity:{id:e.smart_edit_template_id},imgUrlList:[w]}}),e.handleLog("smartImage"),n.abrupt("break",61);case 11:return n.next=13,Object(f.S)({channel:"task",source_id:null===(v=e.message)||void 0===v?void 0:v.id});case 13:return O=n.sent,x=O.data.character_id,(void 0===x?"":x)?e.handleChat():e.$refs.aiChatCreateConfirm.show(),e.handleLog("chat"),n.abrupt("break",61);case 18:return e.handlePost(),e.handleLog("post"),n.abrupt("break",61);case 21:return e.hide(),e.openPlayModal(e.currentImg,e.currentImgInfo.index),n.abrupt("break",61);case 24:return e.handleAnimate(),n.abrupt("break",61);case 26:return Object(k.M)(null===(h=e.urlList)||void 0===h||null===(h=h[e.index||0])||void 0===h?void 0:h.url),e.handleLog("download"),n.abrupt("break",61);case 29:if(y){n.next=32;break}return n.abrupt("return");case 32:if(!e.isFromHistory){n.next=35;break}return e.$emit("openEasyVideoRecModal",y),n.abrupt("return");case 35:return e.$EventBus.$emit("openEasyVideoRecModal",y),e.$emit("onlyCloseViewer"),e.handleLog("img2vid"),n.abrupt("break",61);case 39:if(y){n.next=41;break}return n.abrupt("return");case 41:return e.$EventBus.$emit("openEasyVideoExtension",{url:(null===(m=e.currentImgInfo)||void 0===m?void 0:m.cover_url)||(null===(_=e.currentImgInfo)||void 0===_?void 0:_.url),info:R(R({},e.message),{},{banner:e.currentImgInfo||{}}),isTask:!0}),e.$emit("onlyCloseViewer"),n.abrupt("break",61);case 44:return e.$emit("imageOperate",t.type,C()(e.urlList[e.index])),e.handleLog("save"),n.abrupt("break",61);case 47:return e.$emit("handleDeleteSingleImg",t.type,C()(e.urlList[e.index])),e.handleLog("delete"),n.abrupt("break",61);case 50:return e.$emit("onlyCloseViewer"),e.$EventBus.$emit("showDialog",{name:"ImageEditingModal",data:{url:e.currentImg,type:"aiErase",appId:t.creativityTemplateId,callback:function(data){var t,n;null==e||null===(t=e.easyTop)||void 0===t||t.updateTask(data),null==e||null===(n=e.easyTop)||void 0===n||n.shouldRefreshList(!0),e.$EventBus.$emit("showDialog",{name:"GRechargeDialog",data:{}})}}}),n.abrupt("break",61);case 53:return e.$emit("onlyCloseViewer"),e.$EventBus.$emit("showDialog",{name:"ImageEditingModal",data:{url:e.currentImg,type:"partialRedrawing",appId:t.creativityTemplateId,callback:function(data){var t,n;null==e||null===(t=e.easyTop)||void 0===t||t.updateTask(data),null==e||null===(n=e.easyTop)||void 0===n||n.shouldRefreshList(!0),e.$EventBus.$emit("showDialog",{name:"GRechargeDialog",data:{}})}}}),n.abrupt("break",61);case 56:return e.$emit("onlyCloseViewer"),e.$EventBus.$emit("showDialog",{name:"ImageEditingModal",data:{url:e.currentImg,type:"expandImage",appId:t.creativityTemplateId,callback:function(data){var t,n;null==e||null===(t=e.easyTop)||void 0===t||t.updateTask(data),null==e||null===(n=e.easyTop)||void 0===n||n.shouldRefreshList(!0),e.$EventBus.$emit("showDialog",{name:"GRechargeDialog",data:{}})}}}),n.abrupt("break",61);case 59:return e.$emit("imageOperate",t.type,C()(e.urlList[e.index])),n.abrupt("break",61);case 61:e.$emit("onClickBtns",t);case 62:case"end":return n.stop()}}),n)})))()},handleLogEvent:function(t){switch(t){case"download":"click_download";break;case"chat":"click_chat";break;case"upscale":"click_creative_superscore";break;case"variations":"click_variant";break;case"aiGenerateVideo":"click_video_generate";break;case"post":"click_post";break;case"save":"click_save";break;case"deleteSingleImg":"click_delete"}},getImageUrl:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},handleChat:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,v,h,m,_,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={height:null===(n=t.message)||void 0===n||null===(n=n.banner)||void 0===n?void 0:n.height,width:null===(o=t.message)||void 0===o||null===(o=o.banner)||void 0===o?void 0:o.width,id:null===(r=t.message)||void 0===r?void 0:r.id,url:t.currentImg||(null===(l=t.message)||void 0===l||null===(l=l.banner)||void 0===l?void 0:l.url),source_account_id:(null===(c=t.message)||void 0===c||null===(c=c.messageInfo)||void 0===c||null===(c=c.author)||void 0===c?void 0:c.id)||(null===(d=t.userInfo)||void 0===d?void 0:d.id),channel:"task"},e.next=3,Object(f.S)({channel:"task",source_id:h.id});case 3:if(m=e.sent,_=(null==m?void 0:m.data)||{},y=_.can,2!==(void 0===y?2:y)){e.next=8;break}return t.$message.warning(t.$t("chatFail")),e.abrupt("return");case 8:if(!t.isShowSaveTo||1===t.nsfw){e.next=12;break}return e.next=11,t.handleSave(h);case 11:return e.abrupt("return");case 12:localStorage.setItem("createParams",JSON.stringify(h)),w="/cyberPubPage/".concat(null===(v=t.message)||void 0===v?void 0:v.id,"?quickChat=true&source=work"),window.open(t.localePath(w),"_blank");case 15:case"end":return e.stop()}}),e)})))()},handleSave:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,v,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.length>0&&void 0!==t[0]?t[0]:null,r=e.message,l=r.id,c=void 0===l?"":l,d=r.img_uris,v=(void 0===d?[]:d)[e.operateNumber-1].index,f=void 0===v?"":v,Object(h.a)({folder_no:"default",id:c,index:f}).then((function(){if(e.$emit("saveSuccess"),o){var t;localStorage.setItem("createParams",JSON.stringify(o));var n="/cyberPubPage/".concat(null===(t=e.message)||void 0===t?void 0:t.id,"?quickChat=true&source=work");window.open(e.localePath(n),"_blank")}})).catch((function(t){console.log("saveFail",t)}));case 4:case"end":return n.stop()}}),n)})))()},handlePost:function(){var t={taskId:this.message.id,index:this.currentImgInfo.index,url:this.currentImg},e={types:[P.CONTRIBUTION_TYPE_ENUM.WORK],source:"task",selectedData:[t],remoteParams:{tags:["faceswap"]}};this.$EventBus.$emit("openContribution",e),this.hide()},handleAnimate:function(){this.$emit("handleAnimate"),this.hide()},handleCopyAll:function(){var content=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";["",null,void 0].includes(content)||(Object(k.g)(content),this.$message.success(this.$t("CopySuccess")))},handleDownloadClick:function(){var t=this;this.$nextTick((function(){var e,n=t.$refs.downloadVideoPop;n&&(null==n||null===(e=n.$el)||void 0===e||e.click())}))},openPlayModal:function(t,e){var n=this,o=Object(k.v)(t);this.$EventBus.$emit("showDialog",{name:"HyAssembleModal",data:{doorCode:"video"==o?"aiVideoApp":"aiImageApp",workUrl:t,source:7,taskReferIndex:e,taskId:this.message.id,onAfterAction:function(){n.$EventBus.$emit("hideDialog","HyAssembleModal")}}})},handleLog:function(t){this.$logEvent("log_actions",{operation:"click",entity_type:"button",entity_name:t,entity_id:this.message.id,obj_type:"",page_name:"record_detail_page"})},handleAppeal:function(){var t,e,n=this;if(this.checkIsAlreadyFeedback)this.$message.warning(this.$t("feedbackTips3"));else{var o={appeal:{index:null===(t=this.currentImgInfo)||void 0===t?void 0:t.index,task_id:null===(e=this.message)||void 0===e?void 0:e.id}};Object(E.feedbackNSFWImage)(o).then((function(t){var e,o=(null==t||null===(e=t.data)||void 0===e?void 0:e.result)||{};((null==o?void 0:o.success)||!1)&&(n.updateImageInfo(n.message.id,n.currentImgInfo.index,"is_nsfw_appeal",!0),n.$message.success(n.$t("feedbackTips2")))})).finally((function(){}))}},updateImageInfo:function(t,e,n,o){this.$emit("updateImageInfo",t,e,n,o)},getUrlType:function(){var t=this.currentImg;return this.isVideoUrl(t)?"video":this.isImageUrl(t)?"image":this.isGifUrl(t)?"gif":"other"}},mounted:function(){this.init(),this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},V=B,H=(n(4378),n(4379),Object(D.a)(V,(function(){var t,e,n,o=this,r=o._self._c;return r("transition",{attrs:{name:"viewer-fade"}},[r("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper c-easy-task-image-viewer",style:{"z-index":o.viewerZIndex},attrs:{tabindex:"-1"}},[r("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:o.handleMaskClick.apply(null,arguments)}}}),o._v(" "),o.showOperateBtn?o._e():r("span",{staticClass:"el-image-viewer__btn el-image-viewer__chat",on:{click:o.handleChat}},[r("i",{staticClass:"iconfont icon-a-home-top-personl1"})]),o._v(" "),o.showOperateBtn?o._e():r("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:o.hide}},[r("i",{staticClass:"el-icon-close"})]),o._v(" "),o.showOperateBtn?o._e():r("span",{staticClass:"el-image-viewer__btn el-image-viewer__download",on:{click:function(t){return o.handleOperateBtnClick({type:"download"})}}},[r("i",{staticClass:"iconfont icon-icon-Download"})]),o._v(" "),o.showOperateBtn?o._e():r("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[r("div",{staticClass:"el-image-viewer__actions__inner"},[r("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){return o.handleActions("zoomOut")}}}),o._v(" "),r("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return o.handleActions("zoomIn")}}}),o._v(" "),r("i",{staticClass:"el-image-viewer__actions__divider"}),o._v(" "),r("i",{class:o.mode.icon,on:{click:o.toggleMode}}),o._v(" "),r("i",{staticClass:"el-image-viewer__actions__divider"}),o._v(" "),r("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){return o.handleActions("anticlocelise")}}}),o._v(" "),r("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){return o.handleActions("clocelise")}}})])]),o._v(" "),r("div",{staticClass:"el-image-viewer__canvas task-image-viewer__canvas"},[null!==(t=o.topBtnList)&&void 0!==t&&t.length?r("image-action-buttons",{attrs:{visible:!0,buttons:o.topBtnList,maxVisibleButtons:5},on:{"button-click":o.handleOperateBtnClick}},[r("ShowNsfw",{attrs:{slot:"more",isNsfw:!1,"is-show-nsfw-icon":o.currentImgInfo.is_nsfw_plus,"img-info":o.currentImgInfo},on:{deleteSingleImg:function(t){return o.handleOperateBtnClick({type:"deleteSingleImg"})},handleAppeal:o.handleAppeal},slot:"more"}),o._v(" "),r("SaveTo",{ref:"saveToPopover",attrs:{type:"artwork",category:!0,title:o.$t("Save"),message:l(l({},o.message),{},{img_uris:(null===(e=o.message)||void 0===e?void 0:e.components)||[]}),operateNumber:o.operateNumber,showArrowIcon:!1},on:{saveSuccess:function(t){return o.$emit("saveSuccess")}}})],1):o._e(),o._v(" "),o.isSingle?o._e():[r("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!o.infinite&&o.isFirst},on:{click:o.prev}},[r("i",{staticClass:"el-icon-arrow-left"})]),o._v(" "),r("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!o.infinite&&o.isLast},on:{click:o.next}},[r("i",{staticClass:"el-icon-arrow-right"})])],o._v(" "),o._l(o.urlList,(function(t,i){return[i!==o.index||o.isVideoUrl(o.currentImg)?i===o.index?r("video",{key:i,staticClass:"el-image-viewer__img task-image-viewer__img",style:o.imgStyle,attrs:{src:o.currentImg,autoplay:"",loop:"",muted:"",controls:"",controlsList:"nodownload"},domProps:{muted:!0},on:{play:o.handleImgLoad}}):o._e():r("img",{directives:[{name:"webp",rawName:"v-webp",value:o.$imgH,expression:"$imgH"}],key:i,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img task-image-viewer__img",style:o.imgStyle,attrs:{src:o.currentImg,referrerpolicy:"no-referrer"},on:{load:o.handleImgLoad,mousedown:o.handleMouseDown,click:function(t){return o.viewImage(o.currentImg)}}})]})),o._v(" "),o.isSingle?o._e():[r("div",{staticClass:"indicator-box"},o._l(o.urlList,(function(t,i){return r("span",{key:"indicator_".concat(i),staticClass:"indicator-box-item",class:[o.index===i&&"indicator-box-item-active"]})})),0)]],2),o._v(" "),o.showOperateBtn?r("div",{staticClass:"task-image-viewer__side-bar"},[r("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:o.hide}},[r("i",{staticClass:"el-icon-close"})]),o._v(" "),r("div",{staticClass:"task-image-viewer__side-bar-box"},[r("div",{staticClass:"btn-box",class:(null===(n=o.renderBtn)||void 0===n?void 0:n.length)%2?"odd":"even"},[o._l(o.renderBtn,(function(t){return["download"!==t.type||"download"===t.type&&!o.isVideoUrl(o.currentImg)?[r("el-tooltip",{key:t.type,attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"bottom",disabled:!(null!=t&&t.tip),content:o.$t(null==t?void 0:t.tip)}},[r("div",{staticClass:"button",attrs:{"data-group":o.isFromGenerate?"create-task-image-viewer":"ai-app-task-image-viewer","data-type":"detail-button","data-id":t.type,"data-pt":o.getUrlType(),"data-desc":"图片详情按钮 "},on:{click:function(e){return e.stopPropagation(),o.handleOperateBtnClick(t)}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"iconfont",class:"icon-".concat(t.icon)})]),o._v(" "),r("span",{staticClass:"label"},[o._v(o._s(o.$t(t.label)))])])])]:[o.isFromHistory?o._e():r("download-video-pop",{key:t.type,ref:"downloadVideoPop",refInFor:!0,staticClass:"download-video-box-wrap",attrs:{videoInfo:{videoUrl:o.currentImg},"keep-modal-first":!0}},[r("el-tooltip",{attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"bottom",disabled:!(null!=t&&t.tip),content:o.$t(null==t?void 0:t.tip)}},[r("div",{staticClass:"button button-download-video",attrs:{"data-group":o.isFromGenerate?"create-task-image-viewer":"ai-app-task-image-viewer","data-type":"detail-button","data-id":t.type,"data-pt":o.getUrlType(),"data-desc":"图片详情按钮"}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"iconfont",class:"icon-".concat(t.icon)})]),o._v(" "),r("span",{staticClass:"label"},[o._v(o._s(o.$t(t.label)))])])])],1),o._v(" "),o.isFromHistory?r("download-video-pop",{key:t.type,ref:"downloadVideoPop",refInFor:!0,staticClass:"download-video-box-wrap download-video-box-wrap-history",attrs:{videoInfo:{videoUrl:o.currentImg},"keep-modal-first":!0},on:{click:function(t){return t.stopPropagation(),o.handleLog("download")}}},[r("el-tooltip",{attrs:{"popper-class":"task-image-viewer-popover",effect:"light",placement:"bottom",disabled:!(null!=t&&t.tip),content:o.$t(null==t?void 0:t.tip)}},[r("div",{staticClass:"button button-download-video",attrs:{"data-group":o.isFromGenerate?"create-task-image-viewer":"ai-app-task-image-viewer","data-type":"detail-button","data-id":t.type,"data-pt":o.getUrlType(),"data-desc":"图片详情按钮"}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"iconfont",class:"icon-".concat(t.icon)})]),o._v(" "),r("span",{staticClass:"label"},[o._v(o._s(o.$t(t.label)))])])])],1):o._e()]]}))],2),o._v(" "),o.customForm?[o._t("customContent")]:o._e()],2),o._v(" "),o.isFromGenerate?o._e():r("div",{staticClass:"bottom-generate-btn-box"},[r("div",{staticClass:"copyClass",on:{click:o.handleGenerate}},[o._v("\n          "+o._s(o.$t("Generate"))+"\n        ")])])]):o._e(),o._v(" "),r("view-image",{ref:"viewImage"}),o._v(" "),r("AiChatCreateConfirm",{ref:"aiChatCreateConfirm",attrs:{source:"task",fromPage:"newTask"},on:{confirm:o.handleConfirm}})],1)])}),[],!1,null,"d2d22056",null));e.a=H.exports;installComponents(H,{ShowNsfw:n(276).default,SaveTo:n(124).default,DownloadVideoPop:n(200).default})},901:function(t,e,n){"use strict";var o=n(3),r=n(14),l=n(2),c=(n(20),n(72),n(89),n(19),n(6),n(11),n(69),n(73),n(22),n(12),n(13),n(8),n(40),n(7),n(41),n(31),n(18),n(24),n(4),n(28),n(43),n(113),n(51)),d=n(181),v=n(61),h=n(98),f=n(1),m=n(148);function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return y(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function y(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={accept:".jpg,.png,.jpeg,.webp",zipMaxSize:10,fileMaxSize:20,minWh:[10,10],maxWh:[1e4,1e4],minProportion:[0,0],maxProportion:[0,0],multiple:!1,limit:2,directUse:!1},x=".jpg,.png,.jpeg,.webp",k=".mp4,.mov,.m4v,.mts,.avi,.flv",I=".gif",j={name:"UploadBox",components:{},props:{category:{type:Number,default:2},uploadObj:{type:Object,default:function(){return{}}},fileTypes:{type:Array,default:function(){return["image"]}},videoCategory:{type:Number,default:61},beforeUpload:{type:Function,default:function(){return!0}}},watch:{uploadObj:{handler:function(t){var e={image:x,video:k,gif:I},n=this.fileTypes.map((function(t){return e[t]||""})).join(",");this.newUploadObj=C(C({},O),t),this.fileTypes.length&&(this.newUploadObj.accept=n)},deep:!0,immediate:!0}},computed:C({},Object(f.c)("user",["isLoggedIn"])),data:function(){return{debounceCheckFile:Object(h.a)(this.checkFile,500),debounceVideoUpload:Object(h.a)(this.videoUpload,500),UPLOAD:new c.a({type:this.category}),UPLOADVIDEO:new d.a({category:this.category}),uploading:!1,newUploadObj:O}},methods:{reUpload:function(){this.$refs.imageUpload.$el.querySelector(".upload-trigger").click()},checkImageSize:function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){var img=new Image;img.onload=function(){var t=img.naturalWidth,n=img.naturalHeight;e({width:t,height:n})},img.onerror=function(){n(!1)},img.src=t.target.result},o.readAsDataURL(t)}))},handleChange:function(t,e){var n=this;if(this.beforeUpload({file:t,fileList:e})){var o=function(t,e){var n=e.split(",");return t.filter((function(t){return n.some((function(e){return t.name.toLowerCase().endsWith(e)}))}))},l=o(e,k),c=o(e,x),d=o(e,I);this.$emit("onUploadStart"),this.debounceCheckFile([].concat(Object(r.a)(c),Object(r.a)(d)),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.debounceVideoUpload(l,(function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=n.newUploadObj,d=[].concat(Object(r.a)(t),Object(r.a)(o)),v=[].concat(Object(r.a)(e),Object(r.a)(l));d.length>0?(n.$message.success(n.$t("UploadSuccess")),n.$emit("onUploadSuccess",d,c)):n.$emit("onUploadFail",v),n.$emit("onUploadEnd"),n.$refs.imageUpload.clearFiles()}))}))}},videoUpload:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.uploading=!0,r=t.map((function(t){var e=new d.a({file:t.raw,category:n.videoCategory});return{fn:e.beforeUpload.bind(e)}})),o.next=4,n.serialPromises(r);case 4:l=o.sent,c=l.filter((function(t){return"fulfilled"===t.status})),n.uploading=!1,c.length>0?(v=c.map((function(t){return{url:t.value.url}})),e&&e(v)):e&&e([]);case 8:case"end":return o.stop()}}),o)})))()},checkFile:function(){var t=arguments.length>1?arguments[1]:void 0,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return t.raw}));this.checkFileList(e,t)},checkFileList:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,c,d,v,h,f,m,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.uploading=!0,r=n.UPLOAD,l=t.map((function(t){return{fn:n.oneFileCheck,param:t}})),o.next=5,n.serialPromises(l);case 5:if(c=o.sent,d=c.filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),c.filter((function(t){return"rejected"===t.status})).map((function(t){return t.reason})),!(d.length>0)){o.next=19;break}return v=d.map((function(t){return{fn:r.startUpload.bind(r),param:t.file,props:t}})),o.next=12,n.serialPromises(v);case 12:h=o.sent,f=h.filter((function(t){return"fulfilled"===t.status})),m=h.filter((function(t){var e;return"rejected"===t.status&&2e4==(null==t||null===(e=t.reason)||void 0===e?void 0:e.code)})),n.uploading=!1,f.length>0?(_=f.map((function(t){var e=t.value,n=t.props;return{url:e,width:n.width,height:n.height}})),e&&e(_)):e&&e([],m),o.next=21;break;case 19:n.uploading=!1,e&&e([]);case 21:case"end":return o.stop()}}),o)})))()},oneFileCheck:function(t){var e=this;return new Promise(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(o,r){var l,c,d,h,f,_,y,w,C,O,x,k,I,j;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.UPLOAD,l=e.newUploadObj,!((c=t.size/1024/1024)>l.fileMaxSize)){n.next=6;break}return e.$message.error(e.$t("HttpErrorCode_30003")),r({file:t}),n.abrupt("return",!1);case 6:if(d=t,!("image/gif"===t.type||t.name.toLowerCase().endsWith(".gif")||c>l.zipMaxSize)){n.next=20;break}return n.prev=9,n.next=12,Object(v.a)(d,1024*l.zipMaxSize*1024);case 12:d=n.sent,n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(9),console.error("Compression failed:",n.t0),r({file:t}),n.abrupt("return",!1);case 20:return n.next=22,e.checkImageSize(d);case 22:if(h=n.sent){n.next=26;break}return r({file:t}),n.abrupt("return",!1);case 26:f=h.width,_=h.height,y=l.minWh,w=l.maxWh,C=l.minProportion,O=l.maxProportion,x=[{check:Object(m.checkMinWh)(y,f,_),message:"imageRuleMinWh",params:{w:y[0],h:y[1]}},{check:Object(m.checkMaxWh)(w,f,_),message:"imageRuleMaxWh",params:{w:w[0],h:w[1]}},{check:Object(m.checkMinProportion)(C,f,_),message:"imagEaspectRatio",params:{num1:C.join(":"),num2:O.join(":")}},{check:Object(m.checkMaxProportion)(O,f,_),message:"imagEaspectRatio",params:{num1:O.join(":"),num2:C.join(":")}}],k=0,I=x;case 30:if(!(k<I.length)){n.next=39;break}if(!(j=I[k]).check){n.next=36;break}return e.$message.error(e.$t(j.message,j.params)),r({file:t}),n.abrupt("return",!1);case 36:k++,n.next=30;break;case 39:o({file:d,width:f,height:_});case 40:case"end":return n.stop()}}),n,null,[[9,15]])})));return function(t,e){return n.apply(this,arguments)}}())},handleBeforeUploadEmpty:function(t){console.log("file",t)},fileExceed:function(){this.$message({type:"warning",message:this.$t("UploadImageExceed",{max:this.newUploadObj.limit})})},showLinkUploadModal:function(){this.$emit("onLinkUpload")},serialPromises:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,param,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=_(t),e.prev=2,o.s();case 4:if((r=o.n()).done){e.next=18;break}return l=r.value,c=l.fn,param=l.param,d=l.props,e.prev=6,e.next=9,c(param);case 9:v=e.sent,n.push({status:"fulfilled",value:v,props:d}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),n.push({status:"rejected",reason:e.t0,props:d});case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),o.e(e.t1);case 23:return e.prev=23,o.f(),e.finish(23);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[2,20,23,26],[6,13]])})))()}}},S=j,$=(n(4274),n(0)),component=Object($.a)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"hy-upload-box"},[e("el-upload",{ref:"imageUpload",staticClass:"hy-custom-image-upload",attrs:{action:"#",drag:"","auto-upload":!1,multiple:t.newUploadObj.multiple,limit:t.newUploadObj.limit,"show-file-list":!1,disabled:t.uploading,accept:t.newUploadObj.accept,"on-change":t.handleChange,"on-exceed":t.fileExceed}},[e("div",{staticClass:"upload-trigger flex_c_m",attrs:{slot:"trigger"},slot:"trigger"},[t._t("default")],2)])],1)}),[],!1,null,"2029f210",null);e.a=component.exports},902:function(t,e,n){"use strict";var o=n(3),r=n(2),l=(n(768),n(47),n(386)),c=n.n(l),d=(n(674),n(325)),v=n.n(d),h=(n(20),n(16),n(11),n(6),n(18),n(12),n(13),n(8),n(7),n(4),n(26),n(175)),f=n(1),m=n(29),_=n(35),y=n.n(_);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"VideoFrameInterpolation",emits:["updateList","close"],props:{scene:{type:String,default:""}},components:Object(r.a)(Object(r.a)({},v.a.name,v.a),c.a.name,c.a),data:function(){return{visible:!1,loading:!1,cost:0,sale:0,frame:60,videoInfo:{},costTimer:null,detailInfo:{},initLoading:!1}},computed:C(C({},Object(f.c)("user",["isLoggedIn","isCompanyAccount"])),{},{coverUrl:function(){var t,e,n;return(null===(t=this.videoInfo)||void 0===t?void 0:t.url)||(null===(e=this.videoInfo)||void 0===e||null===(e=e.img_uris)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.cover_url)||(null===(n=this.videoInfo)||void 0===n||null===(n=n.components)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.cover_url)||""}}),methods:{reset:function(){this.videoInfo={},this.detailInfo={},this.loading=!1,this.visible=!1},show:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:{},e.$logEvent("log_actions",{operation:"click_ai_frame_interpolation",behavior_info:"fastTools"===e.scene?"on_quick_ai_page":"on_createflow_page"}),e.visible=!0,e.loading=!0,e.videoInfo=y()(o),r=e.videoInfo||{},l=r.isTask,c=void 0!==l&&l,n.next=8,e.getMetaDetail(c);case 8:e.getEstimatedCost();case 9:case"end":return n.stop()}}),n)})))()},handleParams:function(){var t,e,n,o,r,l,c,d,v,h,f={},m=(null===(t=this.detailInfo)||void 0===t||null===(t=t.img_uris)||void 0===t?void 0:t[0])||(null===(e=this.detailInfo)||void 0===e||null===(e=e.components)||void 0===e?void 0:e[0]);return f.meta=null!==(n=this.detailInfo)&&void 0!==n&&n.meta?null===(o=this.detailInfo)||void 0===o?void 0:o.meta:this.detailInfo,f.parent_task_id=null===(r=this.detailInfo)||void 0===r?void 0:r.id,f.prompt=(null===(l=this.detailInfo)||void 0===l?void 0:l.local_prompt)||"",f.meta.prompt=(null===(c=this.detailInfo)||void 0===c?void 0:c.local_prompt)||"",f.meta.n_iter=1,null!=f&&null!==(d=f.meta)&&void 0!==d&&d.generate_video||(f.meta.generate_video={}),f.meta.generate_video.video_url=null==m?void 0:m.url,f.model_no=null===(v=this.detailInfo)||void 0===v?void 0:v.art_model_no,f.model_ver_no=null===(h=this.detailInfo)||void 0===h?void 0:h.art_model_ver_no,f.meta.width=null==m?void 0:m.width,f.meta.height=null==m?void 0:m.height,"fastTools"===this.scene&&(f.source=17100),f},getEstimatedCost:function(){var t=this,e=this.handleParams();this.costTimer&&(clearTimeout(this.costTimer),this.costTimer=null),this.costTimer=setTimeout((function(){Object(h.b)(C(C({},e),{},{sub_type:49})).then((function(e){var n=(null==e?void 0:e.data)||{},o=n.calculate_coins,r=n.discount_off_rate;t.cost=o,t.sale=r,t.loading=!1})).catch((function(e){t.cost=0,t.sale=0,t.loading=!1,console.error("Estimated cost failed:",e)}))}),1e3)},getMetaDetail:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={task_flow_version:"v2",id:null===(t=this.videoInfo)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.id};return n?(this.initLoading=!0,(n?m.getMetaInfo:m.getTaskConfig)(o).then((function(t){var n;[1e4,"10000"].includes(null==t||null===(n=t.status)||void 0===n?void 0:n.code)&&(e.detailInfo=(null==t?void 0:t.data)||{})})).finally((function(){e.initLoading=!1}))):new Promise((function(t){var n,o,r,l,c,d,v=y()(null!==(n=e.videoInfo)&&void 0!==n&&n.info?null===(o=e.videoInfo)||void 0===o?void 0:o.info:e.videoInfo);e.detailInfo=v,e.detailInfo.art_model_no=(null===(r=e.detailInfo)||void 0===r?void 0:r.art_model_no)||(null==e||null===(l=e.detailInfo)||void 0===l||null===(l=l.art_model)||void 0===l?void 0:l.id)||"",e.detailInfo.art_model_ver_no=(null===(c=e.detailInfo)||void 0===c?void 0:c.art_model_ver_no)||(null==e||null===(d=e.detailInfo)||void 0===d||null===(d=d.art_model)||void 0===d?void 0:d.model_ver_no)||"",t()}))},videoFrameInterpolationGenerate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoggedIn){e.next=3;break}return t.$EventBus.$emit("openLoginDialog"),e.abrupt("return",!0);case 3:return t.loading=!0,n=t.handleParams(),e.next=7,Object(h.g)(n);case 7:o=e.sent,data=o.data,1e4===(null==(r=o.status)?void 0:r.code)&&(t.$emit("updateList","fastTools"===t.scene?{data:data}:data||{}),t.reset(),t.$message.success(t.$t("CreateSuccess")));case 11:case"end":return e.stop()}}),e)})))()}}},x=O,k=(n(4412),n(0)),component=Object(k.a)(x,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,width:"320px","show-close":!1,modal:!1,"custom-class":"custom-dialog video-frame-interpolation-dialog"},on:{"update:visible":function(e){t.visible=e}}},[e("template",{slot:"title"},[e("p",{staticClass:"video-frame-interpolation-title"},[t._v(t._s(t.$t("videoFrameInterpolation")))])]),t._v(" "),e("div",{staticClass:"video-frame-interpolation-content"},[e("div",{staticClass:"video-frame-interpolation-cover"},[e("div",{staticClass:"cover-box",attrs:{"data-tag":t.$t("videoProlong_original")}},[e("img",{attrs:{src:t.coverUrl,alt:""}})])]),t._v(" "),e("div",{staticClass:"form-item"},[e("el-radio-group",{model:{value:t.frame,callback:function(e){t.frame=e},expression:"frame"}},[e("el-radio-button",{attrs:{label:60,border:""}},[t._v("60"+t._s(t.$t("frame")))]),t._v(" "),e("el-tooltip",{attrs:{effect:"dark",content:t.$t("videoFrameInterpolation_120tip"),placement:"top"}},[e("el-radio-button",{staticClass:"disabled-radio",attrs:{label:120,border:"",disabled:""}},[t._v("120"+t._s(t.$t("frame")))])],1)],1)],1),t._v(" "),e("el-button",{class:{"no-sale":!t.sale},attrs:{type:"primary","data-sale":"".concat(t.sale,"% Off"),loading:t.loading},on:{click:t.videoFrameInterpolationGenerate}},[t._v("\n      "+t._s(t.$t("Generate"))+"("+t._s(t.$t("expend"))+": "+t._s(t.cost)+")\n    ")])],1)],2)}),[],!1,null,"171a5444",null);e.a=component.exports},903:function(t,e,n){"use strict";var o=n(241),r={name:"LocalAudioPlayer",props:{data:{type:Object},fontSize:{type:String,default:"20px"}},data:function(){return{audio:null,audioStatus:"idle",startPlay:!1,isInitialized:!1}},watch:{data:{handler:function(t){this.audioStatus="idle",this.isInitialized&&(this.cleanup(),this.isInitialized=!1)},immediate:!0}},destroyed:function(){this.cleanup()},methods:{cleanup:function(){this.audio&&(this.audio.pause(),this.clearAudioEvents(),o.a.unregister(this.audio),this.audio=null)},clearAudioEvents:function(){this.audio&&(this.audio.onloadstart=null,this.audio.oncanplaythrough=null,this.audio.onerror=null,this.audio.onended=null,this.audio.onplay=null,this.audio.onpause=null)},handlePlayClick:function(){this.isInitialized||(this.createAudio(),this.isInitialized=!0),this.start()},createAudio:function(){if(this.audio&&(this.audio.pause(),o.a.unregister(this.audio)),!this.data||!this.data.url)return console.error("音频数据不存在或URL为空"),void(this.audioStatus="error");this.audio=new Audio,this.audio.src=this.data.url,this.audio.stop=this.stop,o.a.register(this.audio),this.setupAudioEvents()},setupAudioEvents:function(){var t=this;this.clearAudioEvents(),this.audio.onloadstart=function(){t.audioStatus="loading"},this.audio.oncanplaythrough=function(){"playing"!==t.audioStatus&&"finished"!==t.audioStatus&&(t.audioStatus="ready"),t.startPlay&&(t.startPlay=!1,t.playAudio())},this.audio.onerror=function(e){console.error("音频加载失败:",e),t.audioStatus="error",t.startPlay=!1},this.audio.onended=function(){t.audioStatus="finished"},this.audio.onplay=function(){t.audioStatus="playing"},this.audio.onpause=function(){"playing"===t.audioStatus&&(t.audioStatus="paused")}},start:function(){this.audio&&("paused"===this.audioStatus?this.resumeAudio():"ready"===this.audioStatus||"finished"===this.audioStatus?this.playAudio():(this.startPlay=!0,this.loadAudio()))},playAudio:function(){var t=this;o.a.stopAllExcept(this.audio),"finished"===this.audioStatus&&(this.audio.currentTime=0),this.audio.play().catch((function(e){console.error("播放音频失败:",e),t.audioStatus="error"}))},pauseAudio:function(){this.audio&&"playing"===this.audioStatus&&this.audio.pause()},resumeAudio:function(){this.audio&&"paused"===this.audioStatus&&this.playAudio()},replayAudio:function(){this.audio&&(this.audio.currentTime=0,this.playAudio())},loadAudio:function(){this.audioStatus="loading",this.audio.readyState>=3?(this.audioStatus="ready",this.playAudio()):this.audio.load()},stop:function(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)},retryLoad:function(){this.createAudio(),this.startPlay=!0,this.loadAudio()}}},l=(n(4456),n(0)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"local-audio-player",class:{playing:"playing"===t.audioStatus},style:{fontSize:t.fontSize}},["loading"===t.audioStatus?[e("i",{staticClass:"el-icon-loading"})]:"playing"===t.audioStatus?[e("i",{staticClass:"iconfont icon-bofangz",on:{click:function(e){return e.stopPropagation(),t.pauseAudio.apply(null,arguments)}}})]:[e("i",{staticClass:"iconfont icon-zanting1",on:{click:function(e){return e.stopPropagation(),t.handlePlayClick.apply(null,arguments)}}})]],2)}),[],!1,null,"0f6f0f68",null);e.a=component.exports},904:function(t,e,n){"use strict";n(6),n(18),n(4),n(11),n(12),n(13),n(8);var o=n(14),r=n(2),l=(n(19),n(32),n(50),n(16),n(22),n(122),n(21),n(7),n(39)),c=n(1),d=n(35),v=n.n(d),h=n(52),f=n(139),m=n(10);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={props:{active:{type:String,default:""},useNewTag:{type:Boolean,default:!1},renderList:{type:Array,default:function(){return[]}},clickType:{type:Boolean,default:!0},sourceFrom:{type:String,default:""},ssrData:{type:Array,default:function(){return[]}}},components:{SwipeableList:h.default},data:function(){return{itemScrollLeft:null,itemScroll:null,selectItem:{},tagInfo:{categories:[],items:[]},replaceImageType:m.K}},computed:y(y(y({},Object(c.e)("app",["tagHot","tagNew"])),Object(c.c)("user",["userInfo"])),{},{setActive:function(){return function(t){return t.value===this.active||t.value===this.selectItem.value}},sortedItems:function(){var t,e,n=this.renderList;if(n=null!==(t=n)&&void 0!==t&&t.length?n:this.ssrData,this.useNewTag&&this.userInfo&&null!==(e=this.userInfo)&&void 0!==e&&null!==(e=e.collect_tags)&&void 0!==e&&e.length){var r,l,c=v()((null===(r=this.userInfo)||void 0===r?void 0:r.collect_tags)||[]);l=c.map((function(t){return n.find((function(e){return e.id===t}))})).filter((function(t){return!!t}));var d=n.filter((function(t){return!c.includes(t.id)}));n=[].concat(Object(o.a)(l),Object(o.a)(d))}if(this.userInfo&&this.userInfo.tags&&this.userInfo.tags.length>0&&!this.useNewTag){var h=v()(this.userInfo.tags);return h.reverse(),n.sort((function(a,b){var t=h.findIndex((function(t){return t.id===a.id})),e=h.findIndex((function(t){return t.id===b.id}));return-1!==t&&-1!==e?t-e:-1!==t?-1:-1!==e?1:0}))}return n},imgUrl:function(){return function(t){if(t)return Object(m.K)(t,"low")}}}),mounted:function(){},activated:function(){this.getItemScrollLeft()},methods:y(y({},Object(c.d)("app",["setTagHot","setTagNew"])),{},{getTags:function(){var t=this;if(this.useNewTag){Object(f.d)().then((function(e){var n;if(["10000",1e4].includes(null==e||null===(n=e.status)||void 0===n?void 0:n.code)){var o=e.data||{},r=o.categories,l=void 0===r?[]:r,c=o.items,d=void 0===c?[]:c;t.tagInfo.categories=Array.isArray(l)?l:[];var v=Array.isArray(d)?d:[];return t.tagInfo.items=(v||[]).map((function(t){return t.name=t.title||t.id,t.style={},t.style.url=t.cover||"",t})),t.tagInfo.items.length&&t.setTagNew(t.tagInfo.items),t.tagInfo.categories.length&&t.setTagHot(t.tagInfo.categories),e}})).finally((function(){}))}else this.tagHot.length>0?this.getItemScrollLeft():Object(l.o)().then((function(e){t.setTagHot(e.data),t.getItemScrollLeft()}))},getItemScrollLeft:function(){var t=this;this.itemScrollLeft=null,this.$nextTick((function(){t.$refs.listItem&&t.$refs.listItem.forEach((function(e){e.classList.contains("active")&&(t.itemScrollLeft=e.getBoundingClientRect().left)}))}))},selectTags:function(t){var e=this;this.active||!this.clickType?this.selectItem=t:this.selectItem.value===t.value?this.selectItem={}:this.selectItem=t,this.$logEvent("log_actions",{operation:"click_tags",behavior_info:(null==t?void 0:t.id)+"/"+(null==t?void 0:t.name),behavior_info_sub:this.sourceFrom}),this.$emit("changeTags",this.selectItem),this.$nextTick((function(){e.changeScroll(t)}))},changeScroll:function(t){var e=this;this.selectItem.value===t.value&&this.$refs.listItem.forEach((function(t,n){t.classList.contains("active")&&(e.itemScroll={value:t.getBoundingClientRect().left,index:n})}))},imgError:function(t){var e;if(null!=t&&null!==(e=t.style)&&void 0!==e&&e.url&&this.$refs[key]){var n=t.style.url,o="tagImg".concat(n);this.$refs[o].src=n,Object(m.P)("imgerr",n)}}})},C=(n(4698),n(0)),component=Object(C.a)(w,(function(){var t=this,e=t._self._c;return e("swipeable-list",{attrs:{scrollLeftnum:t.itemScrollLeft,scrollChange:t.itemScroll}},t._l(t.sortedItems.filter((function(t,i){return i<40})),(function(n,o){var r,l;return e("a",{key:o+"_tags",ref:"listItem",refInFor:!0,staticClass:"tags-item",class:{active:t.clickType?t.setActive(n):null},attrs:{target:"_blank"},on:{click:function(e){return e.preventDefault(),t.selectTags(n)}}},[n.style&&null!==(r=n.style)&&void 0!==r&&r.url||n.cover?e("img",{attrs:{alt:t.$t(n.name||n.title),loading:"lazy",width:"30",height:"30",src:t.replaceImageType((null===(l=n.style)||void 0===l?void 0:l.url)||n.cover,"low")}}):t._e(),t._v(" "),e("span",[t._v(t._s(t.$t(n.name||n.title)))])])})),0)}),[],!1,null,"5ff786d2",null);e.a=component.exports;installComponents(component,{SwipeableList:n(52).default})},919:function(t,e,n){"use strict";n(24);var o={name:"SpinLoading",props:{size:{type:Number,default:30}},components:{},computed:{mySize:function(){return this.size+"px"},styleSize:function(){return{fontSize:this.mySize,width:this.mySize,height:this.mySize}}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=(n(4996),n(0)),component=Object(r.a)(o,(function(){var t=this._self._c;return t("div",{staticClass:"spin-loading"},[t("div",{staticClass:"loadBox"},[t("div",{staticClass:"loaderContantBox",style:this.styleSize})])])}),[],!1,null,"131fd73f",null);e.a=component.exports},922:function(t,e,n){"use strict";n(11),n(6),n(12),n(13),n(7);var o=n(2),r=(n(674),n(47),n(325)),l=n.n(r),c=(n(768),n(386)),d=n.n(c),v=(n(16),n(8),n(4),n(26),n(175)),h=n(1),f=n(9);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={components:{ElRadioButton:d.a,ElRadioGroup:l.a},props:{getParams:{type:Function,default:function(){}}},data:function(){return{visible:!1,loading:!1,cost:0,costTimer:null,sale:0,videoInfo:{meta:{prompt:"",negative_prompt:"",generate:{gen_mode:0},generate_video:{generate_video_duration:5}}}}},computed:_(_(_({},Object(h.c)("user",["isLoggedIn","isCompanyAccount"])),Object(h.e)("payment",["paymentInfo"])),{},{coverUrl:function(){var t;return(null===(t=this.videoInfo)||void 0===t||null===(t=t.components)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.cover_url)||""},isVipFun:function(){var t=this.paymentInfo||{},e=t.activeState,n=t.liteActiveState;return e||n||this.isCompanyAccount},vipLevel:function(){var t;return null===(t=this.paymentInfo)||void 0===t?void 0:t.productLevel}}),watch:{"videoInfo.meta":{handler:function(){this.getEstimatedCost()},deep:!0}},methods:{open:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.visible=!0,this.videoInfo=_(_({},this.videoInfo),JSON.parse(JSON.stringify(t))),this.videoInfo.meta.generate.gen_mode=0,this.videoInfo.meta.prompt=e?this.videoInfo.meta.prompt:"";var n=[5,10].includes(this.videoInfo.meta.generate_video.generate_video_duration);this.videoInfo.meta.generate_video.generate_video_duration=e&&n?this.videoInfo.meta.generate_video.generate_video_duration:5,console.log(this.videoInfo,"videoInfo"),this.getEstimatedCost()},close:function(){this.visible=!1},videoProlongGenerate:function(t){var e=this;if(!this.isLoggedIn)return this.$EventBus.$emit("openLoginDialog"),!0;if(this.isVipFun)if(this.vipLevel<2&&1===this.videoInfo.meta.generate.gen_mode)this.handleOpenVipDialog();else{this.loading=!0;var n=this.handleParams();Object(v.h)(n).then((function(t){e.$emit("change",t),e.close(),e.$message.success(e.$t("CreateSuccess"))})).finally((function(){e.loading=!1}))}else this.$EventBus.$emit("showBreakDialog","videoProlong_vip_tips2","basic","SpecificPop_Video_Extension_Popup")},handleParams:function(){var t,e,n,o,r=this.getParams(this.videoInfo);return r.meta.generate_video.init_extend_video_url=null===(t=this.videoInfo)||void 0===t||null===(t=t.components)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url,r.parent_task_id=null===(e=this.videoInfo)||void 0===e?void 0:e.id,r.model_no=null===(n=this.videoInfo)||void 0===n?void 0:n.art_model_no,r.model_ver_no=null===(o=this.videoInfo)||void 0===o?void 0:o.art_model_ver_no,r.ss=f.e.GenerateCreate,r},getEstimatedCost:function(){var t=this,e=this.handleParams();this.costTimer&&(clearTimeout(this.costTimer),this.costTimer=null),this.costTimer=setTimeout((function(){Object(v.b)(_(_({},e),{},{sub_type:42})).then((function(e){var n=(null==e?void 0:e.data)||{},o=n.calculate_coins,r=n.discount_off_rate;t.cost=o,t.sale=r})).catch((function(e){t.cost=0,t.sale=0,console.error("Estimated cost failed:",e)}))}),1e3)},handleOpenVipDialog:function(){this.$EventBus.$emit("showBreakDialog","UpgradeQualityModel","standard","SpecificPop_QualityWork",["standard","professional","master"])},handleGenModeChange:function(t){var e=this;(1===t&&!this.isVipFun||1===t&&this.isVipFun&&this.vipLevel<2)&&(this.handleOpenVipDialog(),this.$logEvent("log_actions",{operation:"to_pay_pop_show",behavior_info:"SpecificPop_Video_Extension__QualityWork_Popup",behavior_info_sub:"pop_2"}),this.$nextTick((function(){e.videoInfo.meta.generate.gen_mode=0})))}}},w=y,C=(n(5043),n(0)),component=Object(C.a)(w,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,width:"320px","show-close":!1,top:"10vh","custom-class":"custom-dialog video-prolong-dialog"},on:{"update:visible":function(e){t.visible=e}}},[e("template",{slot:"title"},[e("p",{staticClass:"video-prolong-title"},[t._v("\n      "+t._s(t.$t("videoProlong"))+"\n      "),e("img",{attrs:{src:n(136),alt:""}})])]),t._v(" "),e("div",{staticClass:"prolong-video-pop"},[e("div",{staticClass:"prolong-video-cover"},[e("div",{staticClass:"cover-box",attrs:{"data-tag":t.$t("videoProlong_original")}},[e("img",{attrs:{src:t.coverUrl,alt:""}})])]),t._v(" "),e("div",{staticClass:"form-item"},[e("p",[t._v(t._s(t.$t("generateCanvas")))]),t._v(" "),e("el-radio-group",{on:{input:t.handleGenModeChange},model:{value:t.videoInfo.meta.generate.gen_mode,callback:function(e){t.$set(t.videoInfo.meta.generate,"gen_mode",e)},expression:"videoInfo.meta.generate.gen_mode"}},[e("el-radio-button",{attrs:{label:0,border:""}},[t._v(t._s(t.$t("newGenerate44")))]),t._v(" "),e("el-radio-button",{attrs:{label:1,border:""}},[e("img",{attrs:{src:n(136),alt:"vip_icon"}}),t._v("\n          "+t._s(t.$t("newGenerate45"))+"\n        ")])],1)],1),t._v(" "),e("div",{staticClass:"form-item"},[e("p",[t._v(t._s(t.$t("Duration")))]),t._v(" "),e("el-radio-group",{model:{value:t.videoInfo.meta.generate_video.generate_video_duration,callback:function(e){t.$set(t.videoInfo.meta.generate_video,"generate_video_duration",e)},expression:"videoInfo.meta.generate_video.generate_video_duration"}},[e("el-radio-button",{attrs:{label:5,border:""}},[t._v("5s")]),t._v(" "),e("el-radio-button",{attrs:{label:10,border:""}},[t._v("10s")])],1)],1),t._v(" "),e("div",{staticClass:"prolong-video-prompt custom-form"},[e("p",[t._v(t._s(t.$t("Prompt")))]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:3,placeholder:t.$t("ai_video_generation_prompt")},model:{value:t.videoInfo.meta.prompt,callback:function(e){t.$set(t.videoInfo.meta,"prompt",e)},expression:"videoInfo.meta.prompt"}})],1),t._v(" "),e("div",{staticClass:"prolong-video-prompt custom-form"},[e("p",[t._v(t._s(t.$t("NegativePrompts")))]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:3,placeholder:t.$t("negativePromptsPlaceholder")},model:{value:t.videoInfo.meta.negative_prompt,callback:function(e){t.$set(t.videoInfo.meta,"negative_prompt",e)},expression:"videoInfo.meta.negative_prompt"}})],1),t._v(" "),t.isLoggedIn?e("el-button",{class:{"no-sale":!t.sale},attrs:{type:"primary","data-sale":"".concat(t.sale,"% Off"),loading:t.loading},on:{click:t.videoProlongGenerate}},[t._v(t._s(t.$t("Generate"))+"("+t._s(t.$t("expend"))+": "+t._s(t.cost)+")")]):e("el-button",{staticClass:"no-sale",attrs:{type:"primary"},on:{click:t.videoProlongGenerate}},[t._v(t._s(t.$t("Generate")))])],1)],2)}),[],!1,null,"5d2edbf4",null);e.a=component.exports},925:function(t,e,n){"use strict";var o={name:"MorePopover",props:{showDelete:{type:Boolean,default:!1},showSave:{type:Boolean,default:!1}},components:{},computed:{},data:function(){return{}},methods:{handleAction:function(t){this.$emit(t),this.handleClose()},handleClose:function(){var t=this;try{this.$nextTick((function(){t.$refs.morePopover.doClose()}))}catch(t){}}}},r=(n(5435),n(0)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"more-actions"},[e("el-popover",{ref:"morePopover",attrs:{placement:"bottom-end","popper-class":"ai-album-popover","visible-arrow":!1,width:"100",trigger:"click"}},[e("div",{staticClass:"pop-btns flex"},[t.showSave?e("button",{staticClass:"flex items-center",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.handleAction("save"))}}},[e("i",{staticClass:"iconfont icon-icon-Download"}),t._v(" "+t._s(t.$t("Download"))+"\n      ")]):t._e(),t._v(" "),t.showDelete?e("button",{staticClass:"flex items-center",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.handleAction("delete"))}}},[e("i",{staticClass:"iconfont icon-icon-delete"}),t._v(" "+t._s(t.$t("Delete"))+"\n      ")]):t._e()]),t._v(" "),e("button",{staticClass:"popover-reference",attrs:{slot:"reference"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}},slot:"reference"},[e("i",{staticClass:"iconfont icon-more"})])])],1)}),[],!1,null,"0f0ffaf8",null);e.a=component.exports}}]);