/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1e3:function(t,e,n){(function(t){var r=n(287),o=n(3573),l=e&&!e.nodeType&&e,h=l&&"object"==typeof t&&t&&!t.nodeType&&t,c=h&&h.exports===l?r.Buffer:void 0,f=(c?c.isBuffer:void 0)||o;t.exports=f}).call(this,n(309)(t))},1001:function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},1002:function(t,e,n){(function(t){var r=n(1333),o=e&&!e.nodeType&&e,l=o&&"object"==typeof t&&t&&!t.nodeType&&t,h=l&&l.exports===o&&r.process,c=function(){try{var t=l&&l.require&&l.require("util").types;return t||h&&h.binding&&h.binding("util")}catch(t){}}();t.exports=c}).call(this,n(309)(t))},1003:function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},1004:function(t,e,n){var r=n(1338),o=n(3578),l=n(725);t.exports=function(object){return l(object)?r(object,!0):o(object)}},1005:function(t,e,n){var r=n(657),o=n(1342),l=Object.prototype.propertyIsEnumerable,h=Object.getOwnPropertySymbols,c=h?function(object){return null==object?[]:(object=Object(object),r(h(object),(function(symbol){return l.call(object,symbol)})))}:o;t.exports=c},1006:function(t,e,n){var r=n(1349);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},1014:function(t,e,n){"use strict";var r=n(110),o=n(1372),l=n(123).Buffer,h=new Array(16);function c(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function f(t,e){return t<<e|t>>>32-e}function d(a,b,t,e,n,r,s){return f(a+(b&t|~b&e)+n+r|0,s)+b|0}function m(a,b,t,e,n,r,s){return f(a+(b&e|t&~e)+n+r|0,s)+b|0}function v(a,b,t,e,n,r,s){return f(a+(b^t^e)+n+r|0,s)+b|0}function y(a,b,t,e,n,r,s){return f(a+(t^(b|~e))+n+r|0,s)+b|0}r(c,o),c.prototype._update=function(){for(var t=h,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);var a=this._a,b=this._b,e=this._c,n=this._d;a=d(a,b,e,n,t[0],3614090360,7),n=d(n,a,b,e,t[1],3905402710,12),e=d(e,n,a,b,t[2],606105819,17),b=d(b,e,n,a,t[3],3250441966,22),a=d(a,b,e,n,t[4],4118548399,7),n=d(n,a,b,e,t[5],1200080426,12),e=d(e,n,a,b,t[6],2821735955,17),b=d(b,e,n,a,t[7],4249261313,22),a=d(a,b,e,n,t[8],1770035416,7),n=d(n,a,b,e,t[9],2336552879,12),e=d(e,n,a,b,t[10],4294925233,17),b=d(b,e,n,a,t[11],2304563134,22),a=d(a,b,e,n,t[12],1804603682,7),n=d(n,a,b,e,t[13],4254626195,12),e=d(e,n,a,b,t[14],2792965006,17),a=m(a,b=d(b,e,n,a,t[15],1236535329,22),e,n,t[1],4129170786,5),n=m(n,a,b,e,t[6],3225465664,9),e=m(e,n,a,b,t[11],643717713,14),b=m(b,e,n,a,t[0],3921069994,20),a=m(a,b,e,n,t[5],3593408605,5),n=m(n,a,b,e,t[10],38016083,9),e=m(e,n,a,b,t[15],3634488961,14),b=m(b,e,n,a,t[4],3889429448,20),a=m(a,b,e,n,t[9],568446438,5),n=m(n,a,b,e,t[14],3275163606,9),e=m(e,n,a,b,t[3],4107603335,14),b=m(b,e,n,a,t[8],1163531501,20),a=m(a,b,e,n,t[13],2850285829,5),n=m(n,a,b,e,t[2],4243563512,9),e=m(e,n,a,b,t[7],1735328473,14),a=v(a,b=m(b,e,n,a,t[12],2368359562,20),e,n,t[5],4294588738,4),n=v(n,a,b,e,t[8],2272392833,11),e=v(e,n,a,b,t[11],1839030562,16),b=v(b,e,n,a,t[14],4259657740,23),a=v(a,b,e,n,t[1],2763975236,4),n=v(n,a,b,e,t[4],1272893353,11),e=v(e,n,a,b,t[7],4139469664,16),b=v(b,e,n,a,t[10],3200236656,23),a=v(a,b,e,n,t[13],681279174,4),n=v(n,a,b,e,t[0],3936430074,11),e=v(e,n,a,b,t[3],3572445317,16),b=v(b,e,n,a,t[6],76029189,23),a=v(a,b,e,n,t[9],3654602809,4),n=v(n,a,b,e,t[12],3873151461,11),e=v(e,n,a,b,t[15],530742520,16),a=y(a,b=v(b,e,n,a,t[2],3299628645,23),e,n,t[0],4096336452,6),n=y(n,a,b,e,t[7],1126891415,10),e=y(e,n,a,b,t[14],2878612391,15),b=y(b,e,n,a,t[5],4237533241,21),a=y(a,b,e,n,t[12],1700485571,6),n=y(n,a,b,e,t[3],2399980690,10),e=y(e,n,a,b,t[10],4293915773,15),b=y(b,e,n,a,t[1],2240044497,21),a=y(a,b,e,n,t[8],1873313359,6),n=y(n,a,b,e,t[15],4264355552,10),e=y(e,n,a,b,t[6],2734768916,15),b=y(b,e,n,a,t[13],1309151649,21),a=y(a,b,e,n,t[4],4149444226,6),n=y(n,a,b,e,t[11],3174756917,10),e=y(e,n,a,b,t[2],718787259,15),b=y(b,e,n,a,t[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+e|0,this._d=this._d+n|0},c.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=l.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=c},1016:function(t,e,n){"use strict";(function(e){var r=n(731);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=M;var l,h=r.nextTick;M.WritableState=w;var c=Object.create(n(660));c.inherits=n(110);var f={deprecate:n(3648)},d=n(1375),m=n(123).Buffer,v=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var y,_=n(1376);function x(){}function w(t,e){l=l||n(498),t=t||{};var c=e instanceof l;this.objectMode=!!t.objectMode,c&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var f=t.highWaterMark,d=t.writableHighWaterMark,m=this.objectMode?16:16384;this.highWaterMark=f||0===f?f:c&&(d||0===d)?d:m,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var v=!1===t.decodeStrings;this.decodeStrings=!v,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,o=n.sync,l=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,o,l){--e.pendingcb,n?(r.nextTick(l,o),r.nextTick(P,t,e),t._writableState.errorEmitted=!0,t.emit("error",o)):(l(o),t._writableState.errorEmitted=!0,t.emit("error",o),P(t,e))}(t,n,o,e,l);else{var c=T(n);c||n.corked||n.bufferProcessing||!n.bufferedRequest||A(t,n),o?h(E,t,n,c,l):E(t,n,c,l)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function M(t){if(l=l||n(498),!(y.call(M,this)||this instanceof l))return new M(t);this._writableState=new w(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function S(t,e,n,r,o,l,h){e.writelen=r,e.writecb=h,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,l,e.onwrite),e.sync=!1}function E(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),P(t,e)}function A(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,l=new Array(r),h=e.corkedRequestsFree;h.entry=n;for(var c=0,f=!0;n;)l[c]=n,n.isBuf||(f=!1),n=n.next,c+=1;l.allBuffers=f,S(t,e,!0,e.length,l,"",h.finish),e.pendingcb++,e.lastBufferedRequest=null,h.next?(e.corkedRequestsFree=h.next,h.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var d=n.chunk,m=n.encoding,v=n.callback;if(S(t,e,!1,e.objectMode?1:d.length,d,m,v),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function C(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function P(t,e){var n=T(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r.nextTick(C,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(M,d),w.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(w.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(object){return!!y.call(this,object)||this===M&&(object&&object._writableState instanceof w)}})):y=function(object){return object instanceof this},M.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},M.prototype.write=function(t,e,n){var o,l=this._writableState,h=!1,c=!l.objectMode&&(o=t,m.isBuffer(o)||o instanceof v);return c&&!m.isBuffer(t)&&(t=function(t){return m.from(t)}(t)),"function"==typeof e&&(n=e,e=null),c?e="buffer":e||(e=l.defaultEncoding),"function"!=typeof n&&(n=x),l.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),r.nextTick(e,n)}(this,n):(c||function(t,e,n,o){var l=!0,h=!1;return null===n?h=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(h=new TypeError("Invalid non-string/buffer chunk")),h&&(t.emit("error",h),r.nextTick(o,h),l=!1),l}(this,l,t,n))&&(l.pendingcb++,h=function(t,e,n,r,o,l){if(!n){var h=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=m.from(e,n));return e}(e,r,o);r!==h&&(n=!0,o="buffer",r=h)}var c=e.objectMode?1:r.length;e.length+=c;var f=e.length<e.highWaterMark;f||(e.needDrain=!0);if(e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:l,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,c,r,o,l);return f}(this,l,c,t,e,n)),h},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||A(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},M.prototype._writev=null,M.prototype.end=function(t,e,n){var o=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),o.corked&&(o.corked=1,this.uncork()),o.ending||function(t,e,n){e.ending=!0,P(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,o,n)},Object.defineProperty(M.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=_.destroy,M.prototype._undestroy=_.undestroy,M.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(149))},1017:function(t,e,n){"use strict";var r=n(123).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=f,this.end=d,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=m,this.end=v,e=3;break;default:return this.write=y,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function h(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function c(t){var p=this.lastTotal-this.lastNeed,e=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==e?e:this.lastNeed<=t.length?(t.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,p,0,t.length),void(this.lastNeed-=t.length))}function f(t,i){if((t.length-i)%2==0){var e=t.toString("utf16le",i);if(e){var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",i,t.length-1)}function d(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function m(t,i){var e=(t.length-i)%3;return 0===e?t.toString("base64",i):(this.lastNeed=3-e,this.lastTotal=3,1===e?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",i,t.length-e))}function v(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function y(t){return t.toString(this.encoding)}function _(t){return t&&t.length?this.write(t):""}e.StringDecoder=l,l.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},l.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},l.prototype.text=function(t,i){var e=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=h(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i||-2===r)return 0;if(r=h(e[n]),r>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i||-2===r)return 0;if(r=h(e[n]),r>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,i);if(!this.lastNeed)return t.toString("utf8",i);this.lastTotal=e;var n=t.length-(e-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",i,n)},l.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},1018:function(t,e,n){"use strict";var r=n(262).Buffer,o=n(110),l=n(1372),h=new Array(16),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],v=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function y(){l.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function _(t,e){return t<<e|t>>>32-e}function x(a,b,t,e,n,r,o,s){return _(a+(b^t^e)+r+o|0,s)+n|0}function w(a,b,t,e,n,r,o,s){return _(a+(b&t|~b&e)+r+o|0,s)+n|0}function M(a,b,t,e,n,r,o,s){return _(a+((b|~t)^e)+r+o|0,s)+n|0}function S(a,b,t,e,n,r,o,s){return _(a+(b&e|t&~e)+r+o|0,s)+n|0}function E(a,b,t,e,n,r,o,s){return _(a+(b^(t|~e))+r+o|0,s)+n|0}o(y,l),y.prototype._update=function(){for(var t=h,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,r=0|this._b,o=0|this._c,dl=0|this._d,l=0|this._e,y=0|this._a,br=0|this._b,A=0|this._c,T=0|this._d,C=0|this._e,i=0;i<80;i+=1){var P,tr;i<16?(P=x(n,r,o,dl,l,t[c[i]],v[0],d[i]),tr=E(y,br,A,T,C,t[f[i]],hr[0],m[i])):i<32?(P=w(n,r,o,dl,l,t[c[i]],v[1],d[i]),tr=S(y,br,A,T,C,t[f[i]],hr[1],m[i])):i<48?(P=M(n,r,o,dl,l,t[c[i]],v[2],d[i]),tr=M(y,br,A,T,C,t[f[i]],hr[2],m[i])):i<64?(P=S(n,r,o,dl,l,t[c[i]],v[3],d[i]),tr=w(y,br,A,T,C,t[f[i]],hr[3],m[i])):(P=E(n,r,o,dl,l,t[c[i]],v[4],d[i]),tr=x(y,br,A,T,C,t[f[i]],hr[4],m[i])),n=l,l=dl,dl=_(o,10),o=r,r=P,y=C,C=T,T=_(A,10),A=br,br=tr}var R=this._b+o+T|0;this._b=this._c+dl+C|0,this._c=this._d+l+y|0,this._d=this._e+n+br|0,this._e=this._a+r+A|0,this._a=R},y.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=y},1019:function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(3654),e.sha1=n(3655),e.sha224=n(3656),e.sha256=n(1378),e.sha384=n(3657),e.sha512=n(1379)},1030:function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function l(t,base,e){if(l.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==base&&"be"!==base||(e=base,base=10),this._init(t||0,base||10,e||"be"))}var h;"object"==typeof t?t.exports=l:e.BN=l,l.BN=l,l.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(3726).Buffer}catch(t){}function c(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function f(t,e,n){var r=c(t,n);return n-1>=e&&(r|=c(t,n-1)<<4),r}function d(t,e,n,r){for(var o=0,l=Math.min(t.length,n),i=e;i<l;i++){var h=t.charCodeAt(i)-48;o*=r,o+=h>=49?h-49+10:h>=17?h-17+10:h}return o}l.isBN=function(t){return t instanceof l||null!==t&&"object"==typeof t&&t.constructor.wordSize===l.wordSize&&Array.isArray(t.words)},l.max=function(t,e){return t.cmp(e)>0?t:e},l.min=function(t,e){return t.cmp(e)<0?t:e},l.prototype._init=function(t,base,e){if("number"==typeof t)return this._initNumber(t,base,e);if("object"==typeof t)return this._initArray(t,base,e);"hex"===base&&(base=16),r(base===(0|base)&&base>=2&&base<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===base?this._parseHex(t,n,e):(this._parseBase(t,base,n),"le"===e&&this._initArray(this.toArray(),base,e)))},l.prototype._initNumber=function(t,base,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),base,e)},l.prototype._initArray=function(t,base,e){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o,l=0;if("be"===e)for(i=t.length-1,n=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=o<<l&67108863,this.words[n+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,n++);else if("le"===e)for(i=0,n=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=o<<l&67108863,this.words[n+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,n++);return this.strip()},l.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o=0,l=0;if("be"===n)for(i=t.length-1;i>=e;i-=2)r=f(t,e,i)<<o,this.words[l]|=67108863&r,o>=18?(o-=18,l+=1,this.words[l]|=r>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)r=f(t,e,i)<<o,this.words[l]|=67108863&r,o>=18?(o-=18,l+=1,this.words[l]|=r>>>26):o+=8;this.strip()},l.prototype._parseBase=function(t,base,e){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=base)n++;n--,r=r/base|0;for(var o=t.length-e,l=o%n,h=Math.min(o,o-l)+e,c=0,i=e;i<h;i+=n)c=d(t,i,i+n,base),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==l){var f=1;for(c=d(t,i,t.length,base),i=0;i<l;i++)f*=base;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},l.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},l.prototype.clone=function(){var t=new l(null);return this.copy(t),t},l.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},l.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function _(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var a=0|t.words[0],b=0|e.words[0],o=a*b,l=67108863&o,h=o/67108864|0;n.words[0]=l;for(var c=1;c<r;c++){for(var f=h>>>26,d=67108863&h,m=Math.min(c,e.length-1),v=Math.max(0,c-t.length+1);v<=m;v++){var i=c-v|0;f+=(o=(a=0|t.words[i])*(b=0|e.words[v])+d)/67108864|0,d=67108863&o}n.words[c]=0|d,h=0|f}return 0!==h?n.words[c]=0|h:n.length--,n.strip()}l.prototype.toString=function(base,t){var e;if(t=0|t||1,16===(base=base||10)||"hex"===base){e="";for(var n=0,o=0,i=0;i<this.length;i++){var l=this.words[i],h=(16777215&(l<<n|o)).toString(16);e=0!==(o=l>>>24-n&16777215)||i!==this.length-1?m[6-h.length]+h+e:h+e,(n+=2)>=26&&(n-=26,i--)}for(0!==o&&(e=o.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(base===(0|base)&&base>=2&&base<=36){var c=v[base],f=y[base];e="";var d=this.clone();for(d.negative=0;!d.isZero();){var _=d.modn(f).toString(base);e=(d=d.idivn(f)).isZero()?_+e:m[c-_.length]+_+e}for(this.isZero()&&(e="0"+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(t,e){return r(void 0!==h),this.toArrayLike(h,t,e)},l.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},l.prototype.toArrayLike=function(t,e,n){var o=this.byteLength(),l=n||Math.max(1,o);r(o<=l,"byte array longer than desired length"),r(l>0,"Requested array length <= 0"),this.strip();var b,i,h="le"===e,c=new t(l),q=this.clone();if(h){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),c[i]=b;for(;i<l;i++)c[i]=0}else{for(i=0;i<l-o;i++)c[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),c[l-i-1]=b}return c},Math.clz32?l.prototype._countBits=function(t){return 32-Math.clz32(t)}:l.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},l.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 8191&e||(n+=13,e>>>=13),127&e||(n+=7,e>>>=7),15&e||(n+=4,e>>>=4),3&e||(n+=2,e>>>=2),1&e||n++,n},l.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(t+=b,26!==b)break}return t},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},l.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return 0!==this.negative},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},l.prototype.ior=function(t){return r(!(this.negative|t.negative)),this.iuor(t)},l.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},l.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},l.prototype.iuand=function(t){var b;b=this.length>t.length?t:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=b.length,this.strip()},l.prototype.iand=function(t){return r(!(this.negative|t.negative)),this.iuand(t)},l.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},l.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},l.prototype.iuxor=function(t){var a,b;this.length>t.length?(a=this,b=t):(a=t,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},l.prototype.ixor=function(t){return r(!(this.negative|t.negative)),this.iuxor(t)},l.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},l.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},l.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},l.prototype.notn=function(t){return this.clone().inotn(t)},l.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},l.prototype.iadd=function(t){var e,a,b;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(a=this,b=t):(a=t,b=this);for(var n=0,i=0;i<b.length;i++)e=(0|a.words[i])+(0|b.words[i])+n,this.words[i]=67108863&e,n=e>>>26;for(;0!==n&&i<a.length;i++)e=(0|a.words[i])+n,this.words[i]=67108863&e,n=e>>>26;if(this.length=a.length,0!==n)this.words[this.length]=n,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},l.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},l.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,b,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(a=this,b=t):(a=t,b=this);for(var r=0,i=0;i<b.length;i++)r=(e=(0|a.words[i])-(0|b.words[i])+r)>>26,this.words[i]=67108863&e;for(;0!==r&&i<a.length;i++)r=(e=(0|a.words[i])+r)>>26,this.words[i]=67108863&e;if(0===r&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(t){return this.clone().isub(t)};var x=function(t,e,n){var r,o,l,a=t.words,b=e.words,h=n.words,c=0,f=0|a[0],d=8191&f,m=f>>>13,v=0|a[1],y=8191&v,_=v>>>13,x=0|a[2],w=8191&x,M=x>>>13,S=0|a[3],E=8191&S,A=S>>>13,T=0|a[4],C=8191&T,P=T>>>13,R=0|a[5],I=8191&R,k=R>>>13,D=0|a[6],L=8191&D,F=D>>>13,O=0|a[7],N=8191&O,B=O>>>13,U=0|a[8],z=8191&U,V=U>>>13,j=0|a[9],H=8191&j,G=j>>>13,W=0|b[0],X=8191&W,Y=W>>>13,Z=0|b[1],K=8191&Z,$=Z>>>13,J=0|b[2],Q=8191&J,tt=J>>>13,et=0|b[3],nt=8191&et,it=et>>>13,st=0|b[4],ot=8191&st,at=st>>>13,lt=0|b[5],ht=8191&lt,ut=lt>>>13,ct=0|b[6],ft=8191&ct,pt=ct>>>13,mt=0|b[7],gt=8191&mt,vt=mt>>>13,yt=0|b[8],_t=8191&yt,bt=yt>>>13,xt=0|b[9],wt=8191&xt,Mt=xt>>>13;n.negative=t.negative^e.negative,n.length=19;var St=(c+(r=Math.imul(d,X))|0)+((8191&(o=(o=Math.imul(d,Y))+Math.imul(m,X)|0))<<13)|0;c=((l=Math.imul(m,Y))+(o>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(y,X),o=(o=Math.imul(y,Y))+Math.imul(_,X)|0,l=Math.imul(_,Y);var Et=(c+(r=r+Math.imul(d,K)|0)|0)+((8191&(o=(o=o+Math.imul(d,$)|0)+Math.imul(m,K)|0))<<13)|0;c=((l=l+Math.imul(m,$)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(w,X),o=(o=Math.imul(w,Y))+Math.imul(M,X)|0,l=Math.imul(M,Y),r=r+Math.imul(y,K)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(_,K)|0,l=l+Math.imul(_,$)|0;var At=(c+(r=r+Math.imul(d,Q)|0)|0)+((8191&(o=(o=o+Math.imul(d,tt)|0)+Math.imul(m,Q)|0))<<13)|0;c=((l=l+Math.imul(m,tt)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(E,X),o=(o=Math.imul(E,Y))+Math.imul(A,X)|0,l=Math.imul(A,Y),r=r+Math.imul(w,K)|0,o=(o=o+Math.imul(w,$)|0)+Math.imul(M,K)|0,l=l+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(_,Q)|0,l=l+Math.imul(_,tt)|0;var Tt=(c+(r=r+Math.imul(d,nt)|0)|0)+((8191&(o=(o=o+Math.imul(d,it)|0)+Math.imul(m,nt)|0))<<13)|0;c=((l=l+Math.imul(m,it)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(C,X),o=(o=Math.imul(C,Y))+Math.imul(P,X)|0,l=Math.imul(P,Y),r=r+Math.imul(E,K)|0,o=(o=o+Math.imul(E,$)|0)+Math.imul(A,K)|0,l=l+Math.imul(A,$)|0,r=r+Math.imul(w,Q)|0,o=(o=o+Math.imul(w,tt)|0)+Math.imul(M,Q)|0,l=l+Math.imul(M,tt)|0,r=r+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,it)|0)+Math.imul(_,nt)|0,l=l+Math.imul(_,it)|0;var Ct=(c+(r=r+Math.imul(d,ot)|0)|0)+((8191&(o=(o=o+Math.imul(d,at)|0)+Math.imul(m,ot)|0))<<13)|0;c=((l=l+Math.imul(m,at)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(I,X),o=(o=Math.imul(I,Y))+Math.imul(k,X)|0,l=Math.imul(k,Y),r=r+Math.imul(C,K)|0,o=(o=o+Math.imul(C,$)|0)+Math.imul(P,K)|0,l=l+Math.imul(P,$)|0,r=r+Math.imul(E,Q)|0,o=(o=o+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,l=l+Math.imul(A,tt)|0,r=r+Math.imul(w,nt)|0,o=(o=o+Math.imul(w,it)|0)+Math.imul(M,nt)|0,l=l+Math.imul(M,it)|0,r=r+Math.imul(y,ot)|0,o=(o=o+Math.imul(y,at)|0)+Math.imul(_,ot)|0,l=l+Math.imul(_,at)|0;var Pt=(c+(r=r+Math.imul(d,ht)|0)|0)+((8191&(o=(o=o+Math.imul(d,ut)|0)+Math.imul(m,ht)|0))<<13)|0;c=((l=l+Math.imul(m,ut)|0)+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(L,X),o=(o=Math.imul(L,Y))+Math.imul(F,X)|0,l=Math.imul(F,Y),r=r+Math.imul(I,K)|0,o=(o=o+Math.imul(I,$)|0)+Math.imul(k,K)|0,l=l+Math.imul(k,$)|0,r=r+Math.imul(C,Q)|0,o=(o=o+Math.imul(C,tt)|0)+Math.imul(P,Q)|0,l=l+Math.imul(P,tt)|0,r=r+Math.imul(E,nt)|0,o=(o=o+Math.imul(E,it)|0)+Math.imul(A,nt)|0,l=l+Math.imul(A,it)|0,r=r+Math.imul(w,ot)|0,o=(o=o+Math.imul(w,at)|0)+Math.imul(M,ot)|0,l=l+Math.imul(M,at)|0,r=r+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,ut)|0)+Math.imul(_,ht)|0,l=l+Math.imul(_,ut)|0;var Rt=(c+(r=r+Math.imul(d,ft)|0)|0)+((8191&(o=(o=o+Math.imul(d,pt)|0)+Math.imul(m,ft)|0))<<13)|0;c=((l=l+Math.imul(m,pt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,X),o=(o=Math.imul(N,Y))+Math.imul(B,X)|0,l=Math.imul(B,Y),r=r+Math.imul(L,K)|0,o=(o=o+Math.imul(L,$)|0)+Math.imul(F,K)|0,l=l+Math.imul(F,$)|0,r=r+Math.imul(I,Q)|0,o=(o=o+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,l=l+Math.imul(k,tt)|0,r=r+Math.imul(C,nt)|0,o=(o=o+Math.imul(C,it)|0)+Math.imul(P,nt)|0,l=l+Math.imul(P,it)|0,r=r+Math.imul(E,ot)|0,o=(o=o+Math.imul(E,at)|0)+Math.imul(A,ot)|0,l=l+Math.imul(A,at)|0,r=r+Math.imul(w,ht)|0,o=(o=o+Math.imul(w,ut)|0)+Math.imul(M,ht)|0,l=l+Math.imul(M,ut)|0,r=r+Math.imul(y,ft)|0,o=(o=o+Math.imul(y,pt)|0)+Math.imul(_,ft)|0,l=l+Math.imul(_,pt)|0;var It=(c+(r=r+Math.imul(d,gt)|0)|0)+((8191&(o=(o=o+Math.imul(d,vt)|0)+Math.imul(m,gt)|0))<<13)|0;c=((l=l+Math.imul(m,vt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(z,X),o=(o=Math.imul(z,Y))+Math.imul(V,X)|0,l=Math.imul(V,Y),r=r+Math.imul(N,K)|0,o=(o=o+Math.imul(N,$)|0)+Math.imul(B,K)|0,l=l+Math.imul(B,$)|0,r=r+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,tt)|0)+Math.imul(F,Q)|0,l=l+Math.imul(F,tt)|0,r=r+Math.imul(I,nt)|0,o=(o=o+Math.imul(I,it)|0)+Math.imul(k,nt)|0,l=l+Math.imul(k,it)|0,r=r+Math.imul(C,ot)|0,o=(o=o+Math.imul(C,at)|0)+Math.imul(P,ot)|0,l=l+Math.imul(P,at)|0,r=r+Math.imul(E,ht)|0,o=(o=o+Math.imul(E,ut)|0)+Math.imul(A,ht)|0,l=l+Math.imul(A,ut)|0,r=r+Math.imul(w,ft)|0,o=(o=o+Math.imul(w,pt)|0)+Math.imul(M,ft)|0,l=l+Math.imul(M,pt)|0,r=r+Math.imul(y,gt)|0,o=(o=o+Math.imul(y,vt)|0)+Math.imul(_,gt)|0,l=l+Math.imul(_,vt)|0;var kt=(c+(r=r+Math.imul(d,_t)|0)|0)+((8191&(o=(o=o+Math.imul(d,bt)|0)+Math.imul(m,_t)|0))<<13)|0;c=((l=l+Math.imul(m,bt)|0)+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(H,X),o=(o=Math.imul(H,Y))+Math.imul(G,X)|0,l=Math.imul(G,Y),r=r+Math.imul(z,K)|0,o=(o=o+Math.imul(z,$)|0)+Math.imul(V,K)|0,l=l+Math.imul(V,$)|0,r=r+Math.imul(N,Q)|0,o=(o=o+Math.imul(N,tt)|0)+Math.imul(B,Q)|0,l=l+Math.imul(B,tt)|0,r=r+Math.imul(L,nt)|0,o=(o=o+Math.imul(L,it)|0)+Math.imul(F,nt)|0,l=l+Math.imul(F,it)|0,r=r+Math.imul(I,ot)|0,o=(o=o+Math.imul(I,at)|0)+Math.imul(k,ot)|0,l=l+Math.imul(k,at)|0,r=r+Math.imul(C,ht)|0,o=(o=o+Math.imul(C,ut)|0)+Math.imul(P,ht)|0,l=l+Math.imul(P,ut)|0,r=r+Math.imul(E,ft)|0,o=(o=o+Math.imul(E,pt)|0)+Math.imul(A,ft)|0,l=l+Math.imul(A,pt)|0,r=r+Math.imul(w,gt)|0,o=(o=o+Math.imul(w,vt)|0)+Math.imul(M,gt)|0,l=l+Math.imul(M,vt)|0,r=r+Math.imul(y,_t)|0,o=(o=o+Math.imul(y,bt)|0)+Math.imul(_,_t)|0,l=l+Math.imul(_,bt)|0;var Dt=(c+(r=r+Math.imul(d,wt)|0)|0)+((8191&(o=(o=o+Math.imul(d,Mt)|0)+Math.imul(m,wt)|0))<<13)|0;c=((l=l+Math.imul(m,Mt)|0)+(o>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,r=Math.imul(H,K),o=(o=Math.imul(H,$))+Math.imul(G,K)|0,l=Math.imul(G,$),r=r+Math.imul(z,Q)|0,o=(o=o+Math.imul(z,tt)|0)+Math.imul(V,Q)|0,l=l+Math.imul(V,tt)|0,r=r+Math.imul(N,nt)|0,o=(o=o+Math.imul(N,it)|0)+Math.imul(B,nt)|0,l=l+Math.imul(B,it)|0,r=r+Math.imul(L,ot)|0,o=(o=o+Math.imul(L,at)|0)+Math.imul(F,ot)|0,l=l+Math.imul(F,at)|0,r=r+Math.imul(I,ht)|0,o=(o=o+Math.imul(I,ut)|0)+Math.imul(k,ht)|0,l=l+Math.imul(k,ut)|0,r=r+Math.imul(C,ft)|0,o=(o=o+Math.imul(C,pt)|0)+Math.imul(P,ft)|0,l=l+Math.imul(P,pt)|0,r=r+Math.imul(E,gt)|0,o=(o=o+Math.imul(E,vt)|0)+Math.imul(A,gt)|0,l=l+Math.imul(A,vt)|0,r=r+Math.imul(w,_t)|0,o=(o=o+Math.imul(w,bt)|0)+Math.imul(M,_t)|0,l=l+Math.imul(M,bt)|0;var Lt=(c+(r=r+Math.imul(y,wt)|0)|0)+((8191&(o=(o=o+Math.imul(y,Mt)|0)+Math.imul(_,wt)|0))<<13)|0;c=((l=l+Math.imul(_,Mt)|0)+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(H,Q),o=(o=Math.imul(H,tt))+Math.imul(G,Q)|0,l=Math.imul(G,tt),r=r+Math.imul(z,nt)|0,o=(o=o+Math.imul(z,it)|0)+Math.imul(V,nt)|0,l=l+Math.imul(V,it)|0,r=r+Math.imul(N,ot)|0,o=(o=o+Math.imul(N,at)|0)+Math.imul(B,ot)|0,l=l+Math.imul(B,at)|0,r=r+Math.imul(L,ht)|0,o=(o=o+Math.imul(L,ut)|0)+Math.imul(F,ht)|0,l=l+Math.imul(F,ut)|0,r=r+Math.imul(I,ft)|0,o=(o=o+Math.imul(I,pt)|0)+Math.imul(k,ft)|0,l=l+Math.imul(k,pt)|0,r=r+Math.imul(C,gt)|0,o=(o=o+Math.imul(C,vt)|0)+Math.imul(P,gt)|0,l=l+Math.imul(P,vt)|0,r=r+Math.imul(E,_t)|0,o=(o=o+Math.imul(E,bt)|0)+Math.imul(A,_t)|0,l=l+Math.imul(A,bt)|0;var Ft=(c+(r=r+Math.imul(w,wt)|0)|0)+((8191&(o=(o=o+Math.imul(w,Mt)|0)+Math.imul(M,wt)|0))<<13)|0;c=((l=l+Math.imul(M,Mt)|0)+(o>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(H,nt),o=(o=Math.imul(H,it))+Math.imul(G,nt)|0,l=Math.imul(G,it),r=r+Math.imul(z,ot)|0,o=(o=o+Math.imul(z,at)|0)+Math.imul(V,ot)|0,l=l+Math.imul(V,at)|0,r=r+Math.imul(N,ht)|0,o=(o=o+Math.imul(N,ut)|0)+Math.imul(B,ht)|0,l=l+Math.imul(B,ut)|0,r=r+Math.imul(L,ft)|0,o=(o=o+Math.imul(L,pt)|0)+Math.imul(F,ft)|0,l=l+Math.imul(F,pt)|0,r=r+Math.imul(I,gt)|0,o=(o=o+Math.imul(I,vt)|0)+Math.imul(k,gt)|0,l=l+Math.imul(k,vt)|0,r=r+Math.imul(C,_t)|0,o=(o=o+Math.imul(C,bt)|0)+Math.imul(P,_t)|0,l=l+Math.imul(P,bt)|0;var Ot=(c+(r=r+Math.imul(E,wt)|0)|0)+((8191&(o=(o=o+Math.imul(E,Mt)|0)+Math.imul(A,wt)|0))<<13)|0;c=((l=l+Math.imul(A,Mt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(H,ot),o=(o=Math.imul(H,at))+Math.imul(G,ot)|0,l=Math.imul(G,at),r=r+Math.imul(z,ht)|0,o=(o=o+Math.imul(z,ut)|0)+Math.imul(V,ht)|0,l=l+Math.imul(V,ut)|0,r=r+Math.imul(N,ft)|0,o=(o=o+Math.imul(N,pt)|0)+Math.imul(B,ft)|0,l=l+Math.imul(B,pt)|0,r=r+Math.imul(L,gt)|0,o=(o=o+Math.imul(L,vt)|0)+Math.imul(F,gt)|0,l=l+Math.imul(F,vt)|0,r=r+Math.imul(I,_t)|0,o=(o=o+Math.imul(I,bt)|0)+Math.imul(k,_t)|0,l=l+Math.imul(k,bt)|0;var Nt=(c+(r=r+Math.imul(C,wt)|0)|0)+((8191&(o=(o=o+Math.imul(C,Mt)|0)+Math.imul(P,wt)|0))<<13)|0;c=((l=l+Math.imul(P,Mt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(H,ht),o=(o=Math.imul(H,ut))+Math.imul(G,ht)|0,l=Math.imul(G,ut),r=r+Math.imul(z,ft)|0,o=(o=o+Math.imul(z,pt)|0)+Math.imul(V,ft)|0,l=l+Math.imul(V,pt)|0,r=r+Math.imul(N,gt)|0,o=(o=o+Math.imul(N,vt)|0)+Math.imul(B,gt)|0,l=l+Math.imul(B,vt)|0,r=r+Math.imul(L,_t)|0,o=(o=o+Math.imul(L,bt)|0)+Math.imul(F,_t)|0,l=l+Math.imul(F,bt)|0;var Bt=(c+(r=r+Math.imul(I,wt)|0)|0)+((8191&(o=(o=o+Math.imul(I,Mt)|0)+Math.imul(k,wt)|0))<<13)|0;c=((l=l+Math.imul(k,Mt)|0)+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(H,ft),o=(o=Math.imul(H,pt))+Math.imul(G,ft)|0,l=Math.imul(G,pt),r=r+Math.imul(z,gt)|0,o=(o=o+Math.imul(z,vt)|0)+Math.imul(V,gt)|0,l=l+Math.imul(V,vt)|0,r=r+Math.imul(N,_t)|0,o=(o=o+Math.imul(N,bt)|0)+Math.imul(B,_t)|0,l=l+Math.imul(B,bt)|0;var Ut=(c+(r=r+Math.imul(L,wt)|0)|0)+((8191&(o=(o=o+Math.imul(L,Mt)|0)+Math.imul(F,wt)|0))<<13)|0;c=((l=l+Math.imul(F,Mt)|0)+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,r=Math.imul(H,gt),o=(o=Math.imul(H,vt))+Math.imul(G,gt)|0,l=Math.imul(G,vt),r=r+Math.imul(z,_t)|0,o=(o=o+Math.imul(z,bt)|0)+Math.imul(V,_t)|0,l=l+Math.imul(V,bt)|0;var zt=(c+(r=r+Math.imul(N,wt)|0)|0)+((8191&(o=(o=o+Math.imul(N,Mt)|0)+Math.imul(B,wt)|0))<<13)|0;c=((l=l+Math.imul(B,Mt)|0)+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,r=Math.imul(H,_t),o=(o=Math.imul(H,bt))+Math.imul(G,_t)|0,l=Math.imul(G,bt);var Vt=(c+(r=r+Math.imul(z,wt)|0)|0)+((8191&(o=(o=o+Math.imul(z,Mt)|0)+Math.imul(V,wt)|0))<<13)|0;c=((l=l+Math.imul(V,Mt)|0)+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863;var jt=(c+(r=Math.imul(H,wt))|0)+((8191&(o=(o=Math.imul(H,Mt))+Math.imul(G,wt)|0))<<13)|0;return c=((l=Math.imul(G,Mt))+(o>>>13)|0)+(jt>>>26)|0,jt&=67108863,h[0]=St,h[1]=Et,h[2]=At,h[3]=Tt,h[4]=Ct,h[5]=Pt,h[6]=Rt,h[7]=It,h[8]=kt,h[9]=Dt,h[10]=Lt,h[11]=Ft,h[12]=Ot,h[13]=Nt,h[14]=Bt,h[15]=Ut,h[16]=zt,h[17]=Vt,h[18]=jt,0!==c&&(h[19]=c,n.length++),n};function w(t,e,n){return(new M).mulp(t,e,n)}function M(t,e){this.x=t,this.y=e}Math.imul||(x=_),l.prototype.mulTo=function(t,e){var n,r=this.length+t.length;return n=10===this.length&&10===t.length?x(this,t,e):r<63?_(this,t,e):r<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,o=0,l=0;l<n.length-1;l++){var h=o;o=0;for(var c=67108863&r,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var i=l-d,m=(0|t.words[i])*(0|e.words[d]),v=67108863&m;c=67108863&(v=v+c|0),o+=(h=(h=h+(m/67108864|0)|0)+(v>>>26)|0)>>>26,h&=67108863}n.words[l]=c,r=h,h=o}return 0!==r?n.words[l]=r:n.length--,n.strip()}(this,t,e):w(this,t,e),n},M.prototype.makeRBT=function(t){for(var e=new Array(t),n=l.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,n,t);return e},M.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},M.prototype.permute=function(t,e,n,r,o,l){for(var i=0;i<l;i++)r[i]=e[t[i]],o[i]=n[t[i]]},M.prototype.transform=function(t,e,n,r,o,l){this.permute(l,t,e,n,r,o);for(var s=1;s<o;s<<=1)for(var h=s<<1,c=Math.cos(2*Math.PI/h),f=Math.sin(2*Math.PI/h),p=0;p<o;p+=h)for(var d=c,m=f,v=0;v<s;v++){var y=n[p+v],_=r[p+v],x=n[p+v+s],w=r[p+v+s],M=d*x-m*w;w=d*w+m*x,x=M,n[p+v]=y+x,r[p+v]=_+w,n[p+v+s]=y-x,r[p+v+s]=_-w,v!==h&&(M=c*d-f*m,m=c*m+f*d,d=M)}},M.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},M.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=t[i];t[i]=t[n-i-1],t[n-i-1]=r,r=e[i],e[i]=-e[n-i-1],e[n-i-1]=-r}},M.prototype.normalize13b=function(t,e){for(var n=0,i=0;i<e/2;i++){var r=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+n;t[i]=67108863&r,n=r<67108864?0:r/67108864|0}return t},M.prototype.convert13b=function(t,e,n,o){for(var l=0,i=0;i<e;i++)l+=0|t[i],n[2*i]=8191&l,l>>>=13,n[2*i+1]=8191&l,l>>>=13;for(i=2*e;i<o;++i)n[i]=0;r(0===l),r(!(-8192&l))},M.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},M.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(r),l=this.stub(r),h=new Array(r),c=new Array(r),f=new Array(r),d=new Array(r),m=new Array(r),v=new Array(r),y=n.words;y.length=r,this.convert13b(t.words,t.length,h,r),this.convert13b(e.words,e.length,d,r),this.transform(h,l,c,f,r,o),this.transform(d,l,m,v,r,o);for(var i=0;i<r;i++){var _=c[i]*m[i]-f[i]*v[i];f[i]=c[i]*v[i]+f[i]*m[i],c[i]=_}return this.conjugate(c,f,r),this.transform(c,f,y,l,r,o),this.conjugate(y,l,r),this.normalize13b(y,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},l.prototype.mul=function(t){var e=new l(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},l.prototype.mulf=function(t){var e=new l(null);return e.words=new Array(this.length+t.length),w(this,t,e)},l.prototype.imul=function(t){return this.clone().mulTo(t,this)},l.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},l.prototype.muln=function(t){return this.clone().imuln(t)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,o=n%26;e[n]=(t.words[r]&1<<o)>>>o}return e}(t);if(0===e.length)return new l(1);for(var n=this,i=0;i<e.length&&0===e[i];i++,n=n.sqr());if(++i<e.length)for(var q=n.sqr();i<e.length;i++,q=q.sqr())0!==e[i]&&(n=n.mul(q));return n},l.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,e=t%26,s=(t-e)/26,n=67108863>>>26-e<<26-e;if(0!==e){var o=0;for(i=0;i<this.length;i++){var l=this.words[i]&n,h=(0|this.words[i])-l<<e;this.words[i]=h|o,o=l>>>26-e}o&&(this.words[i]=o,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},l.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},l.prototype.iushrn=function(t,e,n){var o;r("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var l=t%26,s=Math.min((t-l)/26,this.length),mask=67108863^67108863>>>l<<l,h=n;if(o-=s,o=Math.max(0,o),h){for(var i=0;i<s;i++)h.words[i]=this.words[i];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var c=0;for(i=this.length-1;i>=0&&(0!==c||i>=o);i--){var f=0|this.words[i];this.words[i]=c<<26-l|f>>>l,c=f&mask}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},l.prototype.shln=function(t){return this.clone().ishln(t)},l.prototype.ushln=function(t){return this.clone().iushln(t)},l.prototype.shrn=function(t){return this.clone().ishrn(t)},l.prototype.ushrn=function(t){return this.clone().iushrn(t)},l.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,q=1<<e;return!(this.length<=s)&&!!(this.words[s]&q)},l.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var mask=67108863^67108863>>>e<<e;this.words[this.length-1]&=mask}return this.strip()},l.prototype.maskn=function(t){return this.clone().imaskn(t)},l.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},l.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},l.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},l.prototype.addn=function(t){return this.clone().iaddn(t)},l.prototype.subn=function(t){return this.clone().isubn(t)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(t,e,n){var i,o,l=t.length+n;this._expand(l);var h=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+h;var c=(0|t.words[i])*e;h=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)h=(o=(0|this.words[i+n])+h)>>26,this.words[i+n]=67108863&o;if(0===h)return this.strip();for(r(-1===h),h=0,i=0;i<this.length;i++)h=(o=-(0|this.words[i])+h)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},l.prototype._wordDiv=function(t,e){var n=(this.length,t.length),a=this.clone(),b=t,r=0|b.words[b.length-1];0!==(n=26-this._countBits(r))&&(b=b.ushln(n),a.iushln(n),r=0|b.words[b.length-1]);var q,o=a.length-b.length;if("mod"!==e){(q=new l(null)).length=o+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var h=a.clone()._ishlnsubmul(b,1,o);0===h.negative&&(a=h,q&&(q.words[o]=1));for(var c=o-1;c>=0;c--){var f=67108864*(0|a.words[b.length+c])+(0|a.words[b.length+c-1]);for(f=Math.min(f/r|0,67108863),a._ishlnsubmul(b,f,c);0!==a.negative;)f--,a.negative=0,a._ishlnsubmul(b,1,c),a.isZero()||(a.negative^=1);q&&(q.words[c]=f)}return q&&q.strip(),a.strip(),"div"!==e&&0!==n&&a.iushrn(n),{div:q||null,mod:a}},l.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:0!==this.negative&&0===t.negative?(h=this.neg().divmod(t,e),"mod"!==e&&(div=h.div.neg()),"div"!==e&&(o=h.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:div,mod:o}):0===this.negative&&0!==t.negative?(h=this.divmod(t.neg(),e),"mod"!==e&&(div=h.div.neg()),{div:div,mod:h.mod}):this.negative&t.negative?(h=this.neg().divmod(t.neg(),e),"div"!==e&&(o=h.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:h.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new l(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new l(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new l(this.modn(t.words[0]))}:this._wordDiv(t,e);var div,o,h},l.prototype.div=function(t){return this.divmod(t,"div",!1).div},l.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},l.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},l.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),o=t.andln(1),l=n.cmp(r);return l<0||1===o&&0===l?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},l.prototype.modn=function(t){r(t<=67108863);for(var p=(1<<26)%t,e=0,i=this.length-1;i>=0;i--)e=(p*e+(0|this.words[i]))%t;return e},l.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},l.prototype.divn=function(t){return this.clone().idivn(t)},l.prototype.egcd=function(p){r(0===p.negative),r(!p.isZero());var t=this,e=p.clone();t=0!==t.negative?t.umod(p):t.clone();for(var n=new l(1),o=new l(0),h=new l(0),c=new l(1),g=0;t.isEven()&&e.isEven();)t.iushrn(1),e.iushrn(1),++g;for(var f=e.clone(),d=t.clone();!t.isZero();){for(var i=0,m=1;!(t.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(t.iushrn(i);i-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(f),o.isub(d)),n.iushrn(1),o.iushrn(1);for(var v=0,y=1;!(e.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(h.isOdd()||c.isOdd())&&(h.iadd(f),c.isub(d)),h.iushrn(1),c.iushrn(1);t.cmp(e)>=0?(t.isub(e),n.isub(h),o.isub(c)):(e.isub(t),h.isub(n),c.isub(o))}return{a:h,b:c,gcd:e.iushln(g)}},l.prototype._invmp=function(p){r(0===p.negative),r(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var t,e=new l(1),n=new l(0),o=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,h=1;!(a.words[0]&h)&&i<26;++i,h<<=1);if(i>0)for(a.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(o),e.iushrn(1);for(var c=0,f=1;!(b.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(b.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);a.cmp(b)>=0?(a.isub(b),e.isub(n)):(b.isub(a),n.isub(e))}return(t=0===a.cmpn(1)?e:n).cmpn(0)<0&&t.iadd(p),t},l.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),b=t.clone();a.negative=0,b.negative=0;for(var e=0;a.isEven()&&b.isEven();e++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var n=a.cmp(b);if(n<0){var r=a;a=b,b=r}else if(0===n||0===b.cmpn(1))break;a.isub(b)}return b.iushln(e)},l.prototype.invm=function(t){return this.egcd(t).a.umod(t)},l.prototype.isEven=function(){return!(1&this.words[0])},l.prototype.isOdd=function(){return!(1&~this.words[0])},l.prototype.andln=function(t){return this.words[0]&t},l.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,s=(t-e)/26,q=1<<e;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var n=q,i=s;0!==n&&i<this.length;i++){var o=0|this.words[i];n=(o+=n)>>>26,o&=67108863,this.words[i]=o}return 0!==n&&(this.words[i]=n,this.length++),this},l.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},l.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},l.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},l.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|t.words[i];if(a!==b){a<b?e=-1:a>b&&(e=1);break}}return e},l.prototype.gtn=function(t){return 1===this.cmpn(t)},l.prototype.gt=function(t){return 1===this.cmp(t)},l.prototype.gten=function(t){return this.cmpn(t)>=0},l.prototype.gte=function(t){return this.cmp(t)>=0},l.prototype.ltn=function(t){return-1===this.cmpn(t)},l.prototype.lt=function(t){return-1===this.cmp(t)},l.prototype.lten=function(t){return this.cmpn(t)<=0},l.prototype.lte=function(t){return this.cmp(t)<=0},l.prototype.eqn=function(t){return 0===this.cmpn(t)},l.prototype.eq=function(t){return 0===this.cmp(t)},l.red=function(t){return new R(t)},l.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(t){return this.red=t,this},l.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},l.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},l.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},l.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},l.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},l.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},l.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},l.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var S={k256:null,p224:null,p192:null,p25519:null};function E(t,p){this.name=t,this.p=new l(p,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(t){if("string"==typeof t){var e=l._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){R.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var t=new l(null);return t.words=new Array(Math.ceil(this.n/13)),t},E.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},E.prototype.split=function(input,t){input.iushrn(this.n,0,t)},E.prototype.imulK=function(t){return t.imul(this.k)},o(A,E),A.prototype.split=function(input,output){for(var mask=4194303,t=Math.min(input.length,9),i=0;i<t;i++)output.words[i]=input.words[i];if(output.length=t,input.length<=9)return input.words[0]=0,void(input.length=1);var e=input.words[9];for(output.words[output.length++]=e&mask,i=10;i<input.length;i++){var n=0|input.words[i];input.words[i-10]=(n&mask)<<4|e>>>22,e=n}e>>>=22,input.words[i-10]=e,0===e&&input.length>10?input.length-=10:input.length-=9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(T,E),o(C,E),o(P,E),P.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},l._prime=function(t){if(S[t])return S[t];var e;if("k256"===t)e=new A;else if("p224"===t)e=new T;else if("p192"===t)e=new C;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new P}return S[t]=e,e},R.prototype._verify1=function(a){r(0===a.negative,"red works only with positives"),r(a.red,"red works only with red numbers")},R.prototype._verify2=function(a,b){r(!(a.negative|b.negative),"red works only with positives"),r(a.red&&a.red===b.red,"red works only with red numbers")},R.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},R.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},R.prototype.add=function(a,b){this._verify2(a,b);var t=a.add(b);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},R.prototype.iadd=function(a,b){this._verify2(a,b);var t=a.iadd(b);return t.cmp(this.m)>=0&&t.isub(this.m),t},R.prototype.sub=function(a,b){this._verify2(a,b);var t=a.sub(b);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},R.prototype.isub=function(a,b){this._verify2(a,b);var t=a.isub(b);return t.cmpn(0)<0&&t.iadd(this.m),t},R.prototype.shl=function(a,t){return this._verify1(a),this.imod(a.ushln(t))},R.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},R.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},R.prototype.isqr=function(a){return this.imul(a,a.clone())},R.prototype.sqr=function(a){return this.mul(a,a)},R.prototype.sqrt=function(a){if(a.isZero())return a.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var e=this.m.add(new l(1)).iushrn(2);return this.pow(a,e)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);r(!q.isZero());var n=new l(1).toRed(this),o=n.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new l(2*c*c).toRed(this);0!==this.pow(c,h).cmp(o);)c.redIAdd(o);for(var f=this.pow(c,q),d=this.pow(a,q.addn(1).iushrn(1)),m=this.pow(a,q),v=s;0!==m.cmp(n);){for(var y=m,i=0;0!==y.cmp(n);i++)y=y.redSqr();r(i<v);var b=this.pow(f,new l(1).iushln(v-i-1));d=d.redMul(b),f=b.redSqr(),m=m.redMul(f),v=i}return d},R.prototype.invm=function(a){var t=a._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},R.prototype.pow=function(a,t){if(t.isZero())return new l(1).toRed(this);if(0===t.cmpn(1))return a.clone();var e=new Array(16);e[0]=new l(1).toRed(this),e[1]=a;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],a);var n=e[0],r=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],f=h-1;f>=0;f--){var d=c>>f&1;n!==e[0]&&(n=this.sqr(n)),0!==d||0!==r?(r<<=1,r|=d,(4===++o||0===i&&0===f)&&(n=this.mul(n,e[r]),o=0,r=0)):o=0}h=26}return n},R.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},R.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},l.mont=function(t){return new I(t)},o(I,R),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),n=u;return u.cmp(this.m)>=0?n=u.isub(this.m):u.cmpn(0)<0&&(n=u.iadd(this.m)),n._forceRed(this)},I.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new l(0)._forceRed(this);var t=a.mul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),n=u;return u.cmp(this.m)>=0?n=u.isub(this.m):u.cmpn(0)<0&&(n=u.iadd(this.m)),n._forceRed(this)},I.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(309)(t))},104:function(t,e,n){t.exports={after:n(3933),ary:n(1615),before:n(1629),bind:n(3954),bindKey:n(3955),curry:n(3956),curryRight:n(3957),debounce:n(380),defer:n(3959),delay:n(3960),flip:n(3961),memoize:n(1632),negate:n(3962),once:n(3963),overArgs:n(3964),partial:n(1639),partialRight:n(3987),rearg:n(3988),rest:n(3989),spread:n(3990),throttle:n(3992),unary:n(3993),wrap:n(3994)}},1078:function(t,e){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},1079:function(t,e,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(t){for(var i=0;i<this.__rules__.length;i++)if(this.__rules__[i].name===t)return i;return-1},r.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(n){n.enabled&&(e&&n.alt.indexOf(e)<0||t.__cache__[e].push(n.fn))}))}))},r.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null},r.prototype.before=function(t,e,n,r){var o=this.__find__(t),l=r||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:l.alt||[]}),this.__cache__=null},r.prototype.after=function(t,e,n,r){var o=this.__find__(t),l=r||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:l.alt||[]}),this.__cache__=null},r.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!0,n.push(t)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach((function(t){t.enabled=!1})),this.enable(t,e)},r.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!1,n.push(t)}),this),this.__cache__=null,n},r.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},t.exports=r},1080:function(t,e,n){"use strict";function r(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(t){var e,i,n;if(!this.attrs)return-1;for(i=0,n=(e=this.attrs).length;i<n;i++)if(e[i][0]===t)return i;return-1},r.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},r.prototype.attrSet=function(t,e){var n=this.attrIndex(t),r=[t,e];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n},r.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e},t.exports=r},1081:function(t,e,n){var r=n(3935),o=n(354),l=n(506),h=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,d=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(l(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=c.test(t);return n||f.test(t)?d(t.slice(2),n?2:8):h.test(t)?NaN:+t}},1082:function(t,e,n){var r=n(727),o=n(1083);function l(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}l.prototype=r(o.prototype),l.prototype.constructor=l,t.exports=l},1083:function(t,e){t.exports=function(){}},1084:function(t,e,n){var r=n(3947),o=n(1626)(r);t.exports=o},1085:function(t,e,n){var r=n(759),o=n(1628),l=n(3950);t.exports=function(t,e,n){return e==e?l(t,e,n):r(t,o,n)}},1086:function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},1087:function(t,e,n){var r=n(762),o=n(546);t.exports=function(object,path){for(var t=0,e=(path=r(path,object)).length;null!=object&&t<e;)object=object[o(path[t++])];return t&&t==e?object:void 0}},1088:function(t,e,n){var r=n(312),o=n(506),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/;t.exports=function(t,object){if(r(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!o(t))||(h.test(t)||!l.test(t)||null!=object&&t in Object(object))}},1089:function(t,e,n){var r=n(495),o=n(725),l=n(447),h=n(354);t.exports=function(t,e,object){if(!h(object))return!1;var n=typeof e;return!!("number"==n?o(object)&&l(e,object.length):"string"==n&&e in object)&&r(object[e],t)}},1090:function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},1091:function(t,e,n){var r=n(760),o=n(758),l=n(1090),h=n(376),c=n(497),f=n(761),d=Math.min;t.exports=function(t,e,n){for(var m=n?l:o,v=t[0].length,y=t.length,_=y,x=Array(y),w=1/0,M=[];_--;){var S=t[_];_&&e&&(S=h(S,c(e))),w=d(S.length,w),x[_]=!n&&(e||v>=120&&S.length>=120)?new r(_&&S):void 0}S=t[0];var E=-1,A=x[0];t:for(;++E<v&&M.length<w;){var T=S[E],C=e?e(T):T;if(T=n||0!==T?T:0,!(A?f(A,C):m(M,C,n))){for(_=y;--_;){var P=x[_];if(!(P?f(P,C):m(t[_],C,n)))continue t}A&&A.push(C),M.push(T)}}return M}},1092:function(t,e,n){var r=n(358);t.exports=function(t){return r(t)?t:[]}},1093:function(t,e,n){var r=n(376),o=n(1085),l=n(4191),h=n(497),c=n(656),f=Array.prototype.splice;t.exports=function(t,e,n,d){var m=d?l:o,v=-1,y=e.length,_=t;for(t===e&&(e=c(e)),n&&(_=r(t,h(n)));++v<y;)for(var x=0,w=e[v],M=n?n(w):w;(x=m(_,M,x,d))>-1;)_!==t&&f.call(_,x,1),f.call(t,x,1);return t}},1094:function(t,e,n){var r=n(506),o=Math.floor,l=Math.min;t.exports=function(t,e,n,h){var c=0,f=null==t?0:t.length;if(0===f)return 0;for(var d=(e=n(e))!=e,m=null===e,v=r(e),y=void 0===e;c<f;){var _=o((c+f)/2),x=n(t[_]),w=void 0!==x,M=null===x,S=x==x,E=r(x);if(d)var A=h||S;else A=y?S&&(h||w):m?S&&w&&(h||!M):v?S&&w&&!M&&(h||!E):!M&&!E&&(h?x<=e:x<e);A?c=_+1:f=_}return l(f,4294967294)}},1095:function(t,e,n){var r=n(657),o=n(376),l=n(1638),h=n(1339),c=n(358),f=Math.max;t.exports=function(t){if(!t||!t.length)return[];var e=0;return t=r(t,(function(t){if(c(t))return e=f(t.length,e),!0})),h(e,(function(e){return o(t,l(e))}))}},1096:function(t,e,n){var r=n(672),o=n(357),l=n(508);t.exports=function(t,e,n){var h=t.length;if(h<2)return h?l(t[0]):[];for(var c=-1,f=Array(h);++c<h;)for(var d=t[c],m=-1;++m<h;)m!=c&&(f[c]=r(f[c]||d,t[m],e,n));return l(o(f,1),e,n)}},110:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},1117:function(t,e,n){"use strict";var r=String.prototype.replace,o=/%20/g,l="RFC1738",h="RFC3986";t.exports={default:h,formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return String(t)}},RFC1738:l,RFC3986:h}},121:function(t,e,n){(function(e){t.exports=function t(e,n,r){function s(o,u){if(!n[o]){if(!e[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};e[o][0].call(h.exports,(function(t){var n=e[o][1][t];return s(n||t)}),h,h.exports,t,e,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,n,r){(function(t){"use strict";var e,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var l=0,h=new o(d),element=t.document.createTextNode("");h.observe(element,{characterData:!0}),e=function(){element.data=l=++l%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var c=new t.MessageChannel;c.port1.onmessage=d,e=function(){c.port2.postMessage(0)}}var f=[];function d(){var i,t;r=!0;for(var e=f.length;e;){for(t=f,f=[],i=-1;++i<e;)t[i]();e=f.length}r=!1}function m(t){1!==f.push(t)||r||e()}n.exports=m}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function o(){}var l={},h=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,t!==o&&_(this,t)}function m(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function v(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return l.reject(t,e)}r===t?l.reject(t,new TypeError("Cannot resolve promise with itself")):l.resolve(t,r)}))}function y(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function _(t,e){var n=!1;function r(e){n||(n=!0,l.reject(t,e))}function o(e){n||(n=!0,l.resolve(t,e))}function h(){e(o,r)}var c=x(h);"error"===c.status&&r(c.value)}function x(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function w(t){return t instanceof this?t:l.resolve(new this(o),t)}function M(t){var e=new this(o);return l.reject(e,t)}function S(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var h=new Array(n),c=0,i=-1,f=new this(o);++i<n;)d(t[i],i);return f;function d(t,i){function o(t){h[i]=t,++c!==n||r||(r=!0,l.resolve(f,h))}e.resolve(t).then(o,(function(t){r||(r=!0,l.reject(f,t))}))}}function E(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var i=-1,h=new this(o);++i<n;)c(t[i]);return h;function c(t){e.resolve(t).then((function(t){r||(r=!0,l.resolve(h,t))}),(function(t){r||(r=!0,l.reject(h,t))}))}}e.exports=d,d.prototype.catch=function(t){return this.then(null,t)},d.prototype.then=function(t,e){if("function"!=typeof t&&this.state===c||"function"!=typeof e&&this.state===h)return this;var n=new this.constructor(o);return this.state!==f?v(n,this.state===c?t:e,this.outcome):this.queue.push(new m(n,t,e)),n},m.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},m.prototype.otherCallFulfilled=function(t){v(this.promise,this.onFulfilled,t)},m.prototype.callRejected=function(t){l.reject(this.promise,t)},m.prototype.otherCallRejected=function(t){v(this.promise,this.onRejected,t)},l.resolve=function(t,e){var n=x(y,e);if("error"===n.status)return l.reject(t,n.value);var r=n.value;if(r)_(t,r);else{t.state=c,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},l.reject=function(t,e){t.state=h,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},d.resolve=w,d.reject=M,d.all=S,d.race=E},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var h=l();function c(){try{if(!h||!h.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function f(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var d=Promise;function m(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function v(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function y(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function _(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",w=void 0,M={},S=Object.prototype.toString,E="readonly",A="readwrite";function T(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function C(t){return new d((function(e){var n=t.transaction(x,A),r=f([""]);n.objectStore(x).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function P(t){return"boolean"==typeof w?d.resolve(w):C(t).then((function(t){return w=t}))}function R(t){var e=M[t.name],n={};n.promise=new d((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function I(t){var e=M[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function k(t,e){var n=M[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function D(t,e){return new d((function(n,r){if(M[t.name]=M[t.name]||H(),t.db){if(!e)return n(t.db);R(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var l=h.open.apply(h,o);e&&(l.onupgradeneeded=function(e){var n=l.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(x)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),l.onerror=function(t){t.preventDefault(),r(l.error)},l.onsuccess=function(){var e=l.result;e.onversionchange=function(t){t.target.close()},n(e),I(t)}}))}function L(t){return D(t,!1)}function F(t){return D(t,!0)}function O(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var l=t.db.version+1;l>t.version&&(t.version=l)}return!0}return!1}function N(t){return new d((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}function B(t){return f([T(atob(t.data))],{type:t.type})}function U(t){return t&&t.__local_forage_encoded_blob}function z(t){var e=this,n=e._initReady().then((function(){var t=M[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return v(n,t,t),n}function V(t){R(t);for(var e=M[t.name],n=e.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return t.db=null,L(t).then((function(e){return t.db=e,O(t)?F(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw k(t,e),e}))}function j(t,e,n,r){void 0===r&&(r=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(r>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return d.resolve().then((function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),F(t)})).then((function(){return V(t).then((function(){j(t,e,n,r-1)}))})).catch(n);n(o)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(t){var e=this,n={db:null};if(t)for(var i in t)n[i]=t[i];var r=M[n.name];r||(r=H(),M[n.name]=r),r.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=z);var o=[];function l(){return d.resolve()}for(var h=0;h<r.forages.length;h++){var c=r.forages[h];c!==e&&o.push(c._initReady().catch(l))}var f=r.forages.slice(0);return d.all(o).then((function(){return n.db=r.db,L(n)})).then((function(t){return n.db=t,O(n,e._defaultConfig.version)?F(n):t})).then((function(t){n.db=r.db=t,e._dbInfo=n;for(var o=0;o<f.length;o++){var l=f[o];l!==e&&(l._dbInfo.db=n.db,l._dbInfo.version=n.version)}}))}function W(t,e){var n=this;t=y(t);var r=new d((function(e,r){n.ready().then((function(){j(n._dbInfo,E,(function(o,l){if(o)return r(o);try{var h=l.objectStore(n._dbInfo.storeName).get(t);h.onsuccess=function(){var t=h.result;void 0===t&&(t=null),U(t)&&(t=B(t)),e(t)},h.onerror=function(){r(h.error)}}catch(t){r(t)}}))})).catch(r)}));return m(r,e),r}function X(t,e){var n=this,r=new d((function(e,r){n.ready().then((function(){j(n._dbInfo,E,(function(o,l){if(o)return r(o);try{var h=l.objectStore(n._dbInfo.storeName).openCursor(),c=1;h.onsuccess=function(){var cursor=h.result;if(cursor){var n=cursor.value;U(n)&&(n=B(n));var r=t(n,cursor.key,c++);void 0!==r?e(r):cursor.continue()}else e()},h.onerror=function(){r(h.error)}}catch(t){r(t)}}))})).catch(r)}));return m(r,e),r}function Y(t,e,n){var r=this;t=y(t);var o=new d((function(n,o){var l;r.ready().then((function(){return l=r._dbInfo,"[object Blob]"===S.call(e)?P(l.db).then((function(t){return t?e:N(e)})):e})).then((function(e){j(r._dbInfo,A,(function(l,h){if(l)return o(l);try{var c=h.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var f=c.put(e,t);h.oncomplete=function(){void 0===e&&(e=null),n(e)},h.onabort=h.onerror=function(){var t=f.error?f.error:f.transaction.error;o(t)}}catch(t){o(t)}}))})).catch(o)}));return m(o,n),o}function Z(t,e){var n=this;t=y(t);var r=new d((function(e,r){n.ready().then((function(){j(n._dbInfo,A,(function(o,l){if(o)return r(o);try{var h=l.objectStore(n._dbInfo.storeName).delete(t);l.oncomplete=function(){e()},l.onerror=function(){r(h.error)},l.onabort=function(){var t=h.error?h.error:h.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return m(r,e),r}function K(t){var e=this,n=new d((function(t,n){e.ready().then((function(){j(e._dbInfo,A,(function(r,o){if(r)return n(r);try{var l=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=l.error?l.error:l.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return m(n,t),n}function $(t){var e=this,n=new d((function(t,n){e.ready().then((function(){j(e._dbInfo,E,(function(r,o){if(r)return n(r);try{var l=o.objectStore(e._dbInfo.storeName).count();l.onsuccess=function(){t(l.result)},l.onerror=function(){n(l.error)}}catch(t){n(t)}}))})).catch(n)}));return m(n,t),n}function J(t,e){var n=this,r=new d((function(e,r){t<0?e(null):n.ready().then((function(){j(n._dbInfo,E,(function(o,l){if(o)return r(o);try{var h=l.objectStore(n._dbInfo.storeName),c=!1,f=h.openKeyCursor();f.onsuccess=function(){var cursor=f.result;cursor?0===t||c?e(cursor.key):(c=!0,cursor.advance(t)):e(null)},f.onerror=function(){r(f.error)}}catch(t){r(t)}}))})).catch(r)}));return m(r,e),r}function Q(t){var e=this,n=new d((function(t,n){e.ready().then((function(){j(e._dbInfo,E,(function(r,o){if(r)return n(r);try{var l=o.objectStore(e._dbInfo.storeName).openKeyCursor(),h=[];l.onsuccess=function(){var cursor=l.result;cursor?(h.push(cursor.key),cursor.continue()):t(h)},l.onerror=function(){n(l.error)}}catch(t){n(t)}}))})).catch(n)}));return m(n,t),n}function tt(t,e){e=_.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var l=t.name===n.name&&o._dbInfo.db?d.resolve(o._dbInfo.db):L(t).then((function(e){var n=M[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));r=t.storeName?l.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;R(t);var r=M[t.name],o=r.forages;e.close();for(var i=0;i<o.length;i++){var l=o[i];l._dbInfo.db=null,l._dbInfo.version=n}var c=new d((function(e,r){var o=h.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}));return c.then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,I(n._dbInfo)}})).catch((function(e){throw(k(t,e)||d.resolve()).catch((function(){})),e}))}})):l.then((function(e){R(t);var n=M[t.name],r=n.forages;e.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;var o=new d((function(e,n){var r=h.deleteDatabase(t.name);r.onerror=function(){var t=r.result;t&&t.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}));return o.then((function(t){n.db=t;for(var i=0;i<r.length;i++)I(r[i]._dbInfo)})).catch((function(e){throw(k(t,e)||d.resolve()).catch((function(){})),e}))}))}else r=d.reject("Invalid arguments");return m(r,e),r}var et={_driver:"asyncStorage",_initStorage:G,_support:c(),iterate:X,getItem:W,setItem:Y,removeItem:Z,clear:K,length:$,key:J,keys:Q,dropInstance:tt};function nt(){return"function"==typeof openDatabase}var it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",st="~~local_forage_type~",ot=/^~~local_forage_type~([^~]+)~/,at="__lfsc__:",lt=at.length,ht="arbf",ut="blob",ct="si08",ft="ui08",pt="uic8",mt="si16",gt="si32",vt="ur16",yt="ui32",_t="fl32",bt="fl64",xt=lt+ht.length,wt=Object.prototype.toString;function Mt(t){var i,e,n,r,o,l=.75*t.length,h=t.length,p=0;"="===t[t.length-1]&&(l--,"="===t[t.length-2]&&l--);var c=new ArrayBuffer(l),f=new Uint8Array(c);for(i=0;i<h;i+=4)e=it.indexOf(t[i]),n=it.indexOf(t[i+1]),r=it.indexOf(t[i+2]),o=it.indexOf(t[i+3]),f[p++]=e<<2|n>>4,f[p++]=(15&n)<<4|r>>2,f[p++]=(3&r)<<6|63&o;return c}function St(t){var i,e=new Uint8Array(t),n="";for(i=0;i<e.length;i+=3)n+=it[e[i]>>2],n+=it[(3&e[i])<<4|e[i+1]>>4],n+=it[(15&e[i+1])<<2|e[i+2]>>6],n+=it[63&e[i+2]];return e.length%3==2?n=n.substring(0,n.length-1)+"=":e.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function Et(t,e){var n="";if(t&&(n=wt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===wt.call(t.buffer))){var r,marker=at;t instanceof ArrayBuffer?(r=t,marker+=ht):(r=t.buffer,"[object Int8Array]"===n?marker+=ct:"[object Uint8Array]"===n?marker+=ft:"[object Uint8ClampedArray]"===n?marker+=pt:"[object Int16Array]"===n?marker+=mt:"[object Uint16Array]"===n?marker+=vt:"[object Int32Array]"===n?marker+=gt:"[object Uint32Array]"===n?marker+=yt:"[object Float32Array]"===n?marker+=_t:"[object Float64Array]"===n?marker+=bt:e(new Error("Failed to get type for BinaryArray"))),e(marker+St(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=st+t.type+"~"+St(this.result);e(at+ut+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function At(t){if(t.substring(0,lt)!==at)return JSON.parse(t);var e,n=t.substring(xt),r=t.substring(lt,xt);if(r===ut&&ot.test(n)){var o=n.match(ot);e=o[1],n=n.substring(o[0].length)}var l=Mt(n);switch(r){case ht:return l;case ut:return f([l],{type:e});case ct:return new Int8Array(l);case ft:return new Uint8Array(l);case pt:return new Uint8ClampedArray(l);case mt:return new Int16Array(l);case vt:return new Uint16Array(l);case gt:return new Int32Array(l);case yt:return new Uint32Array(l);case _t:return new Float32Array(l);case bt:return new Float64Array(l);default:throw new Error("Unkown type: "+r)}}var Tt={serialize:Et,deserialize:At,stringToBuffer:Mt,bufferToString:St};function Ct(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Pt(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var r=new d((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(o){Ct(o,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=Tt,r}function Rt(t,e,n,r,o,l){t.executeSql(n,r,o,(function(t,h){h.code===h.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,c){c.rows.length?l(t,h):Ct(t,e,(function(){t.executeSql(n,r,o,l)}),l)}),l):l(t,h)}),l)}function It(t,e){var n=this;t=y(t);var r=new d((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Rt(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return m(r,e),r}function kt(t,e){var n=this,r=new d((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Rt(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var l=r.rows,h=l.length,i=0;i<h;i++){var c=l.item(i),f=c.value;if(f&&(f=o.serializer.deserialize(f)),void 0!==(f=t(f,c.key,i+1)))return void e(f)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return m(r,e),r}function Dt(t,e,n,r){var o=this;t=y(t);var l=new d((function(l,h){o.ready().then((function(){void 0===e&&(e=null);var c=e,f=o._dbInfo;f.serializer.serialize(e,(function(e,d){d?h(d):f.db.transaction((function(n){Rt(n,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){l(c)}),(function(t,e){h(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void l(Dt.apply(o,[t,c,n,r-1]));h(e)}}))}))})).catch(h)}));return m(l,n),l}function Lt(t,e,n){return Dt.apply(this,[t,e,n,1])}function Ft(t,e){var n=this;t=y(t);var r=new d((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Rt(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return m(r,e),r}function Ot(t){var e=this,n=new d((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Rt(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return m(n,t),n}function Nt(t){var e=this,n=new d((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Rt(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return m(n,t),n}function Bt(t,e){var n=this,r=new d((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Rt(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return m(r,e),r}function Ut(t){var e=this,n=new d((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Rt(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return m(n,t),n}function zt(t){return new d((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}function Vt(t,e){e=_.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;return m(r=t.name?new d((function(e){var r;r=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(zt(r))})).then((function(t){return new d((function(e,n){t.db.transaction((function(r){function o(t){return new d((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var l=[],i=0,h=t.storeNames.length;i<h;i++)l.push(o(t.storeNames[i]));d.all(l).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):d.reject("Invalid arguments"),e),r}var jt={_driver:"webSQLStorage",_initStorage:Pt,_support:nt(),iterate:kt,getItem:It,setItem:Lt,removeItem:Ft,clear:Ot,length:Nt,key:Bt,keys:Ut,dropInstance:Vt};function Ht(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Gt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function Wt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function qt(){return!Wt()||localStorage.length>0}function Xt(t){var e=this,n={};if(t)for(var i in t)n[i]=t[i];return n.keyPrefix=Gt(t,e._defaultConfig),qt()?(e._dbInfo=n,n.serializer=Tt,d.resolve()):d.reject()}function Yt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return m(n,t),n}function Zt(t,e){var n=this;t=y(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return m(r,e),r}function Kt(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,l=localStorage.length,h=1,i=0;i<l;i++){var c=localStorage.key(i);if(0===c.indexOf(r)){var f=localStorage.getItem(c);if(f&&(f=e.serializer.deserialize(f)),void 0!==(f=t(f,c.substring(o),h++)))return f}}}));return m(r,e),r}function $t(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return m(r,e),r}function Jt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return m(n,t),n}function Qt(t){var e=this.keys().then((function(t){return t.length}));return m(e,t),e}function te(t,e){var n=this;t=y(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return m(r,e),r}function ee(t,e,n){var r=this;t=y(t);var o=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new d((function(o,l){var h=r._dbInfo;h.serializer.serialize(e,(function(e,r){if(r)l(r);else try{localStorage.setItem(h.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||l(t),l(t)}}))}))}));return m(o,n),o}function ne(t,e){if(e=_.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return r=t.name?new d((function(e){t.storeName?e(Gt(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var i=localStorage.length-1;i>=0;i--){var e=localStorage.key(i);0===e.indexOf(t)&&localStorage.removeItem(e)}})):d.reject("Invalid arguments"),m(r,e),r}var re={_driver:"localStorageWrapper",_initStorage:Xt,_support:Ht(),iterate:Kt,getItem:Zt,setItem:ee,removeItem:te,clear:Yt,length:Qt,key:$t,keys:Jt,dropInstance:ne},ie=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},se=function(t,e){for(var n=t.length,i=0;i<n;){if(ie(t[i],e))return!0;i++}return!1},oe=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ae={},le={},he={INDEXEDDB:et,WEBSQL:jt,LOCALSTORAGE:re},ue=[he.INDEXEDDB._driver,he.WEBSQL._driver,he.LOCALSTORAGE._driver],ce=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ce),pe={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function me(){for(var i=1;i<arguments.length;i++){var t=arguments[i];if(t)for(var e in t)t.hasOwnProperty(e)&&(oe(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}var ge=function(){function t(e){for(var n in o(this,t),he)if(he.hasOwnProperty(n)){var r=he[n],l=r._driver;this[n]=l,ae[l]||this.defineDriver(r)}this._defaultConfig=me({},pe),this._config=me({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if("storeName"===i&&(t[i]=t[i].replace(/\W/g,"_")),"version"===i&&"number"!=typeof t[i])return new Error("Database version must be a number.");this._config[i]=t[i]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new d((function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var l=fe.concat("_initStorage"),i=0,h=l.length;i<h;i++){var c=l[i];if((!se(ce,c)||t[c])&&"function"!=typeof t[c])return void n(o)}var f=function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=d.reject(e);return m(n,arguments[arguments.length-1]),n}},n=0,r=ce.length;n<r;n++){var o=ce[n];t[o]||(t[o]=e(o))}};f();var v=function(n){ae[r]&&console.info("Redefining LocalForage driver: "+r),ae[r]=t,le[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(v,n):v(!!t._support):v(!0)}catch(t){n(t)}}));return v(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=ae[t]?d.resolve(ae[t]):d.reject(new Error("Driver not found."));return v(r,e,n),r},t.prototype.getSerializer=function(t){var e=d.resolve(Tt);return v(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return v(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;oe(t)||(t=[t]);var o=this._getSupportedDrivers(t);function l(){r._config.driver=r.driver()}function h(t){return r._extend(t),l(),r._ready=r._initStorage(r._config),r._ready}function c(t){return function(){var e=0;function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(h).catch(n)}l();var c=new Error("No available storage method found.");return r._driverSet=d.reject(c),r._driverSet}return n()}}var f=null!==this._driverSet?this._driverSet.catch((function(){return d.resolve()})):d.resolve();return this._driverSet=f.then((function(){var t=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,l(),r._wrapLibraryMethodsWithReady(),r._initDriver=c(o)}))})).catch((function(){l();var t=new Error("No available storage method found.");return r._driverSet=d.reject(t),r._driverSet})),v(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!le[t]},t.prototype._extend=function(t){me(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,t=fe.length;i<t;i++)de(this,fe[i])},t.prototype.createInstance=function(e){return new t(e)},t}(),ve=new ge;e.exports=ve},{3:3}]},{},[4])(4)}).call(this,n(149))},123:function(t,e,n){var r=n(262),o=r.Buffer;function l(t,e){for(var n in t)e[n]=t[n]}function h(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(l(r,e),e.Buffer=h),l(o,h),h.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},h.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},h.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},h.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},1286:function(t,e,n){"use strict";t.exports=n(3811)},1332:function(t,e,n){var r=n(655),o=n(354);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1333:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(149))},1334:function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},1335:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},1336:function(t,e,n){var r=n(1337);t.exports=function(object,t,e){"__proto__"==t&&r?r(object,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):object[t]=e}},1337:function(t,e,n){var r=n(496),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},1338:function(t,e,n){var r=n(1339),o=n(999),l=n(312),h=n(1e3),c=n(447),f=n(1340),d=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=l(t),m=!n&&o(t),v=!n&&!m&&h(t),y=!n&&!m&&!v&&f(t),_=n||m||v||y,x=_?r(t.length,String):[],w=x.length;for(var M in t)!e&&!d.call(t,M)||_&&("length"==M||v&&("offset"==M||"parent"==M)||y&&("buffer"==M||"byteLength"==M||"byteOffset"==M)||c(M,w))||x.push(M);return x}},1339:function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},1340:function(t,e,n){var r=n(3574),o=n(497),l=n(1002),h=l&&l.isTypedArray,c=h?o(h):r;t.exports=c},1341:function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},1342:function(t,e){t.exports=function(){return[]}},1343:function(t,e,n){var r=n(658),o=n(1344),l=n(1005),h=n(1342),c=Object.getOwnPropertySymbols?function(object){for(var t=[];object;)r(t,l(object)),object=o(object);return t}:h;t.exports=c},1344:function(t,e,n){var r=n(1341)(Object.getPrototypeOf,Object);t.exports=r},1345:function(t,e,n){var r=n(1346),o=n(1005),l=n(724);t.exports=function(object){return r(object,l,o)}},1346:function(t,e,n){var r=n(658),o=n(312);t.exports=function(object,t,e){var n=t(object);return o(object)?n:r(n,e(object))}},1347:function(t,e,n){var r=n(496)(n(287),"Set");t.exports=r},1348:function(t,e,n){var r=n(496)(n(287),"WeakMap");t.exports=r},1349:function(t,e,n){var r=n(287).Uint8Array;t.exports=r},1369:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var t=[],i=0;i<256;++i)t.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return t}(),l=function(source,t){for(var e=t&&t.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(e[i]=source[i]);return e};t.exports={arrayToObject:l,assign:function(t,source){return Object.keys(source).reduce((function(t,e){return t[e]=source[e],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var r=e[i],o=r.obj[r.prop],l=Object.keys(o),h=0;h<l.length;++h){var c=l[h],f=o[c];"object"==typeof f&&null!==f&&-1===n.indexOf(f)&&(e.push({obj:o,prop:c}),n.push(f))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)void 0!==e[o]&&r.push(e[o]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",i=0;i<e.length;++i){var r=e.charCodeAt(i);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?n+=e.charAt(i):r<128?n+=o[r]:r<2048?n+=o[192|r>>6]+o[128|63&r]:r<55296||r>=57344?n+=o[224|r>>12]+o[128|r>>6&63]+o[128|63&r]:(i+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(i)),n+=o[240|r>>18]+o[128|r>>12&63]+o[128|r>>6&63]+o[128|63&r])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,source,n){if(!source)return e;if("object"!=typeof source){if(Array.isArray(e))e.push(source);else{if(!e||"object"!=typeof e)return[e,source];(n&&(n.plainObjects||n.allowPrototypes)||!r.call(Object.prototype,source))&&(e[source]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(source);var o=e;return Array.isArray(e)&&!Array.isArray(source)&&(o=l(e,n)),Array.isArray(e)&&Array.isArray(source)?(source.forEach((function(o,i){if(r.call(e,i)){var l=e[i];l&&"object"==typeof l&&o&&"object"==typeof o?e[i]=t(l,o,n):e.push(o)}else e[i]=o})),e):Object.keys(source).reduce((function(e,o){var l=source[o];return r.call(e,o)?e[o]=t(e[o],l,n):e[o]=l,e}),o)}}},1370:function(t,e,n){"use strict";var r=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},1371:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},1373:function(t,e,n){t.exports=o;var r=n(1015).EventEmitter;function o(){r.call(this)}n(110)(o,r),o.Readable=n(539),o.Writable=n(3650),o.Duplex=n(3651),o.Transform=n(3652),o.PassThrough=n(3653),o.Stream=o,o.prototype.pipe=function(t,e){var source=this;function n(e){t.writable&&!1===t.write(e)&&source.pause&&source.pause()}function o(){source.readable&&source.resume&&source.resume()}source.on("data",n),t.on("drain",o),t._isStdio||e&&!1===e.end||(source.on("end",h),source.on("close",c));var l=!1;function h(){l||(l=!0,t.end())}function c(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function f(t){if(d(),0===r.listenerCount(this,"error"))throw t}function d(){source.removeListener("data",n),t.removeListener("drain",o),source.removeListener("end",h),source.removeListener("close",c),source.removeListener("error",f),t.removeListener("error",f),source.removeListener("end",d),source.removeListener("close",d),t.removeListener("close",d)}return source.on("error",f),t.on("error",f),source.on("end",d),source.on("close",d),t.on("close",d),t.emit("pipe",source),t}},1374:function(t,e,n){"use strict";(function(e,r){var o=n(731);t.exports=A;var l,h=n(1371);A.ReadableState=E;n(1015).EventEmitter;var c=function(t,e){return t.listeners(e).length},f=n(1375),d=n(123).Buffer,m=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var v=Object.create(n(660));v.inherits=n(110);var y=n(3645),_=void 0;_=y&&y.debuglog?y.debuglog("stream"):function(){};var x,w=n(3646),M=n(1376);v.inherits(A,f);var S=["error","close","destroy","pause","resume"];function E(t,e){t=t||{};var r=e instanceof(l=l||n(498));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,h=t.readableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(h||0===h)?h:c,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(x||(x=n(1017).StringDecoder),this.decoder=new x(t.encoding),this.encoding=t.encoding)}function A(t){if(l=l||n(498),!(this instanceof A))return new A(t);this._readableState=new E(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),f.call(this)}function T(t,e,n,r,o){var l,h=t._readableState;null===e?(h.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,I(t)}(t,h)):(o||(l=function(t,e){var n;r=e,d.isBuffer(r)||r instanceof m||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(h,e)),l?t.emit("error",l):h.objectMode||e&&e.length>0?("string"==typeof e||h.objectMode||Object.getPrototypeOf(e)===d.prototype||(e=function(t){return d.from(t)}(e)),r?h.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):C(t,h,e,!0):h.ended?t.emit("error",new Error("stream.push() after EOF")):(h.reading=!1,h.decoder&&!n?(e=h.decoder.write(e),h.objectMode||0!==e.length?C(t,h,e,!1):D(t,h)):C(t,h,e,!1))):r||(h.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(h)}function C(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&I(t)),D(t,e)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),A.prototype.destroy=M.destroy,A.prototype._undestroy=M.undestroy,A.prototype._destroy=function(t,e){this.push(null),e(t)},A.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=d.from(t,e),e=""),n=!0),T(this,t,e,!1,n)},A.prototype.unshift=function(t){return T(this,t,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(t){return x||(x=n(1017).StringDecoder),this._readableState.decoder=new x(t),this._readableState.encoding=t,this};var P=8388608;function R(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=P?t=P:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(k,t):k(t))}function k(t){_("emit readable"),t.emit("readable"),N(t)}function D(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(L,t,e))}function L(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function F(t){_("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var p=e.head,n=1,r=p.data;t-=r.length;for(;p=p.next;){var o=p.data,l=t>o.length?o.length:t;if(l===o.length?r+=o:r+=o.slice(0,t),0===(t-=l)){l===o.length?(++n,p.next?e.head=p.next:e.head=e.tail=null):(e.head=p,p.data=o.slice(l));break}++n}return e.length-=n,r}(t,e):function(t,e){var n=d.allocUnsafe(t),p=e.head,r=1;p.data.copy(n),t-=p.data.length;for(;p=p.next;){var o=p.data,l=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,l),0===(t-=l)){l===o.length?(++r,p.next?e.head=p.next:e.head=e.tail=null):(e.head=p,p.data=o.slice(l));break}++r}return e.length-=r,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function U(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(z,e,t))}function z(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function V(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}A.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):I(this),null;if(0===(t=R(t,e))&&e.ended)return 0===e.length&&U(this),null;var r,o=e.needReadable;return _("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",o=!0),e.ended||e.reading?_("reading or ended",o=!1):o&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=R(n,e))),null===(r=t>0?B(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&U(this)),null!==r&&this.emit("data",r),r},A.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},A.prototype.pipe=function(t,e){var n=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1,_("pipe count=%d opts=%j",l.pipesCount,e);var f=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?m:A;function d(e,r){_("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,_("cleanup"),t.removeListener("close",S),t.removeListener("finish",E),t.removeListener("drain",v),t.removeListener("error",M),t.removeListener("unpipe",d),n.removeListener("end",m),n.removeListener("end",A),n.removeListener("data",w),y=!0,!l.awaitDrain||t._writableState&&!t._writableState.needDrain||v())}function m(){_("onend"),t.end()}l.endEmitted?o.nextTick(f):n.once("end",f),t.on("unpipe",d);var v=function(t){return function(){var e=t._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&c(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",v);var y=!1;var x=!1;function w(e){_("ondata"),x=!1,!1!==t.write(e)||x||((1===l.pipesCount&&l.pipes===t||l.pipesCount>1&&-1!==V(l.pipes,t))&&!y&&(_("false write response, pause",l.awaitDrain),l.awaitDrain++,x=!0),n.pause())}function M(e){_("onerror",e),A(),t.removeListener("error",M),0===c(t,"error")&&t.emit("error",e)}function S(){t.removeListener("finish",E),A()}function E(){_("onfinish"),t.removeListener("close",S),A()}function A(){_("unpipe"),n.unpipe(t)}return n.on("data",w),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?h(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",M),t.once("close",S),t.once("finish",E),t.emit("pipe",n),l.flowing||(_("pipe resume"),n.resume()),t},A.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var l=V(e.pipes,t);return-1===l||(e.pipes.splice(l,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},A.prototype.on=function(t,e){var n=f.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&I(this):o.nextTick(F,this))}return n},A.prototype.addListener=A.prototype.on,A.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(O,t,e))}(this,t)),this},A.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},A.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(_("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){(_("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o)||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<S.length;o++)t.on(S[o],this.emit.bind(this,S[o]));return this._read=function(e){_("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),A._fromList=B}).call(this,n(149),n(245))},1375:function(t,e,n){t.exports=n(1015).EventEmitter},1376:function(t,e,n){"use strict";var r=n(731);function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,l=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return l||h?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,t)):r.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,r.nextTick(o,n,t)):r.nextTick(o,n,t):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},1377:function(t,e,n){"use strict";t.exports=h;var r=n(498),o=Object.create(n(660));function l(t,data){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=data&&this.push(data),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);r.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"==typeof this._flush?this._flush((function(e,data){f(t,e,data)})):f(this,null,null)}function f(t,e,data){if(e)return t.emit("error",e);if(null!=data&&t.push(data),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=n(110),o.inherits(h,r),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},h.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},h.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},1378:function(t,e,n){var r=n(110),o=n(540),l=n(123).Buffer,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=new Array(64);function f(){this.init(),this._w=c,o.call(this,64,56)}function d(t,e,n){return n^t&(e^n)}function m(t,e,n){return t&e|n&(t|e)}function v(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function y(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function _(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(f,o),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},f.prototype._update=function(t){for(var e,n=this._w,a=0|this._a,b=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,c=0|this._f,g=0|this._g,f=0|this._h,i=0;i<16;++i)n[i]=t.readInt32BE(4*i);for(;i<64;++i)n[i]=0|(((e=n[i-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[i-7]+_(n[i-15])+n[i-16];for(var x=0;x<64;++x){var w=f+y(l)+d(l,c,g)+h[x]+n[x]|0,M=v(a)+m(a,b,r)|0;f=g,g=c,c=l,l=o+w|0,o=r,r=b,b=a,a=w+M|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0,this._f=c+this._f|0,this._g=g+this._g|0,this._h=f+this._h|0},f.prototype._hash=function(){var t=l.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=f},1379:function(t,e,n){var r=n(110),o=n(540),l=n(123).Buffer,h=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=new Array(160);function f(){this.init(),this._w=c,o.call(this,128,112)}function d(t,e,n){return n^t&(e^n)}function m(t,e,n){return t&e|n&(t|e)}function v(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function y(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function _(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function x(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function w(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function M(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function S(a,b){return a>>>0<b>>>0?1:0}r(f,o),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},f.prototype._update=function(t){for(var e=this._w,n=0|this._ah,r=0|this._bh,o=0|this._ch,l=0|this._dh,c=0|this._eh,f=0|this._fh,E=0|this._gh,A=0|this._hh,T=0|this._al,C=0|this._bl,P=0|this._cl,dl=0|this._dl,R=0|this._el,I=0|this._fl,k=0|this._gl,D=0|this._hl,i=0;i<32;i+=2)e[i]=t.readInt32BE(4*i),e[i+1]=t.readInt32BE(4*i+4);for(;i<160;i+=2){var L=e[i-30],F=e[i-30+1],O=_(L,F),N=x(F,L),B=w(L=e[i-4],F=e[i-4+1]),U=M(F,L),z=e[i-14],V=e[i-14+1],j=e[i-32],H=e[i-32+1],G=N+V|0,W=O+z+S(G,N)|0;W=(W=W+B+S(G=G+U|0,U)|0)+j+S(G=G+H|0,H)|0,e[i]=W,e[i+1]=G}for(var X=0;X<160;X+=2){W=e[X],G=e[X+1];var Y=m(n,r,o),Z=m(T,C,P),K=v(n,T),$=v(T,n),J=y(c,R),Q=y(R,c),tt=h[X],et=h[X+1],nt=d(c,f,E),it=d(R,I,k),st=D+Q|0,ot=A+J+S(st,D)|0;ot=(ot=(ot=ot+nt+S(st=st+it|0,it)|0)+tt+S(st=st+et|0,et)|0)+W+S(st=st+G|0,G)|0;var at=$+Z|0,lt=K+Y+S(at,$)|0;A=E,D=k,E=f,k=I,f=c,I=R,c=l+ot+S(R=dl+st|0,dl)|0,l=o,dl=P,o=r,P=C,r=n,C=T,n=ot+lt+S(T=st+at|0,st)|0}this._al=this._al+T|0,this._bl=this._bl+C|0,this._cl=this._cl+P|0,this._dl=this._dl+dl|0,this._el=this._el+R|0,this._fl=this._fl+I|0,this._gl=this._gl+k|0,this._hl=this._hl+D|0,this._ah=this._ah+n+S(this._al,T)|0,this._bh=this._bh+r+S(this._bl,C)|0,this._ch=this._ch+o+S(this._cl,P)|0,this._dh=this._dh+l+S(this._dl,dl)|0,this._eh=this._eh+c+S(this._el,R)|0,this._fh=this._fh+f+S(this._fl,I)|0,this._gh=this._gh+E+S(this._gl,k)|0,this._hh=this._hh+A+S(this._hl,D)|0},f.prototype._hash=function(){var t=l.allocUnsafe(64);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=f},1383:function(t,e,n){e.pbkdf2=n(3660),e.pbkdf2Sync=n(1386)},1384:function(t,e){var n=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>n||e!=e)throw new TypeError("Bad key length")}},1385:function(t,e,n){(function(e,n){var r;if(e.process&&e.process.browser)r="utf-8";else if(e.process&&e.process.version){r=parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";t.exports=r}).call(this,n(149),n(245))},1386:function(t,e,n){var r=n(1381),o=n(1018),l=n(1019),h=n(123).Buffer,c=n(1384),f=n(1385),d=n(1387),m=h.alloc(128),v={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function y(t,e,n){var c=function(t){function e(data){return l(t).update(data).digest()}function n(data){return(new o).update(data).digest()}return"rmd160"===t||"ripemd160"===t?n:"md5"===t?r:e}(t),f="sha512"===t||"sha384"===t?128:64;e.length>f?e=c(e):e.length<f&&(e=h.concat([e,m],f));for(var d=h.allocUnsafe(f+v[t]),y=h.allocUnsafe(f+v[t]),i=0;i<f;i++)d[i]=54^e[i],y[i]=92^e[i];var _=h.allocUnsafe(f+n+4);d.copy(_,0,0,f),this.ipad1=_,this.ipad2=d,this.opad=y,this.alg=t,this.blocksize=f,this.hash=c,this.size=v[t]}y.prototype.run=function(data,t){return data.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,r,o){c(n,r);var l=new y(o=o||"sha1",t=d(t,f,"Password"),(e=d(e,f,"Salt")).length),m=h.allocUnsafe(r),_=h.allocUnsafe(e.length+4);e.copy(_,0,0,e.length);for(var x=0,w=v[o],M=Math.ceil(r/w),i=1;i<=M;i++){_.writeUInt32BE(i,e.length);for(var S=l.run(_,l.ipad1),E=S,A=1;A<n;A++){E=l.run(E,l.ipad2);for(var T=0;T<w;T++)S[T]^=E[T]}S.copy(m,x),x+=w}return m}},1387:function(t,e,n){var r=n(123).Buffer;t.exports=function(t,e,n){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,e);if(ArrayBuffer.isView(t))return r.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},1397:function(t,e,n){var r=n(3678),o=n(1023);function l(t){this.rand=t||new o.Rand}t.exports=l,l.create=function(t){return new l(t)},l.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var a=new r(this.rand.generate(n))}while(a.cmp(t)>=0);return a},l.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},l.prototype.test=function(t,e,n){var o=t.bitLength(),l=r.mont(t),h=new r(1).toRed(l);e||(e=Math.max(1,o/48|0));for(var c=t.subn(1),s=0;!c.testn(s);s++);for(var f=t.shrn(s),d=c.toRed(l);e>0;e--){var a=this._randrange(new r(2),c);n&&n(a);var m=a.toRed(l).redPow(f);if(0!==m.cmp(h)&&0!==m.cmp(d)){for(var i=1;i<s;i++){if(0===(m=m.redSqr()).cmp(h))return!1;if(0===m.cmp(d))break}if(i===s)return!1}}return!0},l.prototype.getDivisor=function(t,e){var n=t.bitLength(),o=r.mont(t),l=new r(1).toRed(o);e||(e=Math.max(1,n/48|0));for(var h=t.subn(1),s=0;!h.testn(s);s++);for(var c=t.shrn(s),f=h.toRed(o);e>0;e--){var a=this._randrange(new r(2),h),g=t.gcd(a);if(0!==g.cmpn(1))return g;var d=a.toRed(o).redPow(c);if(0!==d.cmp(l)&&0!==d.cmp(f)){for(var i=1;i<s;i++){if(0===(d=d.redSqr()).cmp(l))return d.fromRed().subn(1).gcd(t);if(0===d.cmp(f))break}if(i===s)return(d=d.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},1398:function(t,e,n){"use strict";var r=e;function o(t){return 1===t.length?"0"+t:t}function l(t){for(var e="",i=0;i<t.length;i++)e+=o(t[i].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)n[i]=0|t[i];return n}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(i=0;i<t.length;i++){var r=t.charCodeAt(i),o=r>>8,l=255&r;o?n.push(o,l):n.push(l)}return n},r.zero2=o,r.toHex=l,r.encode=function(t,e){return"hex"===e?l(t):t}},1407:function(t,e,n){var r=n(262),o=r.Buffer;function l(t,e){for(var n in t)e[n]=t[n]}function h(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(l(r,e),e.Buffer=h),h.prototype=Object.create(o.prototype),l(o,h),h.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},h.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},h.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},h.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},1409:function(t,e,n){var r=n(659),o=n(123).Buffer;function l(t){var e=o.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,h=o.alloc(0),i=0;h.length<e;)n=l(i++),h=o.concat([h,r("sha1").update(t).update(n).digest()]);return h.slice(0,e)}},1410:function(t,e){t.exports=function(a,b){for(var t=a.length,i=-1;++i<t;)a[i]^=b[i];return a}},1411:function(t,e,n){var r=n(1030),o=n(123).Buffer;t.exports=function(t,e){return o.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},143:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(object,t){return r.call(object,t)}function l(t){return!(t>=55296&&t<=57343)&&(!(t>=64976&&t<=65007)&&(!!(65535&~t&&65534!=(65535&t))&&(!(t>=0&&t<=8)&&(11!==t&&(!(t>=14&&t<=31)&&(!(t>=127&&t<=159)&&!(t>1114111)))))))}function h(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,f=new RegExp(c.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),d=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,m=n(1540);var v=/[&<>"]/,y=/[&<>"]/g,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function x(t){return _[t]}var w=/[.?*+^$[\]\\(){}|-]/g;var M=n(1078);e.lib={},e.lib.mdurl=n(1541),e.lib.ucmicro=n(3817),e.assign=function(t){return Array.prototype.slice.call(arguments,1).forEach((function(source){if(source){if("object"!=typeof source)throw new TypeError(source+"must be object");Object.keys(source).forEach((function(e){t[e]=source[e]}))}})),t},e.isString=function(t){return"[object String]"===function(t){return Object.prototype.toString.call(t)}(t)},e.has=o,e.unescapeMd=function(t){return t.indexOf("\\")<0?t:t.replace(c,"$1")},e.unescapeAll=function(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(f,(function(t,e,n){return e||function(t,e){var code;return o(m,e)?m[e]:35===e.charCodeAt(0)&&d.test(e)&&l(code="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?h(code):t}(t,n)}))},e.isValidEntityCode=l,e.fromCodePoint=h,e.escapeHtml=function(t){return v.test(t)?t.replace(y,x):t},e.arrayReplaceAt=function(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))},e.isSpace=function(code){switch(code){case 9:case 32:return!0}return!1},e.isWhiteSpace=function(code){if(code>=8192&&code<=8202)return!0;switch(code){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},e.isMdAsciiPunct=function(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},e.isPunctChar=function(t){return M.test(t)},e.escapeRE=function(t){return t.replace(w,"\\$&")},e.normalizeReference=function(t){return t=t.trim().replace(/\s+/g," "),"Ṿ"==="ẞ".toLowerCase()&&(t=t.replace(/ẞ/g,"ß")),t.toLowerCase().toUpperCase()}},1540:function(t,e,n){"use strict";t.exports=n(3812)},1541:function(t,e,n){"use strict";t.exports.encode=n(3813),t.exports.decode=n(3814),t.exports.format=n(3815),t.exports.parse=n(3816)},1542:function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},1543:function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},1544:function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},1545:function(t,e,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",l=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),h=new RegExp("^(?:"+r+"|"+o+")");t.exports.HTML_TAG_RE=l,t.exports.HTML_OPEN_CLOSE_TAG_RE=h},1546:function(t,e,n){"use strict";function r(t,e){var i,n,r,o,l,h=[],c=e.length;for(i=0;i<c;i++)126===(r=e[i]).marker&&-1!==r.end&&(o=e[r.end],(l=t.tokens[r.token]).type="s_open",l.tag="s",l.nesting=1,l.markup="~~",l.content="",(l=t.tokens[o.token]).type="s_close",l.tag="s",l.nesting=-1,l.markup="~~",l.content="","text"===t.tokens[o.token-1].type&&"~"===t.tokens[o.token-1].content&&h.push(o.token-1));for(;h.length;){for(n=(i=h.pop())+1;n<t.tokens.length&&"s_close"===t.tokens[n].type;)n++;i!==--n&&(l=t.tokens[n],t.tokens[n]=t.tokens[i],t.tokens[i]=l)}}t.exports.tokenize=function(t,e){var i,n,r,o,l=t.pos,marker=t.src.charCodeAt(l);if(e)return!1;if(126!==marker)return!1;if(r=(n=t.scanDelims(t.pos,!0)).length,o=String.fromCharCode(marker),r<2)return!1;for(r%2&&(t.push("text","",0).content=o,r--),i=0;i<r;i+=2)t.push("text","",0).content=o+o,t.delimiters.push({marker:marker,length:0,token:t.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return t.pos+=n.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(t,n[e].delimiters)}},1547:function(t,e,n){"use strict";function r(t,e){var i,n,r,o,l,h;for(i=e.length-1;i>=0;i--)95!==(n=e[i]).marker&&42!==n.marker||-1!==n.end&&(r=e[n.end],h=i>0&&e[i-1].end===n.end+1&&e[i-1].marker===n.marker&&e[i-1].token===n.token-1&&e[n.end+1].token===r.token+1,l=String.fromCharCode(n.marker),(o=t.tokens[n.token]).type=h?"strong_open":"em_open",o.tag=h?"strong":"em",o.nesting=1,o.markup=h?l+l:l,o.content="",(o=t.tokens[r.token]).type=h?"strong_close":"em_close",o.tag=h?"strong":"em",o.nesting=-1,o.markup=h?l+l:l,o.content="",h&&(t.tokens[e[i-1].token].content="",t.tokens[e[n.end+1].token].content="",i--))}t.exports.tokenize=function(t,e){var i,n,r=t.pos,marker=t.src.charCodeAt(r);if(e)return!1;if(95!==marker&&42!==marker)return!1;for(n=t.scanDelims(t.pos,42===marker),i=0;i<n.length;i++)t.push("text","",0).content=String.fromCharCode(marker),t.delimiters.push({marker:marker,length:n.length,token:t.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return t.pos+=n.length,!0},t.exports.postProcess=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(t,n[e].delimiters)}},1548:function(t,e,n){(function(t,r){var o;!function(){e&&e.nodeType,t&&t.nodeType;var l="object"==typeof r&&r;l.global!==l&&l.window!==l&&l.self;var h,c=2147483647,base=36,f=1,d=26,m=38,v=700,y=72,_=128,x="-",w=/^xn--/,M=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=base-f,T=Math.floor,C=String.fromCharCode;function P(t){throw new RangeError(E[t])}function map(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function R(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+map((t=t.replace(S,".")).split("."),e).join(".")}function I(t){for(var e,n,output=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?output.push(((1023&e)<<10)+(1023&n)+65536):(output.push(e),r--):output.push(e);return output}function k(t){return map(t,(function(t){var output="";return t>65535&&(output+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),output+=C(t)})).join("")}function D(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function L(t,e,n){var r=0;for(t=n?T(t/v):t>>1,t+=T(t/e);t>A*d>>1;r+=base)t=T(t/A);return T(r+(A+1)*t/(t+m))}function F(input){var t,e,n,r,o,l,h,m,v,w,M,output=[],S=input.length,i=0,E=_,A=y;for((e=input.lastIndexOf(x))<0&&(e=0),n=0;n<e;++n)input.charCodeAt(n)>=128&&P("not-basic"),output.push(input.charCodeAt(n));for(r=e>0?e+1:0;r<S;){for(o=i,l=1,h=base;r>=S&&P("invalid-input"),((m=(M=input.charCodeAt(r++))-48<10?M-22:M-65<26?M-65:M-97<26?M-97:base)>=base||m>T((c-i)/l))&&P("overflow"),i+=m*l,!(m<(v=h<=A?f:h>=A+d?d:h-A));h+=base)l>T(c/(w=base-v))&&P("overflow"),l*=w;A=L(i-o,t=output.length+1,0==o),T(i/t)>c-E&&P("overflow"),E+=T(i/t),i%=t,output.splice(i++,0,E)}return k(output)}function O(input){var t,e,n,r,o,l,h,q,m,v,w,M,S,E,A,output=[];for(M=(input=I(input)).length,t=_,e=0,o=y,l=0;l<M;++l)(w=input[l])<128&&output.push(C(w));for(n=r=output.length,r&&output.push(x);n<M;){for(h=c,l=0;l<M;++l)(w=input[l])>=t&&w<h&&(h=w);for(h-t>T((c-e)/(S=n+1))&&P("overflow"),e+=(h-t)*S,t=h,l=0;l<M;++l)if((w=input[l])<t&&++e>c&&P("overflow"),w==t){for(q=e,m=base;!(q<(v=m<=o?f:m>=o+d?d:m-o));m+=base)A=q-v,E=base-v,output.push(C(D(v+A%E,0))),q=T(A/E);output.push(C(D(q,0))),o=L(e,S,n==r),e=0,++n}++e,++t}return output.join("")}h={version:"1.4.1",ucs2:{decode:I,encode:k},decode:F,encode:O,toASCII:function(input){return R(input,(function(t){return M.test(t)?"xn--"+O(t):t}))},toUnicode:function(input){return R(input,(function(t){return w.test(t)?F(t.slice(4).toLowerCase()):t}))}},void 0===(o=function(){return h}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(309)(t),n(149))},1615:function(t,e,n){var r=n(420);t.exports=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,r(t,128,void 0,void 0,void 0,void 0,e)}},1616:function(t,e,n){var r=n(543),o=n(1617),l=o?function(t,data){return o.set(t,data),t}:r;t.exports=l},1617:function(t,e,n){var r=n(1348),o=r&&new r;t.exports=o},1618:function(t,e,n){var r=n(1619),o=n(1620),l=n(3939),h=n(757),c=n(1621),f=n(545),d=n(3951),m=n(507),v=n(287);t.exports=function t(e,n,y,_,x,w,M,S,E,A){var T=128&n,C=1&n,P=2&n,R=24&n,I=512&n,k=P?void 0:h(e);return function D(){for(var L=arguments.length,F=Array(L),O=L;O--;)F[O]=arguments[O];if(R)var N=f(D),B=l(F,N);if(_&&(F=r(F,_,x,R)),w&&(F=o(F,w,M,R)),L-=B,R&&L<A){var U=m(F,N);return c(e,n,t,D.placeholder,y,F,U,S,E,A-L)}var z=C?y:this,V=P?z[e]:e;return L=F.length,S?F=d(F,S):I&&L>1&&F.reverse(),T&&E<L&&(F.length=E),this&&this!==v&&this instanceof D&&(V=k||h(V)),V.apply(z,F)}}},1619:function(t,e){var n=Math.max;t.exports=function(t,e,r,o){for(var l=-1,h=t.length,c=r.length,f=-1,d=e.length,m=n(h-c,0),v=Array(d+m),y=!o;++f<d;)v[f]=e[f];for(;++l<c;)(y||l<h)&&(v[r[l]]=t[l]);for(;m--;)v[f++]=t[l++];return v}},1620:function(t,e){var n=Math.max;t.exports=function(t,e,r,o){for(var l=-1,h=t.length,c=-1,f=r.length,d=-1,m=e.length,v=n(h-f,0),y=Array(v+m),_=!o;++l<v;)y[l]=t[l];for(var x=l;++d<m;)y[x+d]=e[d];for(;++c<f;)(_||l<h)&&(y[x+r[c]]=t[l++]);return y}},1621:function(t,e,n){var r=n(3940),o=n(1625),l=n(1627);t.exports=function(t,e,n,h,c,f,d,m,v,y){var _=8&e;e|=_?32:64,4&(e&=~(_?64:32))||(e&=-4);var x=[t,e,c,_?f:void 0,_?d:void 0,_?void 0:f,_?void 0:d,m,v,y],w=n.apply(void 0,x);return r(t)&&o(w,x),w.placeholder=h,l(w,t,e)}},1622:function(t,e,n){var r=n(1617),o=n(1623),l=r?function(t){return r.get(t)}:o;t.exports=l},1623:function(t,e){t.exports=function(){}},1624:function(t,e,n){var r=n(727),o=n(1083);function l(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}l.prototype=r(o.prototype),l.prototype.constructor=l,t.exports=l},1625:function(t,e,n){var r=n(1616),o=n(1626)(r);t.exports=o},1626:function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),l=16-(o-r);if(r=o,l>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},1627:function(t,e,n){var r=n(3945),o=n(3946),l=n(1084),h=n(3949);t.exports=function(t,e,n){var source=e+"";return l(t,o(source,h(r(source),n)))}},1628:function(t,e){t.exports=function(t){return t!=t}},1629:function(t,e,n){var r=n(238);t.exports=function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=r(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}},1630:function(t,e,n){var r=n(544),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var l=arguments,h=-1,c=o(l.length-e,0),f=Array(c);++h<c;)f[h]=l[e+h];h=-1;for(var d=Array(e+1);++h<e;)d[h]=l[h];return d[e]=n(f),r(t,this,d)}}},1631:function(t,e){t.exports=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,n)}),e)}},1632:function(t,e,n){var r=n(998);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],l=n.cache;if(l.has(o))return l.get(o);var h=t.apply(this,r);return n.cache=l.set(o,h)||l,h};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},1633:function(t,e,n){var r=n(3968),o=n(418);t.exports=function t(e,n,l,h,c){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,l,h,t,c))}},1634:function(t,e,n){var r=n(760),o=n(3971),l=n(761);t.exports=function(t,e,n,h,c,f){var d=1&n,m=t.length,v=e.length;if(m!=v&&!(d&&v>m))return!1;var y=f.get(t),_=f.get(e);if(y&&_)return y==e&&_==t;var x=-1,w=!0,M=2&n?new r:void 0;for(f.set(t,e),f.set(e,t);++x<m;){var S=t[x],E=e[x];if(h)var A=d?h(E,S,x,e,t,f):h(S,E,x,t,e,f);if(void 0!==A){if(A)continue;w=!1;break}if(M){if(!o(e,(function(t,e){if(!l(M,e)&&(S===t||c(S,t,n,h,f)))return M.push(e)}))){w=!1;break}}else if(S!==E&&!c(S,E,n,h,f)){w=!1;break}}return f.delete(t),f.delete(e),w}},1635:function(t,e,n){var r=n(354);t.exports=function(t){return t==t&&!r(t)}},1636:function(t,e){t.exports=function(t,e){return function(object){return null!=object&&(object[t]===e&&(void 0!==e||t in Object(object)))}}},1637:function(t,e,n){var r=n(1087);t.exports=function(object,path,t){var e=null==object?void 0:r(object,path);return void 0===e?t:e}},1638:function(t,e){t.exports=function(t){return function(object){return null==object?void 0:object[t]}}},1639:function(t,e,n){var r=n(170),o=n(420),l=n(545),h=n(507),c=r((function(t,e){var n=h(e,l(c));return o(t,32,void 0,e,n)}));c.placeholder={},t.exports=c},1640:function(t,e,n){var r=n(1641),o=n(1630),l=n(1084);t.exports=function(t){return l(o(t,void 0,r),t+"")}},1641:function(t,e,n){var r=n(357);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},170:function(t,e,n){var r=n(543),o=n(1630),l=n(1084);t.exports=function(t,e){return l(o(t,e,r),t+"")}},1802:function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},1803:function(t,e,n){var r=n(1093);t.exports=function(t,e){return t&&t.length&&e&&e.length?r(t,e):t}},1804:function(t,e,n){var r=n(4196),o=n(447),l=Array.prototype.splice;t.exports=function(t,e){for(var n=t?e.length:0,h=n-1;n--;){var c=e[n];if(n==h||c!==f){var f=c;o(c)?l.call(t,c,1):r(t,c)}}return t}},1805:function(t,e,n){var r=n(495);t.exports=function(t,e){for(var n=-1,o=t.length,l=0,h=[];++n<o;){var c=t[n],f=e?e(c):c;if(!n||!r(f,d)){var d=f;h[l++]=0===c?0:c}}return h}},1806:function(t,e,n){var r=n(544),o=n(376),l=n(1095);t.exports=function(t,e){if(!t||!t.length)return[];var n=l(t);return null==e?n:o(n,(function(t){return r(e,void 0,t)}))}},1807:function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,l=e.length,h={};++r<o;){var c=r<l?e[r]:void 0;n(h,t[r],c)}return h}},2108:function(t,e,n){(function(t){e.fetch=c(t.fetch)&&c(t.ReadableStream),e.writableStream=c(t.WritableStream),e.abortController=c(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var n;function r(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function o(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var l=void 0!==t.ArrayBuffer,h=l&&c(t.ArrayBuffer.prototype.slice);function c(t){return"function"==typeof t}e.arraybuffer=e.fetch||l&&o("arraybuffer"),e.msstream=!e.fetch&&h&&o("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&l&&o("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&c(r().overrideMimeType),e.vbArray=c(t.VBArray),n=null}).call(this,n(149))},2109:function(t,e,n){(function(t,r,o){var l=n(2108),h=n(110),c=n(539),f=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},d=e.IncomingMessage=function(e,n,h,f){var d=this;if(c.Readable.call(d),d._mode=h,d.headers={},d.rawHeaders=[],d.trailers={},d.rawTrailers=[],d.on("end",(function(){t.nextTick((function(){d.emit("close")}))})),"fetch"===h){if(d._fetchResponse=n,d.url=n.url,d.statusCode=n.status,d.statusMessage=n.statusText,n.headers.forEach((function(header,t){d.headers[t.toLowerCase()]=header,d.rawHeaders.push(t,header)})),l.writableStream){var m=new WritableStream({write:function(t){return new Promise((function(e,n){d._destroyed?n():d.push(new r(t))?e():d._resumeFetch=e}))},close:function(){o.clearTimeout(f),d._destroyed||d.push(null)},abort:function(t){d._destroyed||d.emit("error",t)}});try{return void n.body.pipeTo(m).catch((function(t){o.clearTimeout(f),d._destroyed||d.emit("error",t)}))}catch(t){}}var v=n.body.getReader();!function t(){v.read().then((function(e){if(!d._destroyed){if(e.done)return o.clearTimeout(f),void d.push(null);d.push(new r(e.value)),t()}})).catch((function(t){o.clearTimeout(f),d._destroyed||d.emit("error",t)}))}()}else{if(d._xhr=e,d._pos=0,d.url=e.responseURL,d.statusCode=e.status,d.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(header){var t=header.match(/^([^:]+):\s*(.*)/);if(t){var e=t[1].toLowerCase();"set-cookie"===e?(void 0===d.headers[e]&&(d.headers[e]=[]),d.headers[e].push(t[2])):void 0!==d.headers[e]?d.headers[e]+=", "+t[2]:d.headers[e]=t[2],d.rawHeaders.push(t[1],t[2])}})),d._charset="x-user-defined",!l.overrideMimeType){var y=d.rawHeaders["mime-type"];if(y){var _=y.match(/;\s*charset=([^;])(;|$)/);_&&(d._charset=_[1].toLowerCase())}d._charset||(d._charset="utf-8")}}};h(d,c.Readable),d.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},d.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==f.DONE)break;try{n=new o.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var l=n.substr(t._pos);if("x-user-defined"===t._charset){for(var h=new r(l.length),i=0;i<l.length;i++)h[i]=255&l.charCodeAt(i);t.push(h)}else t.push(l,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==f.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==f.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==f.LOADING)break;var c=new o.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(n)}t._xhr.readyState===f.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n(245),n(262).Buffer,n(149))},2110:function(t,e,n){"use strict";var r=n(1548);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var l=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(f),m=["%","/","?",";","#"].concat(d),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},M={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(4612);function E(t,e,n){if(t&&"object"==typeof t&&t instanceof o)return t;var u=new o;return u.parse(t,e,n),u}o.prototype.parse=function(t,e,n){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),h=-1!==o&&o<t.indexOf("#")?"?":"#",f=t.split(h);f[0]=f[0].replace(/\\/g,"/");var E=t=f.join(h);if(E=E.trim(),!n&&1===t.split("#").length){var A=c.exec(E);if(A)return this.path=E,this.href=E,this.pathname=A[1],A[2]?(this.search=A[2],this.query=e?S.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var T=l.exec(E);if(T){var C=(T=T[0]).toLowerCase();this.protocol=C,E=E.substr(T.length)}if(n||T||E.match(/^\/\/[^@/]+@[^@/]+/)){var P="//"===E.substr(0,2);!P||T&&w[T]||(E=E.substr(2),this.slashes=!0)}if(!w[T]&&(P||T&&!M[T])){for(var R,I,k=-1,i=0;i<v.length;i++){-1!==(D=E.indexOf(v[i]))&&(-1===k||D<k)&&(k=D)}-1!==(I=-1===k?E.lastIndexOf("@"):E.lastIndexOf("@",k))&&(R=E.slice(0,I),E=E.slice(I+1),this.auth=decodeURIComponent(R)),k=-1;for(i=0;i<m.length;i++){var D;-1!==(D=E.indexOf(m[i]))&&(-1===k||D<k)&&(k=D)}-1===k&&(k=E.length),this.host=E.slice(0,k),E=E.slice(k),this.parseHost(),this.hostname=this.hostname||"";var L="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!L)for(var F=this.hostname.split(/\./),O=(i=0,F.length);i<O;i++){var N=F[i];if(N&&!N.match(y)){for(var B="",U=0,z=N.length;U<z;U++)N.charCodeAt(U)>127?B+="x":B+=N[U];if(!B.match(y)){var V=F.slice(0,i),j=F.slice(i+1),H=N.match(_);H&&(V.push(H[1]),j.unshift(H[2])),j.length&&(E="/"+j.join(".")+E),this.hostname=V.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),L||(this.hostname=r.toASCII(this.hostname));var p=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+p,this.href+=this.host,L&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==E[0]&&(E="/"+E))}if(!x[C])for(i=0,O=d.length;i<O;i++){var W=d[i];if(-1!==E.indexOf(W)){var X=encodeURIComponent(W);X===W&&(X=escape(W)),E=E.split(W).join(X)}}var Y=E.indexOf("#");-1!==Y&&(this.hash=E.substr(Y),E=E.slice(0,Y));var Z=E.indexOf("?");if(-1!==Z?(this.search=E.substr(Z),this.query=E.substr(Z+1),e&&(this.query=S.parse(this.query)),E=E.slice(0,Z)):e&&(this.search="",this.query={}),E&&(this.pathname=E),M[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,l="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(l=S.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var h=this.search||l&&"?"+l||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||M[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),h&&"?"!==h.charAt(0)&&(h="?"+h),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(h=h.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(E(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if("string"==typeof t){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),l=0;l<r.length;l++){var h=r[l];n[h]=this[h]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];"protocol"!==d&&(n[d]=t[d])}return M[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!M[t.protocol]){for(var m=Object.keys(t),v=0;v<m.length;v++){var y=m[v];n[y]=t[y]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||w[t.protocol])n.pathname=t.pathname;else{for(var _=(t.pathname||"").split("/");_.length&&!(t.host=_.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==_[0]&&_.unshift(""),_.length<2&&_.unshift(""),n.pathname=_.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",s=n.search||"";n.path=p+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var x=n.pathname&&"/"===n.pathname.charAt(0),S=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=S||x||n.host&&t.pathname,A=E,T=n.pathname&&n.pathname.split("/")||[],C=(_=t.pathname&&t.pathname.split("/")||[],n.protocol&&!M[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===_[0]?_[0]=t.host:_.unshift(t.host)),t.host=null),E=E&&(""===_[0]||""===T[0])),S)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=_;else if(_.length)T||(T=[]),T.pop(),T=T.concat(_),n.search=t.search,n.query=t.query;else if(null!=t.search){if(C)n.host=T.shift(),n.hostname=n.host,(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.hostname=k.shift(),n.host=n.hostname);return n.search=t.search,n.query=t.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var P=T.slice(-1)[0],R=(n.host||t.host||T.length>1)&&("."===P||".."===P)||""===P,I=0,i=T.length;i>=0;i--)"."===(P=T[i])?T.splice(i,1):".."===P?(T.splice(i,1),I++):I&&(T.splice(i,1),I--);if(!E&&!A)for(;I--;I)T.unshift("..");!E||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var k,D=""===T[0]||T[0]&&"/"===T[0].charAt(0);C&&(n.hostname=D?"":T.length?T.shift():"",n.host=n.hostname,(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.hostname=k.shift(),n.host=n.hostname));return(E=E||n.host&&T.length)&&!D&&T.unshift(""),T.length>0?n.pathname=T.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.parse=E,e.resolve=function(source,t){return E(source,!1,!0).resolve(t)},e.resolveObject=function(source,t){return source?E(source,!1,!0).resolveObject(t):t},e.format=function(t){return"string"==typeof t&&(t=E(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o},2113:function(t,e,n){"use strict";var r=n(1117),o=Object.prototype.hasOwnProperty,l=Array.isArray,h=function(){for(var t=[],i=0;i<256;++i)t.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return t}(),c=function(source,t){for(var e=t&&t.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(e[i]=source[i]);return e},f=1024;t.exports={arrayToObject:c,assign:function(t,source){return Object.keys(source).reduce((function(t,e){return t[e]=source[e],t}),t)},combine:function(a,b){return[].concat(a,b)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var r=e[i],o=r.obj[r.prop],h=Object.keys(o),c=0;c<h.length;++c){var f=h[c],d=o[f];"object"==typeof d&&null!==d&&-1===n.indexOf(d)&&(e.push({obj:o,prop:f}),n.push(d))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(l(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n,o,l){if(0===t.length)return t;var c=t;if("symbol"==typeof t?c=Symbol.prototype.toString.call(t):"string"!=typeof t&&(c=String(t)),"iso-8859-1"===n)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var d="",m=0;m<c.length;m+=f){for(var v=c.length>=f?c.slice(m,m+f):c,y=[],i=0;i<v.length;++i){var _=v.charCodeAt(i);45===_||46===_||95===_||126===_||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||l===r.RFC1738&&(40===_||41===_)?y[y.length]=v.charAt(i):_<128?y[y.length]=h[_]:_<2048?y[y.length]=h[192|_>>6]+h[128|63&_]:_<55296||_>=57344?y[y.length]=h[224|_>>12]+h[128|_>>6&63]+h[128|63&_]:(i+=1,_=65536+((1023&_)<<10|1023&v.charCodeAt(i)),y[y.length]=h[240|_>>18]+h[128|_>>12&63]+h[128|_>>6&63]+h[128|63&_])}d+=y.join("")}return d},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(l(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)},merge:function t(e,source,n){if(!source)return e;if("object"!=typeof source){if(l(e))e.push(source);else{if(!e||"object"!=typeof e)return[e,source];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,source))&&(e[source]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(source);var r=e;return l(e)&&!l(source)&&(r=c(e,n)),l(e)&&l(source)?(source.forEach((function(r,i){if(o.call(e,i)){var l=e[i];l&&"object"==typeof l&&r&&"object"==typeof r?e[i]=t(l,r,n):e.push(r)}else e[i]=r})),e):Object.keys(source).reduce((function(e,r){var l=source[r];return o.call(e,r)?e[r]=t(e[r],l,n):e[r]=l,e}),r)}}},238:function(t,e,n){var r=n(3934);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},25:function(t,e,n){(function(t,r){var o;(function(){var l,h="Expected a function",c="__lodash_hash_undefined__",f="__lodash_placeholder__",d=16,m=32,v=64,y=128,_=256,x=1/0,w=9007199254740991,M=NaN,S=4294967295,E=[["ary",y],["bind",1],["bindKey",2],["curry",8],["curryRight",d],["flip",512],["partial",m],["partialRight",v],["rearg",_]],A="[object Arguments]",T="[object Array]",C="[object Boolean]",P="[object Date]",R="[object Error]",I="[object Function]",k="[object GeneratorFunction]",D="[object Map]",L="[object Number]",F="[object Object]",O="[object Promise]",N="[object RegExp]",B="[object Set]",U="[object String]",z="[object Symbol]",V="[object WeakMap]",j="[object ArrayBuffer]",H="[object DataView]",G="[object Float32Array]",W="[object Float64Array]",X="[object Int8Array]",Y="[object Int16Array]",Z="[object Int32Array]",K="[object Uint8Array]",$="[object Uint8ClampedArray]",J="[object Uint16Array]",Q="[object Uint32Array]",tt=/\b__p \+= '';/g,et=/\b(__p \+=) '' \+/g,nt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,it=/&(?:amp|lt|gt|quot|#39);/g,st=/[&<>"']/g,ot=RegExp(it.source),at=RegExp(st.source),lt=/<%-([\s\S]+?)%>/g,ht=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ft=/^\w*$/,pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,gt=RegExp(mt.source),vt=/^\s+/,yt=/\s/,_t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bt=/\{\n\/\* \[wrapped with (.+)\] \*/,xt=/,? & /,wt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mt=/[()=,{}\[\]\/\s]/,St=/\\(\\)?/g,Et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Tt=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,Pt=/^\[object .+?Constructor\]$/,Rt=/^0o[0-7]+$/i,It=/^(?:0|[1-9]\d*)$/,kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dt=/($^)/,Lt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Nt="\\u2700-\\u27bf",Bt="a-z\\xdf-\\xf6\\xf8-\\xff",Ut="A-Z\\xc0-\\xd6\\xd8-\\xde",zt="\\ufe0e\\ufe0f",Vt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jt="['’]",Ht="["+Ft+"]",Gt="["+Vt+"]",Wt="["+Ot+"]",qt="\\d+",Xt="["+Nt+"]",Yt="["+Bt+"]",Zt="[^"+Ft+Vt+qt+Nt+Bt+Ut+"]",Kt="\\ud83c[\\udffb-\\udfff]",$t="[^"+Ft+"]",Jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Qt="[\\ud800-\\udbff][\\udc00-\\udfff]",te="["+Ut+"]",ee="\\u200d",ne="(?:"+Yt+"|"+Zt+")",re="(?:"+te+"|"+Zt+")",ie="(?:['’](?:d|ll|m|re|s|t|ve))?",se="(?:['’](?:D|LL|M|RE|S|T|VE))?",oe="(?:"+Wt+"|"+Kt+")"+"?",ae="["+zt+"]?",le=ae+oe+("(?:"+ee+"(?:"+[$t,Jt,Qt].join("|")+")"+ae+oe+")*"),he="(?:"+[Xt,Jt,Qt].join("|")+")"+le,ue="(?:"+[$t+Wt+"?",Wt,Jt,Qt,Ht].join("|")+")",ce=RegExp(jt,"g"),fe=RegExp(Wt,"g"),pe=RegExp(Kt+"(?="+Kt+")|"+ue+le,"g"),de=RegExp([te+"?"+Yt+"+"+ie+"(?="+[Gt,te,"$"].join("|")+")",re+"+"+se+"(?="+[Gt,te+ne,"$"].join("|")+")",te+"?"+ne+"+"+ie,te+"+"+se,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qt,he].join("|"),"g"),me=RegExp("["+ee+Ft+Ot+zt+"]"),ge=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ye=-1,_e={};_e[G]=_e[W]=_e[X]=_e[Y]=_e[Z]=_e[K]=_e[$]=_e[J]=_e[Q]=!0,_e[A]=_e[T]=_e[j]=_e[C]=_e[H]=_e[P]=_e[R]=_e[I]=_e[D]=_e[L]=_e[F]=_e[N]=_e[B]=_e[U]=_e[V]=!1;var be={};be[A]=be[T]=be[j]=be[H]=be[C]=be[P]=be[G]=be[W]=be[X]=be[Y]=be[Z]=be[D]=be[L]=be[F]=be[N]=be[B]=be[U]=be[z]=be[K]=be[$]=be[J]=be[Q]=!0,be[R]=be[I]=be[V]=!1;var xe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},we=parseFloat,Me=parseInt,Se="object"==typeof t&&t&&t.Object===Object&&t,Ee="object"==typeof self&&self&&self.Object===Object&&self,Ae=Se||Ee||Function("return this")(),Te=e&&!e.nodeType&&e,Ce=Te&&"object"==typeof r&&r&&!r.nodeType&&r,Pe=Ce&&Ce.exports===Te,Re=Pe&&Se.process,Ie=function(){try{var t=Ce&&Ce.require&&Ce.require("util").types;return t||Re&&Re.binding&&Re.binding("util")}catch(t){}}(),ke=Ie&&Ie.isArrayBuffer,De=Ie&&Ie.isDate,Le=Ie&&Ie.isMap,Fe=Ie&&Ie.isRegExp,Oe=Ie&&Ie.isSet,Ne=Ie&&Ie.isTypedArray;function Be(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ue(t,e,n,r){for(var o=-1,l=null==t?0:t.length;++o<l;){var h=t[o];e(r,h,n(h),t)}return r}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ve(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function He(t,e){for(var n=-1,r=null==t?0:t.length,o=0,l=[];++n<r;){var h=t[n];e(h,n,t)&&(l[o++]=h)}return l}function Ge(t,e){return!!(null==t?0:t.length)&&tn(t,e,0)>-1}function We(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function qe(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Xe(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Ye(t,e,n,r){var o=-1,l=null==t?0:t.length;for(r&&l&&(n=t[++o]);++o<l;)n=e(n,t[o],o,t);return n}function Ze(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var $e=sn("length");function Je(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function Qe(t,e,n,r){for(var o=t.length,l=n+(r?1:-1);r?l--:++l<o;)if(e(t[l],l,t))return l;return-1}function tn(t,e,n){return e==e?function(t,e,n){var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Qe(t,nn,n)}function en(t,e,n,r){for(var o=n-1,l=t.length;++o<l;)if(r(t[o],e))return o;return-1}function nn(t){return t!=t}function rn(t,e){var n=null==t?0:t.length;return n?ln(t,e)/n:M}function sn(t){return function(object){return null==object?l:object[t]}}function on(object){return function(t){return null==object?l:object[t]}}function an(t,e,n,r,o){return o(t,(function(t,o,l){n=r?(r=!1,t):e(n,t,o,l)})),n}function ln(t,e){for(var n,r=-1,o=t.length;++r<o;){var h=e(t[r]);h!==l&&(n=n===l?h:n+h)}return n}function hn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function un(t){return t?t.slice(0,Tn(t)+1).replace(vt,""):t}function cn(t){return function(e){return t(e)}}function fn(object,t){return qe(t,(function(t){return object[t]}))}function pn(t,e){return t.has(e)}function dn(t,e){for(var n=-1,r=t.length;++n<r&&tn(e,t[n],0)>-1;);return n}function mn(t,e){for(var n=t.length;n--&&tn(e,t[n],0)>-1;);return n}var gn=on({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vn=on({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function yn(t){return"\\"+xe[t]}function _n(t){return me.test(t)}function bn(map){var t=-1,e=Array(map.size);return map.forEach((function(n,r){e[++t]=[r,n]})),e}function xn(t,e){return function(n){return t(e(n))}}function wn(t,e){for(var n=-1,r=t.length,o=0,l=[];++n<r;){var h=t[n];h!==e&&h!==f||(t[n]=f,l[o++]=n)}return l}function Mn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function En(t){return _n(t)?function(t){var e=pe.lastIndex=0;for(;pe.test(t);)++e;return e}(t):$e(t)}function An(t){return _n(t)?function(t){return t.match(pe)||[]}(t):function(t){return t.split("")}(t)}function Tn(t){for(var e=t.length;e--&&yt.test(t.charAt(e)););return e}var Cn=on({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pn=function t(e){var n,r=(e=null==e?Ae:Pn.defaults(Ae.Object(),e,Pn.pick(Ae,ve))).Array,o=e.Date,yt=e.Error,Ft=e.Function,Ot=e.Math,Nt=e.Object,Bt=e.RegExp,Ut=e.String,zt=e.TypeError,Vt=r.prototype,jt=Ft.prototype,Ht=Nt.prototype,Gt=e["__core-js_shared__"],Wt=jt.toString,qt=Ht.hasOwnProperty,Xt=0,Yt=(n=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Zt=Ht.toString,Kt=Wt.call(Nt),$t=Ae._,Jt=Bt("^"+Wt.call(qt).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qt=Pe?e.Buffer:l,te=e.Symbol,ee=e.Uint8Array,ne=Qt?Qt.allocUnsafe:l,re=xn(Nt.getPrototypeOf,Nt),ie=Nt.create,se=Ht.propertyIsEnumerable,oe=Vt.splice,ae=te?te.isConcatSpreadable:l,le=te?te.iterator:l,he=te?te.toStringTag:l,ue=function(){try{var t=As(Nt,"defineProperty");return t({},"",{}),t}catch(t){}}(),pe=e.clearTimeout!==Ae.clearTimeout&&e.clearTimeout,me=o&&o.now!==Ae.Date.now&&o.now,xe=e.setTimeout!==Ae.setTimeout&&e.setTimeout,Se=Ot.ceil,Ee=Ot.floor,Te=Nt.getOwnPropertySymbols,Ce=Qt?Qt.isBuffer:l,Re=e.isFinite,Ie=Vt.join,$e=xn(Nt.keys,Nt),on=Ot.max,Rn=Ot.min,In=o.now,kn=e.parseInt,Dn=Ot.random,Ln=Vt.reverse,Fn=As(e,"DataView"),On=As(e,"Map"),Nn=As(e,"Promise"),Bn=As(e,"Set"),Un=As(e,"WeakMap"),zn=As(Nt,"create"),Vn=Un&&new Un,jn={},Hn=Js(Fn),Gn=Js(On),Wn=Js(Nn),qn=Js(Bn),Xn=Js(Un),Yn=te?te.prototype:l,Zn=Yn?Yn.valueOf:l,Kn=Yn?Yn.toString:l;function $n(t){if(da(t)&&!ra(t)&&!(t instanceof nr)){if(t instanceof er)return t;if(qt.call(t,"__wrapped__"))return Qs(t)}return new er(t)}var Jn=function(){function object(){}return function(t){if(!pa(t))return{};if(ie)return ie(t);object.prototype=t;var e=new object;return object.prototype=l,e}}();function Qn(){}function er(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=l}function nr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=S,this.__views__=[]}function rr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ir(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function or(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new sr;++e<n;)this.add(t[e])}function ar(t){var data=this.__data__=new ir(t);this.size=data.size}function lr(t,e){var n=ra(t),r=!n&&na(t),o=!n&&!r&&aa(t),l=!n&&!r&&!o&&wa(t),h=n||r||o||l,c=h?hn(t.length,Ut):[],f=c.length;for(var d in t)!e&&!qt.call(t,d)||h&&("length"==d||o&&("offset"==d||"parent"==d)||l&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Ds(d,f))||c.push(d);return c}function ur(t){var e=t.length;return e?t[hi(0,e-1)]:l}function cr(t,e){return Zs(Gi(t),xr(e,0,t.length))}function fr(t){return Zs(Gi(t))}function pr(object,t,e){(e!==l&&!Qo(object[t],e)||e===l&&!(t in object))&&yr(object,t,e)}function dr(object,t,e){var n=object[t];qt.call(object,t)&&Qo(n,e)&&(e!==l||t in object)||yr(object,t,e)}function mr(t,e){for(var n=t.length;n--;)if(Qo(t[n][0],e))return n;return-1}function gr(t,e,n,r){return Ar(t,(function(t,o,l){e(r,t,n(t),l)})),r}function vr(object,source){return object&&Wi(source,Ga(source),object)}function yr(object,t,e){"__proto__"==t&&ue?ue(object,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):object[t]=e}function _r(object,t){for(var e=-1,n=t.length,o=r(n),h=null==object;++e<n;)o[e]=h?l:Ua(object,t[e]);return o}function xr(t,e,n){return t==t&&(n!==l&&(t=t<=n?t:n),e!==l&&(t=t>=e?t:e)),t}function wr(t,e,n,r,object,o){var h,c=1&e,f=2&e,d=4&e;if(n&&(h=object?n(t,r,object,o):n(t)),h!==l)return h;if(!pa(t))return t;var m=ra(t);if(m){if(h=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&qt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Gi(t,h)}else{var v=Ps(t),y=v==I||v==k;if(aa(t))return Bi(t,c);if(v==F||v==A||y&&!object){if(h=f||y?{}:Is(t),!c)return f?function(source,object){return Wi(source,Cs(source),object)}(t,function(object,source){return object&&Wi(source,Wa(source),object)}(h,t)):function(source,object){return Wi(source,Ts(source),object)}(t,vr(h,t))}else{if(!be[v])return object?t:{};h=function(object,t,e){var n=object.constructor;switch(t){case j:return Ui(object);case C:case P:return new n(+object);case H:return function(t,e){var n=e?Ui(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(object,e);case G:case W:case X:case Y:case Z:case K:case $:case J:case Q:return zi(object,e);case D:return new n;case L:case U:return new n(object);case N:return function(t){var e=new t.constructor(t.source,At.exec(t));return e.lastIndex=t.lastIndex,e}(object);case B:return new n;case z:return symbol=object,Zn?Nt(Zn.call(symbol)):{}}var symbol}(t,v,c)}}o||(o=new ar);var _=o.get(t);if(_)return _;o.set(t,h),_a(t)?t.forEach((function(r){h.add(wr(r,e,n,r,t,o))})):ma(t)&&t.forEach((function(r,l){h.set(l,wr(r,e,n,l,t,o))}));var x=m?l:(d?f?_s:ys:f?Wa:Ga)(t);return ze(x||t,(function(r,l){x&&(r=t[l=r]),dr(h,l,wr(r,e,n,l,t,o))})),h}function Mr(object,source,t){var e=t.length;if(null==object)return!e;for(object=Nt(object);e--;){var n=t[e],r=source[n],o=object[n];if(o===l&&!(n in object)||!r(o))return!1}return!0}function Sr(t,e,n){if("function"!=typeof t)throw new zt(h);return Ws((function(){t.apply(l,n)}),e)}function Er(t,e,n,r){var o=-1,l=Ge,h=!0,c=t.length,f=[],d=e.length;if(!c)return f;n&&(e=qe(e,cn(n))),r?(l=We,h=!1):e.length>=200&&(l=pn,h=!1,e=new or(e));t:for(;++o<c;){var m=t[o],v=null==n?m:n(m);if(m=r||0!==m?m:0,h&&v==v){for(var y=d;y--;)if(e[y]===v)continue t;f.push(m)}else l(e,v,r)||f.push(m)}return f}$n.templateSettings={escape:lt,evaluate:ht,interpolate:ut,variable:"",imports:{_:$n}},$n.prototype=Qn.prototype,$n.prototype.constructor=$n,er.prototype=Jn(Qn.prototype),er.prototype.constructor=er,nr.prototype=Jn(Qn.prototype),nr.prototype.constructor=nr,rr.prototype.clear=function(){this.__data__=zn?zn(null):{},this.size=0},rr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},rr.prototype.get=function(t){var data=this.__data__;if(zn){var e=data[t];return e===c?l:e}return qt.call(data,t)?data[t]:l},rr.prototype.has=function(t){var data=this.__data__;return zn?data[t]!==l:qt.call(data,t)},rr.prototype.set=function(t,e){var data=this.__data__;return this.size+=this.has(t)?0:1,data[t]=zn&&e===l?c:e,this},ir.prototype.clear=function(){this.__data__=[],this.size=0},ir.prototype.delete=function(t){var data=this.__data__,e=mr(data,t);return!(e<0)&&(e==data.length-1?data.pop():oe.call(data,e,1),--this.size,!0)},ir.prototype.get=function(t){var data=this.__data__,e=mr(data,t);return e<0?l:data[e][1]},ir.prototype.has=function(t){return mr(this.__data__,t)>-1},ir.prototype.set=function(t,e){var data=this.__data__,n=mr(data,t);return n<0?(++this.size,data.push([t,e])):data[n][1]=e,this},sr.prototype.clear=function(){this.size=0,this.__data__={hash:new rr,map:new(On||ir),string:new rr}},sr.prototype.delete=function(t){var e=Ss(this,t).delete(t);return this.size-=e?1:0,e},sr.prototype.get=function(t){return Ss(this,t).get(t)},sr.prototype.has=function(t){return Ss(this,t).has(t)},sr.prototype.set=function(t,e){var data=Ss(this,t),n=data.size;return data.set(t,e),this.size+=data.size==n?0:1,this},or.prototype.add=or.prototype.push=function(t){return this.__data__.set(t,c),this},or.prototype.has=function(t){return this.__data__.has(t)},ar.prototype.clear=function(){this.__data__=new ir,this.size=0},ar.prototype.delete=function(t){var data=this.__data__,e=data.delete(t);return this.size=data.size,e},ar.prototype.get=function(t){return this.__data__.get(t)},ar.prototype.has=function(t){return this.__data__.has(t)},ar.prototype.set=function(t,e){var data=this.__data__;if(data instanceof ir){var n=data.__data__;if(!On||n.length<199)return n.push([t,e]),this.size=++data.size,this;data=this.__data__=new sr(n)}return data.set(t,e),this.size=data.size,this};var Ar=Yi(Lr),Tr=Yi(Fr,!0);function Cr(t,e){var n=!0;return Ar(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function Pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var h=t[r],c=e(h);if(null!=c&&(f===l?c==c&&!xa(c):n(c,f)))var f=c,d=h}return d}function Rr(t,e){var n=[];return Ar(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function Ir(t,e,n,r,o){var l=-1,h=t.length;for(n||(n=ks),o||(o=[]);++l<h;){var c=t[l];e>0&&n(c)?e>1?Ir(c,e-1,n,r,o):Xe(o,c):r||(o[o.length]=c)}return o}var kr=Zi(),Dr=Zi(!0);function Lr(object,t){return object&&kr(object,t,Ga)}function Fr(object,t){return object&&Dr(object,t,Ga)}function Or(object,t){return He(t,(function(t){return ua(object[t])}))}function Nr(object,path){for(var t=0,e=(path=Li(path,object)).length;null!=object&&t<e;)object=object[$s(path[t++])];return t&&t==e?object:l}function Br(object,t,e){var n=t(object);return ra(object)?n:Xe(n,e(object))}function Ur(t){return null==t?t===l?"[object Undefined]":"[object Null]":he&&he in Nt(t)?function(t){var e=qt.call(t,he),n=t[he];try{t[he]=l;var r=!0}catch(t){}var o=Zt.call(t);r&&(e?t[he]=n:delete t[he]);return o}(t):function(t){return Zt.call(t)}(t)}function zr(t,e){return t>e}function Vr(object,t){return null!=object&&qt.call(object,t)}function jr(object,t){return null!=object&&t in Nt(object)}function Hr(t,e,n){for(var o=n?We:Ge,h=t[0].length,c=t.length,f=c,d=r(c),m=1/0,v=[];f--;){var y=t[f];f&&e&&(y=qe(y,cn(e))),m=Rn(y.length,m),d[f]=!n&&(e||h>=120&&y.length>=120)?new or(f&&y):l}y=t[0];var _=-1,x=d[0];t:for(;++_<h&&v.length<m;){var w=y[_],M=e?e(w):w;if(w=n||0!==w?w:0,!(x?pn(x,M):o(v,M,n))){for(f=c;--f;){var S=d[f];if(!(S?pn(S,M):o(t[f],M,n)))continue t}x&&x.push(M),v.push(w)}}return v}function Gr(object,path,t){var e=null==(object=js(object,path=Li(path,object)))?object:object[$s(ho(path))];return null==e?l:Be(e,object,t)}function Wr(t){return da(t)&&Ur(t)==A}function qr(t,e,n,r,o){return t===e||(null==t||null==e||!da(t)&&!da(e)?t!=t&&e!=e:function(object,t,e,n,r,o){var h=ra(object),c=ra(t),f=h?T:Ps(object),d=c?T:Ps(t),m=(f=f==A?F:f)==F,v=(d=d==A?F:d)==F,y=f==d;if(y&&aa(object)){if(!aa(t))return!1;h=!0,m=!1}if(y&&!m)return o||(o=new ar),h||wa(object)?gs(object,t,e,n,r,o):function(object,t,e,n,r,o,l){switch(e){case H:if(object.byteLength!=t.byteLength||object.byteOffset!=t.byteOffset)return!1;object=object.buffer,t=t.buffer;case j:return!(object.byteLength!=t.byteLength||!o(new ee(object),new ee(t)));case C:case P:case L:return Qo(+object,+t);case R:return object.name==t.name&&object.message==t.message;case N:case U:return object==t+"";case D:var h=bn;case B:var c=1&n;if(h||(h=Mn),object.size!=t.size&&!c)return!1;var f=l.get(object);if(f)return f==t;n|=2,l.set(object,t);var d=gs(h(object),h(t),n,r,o,l);return l.delete(object),d;case z:if(Zn)return Zn.call(object)==Zn.call(t)}return!1}(object,t,f,e,n,r,o);if(!(1&e)){var _=m&&qt.call(object,"__wrapped__"),x=v&&qt.call(t,"__wrapped__");if(_||x){var w=_?object.value():object,M=x?t.value():t;return o||(o=new ar),r(w,M,e,n,o)}}if(!y)return!1;return o||(o=new ar),function(object,t,e,n,r,o){var h=1&e,c=ys(object),f=c.length,d=ys(t),m=d.length;if(f!=m&&!h)return!1;var v=f;for(;v--;){var y=c[v];if(!(h?y in t:qt.call(t,y)))return!1}var _=o.get(object),x=o.get(t);if(_&&x)return _==t&&x==object;var w=!0;o.set(object,t),o.set(t,object);var M=h;for(;++v<f;){var S=object[y=c[v]],E=t[y];if(n)var A=h?n(E,S,y,t,object,o):n(S,E,y,object,t,o);if(!(A===l?S===E||r(S,E,e,n,o):A)){w=!1;break}M||(M="constructor"==y)}if(w&&!M){var T=object.constructor,C=t.constructor;T==C||!("constructor"in object)||!("constructor"in t)||"function"==typeof T&&T instanceof T&&"function"==typeof C&&C instanceof C||(w=!1)}return o.delete(object),o.delete(t),w}(object,t,e,n,r,o)}(t,e,n,r,qr,o))}function Xr(object,source,t,e){var n=t.length,r=n,o=!e;if(null==object)return!r;for(object=Nt(object);n--;){var data=t[n];if(o&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++n<r;){var h=(data=t[n])[0],c=object[h],f=data[1];if(o&&data[2]){if(c===l&&!(h in object))return!1}else{var d=new ar;if(e)var m=e(c,f,h,object,source,d);if(!(m===l?qr(f,c,3,e,d):m))return!1}}return!0}function Yr(t){return!(!pa(t)||(e=t,Yt&&Yt in e))&&(ua(t)?Jt:Pt).test(Js(t));var e}function Zr(t){return"function"==typeof t?t:null==t?_l:"object"==typeof t?ra(t)?ei(t[0],t[1]):ti(t):Cl(t)}function Kr(object){if(!Bs(object))return $e(object);var t=[];for(var e in Nt(object))qt.call(object,e)&&"constructor"!=e&&t.push(e);return t}function $r(object){if(!pa(object))return function(object){var t=[];if(null!=object)for(var e in Nt(object))t.push(e);return t}(object);var t=Bs(object),e=[];for(var n in object)("constructor"!=n||!t&&qt.call(object,n))&&e.push(n);return e}function Jr(t,e){return t<e}function Qr(t,e){var n=-1,o=sa(t)?r(t.length):[];return Ar(t,(function(t,r,l){o[++n]=e(t,r,l)})),o}function ti(source){var t=Es(source);return 1==t.length&&t[0][2]?zs(t[0][0],t[0][1]):function(object){return object===source||Xr(object,source,t)}}function ei(path,t){return Fs(path)&&Us(t)?zs($s(path),t):function(object){var e=Ua(object,path);return e===l&&e===t?za(object,path):qr(t,e,3)}}function ni(object,source,t,e,n){object!==source&&kr(source,(function(r,o){if(n||(n=new ar),pa(r))!function(object,source,t,e,n,r,o){var h=Hs(object,t),c=Hs(source,t),f=o.get(c);if(f)return void pr(object,t,f);var d=r?r(h,c,t+"",object,source,o):l,m=d===l;if(m){var v=ra(c),y=!v&&aa(c),_=!v&&!y&&wa(c);d=c,v||y||_?ra(h)?d=h:oa(h)?d=Gi(h):y?(m=!1,d=Bi(c,!0)):_?(m=!1,d=zi(c,!0)):d=[]:va(c)||na(c)?(d=h,na(h)?d=Ra(h):pa(h)&&!ua(h)||(d=Is(c))):m=!1}m&&(o.set(c,d),n(d,c,e,r,o),o.delete(c));pr(object,t,d)}(object,source,o,t,ni,e,n);else{var h=e?e(Hs(object,o),r,o+"",object,source,n):l;h===l&&(h=r),pr(object,o,h)}}),Wa)}function ri(t,e){var n=t.length;if(n)return Ds(e+=e<0?n:0,n)?t[e]:l}function ii(t,e,n){e=e.length?qe(e,(function(t){return ra(t)?function(e){return Nr(e,1===t.length?t[0]:t)}:t})):[_l];var r=-1;e=qe(e,cn(Ms()));var o=Qr(t,(function(t,n,o){var l=qe(e,(function(e){return e(t)}));return{criteria:l,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(o,(function(object,t){return function(object,t,e){var n=-1,r=object.criteria,o=t.criteria,l=r.length,h=e.length;for(;++n<l;){var c=Vi(r[n],o[n]);if(c)return n>=h?c:c*("desc"==e[n]?-1:1)}return object.index-t.index}(object,t,n)}))}function si(object,t,e){for(var n=-1,r=t.length,o={};++n<r;){var path=t[n],l=Nr(object,path);e(l,path)&&di(o,Li(path,object),l)}return o}function oi(t,e,n,r){var o=r?en:tn,l=-1,h=e.length,c=t;for(t===e&&(e=Gi(e)),n&&(c=qe(t,cn(n)));++l<h;)for(var f=0,d=e[l],m=n?n(d):d;(f=o(c,m,f,r))>-1;)c!==t&&oe.call(c,f,1),oe.call(t,f,1);return t}function ai(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==l){var l=o;Ds(o)?oe.call(t,o,1):Ai(t,o)}}return t}function hi(t,e){return t+Ee(Dn()*(e-t+1))}function ui(t,e){var n="";if(!t||e<1||e>w)return n;do{e%2&&(n+=t),(e=Ee(e/2))&&(t+=t)}while(e);return n}function ci(t,e){return qs(Vs(t,e,_l),t+"")}function fi(t){return ur(Qa(t))}function pi(t,e){var n=Qa(t);return Zs(n,xr(e,0,n.length))}function di(object,path,t,e){if(!pa(object))return object;for(var n=-1,r=(path=Li(path,object)).length,o=r-1,h=object;null!=h&&++n<r;){var c=$s(path[n]),f=t;if("__proto__"===c||"constructor"===c||"prototype"===c)return object;if(n!=o){var d=h[c];(f=e?e(d,c,h):l)===l&&(f=pa(d)?d:Ds(path[n+1])?[]:{})}dr(h,c,f),h=h[c]}return object}var mi=Vn?function(t,data){return Vn.set(t,data),t}:_l,gi=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:gl(e),writable:!0})}:_l;function vi(t){return Zs(Qa(t))}function yi(t,e,n){var o=-1,l=t.length;e<0&&(e=-e>l?0:l+e),(n=n>l?l:n)<0&&(n+=l),l=e>n?0:n-e>>>0,e>>>=0;for(var h=r(l);++o<l;)h[o]=t[o+e];return h}function _i(t,e){var n;return Ar(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function bi(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var l=r+o>>>1,h=t[l];null!==h&&!xa(h)&&(n?h<=e:h<e)?r=l+1:o=l}return o}return xi(t,e,_l,n)}function xi(t,e,n,r){var o=0,h=null==t?0:t.length;if(0===h)return 0;for(var c=(e=n(e))!=e,f=null===e,d=xa(e),m=e===l;o<h;){var v=Ee((o+h)/2),y=n(t[v]),_=y!==l,x=null===y,w=y==y,M=xa(y);if(c)var S=r||w;else S=m?w&&(r||_):f?w&&_&&(r||!x):d?w&&_&&!x&&(r||!M):!x&&!M&&(r?y<=e:y<e);S?o=v+1:h=v}return Rn(h,4294967294)}function wi(t,e){for(var n=-1,r=t.length,o=0,l=[];++n<r;){var h=t[n],c=e?e(h):h;if(!n||!Qo(c,f)){var f=c;l[o++]=0===h?0:h}}return l}function Mi(t){return"number"==typeof t?t:xa(t)?M:+t}function Si(t){if("string"==typeof t)return t;if(ra(t))return qe(t,Si)+"";if(xa(t))return Kn?Kn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ei(t,e,n){var r=-1,o=Ge,l=t.length,h=!0,c=[],f=c;if(n)h=!1,o=We;else if(l>=200){var d=e?null:us(t);if(d)return Mn(d);h=!1,o=pn,f=new or}else f=e?[]:c;t:for(;++r<l;){var m=t[r],v=e?e(m):m;if(m=n||0!==m?m:0,h&&v==v){for(var y=f.length;y--;)if(f[y]===v)continue t;e&&f.push(v),c.push(m)}else o(f,v,n)||(f!==c&&f.push(v),c.push(m))}return c}function Ai(object,path){return null==(object=js(object,path=Li(path,object)))||delete object[$s(ho(path))]}function Ti(object,path,t,e){return di(object,path,t(Nr(object,path)),e)}function Ci(t,e,n,r){for(var o=t.length,l=r?o:-1;(r?l--:++l<o)&&e(t[l],l,t););return n?yi(t,r?0:l,r?l+1:o):yi(t,r?l+1:0,r?o:l)}function Pi(t,e){var n=t;return n instanceof nr&&(n=n.value()),Ye(e,(function(t,e){return e.func.apply(e.thisArg,Xe([t],e.args))}),n)}function Ri(t,e,n){var o=t.length;if(o<2)return o?Ei(t[0]):[];for(var l=-1,h=r(o);++l<o;)for(var c=t[l],f=-1;++f<o;)f!=l&&(h[l]=Er(h[l]||c,t[f],e,n));return Ei(Ir(h,1),e,n)}function Ii(t,e,n){for(var r=-1,o=t.length,h=e.length,c={};++r<o;){var f=r<h?e[r]:l;n(c,t[r],f)}return c}function ki(t){return oa(t)?t:[]}function Di(t){return"function"==typeof t?t:_l}function Li(t,object){return ra(t)?t:Fs(t,object)?[t]:Ks(Ia(t))}var Fi=ci;function Oi(t,e,n){var r=t.length;return n=n===l?r:n,!e&&n>=r?t:yi(t,e,n)}var Ni=pe||function(t){return Ae.clearTimeout(t)};function Bi(t,e){if(e)return t.slice();var n=t.length,r=ne?ne(n):new t.constructor(n);return t.copy(r),r}function Ui(t){var e=new t.constructor(t.byteLength);return new ee(e).set(new ee(t)),e}function zi(t,e){var n=e?Ui(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Vi(t,e){if(t!==e){var n=t!==l,r=null===t,o=t==t,h=xa(t),c=e!==l,f=null===e,d=e==e,m=xa(e);if(!f&&!m&&!h&&t>e||h&&c&&d&&!f&&!m||r&&c&&d||!n&&d||!o)return 1;if(!r&&!h&&!m&&t<e||m&&n&&o&&!r&&!h||f&&n&&o||!c&&o||!d)return-1}return 0}function ji(t,e,n,o){for(var l=-1,h=t.length,c=n.length,f=-1,d=e.length,m=on(h-c,0),v=r(d+m),y=!o;++f<d;)v[f]=e[f];for(;++l<c;)(y||l<h)&&(v[n[l]]=t[l]);for(;m--;)v[f++]=t[l++];return v}function Hi(t,e,n,o){for(var l=-1,h=t.length,c=-1,f=n.length,d=-1,m=e.length,v=on(h-f,0),y=r(v+m),_=!o;++l<v;)y[l]=t[l];for(var x=l;++d<m;)y[x+d]=e[d];for(;++c<f;)(_||l<h)&&(y[x+n[c]]=t[l++]);return y}function Gi(source,t){var e=-1,n=source.length;for(t||(t=r(n));++e<n;)t[e]=source[e];return t}function Wi(source,t,object,e){var n=!object;object||(object={});for(var r=-1,o=t.length;++r<o;){var h=t[r],c=e?e(object[h],source[h],h,object,source):l;c===l&&(c=source[h]),n?yr(object,h,c):dr(object,h,c)}return object}function qi(t,e){return function(n,r){var o=ra(n)?Ue:gr,l=e?e():{};return o(n,t,Ms(r,2),l)}}function Xi(t){return ci((function(object,e){var n=-1,r=e.length,o=r>1?e[r-1]:l,h=r>2?e[2]:l;for(o=t.length>3&&"function"==typeof o?(r--,o):l,h&&Ls(e[0],e[1],h)&&(o=r<3?l:o,r=1),object=Nt(object);++n<r;){var source=e[n];source&&t(object,source,n,o)}return object}))}function Yi(t,e){return function(n,r){if(null==n)return n;if(!sa(n))return t(n,r);for(var o=n.length,l=e?o:-1,h=Nt(n);(e?l--:++l<o)&&!1!==r(h[l],l,h););return n}}function Zi(t){return function(object,e,n){for(var r=-1,o=Nt(object),l=n(object),h=l.length;h--;){var c=l[t?h:++r];if(!1===e(o[c],c,o))break}return object}}function Ki(t){return function(e){var n=_n(e=Ia(e))?An(e):l,r=n?n[0]:e.charAt(0),o=n?Oi(n,1).join(""):e.slice(1);return r[t]()+o}}function $i(t){return function(e){return Ye(fl(nl(e).replace(ce,"")),t,"")}}function Ji(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Jn(t.prototype),r=t.apply(n,e);return pa(r)?r:n}}function Qi(t){return function(e,n,r){var o=Nt(e);if(!sa(e)){var h=Ms(n,3);e=Ga(e),n=function(t){return h(o[t],t,o)}}var c=t(e,n,r);return c>-1?o[h?e[c]:c]:l}}function ts(t){return vs((function(e){var n=e.length,r=n,o=er.prototype.thru;for(t&&e.reverse();r--;){var c=e[r];if("function"!=typeof c)throw new zt(h);if(o&&!f&&"wrapper"==xs(c))var f=new er([],!0)}for(r=f?r:n;++r<n;){var d=xs(c=e[r]),data="wrapper"==d?bs(c):l;f=data&&Os(data[0])&&424==data[1]&&!data[4].length&&1==data[9]?f[xs(data[0])].apply(f,data[3]):1==c.length&&Os(c)?f[d]():f.thru(c)}return function(){var t=arguments,r=t[0];if(f&&1==t.length&&ra(r))return f.plant(r).value();for(var o=0,l=n?e[o].apply(this,t):r;++o<n;)l=e[o].call(this,l);return l}}))}function es(t,e,n,o,h,c,f,d,m,v){var _=e&y,x=1&e,w=2&e,M=24&e,S=512&e,E=w?l:Ji(t);return function y(){for(var A=arguments.length,T=r(A),C=A;C--;)T[C]=arguments[C];if(M)var P=ws(y),R=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(T,P);if(o&&(T=ji(T,o,h,M)),c&&(T=Hi(T,c,f,M)),A-=R,M&&A<v){var I=wn(T,P);return ls(t,e,es,y.placeholder,n,T,I,d,m,v-A)}var k=x?n:this,D=w?k[t]:t;return A=T.length,d?T=function(t,e){var n=t.length,r=Rn(e.length,n),o=Gi(t);for(;r--;){var h=e[r];t[r]=Ds(h,n)?o[h]:l}return t}(T,d):S&&A>1&&T.reverse(),_&&m<A&&(T.length=m),this&&this!==Ae&&this instanceof y&&(D=E||Ji(D)),D.apply(k,T)}}function ns(t,e){return function(object,n){return function(object,t,e,n){return Lr(object,(function(r,o,object){t(n,e(r),o,object)})),n}(object,t,e(n),{})}}function rs(t,e){return function(n,r){var o;if(n===l&&r===l)return e;if(n!==l&&(o=n),r!==l){if(o===l)return r;"string"==typeof n||"string"==typeof r?(n=Si(n),r=Si(r)):(n=Mi(n),r=Mi(r)),o=t(n,r)}return o}}function is(t){return vs((function(e){return e=qe(e,cn(Ms())),ci((function(n){var r=this;return t(e,(function(t){return Be(t,r,n)}))}))}))}function ss(t,e){var n=(e=e===l?" ":Si(e)).length;if(n<2)return n?ui(e,t):e;var r=ui(e,Se(t/En(e)));return _n(e)?Oi(An(r),0,t).join(""):r.slice(0,t)}function os(t){return function(e,n,o){return o&&"number"!=typeof o&&Ls(e,n,o)&&(n=o=l),e=Aa(e),n===l?(n=e,e=0):n=Aa(n),function(t,e,n,o){for(var l=-1,h=on(Se((e-t)/(n||1)),0),c=r(h);h--;)c[o?h:++l]=t,t+=n;return c}(e,n,o=o===l?e<n?1:-1:Aa(o),t)}}function as(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Pa(e),n=Pa(n)),t(e,n)}}function ls(t,e,n,r,o,h,c,f,d,y){var _=8&e;e|=_?m:v,4&(e&=~(_?v:m))||(e&=-4);var x=[t,e,o,_?h:l,_?c:l,_?l:h,_?l:c,f,d,y],w=n.apply(l,x);return Os(t)&&Gs(w,x),w.placeholder=r,Xs(w,t,e)}function hs(t){var e=Ot[t];return function(t,n){if(t=Pa(t),(n=null==n?0:Rn(Ta(n),292))&&Re(t)){var r=(Ia(t)+"e").split("e");return+((r=(Ia(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var us=Bn&&1/Mn(new Bn([,-0]))[1]==x?function(t){return new Bn(t)}:Sl;function cs(t){return function(object){var e=Ps(object);return e==D?bn(object):e==B?Sn(object):function(object,t){return qe(t,(function(t){return[t,object[t]]}))}(object,t(object))}}function fs(t,e,n,o,c,x,w,M){var S=2&e;if(!S&&"function"!=typeof t)throw new zt(h);var E=o?o.length:0;if(E||(e&=-97,o=c=l),w=w===l?w:on(Ta(w),0),M=M===l?M:Ta(M),E-=c?c.length:0,e&v){var A=o,T=c;o=c=l}var data=S?l:bs(t),C=[t,e,n,o,c,A,T,x,w,M];if(data&&function(data,source){var t=data[1],e=source[1],n=t|e,r=n<131,o=e==y&&8==t||e==y&&t==_&&data[7].length<=source[8]||384==e&&source[7].length<=source[8]&&8==t;if(!r&&!o)return data;1&e&&(data[2]=source[2],n|=1&t?0:4);var l=source[3];if(l){var h=data[3];data[3]=h?ji(h,l,source[4]):l,data[4]=h?wn(data[3],f):source[4]}(l=source[5])&&(h=data[5],data[5]=h?Hi(h,l,source[6]):l,data[6]=h?wn(data[5],f):source[6]);(l=source[7])&&(data[7]=l);e&y&&(data[8]=null==data[8]?source[8]:Rn(data[8],source[8]));null==data[9]&&(data[9]=source[9]);data[0]=source[0],data[1]=n}(C,data),t=C[0],e=C[1],n=C[2],o=C[3],c=C[4],!(M=C[9]=C[9]===l?S?0:t.length:on(C[9]-E,0))&&24&e&&(e&=-25),e&&1!=e)P=8==e||e==d?function(t,e,n){var o=Ji(t);return function h(){for(var c=arguments.length,f=r(c),d=c,m=ws(h);d--;)f[d]=arguments[d];var v=c<3&&f[0]!==m&&f[c-1]!==m?[]:wn(f,m);return(c-=v.length)<n?ls(t,e,es,h.placeholder,l,f,v,l,l,n-c):Be(this&&this!==Ae&&this instanceof h?o:t,this,f)}}(t,e,M):e!=m&&33!=e||c.length?es.apply(l,C):function(t,e,n,o){var l=1&e,h=Ji(t);return function e(){for(var c=-1,f=arguments.length,d=-1,m=o.length,v=r(m+f),y=this&&this!==Ae&&this instanceof e?h:t;++d<m;)v[d]=o[d];for(;f--;)v[d++]=arguments[++c];return Be(y,l?n:this,v)}}(t,e,n,o);else var P=function(t,e,n){var r=1&e,o=Ji(t);return function e(){return(this&&this!==Ae&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,n);return Xs((data?mi:Gs)(P,C),t,e)}function ps(t,e,n,object){return t===l||Qo(t,Ht[n])&&!qt.call(object,n)?e:t}function ds(t,e,n,object,source,r){return pa(t)&&pa(e)&&(r.set(e,t),ni(t,e,l,ds,r),r.delete(e)),t}function ms(t){return va(t)?l:t}function gs(t,e,n,r,o,h){var c=1&n,f=t.length,d=e.length;if(f!=d&&!(c&&d>f))return!1;var m=h.get(t),v=h.get(e);if(m&&v)return m==e&&v==t;var y=-1,_=!0,x=2&n?new or:l;for(h.set(t,e),h.set(e,t);++y<f;){var w=t[y],M=e[y];if(r)var S=c?r(M,w,y,e,t,h):r(w,M,y,t,e,h);if(S!==l){if(S)continue;_=!1;break}if(x){if(!Ke(e,(function(t,e){if(!pn(x,e)&&(w===t||o(w,t,n,r,h)))return x.push(e)}))){_=!1;break}}else if(w!==M&&!o(w,M,n,r,h)){_=!1;break}}return h.delete(t),h.delete(e),_}function vs(t){return qs(Vs(t,l,so),t+"")}function ys(object){return Br(object,Ga,Ts)}function _s(object){return Br(object,Wa,Cs)}var bs=Vn?function(t){return Vn.get(t)}:Sl;function xs(t){for(var e=t.name+"",n=jn[e],r=qt.call(jn,e)?n.length:0;r--;){var data=n[r],o=data.func;if(null==o||o==t)return data.name}return e}function ws(t){return(qt.call($n,"placeholder")?$n:t).placeholder}function Ms(){var t=$n.iteratee||bl;return t=t===bl?Zr:t,arguments.length?t(arguments[0],arguments[1]):t}function Ss(map,t){var e,n,data=map.__data__;return("string"==(n=typeof(e=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?data["string"==typeof t?"string":"hash"]:data.map}function Es(object){for(var t=Ga(object),e=t.length;e--;){var n=t[e],r=object[n];t[e]=[n,r,Us(r)]}return t}function As(object,t){var e=function(object,t){return null==object?l:object[t]}(object,t);return Yr(e)?e:l}var Ts=Te?function(object){return null==object?[]:(object=Nt(object),He(Te(object),(function(symbol){return se.call(object,symbol)})))}:Il,Cs=Te?function(object){for(var t=[];object;)Xe(t,Ts(object)),object=re(object);return t}:Il,Ps=Ur;function Rs(object,path,t){for(var e=-1,n=(path=Li(path,object)).length,r=!1;++e<n;){var o=$s(path[e]);if(!(r=null!=object&&t(object,o)))break;object=object[o]}return r||++e!=n?r:!!(n=null==object?0:object.length)&&fa(n)&&Ds(o,n)&&(ra(object)||na(object))}function Is(object){return"function"!=typeof object.constructor||Bs(object)?{}:Jn(re(object))}function ks(t){return ra(t)||na(t)||!!(ae&&t&&t[ae])}function Ds(t,e){var n=typeof t;return!!(e=null==e?w:e)&&("number"==n||"symbol"!=n&&It.test(t))&&t>-1&&t%1==0&&t<e}function Ls(t,e,object){if(!pa(object))return!1;var n=typeof e;return!!("number"==n?sa(object)&&Ds(e,object.length):"string"==n&&e in object)&&Qo(object[e],t)}function Fs(t,object){if(ra(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!xa(t))||(ft.test(t)||!ct.test(t)||null!=object&&t in Nt(object))}function Os(t){var e=xs(t),n=$n[e];if("function"!=typeof n||!(e in nr.prototype))return!1;if(t===n)return!0;var data=bs(n);return!!data&&t===data[0]}(Fn&&Ps(new Fn(new ArrayBuffer(1)))!=H||On&&Ps(new On)!=D||Nn&&Ps(Nn.resolve())!=O||Bn&&Ps(new Bn)!=B||Un&&Ps(new Un)!=V)&&(Ps=function(t){var e=Ur(t),n=e==F?t.constructor:l,r=n?Js(n):"";if(r)switch(r){case Hn:return H;case Gn:return D;case Wn:return O;case qn:return B;case Xn:return V}return e});var Ns=Gt?ua:kl;function Bs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ht)}function Us(t){return t==t&&!pa(t)}function zs(t,e){return function(object){return null!=object&&(object[t]===e&&(e!==l||t in Nt(object)))}}function Vs(t,e,n){return e=on(e===l?t.length-1:e,0),function(){for(var o=arguments,l=-1,h=on(o.length-e,0),c=r(h);++l<h;)c[l]=o[e+l];l=-1;for(var f=r(e+1);++l<e;)f[l]=o[l];return f[e]=n(c),Be(t,this,f)}}function js(object,path){return path.length<2?object:Nr(object,yi(path,0,-1))}function Hs(object,t){if(("constructor"!==t||"function"!=typeof object[t])&&"__proto__"!=t)return object[t]}var Gs=Ys(mi),Ws=xe||function(t,e){return Ae.setTimeout(t,e)},qs=Ys(gi);function Xs(t,e,n){var source=e+"";return qs(t,function(source,details){var t=details.length;if(!t)return source;var e=t-1;return details[e]=(t>1?"& ":"")+details[e],details=details.join(t>2?", ":" "),source.replace(_t,"{\n/* [wrapped with "+details+"] */\n")}(source,function(details,t){return ze(E,(function(e){var n="_."+e[0];t&e[1]&&!Ge(details,n)&&details.push(n)})),details.sort()}(function(source){var t=source.match(bt);return t?t[1].split(xt):[]}(source),n)))}function Ys(t){var e=0,n=0;return function(){var r=In(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(l,arguments)}}function Zs(t,e){var n=-1,r=t.length,o=r-1;for(e=e===l?r:e;++n<e;){var h=hi(n,o),c=t[h];t[h]=t[n],t[n]=c}return t.length=e,t}var Ks=function(t){var e=Xo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(pt,(function(t,n,r,o){e.push(r?o.replace(St,"$1"):n||t)})),e}));function $s(t){if("string"==typeof t||xa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Js(t){if(null!=t){try{return Wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Qs(t){if(t instanceof nr)return t.clone();var e=new er(t.__wrapped__,t.__chain__);return e.__actions__=Gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var to=ci((function(t,e){return oa(t)?Er(t,Ir(e,1,oa,!0)):[]})),eo=ci((function(t,e){var n=ho(e);return oa(n)&&(n=l),oa(t)?Er(t,Ir(e,1,oa,!0),Ms(n,2)):[]})),no=ci((function(t,e){var n=ho(e);return oa(n)&&(n=l),oa(t)?Er(t,Ir(e,1,oa,!0),l,n):[]}));function ro(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Ta(n);return o<0&&(o=on(r+o,0)),Qe(t,Ms(e,3),o)}function io(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==l&&(o=Ta(n),o=n<0?on(r+o,0):Rn(o,r-1)),Qe(t,Ms(e,3),o,!0)}function so(t){return(null==t?0:t.length)?Ir(t,1):[]}function head(t){return t&&t.length?t[0]:l}var oo=ci((function(t){var e=qe(t,ki);return e.length&&e[0]===t[0]?Hr(e):[]})),ao=ci((function(t){var e=ho(t),n=qe(t,ki);return e===ho(n)?e=l:n.pop(),n.length&&n[0]===t[0]?Hr(n,Ms(e,2)):[]})),lo=ci((function(t){var e=ho(t),n=qe(t,ki);return(e="function"==typeof e?e:l)&&n.pop(),n.length&&n[0]===t[0]?Hr(n,l,e):[]}));function ho(t){var e=null==t?0:t.length;return e?t[e-1]:l}var uo=ci(co);function co(t,e){return t&&t.length&&e&&e.length?oi(t,e):t}var fo=vs((function(t,e){var n=null==t?0:t.length,r=_r(t,e);return ai(t,qe(e,(function(t){return Ds(t,n)?+t:t})).sort(Vi)),r}));function po(t){return null==t?t:Ln.call(t)}var mo=ci((function(t){return Ei(Ir(t,1,oa,!0))})),go=ci((function(t){var e=ho(t);return oa(e)&&(e=l),Ei(Ir(t,1,oa,!0),Ms(e,2))})),vo=ci((function(t){var e=ho(t);return e="function"==typeof e?e:l,Ei(Ir(t,1,oa,!0),l,e)}));function yo(t){if(!t||!t.length)return[];var e=0;return t=He(t,(function(t){if(oa(t))return e=on(t.length,e),!0})),hn(e,(function(e){return qe(t,sn(e))}))}function _o(t,e){if(!t||!t.length)return[];var n=yo(t);return null==e?n:qe(n,(function(t){return Be(e,l,t)}))}var bo=ci((function(t,e){return oa(t)?Er(t,e):[]})),xo=ci((function(t){return Ri(He(t,oa))})),wo=ci((function(t){var e=ho(t);return oa(e)&&(e=l),Ri(He(t,oa),Ms(e,2))})),Mo=ci((function(t){var e=ho(t);return e="function"==typeof e?e:l,Ri(He(t,oa),l,e)})),So=ci(yo);var Eo=ci((function(t){var e=t.length,n=e>1?t[e-1]:l;return n="function"==typeof n?(t.pop(),n):l,_o(t,n)}));function Ao(t){var e=$n(t);return e.__chain__=!0,e}function To(t,e){return e(t)}var Co=vs((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(object){return _r(object,t)};return!(e>1||this.__actions__.length)&&r instanceof nr&&Ds(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:To,args:[o],thisArg:l}),new er(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(l),t}))):this.thru(o)}));var Po=qi((function(t,e,n){qt.call(t,n)?++t[n]:yr(t,n,1)}));var Ro=Qi(ro),Io=Qi(io);function ko(t,e){return(ra(t)?ze:Ar)(t,Ms(e,3))}function Do(t,e){return(ra(t)?Ve:Tr)(t,Ms(e,3))}var Lo=qi((function(t,e,n){qt.call(t,n)?t[n].push(e):yr(t,n,[e])}));var Fo=ci((function(t,path,e){var n=-1,o="function"==typeof path,l=sa(t)?r(t.length):[];return Ar(t,(function(t){l[++n]=o?Be(path,t,e):Gr(t,path,e)})),l})),Oo=qi((function(t,e,n){yr(t,n,e)}));function map(t,e){return(ra(t)?qe:Qr)(t,Ms(e,3))}var No=qi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Bo=ci((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ls(t,e[0],e[1])?e=[]:n>2&&Ls(e[0],e[1],e[2])&&(e=[e[0]]),ii(t,Ir(e,1),[])})),Uo=me||function(){return Ae.Date.now()};function zo(t,e,n){return e=n?l:e,e=t&&null==e?t.length:e,fs(t,y,l,l,l,l,e)}function Vo(t,e){var n;if("function"!=typeof e)throw new zt(h);return t=Ta(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=l),n}}var jo=ci((function(t,e,n){var r=1;if(n.length){var o=wn(n,ws(jo));r|=m}return fs(t,r,e,n,o)})),Ho=ci((function(object,t,e){var n=3;if(e.length){var r=wn(e,ws(Ho));n|=m}return fs(t,n,object,e,r)}));function Go(t,e,n){var r,o,c,f,d,m,v=0,y=!1,_=!1,x=!0;if("function"!=typeof t)throw new zt(h);function w(time){var e=r,n=o;return r=o=l,v=time,f=t.apply(n,e)}function M(time){var t=time-m;return m===l||t>=e||t<0||_&&time-v>=c}function S(){var time=Uo();if(M(time))return E(time);d=Ws(S,function(time){var t=e-(time-m);return _?Rn(t,c-(time-v)):t}(time))}function E(time){return d=l,x&&r?w(time):(r=o=l,f)}function A(){var time=Uo(),t=M(time);if(r=arguments,o=this,m=time,t){if(d===l)return function(time){return v=time,d=Ws(S,e),y?w(time):f}(m);if(_)return Ni(d),d=Ws(S,e),w(m)}return d===l&&(d=Ws(S,e)),f}return e=Pa(e)||0,pa(n)&&(y=!!n.leading,c=(_="maxWait"in n)?on(Pa(n.maxWait)||0,e):c,x="trailing"in n?!!n.trailing:x),A.cancel=function(){d!==l&&Ni(d),v=0,r=m=o=d=l},A.flush=function(){return d===l?f:E(Uo())},A}var Wo=ci((function(t,e){return Sr(t,1,e)})),qo=ci((function(t,e,n){return Sr(t,Pa(e)||0,n)}));function Xo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new zt(h);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],l=n.cache;if(l.has(o))return l.get(o);var h=t.apply(this,r);return n.cache=l.set(o,h)||l,h};return n.cache=new(Xo.Cache||sr),n}function Yo(t){if("function"!=typeof t)throw new zt(h);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Xo.Cache=sr;var Zo=Fi((function(t,e){var n=(e=1==e.length&&ra(e[0])?qe(e[0],cn(Ms())):qe(Ir(e,1),cn(Ms()))).length;return ci((function(r){for(var o=-1,l=Rn(r.length,n);++o<l;)r[o]=e[o].call(this,r[o]);return Be(t,this,r)}))})),Ko=ci((function(t,e){var n=wn(e,ws(Ko));return fs(t,m,l,e,n)})),$o=ci((function(t,e){var n=wn(e,ws($o));return fs(t,v,l,e,n)})),Jo=vs((function(t,e){return fs(t,_,l,l,l,e)}));function Qo(t,e){return t===e||t!=t&&e!=e}var ta=as(zr),ea=as((function(t,e){return t>=e})),na=Wr(function(){return arguments}())?Wr:function(t){return da(t)&&qt.call(t,"callee")&&!se.call(t,"callee")},ra=r.isArray,ia=ke?cn(ke):function(t){return da(t)&&Ur(t)==j};function sa(t){return null!=t&&fa(t.length)&&!ua(t)}function oa(t){return da(t)&&sa(t)}var aa=Ce||kl,la=De?cn(De):function(t){return da(t)&&Ur(t)==P};function ha(t){if(!da(t))return!1;var e=Ur(t);return e==R||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!va(t)}function ua(t){if(!pa(t))return!1;var e=Ur(t);return e==I||e==k||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ca(t){return"number"==typeof t&&t==Ta(t)}function fa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=w}function pa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function da(t){return null!=t&&"object"==typeof t}var ma=Le?cn(Le):function(t){return da(t)&&Ps(t)==D};function ga(t){return"number"==typeof t||da(t)&&Ur(t)==L}function va(t){if(!da(t)||Ur(t)!=F)return!1;var e=re(t);if(null===e)return!0;var n=qt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Wt.call(n)==Kt}var ya=Fe?cn(Fe):function(t){return da(t)&&Ur(t)==N};var _a=Oe?cn(Oe):function(t){return da(t)&&Ps(t)==B};function ba(t){return"string"==typeof t||!ra(t)&&da(t)&&Ur(t)==U}function xa(t){return"symbol"==typeof t||da(t)&&Ur(t)==z}var wa=Ne?cn(Ne):function(t){return da(t)&&fa(t.length)&&!!_e[Ur(t)]};var Ma=as(Jr),Sa=as((function(t,e){return t<=e}));function Ea(t){if(!t)return[];if(sa(t))return ba(t)?An(t):Gi(t);if(le&&t[le])return function(t){for(var data,e=[];!(data=t.next()).done;)e.push(data.value);return e}(t[le]());var e=Ps(t);return(e==D?bn:e==B?Mn:Qa)(t)}function Aa(t){return t?(t=Pa(t))===x||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Ta(t){var e=Aa(t),n=e%1;return e==e?n?e-n:e:0}function Ca(t){return t?xr(Ta(t),0,S):0}function Pa(t){if("number"==typeof t)return t;if(xa(t))return M;if(pa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=pa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=un(t);var n=Ct.test(t);return n||Rt.test(t)?Me(t.slice(2),n?2:8):Tt.test(t)?M:+t}function Ra(t){return Wi(t,Wa(t))}function Ia(t){return null==t?"":Si(t)}var ka=Xi((function(object,source){if(Bs(source)||sa(source))Wi(source,Ga(source),object);else for(var t in source)qt.call(source,t)&&dr(object,t,source[t])})),Da=Xi((function(object,source){Wi(source,Wa(source),object)})),La=Xi((function(object,source,t,e){Wi(source,Wa(source),object,e)})),Fa=Xi((function(object,source,t,e){Wi(source,Ga(source),object,e)})),Oa=vs(_r);var Na=ci((function(object,t){object=Nt(object);var e=-1,n=t.length,r=n>2?t[2]:l;for(r&&Ls(t[0],t[1],r)&&(n=1);++e<n;)for(var source=t[e],o=Wa(source),h=-1,c=o.length;++h<c;){var f=o[h],d=object[f];(d===l||Qo(d,Ht[f])&&!qt.call(object,f))&&(object[f]=source[f])}return object})),Ba=ci((function(t){return t.push(l,ds),Be(Xa,l,t)}));function Ua(object,path,t){var e=null==object?l:Nr(object,path);return e===l?t:e}function za(object,path){return null!=object&&Rs(object,path,jr)}var Va=ns((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Zt.call(e)),t[e]=n}),gl(_l)),ja=ns((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Zt.call(e)),qt.call(t,e)?t[e].push(n):t[e]=[n]}),Ms),Ha=ci(Gr);function Ga(object){return sa(object)?lr(object):Kr(object)}function Wa(object){return sa(object)?lr(object,!0):$r(object)}var qa=Xi((function(object,source,t){ni(object,source,t)})),Xa=Xi((function(object,source,t,e){ni(object,source,t,e)})),Ya=vs((function(object,t){var e={};if(null==object)return e;var n=!1;t=qe(t,(function(path){return path=Li(path,object),n||(n=path.length>1),path})),Wi(object,_s(object),e),n&&(e=wr(e,7,ms));for(var r=t.length;r--;)Ai(e,t[r]);return e}));var Za=vs((function(object,t){return null==object?{}:function(object,t){return si(object,t,(function(t,path){return za(object,path)}))}(object,t)}));function Ka(object,t){if(null==object)return{};var e=qe(_s(object),(function(t){return[t]}));return t=Ms(t),si(object,e,(function(e,path){return t(e,path[0])}))}var $a=cs(Ga),Ja=cs(Wa);function Qa(object){return null==object?[]:fn(object,Ga(object))}var tl=$i((function(t,e,n){return e=e.toLowerCase(),t+(n?el(e):e)}));function el(t){return cl(Ia(t).toLowerCase())}function nl(t){return(t=Ia(t))&&t.replace(kt,gn).replace(fe,"")}var rl=$i((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),il=$i((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),sl=Ki("toLowerCase");var al=$i((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var ll=$i((function(t,e,n){return t+(n?" ":"")+cl(e)}));var hl=$i((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),cl=Ki("toUpperCase");function fl(t,pattern,e){return t=Ia(t),(pattern=e?l:pattern)===l?function(t){return ge.test(t)}(t)?function(t){return t.match(de)||[]}(t):function(t){return t.match(wt)||[]}(t):t.match(pattern)||[]}var pl=ci((function(t,e){try{return Be(t,l,e)}catch(t){return ha(t)?t:new yt(t)}})),ml=vs((function(object,t){return ze(t,(function(t){t=$s(t),yr(object,t,jo(object[t],object))})),object}));function gl(t){return function(){return t}}var vl=ts(),yl=ts(!0);function _l(t){return t}function bl(t){return Zr("function"==typeof t?t:wr(t,1))}var xl=ci((function(path,t){return function(object){return Gr(object,path,t)}})),wl=ci((function(object,t){return function(path){return Gr(object,path,t)}}));function Ml(object,source,t){var e=Ga(source),n=Or(source,e);null!=t||pa(source)&&(n.length||!e.length)||(t=source,source=object,object=this,n=Or(source,Ga(source)));var r=!(pa(t)&&"chain"in t&&!t.chain),o=ua(object);return ze(n,(function(t){var e=source[t];object[t]=e,o&&(object.prototype[t]=function(){var t=this.__chain__;if(r||t){var n=object(this.__wrapped__);return(n.__actions__=Gi(this.__actions__)).push({func:e,args:arguments,thisArg:object}),n.__chain__=t,n}return e.apply(object,Xe([this.value()],arguments))})})),object}function Sl(){}var El=is(qe),Al=is(je),Tl=is(Ke);function Cl(path){return Fs(path)?sn($s(path)):function(path){return function(object){return Nr(object,path)}}(path)}var Pl=os(),Rl=os(!0);function Il(){return[]}function kl(){return!1}var Dl=rs((function(t,e){return t+e}),0),Ll=hs("ceil"),Fl=rs((function(t,e){return t/e}),1),Ol=hs("floor");var source,Nl=rs((function(t,e){return t*e}),1),Bl=hs("round"),Ul=rs((function(t,e){return t-e}),0);return $n.after=function(t,e){if("function"!=typeof e)throw new zt(h);return t=Ta(t),function(){if(--t<1)return e.apply(this,arguments)}},$n.ary=zo,$n.assign=ka,$n.assignIn=Da,$n.assignInWith=La,$n.assignWith=Fa,$n.at=Oa,$n.before=Vo,$n.bind=jo,$n.bindAll=ml,$n.bindKey=Ho,$n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ra(t)?t:[t]},$n.chain=Ao,$n.chunk=function(t,e,n){e=(n?Ls(t,e,n):e===l)?1:on(Ta(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var h=0,c=0,f=r(Se(o/e));h<o;)f[c++]=yi(t,h,h+=e);return f},$n.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var l=t[e];l&&(o[r++]=l)}return o},$n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Xe(ra(n)?Gi(n):[n],Ir(e,1))},$n.cond=function(t){var e=null==t?0:t.length,n=Ms();return t=e?qe(t,(function(t){if("function"!=typeof t[1])throw new zt(h);return[n(t[0]),t[1]]})):[],ci((function(n){for(var r=-1;++r<e;){var o=t[r];if(Be(o[0],this,n))return Be(o[1],this,n)}}))},$n.conforms=function(source){return function(source){var t=Ga(source);return function(object){return Mr(object,source,t)}}(wr(source,1))},$n.constant=gl,$n.countBy=Po,$n.create=function(t,e){var n=Jn(t);return null==e?n:vr(n,e)},$n.curry=function t(e,n,r){var o=fs(e,8,l,l,l,l,l,n=r?l:n);return o.placeholder=t.placeholder,o},$n.curryRight=function t(e,n,r){var o=fs(e,d,l,l,l,l,l,n=r?l:n);return o.placeholder=t.placeholder,o},$n.debounce=Go,$n.defaults=Na,$n.defaultsDeep=Ba,$n.defer=Wo,$n.delay=qo,$n.difference=to,$n.differenceBy=eo,$n.differenceWith=no,$n.drop=function(t,e,n){var r=null==t?0:t.length;return r?yi(t,(e=n||e===l?1:Ta(e))<0?0:e,r):[]},$n.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?yi(t,0,(e=r-(e=n||e===l?1:Ta(e)))<0?0:e):[]},$n.dropRightWhile=function(t,e){return t&&t.length?Ci(t,Ms(e,3),!0,!0):[]},$n.dropWhile=function(t,e){return t&&t.length?Ci(t,Ms(e,3),!0):[]},$n.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Ls(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=Ta(n))<0&&(n=-n>o?0:o+n),(r=r===l||r>o?o:Ta(r))<0&&(r+=o),r=n>r?0:Ca(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},$n.filter=function(t,e){return(ra(t)?He:Rr)(t,Ms(e,3))},$n.flatMap=function(t,e){return Ir(map(t,e),1)},$n.flatMapDeep=function(t,e){return Ir(map(t,e),x)},$n.flatMapDepth=function(t,e,n){return n=n===l?1:Ta(n),Ir(map(t,e),n)},$n.flatten=so,$n.flattenDeep=function(t){return(null==t?0:t.length)?Ir(t,x):[]},$n.flattenDepth=function(t,e){return(null==t?0:t.length)?Ir(t,e=e===l?1:Ta(e)):[]},$n.flip=function(t){return fs(t,512)},$n.flow=vl,$n.flowRight=yl,$n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},$n.functions=function(object){return null==object?[]:Or(object,Ga(object))},$n.functionsIn=function(object){return null==object?[]:Or(object,Wa(object))},$n.groupBy=Lo,$n.initial=function(t){return(null==t?0:t.length)?yi(t,0,-1):[]},$n.intersection=oo,$n.intersectionBy=ao,$n.intersectionWith=lo,$n.invert=Va,$n.invertBy=ja,$n.invokeMap=Fo,$n.iteratee=bl,$n.keyBy=Oo,$n.keys=Ga,$n.keysIn=Wa,$n.map=map,$n.mapKeys=function(object,t){var e={};return t=Ms(t,3),Lr(object,(function(n,r,object){yr(e,t(n,r,object),n)})),e},$n.mapValues=function(object,t){var e={};return t=Ms(t,3),Lr(object,(function(n,r,object){yr(e,r,t(n,r,object))})),e},$n.matches=function(source){return ti(wr(source,1))},$n.matchesProperty=function(path,t){return ei(path,wr(t,1))},$n.memoize=Xo,$n.merge=qa,$n.mergeWith=Xa,$n.method=xl,$n.methodOf=wl,$n.mixin=Ml,$n.negate=Yo,$n.nthArg=function(t){return t=Ta(t),ci((function(e){return ri(e,t)}))},$n.omit=Ya,$n.omitBy=function(object,t){return Ka(object,Yo(Ms(t)))},$n.once=function(t){return Vo(2,t)},$n.orderBy=function(t,e,n,r){return null==t?[]:(ra(e)||(e=null==e?[]:[e]),ra(n=r?l:n)||(n=null==n?[]:[n]),ii(t,e,n))},$n.over=El,$n.overArgs=Zo,$n.overEvery=Al,$n.overSome=Tl,$n.partial=Ko,$n.partialRight=$o,$n.partition=No,$n.pick=Za,$n.pickBy=Ka,$n.property=Cl,$n.propertyOf=function(object){return function(path){return null==object?l:Nr(object,path)}},$n.pull=uo,$n.pullAll=co,$n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?oi(t,e,Ms(n,2)):t},$n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?oi(t,e,l,n):t},$n.pullAt=fo,$n.range=Pl,$n.rangeRight=Rl,$n.rearg=Jo,$n.reject=function(t,e){return(ra(t)?He:Rr)(t,Yo(Ms(e,3)))},$n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],l=t.length;for(e=Ms(e,3);++r<l;){var h=t[r];e(h,r,t)&&(n.push(h),o.push(r))}return ai(t,o),n},$n.rest=function(t,e){if("function"!=typeof t)throw new zt(h);return ci(t,e=e===l?e:Ta(e))},$n.reverse=po,$n.sampleSize=function(t,e,n){return e=(n?Ls(t,e,n):e===l)?1:Ta(e),(ra(t)?cr:pi)(t,e)},$n.set=function(object,path,t){return null==object?object:di(object,path,t)},$n.setWith=function(object,path,t,e){return e="function"==typeof e?e:l,null==object?object:di(object,path,t,e)},$n.shuffle=function(t){return(ra(t)?fr:vi)(t)},$n.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ls(t,e,n)?(e=0,n=r):(e=null==e?0:Ta(e),n=n===l?r:Ta(n)),yi(t,e,n)):[]},$n.sortBy=Bo,$n.sortedUniq=function(t){return t&&t.length?wi(t):[]},$n.sortedUniqBy=function(t,e){return t&&t.length?wi(t,Ms(e,2)):[]},$n.split=function(t,e,n){return n&&"number"!=typeof n&&Ls(t,e,n)&&(e=n=l),(n=n===l?S:n>>>0)?(t=Ia(t))&&("string"==typeof e||null!=e&&!ya(e))&&!(e=Si(e))&&_n(t)?Oi(An(t),0,n):t.split(e,n):[]},$n.spread=function(t,e){if("function"!=typeof t)throw new zt(h);return e=null==e?0:on(Ta(e),0),ci((function(n){var r=n[e],o=Oi(n,0,e);return r&&Xe(o,r),Be(t,this,o)}))},$n.tail=function(t){var e=null==t?0:t.length;return e?yi(t,1,e):[]},$n.take=function(t,e,n){return t&&t.length?yi(t,0,(e=n||e===l?1:Ta(e))<0?0:e):[]},$n.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?yi(t,(e=r-(e=n||e===l?1:Ta(e)))<0?0:e,r):[]},$n.takeRightWhile=function(t,e){return t&&t.length?Ci(t,Ms(e,3),!1,!0):[]},$n.takeWhile=function(t,e){return t&&t.length?Ci(t,Ms(e,3)):[]},$n.tap=function(t,e){return e(t),t},$n.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new zt(h);return pa(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Go(t,e,{leading:r,maxWait:e,trailing:o})},$n.thru=To,$n.toArray=Ea,$n.toPairs=$a,$n.toPairsIn=Ja,$n.toPath=function(t){return ra(t)?qe(t,$s):xa(t)?[t]:Gi(Ks(Ia(t)))},$n.toPlainObject=Ra,$n.transform=function(object,t,e){var n=ra(object),r=n||aa(object)||wa(object);if(t=Ms(t,4),null==e){var o=object&&object.constructor;e=r?n?new o:[]:pa(object)&&ua(o)?Jn(re(object)):{}}return(r?ze:Lr)(object,(function(n,r,object){return t(e,n,r,object)})),e},$n.unary=function(t){return zo(t,1)},$n.union=mo,$n.unionBy=go,$n.unionWith=vo,$n.uniq=function(t){return t&&t.length?Ei(t):[]},$n.uniqBy=function(t,e){return t&&t.length?Ei(t,Ms(e,2)):[]},$n.uniqWith=function(t,e){return e="function"==typeof e?e:l,t&&t.length?Ei(t,l,e):[]},$n.unset=function(object,path){return null==object||Ai(object,path)},$n.unzip=yo,$n.unzipWith=_o,$n.update=function(object,path,t){return null==object?object:Ti(object,path,Di(t))},$n.updateWith=function(object,path,t,e){return e="function"==typeof e?e:l,null==object?object:Ti(object,path,Di(t),e)},$n.values=Qa,$n.valuesIn=function(object){return null==object?[]:fn(object,Wa(object))},$n.without=bo,$n.words=fl,$n.wrap=function(t,e){return Ko(Di(e),t)},$n.xor=xo,$n.xorBy=wo,$n.xorWith=Mo,$n.zip=So,$n.zipObject=function(t,e){return Ii(t||[],e||[],dr)},$n.zipObjectDeep=function(t,e){return Ii(t||[],e||[],di)},$n.zipWith=Eo,$n.entries=$a,$n.entriesIn=Ja,$n.extend=Da,$n.extendWith=La,Ml($n,$n),$n.add=Dl,$n.attempt=pl,$n.camelCase=tl,$n.capitalize=el,$n.ceil=Ll,$n.clamp=function(t,e,n){return n===l&&(n=e,e=l),n!==l&&(n=(n=Pa(n))==n?n:0),e!==l&&(e=(e=Pa(e))==e?e:0),xr(Pa(t),e,n)},$n.clone=function(t){return wr(t,4)},$n.cloneDeep=function(t){return wr(t,5)},$n.cloneDeepWith=function(t,e){return wr(t,5,e="function"==typeof e?e:l)},$n.cloneWith=function(t,e){return wr(t,4,e="function"==typeof e?e:l)},$n.conformsTo=function(object,source){return null==source||Mr(object,source,Ga(source))},$n.deburr=nl,$n.defaultTo=function(t,e){return null==t||t!=t?e:t},$n.divide=Fl,$n.endsWith=function(t,e,n){t=Ia(t),e=Si(e);var r=t.length,o=n=n===l?r:xr(Ta(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},$n.eq=Qo,$n.escape=function(t){return(t=Ia(t))&&at.test(t)?t.replace(st,vn):t},$n.escapeRegExp=function(t){return(t=Ia(t))&&gt.test(t)?t.replace(mt,"\\$&"):t},$n.every=function(t,e,n){var r=ra(t)?je:Cr;return n&&Ls(t,e,n)&&(e=l),r(t,Ms(e,3))},$n.find=Ro,$n.findIndex=ro,$n.findKey=function(object,t){return Je(object,Ms(t,3),Lr)},$n.findLast=Io,$n.findLastIndex=io,$n.findLastKey=function(object,t){return Je(object,Ms(t,3),Fr)},$n.floor=Ol,$n.forEach=ko,$n.forEachRight=Do,$n.forIn=function(object,t){return null==object?object:kr(object,Ms(t,3),Wa)},$n.forInRight=function(object,t){return null==object?object:Dr(object,Ms(t,3),Wa)},$n.forOwn=function(object,t){return object&&Lr(object,Ms(t,3))},$n.forOwnRight=function(object,t){return object&&Fr(object,Ms(t,3))},$n.get=Ua,$n.gt=ta,$n.gte=ea,$n.has=function(object,path){return null!=object&&Rs(object,path,Vr)},$n.hasIn=za,$n.head=head,$n.identity=_l,$n.includes=function(t,e,n,r){t=sa(t)?t:Qa(t),n=n&&!r?Ta(n):0;var o=t.length;return n<0&&(n=on(o+n,0)),ba(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&tn(t,e,n)>-1},$n.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:Ta(n);return o<0&&(o=on(r+o,0)),tn(t,e,o)},$n.inRange=function(t,e,n){return e=Aa(e),n===l?(n=e,e=0):n=Aa(n),function(t,e,n){return t>=Rn(e,n)&&t<on(e,n)}(t=Pa(t),e,n)},$n.invoke=Ha,$n.isArguments=na,$n.isArray=ra,$n.isArrayBuffer=ia,$n.isArrayLike=sa,$n.isArrayLikeObject=oa,$n.isBoolean=function(t){return!0===t||!1===t||da(t)&&Ur(t)==C},$n.isBuffer=aa,$n.isDate=la,$n.isElement=function(t){return da(t)&&1===t.nodeType&&!va(t)},$n.isEmpty=function(t){if(null==t)return!0;if(sa(t)&&(ra(t)||"string"==typeof t||"function"==typeof t.splice||aa(t)||wa(t)||na(t)))return!t.length;var e=Ps(t);if(e==D||e==B)return!t.size;if(Bs(t))return!Kr(t).length;for(var n in t)if(qt.call(t,n))return!1;return!0},$n.isEqual=function(t,e){return qr(t,e)},$n.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:l)?n(t,e):l;return r===l?qr(t,e,l,n):!!r},$n.isError=ha,$n.isFinite=function(t){return"number"==typeof t&&Re(t)},$n.isFunction=ua,$n.isInteger=ca,$n.isLength=fa,$n.isMap=ma,$n.isMatch=function(object,source){return object===source||Xr(object,source,Es(source))},$n.isMatchWith=function(object,source,t){return t="function"==typeof t?t:l,Xr(object,source,Es(source),t)},$n.isNaN=function(t){return ga(t)&&t!=+t},$n.isNative=function(t){if(Ns(t))throw new yt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Yr(t)},$n.isNil=function(t){return null==t},$n.isNull=function(t){return null===t},$n.isNumber=ga,$n.isObject=pa,$n.isObjectLike=da,$n.isPlainObject=va,$n.isRegExp=ya,$n.isSafeInteger=function(t){return ca(t)&&t>=-9007199254740991&&t<=w},$n.isSet=_a,$n.isString=ba,$n.isSymbol=xa,$n.isTypedArray=wa,$n.isUndefined=function(t){return t===l},$n.isWeakMap=function(t){return da(t)&&Ps(t)==V},$n.isWeakSet=function(t){return da(t)&&"[object WeakSet]"==Ur(t)},$n.join=function(t,e){return null==t?"":Ie.call(t,e)},$n.kebabCase=rl,$n.last=ho,$n.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==l&&(o=(o=Ta(n))<0?on(r+o,0):Rn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Qe(t,nn,o,!0)},$n.lowerCase=il,$n.lowerFirst=sl,$n.lt=Ma,$n.lte=Sa,$n.max=function(t){return t&&t.length?Pr(t,_l,zr):l},$n.maxBy=function(t,e){return t&&t.length?Pr(t,Ms(e,2),zr):l},$n.mean=function(t){return rn(t,_l)},$n.meanBy=function(t,e){return rn(t,Ms(e,2))},$n.min=function(t){return t&&t.length?Pr(t,_l,Jr):l},$n.minBy=function(t,e){return t&&t.length?Pr(t,Ms(e,2),Jr):l},$n.stubArray=Il,$n.stubFalse=kl,$n.stubObject=function(){return{}},$n.stubString=function(){return""},$n.stubTrue=function(){return!0},$n.multiply=Nl,$n.nth=function(t,e){return t&&t.length?ri(t,Ta(e)):l},$n.noConflict=function(){return Ae._===this&&(Ae._=$t),this},$n.noop=Sl,$n.now=Uo,$n.pad=function(t,e,n){t=Ia(t);var r=(e=Ta(e))?En(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return ss(Ee(o),n)+t+ss(Se(o),n)},$n.padEnd=function(t,e,n){t=Ia(t);var r=(e=Ta(e))?En(t):0;return e&&r<e?t+ss(e-r,n):t},$n.padStart=function(t,e,n){t=Ia(t);var r=(e=Ta(e))?En(t):0;return e&&r<e?ss(e-r,n)+t:t},$n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),kn(Ia(t).replace(vt,""),e||0)},$n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ls(t,e,n)&&(e=n=l),n===l&&("boolean"==typeof e?(n=e,e=l):"boolean"==typeof t&&(n=t,t=l)),t===l&&e===l?(t=0,e=1):(t=Aa(t),e===l?(e=t,t=0):e=Aa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=Dn();return Rn(t+o*(e-t+we("1e-"+((o+"").length-1))),e)}return hi(t,e)},$n.reduce=function(t,e,n){var r=ra(t)?Ye:an,o=arguments.length<3;return r(t,Ms(e,4),n,o,Ar)},$n.reduceRight=function(t,e,n){var r=ra(t)?Ze:an,o=arguments.length<3;return r(t,Ms(e,4),n,o,Tr)},$n.repeat=function(t,e,n){return e=(n?Ls(t,e,n):e===l)?1:Ta(e),ui(Ia(t),e)},$n.replace=function(){var t=arguments,e=Ia(t[0]);return t.length<3?e:e.replace(t[1],t[2])},$n.result=function(object,path,t){var e=-1,n=(path=Li(path,object)).length;for(n||(n=1,object=l);++e<n;){var r=null==object?l:object[$s(path[e])];r===l&&(e=n,r=t),object=ua(r)?r.call(object):r}return object},$n.round=Bl,$n.runInContext=t,$n.sample=function(t){return(ra(t)?ur:fi)(t)},$n.size=function(t){if(null==t)return 0;if(sa(t))return ba(t)?En(t):t.length;var e=Ps(t);return e==D||e==B?t.size:Kr(t).length},$n.snakeCase=al,$n.some=function(t,e,n){var r=ra(t)?Ke:_i;return n&&Ls(t,e,n)&&(e=l),r(t,Ms(e,3))},$n.sortedIndex=function(t,e){return bi(t,e)},$n.sortedIndexBy=function(t,e,n){return xi(t,e,Ms(n,2))},$n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=bi(t,e);if(r<n&&Qo(t[r],e))return r}return-1},$n.sortedLastIndex=function(t,e){return bi(t,e,!0)},$n.sortedLastIndexBy=function(t,e,n){return xi(t,e,Ms(n,2),!0)},$n.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=bi(t,e,!0)-1;if(Qo(t[n],e))return n}return-1},$n.startCase=ll,$n.startsWith=function(t,e,n){return t=Ia(t),n=null==n?0:xr(Ta(n),0,t.length),e=Si(e),t.slice(n,n+e.length)==e},$n.subtract=Ul,$n.sum=function(t){return t&&t.length?ln(t,_l):0},$n.sumBy=function(t,e){return t&&t.length?ln(t,Ms(e,2)):0},$n.template=function(t,e,n){var r=$n.templateSettings;n&&Ls(t,e,n)&&(e=l),t=Ia(t),e=La({},e,r,ps);var o,h,c=La({},e.imports,r.imports,ps),f=Ga(c),d=fn(c,f),m=0,v=e.interpolate||Dt,source="__p += '",y=Bt((e.escape||Dt).source+"|"+v.source+"|"+(v===ut?Et:Dt).source+"|"+(e.evaluate||Dt).source+"|$","g"),_="//# sourceURL="+(qt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ye+"]")+"\n";t.replace(y,(function(e,n,r,l,c,f){return r||(r=l),source+=t.slice(m,f).replace(Lt,yn),n&&(o=!0,source+="' +\n__e("+n+") +\n'"),c&&(h=!0,source+="';\n"+c+";\n__p += '"),r&&(source+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),m=f+e.length,e})),source+="';\n";var x=qt.call(e,"variable")&&e.variable;if(x){if(Mt.test(x))throw new yt("Invalid `variable` option passed into `_.template`")}else source="with (obj) {\n"+source+"\n}\n";source=(h?source.replace(tt,""):source).replace(et,"$1").replace(nt,"$1;"),source="function("+(x||"obj")+") {\n"+(x?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var w=pl((function(){return Ft(f,_+"return "+source).apply(l,d)}));if(w.source=source,ha(w))throw w;return w},$n.times=function(t,e){if((t=Ta(t))<1||t>w)return[];var n=S,r=Rn(t,S);e=Ms(e),t-=S;for(var o=hn(r,e);++n<t;)e(n);return o},$n.toFinite=Aa,$n.toInteger=Ta,$n.toLength=Ca,$n.toLower=function(t){return Ia(t).toLowerCase()},$n.toNumber=Pa,$n.toSafeInteger=function(t){return t?xr(Ta(t),-9007199254740991,w):0===t?t:0},$n.toString=Ia,$n.toUpper=function(t){return Ia(t).toUpperCase()},$n.trim=function(t,e,n){if((t=Ia(t))&&(n||e===l))return un(t);if(!t||!(e=Si(e)))return t;var r=An(t),o=An(e);return Oi(r,dn(r,o),mn(r,o)+1).join("")},$n.trimEnd=function(t,e,n){if((t=Ia(t))&&(n||e===l))return t.slice(0,Tn(t)+1);if(!t||!(e=Si(e)))return t;var r=An(t);return Oi(r,0,mn(r,An(e))+1).join("")},$n.trimStart=function(t,e,n){if((t=Ia(t))&&(n||e===l))return t.replace(vt,"");if(!t||!(e=Si(e)))return t;var r=An(t);return Oi(r,dn(r,An(e))).join("")},$n.truncate=function(t,e){var n=30,r="...";if(pa(e)){var o="separator"in e?e.separator:o;n="length"in e?Ta(e.length):n,r="omission"in e?Si(e.omission):r}var h=(t=Ia(t)).length;if(_n(t)){var c=An(t);h=c.length}if(n>=h)return t;var f=n-En(r);if(f<1)return r;var d=c?Oi(c,0,f).join(""):t.slice(0,f);if(o===l)return d+r;if(c&&(f+=d.length-f),ya(o)){if(t.slice(f).search(o)){var m,v=d;for(o.global||(o=Bt(o.source,Ia(At.exec(o))+"g")),o.lastIndex=0;m=o.exec(v);)var y=m.index;d=d.slice(0,y===l?f:y)}}else if(t.indexOf(Si(o),f)!=f){var _=d.lastIndexOf(o);_>-1&&(d=d.slice(0,_))}return d+r},$n.unescape=function(t){return(t=Ia(t))&&ot.test(t)?t.replace(it,Cn):t},$n.uniqueId=function(t){var e=++Xt;return Ia(t)+e},$n.upperCase=hl,$n.upperFirst=cl,$n.each=ko,$n.eachRight=Do,$n.first=head,Ml($n,(source={},Lr($n,(function(t,e){qt.call($n.prototype,e)||(source[e]=t)})),source),{chain:!1}),$n.VERSION="4.17.21",ze(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){$n[t].placeholder=$n})),ze(["drop","take"],(function(t,e){nr.prototype[t]=function(n){n=n===l?1:on(Ta(n),0);var r=this.__filtered__&&!e?new nr(this):this.clone();return r.__filtered__?r.__takeCount__=Rn(n,r.__takeCount__):r.__views__.push({size:Rn(n,S),type:t+(r.__dir__<0?"Right":"")}),r},nr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ze(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;nr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ms(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ze(["head","last"],(function(t,e){var n="take"+(e?"Right":"");nr.prototype[t]=function(){return this[n](1).value()[0]}})),ze(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");nr.prototype[t]=function(){return this.__filtered__?new nr(this):this[n](1)}})),nr.prototype.compact=function(){return this.filter(_l)},nr.prototype.find=function(t){return this.filter(t).head()},nr.prototype.findLast=function(t){return this.reverse().find(t)},nr.prototype.invokeMap=ci((function(path,t){return"function"==typeof path?new nr(this):this.map((function(e){return Gr(e,path,t)}))})),nr.prototype.reject=function(t){return this.filter(Yo(Ms(t)))},nr.prototype.slice=function(t,e){t=Ta(t);var n=this;return n.__filtered__&&(t>0||e<0)?new nr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==l&&(n=(e=Ta(e))<0?n.dropRight(-e):n.take(e-t)),n)},nr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},nr.prototype.toArray=function(){return this.take(S)},Lr(nr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=$n[r?"take"+("last"==e?"Right":""):e],h=r||/^find/.test(e);o&&($n.prototype[e]=function(){var e=this.__wrapped__,c=r?[1]:arguments,f=e instanceof nr,d=c[0],m=f||ra(e),v=function(t){var e=o.apply($n,Xe([t],c));return r&&y?e[0]:e};m&&n&&"function"==typeof d&&1!=d.length&&(f=m=!1);var y=this.__chain__,_=!!this.__actions__.length,x=h&&!y,w=f&&!_;if(!h&&m){e=w?e:new nr(this);var M=t.apply(e,c);return M.__actions__.push({func:To,args:[v],thisArg:l}),new er(M,y)}return x&&w?t.apply(this,c):(M=this.thru(v),x?r?M.value()[0]:M.value():M)})})),ze(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Vt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);$n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(ra(o)?o:[],t)}return this[n]((function(n){return e.apply(ra(n)?n:[],t)}))}})),Lr(nr.prototype,(function(t,e){var n=$n[e];if(n){var r=n.name+"";qt.call(jn,r)||(jn[r]=[]),jn[r].push({name:e,func:n})}})),jn[es(l,2).name]=[{name:"wrapper",func:l}],nr.prototype.clone=function(){var t=new nr(this.__wrapped__);return t.__actions__=Gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Gi(this.__views__),t},nr.prototype.reverse=function(){if(this.__filtered__){var t=new nr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},nr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ra(t),r=e<0,o=n?t.length:0,view=function(t,e,n){var r=-1,o=n.length;for(;++r<o;){var data=n[r],l=data.size;switch(data.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=Rn(e,t+l);break;case"takeRight":t=on(t,e-l)}}return{start:t,end:e}}(0,o,this.__views__),l=view.start,h=view.end,c=h-l,f=r?h:l-1,d=this.__iteratees__,m=d.length,v=0,y=Rn(c,this.__takeCount__);if(!n||!r&&o==c&&y==c)return Pi(t,this.__actions__);var _=[];t:for(;c--&&v<y;){for(var x=-1,w=t[f+=e];++x<m;){var data=d[x],M=data.iteratee,S=data.type,E=M(w);if(2==S)w=E;else if(!E){if(1==S)continue t;break t}}_[v++]=w}return _},$n.prototype.at=Co,$n.prototype.chain=function(){return Ao(this)},$n.prototype.commit=function(){return new er(this.value(),this.__chain__)},$n.prototype.next=function(){this.__values__===l&&(this.__values__=Ea(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?l:this.__values__[this.__index__++]}},$n.prototype.plant=function(t){for(var e,n=this;n instanceof Qn;){var r=Qs(n);r.__index__=0,r.__values__=l,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},$n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof nr){var e=t;return this.__actions__.length&&(e=new nr(this)),(e=e.reverse()).__actions__.push({func:To,args:[po],thisArg:l}),new er(e,this.__chain__)}return this.thru(po)},$n.prototype.toJSON=$n.prototype.valueOf=$n.prototype.value=function(){return Pi(this.__wrapped__,this.__actions__)},$n.prototype.first=$n.prototype.head,le&&($n.prototype[le]=function(){return this}),$n}();Ae._=Pn,(o=function(){return Pn}.call(e,n,e,r))===l||(r.exports=o)}).call(this)}).call(this,n(149),n(309)(t))},262:function(t,e,n){"use strict";(function(t){var r=n(3643),o=n(3644),l=n(1371);function h(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(h()<e)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=f.prototype:(null===t&&(t=new f(e)),t.length=e),t}function f(t,e,n){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return v(this,t)}return d(this,t,e,n)}function d(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);f.TYPED_ARRAY_SUPPORT?(t=e).__proto__=f.prototype:t=y(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|x(e,n);t=c(t,r);var o=t.write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(f.isBuffer(e)){var n=0|_(e.length);return 0===(t=c(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?c(t,0):y(t,e);if("Buffer"===e.type&&l(e.data))return y(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function v(t,e){if(m(e),t=c(t,e<0?0:0|_(e)),!f.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function y(t,e){var n=e.length<0?0:0|_(e.length);t=c(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function _(t){if(t>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|t}function x(t,e){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(r)return Z(t).length;e=(""+e).toLowerCase(),r=!0}}function w(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return D(this,e,n);case"ascii":return F(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function M(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function S(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=f.from(e,r)),f.isBuffer(e))return 0===e.length?-1:E(t,e,n,r,o);if("number"==typeof e)return e&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):E(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,r,o){var i,l=1,h=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;l=2,h/=2,c/=2,n/=2}function f(t,i){return 1===l?t[i]:t.readUInt16BE(i*l)}if(o){var d=-1;for(i=n;i<h;i++)if(f(t,i)===f(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===c)return d*l}else-1!==d&&(i-=i-d),d=-1}else for(n+c>h&&(n=h-c),i=n;i>=0;i--){for(var m=!0,v=0;v<c;v++)if(f(t,i+v)!==f(e,v)){m=!1;break}if(m)return i}return-1}function A(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var l=e.length;if(l%2!=0)throw new TypeError("Invalid hex string");r>l/2&&(r=l/2);for(var i=0;i<r;++i){var h=parseInt(e.substr(2*i,2),16);if(isNaN(h))return i;t[n+i]=h}return i}function T(t,e,n,r){return $(Z(e,t.length-n),t,n,r)}function C(t,e,n,r){return $(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,n,r)}function P(t,e,n,r){return C(t,e,n,r)}function R(t,e,n,r){return $(K(e),t,n,r)}function I(t,e,n,r){return $(function(t,e){for(var n,r,o,l=[],i=0;i<t.length&&!((e-=2)<0);++i)r=(n=t.charCodeAt(i))>>8,o=n%256,l.push(o),l.push(r);return l}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function D(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,l,h,c,f=t[i],d=null,m=f>239?4:f>223?3:f>191?2:1;if(i+m<=n)switch(m){case 1:f<128&&(d=f);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&f)<<6|63&o)>127&&(d=c);break;case 3:o=t[i+1],l=t[i+2],128==(192&o)&&128==(192&l)&&(c=(15&f)<<12|(63&o)<<6|63&l)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:o=t[i+1],l=t[i+2],h=t[i+3],128==(192&o)&&128==(192&l)&&128==(192&h)&&(c=(15&f)<<18|(63&o)<<12|(63&l)<<6|63&h)>65535&&c<1114112&&(d=c)}null===d?(d=65533,m=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=m}return function(t){var e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=L));return n}(r)}e.Buffer=f,e.SlowBuffer=function(t){+t!=t&&(t=0);return f.alloc(+t)},e.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=h(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,e,n){return d(null,t,e,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,e,n){return function(t,e,n,r){return m(e),e<=0?c(t,e):void 0!==n?"string"==typeof r?c(t,e).fill(n,r):c(t,e).fill(n):c(t,e)}(null,t,e,n)},f.allocUnsafe=function(t){return v(null,t)},f.allocUnsafeSlow=function(t){return v(null,t)},f.isBuffer=function(b){return!(null==b||!b._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,n=Math.min(t,e);i<n;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!l(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=f.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},f.byteLength=x,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)M(this,i,i+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)M(this,i,i+3),M(this,i+1,i+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)M(this,i,i+7),M(this,i+1,i+6),M(this,i+2,i+5),M(this,i+3,i+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):w.apply(this,arguments)},f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===f.compare(this,b)},f.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,e,n,r,o){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var l=(o>>>=0)-(r>>>=0),h=(n>>>=0)-(e>>>=0),c=Math.min(l,h),d=this.slice(r,o),m=t.slice(e,n),i=0;i<c;++i)if(d[i]!==m[i]){l=d[i],h=m[i];break}return l<h?-1:h<l?1:0},f.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},f.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},f.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},f.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var l=!1;;)switch(r){case"hex":return A(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return P(this,t,e,n);case"base64":return R(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=Y(t[i]);return o}function B(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,o,l){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<l)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function V(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function H(t,e,n,r,o,l){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(t,e,n,r,l){return l||H(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function W(t,e,n,r,l){return l||H(t,0,n,8),o.write(t,e,n,r,52,8),n+8}f.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),f.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=f.prototype;else{var o=e-t;n=new f(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},f.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},f.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},f.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},f.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},f.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},f.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},f.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},f.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},f.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},f.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},f.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var i=0,l=1,sub=0;for(this[e]=255&t;++i<n&&(l*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/l|0)-sub&255;return e+n},f.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var i=n-1,l=1,sub=0;for(this[e+i]=255&t;--i>=0&&(l*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/l|0)-sub&255;return e+n},f.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},f.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},f.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},f.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},f.prototype.writeFloatLE=function(t,e,n){return G(this,t,e,!0,n)},f.prototype.writeFloatBE=function(t,e,n){return G(this,t,e,!1,n)},f.prototype.writeDoubleLE=function(t,e,n){return W(this,t,e,!0,n)},f.prototype.writeDoubleBE=function(t,e,n){return W(this,t,e,!1,n)},f.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},f.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=f.isBuffer(t)?t:Z(new f(t,r).toString()),l=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%l]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function Z(t,e){var n;e=e||1/0;for(var r=t.length,o=null,l=[],i=0;i<r;++i){if((n=t.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&l.push(239,191,189);continue}if(i+1===r){(e-=3)>-1&&l.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&l.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;l.push(n)}else if(n<2048){if((e-=2)<0)break;l.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;l.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return l}function K(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(149))},263:function(t,e,n){var r=n(3966),o=n(3976),l=n(543),h=n(312),c=n(3984);t.exports=function(t){return"function"==typeof t?t:null==t?l:"object"==typeof t?h(t)?o(t[0],t[1]):r(t):c(t)}},287:function(t,e,n){var r=n(1333),o="object"==typeof self&&self&&self.Object===Object&&self,l=r||o||Function("return this")();t.exports=l},3097:function(t,e,n){"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u={},a=function t(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:t,headers:{keys:function(){return o},entries:function(){return o.map((function(t){return[t,s.getResponseHeader(t)]}))},get:function(t){return s.getResponseHeader(t)},has:function(t){return null!=s.getResponseHeader(t)}}}};for(var i in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,(function(t,e){u[e]||o.push(u[e]=e)})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(i,e.headers[i]);s.send(e.body||null)}))}n.d(e,"a",(function(){return r}))},312:function(t,e){var n=Array.isArray;t.exports=n},3169:function(t,e,n){"use strict";function r(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(m(e)(["arraysArray","postParamsArray","stringsArray"])){if(0===e.length)return Promise.all(this.actions.map((function(e){var n=e.message;return t.postMessage(n)})));if(e.every((function(t){return"string"==typeof t})))return Promise.all(e.map((function(e){return t.postMessage(e)})));if(e.every((function(t){return"object"===(void 0===t?"undefined":o(t))&&!Array.isArray(t)})))return Promise.all(e.map((function(e){var n=e.message,r=e.args;return t.postMessage(n,r)})));if(e.every((function(t){return Array.isArray(t)}))&&e.length===this.actions.length)return Promise.all(e.map((function(e,n){return t.postMessage(t.actions[n].message,e)})))}return console.error(v(w(e))),null}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t){return function(e){return!!e&&!Array.isArray(e)&&t.every((function(t){return e.hasOwnProperty(t)}))}},h=function(t){return l(["message","func"])(t)&&"function"==typeof t.func&&"string"==typeof t.message},c=function(t){return l(["message","args"])(t)&&Array.isArray(t.args)&&"string"==typeof t.message},f={actionsArray:function(t){return function(t){return t.every(h)}(t)},arraysArray:function(t){return t.every((function(t){return Array.isArray(t)}))},objectsArray:function(t){return function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.every(l(e))}}(t)()},postParamsArray:function(t){return function(t){return t.every(c)}(t)},stringsArray:function(t){return t.every((function(t){return"string"==typeof t}))}},d=function(t){return function(e){return"null"===e?null===t:"undefined"===e?void 0===t:"action"===e?h(t):Array.isArray(t)?!("array"!==e&&!f[e])&&("array"===e||f[e](t)):!!t&&(void 0===t?"undefined":o(t))===e.toString()}},m=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Array.isArray(e)?e.some((function(e){return d(t)(e)})):!!d(t)(e)}},v=function(t){var e=t.expected,n=void 0===e?"":e,r=t.received,o=t.extraInfo,i=void 0===o?"":o;try{return new TypeError("You should provide "+n+"\n"+i+"\nReceived: "+JSON.stringify(r))}catch(t){if("Converting circular structure to JSON"===t.message)return new TypeError("You should provide "+n+"\n"+i+"\nReceived a circular structure: "+r);throw t}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1],n=m(t)("function"),r=m(e)(["array","undefined"]);return n&&r?function(t){var e=window.URL||window.webkitURL,n=new Blob([t],{type:"application/javascript"}),r=e.createObjectURL(n),o=new Worker(r);return o.post=function(t){return new Promise((function(n,i){o.onmessage=function(t){e.revokeObjectURL(r),n(t.data)},o.onerror=function(t){console.error("Error: Line "+t.lineno+" in "+t.filename+": "+t.message),i(t)},o.postMessage({message:t})}))},o}(function(t){return"\n  self.onmessage = event => {\n    const args = event.data.message.args\n    if (args) {\n      self.postMessage(("+t+").apply(null, args))\n      return close()\n    }\n    self.postMessage(("+t+")())\n    return close()\n  }\n"}(t)).post({args:e}):(n||console.error(v({expected:"a function",received:t})),r||console.error(v({expected:"an array",received:e})),null)},_=function(t){return console.warn("WARN! "+t+" is not a registered action for this worker"),t+" is not a registered action for this worker"},x=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1],r=m(e)("string"),o=m(n)(["array","undefined"]);if(r&&o){var i=t.filter((function(t){var n=t.message;return JSON.stringify(n)===JSON.stringify(e)})).map((function(t){return t.func})).pop();return i?n?y(i,n):y(i):y(_,[JSON.stringify(e)])}return r||console.error(v({expected:"a string",received:e})),o||console.error(v({expected:"an array",received:n})),null}},w=function(t){return{expected:"an array of arrays, an array of objects, or an array of strings",received:t,extraInfo:"If an array of arrays, it must have the same length as the actions registered for this worker.\nIf an array of objects, every object must containing two fields:\n* message\n* args"}},M=function(t){return function(e){return function(t){return function(e){return t.some((function(t){return t.message===e.message}))}}(t)(e)?(console.warn(function(t){return'WARN! An action with message "'+t.message+'" is already registered for this worker'}(e)),t.length):t.push(e)}},S=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m(e)(["action","actionsArray"])?Array.isArray(e)?e.reduce((function(t,e){return M(t)(e),t}),t).length:M(t)(e):(console.error(v(function(t){return{expected:"an array of actions or an action",received:t,extraInfo:"Every action should be an object containing two fields:\n* message\n* func"}}(e))),null)}},E=function(t){return function(e){var n=t.findIndex((function(t){return t.message===e}));return-1===n?console.warn('WARN! Impossible to unregister action with message "'+e+'".\nIt is not a registered action for this worker.'):t.splice(n,1),t}},A=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m(e)(["string","stringsArray"])?Array.isArray(e)?e.reduce((function(t,e){return E(t)(e),t}),t).length:E(t)(e).length:(console.error(v(function(t){return{expected:"an array of strings or a string",received:t}}(e))),null)}},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m(t)("actionsArray")?{actions:t,postMessage:x(t),postAll:r,register:S(t),unregister:A(t)}:(console.error(v(function(t){return{expected:"an array of objects",received:t,extraInfo:"Every action should be an object containing two fields:\n* message\n* func"}}(t))),null)},C=window.Worker?window.URL.createObjectURL||window.webkitURL.createObjectURL?{create:T,run:y}:(console.error("This browser does not have URL.createObjectURL method."),null):(console.error("This browser does not support Workers."),null);t.exports=C},3171:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var i,n,r=t.length;for(i=0;i<r;i+=1)for(var o in n=t[i].prototype)Object.prototype.hasOwnProperty.call(n,o)&&(e.prototype[o]=n[o])}function getDescriptor(object,t){return Object.getOwnPropertyDescriptor(object,t)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(audio){this.audios.push(audio)},pause:function(){var i,t=this.audios.length;for(i=0;i<t;i+=1)this.audios[i].pause()},resume:function(){var i,t=this.audios.length;for(i=0;i<t;i+=1)this.audios[i].resume()},setRate:function(t){var i,e=this.audios.length;for(i=0;i<e;i+=1)this.audios[i].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var i,t=this.audios.length;for(i=0;i<t;i+=1)this.audios[i].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(t,e){var n,i=0,r=[];switch(t){case"int16":case"uint8c":n=1;break;default:n=1.1}for(i=0;i<e;i+=1)r.push(n);return r}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,n){return"float32"===e?new Float32Array(n):"int16"===e?new Int16Array(n):"uint8c"===e?new Uint8ClampedArray(n):t(e,n)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var i,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e=t.length;for(i=0;i<e;i+=1)BMMath[t[i]]=Math[t[i]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===_typeof$6(t)&&t.length){var i,e=createSizedArray(t.length),n=t.length;for(i=0;i<n;i+=1)e[i]=Math.abs(t[i]);return e}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){_shouldRoundValues=!!t}function bmRnd(t){return _shouldRoundValues?Math.round(t):t}function styleDiv(element){element.style.position="absolute",element.style.top=0,element.style.left=0,element.style.display="block",element.style.transformOrigin="0 0",element.style.webkitTransformOrigin="0 0",element.style.backfaceVisibility="visible",element.style.webkitBackfaceVisibility="visible",element.style.transformStyle="preserve-3d",element.style.webkitTransformStyle="preserve-3d",element.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,n,r){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,n,r){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(t,s,e){var n,g,b,i,r,p,q,o;switch(p=e*(1-s),q=e*(1-(r=6*t-(i=Math.floor(6*t)))*s),o=e*(1-(1-r)*s),i%6){case 0:n=e,g=o,b=p;break;case 1:n=q,g=e,b=p;break;case 2:n=p,g=e,b=o;break;case 3:n=p,g=q,b=e;break;case 4:n=o,g=p,b=e;break;case 5:n=e,g=p,b=q}return[n,g,b]}function RGBtoHSV(t,g,b){var e,n=Math.max(t,g,b),r=Math.min(t,g,b),o=n-r,s=0===n?0:o/n,l=n/255;switch(n){case r:e=0;break;case t:e=g-b+o*(g<b?6:0),e/=6*o;break;case g:e=b-t+2*o,e/=6*o;break;case b:e=t-g+4*o,e/=6*o}return[e,s,l]}function addSaturationToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var i,t,e=[];for(i=0;i<256;i+=1)t=i.toString(16),e[i]=1===t.length?"0"+t:t;return function(t,g,b){return t<0&&(t=0),g<0&&(g=0),b<0&&(b=0),"#"+e[t]+e[g]+e[b]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(t)}var dataManager=function(){var t,e,n=1,r=[],o={onmessage:function(){},postMessage:function(path){t({data:path})}},l={postMessage:function(data){o.onmessage({data:data})}};function h(){e||(e=function(e){if(window.Worker&&window.Blob&&getWebWorker()){var n=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),r=URL.createObjectURL(n);return new Worker(r)}return t=e,o}((function(t){if(l.dataManager||(l.dataManager=function(){function t(o,l){var h,i,c,f,d,m,y=o.length;for(i=0;i<y;i+=1)if("ks"in(h=o[i])&&!h.completed){if(h.completed=!0,h.hasMask){var _=h.masksProperties;for(f=_.length,c=0;c<f;c+=1)if(_[c].pt.k.i)r(_[c].pt.k);else for(m=_[c].pt.k.length,d=0;d<m;d+=1)_[c].pt.k[d].s&&r(_[c].pt.k[d].s[0]),_[c].pt.k[d].e&&r(_[c].pt.k[d].e[0])}0===h.ty?(h.layers=e(h.refId,l),t(h.layers,l)):4===h.ty?n(h.shapes):5===h.ty&&v(h)}}function e(t,e){var n=function(t,e){for(var i=0,n=e.length;i<n;){if(e[i].id===t)return e[i];i+=1}return null}(t,e);return n?n.layers.__used?JSON.parse(JSON.stringify(n.layers)):(n.layers.__used=!0,n.layers):null}function n(t){var i,e,o;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)r(t[i].ks.k);else for(o=t[i].ks.k.length,e=0;e<o;e+=1)t[i].ks.k[e].s&&r(t[i].ks.k[e].s[0]),t[i].ks.k[e].e&&r(t[i].ks.k[e].e[0]);else"gr"===t[i].ty&&n(t[i].it)}function r(path){var i,t=path.i.length;for(i=0;i<t;i+=1)path.i[i][0]+=path.v[i][0],path.i[i][1]+=path.v[i][1],path.o[i][0]+=path.v[i][0],path.o[i][1]+=path.v[i][1]}function o(t,e){var n=e?e.split("."):[100,100,100];return t[0]>n[0]||!(n[0]>t[0])&&(t[1]>n[1]||!(n[1]>t[1])&&(t[2]>n[2]||!(n[2]>t[2])&&null))}var l,h=function(){var t=[4,4,14];function e(t){var i,e,n,r=t.length;for(i=0;i<r;i+=1)5===t[i].ty&&(n=void 0,n=(e=t[i]).t.d,e.t.d={k:[{s:n,t:0}]})}return function(n){if(o(t,n.v)&&(e(n.layers),n.assets)){var i,r=n.assets.length;for(i=0;i<r;i+=1)n.assets[i].layers&&e(n.assets[i].layers)}}}(),c=(l=[4,7,99],function(t){if(t.chars&&!o(l,t.v)){var i,e=t.chars.length;for(i=0;i<e;i+=1){var r=t.chars[i];r.data&&r.data.shapes&&(n(r.data.shapes),r.data.ip=0,r.data.op=99999,r.data.st=0,r.data.sr=1,r.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[i].t||(r.data.shapes.push({ty:"no"}),r.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),f=function(){var t=[5,7,15];function e(t){var i,e,n=t.length;for(i=0;i<n;i+=1)5===t[i].ty&&(e=void 0,"number"==typeof(e=t[i].t.p).a&&(e.a={a:0,k:e.a}),"number"==typeof e.p&&(e.p={a:0,k:e.p}),"number"==typeof e.r&&(e.r={a:0,k:e.r}))}return function(n){if(o(t,n.v)&&(e(n.layers),n.assets)){var i,r=n.assets.length;for(i=0;i<r;i+=1)n.assets[i].layers&&e(n.assets[i].layers)}}}(),d=function(){var t=[4,1,9];function e(t){var i,n,r,o=t.length;for(i=0;i<o;i+=1)if("gr"===t[i].ty)e(t[i].it);else if("fl"===t[i].ty||"st"===t[i].ty)if(t[i].c.k&&t[i].c.k[0].i)for(r=t[i].c.k.length,n=0;n<r;n+=1)t[i].c.k[n].s&&(t[i].c.k[n].s[0]/=255,t[i].c.k[n].s[1]/=255,t[i].c.k[n].s[2]/=255,t[i].c.k[n].s[3]/=255),t[i].c.k[n].e&&(t[i].c.k[n].e[0]/=255,t[i].c.k[n].e[1]/=255,t[i].c.k[n].e[2]/=255,t[i].c.k[n].e[3]/=255);else t[i].c.k[0]/=255,t[i].c.k[1]/=255,t[i].c.k[2]/=255,t[i].c.k[3]/=255}function n(t){var i,n=t.length;for(i=0;i<n;i+=1)4===t[i].ty&&e(t[i].shapes)}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var i,r=e.assets.length;for(i=0;i<r;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}(),m=function(){var t=[4,4,18];function e(t){var i,n,r;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(r=t[i].ks.k.length,n=0;n<r;n+=1)t[i].ks.k[n].s&&(t[i].ks.k[n].s[0].c=t[i].closed),t[i].ks.k[n].e&&(t[i].ks.k[n].e[0].c=t[i].closed);else"gr"===t[i].ty&&e(t[i].it)}function n(t){var n,i,r,o,l,h,c=t.length;for(i=0;i<c;i+=1){if((n=t[i]).hasMask){var f=n.masksProperties;for(o=f.length,r=0;r<o;r+=1)if(f[r].pt.k.i)f[r].pt.k.c=f[r].cl;else for(h=f[r].pt.k.length,l=0;l<h;l+=1)f[r].pt.k[l].s&&(f[r].pt.k[l].s[0].c=f[r].cl),f[r].pt.k[l].e&&(f[r].pt.k[l].e[0].c=f[r].cl)}4===n.ty&&e(n.shapes)}}return function(e){if(o(t,e.v)&&(n(e.layers),e.assets)){var i,r=e.assets.length;for(i=0;i<r;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}();function v(data){0===data.t.a.length&&data.t.p}var y={completeData:function(n){n.__complete||(d(n),h(n),c(n),f(n),m(n),t(n.layers,n.assets),function(n,r){if(n){var i=0,o=n.length;for(i=0;i<o;i+=1)1===n[i].t&&(n[i].data.layers=e(n[i].data.refId,r),t(n[i].data.layers,r))}}(n.chars,n.assets),n.__complete=!0)}};return y.checkColors=d,y.checkChars=c,y.checkPathProperties=f,y.checkShapes=m,y.completeLayers=t,y}()),l.assetLoader||(l.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===_typeof$5(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(path,e,n,r){var o,l=new XMLHttpRequest;try{l.responseType="json"}catch(t){}l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status)o=t(l),n(o);else try{o=t(l),n(o)}catch(t){r&&r(t)}};try{l.open(["G","E","T"].join(""),path,!0)}catch(t){l.open(["G","E","T"].join(""),e+"/"+path,!0)}l.send()}}}()),"loadAnimation"===t.data.type)l.assetLoader.load(t.data.path,t.data.fullPath,(function(data){l.dataManager.completeData(data),l.postMessage({id:t.data.id,payload:data,status:"success"})}),(function(){l.postMessage({id:t.data.id,status:"error"})}));else if("complete"===t.data.type){var e=t.data.animation;l.dataManager.completeData(e),l.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&l.assetLoader.load(t.data.path,t.data.fullPath,(function(data){l.postMessage({id:t.data.id,payload:data,status:"success"})}),(function(){l.postMessage({id:t.data.id,status:"error"})}))})),e.onmessage=function(t){var data=t.data,e=data.id,n=r[e];r[e]=null,"success"===data.status?n.onComplete(data.payload):n.onError&&n.onError()})}function c(t,e){var o="processId_"+(n+=1);return r[o]={onComplete:t,onError:e},o}return{loadAnimation:function(path,t,n){h();var r=c(t,n);e.postMessage({type:"loadAnimation",path:path,fullPath:window.location.origin+window.location.pathname,id:r})},loadData:function(path,t,n){h();var r=c(t,n);e.postMessage({type:"loadData",path:path,fullPath:window.location.origin+window.location.pathname,id:r})},completeAnimation:function(t,n,r){h();var o=c(n,r);e.postMessage({type:"complete",animation:t,id:o})}}}(),ImagePreloader=function(){var t=function(){var canvas=createTag("canvas");canvas.width=1,canvas.height=1;var t=canvas.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),canvas}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(t,e,n){var path="";if(t.e)path=t.p;else if(e){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),path=e+r}else path=n,path+=t.u?t.u:"",path+=t.p;return path}function o(img){var t=0,e=setInterval(function(){(img.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(e)),t+=1}.bind(this),50)}function l(data){var t={assetData:data},path=r(data,this.assetsPath,this.path);return dataManager.loadData(path,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function h(){this._imageLoaded=e.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=o.bind(this),this.createFootageData=l.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return h.prototype={loadAssets:function(t,e){var i;this.imagesLoadedCb=e;var n=t.length;for(i=0;i<n;i+=1)t[i].layers||(t[i].t&&"seq"!==t[i].t?3===t[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[i]))):(this.totalImages+=1,this.images.push(this._createImageData(t[i]))))},setAssetsPath:function(path){this.assetsPath=path||""},setPath:function(path){this.path=path||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var i=0,e=this.images.length;i<e;){if(this.images[i].assetData===t)return this.images[i].img;i+=1}return null},createImgData:function(e){var path=r(e,this.assetsPath,this.path),img=createTag("img");img.crossOrigin="anonymous",img.addEventListener("load",this._imageLoaded,!1),img.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),img.src=path;var n={img:img,assetData:e};return n},createImageData:function(e){var path=r(e,this.assetsPath,this.path),img=createNS("image");isSafari?this.testImageLoaded(img):img.addEventListener("load",this._imageLoaded,!1),img.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),img.setAttributeNS("http://www.w3.org/1999/xlink","href",path),this._elementHelper.append?this._elementHelper.append(img):this._elementHelper.appendChild(img);var n={img:img,assetData:e};return n},imageLoaded:e,footageLoaded:n,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},h}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var n=this._cbs[t],i=0;i<n.length;i+=1)n[i](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var markerParser=function(){function t(t){for(var line,e=t.split("\r\n"),n={},r=0,i=0;i<e.length;i+=1)2===(line=e[i].split(":")).length&&(n[line[0]]=line[1].trim(),r+=1);if(0===r)throw new Error;return n}return function(e){for(var n=[],i=0;i<e.length;i+=1){var r=e[i],o={time:r.tm,duration:r.dr};try{o.payload=JSON.parse(e[i].cm)}catch(n){try{o.payload=t(e[i].cm)}catch(t){o.payload={name:e[i].cm}}}n.push(o)}return n}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var i=0,e=this.compositions.length;i<e;){if(this.compositions[i].data&&this.compositions[i].data.nm===t)return this.compositions[i].prepareFrame&&this.compositions[i].data.xt&&this.compositions[i].prepareFrame(this.currentFrame),this.compositions[i].compInterface;i+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var n=getRenderer(e);this.renderer=new n(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(data){dataManager.completeAnimation(data,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==_typeof$4(e)&&(e=JSON.parse(e));var n={wrapper:t,animationData:e},r=t.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var o=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===o?n.loop=!1:"true"===o?n.loop=!0:""!==o&&(n.loop=parseInt(o,10));var l=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==l,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(data){data.op>this.animationData.op&&(this.animationData.op=data.op,this.totalFrames=Math.floor(data.op-this.animationData.ip));var i,t,e=this.animationData.layers,n=e.length,r=data.layers,o=r.length;for(t=0;t<o;t+=1)for(i=0;i<n;){if(e[i].id===r[t].id){e[i]=r[t];break}i+=1}if((data.chars||data.fonts)&&(this.renderer.globalData.fontManager.addChars(data.chars),this.renderer.globalData.fontManager.addFonts(data.fonts,this.renderer.globalData.defs)),data.assets)for(n=data.assets.length,i=0;i<n;i+=1)this.animationData.assets.push(data.assets[i]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(data){this.animationData=data;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var n="number"==typeof t?t:void 0,r="number"==typeof e?e:void 0;this.renderer.updateContainerSize(n,r)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var marker,i=0;i<this.markers.length;i+=1)if((marker=this.markers[i]).payload&&marker.payload.name===t)return marker;return null},AnimationItem.prototype.goToAndStop=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var marker=this.getMarkerData(t);marker&&this.goToAndStop(marker.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,n){if(!n||this.name===n){var r=Number(t);if(isNaN(r)){var marker=this.getMarkerData(t);marker&&(marker.duration?this.playSegments([marker.time,marker.time+marker.duration],!0):this.goToAndStop(marker.time,!0))}else this.goToAndStop(r,e,n);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===_typeof$4(t[0])){var i,n=t.length;for(i=0;i<n;i+=1)this.segments.push(t[i])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var path="";if(t.e)path=t.p;else if(this.assetsPath){var e=t.p;-1!==e.indexOf("images/")&&(e=e.split("/")[1]),path=this.assetsPath+e}else path=this.path,path+=t.u?t.u:"",path+=t.p;return path},AnimationItem.prototype.getAssetData=function(t){for(var i=0,e=this.assets.length;i<e;){if(t===this.assets[i].id)return this.assets[i];i+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(path,t,e){try{this.renderer.getElementByPath(path).updateDocumentData(t,e)}catch(t){}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],n=0,r=0,o=0,l=!0,h=!1;function c(t){for(var i=0,n=t.target;i<r;)e[i].animation===n&&(e.splice(i,1),i-=1,r-=1,n.isPaused||m()),i+=1}function f(element,t){if(!element)return null;for(var i=0;i<r;){if(e[i].elem===element&&null!==e[i].elem)return e[i].animation;i+=1}var n=new AnimationItem;return v(n,element),n.setData(element,t),n}function d(){o+=1,x()}function m(){o-=1}function v(t,element){t.addEventListener("destroy",c),t.addEventListener("_active",d),t.addEventListener("_idle",m),e.push({elem:element,animation:t}),r+=1}function y(t){var i,c=t-n;for(i=0;i<r;i+=1)e[i].animation.advanceTime(c);n=t,o&&!h?window.requestAnimationFrame(y):l=!0}function _(t){n=t,window.requestAnimationFrame(y)}function x(){!h&&o&&l&&(window.requestAnimationFrame(_),l=!1)}return t.registerAnimation=f,t.loadAnimation=function(t){var e=new AnimationItem;return v(e,null),e.setParams(t),e},t.setSpeed=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setSpeed(t,n)},t.setDirection=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setDirection(t,n)},t.play=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.play(t)},t.pause=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.pause(t)},t.stop=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.stop(t)},t.togglePause=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.togglePause(t)},t.searchAnimations=function(t,e,n){var i,r=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),o=r.length;for(i=0;i<o;i+=1)n&&r[i].setAttribute("data-bm-type",n),f(r[i],t);if(e&&0===o){n||(n="svg");var body=document.getElementsByTagName("body")[0];body.innerText="";var div=createTag("div");div.style.width="100%",div.style.height="100%",div.setAttribute("data-bm-type",n),body.appendChild(div),f(div,t)}},t.resize=function(){var i;for(i=0;i<r;i+=1)e[i].animation.resize()},t.goToAndStop=function(t,n,o){var i;for(i=0;i<r;i+=1)e[i].animation.goToAndStop(t,n,o)},t.destroy=function(t){var i;for(i=r-1;i>=0;i-=1)e[i].animation.destroy(t)},t.freeze=function(){h=!0},t.unfreeze=function(){h=!1,x()},t.setVolume=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setVolume(t,n)},t.mute=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.mute(t)},t.unmute=function(t){var i;for(i=0;i<r;i+=1)e[i].animation.unmute(t)},t.getRegisteredAnimations=function(){var i,t=e.length,n=[];for(i=0;i<t;i+=1)n.push(e[i].animation);return n},t}(),BezierFactory=function(){var t={getBezierEasing:function(a,b,t,n,r){var o=r||("bez_"+a+"_"+b+"_"+t+"_"+n).replace(/\./g,"p");if(e[o])return e[o];var l=new m([a,b,t,n]);return e[o]=l,l}},e={},n=11,r=1/(n-1),o="function"==typeof Float32Array;function l(t,e){return 1-3*e+3*t}function h(t,e){return 3*e-6*t}function c(t){return 3*t}function f(t,e,n){return((l(e,n)*t+h(e,n))*t+c(e))*t}function d(t,e,n){return 3*l(e,n)*t*t+2*h(e,n)*t+c(e)}function m(t){this._p=t,this._mSampleValues=o?new Float32Array(n):new Array(n),this._precomputed=!1,this.get=this.get.bind(this)}return m.prototype={get:function(t){var e=this._p[0],n=this._p[1],r=this._p[2],o=this._p[3];return this._precomputed||this._precompute(),e===n&&r===o?t:0===t?0:1===t?1:f(this._getTForX(t),n,o)},_precompute:function(){var t=this._p[0],e=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<n;++i)this._mSampleValues[i]=f(i*r,t,e)},_getTForX:function(t){for(var e=this._p[0],o=this._p[2],l=this._mSampleValues,h=0,c=1,m=n-1;c!==m&&l[c]<=t;++c)h+=r;var v=h+(t-l[--c])/(l[c+1]-l[c])*r,y=d(v,e,o);return y>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=d(e,n,r);if(0===o)return e;e-=(f(e,n,r)-t)/o}return e}(t,v,e,o):0===y?v:function(t,e,n,r,o){var l,h,i=0;do{(l=f(h=e+(n-e)/2,r,o)-t)>0?n=h:e=h}while(Math.abs(l)>1e-7&&++i<10);return h}(t,h,h+r,e,o)}},t}(),pooling={double:function(t){return t.concat(createSizedArray(t.length))}},poolFactory=function(t,e,n){var r=0,o=t,l=createSizedArray(o);return{newElement:function(){return r?l[r-=1]:e()},release:function(element){r===o&&(l=pooling.double(l),o*=2),n&&n(element),l[r]=element,r+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(element){var i,t=element.lengths.length;for(i=0;i<t;i+=1)bezierLengthPool.release(element.lengths[i]);element.lengths.length=0}));function bezFunction(){var t=Math;function e(t,e,n,r,o,l){var h=t*r+e*o+n*l-o*r-l*t-n*e;return h>-.001&&h<.001}var n=function(t,e,n,r){var o,i,l,h,c,f,d=getDefaultCurveSegments(),m=0,v=[],y=[],_=bezierLengthPool.newElement();for(l=n.length,o=0;o<d;o+=1){for(c=o/(d-1),f=0,i=0;i<l;i+=1)h=bmPow(1-c,3)*t[i]+3*bmPow(1-c,2)*c*n[i]+3*(1-c)*bmPow(c,2)*r[i]+bmPow(c,3)*e[i],v[i]=h,null!==y[i]&&(f+=bmPow(v[i]-y[i],2)),y[i]=v[i];f&&(m+=f=bmSqrt(f)),_.percents[o]=c,_.lengths[o]=m}return _.addedLength=m,_};function r(t){this.segmentLength=0,this.points=new Array(t)}function o(t,e){this.partialLength=t,this.point=e}var l,h=(l={},function(t,n,h,c){var f=(t[0]+"_"+t[1]+"_"+n[0]+"_"+n[1]+"_"+h[0]+"_"+h[1]+"_"+c[0]+"_"+c[1]).replace(/\./g,"p");if(!l[f]){var d,i,m,v,y,_,x,w=getDefaultCurveSegments(),M=0,S=null;2===t.length&&(t[0]!==n[0]||t[1]!==n[1])&&e(t[0],t[1],n[0],n[1],t[0]+h[0],t[1]+h[1])&&e(t[0],t[1],n[0],n[1],n[0]+c[0],n[1]+c[1])&&(w=2);var E=new r(w);for(m=h.length,d=0;d<w;d+=1){for(x=createSizedArray(m),y=d/(w-1),_=0,i=0;i<m;i+=1)v=bmPow(1-y,3)*t[i]+3*bmPow(1-y,2)*y*(t[i]+h[i])+3*(1-y)*bmPow(y,2)*(n[i]+c[i])+bmPow(y,3)*n[i],x[i]=v,null!==S&&(_+=bmPow(x[i]-S[i],2));M+=_=bmSqrt(_),E.points[d]=new o(_,x),S=x}E.segmentLength=M,l[f]=E}return l[f]});function c(t,e){var n=e.percents,r=e.lengths,o=n.length,l=bmFloor((o-1)*t),h=t*e.addedLength,c=0;if(l===o-1||0===l||h===r[l])return n[l];for(var f=r[l]>h?-1:1,d=!0;d;)if(r[l]<=h&&r[l+1]>h?(c=(h-r[l])/(r[l+1]-r[l]),d=!1):l+=f,l<0||l>=o-1){if(l===o-1)return n[l];d=!1}return n[l]+(n[l+1]-n[l])*c}var f=createTypedArray("float32",8);return{getSegmentsLength:function(t){var i,e=segmentsLengthPool.newElement(),r=t.c,o=t.v,l=t.o,h=t.i,c=t._length,f=e.lengths,d=0;for(i=0;i<c-1;i+=1)f[i]=n(o[i],o[i+1],l[i],h[i+1]),d+=f[i].addedLength;return r&&c&&(f[i]=n(o[i],o[0],l[i],h[0]),d+=f[i].addedLength),e.totalLength=d,e},getNewSegment:function(e,n,r,o,l,h,d){l<0?l=0:l>1&&(l=1);var i,m=c(l,d),v=c(h=h>1?1:h,d),y=e.length,_=1-m,x=1-v,w=_*_*_,M=m*_*_*3,S=m*m*_*3,E=m*m*m,A=_*_*x,T=m*_*x+_*m*x+_*_*v,C=m*m*x+_*m*v+m*_*v,P=m*m*v,R=_*x*x,I=m*x*x+_*v*x+_*x*v,k=m*v*x+_*v*v+m*x*v,D=m*v*v,L=x*x*x,F=v*x*x+x*v*x+x*x*v,O=v*v*x+x*v*v+v*x*v,N=v*v*v;for(i=0;i<y;i+=1)f[4*i]=t.round(1e3*(w*e[i]+M*r[i]+S*o[i]+E*n[i]))/1e3,f[4*i+1]=t.round(1e3*(A*e[i]+T*r[i]+C*o[i]+P*n[i]))/1e3,f[4*i+2]=t.round(1e3*(R*e[i]+I*r[i]+k*o[i]+D*n[i]))/1e3,f[4*i+3]=t.round(1e3*(L*e[i]+F*r[i]+O*o[i]+N*n[i]))/1e3;return f},getPointInSegment:function(e,n,r,o,l,h){var f=c(l,h),d=1-f;return[t.round(1e3*(d*d*d*e[0]+(f*d*d+d*f*d+d*d*f)*r[0]+(f*f*d+d*f*f+f*d*f)*o[0]+f*f*f*n[0]))/1e3,t.round(1e3*(d*d*d*e[1]+(f*d*d+d*f*d+d*d*f)*r[1]+(f*f*d+d*f*f+f*d*f)*o[1]+f*f*f*n[1]))/1e3]},buildBezierData:h,pointOnLine2D:e,pointOnLine3D:function(n,r,o,l,h,c,f,d,m){if(0===o&&0===c&&0===m)return e(n,r,l,h,f,d);var v,y=t.sqrt(t.pow(l-n,2)+t.pow(h-r,2)+t.pow(c-o,2)),_=t.sqrt(t.pow(f-n,2)+t.pow(d-r,2)+t.pow(m-o,2)),x=t.sqrt(t.pow(f-l,2)+t.pow(d-h,2)+t.pow(m-c,2));return(v=y>_?y>x?y-_-x:x-_-y:x>_?x-_-y:_-y-x)>-1e-4&&v<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var n,r=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var o,l,h,c,f,d,m,v,y,_=e.lastIndex,i=_,x=this.keyframes.length-1,w=!0;w;){if(o=this.keyframes[i],l=this.keyframes[i+1],i===x-1&&t>=l.t-r){o.h&&(o=l),_=0;break}if(l.t-r>t){_=i;break}i<x-1?i+=1:(_=0,w=!1)}h=this.keyframesMetadata[i]||{};var M,S=l.t-r,E=o.t-r;if(o.to){h.bezierData||(h.bezierData=bez.buildBezierData(o.s,l.s||o.e,o.to,o.ti));var A=h.bezierData;if(t>=S||t<E){var T=t>=S?A.points.length-1:0;for(f=A.points[T].point.length,c=0;c<f;c+=1)n[c]=A.points[T].point[c]}else{h.__fnct?y=h.__fnct:(y=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,h.__fnct=y),d=y((t-E)/(S-E));var C,P=A.segmentLength*d,R=e.lastFrame<t&&e._lastKeyframeIndex===i?e._lastAddedLength:0;for(v=e.lastFrame<t&&e._lastKeyframeIndex===i?e._lastPoint:0,w=!0,m=A.points.length;w;){if(R+=A.points[v].partialLength,0===P||0===d||v===A.points.length-1){for(f=A.points[v].point.length,c=0;c<f;c+=1)n[c]=A.points[v].point[c];break}if(P>=R&&P<R+A.points[v+1].partialLength){for(C=(P-R)/A.points[v+1].partialLength,f=A.points[v].point.length,c=0;c<f;c+=1)n[c]=A.points[v].point[c]+(A.points[v+1].point[c]-A.points[v].point[c])*C;break}v<m-1?v+=1:w=!1}e._lastPoint=v,e._lastAddedLength=R-A.points[v].partialLength,e._lastKeyframeIndex=i}}else{var I,k,D,L,F;if(x=o.s.length,M=l.s||o.e,this.sh&&1!==o.h)t>=S?(n[0]=M[0],n[1]=M[1],n[2]=M[2]):t<=E?(n[0]=o.s[0],n[1]=o.s[1],n[2]=o.s[2]):quaternionToEuler(n,slerp(createQuaternion(o.s),createQuaternion(M),(t-E)/(S-E)));else for(i=0;i<x;i+=1)1!==o.h&&(t>=S?d=1:t<E?d=0:(o.o.x.constructor===Array?(h.__fnct||(h.__fnct=[]),h.__fnct[i]?y=h.__fnct[i]:(I=void 0===o.o.x[i]?o.o.x[0]:o.o.x[i],k=void 0===o.o.y[i]?o.o.y[0]:o.o.y[i],D=void 0===o.i.x[i]?o.i.x[0]:o.i.x[i],L=void 0===o.i.y[i]?o.i.y[0]:o.i.y[i],y=BezierFactory.getBezierEasing(I,k,D,L).get,h.__fnct[i]=y)):h.__fnct?y=h.__fnct:(I=o.o.x,k=o.o.y,D=o.i.x,L=o.i.y,y=BezierFactory.getBezierEasing(I,k,D,L).get,o.keyframeMetadata=y),d=y((t-E)/(S-E)))),M=l.s||o.e,F=1===o.h?o.s[i]:o.s[i]+(M[i]-o.s[i])*d,"multidimensional"===this.propType?n[i]=F:n=F}return e.lastIndex=_,n}function slerp(a,b,t){var e,n,r,o,l,h=[],c=a[0],f=a[1],d=a[2],m=a[3],v=b[0],y=b[1],_=b[2],x=b[3];return(n=c*v+f*y+d*_+m*x)<0&&(n=-n,v=-v,y=-y,_=-_,x=-x),1-n>1e-6?(e=Math.acos(n),r=Math.sin(e),o=Math.sin((1-t)*e)/r,l=Math.sin(t*e)/r):(o=1-t,l=t),h[0]=o*c+l*v,h[1]=o*f+l*y,h[2]=o*d+l*_,h[3]=o*m+l*x,h}function quaternionToEuler(t,e){var n=e[0],r=e[1],o=e[2],l=e[3],h=Math.atan2(2*r*l-2*n*o,1-2*r*r-2*o*o),c=Math.asin(2*n*r+2*o*l),f=Math.atan2(2*n*l-2*r*o,1-2*n*n-2*o*o);t[0]=h/degToRads,t[1]=c/degToRads,t[2]=f/degToRads}function createQuaternion(t){var e=t[0]*degToRads,n=t[1]*degToRads,r=t[2]*degToRads,o=Math.cos(e/2),l=Math.cos(n/2),h=Math.cos(r/2),c=Math.sin(e/2),f=Math.sin(n/2),d=Math.sin(r/2);return[c*f*h+o*l*d,c*l*h+o*f*d,o*f*h-c*l*d,o*l*h-c*f*d]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&t>=n||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(t,this._caching);this.pv=r}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if("unidimensional"===this.propType)e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var i=0,n=this.v.length;i<n;)e=t[i]*this.mult,mathAbs(this.v[i]-e)>1e-5&&(this.v[i]=e,this._mdf=!0),i+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var i;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,e=this.kf?this.pv:this.data.k;for(i=0;i<t;i+=1)e=this.effectsSequence[i](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,data,e,n){this.propType="unidimensional",this.mult=e||1,this.data=data,this.v=e?data.k*e:data.k,this.pv=data.k,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,data,e,n){var i;this.propType="multidimensional",this.mult=e||1,this.data=data,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var r=data.k.length;for(this.v=createTypedArray("float32",r),this.pv=createTypedArray("float32",r),this.vel=createTypedArray("float32",r),i=0;i<r;i+=1)this.v[i]=data.k[i]*this.mult,this.pv[i]=data.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,data,e,n){this.propType="unidimensional",this.keyframes=data.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=data,this.mult=e||1,this.elem=t,this.container=n,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,data,e,n){var i;this.propType="multidimensional";var s,r,o,l,h=data.k.length;for(i=0;i<h-1;i+=1)data.k[i].to&&data.k[i].s&&data.k[i+1]&&data.k[i+1].s&&(s=data.k[i].s,r=data.k[i+1].s,o=data.k[i].to,l=data.k[i].ti,(2===s.length&&(s[0]!==r[0]||s[1]!==r[1])&&bez.pointOnLine2D(s[0],s[1],r[0],r[1],s[0]+o[0],s[1]+o[1])&&bez.pointOnLine2D(s[0],s[1],r[0],r[1],r[0]+l[0],r[1]+l[1])||3===s.length&&(s[0]!==r[0]||s[1]!==r[1]||s[2]!==r[2])&&bez.pointOnLine3D(s[0],s[1],s[2],r[0],r[1],r[2],s[0]+o[0],s[1]+o[1],s[2]+o[2])&&bez.pointOnLine3D(s[0],s[1],s[2],r[0],r[1],r[2],r[0]+l[0],r[1]+l[1],r[2]+l[2]))&&(data.k[i].to=null,data.k[i].ti=null),s[0]===r[0]&&s[1]===r[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===s.length||s[2]===r[2]&&0===o[2]&&0===l[2])&&(data.k[i].to=null,data.k[i].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=data,this.keyframes=data.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=e||1,this.elem=t,this.container=n,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var c=data.k[0].s.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),i=0;i<c;i+=1)this.v[i]=initFrame,this.pv[i]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",c)},this.addEffect=addEffect}var PropertyFactory={getProp:function(t,data,e,n,r){var p;if(data.sid&&(data=t.globalData.slotManager.getProp(data)),data.k.length)if("number"==typeof data.k[0])p=new MultiDimensionalProperty(t,data,n,r);else switch(e){case 0:p=new KeyframedValueProperty(t,data,n,r);break;case 1:p=new KeyframedMultidimensionalProperty(t,data,n,r)}else p=new ValueProperty(t,data,n,r);return p.effectsSequence.length&&r.addDynamicProperty(p),p}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var i;this._mdf=!1;var t=this.dynamicProperties.length;for(i=0;i<t;i+=1)this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,n,r,o){var l;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":l=this.v;break;case"i":l=this.i;break;case"o":l=this.o;break;default:l=[]}(!l[r]||l[r]&&!o)&&(l[r]=pointPool.newElement()),l[r][0]=t,l[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,n,r,o,l,h,c){this.setXYAt(t,e,"v",h,c),this.setXYAt(n,r,"o",h,c),this.setXYAt(o,l,"i",h,c)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,n=this.o,r=this.i,o=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),o=1);var i,l=this._length-1,h=this._length;for(i=o;i<h;i+=1)t.setTripleAt(e[l][0],e[l][1],r[l][0],r[l][1],n[l][0],n[l][1],i,!1),l-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(t){var i,e=t._length;for(i=0;i<e;i+=1)pointPool.release(t.v[i]),pointPool.release(t.i[i]),pointPool.release(t.o[i]),t.v[i]=null,t.i[i]=null,t.o[i]=null;t._length=0,t.c=!1})),factory.clone=function(t){var i,e=factory.newElement(),n=void 0===t._length?t.v.length:t._length;for(e.setLength(n),e.c=t.c,i=0;i<n;i+=1)e.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],i);return e},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shapePool.release(this.shapes[i]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(t){var i,e=t._length;for(i=0;i<e;i+=1)shapePool.release(t.shapes[i]);t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var t=-999999;function e(t,e,n){var r,o,l,h,c,f,d,m,v,y=n.lastIndex,_=this.keyframes;if(t<_[0].t-this.offsetTime)r=_[0].s[0],l=!0,y=0;else if(t>=_[_.length-1].t-this.offsetTime)r=_[_.length-1].s?_[_.length-1].s[0]:_[_.length-2].e[0],l=!0;else{for(var x,w,M,i=y,S=_.length-1,E=!0;E&&(x=_[i],!((w=_[i+1]).t-this.offsetTime>t));)i<S-1?i+=1:E=!1;if(M=this.keyframesMetadata[i]||{},y=i,!(l=1===x.h)){if(t>=w.t-this.offsetTime)m=1;else if(t<x.t-this.offsetTime)m=0;else{var A;M.__fnct?A=M.__fnct:(A=BezierFactory.getBezierEasing(x.o.x,x.o.y,x.i.x,x.i.y).get,M.__fnct=A),m=A((t-(x.t-this.offsetTime))/(w.t-this.offsetTime-(x.t-this.offsetTime)))}o=w.s?w.s[0]:x.e[0]}r=x.s[0]}for(f=e._length,d=r.i[0].length,n.lastIndex=y,h=0;h<f;h+=1)for(c=0;c<d;c+=1)v=l?r.i[h][c]:r.i[h][c]+(o.i[h][c]-r.i[h][c])*m,e.i[h][c]=v,v=l?r.o[h][c]:r.o[h][c]+(o.o[h][c]-r.o[h][c])*m,e.o[h][c]=v,v=l?r.v[h][c]:r.v[h][c]+(o.v[h][c]-r.v[h][c])*m,e.v[h][c]=v}function n(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,o=this._caching.lastFrame;return o!==t&&(o<n&&e<n||o>r&&e>r)||(this._caching.lastIndex=o<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function r(){this.paths=this.localShapeCollection}function o(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,n=t._length;for(i=0;i<n;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function l(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,i;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var e=this.effectsSequence.length;for(i=0;i<e;i+=1)t=this.effectsSequence[i](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function h(t,data,e){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=data,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===e?data.pt.k:data.ks.k;this.v=shapePool.clone(n),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function c(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function f(e,data,o){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===o?data.pt.k:data.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var l=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,l),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=r,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[n.bind(this)]}h.prototype.interpolateShape=e,h.prototype.getValue=l,h.prototype.setVValue=o,h.prototype.addEffect=c,f.prototype.getValue=l,f.prototype.interpolateShape=e,f.prototype.setVValue=o,f.prototype.addEffect=c;var d=function(){var t=roundCorner;function e(t,data){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=data.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,data.p,1,0,this),this.s=PropertyFactory.getProp(t,data.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,o=this.s.v[1]/2,l=3!==this.d,h=this.v;h.v[0][0]=e,h.v[0][1]=n-o,h.v[1][0]=l?e+r:e-r,h.v[1][1]=n,h.v[2][0]=e,h.v[2][1]=n+o,h.v[3][0]=l?e-r:e+r,h.v[3][1]=n,h.i[0][0]=l?e-r*t:e+r*t,h.i[0][1]=n-o,h.i[1][0]=l?e+r:e-r,h.i[1][1]=n-o*t,h.i[2][0]=l?e+r*t:e-r*t,h.i[2][1]=n+o,h.i[3][0]=l?e-r:e+r,h.i[3][1]=n+o*t,h.o[0][0]=l?e+r*t:e-r*t,h.o[0][1]=n-o,h.o[1][0]=l?e+r:e-r,h.o[1][1]=n+o*t,h.o[2][0]=l?e-r*t:e+r*t,h.o[2][1]=n+o,h.o[3][0]=l?e-r:e+r,h.o[3][1]=n-o*t}},extendPrototype([DynamicPropertyContainer],e),e}(),m=function(){function t(t,data){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=data,this.frameId=-1,this.d=data.d,this.initDynamicPropertyContainer(t),1===data.sy?(this.ir=PropertyFactory.getProp(t,data.ir,0,0,this),this.is=PropertyFactory.getProp(t,data.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,data.pt,0,0,this),this.p=PropertyFactory.getProp(t,data.p,1,0,this),this.r=PropertyFactory.getProp(t,data.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,data.or,0,0,this),this.os=PropertyFactory.getProp(t,data.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var i,t,e,n,r=2*Math.floor(this.pt.v),o=2*Math.PI/r,l=!0,h=this.or.v,c=this.ir.v,f=this.os.v,d=this.is.v,m=2*Math.PI*h/(2*r),v=2*Math.PI*c/(2*r),y=-Math.PI/2;y+=this.r.v;var _=3===this.data.d?-1:1;for(this.v._length=0,i=0;i<r;i+=1){e=l?f:d,n=l?m:v;var x=(t=l?h:c)*Math.cos(y),w=t*Math.sin(y),M=0===x&&0===w?0:w/Math.sqrt(x*x+w*w),S=0===x&&0===w?0:-x/Math.sqrt(x*x+w*w);x+=+this.p.v[0],w+=+this.p.v[1],this.v.setTripleAt(x,w,x-M*n*e*_,w-S*n*e*_,x+M*n*e*_,w+S*n*e*_,i,!0),l=!l,y+=o*_}},convertPolygonToPath:function(){var i,t=Math.floor(this.pt.v),e=2*Math.PI/t,n=this.or.v,r=this.os.v,o=2*Math.PI*n/(4*t),l=.5*-Math.PI,h=3===this.data.d?-1:1;for(l+=this.r.v,this.v._length=0,i=0;i<t;i+=1){var c=n*Math.cos(l),f=n*Math.sin(l),d=0===c&&0===f?0:f/Math.sqrt(c*c+f*f),m=0===c&&0===f?0:-c/Math.sqrt(c*c+f*f);c+=+this.p.v[0],f+=+this.p.v[1],this.v.setTripleAt(c,f,c-d*o*r*h,f-m*o*r*h,c+d*o*r*h,f+m*o*r*h,i,!0),l+=e*h}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),v=function(){function t(t,data){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=data.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,data.p,1,0,this),this.s=PropertyFactory.getProp(t,data.s,1,0,this),this.r=PropertyFactory.getProp(t,data.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,o=bmMin(n,r,this.r.v),l=o*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+n,e-r+o,t+n,e-r+o,t+n,e-r+l,0,!0),this.v.setTripleAt(t+n,e+r-o,t+n,e+r-l,t+n,e+r-o,1,!0),0!==o?(this.v.setTripleAt(t+n-o,e+r,t+n-o,e+r,t+n-l,e+r,2,!0),this.v.setTripleAt(t-n+o,e+r,t-n+l,e+r,t-n+o,e+r,3,!0),this.v.setTripleAt(t-n,e+r-o,t-n,e+r-o,t-n,e+r-l,4,!0),this.v.setTripleAt(t-n,e-r+o,t-n,e-r+l,t-n,e-r+o,5,!0),this.v.setTripleAt(t-n+o,e-r,t-n+o,e-r,t-n+l,e-r,6,!0),this.v.setTripleAt(t+n-o,e-r,t+n-l,e-r,t+n-o,e-r,7,!0)):(this.v.setTripleAt(t-n,e+r,t-n+l,e+r,t-n,e+r,2),this.v.setTripleAt(t-n,e-r,t-n,e-r+l,t-n,e-r,3))):(this.v.setTripleAt(t+n,e-r+o,t+n,e-r+l,t+n,e-r+o,0,!0),0!==o?(this.v.setTripleAt(t+n-o,e-r,t+n-o,e-r,t+n-l,e-r,1,!0),this.v.setTripleAt(t-n+o,e-r,t-n+l,e-r,t-n+o,e-r,2,!0),this.v.setTripleAt(t-n,e-r+o,t-n,e-r+o,t-n,e-r+l,3,!0),this.v.setTripleAt(t-n,e+r-o,t-n,e+r-l,t-n,e+r-o,4,!0),this.v.setTripleAt(t-n+o,e+r,t-n+o,e+r,t-n+l,e+r,5,!0),this.v.setTripleAt(t+n-o,e+r,t+n-l,e+r,t+n-o,e+r,6,!0),this.v.setTripleAt(t+n,e+r-o,t+n,e+r-o,t+n,e+r-l,7,!0)):(this.v.setTripleAt(t-n,e-r,t-n+l,e-r,t-n,e-r,1,!0),this.v.setTripleAt(t-n,e+r,t-n,e+r-l,t-n,e+r,2,!0),this.v.setTripleAt(t+n,e+r,t+n-l,e+r,t+n,e+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],t),t}(),y={getShapeProp:function(t,data,e){var n;return 3===e||4===e?n=(3===e?data.pt:data.ks).k.length?new f(t,data,e):new h(t,data,e):5===e?n=new v(t,data):6===e?n=new d(t,data):7===e&&(n=new m(t,data)),n.k&&t.addDynamicProperty(n),n},getConstructorFunction:function(){return h},getKeyframedConstructorFunction:function(){return f}};return y}(),Matrix=function(){var t=Math.cos,e=Math.sin,n=Math.tan,r=Math.round;function o(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function l(n){if(0===n)return this;var r=t(n),o=e(n);return this._t(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1)}function h(n){if(0===n)return this;var r=t(n),o=e(n);return this._t(1,0,0,0,0,r,-o,0,0,o,r,0,0,0,0,1)}function c(n){if(0===n)return this;var r=t(n),o=e(n);return this._t(r,0,o,0,0,1,0,0,-o,0,r,0,0,0,0,1)}function f(n){if(0===n)return this;var r=t(n),o=e(n);return this._t(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1)}function d(t,e){return this._t(1,e,t,1,0,0)}function m(t,e){return this.shear(n(t),n(e))}function v(r,o){var l=t(o),h=e(o);return this._t(l,h,0,0,-h,l,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(l,-h,0,0,h,l,0,0,0,0,1,0,0,0,0,1)}function y(t,e,n){return n||0===n||(n=1),1===t&&1===e&&1===n?this:this._t(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}function _(a,b,t,e,n,r,g,o,i,l,h,c,f,d,m,p){return this.props[0]=a,this.props[1]=b,this.props[2]=t,this.props[3]=e,this.props[4]=n,this.props[5]=r,this.props[6]=g,this.props[7]=o,this.props[8]=i,this.props[9]=l,this.props[10]=h,this.props[11]=c,this.props[12]=f,this.props[13]=d,this.props[14]=m,this.props[15]=p,this}function x(t,e,n){return n=n||0,0!==t||0!==e||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1):this}function w(t,e,n,r,o,l,h,h2,c,f,d,m,v,y,_,x){var w=this.props;if(1===t&&0===e&&0===n&&0===r&&0===o&&1===l&&0===h&&0===h2&&0===c&&0===f&&1===d&&0===m)return w[12]=w[12]*t+w[15]*v,w[13]=w[13]*l+w[15]*y,w[14]=w[14]*d+w[15]*_,w[15]*=x,this._identityCalculated=!1,this;var M=w[0],S=w[1],E=w[2],A=w[3],T=w[4],C=w[5],P=w[6],h1=w[7],R=w[8],I=w[9],k=w[10],D=w[11],L=w[12],F=w[13],O=w[14],N=w[15];return w[0]=M*t+S*o+E*c+A*v,w[1]=M*e+S*l+E*f+A*y,w[2]=M*n+S*h+E*d+A*_,w[3]=M*r+S*h2+E*m+A*x,w[4]=T*t+C*o+P*c+h1*v,w[5]=T*e+C*l+P*f+h1*y,w[6]=T*n+C*h+P*d+h1*_,w[7]=T*r+C*h2+P*m+h1*x,w[8]=R*t+I*o+k*c+D*v,w[9]=R*e+I*l+k*f+D*y,w[10]=R*n+I*h+k*d+D*_,w[11]=R*r+I*h2+k*m+D*x,w[12]=L*t+F*o+O*c+N*v,w[13]=L*e+F*l+O*f+N*y,w[14]=L*n+F*h+O*d+N*_,w[15]=L*r+F*h2+O*m+N*x,this._identityCalculated=!1,this}function M(t){var e=t.props;return this.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function S(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function E(t){for(var i=0;i<16;){if(t.props[i]!==this.props[i])return!1;i+=1}return!0}function A(t){var i;for(i=0;i<16;i+=1)t.props[i]=this.props[i];return t}function T(t){var i;for(i=0;i<16;i+=1)this.props[i]=t[i]}function C(t,e,n){return{x:t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}}function P(t,e,n){return t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12]}function R(t,e,n){return t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13]}function I(t,e,n){return t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}function k(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],a=this.props[5]/t,b=-this.props[1]/t,e=-this.props[4]/t,n=this.props[0]/t,r=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,l=new Matrix;return l.props[0]=a,l.props[1]=b,l.props[4]=e,l.props[5]=n,l.props[12]=r,l.props[13]=o,l}function D(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function L(t){var i,e=t.length,n=[];for(i=0;i<e;i+=1)n[i]=D(t[i]);return n}function F(t,e,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=n[0],r[5]=n[1];else{var o=this.props[0],l=this.props[1],h=this.props[4],c=this.props[5],f=this.props[12],d=this.props[13];r[0]=t[0]*o+t[1]*h+f,r[1]=t[0]*l+t[1]*c+d,r[2]=e[0]*o+e[1]*h+f,r[3]=e[0]*l+e[1]*c+d,r[4]=n[0]*o+n[1]*h+f,r[5]=n[0]*l+n[1]*c+d}return r}function O(t,e,n){return this.isIdentity()?[t,e,n]:[t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]]}function N(t,e){if(this.isIdentity())return t+","+e;var n=this.props;return Math.round(100*(t*n[0]+e*n[4]+n[12]))/100+","+Math.round(100*(t*n[1]+e*n[5]+n[13]))/100}function B(){for(var i=0,t=this.props,e="matrix3d(";i<16;)e+=r(1e4*t[i])/1e4,e+=15===i?")":",",i+=1;return e}function U(t){return t<1e-6&&t>0||t>-1e-6&&t<0?r(1e4*t)/1e4:t}function z(){var t=this.props;return"matrix("+U(t[0])+","+U(t[1])+","+U(t[4])+","+U(t[5])+","+U(t[12])+","+U(t[13])+")"}return function(){this.reset=o,this.rotate=l,this.rotateX=h,this.rotateY=c,this.rotateZ=f,this.skew=m,this.skewFromAxis=v,this.shear=d,this.scale=y,this.setTransform=_,this.translate=x,this.transform=w,this.multiply=M,this.applyToPoint=C,this.applyToX=P,this.applyToY=R,this.applyToZ=I,this.applyToPointArray=O,this.applyToTriplePoints=F,this.applyToPointStringified=N,this.toCSS=B,this.to2dCSS=z,this.clone=A,this.cloneFromProps=T,this.equals=E,this.inversePoints=L,this.inversePoint=D,this.getInverseMatrix=k,this._t=this.transform,this.isIdentity=S,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(t)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i+=1){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"===_typeof$3(exports)&&void 0!==module||__webpack_require__(3471)||(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,n){e[t]||(e[t]=n)},t.getModifier=function(t,n,data){return new e[t](n,data)},t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(data){if(!this.closed){data.sh.container.addDynamicProperty(data.sh);var t={shape:data.sh,data:data,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&data.setAsAnimated()}},ShapeModifier.prototype.init=function(t,data){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,data),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,data){this.s=PropertyFactory.getProp(t,data.s,0,.01,this),this.e=PropertyFactory.getProp(t,data.e,0,.01,this),this.o=PropertyFactory.getProp(t,data.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=data.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,t,e,n,r){var o=[];t<=1?o.push({s:s,e:t}):s>=1?o.push({s:s-1,e:t-1}):(o.push({s:s,e:1}),o.push({s:0,e:t-1}));var i,l,h=[],c=o.length;for(i=0;i<c;i+=1){var f,d;(l=o[i]).e*r<n||l.s*r>n+e||(f=l.s*r<=n?0:(l.s*r-n)/e,d=l.e*r>=n+e?1:(l.e*r-n)/e,h.push([f,d]))}return h.length||h.push([0,0]),h},TrimModifier.prototype.releasePathsData=function(t){var i,e=t.length;for(i=0;i<e;i+=1)segmentsLengthPool.release(t[i]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var s,e,n,i;if(this._mdf||t){var r=this.o.v%360/360;if(r<0&&(r+=1),(s=this.s.v>1?1+r:this.s.v<0?0+r:this.s.v+r)>(e=this.e.v>1?1+r:this.e.v<0?0+r:this.e.v+r)){var o=s;s=e,e=o}s=1e-4*Math.round(1e4*s),e=1e-4*Math.round(1e4*e),this.sValue=s,this.eValue=e}else s=this.sValue,e=this.eValue;var l,h,c,f,d,m=this.shapes.length,v=0;if(e===s)for(i=0;i<m;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if(1===e&&0===s||0===e&&1===s){if(this._mdf)for(i=0;i<m;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var y,_,x=[];for(i=0;i<m;i+=1)if((y=this.shapes[i]).shape._mdf||this._mdf||t||2===this.m){if(h=(n=y.shape.paths)._length,d=0,!y.shape._mdf&&y.pathsData.length)d=y.totalShapeLength;else{for(c=this.releasePathsData(y.pathsData),l=0;l<h;l+=1)f=bez.getSegmentsLength(n.shapes[l]),c.push(f),d+=f.totalLength;y.totalShapeLength=d,y.pathsData=c}v+=d,y.shape._mdf=!0}else y.shape.paths=y.localShapeCollection;var w,M=s,S=e,E=0;for(i=m-1;i>=0;i-=1)if((y=this.shapes[i]).shape._mdf){for((_=y.localShapeCollection).releaseShapes(),2===this.m&&m>1?(w=this.calculateShapeEdges(s,e,y.totalShapeLength,E,v),E+=y.totalShapeLength):w=[[M,S]],h=w.length,l=0;l<h;l+=1){M=w[l][0],S=w[l][1],x.length=0,S<=1?x.push({s:y.totalShapeLength*M,e:y.totalShapeLength*S}):M>=1?x.push({s:y.totalShapeLength*(M-1),e:y.totalShapeLength*(S-1)}):(x.push({s:y.totalShapeLength*M,e:y.totalShapeLength}),x.push({s:0,e:y.totalShapeLength*(S-1)}));var A=this.addShapes(y,x[0]);if(x[0].s!==x[0].e){if(x.length>1)if(y.shape.paths.shapes[y.shape.paths._length-1].c){var T=A.pop();this.addPaths(A,_),A=this.addShapes(y,x[1],T)}else this.addPaths(A,_),A=this.addShapes(y,x[1]);this.addPaths(A,_)}}y.shape.paths=_}}},TrimModifier.prototype.addPaths=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,n,r,o,l,h){o.setXYAt(e[0],e[1],"o",l),o.setXYAt(n[0],n[1],"i",l+1),h&&o.setXYAt(t[0],t[1],"v",l),o.setXYAt(r[0],r[1],"v",l+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,n,r){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),r&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},TrimModifier.prototype.addShapes=function(t,e,n){var i,r,o,l,h,c,f,d,m=t.pathsData,v=t.shape.paths.shapes,y=t.shape.paths._length,_=0,x=[],w=!0;for(n?(h=n._length,d=n._length):(n=shapePool.newElement(),h=0,d=0),x.push(n),i=0;i<y;i+=1){for(c=m[i].lengths,n.c=v[i].c,o=v[i].c?c.length:c.length+1,r=1;r<o;r+=1)if(_+(l=c[r-1]).addedLength<e.s)_+=l.addedLength,n.c=!1;else{if(_>e.e){n.c=!1;break}e.s<=_&&e.e>=_+l.addedLength?(this.addSegment(v[i].v[r-1],v[i].o[r-1],v[i].i[r],v[i].v[r],n,h,w),w=!1):(f=bez.getNewSegment(v[i].v[r-1],v[i].v[r],v[i].o[r-1],v[i].i[r],(e.s-_)/l.addedLength,(e.e-_)/l.addedLength,c[r-1]),this.addSegmentFromArray(f,n,h,w),w=!1,n.c=!1),_+=l.addedLength,h+=1}if(v[i].c&&c.length){if(l=c[r-1],_<=e.e){var M=c[r-1].addedLength;e.s<=_&&e.e>=_+M?(this.addSegment(v[i].v[r-1],v[i].o[r-1],v[i].i[0],v[i].v[0],n,h,w),w=!1):(f=bez.getNewSegment(v[i].v[r-1],v[i].v[0],v[i].o[r-1],v[i].i[0],(e.s-_)/M,(e.e-_)/M,c[r-1]),this.addSegmentFromArray(f,n,h,w),w=!1,n.c=!1)}else n.c=!1;_+=l.addedLength,h+=1}if(n._length&&(n.setXYAt(n.v[d][0],n.v[d][1],"i",d),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),_>e.e)break;i<y-1&&(n=shapePool.newElement(),w=!0,x.push(n),h=0)}return x},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,data){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,data.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(path,t){var e=t/100,n=[0,0],r=path._length,i=0;for(i=0;i<r;i+=1)n[0]+=path.v[i][0],n[1]+=path.v[i][1];n[0]/=r,n[1]/=r;var o,l,h,c,f,d,m=shapePool.newElement();for(m.c=path.c,i=0;i<r;i+=1)o=path.v[i][0]+(n[0]-path.v[i][0])*e,l=path.v[i][1]+(n[1]-path.v[i][1])*e,h=path.o[i][0]+(n[0]-path.o[i][0])*-e,c=path.o[i][1]+(n[1]-path.o[i][1])*-e,f=path.i[i][0]+(n[0]-path.i[i][0])*-e,d=path.i[i][1]+(n[1]-path.i[i][1])*-e,m.setTripleAt(o,l,h,c,f,d,i);return m},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,n,r,o,l,h=this.shapes.length,c=this.amount.v;if(0!==c)for(i=0;i<h;i+=1){if(l=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(l.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)l.addShape(this.processPath(e[n],c));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(t,data,e){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=data,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(e||t),data.p&&data.p.s?(this.px=PropertyFactory.getProp(t,data.p.x,0,0,this),this.py=PropertyFactory.getProp(t,data.p.y,0,0,this),data.p.z&&(this.pz=PropertyFactory.getProp(t,data.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,data.p||{k:[0,0,0]},1,0,this),data.rx){if(this.rx=PropertyFactory.getProp(t,data.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,data.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,data.rz,0,degToRads,this),data.or.k[0].ti){var i,n=data.or.k.length;for(i=0;i<n;i+=1)data.or.k[i].to=null,data.or.k[i].ti=null}this.or=PropertyFactory.getProp(t,data.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,data.r||{k:0},0,degToRads,this);data.sk&&(this.sk=PropertyFactory.getProp(t,data.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,data.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,data.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,data.s||{k:[100,100,100]},1,.01,this),data.o?this.o=PropertyFactory.getProp(t,data.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,o;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),o=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),o=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,o=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],o=[];var l=this.px,h=this.py;l._caching.lastFrame+l.offsetTime<=l.keyframes[0].t?(r[0]=l.getValueAtTime((l.keyframes[0].t+.01)/n,0),r[1]=h.getValueAtTime((h.keyframes[0].t+.01)/n,0),o[0]=l.getValueAtTime(l.keyframes[0].t/n,0),o[1]=h.getValueAtTime(h.keyframes[0].t/n,0)):l._caching.lastFrame+l.offsetTime>=l.keyframes[l.keyframes.length-1].t?(r[0]=l.getValueAtTime(l.keyframes[l.keyframes.length-1].t/n,0),r[1]=h.getValueAtTime(h.keyframes[h.keyframes.length-1].t/n,0),o[0]=l.getValueAtTime((l.keyframes[l.keyframes.length-1].t-.01)/n,0),o[1]=h.getValueAtTime((h.keyframes[h.keyframes.length-1].t-.01)/n,0)):(r=[l.pv,h.pv],o[0]=l.getValueAtTime((l._caching.lastFrame+l.offsetTime-.01)/n,l.offsetTime),o[1]=h.getValueAtTime((h._caching.lastFrame+h.offsetTime-.01)/n,h.offsetTime))}else r=o=t;this.v.rotate(-Math.atan2(r[1]-o[1],r[0]-o[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,data,n){return new e(t,data,n)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(a,b){return 1e5*Math.abs(a-b)<=Math.min(Math.abs(a),Math.abs(b))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,n){return t*(1-n)+e*n}function lerpPoint(t,e,n){return[lerp(t[0],e[0],n),lerp(t[1],e[1],n)]}function quadRoots(a,b,t){if(0===a)return[];var s=b*b-4*a*t;if(s<0)return[];var e=-b/(2*a);if(0===s)return[e];var n=Math.sqrt(s)/(2*a);return[e-n,e+n]}function polynomialCoefficients(t,e,n,r){return[3*e-t-3*n+r,3*t-6*e+3*n,-3*t+3*e,t]}function singlePoint(p){return new PolynomialBezier(p,p,p,p,!1)}function PolynomialBezier(t,e,n,r,o){o&&pointEqual(t,e)&&(e=lerpPoint(t,r,1/3)),o&&pointEqual(n,r)&&(n=lerpPoint(t,r,2/3));var l=polynomialCoefficients(t[0],e[0],n[0],r[0]),h=polynomialCoefficients(t[1],e[1],n[1],r[1]);this.a=[l[0],h[0]],this.b=[l[1],h[1]],this.c=[l[2],h[2]],this.d=[l[3],h[3]],this.points=[t,e,n,r]}function extrema(t,e){var n=t.points[0][e],r=t.points[t.points.length-1][e];if(n>r){var o=r;r=n,n=o}for(var l=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),i=0;i<l.length;i+=1)if(l[i]>0&&l[i]<1){var h=t.point(l[i])[e];h<n?n=h:h>r&&(r=h)}return{min:n,max:r}}function intersectData(t,e,n){var r=t.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:t,t:(e+n)/2,t1:e,t2:n}}function splitData(data){var t=data.bez.split(.5);return[intersectData(t[0],data.t1,data.t),intersectData(t[1],data.t,data.t2)]}function boxIntersect(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function intersectsImpl(t,e,n,r,o,l){if(boxIntersect(t,e))if(n>=l||t.width<=r&&t.height<=r&&e.width<=r&&e.height<=r)o.push([t.t,e.t]);else{var h=splitData(t),c=splitData(e);intersectsImpl(h[0],c[0],n+1,r,o,l),intersectsImpl(h[0],c[1],n+1,r,o,l),intersectsImpl(h[1],c[0],n+1,r,o,l),intersectsImpl(h[1],c[1],n+1,r,o,l)}}function crossProduct(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function lineIntersection(t,e,n,r){var o=[t[0],t[1],1],l=[e[0],e[1],1],h=[n[0],n[1],1],c=[r[0],r[1],1],f=crossProduct(crossProduct(o,l),crossProduct(h,c));return floatZero(f[2])?null:[f[0]/f[2],f[1]/f[2]]}function polarOffset(p,t,e){return[p[0]+Math.cos(t)*e,p[1]-Math.sin(t)*e]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}function setPoint(t,e,n,r,o,l,h){var c=n-Math.PI/2,f=n+Math.PI/2,d=e[0]+Math.cos(n)*r*o,m=e[1]-Math.sin(n)*r*o;t.setTripleAt(d,m,d+Math.cos(c)*l,m-Math.sin(c)*l,d+Math.cos(f)*h,m-Math.sin(f)*h,t.length())}function getPerpendicularVector(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=.5*-Math.PI;return[Math.cos(r)*n[0]-Math.sin(r)*n[1],Math.sin(r)*n[0]+Math.cos(r)*n[1]]}function getProjectingAngle(path,t){var e=0===t?path.length()-1:t-1,n=(t+1)%path.length(),r=getPerpendicularVector(path.v[e],path.v[n]);return Math.atan2(0,1)-Math.atan2(r[1],r[0])}function zigZagCorner(t,path,e,n,r,o,l){var h=getProjectingAngle(path,e),c=path.v[e%path._length],f=path.v[0===e?path._length-1:e-1],d=path.v[(e+1)%path._length],m=2===o?Math.sqrt(Math.pow(c[0]-f[0],2)+Math.pow(c[1]-f[1],2)):0,v=2===o?Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)):0;setPoint(t,path.v[e%path._length],h,l,n,v/(2*(r+1)),m/(2*(r+1)),o)}function zigZagSegment(t,e,n,r,o,l){for(var i=0;i<r;i+=1){var h=(i+1)/(r+1),c=2===o?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,f=e.normalAngle(h);setPoint(t,e.point(h),f,l,n,c/(2*(r+1)),c/(2*(r+1)),o),l=-l}return l}function linearOffset(t,e,n){var r=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,r,n),polarOffset(e,r,n)]}function offsetSegment(t,e){var n,r,o,l,h,c,f;n=(f=linearOffset(t.points[0],t.points[1],e))[0],r=f[1],o=(f=linearOffset(t.points[1],t.points[2],e))[0],l=f[1],h=(f=linearOffset(t.points[2],t.points[3],e))[0],c=f[1];var d=lineIntersection(n,r,o,l);null===d&&(d=r);var m=lineIntersection(h,c,o,l);return null===m&&(m=h),new PolynomialBezier(n,d,m,c)}function joinLines(t,e,n,r,o){var l=e.points[3],h=n.points[0];if(3===r)return l;if(pointEqual(l,h))return l;if(2===r){var c=-e.tangentAngle(1),f=-n.tangentAngle(0)+Math.PI,d=lineIntersection(l,polarOffset(l,c+Math.PI/2,100),h,polarOffset(h,c+Math.PI/2,100)),m=d?pointDistance(d,l):pointDistance(l,h)/2,v=polarOffset(l,c,2*m*roundCorner);return t.setXYAt(v[0],v[1],"o",t.length()-1),v=polarOffset(h,f,2*m*roundCorner),t.setTripleAt(h[0],h[1],h[0],h[1],v[0],v[1],t.length()),h}var y=lineIntersection(pointEqual(l,e.points[2])?e.points[0]:e.points[2],l,h,pointEqual(h,n.points[1])?n.points[3]:n.points[1]);return y&&pointDistance(y,l)<o?(t.setTripleAt(y[0],y[1],y[0],y[1],y[0],y[1],t.length()),y):l}function getIntersection(a,b){var t=a.intersections(b);return t.length&&floatEqual(t[0][0],1)&&t.shift(),t.length?t[0]:null}function pruneSegmentIntersection(a,b){var t=a.slice(),e=b.slice(),n=getIntersection(a[a.length-1],b[0]);return n&&(t[a.length-1]=a[a.length-1].split(n[0])[0],e[0]=b[0].split(n[1])[1]),a.length>1&&b.length>1&&(n=getIntersection(a[0],b[b.length-1]))?[[a[0].split(n[0])[0]],[b[b.length-1].split(n[1])[1]]]:[t,e]}function pruneIntersections(t){for(var e,i=1;i<t.length;i+=1)e=pruneSegmentIntersection(t[i-1],t[i]),t[i-1]=e[0],t[i]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var n,r,o,l,h=t.inflectionPoints();if(0===h.length)return[offsetSegment(t,e)];if(1===h.length||floatEqual(h[1],1))return n=(o=t.split(h[0]))[0],r=o[1],[offsetSegment(n,e),offsetSegment(r,e)];n=(o=t.split(h[0]))[0];var c=(h[1]-h[0])/(1-h[0]);return l=(o=o[1].split(c))[0],r=o[1],[offsetSegment(n,e),offsetSegment(l,e),offsetSegment(r,e)]}function OffsetPathModifier(){}function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],n="normal",r="normal",o=e.length,i=0;i<o;i+=1)switch(e[i].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:t.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,data){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,data.c,0,null,this),this.o=PropertyFactory.getProp(t,data.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,data.tr,this),this.so=PropertyFactory.getProp(t,data.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,data.tr.eo,0,.01,this),this.data=data,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,n,r,o,l){var h=l?-1:1,c=r.s.v[0]+(1-r.s.v[0])*(1-o),f=r.s.v[1]+(1-r.s.v[1])*(1-o);t.translate(r.p.v[0]*h*o,r.p.v[1]*h*o,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*h*o),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(l?1/c:c,l?1/f:f),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,n,r){for(this.elem=t,this.arr=e,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);n>0;)n-=1,this._elements.unshift(e[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var i,e=t.length;for(i=0;i<e;i+=1)t[i]._processed=!1,"gr"===t[i].ty&&this.resetElements(t[i].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,n,i,r,o,l=!1;if(this._mdf||t){var h,c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var f={it:this.cloneElements(this._elements),ty:"gr"};f.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,f),this._groups.splice(0,0,f),this._currentCopies+=1}this.elem.reloadShapes(),l=!0}for(o=0,i=0;i<=this._groups.length-1;i+=1){if(h=o<c,this._groups[i]._render=h,this.changeGroupRender(this._groups[i].it,h),!h){var d=this.elemsData[i].it,m=d[d.length-1];0!==m.transform.op.v?(m.transform.op._mdf=!0,m.transform.op.v=0):m.transform.op._mdf=!1}o+=1}this._currentCopies=c;var v=this.o.v,y=v%1,_=v>0?Math.floor(v):Math.ceil(v),x=this.pMatrix.props,w=this.rMatrix.props,M=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var S,E,A=0;if(v>0){for(;A<_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),A+=1;y&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,y,!1),A+=y)}else if(v<0){for(;A>_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),A-=1;y&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-y,!0),A-=y)}for(i=1===this.data.m?0:this._currentCopies-1,r=1===this.data.m?1:-1,o=this._currentCopies;o;){if(E=(n=(e=this.elemsData[i].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==A){for((0!==i&&1===r||i!==this._currentCopies-1&&-1===r)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15]),this.matrix.transform(M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],M[8],M[9],M[10],M[11],M[12],M[13],M[14],M[15]),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),S=0;S<E;S+=1)n[S]=this.matrix.props[S];this.matrix.reset()}else for(this.matrix.reset(),S=0;S<E;S+=1)n[S]=this.matrix.props[S];A+=1,o-=1,i+=r}}else for(o=this._currentCopies,i=0,r=1;o;)n=(e=this.elemsData[i].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,o-=1,i+=r;return l},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,data){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,data.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(path,t){var i,e=shapePool.newElement();e.c=path.c;var n,r,o,l,h,c,f,d,m,v,y,_,x=path._length,w=0;for(i=0;i<x;i+=1)n=path.v[i],o=path.o[i],r=path.i[i],n[0]===o[0]&&n[1]===o[1]&&n[0]===r[0]&&n[1]===r[1]?0!==i&&i!==x-1||path.c?(l=0===i?path.v[x-1]:path.v[i-1],c=(h=Math.sqrt(Math.pow(n[0]-l[0],2)+Math.pow(n[1]-l[1],2)))?Math.min(h/2,t)/h:0,f=y=n[0]+(l[0]-n[0])*c,d=_=n[1]-(n[1]-l[1])*c,m=f-(f-n[0])*roundCorner,v=d-(d-n[1])*roundCorner,e.setTripleAt(f,d,m,v,y,_,w),w+=1,l=i===x-1?path.v[0]:path.v[i+1],c=(h=Math.sqrt(Math.pow(n[0]-l[0],2)+Math.pow(n[1]-l[1],2)))?Math.min(h/2,t)/h:0,f=m=n[0]+(l[0]-n[0])*c,d=v=n[1]+(l[1]-n[1])*c,y=f-(f-n[0])*roundCorner,_=d-(d-n[1])*roundCorner,e.setTripleAt(f,d,m,v,y,_,w),w+=1):(e.setTripleAt(n[0],n[1],o[0],o[1],r[0],r[1],w),w+=1):(e.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],w),w+=1);return e},RoundCornersModifier.prototype.processShapes=function(t){var e,i,n,r,o,l,h=this.shapes.length,c=this.rd.v;if(0!==c)for(i=0;i<h;i+=1){if(l=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(l.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)l.addShape(this.processPath(e[n],c));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var p=this.derivative(t);return Math.atan2(p[1],p[0])},PolynomialBezier.prototype.normalAngle=function(t){var p=this.derivative(t);return Math.atan2(p[0],p[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,n=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(n<0)return[];var r=Math.sqrt(n);return floatZero(r)?r>0&&r<1?[e]:[]:[e-r,e+r].filter((function(t){return t>0&&t<1}))},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),n=lerpPoint(this.points[1],this.points[2],t),r=lerpPoint(this.points[2],this.points[3],t),o=lerpPoint(e,n,t),l=lerpPoint(n,r,t),h=lerpPoint(o,l,t);return[new PolynomialBezier(this.points[0],e,o,h,!0),new PolynomialBezier(h,l,r,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},PolynomialBezier.prototype.intersections=function(t,e,n){void 0===e&&(e=2),void 0===n&&(n=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,r,n),r},PolynomialBezier.shapeSegment=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[n],t.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[n],t.i[n],t.o[e],t.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,data){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,data.s,0,null,this),this.frequency=PropertyFactory.getProp(t,data.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,data.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(path,t,e,n){var r=path._length,o=shapePool.newElement();if(o.c=path.c,path.c||(r-=1),0===r)return o;var l=-1,h=PolynomialBezier.shapeSegment(path,0);zigZagCorner(o,path,0,t,e,n,l);for(var i=0;i<r;i+=1)l=zigZagSegment(o,h,t,e,n,-l),h=i!==r-1||path.c?PolynomialBezier.shapeSegment(path,(i+1)%r):null,zigZagCorner(o,path,i+1,t,e,n,l);return o},ZigZagModifier.prototype.processShapes=function(t){var e,i,n,r,o,l,h=this.shapes.length,c=this.amplitude.v,f=Math.max(0,Math.round(this.frequency.v)),d=this.pointsType.v;if(0!==c)for(i=0;i<h;i+=1){if(l=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(l.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)l.addShape(this.processPath(e[n],c,f,d));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,data){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,data.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,data.ml,0,null,this),this.lineJoin=data.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(t,e,n,r){var o=shapePool.newElement();o.c=t.c;var i,l,h,c=t.length();t.c||(c-=1);var f=[];for(i=0;i<c;i+=1)h=PolynomialBezier.shapeSegment(t,i),f.push(offsetSegmentSplit(h,e));if(!t.c)for(i=c-1;i>=0;i-=1)h=PolynomialBezier.shapeSegmentInverted(t,i),f.push(offsetSegmentSplit(h,e));f=pruneIntersections(f);var d=null,m=null;for(i=0;i<f.length;i+=1){var v=f[i];for(m&&(d=joinLines(o,m,v[0],n,r)),m=v[v.length-1],l=0;l<v.length;l+=1)h=v[l],d&&pointEqual(h.points[0],d)?o.setXYAt(h.points[1][0],h.points[1][1],"o",o.length()-1):o.setTripleAt(h.points[0][0],h.points[0][1],h.points[1][0],h.points[1][1],h.points[0][0],h.points[0][1],o.length()),o.setTripleAt(h.points[3][0],h.points[3][1],h.points[3][0],h.points[3][1],h.points[2][0],h.points[2][1],o.length()),d=h.points[3]}return f.length&&joinLines(o,m,f[0][0],n,r),o},OffsetPathModifier.prototype.processShapes=function(t){var e,i,n,r,o,l,h=this.shapes.length,c=this.amount.v,f=this.miterLimit.v,d=this.lineJoin;if(0!==c)for(i=0;i<h;i+=1){if(l=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(l.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)l.addShape(this.processPath(e[n],c,d,f));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,r=127462,o=127487,l=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function h(t,e){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=e;var r=createTag("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var o=r.offsetWidth;return r.style.fontFamily=function(t){var i,e=t.split(","),n=e.length,r=[];for(i=0;i<n;i+=1)"sans-serif"!==e[i]&&"monospace"!==e[i]&&r.push(e[i]);return r.join(",")}(t)+", "+e,{node:r,w:o,parent:n}}function c(t,e){var n,r=document.body&&e?"svg":"canvas",o=getFontProperties(t);if("svg"===r){var l=createNS("text");l.style.fontSize="100px",l.setAttribute("font-family",t.fFamily),l.setAttribute("font-style",o.style),l.setAttribute("font-weight",o.weight),l.textContent="1",t.fClass?(l.style.fontFamily="inherit",l.setAttribute("class",t.fClass)):l.style.fontFamily=t.fFamily,e.appendChild(l),n=l}else{var h=new OffscreenCanvas(500,500).getContext("2d");h.font=o.style+" "+o.weight+" 100px "+t.fFamily,n=h}return{measureText:function(text){return"svg"===r?(n.textContent=text,n.getComputedTextLength()):n.measureText(text).width}}}function f(t){var e=0,n=t.charCodeAt(0);if(n>=55296&&n<=56319){var r=t.charCodeAt(1);r>=56320&&r<=57343&&(e=1024*(n-55296)+r-56320+65536)}return e}function d(t){var e=f(t);return e>=r&&e<=o}var m=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};m.isModifier=function(t,e){var n=t.toString(16)+e.toString(16);return-1!==l.indexOf(n)},m.isZeroWidthJoiner=function(t){return 8205===t},m.isFlagEmoji=function(t){return d(t.substr(0,2))&&d(t.substr(2,2))},m.isRegionalCode=d,m.isCombinedCharacter=function(t){return-1!==e.indexOf(t)},m.isRegionalFlag=function(text,t){var e=f(text.substr(t,2));if(e!==n)return!1;var r=0;for(t+=2;r<5;){if((e=f(text.substr(t,2)))<917601||e>917626)return!1;r+=1,t+=2}return 917631===f(text.substr(t,2))},m.isVariationSelector=function(t){return 65039===t},m.BLACK_FLAG_CODE_POINT=n;var v={addChars:function(t){if(t){var i;this.chars||(this.chars=[]);var e,n,r=t.length,o=this.chars.length;for(i=0;i<r;i+=1){for(e=0,n=!1;e<o;)this.chars[e].style===t[i].style&&this.chars[e].fFamily===t[i].fFamily&&this.chars[e].ch===t[i].ch&&(n=!0),e+=1;n||(this.chars.push(t[i]),o+=1)}}},addFonts:function(t,defs){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach((function(data){data.helper=c(data),data.cache={}})),void(this.fonts=t.list);var i,e=t.list,n=e.length,r=n;for(i=0;i<n;i+=1){var o,l,f=!0;if(e[i].loaded=!1,e[i].monoCase=h(e[i].fFamily,"monospace"),e[i].sansCase=h(e[i].fFamily,"sans-serif"),e[i].fPath){if("p"===e[i].fOrigin||3===e[i].origin){if((o=document.querySelectorAll('style[f-forigin="p"][f-family="'+e[i].fFamily+'"], style[f-origin="3"][f-family="'+e[i].fFamily+'"]')).length>0&&(f=!1),f){var s=createTag("style");s.setAttribute("f-forigin",e[i].fOrigin),s.setAttribute("f-origin",e[i].origin),s.setAttribute("f-family",e[i].fFamily),s.type="text/css",s.innerText="@font-face {font-family: "+e[i].fFamily+"; font-style: normal; src: url('"+e[i].fPath+"');}",defs.appendChild(s)}}else if("g"===e[i].fOrigin||1===e[i].origin){for(o=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<o.length;l+=1)-1!==o[l].href.indexOf(e[i].fPath)&&(f=!1);if(f){var d=createTag("link");d.setAttribute("f-forigin",e[i].fOrigin),d.setAttribute("f-origin",e[i].origin),d.type="text/css",d.rel="stylesheet",d.href=e[i].fPath,document.body.appendChild(d)}}else if("t"===e[i].fOrigin||2===e[i].origin){for(o=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<o.length;l+=1)e[i].fPath===o[l].src&&(f=!1);if(f){var m=createTag("link");m.setAttribute("f-forigin",e[i].fOrigin),m.setAttribute("f-origin",e[i].origin),m.setAttribute("rel","stylesheet"),m.setAttribute("href",e[i].fPath),defs.appendChild(m)}}}else e[i].loaded=!0,r-=1;e[i].helper=c(e[i],defs),e[i].cache={},this.fonts.push(e[i])}0===r?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,style,n){for(var i=0,r=this.chars.length;i<r;){if(this.chars[i].ch===e&&this.chars[i].style===style&&this.chars[i].fFamily===n)return this.chars[i];i+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,style,n)),t},getFontByName:function(t){for(var i=0,e=this.fonts.length;i<e;){if(this.fonts[i].fName===t)return this.fonts[i];i+=1}return this.fonts[0]},measureText:function(t,e,n){var r=this.getFontByName(e),o=t;if(!r.cache[o]){var l=r.helper;if(" "===t){var h=l.measureText("|"+t+"|"),c=l.measureText("||");r.cache[o]=(h-c)/100}else r.cache[o]=l.measureText(t)/100}return r.cache[o]*n},checkLoadedFonts:function(){var i,t,e,n=this.fonts.length,r=n;for(i=0;i<n;i+=1)this.fonts[i].loaded?r-=1:"n"===this.fonts[i].fOrigin||0===this.fonts[i].origin?this.fonts[i].loaded=!0:(t=this.fonts[i].monoCase.node,e=this.fonts[i].monoCase.w,t.offsetWidth!==e?(r-=1,this.fonts[i].loaded=!0):(t=this.fonts[i].sansCase.node,e=this.fonts[i].sansCase.w,t.offsetWidth!==e&&(r-=1,this.fonts[i].loaded=!0)),this.fonts[i].loaded&&(this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent),this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent)));0!==r&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return m.prototype=v,m}();function SlotManager(t){this.animationData=t}function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}SlotManager.prototype.getProp=function(data){return this.animationData.slots&&this.animationData.slots[data.sid]?Object.assign(data,this.animationData.slots[data.sid].p):data},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(component){-1===this.renderableComponents.indexOf(component)&&this.renderableComponents.push(component)},removeRenderableComponent:function(component){-1!==this.renderableComponents.indexOf(component)&&this.renderableComponents.splice(this.renderableComponents.indexOf(component),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var i,t=this.renderableComponents.length;for(i=0;i<t;i+=1)this.renderableComponents[i].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums;function SliderEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,0,0,e)}function AngleEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,0,0,e)}function ColorEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,1,0,e)}function PointEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,1,0,e)}function LayerIndexEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,0,0,e)}function MaskIndexEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,0,0,e)}function CheckboxEffect(data,t,e){this.p=PropertyFactory.getProp(t,data.v,0,0,e)}function NoValueEffect(){this.p={}}function EffectsManager(data,element){var i,t=data.ef||[];this.effectElements=[];var e,n=t.length;for(i=0;i<n;i+=1)e=new GroupEffect(t[i],element),this.effectElements.push(e)}function GroupEffect(data,element){this.init(data,element)}function BaseElement(){}function FrameElement(){}function FootageElement(data,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(data.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(data,t,e)}function AudioElement(data,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(data.refId),this.initBaseData(data,t,e),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,data.au&&data.au.lv?data.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(data,element){var i;this.data=data,this.effectElements=[],this.initDynamicPropertyContainer(element);var t,e=this.data.ef.length,n=this.data.ef;for(i=0;i<e;i+=1){switch(t=null,n[i].ty){case 0:t=new SliderEffect(n[i],element,this);break;case 1:t=new AngleEffect(n[i],element,this);break;case 2:t=new ColorEffect(n[i],element,this);break;case 3:t=new PointEffect(n[i],element,this);break;case 4:case 7:t=new CheckboxEffect(n[i],element,this);break;case 10:t=new LayerIndexEffect(n[i],element,this);break;case 11:t=new MaskIndexEffect(n[i],element,this);break;case 5:t=new EffectsManager(n[i],element,this);break;default:t=new NoValueEffect(n[i],element,this)}t&&this.effectElements.push(t)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var i=0,t=this.data.masksProperties.length;i<t;){if("n"!==this.data.masksProperties[i].mode&&!1!==this.data.masksProperties[i].cl)return!0;i+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),n=t("effects"),r=t("shape"),o=t("text"),l=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var h=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(h),0===this.data.ty||this.data.xt?this.compInterface=l(this):4===this.data.ty?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=o(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(data,t,e){this.globalData=t,this.comp=e,this.data=data,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,n=this.dynamicProperties.length;for(i=0;i<n;i+=1)(e||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(t){var i,data,e=this.layers.length;for(this.completeLayers=!0,i=e-1;i>=0;i-=1)this.elements[i]||(data=this.layers[i]).ip-data.st<=t-this.layers[i].st&&data.op-data.st>t-this.layers[i].st&&this.buildItem(i),this.completeLayers=!!this.elements[i]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(data){return new AudioElement(data,this.globalData,this)},BaseRenderer.prototype.createFootage=function(data){return new FootageElement(data,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var i;this.completeLayers=!1;var e,n=t.length,r=this.layers.length;for(i=0;i<n;i+=1)for(e=0;e<r;){if(this.layers[e].id===t[i].id){this.layers[e]=t[i];break}e+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(element,t,e){for(var n=this.elements,r=this.layers,i=0,o=r.length;i<o;)r[i].ind==t&&(n[i]&&!0!==n[i]?(e.push(n[i]),n[i].setAsParent(),void 0!==r[i].parent?this.buildElementParenting(element,r[i].parent,e):element.setHierarchy(e)):(this.buildItem(i),this.addPendingElement(element))),i+=1},BaseRenderer.prototype.addPendingElement=function(element){this.pendingElements.push(element)},BaseRenderer.prototype.searchExtraCompositions=function(t){var i,e=t.length;for(i=0;i<e;i+=1)if(t[i].xt){var n=this.createComp(t[i]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.getElementById=function(t){var i,e=this.elements.length;for(i=0;i<e;i+=1)if(this.elements[i].data.ind===t)return this.elements[i];return null},BaseRenderer.prototype.getElementByPath=function(path){var element,t=path.shift();if("number"==typeof t)element=this.elements[t];else{var i,e=this.elements.length;for(i=0;i<e;i+=1)if(this.elements[i].data.nm===t){element=this.elements[i];break}}return 0===path.length?element:element.getElementByPath(path)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(data,element,t){this.data=data,this.element=element,this.globalData=t,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,path,defs=this.globalData.defs,e=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(e),this.solidPath="";var n,r,rect,o,l,h,c=this.masksProperties,f=0,d=[],m=createElementID(),v="clipPath",y="clip-path";for(i=0;i<e;i+=1)if(("a"!==c[i].mode&&"n"!==c[i].mode||c[i].inv||100!==c[i].o.k||c[i].o.x)&&(v="mask",y="mask"),"s"!==c[i].mode&&"i"!==c[i].mode||0!==f?rect=null:((rect=createNS("rect")).setAttribute("fill","#ffffff"),rect.setAttribute("width",this.element.comp.data.w||0),rect.setAttribute("height",this.element.comp.data.h||0),d.push(rect)),path=createNS("path"),"n"===c[i].mode)this.viewData[i]={op:PropertyFactory.getProp(this.element,c[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[i],3),elem:path,lastPath:""},defs.appendChild(path);else{var _;if(f+=1,path.setAttribute("fill","s"===c[i].mode?"#000000":"#ffffff"),path.setAttribute("clip-rule","nonzero"),0!==c[i].x.k?(v="mask",y="mask",h=PropertyFactory.getProp(this.element,c[i].x,0,null,this.element),_=createElementID(),(o=createNS("filter")).setAttribute("id",_),(l=createNS("feMorphology")).setAttribute("operator","erode"),l.setAttribute("in","SourceGraphic"),l.setAttribute("radius","0"),o.appendChild(l),defs.appendChild(o),path.setAttribute("stroke","s"===c[i].mode?"#000000":"#ffffff")):(l=null,h=null),this.storedData[i]={elem:path,x:h,expan:l,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"===c[i].mode){r=d.length;var g=createNS("g");for(n=0;n<r;n+=1)g.appendChild(d[n]);var mask=createNS("mask");mask.setAttribute("mask-type","alpha"),mask.setAttribute("id",m+"_"+f),mask.appendChild(path),defs.appendChild(mask),g.setAttribute("mask","url("+getLocationHref()+"#"+m+"_"+f+")"),d.length=0,d.push(g)}else d.push(path);c[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:path,lastPath:"",op:PropertyFactory.getProp(this.element,c[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[i],3),invRect:rect},this.viewData[i].prop.k||this.drawPath(c[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(v),e=d.length,i=0;i<e;i+=1)this.maskElement.appendChild(d[i]);f>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+m+")"),defs.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var t=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:t,localMat:t,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<n;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<n;i+=1)e.multiply(this.hierarchy[i].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var i=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;i<t;)this.localTransforms[i]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[i]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),i+=1;if(this.finalTransform._localMatMdf){var e=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(e),i=1;i<t;i+=1){var n=this.localTransforms[i].matrix;e.multiply(n)}e.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var r=this.finalTransform.localOpacity;for(i=0;i<t;i+=1)r*=.01*this.localTransforms[i].opacity;this.finalTransform.localOpacity=r}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var t=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(t.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var i=0,e=t.length;for(i=0;i<e;i+=1)this.localTransforms.push(t[i])}}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i,n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):n=!1;var o,l=e.length;for(i=0;i<l;i+=1)o=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var i,e=this.element.finalTransform.mat,n=this.masksProperties.length;for(i=0;i<n;i+=1)if((this.viewData[i].prop._mdf||t)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||t)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),"n"!==this.masksProperties[i].mode&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[i].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[i].x&&(this.storedData[i].x._mdf||t))){var r=this.storedData[i].expan;this.storedData[i].x.v<0?("erode"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[i].filterId+")")),r.setAttribute("radius",-this.storedData[i].x.v)):("dilate"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",2*this.storedData[i].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var path="M0,0 ";return path+=" h"+this.globalData.compSize.w,path+=" v"+this.globalData.compSize.h,path+=" h-"+this.globalData.compSize.w,path+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,n){var i,r,o=" M"+e.v[0][0]+","+e.v[0][1];for(r=e._length,i=1;i<r;i+=1)o+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[i][0]+","+e.i[i][1]+" "+e.v[i][0]+","+e.v[i][1];if(e.c&&r>1&&(o+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==o){var l="";n.elem&&(e.c&&(l=t.inv?this.solidPath+o:o),n.elem.setAttribute("d",l)),n.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={createFilter:function(t,e){var n=createNS("filter");return n.setAttribute("id",t),!0!==e&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}};return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var i,e,source="SourceGraphic",n=t.data.ef?t.data.ef.length:0,r=createElementID(),o=filtersFactory.createFilter(r,!0),l=0;for(this.filters=[],i=0;i<n;i+=1){e=null;var h=t.data.ef[i].ty;registeredEffects$1[h]&&(e=new(0,registeredEffects$1[h].effect)(o,t.effectsManager.effectElements[i],t,idPrefix+l,source),source=idPrefix+l,registeredEffects$1[h].countsAsEffect&&(l+=1)),e&&this.filters.push(e)}l&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+r+")")),this.filters.length&&t.addRenderableComponent(this)}function registerEffect$1(t,e,n){registeredEffects$1[t]={effect:e,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(data,t,e){this.assetData=t.getAssetData(data.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(data,t,e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(element,t){this.elem=element,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var i,e=this.filters.length;for(i=0;i<e;i+=1)this.filters[i].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var i,e=this.filters.length,n=[];for(i=0;i<e;i+=1)this.filters[i].type===t&&n.push(this.filters[i]);return n},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var n=createNS("clipPath"),r=createNS("path");r.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var o=createElementID();if(n.setAttribute("id",o),n.appendChild(r),this.globalData.defs.appendChild(n),this.checkMasks()){var l=createNS("g");l.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),l.appendChild(this.layerElement),this.transformedElement=l,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var e,n,r,o,l=this.layerId+"_"+t;if(1===t||3===t){var h=createNS("mask");h.setAttribute("id",l),h.setAttribute("mask-type",3===t?"luminance":"alpha"),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),h.appendChild(r),this.globalData.defs.appendChild(h),featureSupport.maskType||1!==t||(h.setAttribute("mask-type","luminance"),e=createElementID(),n=filtersFactory.createFilter(e),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(o=createNS("g")).appendChild(r),h.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(2===t){var c=createNS("mask");c.setAttribute("id",l),c.setAttribute("mask-type","alpha");var f=createNS("g");c.appendChild(f),e=createElementID(),n=filtersFactory.createFilter(e);var d=createNS("feComponentTransfer");d.setAttribute("in","SourceGraphic"),n.appendChild(d);var m=createNS("feFuncA");m.setAttribute("type","table"),m.setAttribute("tableValues","1.0 0.0"),d.appendChild(m),this.globalData.defs.appendChild(n);var v=createNS("rect");v.setAttribute("width",this.comp.data.w),v.setAttribute("height",this.comp.data.h),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("fill","#ffffff"),v.setAttribute("opacity","0"),f.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),f.appendChild(v),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),f.appendChild(r),featureSupport.maskType||(c.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),f.appendChild(v),o.appendChild(this.layerElement),f.appendChild(o)),this.globalData.defs.appendChild(c)}this.matteMasks[t]=l}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(data,t,e){this.initFrame(),this.initBaseData(data,t,e),this.initTransform(data,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(data){var i,t=this.shapeModifiers.length;for(i=0;i<t;i+=1)this.shapeModifiers[i].addShape(data)},isShapeInAnimatedModifiers:function(data){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(data))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var i,t=this.shapes.length;for(i=0;i<t;i+=1)this.shapes[i].sh.reset();for(i=(t=this.shapeModifiers.length)-1;i>=0&&!this.shapeModifiers[i].processShapes(this._isFirstFrame);i-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,n=e.length;i<n;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var n=this.processedElements,i=n.length;i;)if(n[i-=1].elem===t)return void(n[i].pos=e);n.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var i=0,r=t.length;i<r;){if(t[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(data,t){this.data=data,this.type=data.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===data.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(t,data,e,n){var i;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(data.length),this.renderer=e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",data.length?data.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var r,o=data.length||0;for(i=0;i<o;i+=1)r=PropertyFactory.getProp(t,data[i].v,0,0,this),this.k=r.k||this.k,this.dataProps[i]={n:data[i].n,p:r};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(t,data,e){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,data.o,0,.01,this),this.w=PropertyFactory.getProp(t,data.w,0,null,this),this.d=new DashProperty(t,data.d||{},"svg",this),this.c=PropertyFactory.getProp(t,data.c,1,255,this),this.style=e,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,data,e){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,data.o,0,.01,this),this.c=PropertyFactory.getProp(t,data.c,1,255,this),this.style=e}function SVGNoStyleData(t,data,e){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=e}function GradientProperty(t,data,e){this.data=data,this.c=createTypedArray("uint8c",4*data.p);var n=data.k.k[0].s?data.k.k[0].s.length-4*data.p:data.k.k.length-4*data.p;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(e),this.prop=PropertyFactory.getProp(t,data.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(t,data,e){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,data,e)}function SVGGradientStrokeStyleData(t,data,e){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,data.w,0,null,this),this.d=new DashProperty(t,data.d||{},"svg",this),this.initGradientData(t,data,e),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var i=0,e=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),i=0;i<e;i+=1)"o"!==this.dataProps[i].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[i].p.v:this.dashArray[i]=this.dataProps[i].p.v:this.dashoffset[0]=this.dataProps[i].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(t,e){for(var i=0,n=this.o.length/2;i<n;){if(Math.abs(t[4*i]-t[4*e+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,t=this.data.k.k.length;i<t;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var i,e,n,r=4*this.data.p;for(i=0;i<r;i+=1)e=i%4==0?100:255,n=Math.round(this.prop.v[i]*e),this.c[i]!==n&&(this.c[i]=n,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,i=4*this.data.p;i<r;i+=1)e=i%2==0?100:1,n=i%2==0?Math.round(100*this.prop.v[i]):this.prop.v[i],this.o[i-4*this.data.p]!==n&&(this.o[i-4*this.data.p]=n,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(t,data,e){this.o=PropertyFactory.getProp(t,data.o,0,.01,this),this.s=PropertyFactory.getProp(t,data.s,1,null,this),this.e=PropertyFactory.getProp(t,data.e,1,null,this),this.h=PropertyFactory.getProp(t,data.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,data.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,data.g,this),this.style=e,this.stops=[],this.setGradientData(e.pElem,data),this.setGradientOpacity(data,e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,data){var e=createElementID(),n=createNS(1===data.t?"linearGradient":"radialGradient");n.setAttribute("id",e),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var r,o,l,h=[];for(l=4*data.g.p,o=0;o<l;o+=4)r=createNS("stop"),n.appendChild(r),h.push(r);t.setAttribute("gf"===data.ty?"fill":"stroke","url("+getLocationHref()+"#"+e+")"),this.gf=n,this.cst=h},SVGGradientFillStyleData.prototype.setGradientOpacity=function(data,t){if(this.g._hasOpacity&&!this.g._collapsable){var e,n,r,mask=createNS("mask"),o=createNS("path");mask.appendChild(o);var l=createElementID(),h=createElementID();mask.setAttribute("id",h);var c=createNS(1===data.t?"linearGradient":"radialGradient");c.setAttribute("id",l),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),r=data.g.k.k[0].s?data.g.k.k[0].s.length:data.g.k.k.length;var f=this.stops;for(n=4*data.g.p;n<r;n+=2)(e=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(e),f.push(e);o.setAttribute("gf"===data.ty?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),"gs"===data.ty&&(o.setAttribute("stroke-linecap",lineCapEnum[data.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[data.lj||2]),1===data.lj&&o.setAttribute("stroke-miterlimit",data.ml)),this.of=c,this.ms=mask,this.ost=f,this.maskId=h,t.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(t,e,n,r){if(0===e)return"";var i,o=t.o,l=t.i,h=t.v,c=" M"+r.applyToPointStringified(h[0][0],h[0][1]);for(i=1;i<e;i+=1)c+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(l[i][0],l[i][1])+" "+r.applyToPointStringified(h[i][0],h[i][1]);return n&&e&&(c+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(l[0][0],l[0][1])+" "+r.applyToPointStringified(h[0][0],h[0][1]),c+="z"),c},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function n(t,e,n){(n||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(n||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function r(){}function o(n,r,o){var l,h,c,f,d,m,v,y,_,x,w=r.styles.length,M=r.lvl;for(m=0;m<w;m+=1){if(f=r.sh._mdf||o,r.styles[m].lvl<M){for(y=e.reset(),_=M-r.styles[m].lvl,x=r.transformers.length-1;!f&&_>0;)f=r.transformers[x].mProps._mdf||f,_-=1,x-=1;if(f)for(_=M-r.styles[m].lvl,x=r.transformers.length-1;_>0;)y.multiply(r.transformers[x].mProps.v),_-=1,x-=1}else y=t;if(h=(v=r.sh.paths)._length,f){for(c="",l=0;l<h;l+=1)(d=v.shapes[l])&&d._length&&(c+=buildShapeString(d,d._length,d.c,y));r.caches[m]=c}else c=r.caches[m];r.styles[m].d+=!0===n.hd?"":c,r.styles[m]._mdf=f||r.styles[m]._mdf}}function l(t,e,n){var r=e.style;(e.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function h(t,e,n){c(t,e,n),f(0,e,n)}function c(t,e,n){var r,i,o,l,h,c=e.gf,f=e.g._hasOpacity,d=e.s.v,m=e.e.v;if(e.o._mdf||n){var v="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(v,e.o.v)}if(e.s._mdf||n){var y=1===t.t?"x1":"cx",_="x1"===y?"y1":"cy";c.setAttribute(y,d[0]),c.setAttribute(_,d[1]),f&&!e.g._collapsable&&(e.of.setAttribute(y,d[0]),e.of.setAttribute(_,d[1]))}if(e.g._cmdf||n){r=e.cst;var x=e.g.c;for(o=r.length,i=0;i<o;i+=1)(l=r[i]).setAttribute("offset",x[4*i]+"%"),l.setAttribute("stop-color","rgb("+x[4*i+1]+","+x[4*i+2]+","+x[4*i+3]+")")}if(f&&(e.g._omdf||n)){var w=e.g.o;for(o=(r=e.g._collapsable?e.cst:e.ost).length,i=0;i<o;i+=1)l=r[i],e.g._collapsable||l.setAttribute("offset",w[2*i]+"%"),l.setAttribute("stop-opacity",w[2*i+1])}if(1===t.t)(e.e._mdf||n)&&(c.setAttribute("x2",m[0]),c.setAttribute("y2",m[1]),f&&!e.g._collapsable&&(e.of.setAttribute("x2",m[0]),e.of.setAttribute("y2",m[1])));else if((e.s._mdf||e.e._mdf||n)&&(h=Math.sqrt(Math.pow(d[0]-m[0],2)+Math.pow(d[1]-m[1],2)),c.setAttribute("r",h),f&&!e.g._collapsable&&e.of.setAttribute("r",h)),e.e._mdf||e.h._mdf||e.a._mdf||n){h||(h=Math.sqrt(Math.pow(d[0]-m[0],2)+Math.pow(d[1]-m[1],2)));var M=Math.atan2(m[1]-d[1],m[0]-d[0]),S=e.h.v;S>=1?S=.99:S<=-1&&(S=-.99);var E=h*S,A=Math.cos(M+e.a.v)*E+d[0],T=Math.sin(M+e.a.v)*E+d[1];c.setAttribute("fx",A),c.setAttribute("fy",T),f&&!e.g._collapsable&&(e.of.setAttribute("fx",A),e.of.setAttribute("fy",T))}}function f(t,e,n){var r=e.style,o=e.d;o&&(o._mdf||n)&&o.dashStr&&(r.pElem.setAttribute("stroke-dasharray",o.dashStr),r.pElem.setAttribute("stroke-dashoffset",o.dashoffset[0])),e.c&&(e.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(data){switch(data.ty){case"fl":return l;case"gf":return c;case"gs":return h;case"st":return f;case"sh":case"el":case"rc":case"sr":return o;case"tr":return n;case"no":return r;default:return null}}}}();function SVGShapeElement(data,t,e){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(data,t,e),this.prevViewData=[]}function LetterProps(t,e,n,r,o,p){this.o=t,this.sw=e,this.sc=n,this.fc=r,this.m=o,this.p=p,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(t,data){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,data.d&&data.d.sid&&(data.d=t.globalData.slotManager.getProp(data.d)),this.data=data,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,t,e,style,n=this.shapes.length,r=this.stylesList.length,o=[],l=!1;for(e=0;e<r;e+=1){for(style=this.stylesList[e],l=!1,o.length=0,i=0;i<n;i+=1)-1!==(t=this.shapes[i]).styles.indexOf(style)&&(o.push(t),l=t._isAnimated||l);o.length>1&&l&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var i,e=t.length;for(i=0;i<e;i+=1)t[i].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(data,t){var e,n=new SVGStyleData(data,t),r=n.pElem;return"st"===data.ty?e=new SVGStrokeStyleData(this,data,n):"fl"===data.ty?e=new SVGFillStyleData(this,data,n):"gf"===data.ty||"gs"===data.ty?(e=new("gf"===data.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,data,n),this.globalData.defs.appendChild(e.gf),e.maskId&&(this.globalData.defs.appendChild(e.ms),this.globalData.defs.appendChild(e.of),r.setAttribute("mask","url("+getLocationHref()+"#"+e.maskId+")"))):"no"===data.ty&&(e=new SVGNoStyleData(this,data,n)),"st"!==data.ty&&"gs"!==data.ty||(r.setAttribute("stroke-linecap",lineCapEnum[data.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[data.lj||2]),r.setAttribute("fill-opacity","0"),1===data.lj&&r.setAttribute("stroke-miterlimit",data.ml)),2===data.r&&r.setAttribute("fill-rule","evenodd"),data.ln&&r.setAttribute("id",data.ln),data.cl&&r.setAttribute("class",data.cl),data.bm&&(r.style["mix-blend-mode"]=getBlendMode(data.bm)),this.stylesList.push(n),this.addToAnimatedContents(data,e),e},SVGShapeElement.prototype.createGroupElement=function(data){var t=new ShapeGroupData;return data.ln&&t.gr.setAttribute("id",data.ln),data.cl&&t.gr.setAttribute("class",data.cl),data.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(data.bm)),t},SVGShapeElement.prototype.createTransformElement=function(data,t){var e=TransformPropertyFactory.getTransformProperty(this,data,this),n=new SVGTransformData(e,e.o,t);return this.addToAnimatedContents(data,n),n},SVGShapeElement.prototype.createShapeElement=function(data,t,e){var n=4;"rc"===data.ty?n=5:"el"===data.ty?n=6:"sr"===data.ty&&(n=7);var r=new SVGShapeData(t,e,ShapePropertyFactory.getShapeProp(this,data,n,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(data,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(data,element){for(var i=0,t=this.animatedContents.length;i<t;){if(this.animatedContents[i].element===element)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(data),element:element,data:data})},SVGShapeElement.prototype.setElementStyles=function(t){var e,n=t.styles,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||n.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var i;this._isFirstFrame=!0;var t=this.itemsData.length;for(i=0;i<t;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,i=0;i<t;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,n,r,o,l,h){var i,c,f,d,m,v,y=[].concat(l),_=t.length-1,x=[],w=[];for(i=_;i>=0;i-=1){if((v=this.searchProcessedElement(t[i]))?e[i]=n[v-1]:t[i]._render=h,"fl"===t[i].ty||"st"===t[i].ty||"gf"===t[i].ty||"gs"===t[i].ty||"no"===t[i].ty)v?e[i].style.closed=!1:e[i]=this.createStyleElement(t[i],o),t[i]._render&&e[i].style.pElem.parentNode!==r&&r.appendChild(e[i].style.pElem),x.push(e[i].style);else if("gr"===t[i].ty){if(v)for(f=e[i].it.length,c=0;c<f;c+=1)e[i].prevViewData[c]=e[i].it[c];else e[i]=this.createGroupElement(t[i]);this.searchShapes(t[i].it,e[i].it,e[i].prevViewData,e[i].gr,o+1,y,h),t[i]._render&&e[i].gr.parentNode!==r&&r.appendChild(e[i].gr)}else"tr"===t[i].ty?(v||(e[i]=this.createTransformElement(t[i],r)),d=e[i].transform,y.push(d)):"sh"===t[i].ty||"rc"===t[i].ty||"el"===t[i].ty||"sr"===t[i].ty?(v||(e[i]=this.createShapeElement(t[i],y,o)),this.setElementStyles(e[i])):"tm"===t[i].ty||"rd"===t[i].ty||"ms"===t[i].ty||"pb"===t[i].ty||"zz"===t[i].ty||"op"===t[i].ty?(v?(m=e[i]).closed=!1:((m=ShapeModifiers.getModifier(t[i].ty)).init(this,t[i]),e[i]=m,this.shapeModifiers.push(m)),w.push(m)):"rp"===t[i].ty&&(v?(m=e[i]).closed=!0:(m=ShapeModifiers.getModifier(t[i].ty),e[i]=m,m.init(this,t,i,e),this.shapeModifiers.push(m),h=!1),w.push(m));this.addProcessedElement(t[i],i+1)}for(_=x.length,i=0;i<_;i+=1)x[i].closed=!0;for(_=w.length,i=0;i<_;i+=1)w[i].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var i;this.renderModifiers();var t=this.stylesList.length;for(i=0;i<t;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<t;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,t,e=this.animatedContents.length;for(i=0;i<e;i+=1)t=this.animatedContents[i],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(t,e,n,r,o,p){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var l=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,l=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,l=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,l=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,l=!0),this.m!==o&&(this.m=o,this._mdf.m=!0,l=!0),!p.length||this.p[0]===p[0]&&this.p[1]===p[1]&&this.p[4]===p[4]&&this.p[5]===p[5]&&this.p[12]===p[12]&&this.p[13]===p[13]||(this.p=p,this._mdf.p=!0,l=!0),l},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,data){for(var s in data)Object.prototype.hasOwnProperty.call(data,s)&&(t[s]=data[s]);return t},TextProperty.prototype.setCurrentData=function(data){data.__complete||this.completeTextData(data),this.currentData=data,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var i;this.lock=!0,this._mdf=!1;var r=this.effectsSequence.length,o=t||this.data.d.k[this.keysIndex].s;for(i=0;i<r;i+=1)o=n!==this.keysIndex?this.effectsSequence[i](o,o.t):this.effectsSequence[i](this.currentData,o.t);e!==o&&this.setCurrentData(o),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,i=0,n=t.length;i<=n-1&&!(i===n-1||t[i+1].t>e);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(text){for(var t,e,n=[],i=0,r=text.length,o=!1,l=!1,h="";i<r;)o=l,l=!1,t=text.charCodeAt(i),h=text.charAt(i),FontManager.isCombinedCharacter(t)?o=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(text,i)?h=text.substr(i,14):(e=text.charCodeAt(i+1))>=56320&&e<=57343&&(FontManager.isModifier(t,e)?(h=text.substr(i,2),o=!0):h=FontManager.isFlagEmoji(text.substr(i,4))?text.substr(i,4):text.substr(i,2)):t>56319?(e=text.charCodeAt(i+1),FontManager.isVariationSelector(t)&&(o=!0)):FontManager.isZeroWidthJoiner(t)&&(o=!0,l=!0),o?(n[n.length-1]+=h,o=!1):n.push(h),i+=h.length;return n},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var i,e,n,r,o,l,h,c=this.elem.globalData.fontManager,data=this.data,f=[],d=0,m=data.m.g,v=0,y=0,_=0,x=[],w=0,M=0,S=c.getFontByName(t.f),E=0,A=getFontProperties(S);t.fWeight=A.weight,t.fStyle=A.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),e=t.finalText.length,t.finalLineHeight=t.lh;var T,C=t.tr/1e3*t.finalSize;if(t.sz)for(var P,R,I=!0,k=t.sz[0],D=t.sz[1];I;){P=0,w=0,e=(R=this.buildFinalText(t.t)).length,C=t.tr/1e3*t.finalSize;var L=-1;for(i=0;i<e;i+=1)T=R[i].charCodeAt(0),n=!1," "===R[i]?L=i:13!==T&&3!==T||(w=0,n=!0,P+=t.finalLineHeight||1.2*t.finalSize),c.chars?(h=c.getCharData(R[i],S.fStyle,S.fFamily),E=n?0:h.w*t.finalSize/100):E=c.measureText(R[i],t.f,t.finalSize),w+E>k&&" "!==R[i]?(-1===L?e+=1:i=L,P+=t.finalLineHeight||1.2*t.finalSize,R.splice(i,L===i?1:0,"\r"),L=-1,w=0):(w+=E,w+=C);P+=S.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&D<P?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=R,e=t.finalText.length,I=!1)}w=-C,E=0;var F,O=0;for(i=0;i<e;i+=1)if(n=!1,13===(T=(F=t.finalText[i]).charCodeAt(0))||3===T?(O=0,x.push(w),M=w>M?w:M,w=-2*C,r="",n=!0,_+=1):r=F,c.chars?(h=c.getCharData(F,S.fStyle,c.getFontByName(t.f).fFamily),E=n?0:h.w*t.finalSize/100):E=c.measureText(r,t.f,t.finalSize)," "===F?O+=E+C:(w+=E+C+O,O=0),f.push({l:E,an:E,add:v,n:n,anIndexes:[],val:r,line:_,animatorJustifyOffset:0}),2==m){if(v+=E,""===r||" "===r||i===e-1){for(""!==r&&" "!==r||(v-=E);y<=i;)f[y].an=v,f[y].ind=d,f[y].extra=E,y+=1;d+=1,v=0}}else if(3==m){if(v+=E,""===r||i===e-1){for(""===r&&(v-=E);y<=i;)f[y].an=v,f[y].ind=d,f[y].extra=E,y+=1;v=0,d+=1}}else f[d].ind=d,f[d].extra=0,d+=1;if(t.l=f,M=w>M?w:M,x.push(w),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=M,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=x;var N,B,U,z,V=data.a;l=V.length;var j=[];for(o=0;o<l;o+=1){for((N=V[o]).a.sc&&(t.strokeColorAnim=!0),N.a.sw&&(t.strokeWidthAnim=!0),(N.a.fc||N.a.fh||N.a.fs||N.a.fb)&&(t.fillColorAnim=!0),z=0,U=N.s.b,i=0;i<e;i+=1)(B=f[i]).anIndexes[o]=z,(1==U&&""!==B.val||2==U&&""!==B.val&&" "!==B.val||3==U&&(B.n||" "==B.val||i==e-1)||4==U&&(B.n||i==e-1))&&(1===N.s.rn&&j.push(z),z+=1);data.a[o].s.totalChars=z;var H,G=-1;if(1===N.s.rn)for(i=0;i<e;i+=1)G!=(B=f[i]).anIndexes[o]&&(G=B.anIndexes[o],H=j.splice(Math.floor(Math.random()*j.length),1)[0]),B.anIndexes[o]=H}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=S.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var n=this.copyData({},this.data.d.k[e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,n=Math.floor;function r(t,data){this._currentTextLength=-1,this.k=!1,this.data=data,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,data.s||{k:0},0,0,this),this.e="e"in data?PropertyFactory.getProp(t,data.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,data.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,data.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,data.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,data.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,data.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var o=0,l=0,h=1,c=1;this.ne.v>0?o=this.ne.v/100:l=-this.ne.v/100,this.xe.v>0?h=1-this.xe.v/100:c=1+this.xe.v/100;var f=BezierFactory.getBezierEasing(o,l,h,c).get,d=0,s=this.finalS,m=this.finalE,v=this.data.sh;if(2===v)d=f(d=m===s?r>=m?1:0:t(0,e(.5/(m-s)+(r-s)/(m-s),1)));else if(3===v)d=f(d=m===s?r>=m?0:1:1-t(0,e(.5/(m-s)+(r-s)/(m-s),1)));else if(4===v)m===s?d=0:(d=t(0,e(.5/(m-s)+(r-s)/(m-s),1)))<.5?d*=2:d=1-2*(d-.5),d=f(d);else if(5===v){if(m===s)d=0;else{var y=m-s,_=-y/2+(r=e(t(0,r+.5-s),m-s)),a=y/2;d=Math.sqrt(1-_*_/(a*a))}d=f(d)}else 6===v?(m===s?d=0:(r=e(t(0,r+.5-s),m-s),d=(1+Math.cos(Math.PI+2*Math.PI*r/(m-s)))/2),d=f(d)):(r>=n(s)&&(d=t(0,e(r-s<0?e(m,1)-(s-r):m-r,1))),d=f(d));if(100!==this.sm.v){var x=.01*this.sm.v;0===x&&(x=1e-8);var w=.5-.5*x;d<w?d=0:(d=(d-w)/x)>1&&(d=1)}return d*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/e,s=this.s.v/e+n,r=this.e.v/e+n;if(s>r){var o=s;s=r,r=o}this.finalS=s,this.finalE=r}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(t,data,e){return new r(t,data,e)}}}();function TextAnimatorDataProperty(t,e,n){var r={propType:!1},o=PropertyFactory.getProp,l=e.a;this.a={r:l.r?o(t,l.r,0,degToRads,n):r,rx:l.rx?o(t,l.rx,0,degToRads,n):r,ry:l.ry?o(t,l.ry,0,degToRads,n):r,sk:l.sk?o(t,l.sk,0,degToRads,n):r,sa:l.sa?o(t,l.sa,0,degToRads,n):r,s:l.s?o(t,l.s,1,.01,n):r,a:l.a?o(t,l.a,1,0,n):r,o:l.o?o(t,l.o,0,.01,n):r,p:l.p?o(t,l.p,1,0,n):r,sw:l.sw?o(t,l.sw,0,0,n):r,sc:l.sc?o(t,l.sc,1,0,n):r,fc:l.fc?o(t,l.fc,1,0,n):r,fh:l.fh?o(t,l.fh,0,0,n):r,fs:l.fs?o(t,l.fs,0,.01,n):r,fb:l.fb?o(t,l.fb,0,.01,n):r,t:l.t?o(t,l.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function TextAnimatorProperty(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var i,t,e=this._textData.a.length,n=PropertyFactory.getProp;for(i=0;i<e;i+=1)t=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,o,l,h,c,f,d,m,v,y,_,x,w,M,S,E,mask,A=this._moreOptions.alignment.v,T=this._animatorsData,C=this._textData,P=this.mHelper,R=this._renderType,I=this.renderedLetters.length,k=t.l;if(this._hasMaskedPath){if(mask=this._pathData.m,!this._pathData.n||this._pathData._mdf){var D,L=mask.v;for(this._pathData.r.v&&(L=L.reverse()),l={tLength:0,segments:[]},o=L._length-1,M=0,i=0;i<o;i+=1)D=bez.buildBezierData(L.v[i],L.v[i+1],[L.o[i][0]-L.v[i][0],L.o[i][1]-L.v[i][1]],[L.i[i+1][0]-L.v[i+1][0],L.i[i+1][1]-L.v[i+1][1]]),l.tLength+=D.segmentLength,l.segments.push(D),M+=D.segmentLength;i=o,mask.v.c&&(D=bez.buildBezierData(L.v[i],L.v[0],[L.o[i][0]-L.v[i][0],L.o[i][1]-L.v[i][1]],[L.i[0][0]-L.v[0][0],L.i[0][1]-L.v[0][1]]),l.tLength+=D.segmentLength,l.segments.push(D),M+=D.segmentLength),this._pathData.pi=l}if(l=this._pathData.pi,h=this._pathData.f.v,v=0,m=1,f=0,d=!0,x=l.segments,h<0&&mask.v.c)for(l.tLength<Math.abs(h)&&(h=-Math.abs(h)%l.tLength),m=(_=x[v=x.length-1].points).length-1;h<0;)h+=_[m].partialLength,(m-=1)<0&&(m=(_=x[v-=1].points).length-1);y=(_=x[v].points)[m-1],w=(c=_[m]).partialLength}o=k.length,n=0,r=0;var F,O,N,B,U,z=1.2*t.finalSize*.714,V=!0;N=T.length;var j,H,G,W,X,Y,Z,K,$,J,Q,tt,et=-1,nt=h,it=v,st=m,ot=-1,at="",lt=this.defaultPropsArray;if(2===t.j||1===t.j){var ht=0,ut=0,ct=2===t.j?-.5:-1,ft=0,pt=!0;for(i=0;i<o;i+=1)if(k[i].n){for(ht&&(ht+=ut);ft<i;)k[ft].animatorJustifyOffset=ht,ft+=1;ht=0,pt=!0}else{for(O=0;O<N;O+=1)(F=T[O].a).t.propType&&(pt&&2===t.j&&(ut+=F.t.v*ct),(U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars)).length?ht+=F.t.v*U[0]*ct:ht+=F.t.v*U*ct);pt=!1}for(ht&&(ht+=ut);ft<i;)k[ft].animatorJustifyOffset=ht,ft+=1}for(i=0;i<o;i+=1){if(P.reset(),W=1,k[i].n)n=0,r+=t.yOffset,r+=V?1:0,h=nt,V=!1,this._hasMaskedPath&&(m=st,y=(_=x[v=it].points)[m-1],w=(c=_[m]).partialLength,f=0),at="",Q="",$="",tt="",lt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(ot!==k[i].line){switch(t.j){case 1:h+=M-t.lineWidths[k[i].line];break;case 2:h+=(M-t.lineWidths[k[i].line])/2}ot=k[i].line}et!==k[i].ind&&(k[et]&&(h+=k[et].extra),h+=k[i].an/2,et=k[i].ind),h+=A[0]*k[i].an*.005;var mt=0;for(O=0;O<N;O+=1)(F=T[O].a).p.propType&&((U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars)).length?mt+=F.p.v[0]*U[0]:mt+=F.p.v[0]*U),F.a.propType&&((U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars)).length?mt+=F.a.v[0]*U[0]:mt+=F.a.v[0]*U);for(d=!0,this._pathData.a.v&&(h=.5*k[0].an+(M-this._pathData.f.v-.5*k[0].an-.5*k[k.length-1].an)*et/(o-1),h+=this._pathData.f.v);d;)f+w>=h+mt||!_?(S=(h+mt-f)/c.partialLength,H=y.point[0]+(c.point[0]-y.point[0])*S,G=y.point[1]+(c.point[1]-y.point[1])*S,P.translate(-A[0]*k[i].an*.005,-A[1]*z*.01),d=!1):_&&(f+=c.partialLength,(m+=1)>=_.length&&(m=0,x[v+=1]?_=x[v].points:mask.v.c?(m=0,_=x[v=0].points):(f-=c.partialLength,_=null)),_&&(y=c,w=(c=_[m]).partialLength));j=k[i].an/2-k[i].add,P.translate(-j,0,0)}else j=k[i].an/2-k[i].add,P.translate(-j,0,0),P.translate(-A[0]*k[i].an*.005,-A[1]*z*.01,0);for(O=0;O<N;O+=1)(F=T[O].a).t.propType&&(U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars),0===n&&0===t.j||(this._hasMaskedPath?U.length?h+=F.t.v*U[0]:h+=F.t.v*U:U.length?n+=F.t.v*U[0]:n+=F.t.v*U));for(t.strokeWidthAnim&&(Y=t.sw||0),t.strokeColorAnim&&(X=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(Z=[t.fc[0],t.fc[1],t.fc[2]]),O=0;O<N;O+=1)(F=T[O].a).a.propType&&((U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars)).length?P.translate(-F.a.v[0]*U[0],-F.a.v[1]*U[1],F.a.v[2]*U[2]):P.translate(-F.a.v[0]*U,-F.a.v[1]*U,F.a.v[2]*U));for(O=0;O<N;O+=1)(F=T[O].a).s.propType&&((U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars)).length?P.scale(1+(F.s.v[0]-1)*U[0],1+(F.s.v[1]-1)*U[1],1):P.scale(1+(F.s.v[0]-1)*U,1+(F.s.v[1]-1)*U,1));for(O=0;O<N;O+=1){if(F=T[O].a,U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars),F.sk.propType&&(U.length?P.skewFromAxis(-F.sk.v*U[0],F.sa.v*U[1]):P.skewFromAxis(-F.sk.v*U,F.sa.v*U)),F.r.propType&&(U.length?P.rotateZ(-F.r.v*U[2]):P.rotateZ(-F.r.v*U)),F.ry.propType&&(U.length?P.rotateY(F.ry.v*U[1]):P.rotateY(F.ry.v*U)),F.rx.propType&&(U.length?P.rotateX(F.rx.v*U[0]):P.rotateX(F.rx.v*U)),F.o.propType&&(U.length?W+=(F.o.v*U[0]-W)*U[0]:W+=(F.o.v*U-W)*U),t.strokeWidthAnim&&F.sw.propType&&(U.length?Y+=F.sw.v*U[0]:Y+=F.sw.v*U),t.strokeColorAnim&&F.sc.propType)for(K=0;K<3;K+=1)U.length?X[K]+=(F.sc.v[K]-X[K])*U[0]:X[K]+=(F.sc.v[K]-X[K])*U;if(t.fillColorAnim&&t.fc){if(F.fc.propType)for(K=0;K<3;K+=1)U.length?Z[K]+=(F.fc.v[K]-Z[K])*U[0]:Z[K]+=(F.fc.v[K]-Z[K])*U;F.fh.propType&&(Z=U.length?addHueToRGB(Z,F.fh.v*U[0]):addHueToRGB(Z,F.fh.v*U)),F.fs.propType&&(Z=U.length?addSaturationToRGB(Z,F.fs.v*U[0]):addSaturationToRGB(Z,F.fs.v*U)),F.fb.propType&&(Z=U.length?addBrightnessToRGB(Z,F.fb.v*U[0]):addBrightnessToRGB(Z,F.fb.v*U))}}for(O=0;O<N;O+=1)(F=T[O].a).p.propType&&(U=T[O].s.getMult(k[i].anIndexes[O],C.a[O].s.totalChars),this._hasMaskedPath?U.length?P.translate(0,F.p.v[1]*U[0],-F.p.v[2]*U[1]):P.translate(0,F.p.v[1]*U,-F.p.v[2]*U):U.length?P.translate(F.p.v[0]*U[0],F.p.v[1]*U[1],-F.p.v[2]*U[2]):P.translate(F.p.v[0]*U,F.p.v[1]*U,-F.p.v[2]*U));if(t.strokeWidthAnim&&($=Y<0?0:Y),t.strokeColorAnim&&(J="rgb("+Math.round(255*X[0])+","+Math.round(255*X[1])+","+Math.round(255*X[2])+")"),t.fillColorAnim&&t.fc&&(Q="rgb("+Math.round(255*Z[0])+","+Math.round(255*Z[1])+","+Math.round(255*Z[2])+")"),this._hasMaskedPath){if(P.translate(0,-t.ls),P.translate(0,A[1]*z*.01+r,0),this._pathData.p.v){E=(c.point[1]-y.point[1])/(c.point[0]-y.point[0]);var gt=180*Math.atan(E)/Math.PI;c.point[0]<y.point[0]&&(gt+=180),P.rotate(-gt*Math.PI/180)}P.translate(H,G,0),h-=A[0]*k[i].an*.005,k[i+1]&&et!==k[i+1].ind&&(h+=k[i].an/2,h+=.001*t.tr*t.finalSize)}else{switch(P.translate(n,r,0),t.ps&&P.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:P.translate(k[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[k[i].line]),0,0);break;case 2:P.translate(k[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[k[i].line])/2,0,0)}P.translate(0,-t.ls),P.translate(j,0,0),P.translate(A[0]*k[i].an*.005,A[1]*z*.01,0),n+=k[i].l+.001*t.tr*t.finalSize}"html"===R?at=P.toCSS():"svg"===R?at=P.to2dCSS():lt=[P.props[0],P.props[1],P.props[2],P.props[3],P.props[4],P.props[5],P.props[6],P.props[7],P.props[8],P.props[9],P.props[10],P.props[11],P.props[12],P.props[13],P.props[14],P.props[15]],tt=W}I<=i?(B=new LetterProps(tt,$,J,Q,at,lt),this.renderedLetters.push(B),I+=1,this.lettersChangedFlag=!0):(B=this.renderedLetters[i],this.lettersChangedFlag=B.update(tt,$,J,Q,at,lt)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(data,t,e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(data,t,e),this.textProperty=new TextProperty(this,data.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(data.t,this.renderType,this),this.initTransform(data,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var n,r,o=e.length,l="";for(n=0;n<o;n+=1)"sh"===e[n].ty&&(r=e[n].ks.k,l+=buildShapeString(r,r.i.length,!0,t));return l},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,n,r,o){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0)}e.translate(r,o,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(data,t,e){this.textSpans=[],this.renderType="svg",this.initElement(data,t,e)}function ISolidElement(data,t,e){this.initElement(data,t,e)}function NullElement(data,t,e){this.initFrame(),this.initBaseData(data,t,e),this.initFrame(),this.initTransform(data,t,e),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(data,t,e){this.layers=data.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(data,t,e),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(e&&e.title){var r=createNS("title"),o=createElementID();r.setAttribute("id",o),r.textContent=e.title,this.svgElement.appendChild(r),n+=o}if(e&&e.description){var l=createNS("desc"),h=createElementID();l.setAttribute("id",h),l.textContent=e.description,this.svgElement.appendChild(l),n+=" "+h}n&&this.svgElement.setAttribute("aria-labelledby",n);var defs=createNS("defs");this.svgElement.appendChild(defs);var c=createNS("g");this.svgElement.appendChild(c),this.layerElement=c,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:defs,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var i=0,e=t.length,n=[],r="";i<e;)t[i]===String.fromCharCode(13)||t[i]===String.fromCharCode(3)?(n.push(r),r=""):r+=t[i],i+=1;return n.push(r),n},SVGTextLottieElement.prototype.buildShapeData=function(data,t){if(data.shapes&&data.shapes.length){var e=data.shapes[0];if(e.it){var n=e.it[e.it.length-1];n.s&&(n.s.k[0]=t,n.s.k[1]=t)}}return data},SVGTextLottieElement.prototype.buildNewText=function(){var i,t;this.addDynamicProperty(this);var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var n=this.globalData.fontManager.getFontByName(e.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=e.fWeight,o=e.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",e.t);var l,h=e.l||[],c=!!this.globalData.fontManager.chars;t=h.length;var f=this.mHelper,d=this.data.singleShape,m=0,v=0,y=!0,_=.001*e.tr*e.finalSize;if(!d||c||e.sz){var x,w=this.textSpans.length;for(i=0;i<t;i+=1){if(this.textSpans[i]||(this.textSpans[i]={span:null,childSpan:null,glyph:null}),!c||!d||0===i){if(l=w>i?this.textSpans[i].span:createNS(c?"g":"text"),w<=i){if(l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),this.textSpans[i].span=l,c){var M=createNS("g");l.appendChild(M),this.textSpans[i].childSpan=M}this.textSpans[i].span=l,this.layerElement.appendChild(l)}l.style.display="inherit"}if(f.reset(),d&&(h[i].n&&(m=-_,v+=e.yOffset,v+=y?1:0,y=!1),this.applyTextPropertiesToMatrix(e,f,h[i].line,m,v),m+=h[i].l||0,m+=_),c){var S;if(1===(x=this.globalData.fontManager.getCharData(e.finalText[i],n.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily)).t)S=new SVGCompElement(x.data,this.globalData,this);else{var data=emptyShapeData;x.data&&x.data.shapes&&(data=this.buildShapeData(x.data,e.finalSize)),S=new SVGShapeElement(data,this.globalData,this)}if(this.textSpans[i].glyph){var glyph=this.textSpans[i].glyph;this.textSpans[i].childSpan.removeChild(glyph.layerElement),glyph.destroy()}this.textSpans[i].glyph=S,S._debug=!0,S.prepareFrame(0),S.renderFrame(),this.textSpans[i].childSpan.appendChild(S.layerElement),1===x.t&&this.textSpans[i].childSpan.setAttribute("transform","scale("+e.finalSize/100+","+e.finalSize/100+")")}else d&&l.setAttribute("transform","translate("+f.props[12]+","+f.props[13]+")"),l.textContent=h[i].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}d&&l&&l.setAttribute("d","")}else{var E=this.textContainer,A="start";switch(e.j){case 1:A="end";break;case 2:A="middle";break;default:A="start"}E.setAttribute("text-anchor",A),E.setAttribute("letter-spacing",_);var T=this.buildTextContents(e.finalText);for(t=T.length,v=e.ps?e.ps[1]+e.ascent:0,i=0;i<t;i+=1)(l=this.textSpans[i].span||createNS("tspan")).textContent=T[i],l.setAttribute("x",0),l.setAttribute("y",v),l.style.display="inherit",E.appendChild(l),this.textSpans[i]||(this.textSpans[i]={span:null,glyph:null}),this.textSpans[i].span=l,v+=e.finalLineHeight;this.layerElement.appendChild(E)}for(;i<this.textSpans.length;)this.textSpans[i].span.style.display="none",i+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var i,t,e=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,i=0;i<e;i+=1)(t=this.textSpans[i].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var i,t;this._sizeChanged=!0;var e,n,r,o=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(t=l.length,i=0;i<t;i+=1)l[i].n||(e=o[i],n=this.textSpans[i].span,(r=this.textSpans[i].glyph)&&r.renderFrame(),e._mdf.m&&n.setAttribute("transform",e.m),e._mdf.o&&n.setAttribute("opacity",e.o),e._mdf.sw&&n.setAttribute("stroke-width",e.sw),e._mdf.sc&&n.setAttribute("stroke",e.sc),e._mdf.fc&&n.setAttribute("fill",e.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var rect=createNS("rect");rect.setAttribute("width",this.data.sw),rect.setAttribute("height",this.data.sh),rect.setAttribute("fill",this.data.sc),this.layerElement.appendChild(rect)},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(data){return new NullElement(data,this.globalData,this)},SVGRendererBase.prototype.createShape=function(data){return new SVGShapeElement(data,this.globalData,this)},SVGRendererBase.prototype.createText=function(data){return new SVGTextLottieElement(data,this.globalData,this)},SVGRendererBase.prototype.createImage=function(data){return new IImageElement(data,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(data){return new ISolidElement(data,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var defs=this.globalData.defs;this.setupGlobalData(t,defs),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var e=createNS("clipPath"),rect=createNS("rect");rect.setAttribute("width",t.w),rect.setAttribute("height",t.h),rect.setAttribute("x",0),rect.setAttribute("y",0);var n=createElementID();e.setAttribute("id",n),e.appendChild(rect),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),defs.appendChild(e),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){var i;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var i=0,e=this.layers.length;for(i=0;i<e;i+=1)if(this.layers[i].ind===t)return i;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var element=this.createItem(this.layers[t]);if(e[t]=element,getExpressionsPlugin()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(element),element.initExpressions()),this.appendElementInPos(element,t),this.layers[t].tt){var n="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===n)return;if(this.elements[n]&&!0!==this.elements[n]){var r=e[n].getMatte(this.layers[t].tt);element.setMatte(r)}else this.buildItem(n),this.addPendingElement(element)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var element=this.pendingElements.pop();if(element.checkParenting(),element.data.tt)for(var i=0,t=this.elements.length;i<t;){if(this.elements[i]===element){var e="tp"in element.data?this.findIndexByInd(element.data.tp):i-1,n=this.elements[e].getMatte(this.layers[i].tt);element.setMatte(n);break}i+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var i;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=e-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf)for(i=0;i<e;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(element,t){var e=element.getBaseElement();if(e){for(var n,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(data,t,e){this.initFrame(),this.initBaseData(data,t,e),this.initTransform(data,t,e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=n-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(data){return new SVGCompElement(data,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(data){return new SVGCompElement(data,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(t){var i,e=t.length,n="_";for(i=0;i<e;i+=1)n+=t[i].transform.key+"_";var r=this.sequences[n];return r||(r={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=r,this.sequenceList.push(r)),r},processSequence:function(t,e){for(var i=0,n=t.transforms.length,r=e;i<n&&!e;){if(t.transforms[i].transform.mProps._mdf){r=!0;break}i+=1}if(r)for(t.finalTransform.reset(),i=n-1;i>=0;i-=1)t.finalTransform.multiply(t.transforms[i].transform.mProps.v);t._mdf=r},processSequences:function(t){var i,e=this.sequenceList.length;for(i=0;i<e;i+=1)this.processSequence(this.sequenceList[i],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",e=null,n=null,svg=null;function r(){var r,o,l;e||(r=createNS("svg"),o=createNS("filter"),l=createNS("feColorMatrix"),o.setAttribute("id",t),l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),o.appendChild(l),r.appendChild(o),r.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(r.style.display="none"),svg=r,document.body.appendChild(svg),e=createTag("canvas"),(n=e.getContext("2d")).filter="url(#"+t+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}return{load:r,get:function(canvas){return e||r(),e.width=canvas.width,e.height=canvas.height,n.filter="url(#"+t+")",e}}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var canvas=createTag("canvas");return canvas.width=t,canvas.height=e,canvas}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(t){var i,e,n=t.data.ef?t.data.ef.length:0;for(this.filters=[],i=0;i<n;i+=1){e=null;var r=t.data.ef[i].ty;registeredEffects[r]&&(e=new(0,registeredEffects[r].effect)(t.effectsManager.effectElements[i],t)),e&&this.filters.push(e)}this.filters.length&&t.addRenderableComponent(this)}function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(data,element){var i;this.data=data,this.element=element,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var t=this.masksProperties.length,e=!1;for(i=0;i<t;i+=1)"n"!==this.masksProperties[i].mode&&(e=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=e,e&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(t){var i,e=this.filters.length;for(i=0;i<e;i+=1)this.filters[i].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var i,e=this.filters.length,n=[];for(i=0;i<e;i+=1)this.filters[i].type===t&&n.push(this.filters[i]);return n},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i,t,e,data,n=this.element.finalTransform.mat,r=this.element.canvasContext,o=this.masksProperties.length;for(r.beginPath(),i=0;i<o;i+=1)if("n"!==this.masksProperties[i].mode){var l;this.masksProperties[i].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),data=this.viewData[i].v,t=n.applyToPointArray(data.v[0][0],data.v[0][1],0),r.moveTo(t[0],t[1]);var h=data._length;for(l=1;l<h;l+=1)e=n.applyToTriplePoints(data.o[l-1],data.i[l],data.v[l]),r.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);e=n.applyToTriplePoints(data.o[l-1],data.i[0],data.v[0]),r.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(element,data,t,e){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i,n=4;"rc"===data.ty?n=5:"el"===data.ty?n=6:"sr"===data.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(element,data,n,element);var r,o=t.length;for(i=0;i<o;i+=1)t[i].closed||(r={transforms:e.addTransformSequence(t[i].transforms),trNodes:[]},this.styledShapes.push(r),t[i].elements.push(r))}function CVShapeElement(data,t,e){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(data,t,e)}function CVTextElement(data,t,e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(data,t,e)}function CVImageElement(data,t,e){this.assetData=t.getAssetData(data.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(data,t,e)}function CVSolidElement(data,t,e){this.initElement(data,t,e)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var i;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,i=0;i<15;i+=1){var t=new CanvasContext;this.stack[i]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(data,t,e){this.completeLayers=!1,this.layers=data.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(data,t,e),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(data,t,e){this.initElement(data,t,e)}function HShapeElement(data,t,e){this.shapes=[],this.shapesData=data.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(data,t,e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(data,t,e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(data,t,e)}function HCameraElement(data,t,e){this.initFrame(),this.initBaseData(data,t,e),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,data.pe,0,0,this),data.ks.p.s?(this.px=n(this,data.ks.p.x,1,0,this),this.py=n(this,data.ks.p.y,1,0,this),this.pz=n(this,data.ks.p.z,1,0,this)):this.p=n(this,data.ks.p,1,0,this),data.ks.a&&(this.a=n(this,data.ks.a,1,0,this)),data.ks.or.k.length&&data.ks.or.k[0].to){var i,r=data.ks.or.k.length;for(i=0;i<r;i+=1)data.ks.or.k[i].to=null,data.ks.or.k[i].ti=null}this.or=n(this,data.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,data.ks.rx,0,degToRads,this),this.ry=n(this,data.ks.ry,0,degToRads,this),this.rz=n(this,data.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(data,t,e){this.assetData=t.getAssetData(data.refId),this.initElement(data,t,e)}function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(data,t,e){this.layers=data.layers,this.supports3d=!data.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(data,t,e),this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,e=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(e);var n=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0].getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],e=t.getContext("2d");if(this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var n=assetLoader.getLumaCanvas(this.canvasContext.canvas);n.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(n,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||t)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var e=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(data,t){var e={data:data,type:data.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===data.hd},n={};if("fl"===data.ty||"st"===data.ty?(n.c=PropertyFactory.getProp(this,data.c,1,255,this),n.c.k||(e.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):"gf"!==data.ty&&"gs"!==data.ty||(n.s=PropertyFactory.getProp(this,data.s,1,null,this),n.e=PropertyFactory.getProp(this,data.e,1,null,this),n.h=PropertyFactory.getProp(this,data.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,data.g,this)),n.o=PropertyFactory.getProp(this,data.o,0,.01,this),"st"===data.ty||"gs"===data.ty){if(e.lc=lineCapEnum[data.lc||2],e.lj=lineJoinEnum[data.lj||2],1==data.lj&&(e.ml=data.ml),n.w=PropertyFactory.getProp(this,data.w,0,null,this),n.w.k||(e.wi=n.w.v),data.d){var r=new DashProperty(this,data.d,"canvas",this);n.d=r,n.d.k||(e.da=n.d.dashArray,e.do=n.d.dashoffset[0])}}else e.r=2===data.r?"evenodd":"nonzero";return this.stylesList.push(e),n.style=e,n},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(data){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,data.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,data,this)}}},CVShapeElement.prototype.createShapeElement=function(data){var t=new CVShapeData(this,data,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var i;this._isFirstFrame=!0;var t=this.itemsData.length;for(i=0;i<t;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,i=0;i<t;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var i,e=this.stylesList.length;for(i=0;i<e;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,t=this.stylesList.length;for(i=0;i<t;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var i,e=t.length;for(i=0;i<e;i+=1)t[i].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,n,r,o){var i,l,h,c,f,d,m=t.length-1,v=[],y=[],_=[].concat(o);for(i=m;i>=0;i-=1){if((c=this.searchProcessedElement(t[i]))?e[i]=n[c-1]:t[i]._shouldRender=r,"fl"===t[i].ty||"st"===t[i].ty||"gf"===t[i].ty||"gs"===t[i].ty)c?e[i].style.closed=!1:e[i]=this.createStyleElement(t[i],_),v.push(e[i].style);else if("gr"===t[i].ty){if(c)for(h=e[i].it.length,l=0;l<h;l+=1)e[i].prevViewData[l]=e[i].it[l];else e[i]=this.createGroupElement(t[i]);this.searchShapes(t[i].it,e[i].it,e[i].prevViewData,r,_)}else"tr"===t[i].ty?(c||(d=this.createTransformElement(t[i]),e[i]=d),_.push(e[i]),this.addTransformToStyleList(e[i])):"sh"===t[i].ty||"rc"===t[i].ty||"el"===t[i].ty||"sr"===t[i].ty?c||(e[i]=this.createShapeElement(t[i])):"tm"===t[i].ty||"rd"===t[i].ty||"pb"===t[i].ty||"zz"===t[i].ty||"op"===t[i].ty?(c?(f=e[i]).closed=!1:((f=ShapeModifiers.getModifier(t[i].ty)).init(this,t[i]),e[i]=f,this.shapeModifiers.push(f)),y.push(f)):"rp"===t[i].ty&&(c?(f=e[i]).closed=!0:(f=ShapeModifiers.getModifier(t[i].ty),e[i]=f,f.init(this,t,i,e),this.shapeModifiers.push(f),r=!1),y.push(f));this.addProcessedElement(t[i],i+1)}for(this.removeTransformFromStyleList(),this.closeStyles(v),m=y.length,i=0;i<m;i+=1)y[i].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,t,e,n,r,o,l,h,c,f=this.stylesList.length,d=this.globalData.renderer,m=this.globalData.canvasContext;for(i=0;i<f;i+=1)if(("st"!==(h=(c=this.stylesList[i]).type)&&"gs"!==h||0!==c.wi)&&c.data._shouldRender&&0!==c.coOp&&0!==this.globalData.currentGlobalAlpha){for(d.save(),o=c.elements,"st"===h||"gs"===h?(d.ctxStrokeStyle("st"===h?c.co:c.grd),d.ctxLineWidth(c.wi),d.ctxLineCap(c.lc),d.ctxLineJoin(c.lj),d.ctxMiterLimit(c.ml||0)):d.ctxFillStyle("fl"===h?c.co:c.grd),d.ctxOpacity(c.coOp),"st"!==h&&"gs"!==h&&m.beginPath(),d.ctxTransform(c.preTransforms.finalTransform.props),e=o.length,t=0;t<e;t+=1){for("st"!==h&&"gs"!==h||(m.beginPath(),c.da&&(m.setLineDash(c.da),m.lineDashOffset=c.do)),r=(l=o[t].trNodes).length,n=0;n<r;n+=1)"m"===l[n].t?m.moveTo(l[n].p[0],l[n].p[1]):"c"===l[n].t?m.bezierCurveTo(l[n].pts[0],l[n].pts[1],l[n].pts[2],l[n].pts[3],l[n].pts[4],l[n].pts[5]):m.closePath();"st"!==h&&"gs"!==h||(d.ctxStroke(),c.da&&m.setLineDash(this.dashResetter))}"st"!==h&&"gs"!==h&&this.globalData.renderer.ctxFill(c.r),d.restore()}},CVShapeElement.prototype.renderShape=function(t,e,data,n){var i,r;for(r=t,i=e.length-1;i>=0;i-=1)"tr"===e[i].ty?(r=data[i].transform,this.renderShapeTransform(t,r)):"sh"===e[i].ty||"el"===e[i].ty||"rc"===e[i].ty||"sr"===e[i].ty?this.renderPath(e[i],data[i]):"fl"===e[i].ty?this.renderFill(e[i],data[i],r):"st"===e[i].ty?this.renderStroke(e[i],data[i],r):"gf"===e[i].ty||"gs"===e[i].ty?this.renderGradientFill(e[i],data[i],r):"gr"===e[i].ty?this.renderShape(r,e[i].it,data[i].it):e[i].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,n,r,o=t.trNodes,l=e.paths,h=l._length;o.length=0;var c=t.transforms.finalTransform;for(r=0;r<h;r+=1){var f=l.shapes[r];if(f&&f.v){for(n=f._length,i=1;i<n;i+=1)1===i&&o.push({t:"m",p:c.applyToPointArray(f.v[0][0],f.v[0][1],0)}),o.push({t:"c",pts:c.applyToTriplePoints(f.o[i-1],f.i[i],f.v[i])});1===n&&o.push({t:"m",p:c.applyToPointArray(f.v[0][0],f.v[0][1],0)}),f.c&&n&&(o.push({t:"c",pts:c.applyToTriplePoints(f.o[i-1],f.i[0],f.v[0])}),o.push({t:"z"}))}}t.trNodes=o}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var i,n=e.styledShapes.length;for(i=0;i<n;i+=1)this.renderStyledShape(e.styledShapes[i],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,n){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,n){var r,o=e.style;if(!o.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var i,l=this.globalData.canvasContext,h=e.s.v,c=e.e.v;if(1===t.t)r=l.createLinearGradient(h[0],h[1],c[0],c[1]);else{var f=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),d=Math.atan2(c[1]-h[1],c[0]-h[0]),m=e.h.v;m>=1?m=.99:m<=-1&&(m=-.99);var v=f*m,y=Math.cos(d+e.a.v)*v+h[0],_=Math.sin(d+e.a.v)*v+h[1];r=l.createRadialGradient(y,_,0,h[0],h[1],f)}var x=t.g.p,w=e.g.c,M=1;for(i=0;i<x;i+=1)e.g._hasOpacity&&e.g._collapsable&&(M=e.g.o[2*i+1]),r.addColorStop(w[4*i]/100,"rgba("+w[4*i+1]+","+w[4*i+2]+","+w[4*i+3]+","+M+")");o.grd=r}o.coOp=e.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(t,e,n){var r=e.style,o=e.d;o&&(o._mdf||this._isFirstFrame)&&(r.da=o.dashArray,r.do=o.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var n=!1;t.sc&&(n=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var i,r,o,l,h,c,f,d,m,v,y,_,x=this.globalData.fontManager.getFontByName(t.f),w=t.l,M=this.mHelper;this.stroke=n,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,r=t.finalText.length;var S=this.data.singleShape,E=.001*t.tr*t.finalSize,A=0,T=0,C=!0,P=0;for(i=0;i<r;i+=1){l=(o=this.globalData.fontManager.getCharData(t.finalText[i],x.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&o.data||{},M.reset(),S&&w[i].n&&(A=-E,T+=t.yOffset,T+=C?1:0,C=!1),m=(f=l.shapes?l.shapes[0].it:[]).length,M.scale(t.finalSize/100,t.finalSize/100),S&&this.applyTextPropertiesToMatrix(t,M,w[i].line,A,T),y=createSizedArray(m-1);var R=0;for(d=0;d<m;d+=1)if("sh"===f[d].ty){for(c=f[d].ks.k.i.length,v=f[d].ks.k,_=[],h=1;h<c;h+=1)1===h&&_.push(M.applyToX(v.v[0][0],v.v[0][1],0),M.applyToY(v.v[0][0],v.v[0][1],0)),_.push(M.applyToX(v.o[h-1][0],v.o[h-1][1],0),M.applyToY(v.o[h-1][0],v.o[h-1][1],0),M.applyToX(v.i[h][0],v.i[h][1],0),M.applyToY(v.i[h][0],v.i[h][1],0),M.applyToX(v.v[h][0],v.v[h][1],0),M.applyToY(v.v[h][0],v.v[h][1],0));_.push(M.applyToX(v.o[h-1][0],v.o[h-1][1],0),M.applyToY(v.o[h-1][0],v.o[h-1][1],0),M.applyToX(v.i[0][0],v.i[0][1],0),M.applyToY(v.i[0][0],v.i[0][1],0),M.applyToX(v.v[0][0],v.v[0][1],0),M.applyToY(v.v[0][0],v.v[0][1],0)),y[R]=_,R+=1}S&&(A+=w[i].l,A+=E),this.textSpans[P]?this.textSpans[P].elem=y:this.textSpans[P]={elem:y},P+=1}},CVTextElement.prototype.renderInnerContent=function(){var i,t,e,n,r,o;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var l,h=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;t=c.length;var f,d,m=null,v=null,y=null,_=this.globalData.renderer;for(i=0;i<t;i+=1)if(!c[i].n){if((l=h[i])&&(_.save(),_.ctxTransform(l.p),_.ctxOpacity(l.o)),this.fill){for(l&&l.fc?m!==l.fc&&(_.ctxFillStyle(l.fc),m=l.fc):m!==this.values.fill&&(m=this.values.fill,_.ctxFillStyle(this.values.fill)),n=(f=this.textSpans[i].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<n;e+=1)for(o=(d=f[e]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(d[r],d[r+1],d[r+2],d[r+3],d[r+4],d[r+5]);this.globalData.canvasContext.closePath(),_.ctxFill()}if(this.stroke){for(l&&l.sw?y!==l.sw&&(y=l.sw,_.ctxLineWidth(l.sw)):y!==this.values.sWidth&&(y=this.values.sWidth,_.ctxLineWidth(this.values.sWidth)),l&&l.sc?v!==l.sc&&(v=l.sc,_.ctxStrokeStyle(l.sc)):v!==this.values.stroke&&(v=this.values.stroke,_.ctxStrokeStyle(this.values.stroke)),n=(f=this.textSpans[i].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<n;e+=1)for(o=(d=f[e]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(d[r],d[r+1],d[r+2],d[r+3],d[r+4],d[r+5]);this.globalData.canvasContext.closePath(),_.ctxStroke()}l&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var canvas=createTag("canvas");canvas.width=this.assetData.w,canvas.height=this.assetData.h;var t,e,n=canvas.getContext("2d"),r=this.img.width,o=this.img.height,l=r/o,h=this.assetData.w/this.assetData.h,c=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;l>h&&"xMidYMid slice"===c||l<h&&"xMidYMid slice"!==c?t=(e=o)*h:e=(t=r)/h,n.drawImage(this.img,(r-t)/2,(o-e)/2,t,e,0,0,this.assetData.w,this.assetData.h),this.img=canvas}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(data){return new CVShapeElement(data,this.globalData,this)},CanvasRendererBase.prototype.createText=function(data){return new CVTextElement(data,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(data){return new CVImageElement(data,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(data){return new CVSolidElement(data,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){1===t[0]&&0===t[1]&&0===t[4]&&1===t[5]&&0===t[12]&&0===t[13]||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,n,r){this.canvasContext.fillRect(t,e,n,r)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){this.renderConfig.clearCanvas?(t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var n="0px 0px 0px";e.transformOrigin=n,e.mozTransformOrigin=n,e.webkitTransformOrigin=n,e["-webkit-transform"]=n,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){var n,r,o,l;if(this.reset(),t?(n=t,r=e,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var h=this.renderConfig.preserveAspectRatio.split(" "),c=h[1]||"meet",f=h[0]||"xMidYMid",d=f.substr(0,4),m=f.substr(4);o=n/r,(l=this.transformCanvas.w/this.transformCanvas.h)>o&&"meet"===c||l<o&&"slice"===c?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===d&&(l<o&&"meet"===c||l>o&&"slice"===c)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===d&&(l<o&&"meet"===c||l>o&&"slice"===c)?(n-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===m&&(l>o&&"meet"===c||l<o&&"slice"===c)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===m&&(l>o&&"meet"===c||l<o&&"slice"===c)?(r-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var i;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),i=(this.layers?this.layers.length:0)-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var i;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var n=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=n-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=n-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var element=this.createItem(this.layers[t],this,this.globalData);e[t]=element,element.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var t=2*this._length,i=0;for(i=this._length;i<t;i+=1)this.stack[i]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var i,e=this.stack[this.cArrPos],n=e.transform,r=this.cTr.props;for(i=0;i<16;i+=1)r[i]=n[i];if(t){this.nativeContext.restore();var o=this.stack[this.cArrPos+1];this.appliedFillStyle=o.fillStyle,this.appliedStrokeStyle=o.strokeStyle,this.appliedLineWidth=o.lineWidth,this.appliedLineCap=o.lineCap,this.appliedLineJoin=o.lineJoin,this.appliedMiterLimit=o.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(t||-1!==e.opacity&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var i,n=this.stack[this.cArrPos];for(i=0;i<16;i+=1)n.transform[i]=e[i];this.cArrPos+=1;var r=this.stack[this.cArrPos];r.opacity=n.opacity,r.fillStyle=n.fillStyle,r.strokeStyle=n.strokeStyle,r.lineWidth=n.lineWidth,r.lineCap=n.lineCap,r.lineJoin=n.lineJoin,r.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var n=e.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,n,r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,n,r)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),i=this.layers.length-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},CVCompElement.prototype.destroy=function(){var i;for(i=this.layers.length-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(data){return new CVCompElement(data,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(data){return new CVCompElement(data,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var rect;this.data.hasMask?((rect=createNS("rect")).setAttribute("width",this.data.sw),rect.setAttribute("height",this.data.sh),rect.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((rect=createTag("div")).style.width=this.data.sw+"px",rect.style.height=this.data.sh+"px",rect.style.backgroundColor=this.data.sc),this.layerElement.appendChild(rect)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e=t[i].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var i,n,r,o,l,h=t.sh.v,c=t.transformers,f=h._length;if(!(f<=1)){for(i=0;i<f-1;i+=1)n=this.getTransformedPoint(c,h.v[i]),r=this.getTransformedPoint(c,h.o[i]),o=this.getTransformedPoint(c,h.i[i+1]),l=this.getTransformedPoint(c,h.v[i+1]),this.checkBounds(n,r,o,l,e);h.c&&(n=this.getTransformedPoint(c,h.v[i]),r=this.getTransformedPoint(c,h.o[i]),o=this.getTransformedPoint(c,h.i[0]),l=this.getTransformedPoint(c,h.v[0]),this.checkBounds(n,r,o,l,e))}},HShapeElement.prototype.checkBounds=function(t,e,n,r,o){this.getBoundsOfCurve(t,e,n,r);var l=this.shapeBoundingBox;o.x=bmMin(l.left,o.x),o.xMax=bmMax(l.right,o.xMax),o.y=bmMin(l.top,o.y),o.yMax=bmMax(l.bottom,o.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,n,r){for(var a,b,o,l,h,c,f,d=[[t[0],r[0]],[t[1],r[1]]],i=0;i<2;++i)b=6*t[i]-12*e[i]+6*n[i],a=-3*t[i]+9*e[i]-9*n[i]+3*r[i],o=3*e[i]-3*t[i],b|=0,o|=0,0==(a|=0)&&0===b||(0===a?(l=-o/b)>0&&l<1&&d[i].push(this.calculateF(l,t,e,n,r,i)):(h=b*b-4*o*a)>=0&&((c=(-b+bmSqrt(h))/(2*a))>0&&c<1&&d[i].push(this.calculateF(c,t,e,n,r,i)),(f=(-b-bmSqrt(h))/(2*a))>0&&f<1&&d[i].push(this.calculateF(f,t,e,n,r,i))));this.shapeBoundingBox.left=bmMin.apply(null,d[0]),this.shapeBoundingBox.top=bmMin.apply(null,d[1]),this.shapeBoundingBox.right=bmMax.apply(null,d[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,d[1])},HShapeElement.prototype.calculateF=function(t,e,n,r,o,i){return bmPow(1-t,3)*e[i]+3*bmPow(1-t,2)*t*n[i]+3*(1-t)*bmPow(t,2)*r[i]+bmPow(t,3)*o[i]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]&&t[i].sh?this.calculateShapeBoundingBox(t[i],e):t[i]&&t[i].it?this.calculateBoundingBox(t[i].it,e):t[i]&&t[i].style&&t[i].w&&this.expandStrokeBoundingBox(t[i].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var n=0;if(t.keyframes){for(var i=0;i<t.keyframes.length;i+=1){var r=t.keyframes[i].s;r>n&&(n=r)}n*=t.mult}else n=t.v*t.mult;e.x-=n,e.xMax+=n,e.y-=n,e.yMax+=n},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var n=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),n=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),n=!0),n||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=o,r.webkitTransform=o}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var g=createNS("g");this.maskedElement.appendChild(g),this.innerElem=g}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,n=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=n,e.color=n,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var i,r,o=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",o.fClass)this.innerElem.className=o.fClass;else{e.fontFamily=o.fFamily;var l=t.fWeight,h=t.fStyle;e.fontStyle=h,e.fontWeight=l}var c,f,d,m=t.l;r=m.length;var v,y=this.mHelper,_="",x=0;for(i=0;i<r;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[x]?c=this.textPaths[x]:((c=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),c.setAttribute("stroke-linejoin",lineJoinEnum[2]),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[x]?d=(f=this.textSpans[x]).children[0]:((f=createTag("div")).style.lineHeight=0,(d=createNS("svg")).appendChild(c),styleDiv(f)))):this.isMasked?c=this.textPaths[x]?this.textPaths[x]:createNS("text"):this.textSpans[x]?(f=this.textSpans[x],c=this.textPaths[x]):(styleDiv(f=createTag("span")),styleDiv(c=createTag("span")),f.appendChild(c)),this.globalData.fontManager.chars){var w,M=this.globalData.fontManager.getCharData(t.finalText[i],o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(w=M?M.data:null,y.reset(),w&&w.shapes&&w.shapes.length&&(v=w.shapes[0].it,y.scale(t.finalSize/100,t.finalSize/100),_=this.createPathShape(y,v),c.setAttribute("d",_)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(f),w&&w.shapes){document.body.appendChild(d);var S=d.getBBox();d.setAttribute("width",S.width+2),d.setAttribute("height",S.height+2),d.setAttribute("viewBox",S.x-1+" "+(S.y-1)+" "+(S.width+2)+" "+(S.height+2));var E=d.style,A="translate("+(S.x-1)+"px,"+(S.y-1)+"px)";E.transform=A,E.webkitTransform=A,m[i].yOffset=S.y-1}else d.setAttribute("width",1),d.setAttribute("height",1);f.appendChild(d)}}else if(c.textContent=m[i].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(c);else{this.innerElem.appendChild(f);var T=c.style,C="translate3d(0,"+-t.finalSize/1.2+"px,0)";T.transform=C,T.webkitTransform=C}this.isMasked?this.textSpans[x]=c:this.textSpans[x]=f,this.textSpans[x].style.display="block",this.textPaths[x]=c,x+=1}for(;x<this.textSpans.length;)this.textSpans[x].style.display="none",x+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,n,r,o,l,h=0,c=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;for(n=f.length,i=0;i<n;i+=1)f[i].n?h+=1:(o=this.textSpans[i],l=this.textPaths[i],r=c[h],h+=1,r._mdf.m&&(this.isMasked?o.setAttribute("transform",r.m):(o.style.webkitTransform=r.m,o.style.transform=r.m)),o.style.opacity=r.o,r.sw&&r._mdf.sw&&l.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&l.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(l.setAttribute("fill",r.fc),l.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var d=this.innerElem.getBBox();if(this.currentBBox.w!==d.width&&(this.currentBBox.w=d.width,this.svgElement.setAttribute("width",d.width)),this.currentBBox.h!==d.height&&(this.currentBBox.h=d.height,this.svgElement.setAttribute("height",d.height)),this.currentBBox.w!==d.width+2||this.currentBBox.h!==d.height+2||this.currentBBox.x!==d.x-1||this.currentBBox.y!==d.y-1){this.currentBBox.w=d.width+2,this.currentBBox.h=d.height+2,this.currentBBox.x=d.x-1,this.currentBBox.y=d.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var m="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=m,t.webkitTransform=m}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,t,e,n,r=this.comp.threeDElements.length;for(i=0;i<r;i+=1)if("3d"===(t=this.comp.threeDElements[i]).type){e=t.perspectiveElem.style,n=t.container.style;var o=this.pe.v+"px",l="0px 0px 0px",h="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";e.perspective=o,e.webkitPerspective=o,n.transformOrigin=l,n.mozTransformOrigin=l,n.webkitTransformOrigin=l,e.transform=h,e.webkitTransform=h}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i,t,e=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,i=0;i<t;i+=1)e=this.hierarchy[i].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(i=t=this.hierarchy.length-1;i>=0;i-=1){var n=this.hierarchy[i].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;r=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var o=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),l=[r[0]/o,r[1]/o,r[2]/o],h=Math.sqrt(l[2]*l[2]+l[0]*l[0]),c=Math.atan2(l[1],h),f=Math.atan2(l[0],-l[2]);this.mat.rotateY(f).rotateX(-c)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var d=!this._prevMat.equals(this.mat);if((d||this.pe._mdf)&&this.comp.threeDElements){var m,v,y;for(t=this.comp.threeDElements.length,i=0;i<t;i+=1)if("3d"===(m=this.comp.threeDElements[i]).type){if(d){var _=this.mat.toCSS();(y=m.container.style).transform=_,y.webkitTransform=_}this.pe._mdf&&((v=m.perspectiveElem.style).perspective=this.pe.v+"px",v.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),img=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(img),img.crossOrigin="anonymous",img.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(element,t){var e=element.getBaseElement();if(e){var n=this.layers[t];if(n.ddd&&this.supports3d)this.addTo3dContainer(e,t);else if(this.threeDElements)this.addTo3dContainer(e,t);else{for(var r,o,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(o=this.elements[i],r=(this.layers[i].ddd?this.getThreeDContainerByPos(i):o.getBaseElement())||r),i+=1;r?n.ddd&&this.supports3d||this.layerElement.insertBefore(e,r):n.ddd&&this.supports3d||this.layerElement.appendChild(e)}}},HybridRendererBase.prototype.createShape=function(data){return this.supports3d?new HShapeElement(data,this.globalData,this):new SVGShapeElement(data,this.globalData,this)},HybridRendererBase.prototype.createText=function(data){return this.supports3d?new HTextElement(data,this.globalData,this):new SVGTextLottieElement(data,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(data){return this.camera=new HCameraElement(data,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(data){return this.supports3d?new HImageElement(data,this.globalData,this):new IImageElement(data,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(data){return this.supports3d?new HSolidElement(data,this.globalData,this):new ISolidElement(data,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var i=0,e=this.threeDElements.length;i<e;){if(this.threeDElements[i].startPos<=t&&this.threeDElements[i].endPos>=t)return this.threeDElements[i].perspectiveElem;i+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var style,n,r=createTag("div");styleDiv(r);var o=createTag("div");if(styleDiv(o),"3d"===e){(style=r.style).width=this.globalData.compSize.w+"px",style.height=this.globalData.compSize.h+"px";var l="50% 50%";style.webkitTransformOrigin=l,style.mozTransformOrigin=l,style.transformOrigin=l;var h="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(n=o.style).transform=h,n.webkitTransform=h}r.appendChild(o);var c={container:o,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(c),c},HybridRendererBase.prototype.build3dContainers=function(){var i,t,e=this.layers.length,n="";for(i=0;i<e;i+=1)this.layers[i].ddd&&3!==this.layers[i].ty?("3d"!==n&&(n="3d",t=this.createThreeDContainer(i,"3d")),t.endPos=Math.max(t.endPos,i)):("2d"!==n&&(n="2d",t=this.createThreeDContainer(i,"2d")),t.endPos=Math.max(t.endPos,i));for(i=(e=this.threeDElements.length)-1;i>=0;i-=1)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var i=0,n=this.threeDElements.length;i<n;){if(e<=this.threeDElements[i].endPos){for(var r,o=this.threeDElements[i].startPos;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(r=this.elements[o].getBaseElement()),o+=1;r?this.threeDElements[i].container.insertBefore(t,r):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),n=this.animationItem.wrapper,style=e.style;style.width=t.w+"px",style.height=t.h+"px",this.resizerElem=e,styleDiv(e),style.transformStyle="flat",style.mozTransformStyle="flat",style.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),n.appendChild(e),style.overflow="hidden";var svg=createNS("svg");svg.setAttribute("width","1"),svg.setAttribute("height","1"),styleDiv(svg),this.resizerElem.appendChild(svg);var defs=createNS("defs");svg.appendChild(defs),this.data=t,this.setupGlobalData(t,svg),this.globalData.defs=defs,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var i;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t,e,n,r,o=this.animationItem.wrapper.offsetWidth,l=this.animationItem.wrapper.offsetHeight,h=o/l;this.globalData.compSize.w/this.globalData.compSize.h>h?(t=o/this.globalData.compSize.w,e=o/this.globalData.compSize.w,n=0,r=(l-this.globalData.compSize.h*(o/this.globalData.compSize.w))/2):(t=l/this.globalData.compSize.h,e=l/this.globalData.compSize.h,n=(o-this.globalData.compSize.w*(l/this.globalData.compSize.h))/2,r=0);var style=this.resizerElem.style;style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+n+","+r+",0,1)",style.transform=style.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i,t=this.globalData.compSize.w,e=this.globalData.compSize.h,n=this.threeDElements.length;for(i=0;i<n;i+=1){var style=this.threeDElements[i].perspectiveElem.style;style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",style.perspective=style.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var i,e=t.length,n=createTag("div");for(i=0;i<e;i+=1)if(t[i].xt){var r=this.createComp(t[i],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(data){return this.supports3d?new HCompElement(data,this.globalData,this):new SVGCompElement(data,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(data){return this.supports3d?new HCompElement(data,this.globalData,this):new SVGCompElement(data,this.globalData,this)};var CompExpressionInterface=function(t){function e(e){for(var i=0,n=t.layers.length;i<n;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e};function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}function seedRandom(t,e){var n,r=this,o=256,l="random",h=e.pow(o,6),c=e.pow(2,52),f=2*c,mask=o-1;function d(t){var e,n=t.length,r=this,i=0,l=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[l=mask&l+t[i%n]+(e=s[i])],s[l]=e;r.g=function(t){for(var e,n=0,i=r.i,l=r.j,s=r.S;t--;)e=s[i=mask&i+1],n=n*o+s[mask&(s[i]=s[l=mask&l+e])+(s[l]=e)];return r.i=i,r.j=l,n}}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){var n,r=[],o=_typeof$2(t);if(e&&"object"==o)for(n in t)try{r.push(v(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function y(t,e){for(var n,r=t+"",o=0;o<r.length;)e[mask&o]=mask&(n^=19*e[mask&o])+r.charCodeAt(o++);return _(e)}function _(a){return String.fromCharCode.apply(0,a)}e["seed"+l]=function(x,w,M){var S=[],E=y(v((w=!0===w?{entropy:!0}:w||{}).entropy?[x,_(t)]:null===x?function(){try{if(n)return _(n.randomBytes(o));var e=new Uint8Array(o);return(r.crypto||r.msCrypto).getRandomValues(e),_(e)}catch(e){var l=r.navigator,h=l&&l.plugins;return[+new Date,r,h,r.screen,_(t)]}}():x,3),S),A=new d(S),T=function(){for(var t=A.g(6),e=h,n=0;t<c;)t=(t+n)*o,e*=o,n=A.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return T.int32=function(){return 0|A.g(4)},T.quick=function(){return A.g(4)/4294967296},T.double=T,y(_(A.S),t),(w.pass||M||function(t,n,r,o){return o&&(o.S&&m(o,A),t.state=function(){return m(A,{})}),r?(e[l]=t,n):t})(T,E,"global"in w?w.global:this==e,w.state)},y(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||e instanceof Number||"boolean"===t||"string"===t}function $bm_neg(a){var t=_typeof$1(a);if("number"===t||a instanceof Number||"boolean"===t)return-a;if($bm_isInstanceOfArray(a)){var i,e=a.length,n=[];for(i=0;i<e;i+=1)n[i]=-a[i];return n}return a.propType?a.v:-a}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(a,b){var t=_typeof$1(a),e=_typeof$1(b);if(isNumerable(t,a)&&isNumerable(e,b)||"string"===t||"string"===e)return a+b;if($bm_isInstanceOfArray(a)&&isNumerable(e,b))return(a=a.slice(0))[0]+=b,a;if(isNumerable(t,a)&&$bm_isInstanceOfArray(b))return(b=b.slice(0))[0]=a+b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var i=0,n=a.length,r=b.length,o=[];i<n||i<r;)("number"==typeof a[i]||a[i]instanceof Number)&&("number"==typeof b[i]||b[i]instanceof Number)?o[i]=a[i]+b[i]:o[i]=void 0===b[i]?a[i]:a[i]||b[i],i+=1;return o}return 0}var add=sum;function sub(a,b){var t=_typeof$1(a),e=_typeof$1(b);if(isNumerable(t,a)&&isNumerable(e,b))return"string"===t&&(a=parseInt(a,10)),"string"===e&&(b=parseInt(b,10)),a-b;if($bm_isInstanceOfArray(a)&&isNumerable(e,b))return(a=a.slice(0))[0]-=b,a;if(isNumerable(t,a)&&$bm_isInstanceOfArray(b))return(b=b.slice(0))[0]=a-b[0],b;if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){for(var i=0,n=a.length,r=b.length,o=[];i<n||i<r;)("number"==typeof a[i]||a[i]instanceof Number)&&("number"==typeof b[i]||b[i]instanceof Number)?o[i]=a[i]-b[i]:o[i]=void 0===b[i]?a[i]:a[i]||b[i],i+=1;return o}return 0}function mul(a,b){var t,i,e,n=_typeof$1(a),r=_typeof$1(b);if(isNumerable(n,a)&&isNumerable(r,b))return a*b;if($bm_isInstanceOfArray(a)&&isNumerable(r,b)){for(e=a.length,t=createTypedArray("float32",e),i=0;i<e;i+=1)t[i]=a[i]*b;return t}if(isNumerable(n,a)&&$bm_isInstanceOfArray(b)){for(e=b.length,t=createTypedArray("float32",e),i=0;i<e;i+=1)t[i]=a*b[i];return t}return 0}function div(a,b){var t,i,e,n=_typeof$1(a),r=_typeof$1(b);if(isNumerable(n,a)&&isNumerable(r,b))return a/b;if($bm_isInstanceOfArray(a)&&isNumerable(r,b)){for(e=a.length,t=createTypedArray("float32",e),i=0;i<e;i+=1)t[i]=a[i]/b;return t}if(isNumerable(n,a)&&$bm_isInstanceOfArray(b)){for(e=b.length,t=createTypedArray("float32",e),i=0;i<e;i+=1)t[i]=a/b[i];return t}return 0}function mod(a,b){return"string"==typeof a&&(a=parseInt(a,10)),"string"==typeof b&&(b=parseInt(b,10)),a%b}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,n){if(e>n){var r=n;n=e,e=r}return Math.min(Math.max(t,e),n)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var i;e||(e=helperLengthArray);var n=Math.min(t.length,e.length),r=0;for(i=0;i<n;i+=1)r+=Math.pow(e[i]-t[i],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,s,n=t[0],g=t[1],b=t[2],r=Math.max(n,g,b),o=Math.min(n,g,b),l=(r+o)/2;if(r===o)e=0,s=0;else{var h=r-o;switch(s=l>.5?h/(2-r-o):h/(r+o),r){case n:e=(g-b)/h+(g<b?6:0);break;case g:e=(b-n)/h+2;break;case b:e=(n-g)/h+4}e/=6}return[e,s,l,t[3]]}function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}function hslToRgb(t){var e,g,b,n=t[0],s=t[1],r=t[2];if(0===s)e=r,b=r,g=r;else{var q=r<.5?r*(1+s):r+s-r*s,p=2*r-q;e=hue2rgb(p,q,n+1/3),g=hue2rgb(p,q,n),b=hue2rgb(p,q,n-1/3)}return[e,g,b,t[3]]}function linear(t,e,n,r,o){if(void 0!==r&&void 0!==o||(r=e,o=n,e=0,n=1),n<e){var l=n;n=e,e=l}if(t<=e)return r;if(t>=n)return o;var i,h=n===e?0:(t-e)/(n-e);if(!r.length)return r+(o-r)*h;var c=r.length,f=createTypedArray("float32",c);for(i=0;i<c;i+=1)f[i]=r[i]+(o[i]-r[i])*h;return f}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,n=e.length;t||(t=createTypedArray("float32",n));var r=createTypedArray("float32",n),o=BMMath.random();for(i=0;i<n;i+=1)r[i]=t[i]+o*(e[i]-t[i]);return r}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,n,r){var i,o=t.length,path=shapePool.newElement();path.setPathData(!!r,o);var l,h,c=[0,0];for(i=0;i<o;i+=1)l=e&&e[i]?e[i]:c,h=n&&n[i]?n[i]:c,path.setTripleAt(t[i][0],t[i][1],h[0]+t[i][0],h[1]+t[i][1],l[0]+t[i][0],l[1]+t[i][1],i,!0);return path}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var n,r,o=this.pv.length?this.pv.length:1,l=createTypedArray("float32",o),h=Math.floor(5*time);for(n=0,r=0;n<h;){for(r=0;r<o;r+=1)l[r]+=-e+2*e*BMMath.random();n+=1}var c=5*time,f=c-Math.floor(c),d=createTypedArray("float32",o);if(o>1){for(r=0;r<o;r+=1)d[r]=this.pv[r]+l[r]+(-e+2*e*BMMath.random())*f;return d}return this.pv+l[0]+(-e+2*e*BMMath.random())*f}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(t,e,n,r,o){return applyEase(easeOutBez,t,e,n,r,o)}function easeIn(t,e,n,r,o){return applyEase(easeInBez,t,e,n,r,o)}function ease(t,e,n,r,o){return applyEase(easeInOutBez,t,e,n,r,o)}function applyEase(t,e,n,r,o,l){void 0===o?(o=n,l=r):e=(e-n)/(r-n),e>1?e=1:e<0&&(e=0);var h=t(e);if($bm_isInstanceOfArray(o)){var c,f=o.length,d=createTypedArray("float32",f);for(c=0;c<f;c+=1)d[c]=(l[c]-o[c])*h+o[c];return d}return(l-o)*h+o}function nearestKey(time){var t,e,n,r=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(e=-1,(time*=elem.comp.globalData.frameRate)<data.k[0].t)e=1,n=data.k[0].t;else{for(t=0;t<r-1;t+=1){if(time===data.k[t].t){e=t+1,n=data.k[t].t;break}if(time>data.k[t].t&&time<data.k[t+1].t){time-data.k[t].t>data.k[t+1].t-time?(e=t+2,n=data.k[t+1].t):(e=t+1,n=data.k[t].t);break}}-1===e&&(e=t+1,n=data.k[t].t)}else e=0,n=0;var o={};return o.index=e,o.time=n/elem.comp.globalData.frameRate,o}function key(t){var e,n,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var o=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(r=o.length,n=0;n<r;n+=1)e[n]=o[n],e.value[n]=o[n];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={initExpressions:function(t){var e=0,n=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var i,t=n.length;for(i=0;i<t;i+=1)n[i].release();n.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===n.indexOf(t)&&n.push(t)}}};return t.resetFrame=ExpressionManager.resetFrame,t}(),MaskManagerInterface=function(){function t(mask,data){this._mask=mask,this._data=data}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var i,n=createSizedArray(e.viewData.length),r=e.viewData.length;for(i=0;i<r;i+=1)n[i]=new t(e.viewData[i],e.masksProperties[i]);return function(t){for(i=0;i<r;){if(e.masksProperties[i].nm===t)return n[i];i+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function n(t,e,n){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(r){if(!t.numKeys)return 0;var o="";o="s"in e.keyframes[r-1]?e.keyframes[r-1].s:"e"in e.keyframes[r-2]?e.keyframes[r-2].e:e.keyframes[r-2].s;var l="unidimensional"===n?new Number(o):Object.assign({},o);return l.time=e.keyframes[r-1].t/e.elem.comp.globalData.frameRate,l.value="unidimensional"===n?o[0]:o,l},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function r(){return t}return function(o){return o?"unidimensional"===o.propType?function(e){e&&"pv"in e||(e=t);var r=1/e.mult,o=e.pv*r,l=new Number(o);return l.value=o,n(l,e,"unidimensional"),function(){return e.k&&e.getValue(),o=e.v*r,l.value!==o&&((l=new Number(o)).value=o,n(l,e,"unidimensional")),l}}(o):function(t){t&&"pv"in t||(t=e);var r=1/t.mult,o=t.data&&t.data.l||t.pv.length,l=createTypedArray("float32",o),h=createTypedArray("float32",o);return l.value=h,n(l,t,"multidimensional"),function(){t.k&&t.getValue();for(var i=0;i<o;i+=1)h[i]=t.v[i]*r,l[i]=h[i];return l}}(o):r}}(),TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var n,r,o,l;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?l=ExpressionPropertyInterface(t.p):(n=ExpressionPropertyInterface(t.px),r=ExpressionPropertyInterface(t.py),t.pz&&(o=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?l():[n(),r(),o?o():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},LayerExpressionInterface=function(){function t(time){var t=new Matrix;return void 0!==time?this._elem.finalTransform.mProp.getValueAtTime(time).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function e(t,time){var e=this.getMatrix(time);return e.props[12]=0,e.props[13]=0,e.props[14]=0,this.applyPoint(e,t)}function n(t,time){var e=this.getMatrix(time);return this.applyPoint(e,t)}function r(t,time){var e=this.getMatrix(time);return e.props[12]=0,e.props[13]=0,e.props[14]=0,this.invertPoint(e,t)}function o(t,time){var e=this.getMatrix(time);return this.invertPoint(e,t)}function l(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function h(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function c(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function f(){return[1,1,1,1]}return function(d){var m;function v(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return v.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return m;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return v.effect;case"ADBE Text Properties":return v.textInterface;default:return null}}v.getMatrix=t,v.invertPoint=h,v.applyPoint=l,v.toWorld=n,v.toWorldVec=e,v.fromWorld=o,v.fromWorldVec=r,v.toComp=n,v.fromComp=c,v.sampleImage=f,v.sourceRectAtTime=d.sourceRectAtTime.bind(d),v._elem=d;var y=getDescriptor(m=TransformExpressionInterface(d.finalTransform.mProp),"anchorPoint");return Object.defineProperties(v,{hasParent:{get:function(){return d.hierarchy.length}},parent:{get:function(){return d.hierarchy[0].layerInterface}},rotation:getDescriptor(m,"rotation"),scale:getDescriptor(m,"scale"),position:getDescriptor(m,"position"),opacity:getDescriptor(m,"opacity"),anchorPoint:y,anchor_point:y,transform:{get:function(){return m}},active:{get:function(){return d.isInRange}}}),v.startTime=d.data.st,v.index=d.data.ind,v.source=d.data.refId,v.height=0===d.data.ty?d.data.h:100,v.width=0===d.data.ty?d.data.w:100,v.inPoint=d.data.ip/d.comp.globalData.frameRate,v.outPoint=d.data.op/d.comp.globalData.frameRate,v._name=d.data.nm,v.registerMaskInterface=function(t){v.mask=new MaskManagerInterface(t,d)},v.registerEffectsInterface=function(t){v.effect=t},v}}(),propertyGroupFactory=function(t,e){return function(n){return(n=void 0===n?1:n)<=0?t:e(n-1)}},PropertyInterface=function(t,e){var n={_name:t};return function(t){return(t=void 0===t?1:t)<=0?n:e(t-1)}},EffectsExpressionInterface=function(){function t(data,n,r,o){function l(t){for(var e=data.ef,i=0,n=e.length;i<n;){if(t===e[i].nm||t===e[i].mn||t===e[i].ix)return 5===e[i].ty?c[i]:c[i]();i+=1}throw new Error}var i,h=propertyGroupFactory(l,r),c=[],f=data.ef.length;for(i=0;i<f;i+=1)5===data.ef[i].ty?c.push(t(data.ef[i],n.effectElements[i],n.effectElements[i].propertyGroup,o)):c.push(e(n.effectElements[i],data.ef[i].ty,o,h));return"ADBE Color Control"===data.mn&&Object.defineProperty(l,"color",{get:function(){return c[0]()}}),Object.defineProperties(l,{numProperties:{get:function(){return data.np}},_name:{value:data.nm},propertyGroup:{value:h}}),l.enabled=0!==data.en,l.active=l.enabled,l}function e(element,t,e,n){var r=ExpressionPropertyInterface(element.p);return element.p.setGroupProperty&&element.p.setGroupProperty(PropertyInterface("",n)),function(){return 10===t?e.comp.compInterface(element.p.v):r()}}return{createEffectsInterface:function(e,n){if(e.effectsManager){var i,r=[],o=e.data.ef,l=e.effectsManager.effectElements.length;for(i=0;i<l;i+=1)r.push(t(o[i],e.effectsManager.effectElements[i],n,e));var h=e.data.ef||[],c=function(t){for(i=0,l=h.length;i<l;){if(t===h[i].nm||t===h[i].mn||t===h[i].ix)return r[i];i+=1}return null};return Object.defineProperty(c,"numProperties",{get:function(){return h.length}}),c}return null}}}(),ShapePathInterface=function(t,view,e){var n=view.sh;function r(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?r.path:null}var o=propertyGroupFactory(r,e);return n.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(r,{path:{get:function(){return n.k&&n.getValue(),n}},shape:{get:function(){return n.k&&n.getValue(),n}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:e}}),r},ShapeExpressionInterface=function(){function t(t,view,h){var i,y=[],_=t?t.length:0;for(i=0;i<_;i+=1)"gr"===t[i].ty?y.push(e(t[i],view[i],h)):"fl"===t[i].ty?y.push(n(t[i],view[i],h)):"st"===t[i].ty?y.push(o(t[i],view[i],h)):"tm"===t[i].ty?y.push(l(t[i],view[i],h)):"tr"===t[i].ty||("el"===t[i].ty?y.push(c(t[i],view[i],h)):"sr"===t[i].ty?y.push(f(t[i],view[i],h)):"sh"===t[i].ty?y.push(ShapePathInterface(t[i],view[i],h)):"rc"===t[i].ty?y.push(d(t[i],view[i],h)):"rd"===t[i].ty?y.push(m(t[i],view[i],h)):"rp"===t[i].ty?y.push(v(t[i],view[i],h)):"gf"===t[i].ty?y.push(r(t[i],view[i],h)):y.push((t[i],view[i],function(){return null})));return y}function e(e,view,n){var r=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return r.content;default:return r.transform}};r.propertyGroup=propertyGroupFactory(r,n);var content=function(e,view,n){var r,o=function(t){for(var i=0,e=r.length;i<e;){if(r[i]._name===t||r[i].mn===t||r[i].propertyIndex===t||r[i].ix===t||r[i].ind===t)return r[i];i+=1}return"number"==typeof t?r[t-1]:null};o.propertyGroup=propertyGroupFactory(o,n),r=t(e.it,view.it,o.propertyGroup),o.numProperties=r.length;var l=h(e.it[e.it.length-1],view.it[view.it.length-1],o.propertyGroup);return o.transform=l,o.propertyIndex=e.cix,o._name=e.nm,o}(e,view,r.propertyGroup),o=h(e.it[e.it.length-1],view.it[view.it.length-1],r.propertyGroup);return r.content=content,r.transform=o,Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.numProperties=e.np,r.propertyIndex=e.ix,r.nm=e.nm,r.mn=e.mn,r}function n(t,view,e){function n(t){return"Color"===t||"color"===t?n.color:"Opacity"===t||"opacity"===t?n.opacity:null}return Object.defineProperties(n,{color:{get:ExpressionPropertyInterface(view.c)},opacity:{get:ExpressionPropertyInterface(view.o)},_name:{value:t.nm},mn:{value:t.mn}}),view.c.setGroupProperty(PropertyInterface("Color",e)),view.o.setGroupProperty(PropertyInterface("Opacity",e)),n}function r(t,view,e){function n(t){return"Start Point"===t||"start point"===t?n.startPoint:"End Point"===t||"end point"===t?n.endPoint:"Opacity"===t||"opacity"===t?n.opacity:null}return Object.defineProperties(n,{startPoint:{get:ExpressionPropertyInterface(view.s)},endPoint:{get:ExpressionPropertyInterface(view.e)},opacity:{get:ExpressionPropertyInterface(view.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),view.s.setGroupProperty(PropertyInterface("Start Point",e)),view.e.setGroupProperty(PropertyInterface("End Point",e)),view.o.setGroupProperty(PropertyInterface("Opacity",e)),n}function o(t,view,e){var i,n=propertyGroupFactory(c,e),r=propertyGroupFactory(h,n);function o(i){Object.defineProperty(h,t.d[i].nm,{get:ExpressionPropertyInterface(view.d.dataProps[i].p)})}var l=t.d?t.d.length:0,h={};for(i=0;i<l;i+=1)o(i),view.d.dataProps[i].p.setGroupProperty(r);function c(t){return"Color"===t||"color"===t?c.color:"Opacity"===t||"opacity"===t?c.opacity:"Stroke Width"===t||"stroke width"===t?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(view.c)},opacity:{get:ExpressionPropertyInterface(view.o)},strokeWidth:{get:ExpressionPropertyInterface(view.w)},dash:{get:function(){return h}},_name:{value:t.nm},mn:{value:t.mn}}),view.c.setGroupProperty(PropertyInterface("Color",n)),view.o.setGroupProperty(PropertyInterface("Opacity",n)),view.w.setGroupProperty(PropertyInterface("Stroke Width",n)),c}function l(t,view,e){function n(e){return e===t.e.ix||"End"===e||"end"===e?n.end:e===t.s.ix?n.start:e===t.o.ix?n.offset:null}var r=propertyGroupFactory(n,e);return n.propertyIndex=t.ix,view.s.setGroupProperty(PropertyInterface("Start",r)),view.e.setGroupProperty(PropertyInterface("End",r)),view.o.setGroupProperty(PropertyInterface("Offset",r)),n.propertyIndex=t.ix,n.propertyGroup=e,Object.defineProperties(n,{start:{get:ExpressionPropertyInterface(view.s)},end:{get:ExpressionPropertyInterface(view.e)},offset:{get:ExpressionPropertyInterface(view.o)},_name:{value:t.nm}}),n.mn=t.mn,n}function h(t,view,e){function n(e){return t.a.ix===e||"Anchor Point"===e?n.anchorPoint:t.o.ix===e||"Opacity"===e?n.opacity:t.p.ix===e||"Position"===e?n.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?n.rotation:t.s.ix===e||"Scale"===e?n.scale:t.sk&&t.sk.ix===e||"Skew"===e?n.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?n.skewAxis:null}var r=propertyGroupFactory(n,e);return view.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",r)),view.transform.mProps.p.setGroupProperty(PropertyInterface("Position",r)),view.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",r)),view.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",r)),view.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",r)),view.transform.mProps.sk&&(view.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",r)),view.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",r))),view.transform.op.setGroupProperty(PropertyInterface("Opacity",r)),Object.defineProperties(n,{opacity:{get:ExpressionPropertyInterface(view.transform.mProps.o)},position:{get:ExpressionPropertyInterface(view.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(view.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(view.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(view.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(view.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(view.transform.mProps.sa)},_name:{value:t.nm}}),n.ty="tr",n.mn=t.mn,n.propertyGroup=e,n}function c(t,view,e){function n(e){return t.p.ix===e?n.position:t.s.ix===e?n.size:null}var r=propertyGroupFactory(n,e);n.propertyIndex=t.ix;var o="tm"===view.sh.ty?view.sh.prop:view.sh;return o.s.setGroupProperty(PropertyInterface("Size",r)),o.p.setGroupProperty(PropertyInterface("Position",r)),Object.defineProperties(n,{size:{get:ExpressionPropertyInterface(o.s)},position:{get:ExpressionPropertyInterface(o.p)},_name:{value:t.nm}}),n.mn=t.mn,n}function f(t,view,e){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.rotation:t.pt.ix===e?n.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?n.outerRadius:t.os.ix===e?n.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?n.innerRoundness:null:n.innerRadius}var r=propertyGroupFactory(n,e),o="tm"===view.sh.ty?view.sh.prop:view.sh;return n.propertyIndex=t.ix,o.or.setGroupProperty(PropertyInterface("Outer Radius",r)),o.os.setGroupProperty(PropertyInterface("Outer Roundness",r)),o.pt.setGroupProperty(PropertyInterface("Points",r)),o.p.setGroupProperty(PropertyInterface("Position",r)),o.r.setGroupProperty(PropertyInterface("Rotation",r)),t.ir&&(o.ir.setGroupProperty(PropertyInterface("Inner Radius",r)),o.is.setGroupProperty(PropertyInterface("Inner Roundness",r))),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(o.p)},rotation:{get:ExpressionPropertyInterface(o.r)},points:{get:ExpressionPropertyInterface(o.pt)},outerRadius:{get:ExpressionPropertyInterface(o.or)},outerRoundness:{get:ExpressionPropertyInterface(o.os)},innerRadius:{get:ExpressionPropertyInterface(o.ir)},innerRoundness:{get:ExpressionPropertyInterface(o.is)},_name:{value:t.nm}}),n.mn=t.mn,n}function d(t,view,e){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?n.size:null}var r=propertyGroupFactory(n,e),o="tm"===view.sh.ty?view.sh.prop:view.sh;return n.propertyIndex=t.ix,o.p.setGroupProperty(PropertyInterface("Position",r)),o.s.setGroupProperty(PropertyInterface("Size",r)),o.r.setGroupProperty(PropertyInterface("Rotation",r)),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(o.p)},roundness:{get:ExpressionPropertyInterface(o.r)},size:{get:ExpressionPropertyInterface(o.s)},_name:{value:t.nm}}),n.mn=t.mn,n}function m(t,view,e){function n(e){return t.r.ix===e||"Round Corners 1"===e?n.radius:null}var r=propertyGroupFactory(n,e),o=view;return n.propertyIndex=t.ix,o.rd.setGroupProperty(PropertyInterface("Radius",r)),Object.defineProperties(n,{radius:{get:ExpressionPropertyInterface(o.rd)},_name:{value:t.nm}}),n.mn=t.mn,n}function v(t,view,e){function n(e){return t.c.ix===e||"Copies"===e?n.copies:t.o.ix===e||"Offset"===e?n.offset:null}var r=propertyGroupFactory(n,e),o=view;return n.propertyIndex=t.ix,o.c.setGroupProperty(PropertyInterface("Copies",r)),o.o.setGroupProperty(PropertyInterface("Offset",r)),Object.defineProperties(n,{copies:{get:ExpressionPropertyInterface(o.c)},offset:{get:ExpressionPropertyInterface(o.o)},_name:{value:t.nm}}),n.mn=t.mn,n}return function(e,view,n){var r;function o(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?n:r[t-1];for(var i=0,e=r.length;i<e;){if(r[i]._name===t)return r[i];i+=1}return null}return o.propertyGroup=propertyGroupFactory(o,(function(){return n})),r=t(e,view,o.propertyGroup),o.numProperties=r.length,o._name="Contents",o}}(),TextExpressionInterface=function(t){var e;function n(t){return"ADBE Text Document"===t?n.sourceText:null}return Object.defineProperty(n,"sourceText",{get:function(){t.textProperty.getValue();var n=t.textProperty.currentData.t;return e&&n===e.value||((e=new String(n)).value=n||new String(n),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),n};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var FootageInterface=(dataInterfaceFactory=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",n=t.getFootageData();function r(t){if(n[t])return e=t,"object"===_typeof(n=n[t])?r:n;var o=t.indexOf(e);if(-1!==o){var l=parseInt(t.substr(o+e.length),10);return"object"===_typeof(n=n[l])?r:n}return""}return function(){return e="",n=t.getFootageData(),r}}(t),e},function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(t),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers={searchExpressions:function(t,data,e){data.x&&(e.k=!0,e.x=!0,e.initiateExpression=ExpressionManager.initiateExpression,e.effectsSequence.push(e.initiateExpression(t,data,e).bind(e)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),n=this.getValueAtTime(t+-.01),r=0;if(e.length){var i;for(i=0;i<e.length;i+=1)r+=Math.pow(n[i]-e[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,i,n=-.001,r=this.getValueAtTime(t),o=this.getValueAtTime(t+n);if(r.length)for(e=createTypedArray("float32",r.length),i=0;i<r.length;i+=1)e[i]=(o[i]-r[i])/n;else e=(o-r)/n;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};function addPropertyDecorator(){function t(t,e,n){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,o,i,l,h,c=this.comp.renderedFrame,f=this.keyframes,d=f[f.length-1].t;if(c<=d)return this.pv;if(n?o=d-(r=e?Math.abs(d-this.elem.comp.globalData.frameRate*e):Math.max(0,d-this.elem.data.ip)):((!e||e>f.length-1)&&(e=f.length-1),r=d-(o=f[f.length-1-e].t)),"pingpong"===t){if(Math.floor((c-o)/r)%2!=0)return this.getValueAtTime((r-(c-o)%r+o)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var m=this.getValueAtTime(o/this.comp.globalData.frameRate,0),v=this.getValueAtTime(d/this.comp.globalData.frameRate,0),y=this.getValueAtTime(((c-o)%r+o)/this.comp.globalData.frameRate,0),_=Math.floor((c-o)/r);if(this.pv.length){for(l=(h=new Array(m.length)).length,i=0;i<l;i+=1)h[i]=(v[i]-m[i])*_+y[i];return h}return(v-m)*_+y}if("continue"===t){var x=this.getValueAtTime(d/this.comp.globalData.frameRate,0),w=this.getValueAtTime((d-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(l=(h=new Array(x.length)).length,i=0;i<l;i+=1)h[i]=x[i]+(x[i]-w[i])*((c-d)/this.comp.globalData.frameRate)/5e-4;return h}return x+(c-d)/.001*(x-w)}}return this.getValueAtTime(((c-o)%r+o)/this.comp.globalData.frameRate,0)}function e(t,e,n){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,o,i,l,h,c=this.comp.renderedFrame,f=this.keyframes,d=f[0].t;if(c>=d)return this.pv;if(n?o=d+(r=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-d)):((!e||e>f.length-1)&&(e=f.length-1),r=(o=f[e].t)-d),"pingpong"===t){if(Math.floor((d-c)/r)%2==0)return this.getValueAtTime(((d-c)%r+d)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var m=this.getValueAtTime(d/this.comp.globalData.frameRate,0),v=this.getValueAtTime(o/this.comp.globalData.frameRate,0),y=this.getValueAtTime((r-(d-c)%r+d)/this.comp.globalData.frameRate,0),_=Math.floor((d-c)/r)+1;if(this.pv.length){for(l=(h=new Array(m.length)).length,i=0;i<l;i+=1)h[i]=y[i]-(v[i]-m[i])*_;return h}return y-(v-m)*_}if("continue"===t){var x=this.getValueAtTime(d/this.comp.globalData.frameRate,0),w=this.getValueAtTime((d+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(l=(h=new Array(x.length)).length,i=0;i<l;i+=1)h[i]=x[i]+(x[i]-w[i])*(d-c)/.001;return h}return x+(x-w)*(d-c)/.001}}return this.getValueAtTime((r-((d-c)%r+d))/this.comp.globalData.frameRate,0)}function n(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var n,r,o=this.comp.renderedFrame/this.comp.globalData.frameRate,l=o-t,h=e>1?(o+t-l)/(e-1):1,i=0,c=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;i<e;){if(r=this.getValueAtTime(l+i*h),this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]+=r[c];else n+=r;i+=1}if(this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]/=e;else n/=e;return n}function r(time){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var e=this.a.getValueAtTime(time);t.translate(-e[0]*this.a.mult,-e[1]*this.a.mult,e[2]*this.a.mult)}if(this.appliedTransformations<2){var n=this.s.getValueAtTime(time);t.scale(n[0]*this.s.mult,n[1]*this.s.mult,n[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var r=this.sk.getValueAtTime(time),o=this.sa.getValueAtTime(time);t.skewFromAxis(-r*this.sk.mult,o*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var l=this.r.getValueAtTime(time);t.rotate(-l*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var h=this.rz.getValueAtTime(time),c=this.ry.getValueAtTime(time),f=this.rx.getValueAtTime(time),d=this.or.getValueAtTime(time);t.rotateZ(-h*this.rz.mult).rotateY(c*this.ry.mult).rotateX(f*this.rx.mult).rotateZ(-d[2]*this.or.mult).rotateY(d[1]*this.or.mult).rotateX(d[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var m=this.px.getValueAtTime(time),v=this.py.getValueAtTime(time);if(this.data.p.z){var y=this.pz.getValueAtTime(time);t.translate(m*this.px.mult,v*this.py.mult,-y*this.pz.mult)}else t.translate(m*this.px.mult,v*this.py.mult,0)}else{var _=this.p.getValueAtTime(time);t.translate(_[0]*this.p.mult,_[1]*this.p.mult,-_[2]*this.p.mult)}return t}function o(){return this.v.clone(new Matrix)}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,data,e){var n=l(t,data,e);return n.dynamicProperties.length?n.getValueAtTime=r.bind(n):n.getValueAtTime=o.bind(n),n.setGroupProperty=expressionHelpers.setGroupProperty,n};var h=PropertyFactory.getProp;PropertyFactory.getProp=function(r,data,o,l,c){var f=h(r,data,o,l,c);f.kf?f.getValueAtTime=expressionHelpers.getValueAtTime.bind(f):f.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(f),f.setGroupProperty=expressionHelpers.setGroupProperty,f.loopOut=t,f.loopIn=e,f.smooth=n,f.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(f),f.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(f),f.numKeys=1===data.a?data.k.length:0,f.propertyIndex=data.ix;var d=0;return 0!==o&&(d=createTypedArray("float32",1===data.a?data.k[0].s.length:data.k.length)),f._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:d},expressionHelpers.searchExpressions(r,data,f),f.k&&c.addDynamicProperty(f),f};var c=ShapePropertyFactory.getConstructorFunction(),f=ShapePropertyFactory.getKeyframedConstructorFunction();function d(){}d.prototype={vertices:function(t,time){this.k&&this.getValue();var i,e=this.v;void 0!==time&&(e=this.getValueAtTime(time,0));var n=e._length,r=e[t],o=e.v,l=createSizedArray(n);for(i=0;i<n;i+=1)l[i]="i"===t||"o"===t?[r[i][0]-o[i][0],r[i][1]-o[i][1]]:[r[i][0],r[i][1]];return l},points:function(time){return this.vertices("v",time)},inTangents:function(time){return this.vertices("i",time)},outTangents:function(time){return this.vertices("o",time)},isClosed:function(){return this.v.c},pointOnPath:function(t,time){var e=this.v;void 0!==time&&(e=this.getValueAtTime(time,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(e));for(var n,r=this._segmentsLength,o=r.lengths,l=r.totalLength*t,i=0,h=o.length,c=0;i<h;){if(c+o[i].addedLength>l){var f=i,d=e.c&&i===h-1?0:i+1,m=(l-c)/o[i].addedLength;n=bez.getPointInSegment(e.v[f],e.v[d],e.o[f],e.i[d],m,o[i]);break}c+=o[i].addedLength,i+=1}return n||(n=e.c?[e.v[0][0],e.v[0][1]]:[e.v[e._length-1][0],e.v[e._length-1][1]]),n},vectorOnPath:function(t,time,e){1==t?t=this.v.c:0==t&&(t=.999);var n=this.pointOnPath(t,time),r=this.pointOnPath(t+.001,time),o=r[0]-n[0],l=r[1]-n[1],h=Math.sqrt(Math.pow(o,2)+Math.pow(l,2));return 0===h?[0,0]:"tangent"===e?[o/h,l/h]:[-l/h,o/h]},tangentOnPath:function(t,time){return this.vectorOnPath(t,time,"tangent")},normalOnPath:function(t,time){return this.vectorOnPath(t,time,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([d],c),extendPrototype([d],f),f.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},f.prototype.initiateExpression=ExpressionManager.initiateExpression;var m=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,data,e,n,r){var o=m(t,data,e,n,r);return o.propertyIndex=data.ix,o.lock=!1,3===e?expressionHelpers.searchExpressions(t,data.pt,o):4===e&&expressionHelpers.searchExpressions(t,data.ks,o),o.k&&t.addDynamicProperty(o),o}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(t,text){var e=this.calculateExpression(text);if(t.t!==e){var n={};return this.copyData(n,t),n.t=e.toString(),n.__complete=!1,n}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(t,ins){var e,i,n=createNS("feMerge");for(n.setAttribute("result",t),i=0;i<ins.length;i+=1)(e=createNS("feMergeNode")).setAttribute("in",ins[i]),n.appendChild(e),n.appendChild(e);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(filter,t,e,n,source){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=r,r.setAttribute("result",n+"_tint_1"),filter.appendChild(r),(r=createNS("feColorMatrix")).setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",n+"_tint_2"),filter.appendChild(r),this.matrixFilter=r;var o=this.createMergeNode(n,[source,n+"_tint_1",n+"_tint_2"]);filter.appendChild(o)}function SVGFillFilter(filter,t,e,n){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",n),filter.appendChild(r),this.matrixFilter=r}function SVGStrokeEffect(t,e,n){this.initialized=!1,this.filterManager=e,this.elem=n,this.paths=[]}function SVGTritoneFilter(filter,t,e,n){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),filter.appendChild(r);var o=createNS("feComponentTransfer");o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",n),this.matrixFilter=o;var l=createNS("feFuncR");l.setAttribute("type","table"),o.appendChild(l),this.feFuncR=l;var h=createNS("feFuncG");h.setAttribute("type","table"),o.appendChild(h),this.feFuncG=h;var c=createNS("feFuncB");c.setAttribute("type","table"),o.appendChild(c),this.feFuncB=c,filter.appendChild(o)}function SVGProLevelsFilter(filter,t,e,n){this.filterManager=t;var r=this.filterManager.effectElements,o=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",o)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",o)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",o)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",o)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(o.setAttribute("color-interpolation-filters","sRGB"),filter.appendChild(o)),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&((o=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",n),filter.appendChild(o),this.feFuncRComposed=this.createFeFunc("feFuncR",o),this.feFuncGComposed=this.createFeFunc("feFuncG",o),this.feFuncBComposed=this.createFeFunc("feFuncB",o))}function SVGDropShadowEffect(filter,t,e,n,source){var r=t.container.globalData.renderConfig.filterSize,o=t.data.fs||r;filter.setAttribute("x",o.x||r.x),filter.setAttribute("y",o.y||r.y),filter.setAttribute("width",o.width||r.width),filter.setAttribute("height",o.height||r.height),this.filterManager=t;var l=createNS("feGaussianBlur");l.setAttribute("in","SourceAlpha"),l.setAttribute("result",n+"_drop_shadow_1"),l.setAttribute("stdDeviation","0"),this.feGaussianBlur=l,filter.appendChild(l);var h=createNS("feOffset");h.setAttribute("dx","25"),h.setAttribute("dy","0"),h.setAttribute("in",n+"_drop_shadow_1"),h.setAttribute("result",n+"_drop_shadow_2"),this.feOffset=h,filter.appendChild(h);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",n+"_drop_shadow_3"),this.feFlood=c,filter.appendChild(c);var f=createNS("feComposite");f.setAttribute("in",n+"_drop_shadow_3"),f.setAttribute("in2",n+"_drop_shadow_2"),f.setAttribute("operator","in"),f.setAttribute("result",n+"_drop_shadow_4"),filter.appendChild(f);var d=this.createMergeNode(n,[n+"_drop_shadow_4",source]);filter.appendChild(d)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+r+" 0"),this.matrixFilter.setAttribute("values",n[0]-e[0]+" 0 0 0 "+e[0]+" "+(n[1]-e[1])+" 0 0 0 "+e[1]+" "+(n[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var path,t,i,e,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(e=this.elem.maskManager.masksProperties.length,i=0):e=1+(i=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);i<e;i+=1)path=createNS("path"),t.appendChild(path),this.paths.push({p:path,m:i});if(3===this.filterManager.effectElements[10].p.v){var mask=createNS("mask"),r=createElementID();mask.setAttribute("id",r),mask.setAttribute("mask-type","alpha"),mask.appendChild(t),this.elem.globalData.defs.appendChild(mask);var g=createNS("g");for(g.setAttribute("mask","url("+getLocationHref()+"#"+r+")");n[0];)g.appendChild(n[0]);this.elem.layerElement.appendChild(g),this.masker=mask,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(t){var i;this.initialized||this.initialize();var mask,path,e=this.paths.length;for(i=0;i<e;i+=1)if(-1!==this.paths[i].m&&(mask=this.elem.maskManager.viewData[this.paths[i].m],path=this.paths[i].p,(t||this.filterManager._mdf||mask.prop._mdf)&&path.setAttribute("d",mask.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||mask.prop._mdf)){var n;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var s=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),r=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=path.getTotalLength();n="0 0 0 "+o*s+" ";var l,h=o*(r-s),c=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,f=Math.floor(h/c);for(l=0;l<f;l+=1)n+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";n+="0 "+10*o+" 0 0"}else n="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;path.setAttribute("stroke-dasharray",n)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*d[0])+","+bmFloor(255*d[1])+","+bmFloor(255*d[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,o=r[0]+" "+n[0]+" "+e[0],l=r[1]+" "+n[1]+" "+e[1],h=r[2]+" "+n[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",o),this.feFuncG.setAttribute("tableValues",l),this.feFuncB.setAttribute("tableValues",h)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var n=createNS(t);return n.setAttribute("type","table"),e.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(t,e,n,r,o){for(var l,h,c=0,f=Math.min(t,e),d=Math.max(t,e),table=Array.call(null,{length:256}),m=0,v=o-r,y=e-t;c<=256;)h=(l=c/256)<=f?y<0?o:r:l>=d?y<0?r:o:r+v*Math.pow((l-t)/y,1/n),table[m]=h,m+=1,c+=256/255;return table.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,n=this.filterManager.effectElements;this.feFuncRComposed&&(t||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(e=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(e=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(e=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(e=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(e=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var col=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*col[0]),Math.round(255*col[1]),Math.round(255*col[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var e=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=e*Math.cos(n),o=e*Math.sin(n);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,n){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(filter,t,e,n){filter.setAttribute("x","-100%"),filter.setAttribute("y","-100%"),filter.setAttribute("width","300%"),filter.setAttribute("height","300%"),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("result",n),filter.appendChild(r),this.feGaussianBlur=r}function TransformEffect(){}function SVGTransformEffect(t,e){this.init(e)}function CVTransformEffect(t){this.init(t)}return SVGMatte3Effect.prototype.findSymbol=function(mask){for(var i=0,t=_svgMatteSymbols.length;i<t;){if(_svgMatteSymbols[i]===mask)return _svgMatteSymbols[i];i+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(mask,t){var e=mask.layerElement.parentNode;if(e){for(var n,r=e.children,i=0,o=r.length;i<o&&r[i]!==mask.layerElement;)i+=1;i<=o-2&&(n=r[i+1]);var l=createNS("use");l.setAttribute("href","#"+t),n?e.insertBefore(l,n):e.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,mask){if(!this.findSymbol(mask)){var e=createElementID(),n=createNS("mask");n.setAttribute("id",mask.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(mask);var defs=t.globalData.defs;defs.appendChild(n);var symbol=createNS("symbol");symbol.setAttribute("id",e),this.replaceInParent(mask,e),symbol.appendChild(mask.layerElement),defs.appendChild(symbol);var r=createNS("use");r.setAttribute("href","#"+e),n.appendChild(r),mask.data.hd=!1,mask.show()}t.setMatte(mask.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,i=0,n=e.length;i<n;)e[i]&&e[i].data.ind===t&&this.setElementAsMask(this.elem,e[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=3==n?0:e,o=2==n?0:e;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+o);var l=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",l)}},TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,n=e[0].p.v,r=e[1].p.v,o=1===e[2].p.v,l=e[3].p.v,h=o?l:e[4].p.v,c=e[5].p.v,f=e[6].p.v,d=e[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(.01*h,.01*l,1),this.matrix.rotate(-d*degToRads),this.matrix.skewFromAxis(-c*degToRads,(f+90)*degToRads),this.matrix.translate(r[0],r[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())},3444:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));const r=(object,t)=>t.some((t=>object instanceof t));let o,l;const h=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap;let v={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||f.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function y(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(w(this),e),x(h.get(this))}:function(...e){return x(t.apply(w(this),e))}:function(e,...n){const r=t.call(w(this),e,...n);return f.set(r,e.sort?e.sort():[e]),x(r)}}function _(t){return"function"==typeof t?y(t):(t instanceof IDBTransaction&&function(t){if(c.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{e(),r()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)}));c.set(t,e)}(t),r(t,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,v):t)}function x(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{e(x(t.result)),r()},l=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)}));return e.then((e=>{e instanceof IDBCursor&&h.set(e,t)})).catch((()=>{})),m.set(e,t),e}(t);if(d.has(t))return d.get(t);const e=_(t);return e!==t&&(d.set(t,e),m.set(e,t)),e}const w=t=>m.get(t);function M(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const h=indexedDB.open(t,e),c=x(h);return r&&h.addEventListener("upgradeneeded",(t=>{r(x(h.result),t.oldVersion,t.newVersion,x(h.transaction),t)})),n&&h.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),c.then((t=>{l&&t.addEventListener("close",(()=>l())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),c}const S=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],A=new Map;function T(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(A.get(e))return A.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=E.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!S.includes(n))return;const l=async function(t,...e){const l=this.transaction(t,o?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(e.shift())),(await Promise.all([h[n](...e),o&&l.done]))[0]};return A.set(e,l),l}v=(t=>({...t,get:(e,n,r)=>T(e,n)||t.get(e,n,r),has:(e,n)=>!!T(e,n)||t.has(e,n)}))(v)},3470:function(t,e,n){var r=n(670),o=n(956);t.exports={throttle:r,debounce:o}},35:function(t,e,n){var r=n(3542);t.exports=function(t){return r(t,5)}},354:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3542:function(t,e,n){var r=n(996),o=n(1335),l=n(722),h=n(3571),c=n(3577),f=n(3580),d=n(656),m=n(3581),v=n(3582),y=n(1345),_=n(3583),x=n(726),w=n(3586),M=n(3587),S=n(3592),E=n(312),A=n(1e3),T=n(3593),C=n(354),P=n(3595),R=n(724),I=n(1004),k="[object Arguments]",D="[object Function]",L="[object Object]",F={};F[k]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F[L]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F[D]=F["[object WeakMap]"]=!1,t.exports=function t(e,n,O,N,object,B){var U,z=1&n,V=2&n,j=4&n;if(O&&(U=object?O(e,N,object,B):O(e)),void 0!==U)return U;if(!C(e))return e;var H=E(e);if(H){if(U=w(e),!z)return d(e,U)}else{var G=x(e),W=G==D||"[object GeneratorFunction]"==G;if(A(e))return f(e,z);if(G==L||G==k||W&&!object){if(U=V||W?{}:S(e),!z)return V?v(e,c(U,e)):m(e,h(U,e))}else{if(!F[G])return object?e:{};U=M(e,G,z)}}B||(B=new r);var X=B.get(e);if(X)return X;B.set(e,U),P(e)?e.forEach((function(r){U.add(t(r,n,O,r,e,B))})):T(e)&&e.forEach((function(r,o){U.set(o,t(r,n,O,o,e,B))}));var Y=H?void 0:(j?V?_:y:V?I:R)(e);return o(Y||e,(function(r,o){Y&&(r=e[o=r]),l(U,o,t(r,n,O,o,e,B))})),U}},3543:function(t,e){t.exports=function(){this.__data__=[],this.size=0}},3544:function(t,e,n){var r=n(719),o=Array.prototype.splice;t.exports=function(t){var data=this.__data__,e=r(data,t);return!(e<0)&&(e==data.length-1?data.pop():o.call(data,e,1),--this.size,!0)}},3545:function(t,e,n){var r=n(719);t.exports=function(t){var data=this.__data__,e=r(data,t);return e<0?void 0:data[e][1]}},3546:function(t,e,n){var r=n(719);t.exports=function(t){return r(this.__data__,t)>-1}},3547:function(t,e,n){var r=n(719);t.exports=function(t,e){var data=this.__data__,n=r(data,t);return n<0?(++this.size,data.push([t,e])):data[n][1]=e,this}},3548:function(t,e,n){var r=n(718);t.exports=function(){this.__data__=new r,this.size=0}},3549:function(t,e){t.exports=function(t){var data=this.__data__,e=data.delete(t);return this.size=data.size,e}},355:function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},3550:function(t,e){t.exports=function(t){return this.__data__.get(t)}},3551:function(t,e){t.exports=function(t){return this.__data__.has(t)}},3552:function(t,e,n){var r=n(718),o=n(997),l=n(998);t.exports=function(t,e){var data=this.__data__;if(data instanceof r){var n=data.__data__;if(!o||n.length<199)return n.push([t,e]),this.size=++data.size,this;data=this.__data__=new l(n)}return data.set(t,e),this.size=data.size,this}},3553:function(t,e,n){var r=n(1332),o=n(3556),l=n(354),h=n(1334),c=/^\[object .+?Constructor\]$/,f=Function.prototype,d=Object.prototype,m=f.toString,v=d.hasOwnProperty,y=RegExp("^"+m.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!l(t)||o(t))&&(r(t)?y:c).test(h(t))}},3554:function(t,e,n){var r=n(537),o=Object.prototype,l=o.hasOwnProperty,h=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=l.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=h.call(t);return r&&(e?t[c]=n:delete t[c]),o}},3555:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},3556:function(t,e,n){var r,o=n(3557),l=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!l&&l in t}},3557:function(t,e,n){var r=n(287)["__core-js_shared__"];t.exports=r},3558:function(t,e){t.exports=function(object,t){return null==object?void 0:object[t]}},3559:function(t,e,n){var r=n(3560),o=n(718),l=n(997);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(l||o),string:new r}}},3560:function(t,e,n){var r=n(3561),o=n(3562),l=n(3563),h=n(3564),c=n(3565);function f(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=o,f.prototype.get=l,f.prototype.has=h,f.prototype.set=c,t.exports=f},3561:function(t,e,n){var r=n(720);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},3562:function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3563:function(t,e,n){var r=n(720),o=Object.prototype.hasOwnProperty;t.exports=function(t){var data=this.__data__;if(r){var e=data[t];return"__lodash_hash_undefined__"===e?void 0:e}return o.call(data,t)?data[t]:void 0}},3564:function(t,e,n){var r=n(720),o=Object.prototype.hasOwnProperty;t.exports=function(t){var data=this.__data__;return r?void 0!==data[t]:o.call(data,t)}},3565:function(t,e,n){var r=n(720);t.exports=function(t,e){var data=this.__data__;return this.size+=this.has(t)?0:1,data[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},3566:function(t,e,n){var r=n(721);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},3567:function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},3568:function(t,e,n){var r=n(721);t.exports=function(t){return r(this,t).get(t)}},3569:function(t,e,n){var r=n(721);t.exports=function(t){return r(this,t).has(t)}},357:function(t,e,n){var r=n(658),o=n(3965);t.exports=function t(e,n,l,h,c){var f=-1,d=e.length;for(l||(l=o),c||(c=[]);++f<d;){var m=e[f];n>0&&l(m)?n>1?t(m,n-1,l,h,c):r(c,m):h||(c[c.length]=m)}return c}},3570:function(t,e,n){var r=n(721);t.exports=function(t,e){var data=r(this,t),n=data.size;return data.set(t,e),this.size+=data.size==n?0:1,this}},3571:function(t,e,n){var r=n(723),o=n(724);t.exports=function(object,source){return object&&r(source,o(source),object)}},3572:function(t,e,n){var r=n(655),o=n(418);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},3573:function(t,e){t.exports=function(){return!1}},3574:function(t,e,n){var r=n(655),o=n(1001),l=n(418),h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h["[object Arguments]"]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h["[object Map]"]=h["[object Number]"]=h["[object Object]"]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1,t.exports=function(t){return l(t)&&o(t.length)&&!!h[r(t)]}},3575:function(t,e,n){var r=n(1003),o=n(3576),l=Object.prototype.hasOwnProperty;t.exports=function(object){if(!r(object))return o(object);var t=[];for(var e in Object(object))l.call(object,e)&&"constructor"!=e&&t.push(e);return t}},3576:function(t,e,n){var r=n(1341)(Object.keys,Object);t.exports=r},3577:function(t,e,n){var r=n(723),o=n(1004);t.exports=function(object,source){return object&&r(source,o(source),object)}},3578:function(t,e,n){var r=n(354),o=n(1003),l=n(3579),h=Object.prototype.hasOwnProperty;t.exports=function(object){if(!r(object))return l(object);var t=o(object),e=[];for(var n in object)("constructor"!=n||!t&&h.call(object,n))&&e.push(n);return e}},3579:function(t,e){t.exports=function(object){var t=[];if(null!=object)for(var e in Object(object))t.push(e);return t}},358:function(t,e,n){var r=n(725),o=n(418);t.exports=function(t){return o(t)&&r(t)}},3580:function(t,e,n){(function(t){var r=n(287),o=e&&!e.nodeType&&e,l=o&&"object"==typeof t&&t&&!t.nodeType&&t,h=l&&l.exports===o?r.Buffer:void 0,c=h?h.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(309)(t))},3581:function(t,e,n){var r=n(723),o=n(1005);t.exports=function(source,object){return r(source,o(source),object)}},3582:function(t,e,n){var r=n(723),o=n(1343);t.exports=function(source,object){return r(source,o(source),object)}},3583:function(t,e,n){var r=n(1346),o=n(1343),l=n(1004);t.exports=function(object){return r(object,l,o)}},3584:function(t,e,n){var r=n(496)(n(287),"DataView");t.exports=r},3585:function(t,e,n){var r=n(496)(n(287),"Promise");t.exports=r},3586:function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},3587:function(t,e,n){var r=n(1006),o=n(3588),l=n(3589),h=n(3590),c=n(3591);t.exports=function(object,t,e){var n=object.constructor;switch(t){case"[object ArrayBuffer]":return r(object);case"[object Boolean]":case"[object Date]":return new n(+object);case"[object DataView]":return o(object,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(object,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(object);case"[object RegExp]":return l(object);case"[object Symbol]":return h(object)}}},3588:function(t,e,n){var r=n(1006);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},3589:function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},3590:function(t,e,n){var r=n(537),o=r?r.prototype:void 0,l=o?o.valueOf:void 0;t.exports=function(symbol){return l?Object(l.call(symbol)):{}}},3591:function(t,e,n){var r=n(1006);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},3592:function(t,e,n){var r=n(727),o=n(1344),l=n(1003);t.exports=function(object){return"function"!=typeof object.constructor||l(object)?{}:r(o(object))}},3593:function(t,e,n){var r=n(3594),o=n(497),l=n(1002),h=l&&l.isMap,c=h?o(h):r;t.exports=c},3594:function(t,e,n){var r=n(726),o=n(418);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},3595:function(t,e,n){var r=n(3596),o=n(497),l=n(1002),h=l&&l.isSet,c=h?o(h):r;t.exports=c},3596:function(t,e,n){var r=n(726),o=n(418);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},3641:function(t,e,n){"use strict";var r=n(1369),o=n(1370),l={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},h=Array.isArray,c=Array.prototype.push,f=function(t,e){c.apply(t,h(e)?e:[e])},d=Date.prototype.toISOString,m={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return d.call(t)},skipNulls:!1,strictNullHandling:!1},v=function t(object,e,n,o,l,c,filter,d,v,y,_,x){var w=object;if("function"==typeof filter?w=filter(e,w):w instanceof Date&&(w=y(w)),null===w){if(o)return c&&!x?c(e,m.encoder):e;w=""}if("string"==typeof w||"number"==typeof w||"boolean"==typeof w||r.isBuffer(w))return c?[_(x?e:c(e,m.encoder))+"="+_(c(w,m.encoder))]:[_(e)+"="+_(String(w))];var M,S=[];if(void 0===w)return S;if(h(filter))M=filter;else{var E=Object.keys(w);M=d?E.sort(d):E}for(var i=0;i<M.length;++i){var A=M[i];l&&null===w[A]||(h(w)?f(S,t(w[A],n(e,A),n,o,l,c,filter,d,v,y,_,x)):f(S,t(w[A],e+(v?"."+A:"["+A+"]"),n,o,l,c,filter,d,v,y,_,x)))}return S};t.exports=function(object,t){var e=object,n=t?r.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===n.delimiter?m.delimiter:n.delimiter,d="boolean"==typeof n.strictNullHandling?n.strictNullHandling:m.strictNullHandling,y="boolean"==typeof n.skipNulls?n.skipNulls:m.skipNulls,_="boolean"==typeof n.encode?n.encode:m.encode,x="function"==typeof n.encoder?n.encoder:m.encoder,w="function"==typeof n.sort?n.sort:null,M=void 0!==n.allowDots&&n.allowDots,S="function"==typeof n.serializeDate?n.serializeDate:m.serializeDate,E="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:m.encodeValuesOnly;if(void 0===n.format)n.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,n.format))throw new TypeError("Unknown format option provided.");var A,filter,T=o.formatters[n.format];"function"==typeof n.filter?e=(filter=n.filter)("",e):h(n.filter)&&(A=filter=n.filter);var C,P=[];if("object"!=typeof e||null===e)return"";C=n.arrayFormat in l?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var R=l[C];A||(A=Object.keys(e)),w&&A.sort(w);for(var i=0;i<A.length;++i){var I=A[i];y&&null===e[I]||f(P,v(e[I],I,R,d,y,_?x:null,filter,w,M,S,T,E))}var k=P.join(c),D=!0===n.addQueryPrefix?"?":"";return k.length>0?D+k:""}},3642:function(t,e,n){"use strict";var r=n(1369),o=Object.prototype.hasOwnProperty,l={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},h=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,l=/(\[[^[\]]*])/g,h=/(\[[^[\]]*])/.exec(r),c=h?r.slice(0,h.index):r,f=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var i=0;null!==(h=l.exec(r))&&i<n.depth;){if(i+=1,!n.plainObjects&&o.call(Object.prototype,h[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(h[1])}return h&&f.push("["+r.slice(h.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,l=t[i];if("[]"===l&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var h="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,c=parseInt(h,10);n.parseArrays||""!==h?!isNaN(c)&&l!==h&&String(c)===h&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=r:"__proto__"!==h&&(o[h]=r):o={0:r}}r=o}return r}(f,e,n)}};t.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:l.delimiter,n.depth="number"==typeof n.depth?n.depth:l.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:l.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:l.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:l.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:l.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:l.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:l.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:l.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,c=r.split(e.delimiter,h),i=0;i<c.length;++i){var f,d,m=c[i],v=m.indexOf("]="),y=-1===v?m.indexOf("="):v+1;-1===y?(f=e.decoder(m,l.decoder),d=e.strictNullHandling?null:""):(f=e.decoder(m.slice(0,y),l.decoder),d=e.decoder(m.slice(y+1),l.decoder)),o.call(n,f)?n[f]=[].concat(n[f]).concat(d):n[f]=d}return n}(t,n):t,f=n.plainObjects?Object.create(null):{},d=Object.keys(c),i=0;i<d.length;++i){var m=d[i],v=h(m,c[m],n);f=r.merge(f,v,n)}return r.compact(f)}},3644:function(t,e){e.read=function(t,e,n,r,o){var l,h,c=8*o-r-1,f=(1<<c)-1,d=f>>1,m=-7,i=n?o-1:0,v=n?-1:1,s=t[e+i];for(i+=v,l=s&(1<<-m)-1,s>>=-m,m+=c;m>0;l=256*l+t[e+i],i+=v,m-=8);for(h=l&(1<<-m)-1,l>>=-m,m+=r;m>0;h=256*h+t[e+i],i+=v,m-=8);if(0===l)l=1-d;else{if(l===f)return h?NaN:1/0*(s?-1:1);h+=Math.pow(2,r),l-=d}return(s?-1:1)*h*Math.pow(2,l-r)},e.write=function(t,e,n,r,o,l){var h,c,f,d=8*l-o-1,m=(1<<d)-1,v=m>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=r?0:l-1,y=r?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,h=m):(h=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-h))<1&&(h--,f*=2),(e+=h+v>=1?rt/f:rt*Math.pow(2,1-v))*f>=2&&(h++,f/=2),h+v>=m?(c=0,h=m):h+v>=1?(c=(e*f-1)*Math.pow(2,o),h+=v):(c=e*Math.pow(2,v-1)*Math.pow(2,o),h=0));o>=8;t[n+i]=255&c,i+=y,c/=256,o-=8);for(h=h<<o|c,d+=o;d>0;t[n+i]=255&h,i+=y,h/=256,d-=8);t[n+i-y]|=128*s}},3646:function(t,e,n){"use strict";var r=n(123).Buffer,o=n(3647);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,t=""+p.data;p=p.next;)t+=s+p.data;return t},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);for(var e,n,o,l=r.allocUnsafe(t>>>0),p=this.head,i=0;p;)e=p.data,n=l,o=i,e.copy(n,o),i+=p.data.length,p=p.next;return l},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},3649:function(t,e,n){"use strict";t.exports=l;var r=n(1377),o=Object.create(n(660));function l(t){if(!(this instanceof l))return new l(t);r.call(this,t)}o.inherits=n(110),o.inherits(l,r),l.prototype._transform=function(t,e,n){n(null,t)}},3650:function(t,e,n){t.exports=n(1016)},3651:function(t,e,n){t.exports=n(498)},3652:function(t,e,n){t.exports=n(539).Transform},3653:function(t,e,n){t.exports=n(539).PassThrough},3654:function(t,e,n){var r=n(110),o=n(540),l=n(123).Buffer,h=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function f(){this.init(),this._w=c,o.call(this,64,56)}function d(t){return t<<30|t>>>2}function m(s,b,t,e){return 0===s?b&t|~b&e:2===s?b&t|b&e|t&e:b^t^e}r(f,o),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(t){for(var e,n=this._w,a=0|this._a,b=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,i=0;i<16;++i)n[i]=t.readInt32BE(4*i);for(;i<80;++i)n[i]=n[i-3]^n[i-8]^n[i-14]^n[i-16];for(var c=0;c<80;++c){var s=~~(c/20),f=0|((e=a)<<5|e>>>27)+m(s,b,r,o)+l+n[c]+h[s];l=o,o=r,r=d(b),b=a,a=f}this._a=a+this._a|0,this._b=b+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},f.prototype._hash=function(){var t=l.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=f},3655:function(t,e,n){var r=n(110),o=n(540),l=n(123).Buffer,h=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function f(){this.init(),this._w=c,o.call(this,64,56)}function d(t){return t<<5|t>>>27}function m(t){return t<<30|t>>>2}function v(s,b,t,e){return 0===s?b&t|~b&e:2===s?b&t|b&e|t&e:b^t^e}r(f,o),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(t){for(var e,n=this._w,a=0|this._a,b=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,i=0;i<16;++i)n[i]=t.readInt32BE(4*i);for(;i<80;++i)n[i]=(e=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|e>>>31;for(var c=0;c<80;++c){var s=~~(c/20),f=d(a)+v(s,b,r,o)+l+n[c]+h[s]|0;l=o,o=r,r=m(b),b=a,a=f}this._a=a+this._a|0,this._b=b+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},f.prototype._hash=function(){var t=l.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=f},3656:function(t,e,n){var r=n(110),o=n(1378),l=n(540),h=n(123).Buffer,c=new Array(64);function f(){this.init(),this._w=c,l.call(this,64,56)}r(f,o),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var t=h.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=f},3657:function(t,e,n){var r=n(110),o=n(1379),l=n(540),h=n(123).Buffer,c=new Array(160);function f(){this.init(),this._w=c,l.call(this,128,112)}r(f,o),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var t=h.allocUnsafe(48);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=f},3660:function(t,e,n){(function(e){var r,o,l=n(123).Buffer,h=n(1384),c=n(1385),f=n(1386),d=n(1387),m=e.crypto&&e.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},y=[];function _(){return o||(o=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function x(t,e,n,r,o){return m.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return m.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:o}},t,r<<3)})).then((function(t){return l.from(t)}))}t.exports=function(t,n,o,w,M,S){"function"==typeof M&&(S=M,M=void 0);var E=v[(M=M||"sha1").toLowerCase()];if(E&&"function"==typeof e.Promise){if(h(o,w),t=d(t,c,"Password"),n=d(n,c,"Salt"),"function"!=typeof S)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){_()((function(){e(null,t)}))}),(function(t){_()((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(void 0!==y[t])return y[t];var n=x(r=r||l.alloc(8),r,10,128,t).then((function(){return!0})).catch((function(){return!1}));return y[t]=n,n}(E).then((function(e){return e?x(t,n,o,w,E):f(t,n,o,w,M)})),S)}else _()((function(){var e;try{e=f(t,n,o,w,M)}catch(t){return S(t)}S(null,e)}))}}).call(this,n(149))},3678:function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function l(t,base,e){if(l.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==base&&"be"!==base||(e=base,base=10),this._init(t||0,base||10,e||"be"))}var h;"object"==typeof t?t.exports=l:e.BN=l,l.BN=l,l.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(3679).Buffer}catch(t){}function c(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function f(t,e,n){var r=c(t,n);return n-1>=e&&(r|=c(t,n-1)<<4),r}function d(t,e,n,r){for(var o=0,l=Math.min(t.length,n),i=e;i<l;i++){var h=t.charCodeAt(i)-48;o*=r,o+=h>=49?h-49+10:h>=17?h-17+10:h}return o}l.isBN=function(t){return t instanceof l||null!==t&&"object"==typeof t&&t.constructor.wordSize===l.wordSize&&Array.isArray(t.words)},l.max=function(t,e){return t.cmp(e)>0?t:e},l.min=function(t,e){return t.cmp(e)<0?t:e},l.prototype._init=function(t,base,e){if("number"==typeof t)return this._initNumber(t,base,e);if("object"==typeof t)return this._initArray(t,base,e);"hex"===base&&(base=16),r(base===(0|base)&&base>=2&&base<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===base?this._parseHex(t,n,e):(this._parseBase(t,base,n),"le"===e&&this._initArray(this.toArray(),base,e)))},l.prototype._initNumber=function(t,base,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),base,e)},l.prototype._initArray=function(t,base,e){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o,l=0;if("be"===e)for(i=t.length-1,n=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=o<<l&67108863,this.words[n+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,n++);else if("le"===e)for(i=0,n=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=o<<l&67108863,this.words[n+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,n++);return this.strip()},l.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o=0,l=0;if("be"===n)for(i=t.length-1;i>=e;i-=2)r=f(t,e,i)<<o,this.words[l]|=67108863&r,o>=18?(o-=18,l+=1,this.words[l]|=r>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)r=f(t,e,i)<<o,this.words[l]|=67108863&r,o>=18?(o-=18,l+=1,this.words[l]|=r>>>26):o+=8;this.strip()},l.prototype._parseBase=function(t,base,e){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=base)n++;n--,r=r/base|0;for(var o=t.length-e,l=o%n,h=Math.min(o,o-l)+e,c=0,i=e;i<h;i+=n)c=d(t,i,i+n,base),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==l){var f=1;for(c=d(t,i,t.length,base),i=0;i<l;i++)f*=base;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},l.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},l.prototype.clone=function(){var t=new l(null);return this.copy(t),t},l.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},l.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function _(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var a=0|t.words[0],b=0|e.words[0],o=a*b,l=67108863&o,h=o/67108864|0;n.words[0]=l;for(var c=1;c<r;c++){for(var f=h>>>26,d=67108863&h,m=Math.min(c,e.length-1),v=Math.max(0,c-t.length+1);v<=m;v++){var i=c-v|0;f+=(o=(a=0|t.words[i])*(b=0|e.words[v])+d)/67108864|0,d=67108863&o}n.words[c]=0|d,h=0|f}return 0!==h?n.words[c]=0|h:n.length--,n.strip()}l.prototype.toString=function(base,t){var e;if(t=0|t||1,16===(base=base||10)||"hex"===base){e="";for(var n=0,o=0,i=0;i<this.length;i++){var l=this.words[i],h=(16777215&(l<<n|o)).toString(16);e=0!==(o=l>>>24-n&16777215)||i!==this.length-1?m[6-h.length]+h+e:h+e,(n+=2)>=26&&(n-=26,i--)}for(0!==o&&(e=o.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(base===(0|base)&&base>=2&&base<=36){var c=v[base],f=y[base];e="";var d=this.clone();for(d.negative=0;!d.isZero();){var _=d.modn(f).toString(base);e=(d=d.idivn(f)).isZero()?_+e:m[c-_.length]+_+e}for(this.isZero()&&(e="0"+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(t,e){return r(void 0!==h),this.toArrayLike(h,t,e)},l.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},l.prototype.toArrayLike=function(t,e,n){var o=this.byteLength(),l=n||Math.max(1,o);r(o<=l,"byte array longer than desired length"),r(l>0,"Requested array length <= 0"),this.strip();var b,i,h="le"===e,c=new t(l),q=this.clone();if(h){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),c[i]=b;for(;i<l;i++)c[i]=0}else{for(i=0;i<l-o;i++)c[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),c[l-i-1]=b}return c},Math.clz32?l.prototype._countBits=function(t){return 32-Math.clz32(t)}:l.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},l.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 8191&e||(n+=13,e>>>=13),127&e||(n+=7,e>>>=7),15&e||(n+=4,e>>>=4),3&e||(n+=2,e>>>=2),1&e||n++,n},l.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(t+=b,26!==b)break}return t},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},l.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return 0!==this.negative},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},l.prototype.ior=function(t){return r(!(this.negative|t.negative)),this.iuor(t)},l.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},l.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},l.prototype.iuand=function(t){var b;b=this.length>t.length?t:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=b.length,this.strip()},l.prototype.iand=function(t){return r(!(this.negative|t.negative)),this.iuand(t)},l.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},l.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},l.prototype.iuxor=function(t){var a,b;this.length>t.length?(a=this,b=t):(a=t,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},l.prototype.ixor=function(t){return r(!(this.negative|t.negative)),this.iuxor(t)},l.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},l.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},l.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},l.prototype.notn=function(t){return this.clone().inotn(t)},l.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},l.prototype.iadd=function(t){var e,a,b;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(a=this,b=t):(a=t,b=this);for(var n=0,i=0;i<b.length;i++)e=(0|a.words[i])+(0|b.words[i])+n,this.words[i]=67108863&e,n=e>>>26;for(;0!==n&&i<a.length;i++)e=(0|a.words[i])+n,this.words[i]=67108863&e,n=e>>>26;if(this.length=a.length,0!==n)this.words[this.length]=n,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},l.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},l.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,b,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(a=this,b=t):(a=t,b=this);for(var r=0,i=0;i<b.length;i++)r=(e=(0|a.words[i])-(0|b.words[i])+r)>>26,this.words[i]=67108863&e;for(;0!==r&&i<a.length;i++)r=(e=(0|a.words[i])+r)>>26,this.words[i]=67108863&e;if(0===r&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(t){return this.clone().isub(t)};var x=function(t,e,n){var r,o,l,a=t.words,b=e.words,h=n.words,c=0,f=0|a[0],d=8191&f,m=f>>>13,v=0|a[1],y=8191&v,_=v>>>13,x=0|a[2],w=8191&x,M=x>>>13,S=0|a[3],E=8191&S,A=S>>>13,T=0|a[4],C=8191&T,P=T>>>13,R=0|a[5],I=8191&R,k=R>>>13,D=0|a[6],L=8191&D,F=D>>>13,O=0|a[7],N=8191&O,B=O>>>13,U=0|a[8],z=8191&U,V=U>>>13,j=0|a[9],H=8191&j,G=j>>>13,W=0|b[0],X=8191&W,Y=W>>>13,Z=0|b[1],K=8191&Z,$=Z>>>13,J=0|b[2],Q=8191&J,tt=J>>>13,et=0|b[3],nt=8191&et,it=et>>>13,st=0|b[4],ot=8191&st,at=st>>>13,lt=0|b[5],ht=8191&lt,ut=lt>>>13,ct=0|b[6],ft=8191&ct,pt=ct>>>13,mt=0|b[7],gt=8191&mt,vt=mt>>>13,yt=0|b[8],_t=8191&yt,bt=yt>>>13,xt=0|b[9],wt=8191&xt,Mt=xt>>>13;n.negative=t.negative^e.negative,n.length=19;var St=(c+(r=Math.imul(d,X))|0)+((8191&(o=(o=Math.imul(d,Y))+Math.imul(m,X)|0))<<13)|0;c=((l=Math.imul(m,Y))+(o>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(y,X),o=(o=Math.imul(y,Y))+Math.imul(_,X)|0,l=Math.imul(_,Y);var Et=(c+(r=r+Math.imul(d,K)|0)|0)+((8191&(o=(o=o+Math.imul(d,$)|0)+Math.imul(m,K)|0))<<13)|0;c=((l=l+Math.imul(m,$)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(w,X),o=(o=Math.imul(w,Y))+Math.imul(M,X)|0,l=Math.imul(M,Y),r=r+Math.imul(y,K)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(_,K)|0,l=l+Math.imul(_,$)|0;var At=(c+(r=r+Math.imul(d,Q)|0)|0)+((8191&(o=(o=o+Math.imul(d,tt)|0)+Math.imul(m,Q)|0))<<13)|0;c=((l=l+Math.imul(m,tt)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(E,X),o=(o=Math.imul(E,Y))+Math.imul(A,X)|0,l=Math.imul(A,Y),r=r+Math.imul(w,K)|0,o=(o=o+Math.imul(w,$)|0)+Math.imul(M,K)|0,l=l+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(_,Q)|0,l=l+Math.imul(_,tt)|0;var Tt=(c+(r=r+Math.imul(d,nt)|0)|0)+((8191&(o=(o=o+Math.imul(d,it)|0)+Math.imul(m,nt)|0))<<13)|0;c=((l=l+Math.imul(m,it)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(C,X),o=(o=Math.imul(C,Y))+Math.imul(P,X)|0,l=Math.imul(P,Y),r=r+Math.imul(E,K)|0,o=(o=o+Math.imul(E,$)|0)+Math.imul(A,K)|0,l=l+Math.imul(A,$)|0,r=r+Math.imul(w,Q)|0,o=(o=o+Math.imul(w,tt)|0)+Math.imul(M,Q)|0,l=l+Math.imul(M,tt)|0,r=r+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,it)|0)+Math.imul(_,nt)|0,l=l+Math.imul(_,it)|0;var Ct=(c+(r=r+Math.imul(d,ot)|0)|0)+((8191&(o=(o=o+Math.imul(d,at)|0)+Math.imul(m,ot)|0))<<13)|0;c=((l=l+Math.imul(m,at)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(I,X),o=(o=Math.imul(I,Y))+Math.imul(k,X)|0,l=Math.imul(k,Y),r=r+Math.imul(C,K)|0,o=(o=o+Math.imul(C,$)|0)+Math.imul(P,K)|0,l=l+Math.imul(P,$)|0,r=r+Math.imul(E,Q)|0,o=(o=o+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,l=l+Math.imul(A,tt)|0,r=r+Math.imul(w,nt)|0,o=(o=o+Math.imul(w,it)|0)+Math.imul(M,nt)|0,l=l+Math.imul(M,it)|0,r=r+Math.imul(y,ot)|0,o=(o=o+Math.imul(y,at)|0)+Math.imul(_,ot)|0,l=l+Math.imul(_,at)|0;var Pt=(c+(r=r+Math.imul(d,ht)|0)|0)+((8191&(o=(o=o+Math.imul(d,ut)|0)+Math.imul(m,ht)|0))<<13)|0;c=((l=l+Math.imul(m,ut)|0)+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(L,X),o=(o=Math.imul(L,Y))+Math.imul(F,X)|0,l=Math.imul(F,Y),r=r+Math.imul(I,K)|0,o=(o=o+Math.imul(I,$)|0)+Math.imul(k,K)|0,l=l+Math.imul(k,$)|0,r=r+Math.imul(C,Q)|0,o=(o=o+Math.imul(C,tt)|0)+Math.imul(P,Q)|0,l=l+Math.imul(P,tt)|0,r=r+Math.imul(E,nt)|0,o=(o=o+Math.imul(E,it)|0)+Math.imul(A,nt)|0,l=l+Math.imul(A,it)|0,r=r+Math.imul(w,ot)|0,o=(o=o+Math.imul(w,at)|0)+Math.imul(M,ot)|0,l=l+Math.imul(M,at)|0,r=r+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,ut)|0)+Math.imul(_,ht)|0,l=l+Math.imul(_,ut)|0;var Rt=(c+(r=r+Math.imul(d,ft)|0)|0)+((8191&(o=(o=o+Math.imul(d,pt)|0)+Math.imul(m,ft)|0))<<13)|0;c=((l=l+Math.imul(m,pt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,X),o=(o=Math.imul(N,Y))+Math.imul(B,X)|0,l=Math.imul(B,Y),r=r+Math.imul(L,K)|0,o=(o=o+Math.imul(L,$)|0)+Math.imul(F,K)|0,l=l+Math.imul(F,$)|0,r=r+Math.imul(I,Q)|0,o=(o=o+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,l=l+Math.imul(k,tt)|0,r=r+Math.imul(C,nt)|0,o=(o=o+Math.imul(C,it)|0)+Math.imul(P,nt)|0,l=l+Math.imul(P,it)|0,r=r+Math.imul(E,ot)|0,o=(o=o+Math.imul(E,at)|0)+Math.imul(A,ot)|0,l=l+Math.imul(A,at)|0,r=r+Math.imul(w,ht)|0,o=(o=o+Math.imul(w,ut)|0)+Math.imul(M,ht)|0,l=l+Math.imul(M,ut)|0,r=r+Math.imul(y,ft)|0,o=(o=o+Math.imul(y,pt)|0)+Math.imul(_,ft)|0,l=l+Math.imul(_,pt)|0;var It=(c+(r=r+Math.imul(d,gt)|0)|0)+((8191&(o=(o=o+Math.imul(d,vt)|0)+Math.imul(m,gt)|0))<<13)|0;c=((l=l+Math.imul(m,vt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(z,X),o=(o=Math.imul(z,Y))+Math.imul(V,X)|0,l=Math.imul(V,Y),r=r+Math.imul(N,K)|0,o=(o=o+Math.imul(N,$)|0)+Math.imul(B,K)|0,l=l+Math.imul(B,$)|0,r=r+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,tt)|0)+Math.imul(F,Q)|0,l=l+Math.imul(F,tt)|0,r=r+Math.imul(I,nt)|0,o=(o=o+Math.imul(I,it)|0)+Math.imul(k,nt)|0,l=l+Math.imul(k,it)|0,r=r+Math.imul(C,ot)|0,o=(o=o+Math.imul(C,at)|0)+Math.imul(P,ot)|0,l=l+Math.imul(P,at)|0,r=r+Math.imul(E,ht)|0,o=(o=o+Math.imul(E,ut)|0)+Math.imul(A,ht)|0,l=l+Math.imul(A,ut)|0,r=r+Math.imul(w,ft)|0,o=(o=o+Math.imul(w,pt)|0)+Math.imul(M,ft)|0,l=l+Math.imul(M,pt)|0,r=r+Math.imul(y,gt)|0,o=(o=o+Math.imul(y,vt)|0)+Math.imul(_,gt)|0,l=l+Math.imul(_,vt)|0;var kt=(c+(r=r+Math.imul(d,_t)|0)|0)+((8191&(o=(o=o+Math.imul(d,bt)|0)+Math.imul(m,_t)|0))<<13)|0;c=((l=l+Math.imul(m,bt)|0)+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(H,X),o=(o=Math.imul(H,Y))+Math.imul(G,X)|0,l=Math.imul(G,Y),r=r+Math.imul(z,K)|0,o=(o=o+Math.imul(z,$)|0)+Math.imul(V,K)|0,l=l+Math.imul(V,$)|0,r=r+Math.imul(N,Q)|0,o=(o=o+Math.imul(N,tt)|0)+Math.imul(B,Q)|0,l=l+Math.imul(B,tt)|0,r=r+Math.imul(L,nt)|0,o=(o=o+Math.imul(L,it)|0)+Math.imul(F,nt)|0,l=l+Math.imul(F,it)|0,r=r+Math.imul(I,ot)|0,o=(o=o+Math.imul(I,at)|0)+Math.imul(k,ot)|0,l=l+Math.imul(k,at)|0,r=r+Math.imul(C,ht)|0,o=(o=o+Math.imul(C,ut)|0)+Math.imul(P,ht)|0,l=l+Math.imul(P,ut)|0,r=r+Math.imul(E,ft)|0,o=(o=o+Math.imul(E,pt)|0)+Math.imul(A,ft)|0,l=l+Math.imul(A,pt)|0,r=r+Math.imul(w,gt)|0,o=(o=o+Math.imul(w,vt)|0)+Math.imul(M,gt)|0,l=l+Math.imul(M,vt)|0,r=r+Math.imul(y,_t)|0,o=(o=o+Math.imul(y,bt)|0)+Math.imul(_,_t)|0,l=l+Math.imul(_,bt)|0;var Dt=(c+(r=r+Math.imul(d,wt)|0)|0)+((8191&(o=(o=o+Math.imul(d,Mt)|0)+Math.imul(m,wt)|0))<<13)|0;c=((l=l+Math.imul(m,Mt)|0)+(o>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,r=Math.imul(H,K),o=(o=Math.imul(H,$))+Math.imul(G,K)|0,l=Math.imul(G,$),r=r+Math.imul(z,Q)|0,o=(o=o+Math.imul(z,tt)|0)+Math.imul(V,Q)|0,l=l+Math.imul(V,tt)|0,r=r+Math.imul(N,nt)|0,o=(o=o+Math.imul(N,it)|0)+Math.imul(B,nt)|0,l=l+Math.imul(B,it)|0,r=r+Math.imul(L,ot)|0,o=(o=o+Math.imul(L,at)|0)+Math.imul(F,ot)|0,l=l+Math.imul(F,at)|0,r=r+Math.imul(I,ht)|0,o=(o=o+Math.imul(I,ut)|0)+Math.imul(k,ht)|0,l=l+Math.imul(k,ut)|0,r=r+Math.imul(C,ft)|0,o=(o=o+Math.imul(C,pt)|0)+Math.imul(P,ft)|0,l=l+Math.imul(P,pt)|0,r=r+Math.imul(E,gt)|0,o=(o=o+Math.imul(E,vt)|0)+Math.imul(A,gt)|0,l=l+Math.imul(A,vt)|0,r=r+Math.imul(w,_t)|0,o=(o=o+Math.imul(w,bt)|0)+Math.imul(M,_t)|0,l=l+Math.imul(M,bt)|0;var Lt=(c+(r=r+Math.imul(y,wt)|0)|0)+((8191&(o=(o=o+Math.imul(y,Mt)|0)+Math.imul(_,wt)|0))<<13)|0;c=((l=l+Math.imul(_,Mt)|0)+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(H,Q),o=(o=Math.imul(H,tt))+Math.imul(G,Q)|0,l=Math.imul(G,tt),r=r+Math.imul(z,nt)|0,o=(o=o+Math.imul(z,it)|0)+Math.imul(V,nt)|0,l=l+Math.imul(V,it)|0,r=r+Math.imul(N,ot)|0,o=(o=o+Math.imul(N,at)|0)+Math.imul(B,ot)|0,l=l+Math.imul(B,at)|0,r=r+Math.imul(L,ht)|0,o=(o=o+Math.imul(L,ut)|0)+Math.imul(F,ht)|0,l=l+Math.imul(F,ut)|0,r=r+Math.imul(I,ft)|0,o=(o=o+Math.imul(I,pt)|0)+Math.imul(k,ft)|0,l=l+Math.imul(k,pt)|0,r=r+Math.imul(C,gt)|0,o=(o=o+Math.imul(C,vt)|0)+Math.imul(P,gt)|0,l=l+Math.imul(P,vt)|0,r=r+Math.imul(E,_t)|0,o=(o=o+Math.imul(E,bt)|0)+Math.imul(A,_t)|0,l=l+Math.imul(A,bt)|0;var Ft=(c+(r=r+Math.imul(w,wt)|0)|0)+((8191&(o=(o=o+Math.imul(w,Mt)|0)+Math.imul(M,wt)|0))<<13)|0;c=((l=l+Math.imul(M,Mt)|0)+(o>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(H,nt),o=(o=Math.imul(H,it))+Math.imul(G,nt)|0,l=Math.imul(G,it),r=r+Math.imul(z,ot)|0,o=(o=o+Math.imul(z,at)|0)+Math.imul(V,ot)|0,l=l+Math.imul(V,at)|0,r=r+Math.imul(N,ht)|0,o=(o=o+Math.imul(N,ut)|0)+Math.imul(B,ht)|0,l=l+Math.imul(B,ut)|0,r=r+Math.imul(L,ft)|0,o=(o=o+Math.imul(L,pt)|0)+Math.imul(F,ft)|0,l=l+Math.imul(F,pt)|0,r=r+Math.imul(I,gt)|0,o=(o=o+Math.imul(I,vt)|0)+Math.imul(k,gt)|0,l=l+Math.imul(k,vt)|0,r=r+Math.imul(C,_t)|0,o=(o=o+Math.imul(C,bt)|0)+Math.imul(P,_t)|0,l=l+Math.imul(P,bt)|0;var Ot=(c+(r=r+Math.imul(E,wt)|0)|0)+((8191&(o=(o=o+Math.imul(E,Mt)|0)+Math.imul(A,wt)|0))<<13)|0;c=((l=l+Math.imul(A,Mt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(H,ot),o=(o=Math.imul(H,at))+Math.imul(G,ot)|0,l=Math.imul(G,at),r=r+Math.imul(z,ht)|0,o=(o=o+Math.imul(z,ut)|0)+Math.imul(V,ht)|0,l=l+Math.imul(V,ut)|0,r=r+Math.imul(N,ft)|0,o=(o=o+Math.imul(N,pt)|0)+Math.imul(B,ft)|0,l=l+Math.imul(B,pt)|0,r=r+Math.imul(L,gt)|0,o=(o=o+Math.imul(L,vt)|0)+Math.imul(F,gt)|0,l=l+Math.imul(F,vt)|0,r=r+Math.imul(I,_t)|0,o=(o=o+Math.imul(I,bt)|0)+Math.imul(k,_t)|0,l=l+Math.imul(k,bt)|0;var Nt=(c+(r=r+Math.imul(C,wt)|0)|0)+((8191&(o=(o=o+Math.imul(C,Mt)|0)+Math.imul(P,wt)|0))<<13)|0;c=((l=l+Math.imul(P,Mt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(H,ht),o=(o=Math.imul(H,ut))+Math.imul(G,ht)|0,l=Math.imul(G,ut),r=r+Math.imul(z,ft)|0,o=(o=o+Math.imul(z,pt)|0)+Math.imul(V,ft)|0,l=l+Math.imul(V,pt)|0,r=r+Math.imul(N,gt)|0,o=(o=o+Math.imul(N,vt)|0)+Math.imul(B,gt)|0,l=l+Math.imul(B,vt)|0,r=r+Math.imul(L,_t)|0,o=(o=o+Math.imul(L,bt)|0)+Math.imul(F,_t)|0,l=l+Math.imul(F,bt)|0;var Bt=(c+(r=r+Math.imul(I,wt)|0)|0)+((8191&(o=(o=o+Math.imul(I,Mt)|0)+Math.imul(k,wt)|0))<<13)|0;c=((l=l+Math.imul(k,Mt)|0)+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(H,ft),o=(o=Math.imul(H,pt))+Math.imul(G,ft)|0,l=Math.imul(G,pt),r=r+Math.imul(z,gt)|0,o=(o=o+Math.imul(z,vt)|0)+Math.imul(V,gt)|0,l=l+Math.imul(V,vt)|0,r=r+Math.imul(N,_t)|0,o=(o=o+Math.imul(N,bt)|0)+Math.imul(B,_t)|0,l=l+Math.imul(B,bt)|0;var Ut=(c+(r=r+Math.imul(L,wt)|0)|0)+((8191&(o=(o=o+Math.imul(L,Mt)|0)+Math.imul(F,wt)|0))<<13)|0;c=((l=l+Math.imul(F,Mt)|0)+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,r=Math.imul(H,gt),o=(o=Math.imul(H,vt))+Math.imul(G,gt)|0,l=Math.imul(G,vt),r=r+Math.imul(z,_t)|0,o=(o=o+Math.imul(z,bt)|0)+Math.imul(V,_t)|0,l=l+Math.imul(V,bt)|0;var zt=(c+(r=r+Math.imul(N,wt)|0)|0)+((8191&(o=(o=o+Math.imul(N,Mt)|0)+Math.imul(B,wt)|0))<<13)|0;c=((l=l+Math.imul(B,Mt)|0)+(o>>>13)|0)+(zt>>>26)|0,zt&=67108863,r=Math.imul(H,_t),o=(o=Math.imul(H,bt))+Math.imul(G,_t)|0,l=Math.imul(G,bt);var Vt=(c+(r=r+Math.imul(z,wt)|0)|0)+((8191&(o=(o=o+Math.imul(z,Mt)|0)+Math.imul(V,wt)|0))<<13)|0;c=((l=l+Math.imul(V,Mt)|0)+(o>>>13)|0)+(Vt>>>26)|0,Vt&=67108863;var jt=(c+(r=Math.imul(H,wt))|0)+((8191&(o=(o=Math.imul(H,Mt))+Math.imul(G,wt)|0))<<13)|0;return c=((l=Math.imul(G,Mt))+(o>>>13)|0)+(jt>>>26)|0,jt&=67108863,h[0]=St,h[1]=Et,h[2]=At,h[3]=Tt,h[4]=Ct,h[5]=Pt,h[6]=Rt,h[7]=It,h[8]=kt,h[9]=Dt,h[10]=Lt,h[11]=Ft,h[12]=Ot,h[13]=Nt,h[14]=Bt,h[15]=Ut,h[16]=zt,h[17]=Vt,h[18]=jt,0!==c&&(h[19]=c,n.length++),n};function w(t,e,n){return(new M).mulp(t,e,n)}function M(t,e){this.x=t,this.y=e}Math.imul||(x=_),l.prototype.mulTo=function(t,e){var n,r=this.length+t.length;return n=10===this.length&&10===t.length?x(this,t,e):r<63?_(this,t,e):r<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,o=0,l=0;l<n.length-1;l++){var h=o;o=0;for(var c=67108863&r,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var i=l-d,m=(0|t.words[i])*(0|e.words[d]),v=67108863&m;c=67108863&(v=v+c|0),o+=(h=(h=h+(m/67108864|0)|0)+(v>>>26)|0)>>>26,h&=67108863}n.words[l]=c,r=h,h=o}return 0!==r?n.words[l]=r:n.length--,n.strip()}(this,t,e):w(this,t,e),n},M.prototype.makeRBT=function(t){for(var e=new Array(t),n=l.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,n,t);return e},M.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},M.prototype.permute=function(t,e,n,r,o,l){for(var i=0;i<l;i++)r[i]=e[t[i]],o[i]=n[t[i]]},M.prototype.transform=function(t,e,n,r,o,l){this.permute(l,t,e,n,r,o);for(var s=1;s<o;s<<=1)for(var h=s<<1,c=Math.cos(2*Math.PI/h),f=Math.sin(2*Math.PI/h),p=0;p<o;p+=h)for(var d=c,m=f,v=0;v<s;v++){var y=n[p+v],_=r[p+v],x=n[p+v+s],w=r[p+v+s],M=d*x-m*w;w=d*w+m*x,x=M,n[p+v]=y+x,r[p+v]=_+w,n[p+v+s]=y-x,r[p+v+s]=_-w,v!==h&&(M=c*d-f*m,m=c*m+f*d,d=M)}},M.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},M.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=t[i];t[i]=t[n-i-1],t[n-i-1]=r,r=e[i],e[i]=-e[n-i-1],e[n-i-1]=-r}},M.prototype.normalize13b=function(t,e){for(var n=0,i=0;i<e/2;i++){var r=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+n;t[i]=67108863&r,n=r<67108864?0:r/67108864|0}return t},M.prototype.convert13b=function(t,e,n,o){for(var l=0,i=0;i<e;i++)l+=0|t[i],n[2*i]=8191&l,l>>>=13,n[2*i+1]=8191&l,l>>>=13;for(i=2*e;i<o;++i)n[i]=0;r(0===l),r(!(-8192&l))},M.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},M.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(r),l=this.stub(r),h=new Array(r),c=new Array(r),f=new Array(r),d=new Array(r),m=new Array(r),v=new Array(r),y=n.words;y.length=r,this.convert13b(t.words,t.length,h,r),this.convert13b(e.words,e.length,d,r),this.transform(h,l,c,f,r,o),this.transform(d,l,m,v,r,o);for(var i=0;i<r;i++){var _=c[i]*m[i]-f[i]*v[i];f[i]=c[i]*v[i]+f[i]*m[i],c[i]=_}return this.conjugate(c,f,r),this.transform(c,f,y,l,r,o),this.conjugate(y,l,r),this.normalize13b(y,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},l.prototype.mul=function(t){var e=new l(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},l.prototype.mulf=function(t){var e=new l(null);return e.words=new Array(this.length+t.length),w(this,t,e)},l.prototype.imul=function(t){return this.clone().mulTo(t,this)},l.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},l.prototype.muln=function(t){return this.clone().imuln(t)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,o=n%26;e[n]=(t.words[r]&1<<o)>>>o}return e}(t);if(0===e.length)return new l(1);for(var n=this,i=0;i<e.length&&0===e[i];i++,n=n.sqr());if(++i<e.length)for(var q=n.sqr();i<e.length;i++,q=q.sqr())0!==e[i]&&(n=n.mul(q));return n},l.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,e=t%26,s=(t-e)/26,n=67108863>>>26-e<<26-e;if(0!==e){var o=0;for(i=0;i<this.length;i++){var l=this.words[i]&n,h=(0|this.words[i])-l<<e;this.words[i]=h|o,o=l>>>26-e}o&&(this.words[i]=o,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},l.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},l.prototype.iushrn=function(t,e,n){var o;r("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var l=t%26,s=Math.min((t-l)/26,this.length),mask=67108863^67108863>>>l<<l,h=n;if(o-=s,o=Math.max(0,o),h){for(var i=0;i<s;i++)h.words[i]=this.words[i];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var c=0;for(i=this.length-1;i>=0&&(0!==c||i>=o);i--){var f=0|this.words[i];this.words[i]=c<<26-l|f>>>l,c=f&mask}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},l.prototype.shln=function(t){return this.clone().ishln(t)},l.prototype.ushln=function(t){return this.clone().iushln(t)},l.prototype.shrn=function(t){return this.clone().ishrn(t)},l.prototype.ushrn=function(t){return this.clone().iushrn(t)},l.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,q=1<<e;return!(this.length<=s)&&!!(this.words[s]&q)},l.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var mask=67108863^67108863>>>e<<e;this.words[this.length-1]&=mask}return this.strip()},l.prototype.maskn=function(t){return this.clone().imaskn(t)},l.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},l.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},l.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},l.prototype.addn=function(t){return this.clone().iaddn(t)},l.prototype.subn=function(t){return this.clone().isubn(t)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(t,e,n){var i,o,l=t.length+n;this._expand(l);var h=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+h;var c=(0|t.words[i])*e;h=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)h=(o=(0|this.words[i+n])+h)>>26,this.words[i+n]=67108863&o;if(0===h)return this.strip();for(r(-1===h),h=0,i=0;i<this.length;i++)h=(o=-(0|this.words[i])+h)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},l.prototype._wordDiv=function(t,e){var n=(this.length,t.length),a=this.clone(),b=t,r=0|b.words[b.length-1];0!==(n=26-this._countBits(r))&&(b=b.ushln(n),a.iushln(n),r=0|b.words[b.length-1]);var q,o=a.length-b.length;if("mod"!==e){(q=new l(null)).length=o+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var h=a.clone()._ishlnsubmul(b,1,o);0===h.negative&&(a=h,q&&(q.words[o]=1));for(var c=o-1;c>=0;c--){var f=67108864*(0|a.words[b.length+c])+(0|a.words[b.length+c-1]);for(f=Math.min(f/r|0,67108863),a._ishlnsubmul(b,f,c);0!==a.negative;)f--,a.negative=0,a._ishlnsubmul(b,1,c),a.isZero()||(a.negative^=1);q&&(q.words[c]=f)}return q&&q.strip(),a.strip(),"div"!==e&&0!==n&&a.iushrn(n),{div:q||null,mod:a}},l.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:0!==this.negative&&0===t.negative?(h=this.neg().divmod(t,e),"mod"!==e&&(div=h.div.neg()),"div"!==e&&(o=h.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:div,mod:o}):0===this.negative&&0!==t.negative?(h=this.divmod(t.neg(),e),"mod"!==e&&(div=h.div.neg()),{div:div,mod:h.mod}):this.negative&t.negative?(h=this.neg().divmod(t.neg(),e),"div"!==e&&(o=h.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:h.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new l(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new l(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new l(this.modn(t.words[0]))}:this._wordDiv(t,e);var div,o,h},l.prototype.div=function(t){return this.divmod(t,"div",!1).div},l.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},l.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},l.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),o=t.andln(1),l=n.cmp(r);return l<0||1===o&&0===l?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},l.prototype.modn=function(t){r(t<=67108863);for(var p=(1<<26)%t,e=0,i=this.length-1;i>=0;i--)e=(p*e+(0|this.words[i]))%t;return e},l.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},l.prototype.divn=function(t){return this.clone().idivn(t)},l.prototype.egcd=function(p){r(0===p.negative),r(!p.isZero());var t=this,e=p.clone();t=0!==t.negative?t.umod(p):t.clone();for(var n=new l(1),o=new l(0),h=new l(0),c=new l(1),g=0;t.isEven()&&e.isEven();)t.iushrn(1),e.iushrn(1),++g;for(var f=e.clone(),d=t.clone();!t.isZero();){for(var i=0,m=1;!(t.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(t.iushrn(i);i-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(f),o.isub(d)),n.iushrn(1),o.iushrn(1);for(var v=0,y=1;!(e.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(h.isOdd()||c.isOdd())&&(h.iadd(f),c.isub(d)),h.iushrn(1),c.iushrn(1);t.cmp(e)>=0?(t.isub(e),n.isub(h),o.isub(c)):(e.isub(t),h.isub(n),c.isub(o))}return{a:h,b:c,gcd:e.iushln(g)}},l.prototype._invmp=function(p){r(0===p.negative),r(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var t,e=new l(1),n=new l(0),o=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,h=1;!(a.words[0]&h)&&i<26;++i,h<<=1);if(i>0)for(a.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(o),e.iushrn(1);for(var c=0,f=1;!(b.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(b.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);a.cmp(b)>=0?(a.isub(b),e.isub(n)):(b.isub(a),n.isub(e))}return(t=0===a.cmpn(1)?e:n).cmpn(0)<0&&t.iadd(p),t},l.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),b=t.clone();a.negative=0,b.negative=0;for(var e=0;a.isEven()&&b.isEven();e++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var n=a.cmp(b);if(n<0){var r=a;a=b,b=r}else if(0===n||0===b.cmpn(1))break;a.isub(b)}return b.iushln(e)},l.prototype.invm=function(t){return this.egcd(t).a.umod(t)},l.prototype.isEven=function(){return!(1&this.words[0])},l.prototype.isOdd=function(){return!(1&~this.words[0])},l.prototype.andln=function(t){return this.words[0]&t},l.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,s=(t-e)/26,q=1<<e;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var n=q,i=s;0!==n&&i<this.length;i++){var o=0|this.words[i];n=(o+=n)>>>26,o&=67108863,this.words[i]=o}return 0!==n&&(this.words[i]=n,this.length++),this},l.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},l.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},l.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},l.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|t.words[i];if(a!==b){a<b?e=-1:a>b&&(e=1);break}}return e},l.prototype.gtn=function(t){return 1===this.cmpn(t)},l.prototype.gt=function(t){return 1===this.cmp(t)},l.prototype.gten=function(t){return this.cmpn(t)>=0},l.prototype.gte=function(t){return this.cmp(t)>=0},l.prototype.ltn=function(t){return-1===this.cmpn(t)},l.prototype.lt=function(t){return-1===this.cmp(t)},l.prototype.lten=function(t){return this.cmpn(t)<=0},l.prototype.lte=function(t){return this.cmp(t)<=0},l.prototype.eqn=function(t){return 0===this.cmpn(t)},l.prototype.eq=function(t){return 0===this.cmp(t)},l.red=function(t){return new R(t)},l.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(t){return this.red=t,this},l.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},l.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},l.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},l.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},l.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},l.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},l.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},l.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var S={k256:null,p224:null,p192:null,p25519:null};function E(t,p){this.name=t,this.p=new l(p,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(t){if("string"==typeof t){var e=l._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){R.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var t=new l(null);return t.words=new Array(Math.ceil(this.n/13)),t},E.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},E.prototype.split=function(input,t){input.iushrn(this.n,0,t)},E.prototype.imulK=function(t){return t.imul(this.k)},o(A,E),A.prototype.split=function(input,output){for(var mask=4194303,t=Math.min(input.length,9),i=0;i<t;i++)output.words[i]=input.words[i];if(output.length=t,input.length<=9)return input.words[0]=0,void(input.length=1);var e=input.words[9];for(output.words[output.length++]=e&mask,i=10;i<input.length;i++){var n=0|input.words[i];input.words[i-10]=(n&mask)<<4|e>>>22,e=n}e>>>=22,input.words[i-10]=e,0===e&&input.length>10?input.length-=10:input.length-=9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(T,E),o(C,E),o(P,E),P.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},l._prime=function(t){if(S[t])return S[t];var e;if("k256"===t)e=new A;else if("p224"===t)e=new T;else if("p192"===t)e=new C;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new P}return S[t]=e,e},R.prototype._verify1=function(a){r(0===a.negative,"red works only with positives"),r(a.red,"red works only with red numbers")},R.prototype._verify2=function(a,b){r(!(a.negative|b.negative),"red works only with positives"),r(a.red&&a.red===b.red,"red works only with red numbers")},R.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},R.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},R.prototype.add=function(a,b){this._verify2(a,b);var t=a.add(b);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},R.prototype.iadd=function(a,b){this._verify2(a,b);var t=a.iadd(b);return t.cmp(this.m)>=0&&t.isub(this.m),t},R.prototype.sub=function(a,b){this._verify2(a,b);var t=a.sub(b);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},R.prototype.isub=function(a,b){this._verify2(a,b);var t=a.isub(b);return t.cmpn(0)<0&&t.iadd(this.m),t},R.prototype.shl=function(a,t){return this._verify1(a),this.imod(a.ushln(t))},R.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},R.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},R.prototype.isqr=function(a){return this.imul(a,a.clone())},R.prototype.sqr=function(a){return this.mul(a,a)},R.prototype.sqrt=function(a){if(a.isZero())return a.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var e=this.m.add(new l(1)).iushrn(2);return this.pow(a,e)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);r(!q.isZero());var n=new l(1).toRed(this),o=n.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new l(2*c*c).toRed(this);0!==this.pow(c,h).cmp(o);)c.redIAdd(o);for(var f=this.pow(c,q),d=this.pow(a,q.addn(1).iushrn(1)),m=this.pow(a,q),v=s;0!==m.cmp(n);){for(var y=m,i=0;0!==y.cmp(n);i++)y=y.redSqr();r(i<v);var b=this.pow(f,new l(1).iushln(v-i-1));d=d.redMul(b),f=b.redSqr(),m=m.redMul(f),v=i}return d},R.prototype.invm=function(a){var t=a._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},R.prototype.pow=function(a,t){if(t.isZero())return new l(1).toRed(this);if(0===t.cmpn(1))return a.clone();var e=new Array(16);e[0]=new l(1).toRed(this),e[1]=a;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],a);var n=e[0],r=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],f=h-1;f>=0;f--){var d=c>>f&1;n!==e[0]&&(n=this.sqr(n)),0!==d||0!==r?(r<<=1,r|=d,(4===++o||0===i&&0===f)&&(n=this.mul(n,e[r]),o=0,r=0)):o=0}h=26}return n},R.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},R.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},l.mont=function(t){return new I(t)},o(I,R),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),n=u;return u.cmp(this.m)>=0?n=u.isub(this.m):u.cmpn(0)<0&&(n=u.iadd(this.m)),n._forceRed(this)},I.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new l(0)._forceRed(this);var t=a.mul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),n=u;return u.cmp(this.m)>=0?n=u.isub(this.m):u.cmpn(0)<0&&(n=u.iadd(this.m)),n._forceRed(this)},I.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(309)(t))},3705:function(t,e,n){"use strict";var r=n(663);e.certificate=n(3717);var o=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=o;var l=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=l;var h=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())}));e.PublicKey=c;var f=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(h),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=f;var d=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=d;var m=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=m,e.DSAparam=r.define("DSAparam",(function(){this.int()}));var v=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})})),y=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(v),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=y,e.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},3717:function(t,e,n){"use strict";var r=n(663),o=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),l=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),h=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),c=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())})),f=r.define("RelativeDistinguishedName",(function(){this.setof(l)})),d=r.define("RDNSequence",(function(){this.seqof(f)})),m=r.define("Name",(function(){this.choice({rdnSequence:this.use(d)})})),v=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))})),y=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),_=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(h),this.key("issuer").use(m),this.key("validity").use(v),this.key("subject").use(m),this.key("subjectPublicKeyInfo").use(c),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(y).optional())})),x=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(_),this.key("signatureAlgorithm").use(h),this.key("signatureValue").bitstr())}));t.exports=x},3718:function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},3719:function(t,e,n){"use strict";var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,l=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,h=n(733),c=n(1021),f=n(1407).Buffer;t.exports=function(t,e){var n,d=t.toString(),m=d.match(r);if(m){var v="aes"+m[1],y=f.from(m[2],"hex"),_=f.from(m[3].replace(/[\r\n]/g,""),"base64"),x=h(e,y.slice(0,8),parseInt(m[1],10)).key,w=[],M=c.createDecipheriv(v,x,y);w.push(M.update(_)),w.push(M.final()),n=f.concat(w)}else{var S=d.match(l);n=f.from(S[2].replace(/[\r\n]/g,""),"base64")}return{tag:d.match(o)[1],data:n}}},3724:function(t,e,n){e.publicEncrypt=n(3725),e.privateDecrypt=n(3727),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},3725:function(t,e,n){var r=n(735),o=n(538),l=n(659),h=n(1409),c=n(1410),f=n(1030),d=n(1411),m=n(1025),v=n(123).Buffer;t.exports=function(t,e,n){var y;y=t.padding?t.padding:n?1:4;var _,x=r(t);if(4===y)_=function(t,e){var n=t.modulus.byteLength(),r=e.length,d=l("sha1").update(v.alloc(0)).digest(),m=d.length,y=2*m;if(r>n-y-2)throw new Error("message too long");var _=v.alloc(n-r-y-2),x=n-m-1,w=o(m),M=c(v.concat([d,_,v.alloc(1,1),e],x),h(w,x)),S=c(w,h(M,m));return new f(v.concat([v.alloc(1),S,M],n))}(x,e);else if(1===y)_=function(t,e,n){var r,l=e.length,h=t.modulus.byteLength();if(l>h-11)throw new Error("message too long");r=n?v.alloc(h-l-3,255):function(t){var e,n=v.allocUnsafe(t),i=0,r=o(2*t),l=0;for(;i<t;)l===r.length&&(r=o(2*t),l=0),(e=r[l++])&&(n[i++]=e);return n}(h-l-3);return new f(v.concat([v.from([0,n?1:2]),r,v.alloc(1),e],h))}(x,e,n);else{if(3!==y)throw new Error("unknown padding");if((_=new f(e)).cmp(x.modulus)>=0)throw new Error("data too long for modulus")}return n?m(_,x):d(_,x)}},3727:function(t,e,n){var r=n(735),o=n(1409),l=n(1410),h=n(1030),c=n(1025),f=n(659),d=n(1411),m=n(123).Buffer;t.exports=function(t,e,n){var v;v=t.padding?t.padding:n?1:4;var y,_=r(t),x=_.modulus.byteLength();if(e.length>x||new h(e).cmp(_.modulus)>=0)throw new Error("decryption error");y=n?d(new h(e),_):c(e,_);var w=m.alloc(x-y.length);if(y=m.concat([w,y],x),4===v)return function(t,e){var n=t.modulus.byteLength(),r=f("sha1").update(m.alloc(0)).digest(),h=r.length;if(0!==e[0])throw new Error("decryption error");var c=e.slice(1,h+1),d=e.slice(h+1),v=l(c,o(d,h)),y=l(d,o(v,n-h-1));if(function(a,b){a=m.from(a),b=m.from(b);var t=0,e=a.length;a.length!==b.length&&(t++,e=Math.min(a.length,b.length));var i=-1;for(;++i<e;)t+=a[i]^b[i];return t}(r,y.slice(0,h)))throw new Error("decryption error");var i=h;for(;0===y[i];)i++;if(1!==y[i++])throw new Error("decryption error");return y.slice(i)}(_,y);if(1===v)return function(t,e,n){var r=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var l=e.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++;l.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,y,n);if(3===v)return y;throw new Error("unknown padding")}},3728:function(t,e,n){"use strict";(function(t,r){function o(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var l=n(123),h=(n(538),l.Buffer),c=l.kMaxLength,f=t.crypto||t.msCrypto,d=Math.pow(2,32)-1;function m(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>d||t<0)throw new TypeError("offset must be a uint32");if(t>c||t>e)throw new RangeError("offset out of range")}function v(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>d||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>c)throw new RangeError("buffer too small")}function y(t,e,n,o){var l=t.buffer,h=new Uint8Array(l,e,n);return f.getRandomValues(h),o?void r.nextTick((function(){o(null,t)})):t}f&&f.getRandomValues?(e.randomFill=function(e,n,r,o){if(!(h.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)o=n,n=0,r=e.length;else if("function"==typeof r)o=r,r=e.length-n;else if("function"!=typeof o)throw new TypeError('"cb" argument must be a function');return m(n,e.length),v(r,n,e.length),y(e,n,r,o)},e.randomFillSync=function(e,n,r){void 0===n&&(n=0);if(!(h.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');m(n,e.length),void 0===r&&(r=e.length-n);return v(r,n,e.length),y(e,n,r)}):(e.randomFill=o,e.randomFillSync=o)}).call(this,n(149),n(245))},376:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},377:function(t,e){t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var l=Array(o);++r<o;)l[r]=t[r+e];return l}},380:function(t,e,n){var r=n(354),o=n(3958),l=n(1081),h=Math.max,c=Math.min;t.exports=function(t,e,n){var f,d,m,v,y,_,x=0,w=!1,M=!1,S=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function E(time){var e=f,n=d;return f=d=void 0,x=time,v=t.apply(n,e)}function A(time){var t=time-_;return void 0===_||t>=e||t<0||M&&time-x>=m}function T(){var time=o();if(A(time))return C(time);y=setTimeout(T,function(time){var t=e-(time-_);return M?c(t,m-(time-x)):t}(time))}function C(time){return y=void 0,S&&f?E(time):(f=d=void 0,v)}function P(){var time=o(),t=A(time);if(f=arguments,d=this,_=time,t){if(void 0===y)return function(time){return x=time,y=setTimeout(T,e),w?E(time):v}(_);if(M)return clearTimeout(y),y=setTimeout(T,e),E(_)}return void 0===y&&(y=setTimeout(T,e)),v}return e=l(e)||0,r(n)&&(w=!!n.leading,m=(M="maxWait"in n)?h(l(n.maxWait)||0,e):m,S="trailing"in n?!!n.trailing:S),P.cancel=function(){void 0!==y&&clearTimeout(y),x=0,f=_=d=y=void 0},P.flush=function(){return void 0===y?v:C(o())},P}},3811:function(t,e,n){"use strict";var r=n(143),o=n(3819),l=n(3823),h=n(3824),c=n(3833),f=n(3847),d=n(3861),m=n(1541),v=n(1548),y={default:n(3863),zero:n(3864),commonmark:n(3865)},_=/^(vbscript|javascript|file|data):/,x=/^data:image\/(gif|png|jpeg|webp);/;function w(t){var e=t.trim().toLowerCase();return!_.test(e)||!!x.test(e)}var M=["http:","https:","mailto:"];function S(t){var e=m.parse(t,!0);if(e.hostname&&(!e.protocol||M.indexOf(e.protocol)>=0))try{e.hostname=v.toASCII(e.hostname)}catch(t){}return m.encode(m.format(e))}function E(t){var e=m.parse(t,!0);if(e.hostname&&(!e.protocol||M.indexOf(e.protocol)>=0))try{e.hostname=v.toUnicode(e.hostname)}catch(t){}return m.decode(m.format(e),m.decode.defaultChars+"%")}function A(t,e){if(!(this instanceof A))return new A(t,e);e||r.isString(t)||(e=t||{},t="default"),this.inline=new f,this.block=new c,this.core=new h,this.renderer=new l,this.linkify=new d,this.validateLink=w,this.normalizeLink=S,this.normalizeLinkText=E,this.utils=r,this.helpers=r.assign({},o),this.options={},this.configure(t),e&&this.set(e)}A.prototype.set=function(t){return r.assign(this.options,t),this},A.prototype.configure=function(t){var e,n=this;if(r.isString(t)&&!(t=y[e=t]))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&n.set(t.options),t.components&&Object.keys(t.components).forEach((function(e){t.components[e].rules&&n[e].ruler.enableOnly(t.components[e].rules),t.components[e].rules2&&n[e].ruler2.enableOnly(t.components[e].rules2)})),this},A.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.enable(t,!0))}),this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},A.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.disable(t,!0))}),this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},A.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},A.prototype.parse=function(t,e){if("string"!=typeof t)throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},A.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},A.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},A.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)},t.exports=A},3813:function(t,e,n){"use strict";var r={};function o(t,e,n){var i,l,code,h,c,f="";for("string"!=typeof e&&(n=e,e=o.defaultChars),void 0===n&&(n=!0),c=function(t){var i,e,n=r[t];if(n)return n;for(n=r[t]=[],i=0;i<128;i++)e=String.fromCharCode(i),/^[0-9a-z]$/i.test(e)?n.push(e):n.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2));for(i=0;i<t.length;i++)n[t.charCodeAt(i)]=t[i];return n}(e),i=0,l=t.length;i<l;i++)if(code=t.charCodeAt(i),n&&37===code&&i+2<l&&/^[0-9a-f]{2}$/i.test(t.slice(i+1,i+3)))f+=t.slice(i,i+3),i+=2;else if(code<128)f+=c[code];else if(code>=55296&&code<=57343){if(code>=55296&&code<=56319&&i+1<l&&(h=t.charCodeAt(i+1))>=56320&&h<=57343){f+=encodeURIComponent(t[i]+t[i+1]),i++;continue}f+="%EF%BF%BD"}else f+=encodeURIComponent(t[i]);return f}o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",t.exports=o},3814:function(t,e,n){"use strict";var r={};function o(t,e){var n;return"string"!=typeof e&&(e=o.defaultChars),n=function(t){var i,e,n=r[t];if(n)return n;for(n=r[t]=[],i=0;i<128;i++)e=String.fromCharCode(i),n.push(e);for(i=0;i<t.length;i++)n[e=t.charCodeAt(i)]="%"+("0"+e.toString(16).toUpperCase()).slice(-2);return n}(e),t.replace(/(%[a-f0-9]{2})+/gi,(function(t){var i,e,r,o,l,h,c,f="";for(i=0,e=t.length;i<e;i+=3)(r=parseInt(t.slice(i+1,i+3),16))<128?f+=n[r]:192==(224&r)&&i+3<e&&128==(192&(o=parseInt(t.slice(i+4,i+6),16)))?(f+=(c=r<<6&1984|63&o)<128?"��":String.fromCharCode(c),i+=3):224==(240&r)&&i+6<e&&(o=parseInt(t.slice(i+4,i+6),16),l=parseInt(t.slice(i+7,i+9),16),128==(192&o)&&128==(192&l))?(f+=(c=r<<12&61440|o<<6&4032|63&l)<2048||c>=55296&&c<=57343?"���":String.fromCharCode(c),i+=6):240==(248&r)&&i+9<e&&(o=parseInt(t.slice(i+4,i+6),16),l=parseInt(t.slice(i+7,i+9),16),h=parseInt(t.slice(i+10,i+12),16),128==(192&o)&&128==(192&l)&&128==(192&h))?((c=r<<18&1835008|o<<12&258048|l<<6&4032|63&h)<65536||c>1114111?f+="����":(c-=65536,f+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),i+=9):f+="�";return f}))}o.defaultChars=";/?:@&=+$,#",o.componentChars="",t.exports=o},3815:function(t,e,n){"use strict";t.exports=function(t){var e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||""}},3816:function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(c),d=["%","/","?",";","#"].concat(f),m=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(t,e){var i,n,r,l,c,f=t;if(f=f.trim(),!e&&1===t.split("#").length){var w=h.exec(f);if(w)return this.pathname=w[1],w[2]&&(this.search=w[2]),this}var M=o.exec(f);if(M&&(r=(M=M[0]).toLowerCase(),this.protocol=M,f=f.substr(M.length)),(e||M||f.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(c="//"===f.substr(0,2))||M&&_[M]||(f=f.substr(2),this.slashes=!0)),!_[M]&&(c||M&&!x[M])){var S,E,A=-1;for(i=0;i<m.length;i++)-1!==(l=f.indexOf(m[i]))&&(-1===A||l<A)&&(A=l);for(-1!==(E=-1===A?f.lastIndexOf("@"):f.lastIndexOf("@",A))&&(S=f.slice(0,E),f=f.slice(E+1),this.auth=S),A=-1,i=0;i<d.length;i++)-1!==(l=f.indexOf(d[i]))&&(-1===A||l<A)&&(A=l);-1===A&&(A=f.length),":"===f[A-1]&&A--;var T=f.slice(0,A);f=f.slice(A),this.parseHost(T),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C){var P=this.hostname.split(/\./);for(i=0,n=P.length;i<n;i++){var R=P[i];if(R&&!R.match(v)){for(var I="",k=0,D=R.length;k<D;k++)R.charCodeAt(k)>127?I+="x":I+=R[k];if(!I.match(v)){var L=P.slice(0,i),F=P.slice(i+1),O=R.match(y);O&&(L.push(O[1]),F.unshift(O[2])),F.length&&(f=F.join(".")+f),this.hostname=L.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var N=f.indexOf("#");-1!==N&&(this.hash=f.substr(N),f=f.slice(0,N));var B=f.indexOf("?");return-1!==B&&(this.search=f.substr(B),f=f.slice(0,B)),f&&(this.pathname=f),x[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(t){var e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},t.exports=function(t,e){if(t&&t instanceof r)return t;var u=new r;return u.parse(t,e),u}},3817:function(t,e,n){"use strict";e.Any=n(1542),e.Cc=n(1543),e.Cf=n(3818),e.P=n(1078),e.Z=n(1544)},3818:function(t,e){t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},3819:function(t,e,n){"use strict";e.parseLinkLabel=n(3820),e.parseLinkDestination=n(3821),e.parseLinkTitle=n(3822)},3820:function(t,e,n){"use strict";t.exports=function(t,e,n){var r,o,marker,l,h=-1,c=t.posMax,f=t.pos;for(t.pos=e+1,r=1;t.pos<c;){if(93===(marker=t.src.charCodeAt(t.pos))&&0===--r){o=!0;break}if(l=t.pos,t.md.inline.skipToken(t),91===marker)if(l===t.pos-1)r++;else if(n)return t.pos=f,-1}return o&&(h=t.pos),t.pos=f,h}},3821:function(t,e,n){"use strict";var r=n(143).unescapeAll;t.exports=function(t,e,n){var code,o,l=e,h={ok:!1,pos:0,lines:0,str:""};if(60===t.charCodeAt(l)){for(l++;l<n;){if(10===(code=t.charCodeAt(l)))return h;if(60===code)return h;if(62===code)return h.pos=l+1,h.str=r(t.slice(e+1,l)),h.ok=!0,h;92===code&&l+1<n?l+=2:l++}return h}for(o=0;l<n&&32!==(code=t.charCodeAt(l))&&!(code<32||127===code);)if(92===code&&l+1<n){if(32===t.charCodeAt(l+1))break;l+=2}else{if(40===code&&++o>32)return h;if(41===code){if(0===o)break;o--}l++}return e===l||0!==o||(h.str=r(t.slice(e,l)),h.pos=l,h.ok=!0),h}},3822:function(t,e,n){"use strict";var r=n(143).unescapeAll;t.exports=function(t,e,n){var code,marker,o=0,l=e,h={ok:!1,pos:0,lines:0,str:""};if(l>=n)return h;if(34!==(marker=t.charCodeAt(l))&&39!==marker&&40!==marker)return h;for(l++,40===marker&&(marker=41);l<n;){if((code=t.charCodeAt(l))===marker)return h.pos=l+1,h.lines=o,h.str=r(t.slice(e+1,l)),h.ok=!0,h;if(40===code&&41===marker)return h;10===code?o++:92===code&&l+1<n&&(l++,10===t.charCodeAt(l)&&o++),l++}return h}},3823:function(t,e,n){"use strict";var r=n(143).assign,o=n(143).unescapeAll,l=n(143).escapeHtml,h={};function c(){this.rules=r({},h)}h.code_inline=function(t,e,n,r,o){var h=t[e];return"<code"+o.renderAttrs(h)+">"+l(h.content)+"</code>"},h.code_block=function(t,e,n,r,o){var h=t[e];return"<pre"+o.renderAttrs(h)+"><code>"+l(t[e].content)+"</code></pre>\n"},h.fence=function(t,e,n,r,h){var c,i,f,d,m,v=t[e],y=v.info?o(v.info).trim():"",_="",x="";return y&&(_=(f=y.split(/(\s+)/g))[0],x=f.slice(2).join("")),0===(c=n.highlight&&n.highlight(v.content,_,x)||l(v.content)).indexOf("<pre")?c+"\n":y?(i=v.attrIndex("class"),d=v.attrs?v.attrs.slice():[],i<0?d.push(["class",n.langPrefix+_]):(d[i]=d[i].slice(),d[i][1]+=" "+n.langPrefix+_),m={attrs:d},"<pre><code"+h.renderAttrs(m)+">"+c+"</code></pre>\n"):"<pre><code"+h.renderAttrs(v)+">"+c+"</code></pre>\n"},h.image=function(t,e,n,r,o){var l=t[e];return l.attrs[l.attrIndex("alt")][1]=o.renderInlineAsText(l.children,n,r),o.renderToken(t,e,n)},h.hardbreak=function(t,e,n){return n.xhtmlOut?"<br />\n":"<br>\n"},h.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},h.text=function(t,e){return l(t[e].content)},h.html_block=function(t,e){return t[e].content},h.html_inline=function(t,e){return t[e].content},c.prototype.renderAttrs=function(t){var i,e,n;if(!t.attrs)return"";for(n="",i=0,e=t.attrs.length;i<e;i++)n+=" "+l(t.attrs[i][0])+'="'+l(t.attrs[i][1])+'"';return n},c.prototype.renderToken=function(t,e,n){var r,o="",l=!1,h=t[e];return h.hidden?"":(h.block&&-1!==h.nesting&&e&&t[e-1].hidden&&(o+="\n"),o+=(-1===h.nesting?"</":"<")+h.tag,o+=this.renderAttrs(h),0===h.nesting&&n.xhtmlOut&&(o+=" /"),h.block&&(l=!0,1===h.nesting&&e+1<t.length&&("inline"===(r=t[e+1]).type||r.hidden||-1===r.nesting&&r.tag===h.tag)&&(l=!1)),o+=l?">\n":">")},c.prototype.renderInline=function(t,e,n){for(var r,o="",l=this.rules,i=0,h=t.length;i<h;i++)void 0!==l[r=t[i].type]?o+=l[r](t,i,e,n,this):o+=this.renderToken(t,i,e);return o},c.prototype.renderInlineAsText=function(t,e,n){for(var r="",i=0,o=t.length;i<o;i++)"text"===t[i].type?r+=t[i].content:"image"===t[i].type?r+=this.renderInlineAsText(t[i].children,e,n):"softbreak"===t[i].type&&(r+="\n");return r},c.prototype.render=function(t,e,n){var i,r,o,l="",h=this.rules;for(i=0,r=t.length;i<r;i++)"inline"===(o=t[i].type)?l+=this.renderInline(t[i].children,e,n):void 0!==h[o]?l+=h[o](t,i,e,n,this):l+=this.renderToken(t,i,e,n);return l},t.exports=c},3824:function(t,e,n){"use strict";var r=n(1079),o=[["normalize",n(3825)],["block",n(3826)],["inline",n(3827)],["linkify",n(3828)],["replacements",n(3829)],["smartquotes",n(3830)],["text_join",n(3831)]];function l(){this.ruler=new r;for(var i=0;i<o.length;i++)this.ruler.push(o[i][0],o[i][1])}l.prototype.process=function(t){var i,e,n;for(i=0,e=(n=this.ruler.getRules("")).length;i<e;i++)n[i](t)},l.prototype.State=n(3832),t.exports=l},3825:function(t,e,n){"use strict";var r=/\r\n?|\n/g,o=/\0/g;t.exports=function(t){var e;e=(e=t.src.replace(r,"\n")).replace(o,"�"),t.src=e}},3826:function(t,e,n){"use strict";t.exports=function(t){var e;t.inlineMode?((e=new t.Token("inline","",0)).content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}},3827:function(t,e,n){"use strict";t.exports=function(t){var e,i,n,r=t.tokens;for(i=0,n=r.length;i<n;i++)"inline"===(e=r[i]).type&&t.md.inline.parse(e.content,t.md,t.env,e.children)}},3828:function(t,e,n){"use strict";var r=n(143).arrayReplaceAt;function o(t){return/^<\/a\s*>/i.test(t)}t.exports=function(t){var i,e,n,l,h,c,f,d,text,m,v,y,_,x,w,M,S,E,A=t.tokens;if(t.md.options.linkify)for(e=0,n=A.length;e<n;e++)if("inline"===A[e].type&&t.md.linkify.pretest(A[e].content))for(_=0,i=(l=A[e].children).length-1;i>=0;i--)if("link_close"!==(c=l[i]).type){if("html_inline"===c.type&&(E=c.content,/^<a[>\s]/i.test(E)&&_>0&&_--,o(c.content)&&_++),!(_>0)&&"text"===c.type&&t.md.linkify.test(c.content)){for(text=c.content,S=t.md.linkify.match(text),f=[],y=c.level,v=0,S.length>0&&0===S[0].index&&i>0&&"text_special"===l[i-1].type&&(S=S.slice(1)),d=0;d<S.length;d++)x=S[d].url,w=t.md.normalizeLink(x),t.md.validateLink(w)&&(M=S[d].text,M=S[d].schema?"mailto:"!==S[d].schema||/^mailto:/i.test(M)?t.md.normalizeLinkText(M):t.md.normalizeLinkText("mailto:"+M).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+M).replace(/^http:\/\//,""),(m=S[d].index)>v&&((h=new t.Token("text","",0)).content=text.slice(v,m),h.level=y,f.push(h)),(h=new t.Token("link_open","a",1)).attrs=[["href",w]],h.level=y++,h.markup="linkify",h.info="auto",f.push(h),(h=new t.Token("text","",0)).content=M,h.level=y,f.push(h),(h=new t.Token("link_close","a",-1)).level=--y,h.markup="linkify",h.info="auto",f.push(h),v=S[d].lastIndex);v<text.length&&((h=new t.Token("text","",0)).content=text.slice(v),h.level=y,f.push(h)),A[e].children=l=r(l,i,f)}}else for(i--;l[i].level!==c.level&&"link_open"!==l[i].type;)i--}},3829:function(t,e,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r)\)/i,l=/\((c|tm|r)\)/gi,h={c:"©",r:"®",tm:"™"};function c(t,e){return h[e.toLowerCase()]}function f(t){var i,e,n=0;for(i=t.length-1;i>=0;i--)"text"!==(e=t[i]).type||n||(e.content=e.content.replace(l,c)),"link_open"===e.type&&"auto"===e.info&&n--,"link_close"===e.type&&"auto"===e.info&&n++}function d(t){var i,e,n=0;for(i=t.length-1;i>=0;i--)"text"!==(e=t[i]).type||n||r.test(e.content)&&(e.content=e.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1—").replace(/(^|\s)--(?=\s|$)/gm,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1–")),"link_open"===e.type&&"auto"===e.info&&n--,"link_close"===e.type&&"auto"===e.info&&n++}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&(o.test(t.tokens[e].content)&&f(t.tokens[e].children),r.test(t.tokens[e].content)&&d(t.tokens[e].children))}},3830:function(t,e,n){"use strict";var r=n(143).isWhiteSpace,o=n(143).isPunctChar,l=n(143).isMdAsciiPunct,h=/['"]/,c=/['"]/g;function f(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function d(t,e){var i,n,text,h,d,m,v,y,_,x,w,M,S,E,A,T,C,P,R,I,k;for(R=[],i=0;i<t.length;i++){for(n=t[i],v=t[i].level,C=R.length-1;C>=0&&!(R[C].level<=v);C--);if(R.length=C+1,"text"===n.type){d=0,m=(text=n.content).length;t:for(;d<m&&(c.lastIndex=d,h=c.exec(text));){if(A=T=!0,d=h.index+1,P="'"===h[0],_=32,h.index-1>=0)_=text.charCodeAt(h.index-1);else for(C=i-1;C>=0&&("softbreak"!==t[C].type&&"hardbreak"!==t[C].type);C--)if(t[C].content){_=t[C].content.charCodeAt(t[C].content.length-1);break}if(x=32,d<m)x=text.charCodeAt(d);else for(C=i+1;C<t.length&&("softbreak"!==t[C].type&&"hardbreak"!==t[C].type);C++)if(t[C].content){x=t[C].content.charCodeAt(0);break}if(w=l(_)||o(String.fromCharCode(_)),M=l(x)||o(String.fromCharCode(x)),S=r(_),(E=r(x))?A=!1:M&&(S||w||(A=!1)),S?T=!1:w&&(E||M||(T=!1)),34===x&&'"'===h[0]&&_>=48&&_<=57&&(T=A=!1),A&&T&&(A=w,T=M),A||T){if(T)for(C=R.length-1;C>=0&&(y=R[C],!(R[C].level<v));C--)if(y.single===P&&R[C].level===v){y=R[C],P?(I=e.md.options.quotes[2],k=e.md.options.quotes[3]):(I=e.md.options.quotes[0],k=e.md.options.quotes[1]),n.content=f(n.content,h.index,k),t[y.token].content=f(t[y.token].content,y.pos,I),d+=k.length-1,y.token===i&&(d+=I.length-1),m=(text=n.content).length,R.length=C;continue t}A?R.push({token:i,pos:h.index,single:P,level:v}):T&&P&&(n.content=f(n.content,h.index,"’"))}else P&&(n.content=f(n.content,h.index,"’"))}}}}t.exports=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&h.test(t.tokens[e].content)&&d(t.tokens[e].children,t)}},3831:function(t,e,n){"use strict";t.exports=function(t){var e,n,r,o,l,h,c=t.tokens;for(e=0,n=c.length;e<n;e++)if("inline"===c[e].type){for(l=(r=c[e].children).length,o=0;o<l;o++)"text_special"===r[o].type&&(r[o].type="text");for(o=h=0;o<l;o++)"text"===r[o].type&&o+1<l&&"text"===r[o+1].type?r[o+1].content=r[o].content+r[o+1].content:(o!==h&&(r[h]=r[o]),h++);o!==h&&(r.length=h)}}},3832:function(t,e,n){"use strict";var r=n(1080);function o(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}o.prototype.Token=r,t.exports=o},3833:function(t,e,n){"use strict";var r=n(1079),o=[["table",n(3834),["paragraph","reference"]],["code",n(3835)],["fence",n(3836),["paragraph","reference","blockquote","list"]],["blockquote",n(3837),["paragraph","reference","blockquote","list"]],["hr",n(3838),["paragraph","reference","blockquote","list"]],["list",n(3839),["paragraph","reference","blockquote"]],["reference",n(3840)],["html_block",n(3841),["paragraph","reference","blockquote"]],["heading",n(3843),["paragraph","reference","blockquote"]],["lheading",n(3844)],["paragraph",n(3845)]];function l(){this.ruler=new r;for(var i=0;i<o.length;i++)this.ruler.push(o[i][0],o[i][1],{alt:(o[i][2]||[]).slice()})}l.prototype.tokenize=function(t,e,n){for(var r,i,o,l=this.ruler.getRules(""),h=l.length,line=e,c=!1,f=t.md.options.maxNesting;line<n&&(t.line=line=t.skipEmptyLines(line),!(line>=n))&&!(t.sCount[line]<t.blkIndent);){if(t.level>=f){t.line=n;break}for(o=t.line,i=0;i<h;i++)if(r=l[i](t,line,n,!1)){if(o>=t.line)throw new Error("block rule didn't increment state.line");break}if(!r)throw new Error("none of the block rules matched");t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),(line=t.line)<n&&t.isEmpty(line)&&(c=!0,line++,t.line=line)}},l.prototype.parse=function(t,e,n,r){var o;t&&(o=new this.State(t,e,n,r),this.tokenize(o,o.line,o.lineMax))},l.prototype.State=n(3846),t.exports=l},3834:function(t,e,n){"use strict";var r=n(143).isSpace;function o(t,line){var e=t.bMarks[line]+t.tShift[line],n=t.eMarks[line];return t.src.slice(e,n)}function l(t){var e,n=[],r=0,o=t.length,l=!1,h=0,c="";for(e=t.charCodeAt(r);r<o;)124===e&&(l?(c+=t.substring(h,r-1),h=r):(n.push(c+t.substring(h,r)),c="",h=r+1)),l=92===e,r++,e=t.charCodeAt(r);return n.push(c+t.substring(h)),n}t.exports=function(t,e,n,h){var c,f,d,i,m,v,y,_,x,w,M,S,E,A,T,C,P,R;if(e+2>n)return!1;if(v=e+1,t.sCount[v]<t.blkIndent)return!1;if(t.sCount[v]-t.blkIndent>=4)return!1;if((d=t.bMarks[v]+t.tShift[v])>=t.eMarks[v])return!1;if(124!==(P=t.src.charCodeAt(d++))&&45!==P&&58!==P)return!1;if(d>=t.eMarks[v])return!1;if(124!==(R=t.src.charCodeAt(d++))&&45!==R&&58!==R&&!r(R))return!1;if(45===P&&r(R))return!1;for(;d<t.eMarks[v];){if(124!==(c=t.src.charCodeAt(d))&&45!==c&&58!==c&&!r(c))return!1;d++}for(y=(f=o(t,e+1)).split("|"),w=[],i=0;i<y.length;i++){if(!(M=y[i].trim())){if(0===i||i===y.length-1)continue;return!1}if(!/^:?-+:?$/.test(M))return!1;58===M.charCodeAt(M.length-1)?w.push(58===M.charCodeAt(0)?"center":"right"):58===M.charCodeAt(0)?w.push("left"):w.push("")}if(-1===(f=o(t,e).trim()).indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;if((y=l(f)).length&&""===y[0]&&y.shift(),y.length&&""===y[y.length-1]&&y.pop(),0===(_=y.length)||_!==w.length)return!1;if(h)return!0;for(A=t.parentType,t.parentType="table",C=t.md.block.ruler.getRules("blockquote"),(x=t.push("table_open","table",1)).map=S=[e,0],(x=t.push("thead_open","thead",1)).map=[e,e+1],(x=t.push("tr_open","tr",1)).map=[e,e+1],i=0;i<y.length;i++)x=t.push("th_open","th",1),w[i]&&(x.attrs=[["style","text-align:"+w[i]]]),(x=t.push("inline","",0)).content=y[i].trim(),x.children=[],x=t.push("th_close","th",-1);for(x=t.push("tr_close","tr",-1),x=t.push("thead_close","thead",-1),v=e+2;v<n&&!(t.sCount[v]<t.blkIndent);v++){for(T=!1,i=0,m=C.length;i<m;i++)if(C[i](t,v,n,!0)){T=!0;break}if(T)break;if(!(f=o(t,v).trim()))break;if(t.sCount[v]-t.blkIndent>=4)break;for((y=l(f)).length&&""===y[0]&&y.shift(),y.length&&""===y[y.length-1]&&y.pop(),v===e+2&&((x=t.push("tbody_open","tbody",1)).map=E=[e+2,0]),(x=t.push("tr_open","tr",1)).map=[v,v+1],i=0;i<_;i++)x=t.push("td_open","td",1),w[i]&&(x.attrs=[["style","text-align:"+w[i]]]),(x=t.push("inline","",0)).content=y[i]?y[i].trim():"",x.children=[],x=t.push("td_close","td",-1);x=t.push("tr_close","tr",-1)}return E&&(x=t.push("tbody_close","tbody",-1),E[1]=v),x=t.push("table_close","table",-1),S[1]=v,t.parentType=A,t.line=v,!0}},3835:function(t,e,n){"use strict";t.exports=function(t,e,n){var r,o,l;if(t.sCount[e]-t.blkIndent<4)return!1;for(o=r=e+1;r<n;)if(t.isEmpty(r))r++;else{if(!(t.sCount[r]-t.blkIndent>=4))break;o=++r}return t.line=o,(l=t.push("code_block","code",0)).content=t.getLines(e,o,4+t.blkIndent,!1)+"\n",l.map=[e,t.line],!0}},3836:function(t,e,n){"use strict";t.exports=function(t,e,n,r){var marker,o,l,h,c,f,d,m=!1,v=t.bMarks[e]+t.tShift[e],y=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(v+3>y)return!1;if(126!==(marker=t.src.charCodeAt(v))&&96!==marker)return!1;if(c=v,(o=(v=t.skipChars(v,marker))-c)<3)return!1;if(d=t.src.slice(c,v),l=t.src.slice(v,y),96===marker&&l.indexOf(String.fromCharCode(marker))>=0)return!1;if(r)return!0;for(h=e;!(++h>=n)&&!((v=c=t.bMarks[h]+t.tShift[h])<(y=t.eMarks[h])&&t.sCount[h]<t.blkIndent);)if(t.src.charCodeAt(v)===marker&&!(t.sCount[h]-t.blkIndent>=4||(v=t.skipChars(v,marker))-c<o||(v=t.skipSpaces(v))<y)){m=!0;break}return o=t.sCount[e],t.line=h+(m?1:0),(f=t.push("fence","code",0)).info=l,f.content=t.getLines(e+1,h,o,!0),f.markup=d,f.map=[e,t.line],!0}},3837:function(t,e,n){"use strict";var r=n(143).isSpace;t.exports=function(t,e,n,o){var l,h,i,c,f,d,m,v,y,_,x,w,M,S,E,A,T,C,P,R,I=t.lineMax,k=t.bMarks[e]+t.tShift[e],D=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(k))return!1;if(o)return!0;for(_=[],x=[],S=[],E=[],C=t.md.block.ruler.getRules("blockquote"),M=t.parentType,t.parentType="blockquote",v=e;v<n&&(R=t.sCount[v]<t.blkIndent,!((k=t.bMarks[v]+t.tShift[v])>=(D=t.eMarks[v])));v++)if(62!==t.src.charCodeAt(k++)||R){if(d)break;for(T=!1,i=0,f=C.length;i<f;i++)if(C[i](t,v,n,!0)){T=!0;break}if(T){t.lineMax=v,0!==t.blkIndent&&(_.push(t.bMarks[v]),x.push(t.bsCount[v]),E.push(t.tShift[v]),S.push(t.sCount[v]),t.sCount[v]-=t.blkIndent);break}_.push(t.bMarks[v]),x.push(t.bsCount[v]),E.push(t.tShift[v]),S.push(t.sCount[v]),t.sCount[v]=-1}else{for(c=t.sCount[v]+1,32===t.src.charCodeAt(k)?(k++,c++,l=!1,A=!0):9===t.src.charCodeAt(k)?(A=!0,(t.bsCount[v]+c)%4==3?(k++,c++,l=!1):l=!0):A=!1,y=c,_.push(t.bMarks[v]),t.bMarks[v]=k;k<D&&(h=t.src.charCodeAt(k),r(h));)9===h?y+=4-(y+t.bsCount[v]+(l?1:0))%4:y++,k++;d=k>=D,x.push(t.bsCount[v]),t.bsCount[v]=t.sCount[v]+1+(A?1:0),S.push(t.sCount[v]),t.sCount[v]=y-c,E.push(t.tShift[v]),t.tShift[v]=k-t.bMarks[v]}for(w=t.blkIndent,t.blkIndent=0,(P=t.push("blockquote_open","blockquote",1)).markup=">",P.map=m=[e,0],t.md.block.tokenize(t,e,v),(P=t.push("blockquote_close","blockquote",-1)).markup=">",t.lineMax=I,t.parentType=M,m[1]=t.line,i=0;i<E.length;i++)t.bMarks[i+e]=_[i],t.tShift[i+e]=E[i],t.sCount[i+e]=S[i],t.bsCount[i+e]=x[i];return t.blkIndent=w,!0}},3838:function(t,e,n){"use strict";var r=n(143).isSpace;t.exports=function(t,e,n,o){var marker,l,h,c,f=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(42!==(marker=t.src.charCodeAt(f++))&&45!==marker&&95!==marker)return!1;for(l=1;f<d;){if((h=t.src.charCodeAt(f++))!==marker&&!r(h))return!1;h===marker&&l++}return!(l<3)&&(o||(t.line=e+1,(c=t.push("hr","hr",0)).map=[e,t.line],c.markup=Array(l+1).join(String.fromCharCode(marker))),!0)}},3839:function(t,e,n){"use strict";var r=n(143).isSpace;function o(t,e){var marker,n,o,l;return n=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],42!==(marker=t.src.charCodeAt(n++))&&45!==marker&&43!==marker||n<o&&(l=t.src.charCodeAt(n),!r(l))?-1:n}function l(t,e){var n,o=t.bMarks[e]+t.tShift[e],l=o,h=t.eMarks[e];if(l+1>=h)return-1;if((n=t.src.charCodeAt(l++))<48||n>57)return-1;for(;;){if(l>=h)return-1;if(!((n=t.src.charCodeAt(l++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(l-o>=10)return-1}return l<h&&(n=t.src.charCodeAt(l),!r(n))?-1:l}t.exports=function(t,e,n,r){var h,c,i,f,d,m,v,y,_,x,w,M,S,E,A,T,C,P,R,I,k,D,L,F,O,N,B,U=e,z=!1,V=!0;if(t.sCount[U]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[U]-t.listIndent>=4&&t.sCount[U]<t.blkIndent)return!1;if(r&&"paragraph"===t.parentType&&t.sCount[U]>=t.blkIndent&&(z=!0),(D=l(t,U))>=0){if(v=!0,F=t.bMarks[U]+t.tShift[U],S=Number(t.src.slice(F,D-1)),z&&1!==S)return!1}else{if(!((D=o(t,U))>=0))return!1;v=!1}if(z&&t.skipSpaces(D)>=t.eMarks[U])return!1;if(r)return!0;for(M=t.src.charCodeAt(D-1),w=t.tokens.length,v?(B=t.push("ordered_list_open","ol",1),1!==S&&(B.attrs=[["start",S]])):B=t.push("bullet_list_open","ul",1),B.map=x=[U,0],B.markup=String.fromCharCode(M),L=!1,N=t.md.block.ruler.getRules("list"),C=t.parentType,t.parentType="list";U<n;){for(k=D,E=t.eMarks[U],m=A=t.sCount[U]+D-(t.bMarks[U]+t.tShift[U]);k<E;){if(9===(h=t.src.charCodeAt(k)))A+=4-(A+t.bsCount[U])%4;else{if(32!==h)break;A++}k++}if((d=(c=k)>=E?1:A-m)>4&&(d=1),f=m+d,(B=t.push("list_item_open","li",1)).markup=String.fromCharCode(M),B.map=y=[U,0],v&&(B.info=t.src.slice(F,D-1)),I=t.tight,R=t.tShift[U],P=t.sCount[U],T=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=f,t.tight=!0,t.tShift[U]=c-t.bMarks[U],t.sCount[U]=A,c>=E&&t.isEmpty(U+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,U,n,!0),t.tight&&!L||(V=!1),L=t.line-U>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=T,t.tShift[U]=R,t.sCount[U]=P,t.tight=I,(B=t.push("list_item_close","li",-1)).markup=String.fromCharCode(M),U=t.line,y[1]=U,U>=n)break;if(t.sCount[U]<t.blkIndent)break;if(t.sCount[U]-t.blkIndent>=4)break;for(O=!1,i=0,_=N.length;i<_;i++)if(N[i](t,U,n,!0)){O=!0;break}if(O)break;if(v){if((D=l(t,U))<0)break;F=t.bMarks[U]+t.tShift[U]}else if((D=o(t,U))<0)break;if(M!==t.src.charCodeAt(D-1))break}return(B=v?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(M),x[1]=U,t.line=U,t.parentType=C,V&&function(t,e){var i,n,r=t.level+2;for(i=e+2,n=t.tokens.length-2;i<n;i++)t.tokens[i].level===r&&"paragraph_open"===t.tokens[i].type&&(t.tokens[i+2].hidden=!0,t.tokens[i].hidden=!0,i+=2)}(t,w),!0}},3840:function(t,e,n){"use strict";var r=n(143).normalizeReference,o=n(143).isSpace;t.exports=function(t,e,n,l){var h,c,f,d,m,i,v,label,y,_,x,w,M,S,E,title,A=0,T=t.bMarks[e]+t.tShift[e],C=t.eMarks[e],P=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(T))return!1;for(;++T<C;)if(93===t.src.charCodeAt(T)&&92!==t.src.charCodeAt(T-1)){if(T+1===C)return!1;if(58!==t.src.charCodeAt(T+1))return!1;break}for(d=t.lineMax,E=t.md.block.ruler.getRules("reference"),_=t.parentType,t.parentType="reference";P<d&&!t.isEmpty(P);P++)if(!(t.sCount[P]-t.blkIndent>3||t.sCount[P]<0)){for(S=!1,i=0,v=E.length;i<v;i++)if(E[i](t,P,d,!0)){S=!0;break}if(S)break}for(C=(M=t.getLines(e,P,t.blkIndent,!1).trim()).length,T=1;T<C;T++){if(91===(h=M.charCodeAt(T)))return!1;if(93===h){y=T;break}(10===h||92===h&&++T<C&&10===M.charCodeAt(T))&&A++}if(y<0||58!==M.charCodeAt(y+1))return!1;for(T=y+2;T<C;T++)if(10===(h=M.charCodeAt(T)))A++;else if(!o(h))break;if(!(x=t.md.helpers.parseLinkDestination(M,T,C)).ok)return!1;if(m=t.md.normalizeLink(x.str),!t.md.validateLink(m))return!1;for(c=T=x.pos,f=A+=x.lines,w=T;T<C;T++)if(10===(h=M.charCodeAt(T)))A++;else if(!o(h))break;for(x=t.md.helpers.parseLinkTitle(M,T,C),T<C&&w!==T&&x.ok?(title=x.str,T=x.pos,A+=x.lines):(title="",T=c,A=f);T<C&&(h=M.charCodeAt(T),o(h));)T++;if(T<C&&10!==M.charCodeAt(T)&&title)for(title="",T=c,A=f;T<C&&(h=M.charCodeAt(T),o(h));)T++;return!(T<C&&10!==M.charCodeAt(T))&&(!!(label=r(M.slice(1,y)))&&(l||(void 0===t.env.references&&(t.env.references={}),void 0===t.env.references[label]&&(t.env.references[label]={title:title,href:m}),t.parentType=_,t.line=e+A+1),!0))}},3841:function(t,e,n){"use strict";var r=n(3842),o=n(1545).HTML_OPEN_CLOSE_TAG_RE,l=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];t.exports=function(t,e,n,r){var i,o,h,c,f=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(f))return!1;for(c=t.src.slice(f,d),i=0;i<l.length&&!l[i][0].test(c);i++);if(i===l.length)return!1;if(r)return l[i][2];if(o=e+1,!l[i][1].test(c))for(;o<n&&!(t.sCount[o]<t.blkIndent);o++)if(f=t.bMarks[o]+t.tShift[o],d=t.eMarks[o],c=t.src.slice(f,d),l[i][1].test(c)){0!==c.length&&o++;break}return t.line=o,(h=t.push("html_block","",0)).map=[e,o],h.content=t.getLines(e,o,t.blkIndent,!0),!0}},3842:function(t,e,n){"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3843:function(t,e,n){"use strict";var r=n(143).isSpace;t.exports=function(t,e,n,o){var l,h,c,f,d=t.bMarks[e]+t.tShift[e],m=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(35!==(l=t.src.charCodeAt(d))||d>=m)return!1;for(h=1,l=t.src.charCodeAt(++d);35===l&&d<m&&h<=6;)h++,l=t.src.charCodeAt(++d);return!(h>6||d<m&&!r(l))&&(o||(m=t.skipSpacesBack(m,d),(c=t.skipCharsBack(m,35,d))>d&&r(t.src.charCodeAt(c-1))&&(m=c),t.line=e+1,(f=t.push("heading_open","h"+String(h),1)).markup="########".slice(0,h),f.map=[e,t.line],(f=t.push("inline","",0)).content=t.src.slice(d,m).trim(),f.map=[e,t.line],f.children=[],(f=t.push("heading_close","h"+String(h),-1)).markup="########".slice(0,h)),!0)}},3844:function(t,e,n){"use strict";t.exports=function(t,e,n){var content,r,i,o,l,h,c,f,marker,d,m=e+1,v=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(d=t.parentType,t.parentType="paragraph";m<n&&!t.isEmpty(m);m++)if(!(t.sCount[m]-t.blkIndent>3)){if(t.sCount[m]>=t.blkIndent&&(h=t.bMarks[m]+t.tShift[m])<(c=t.eMarks[m])&&(45===(marker=t.src.charCodeAt(h))||61===marker)&&(h=t.skipChars(h,marker),(h=t.skipSpaces(h))>=c)){f=61===marker?1:2;break}if(!(t.sCount[m]<0)){for(r=!1,i=0,o=v.length;i<o;i++)if(v[i](t,m,n,!0)){r=!0;break}if(r)break}}return!!f&&(content=t.getLines(e,m,t.blkIndent,!1).trim(),t.line=m+1,(l=t.push("heading_open","h"+String(f),1)).markup=String.fromCharCode(marker),l.map=[e,t.line],(l=t.push("inline","",0)).content=content,l.map=[e,t.line-1],l.children=[],(l=t.push("heading_close","h"+String(f),-1)).markup=String.fromCharCode(marker),t.parentType=d,!0)}},3845:function(t,e,n){"use strict";t.exports=function(t,e,n){var content,r,i,o,l,h,c=e+1,f=t.md.block.ruler.getRules("paragraph");for(h=t.parentType,t.parentType="paragraph";c<n&&!t.isEmpty(c);c++)if(!(t.sCount[c]-t.blkIndent>3||t.sCount[c]<0)){for(r=!1,i=0,o=f.length;i<o;i++)if(f[i](t,c,n,!0)){r=!0;break}if(r)break}return content=t.getLines(e,c,t.blkIndent,!1).trim(),t.line=c,(l=t.push("paragraph_open","p",1)).map=[e,t.line],(l=t.push("inline","",0)).content=content,l.map=[e,t.line],l.children=[],l=t.push("paragraph_close","p",-1),t.parentType=h,!0}},3846:function(t,e,n){"use strict";var r=n(1080),o=n(143).isSpace;function l(t,e,n,r){var l,s,h,c,f,d,m,v;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",v=!1,h=c=d=m=0,f=(s=this.src).length;c<f;c++){if(l=s.charCodeAt(c),!v){if(o(l)){d++,9===l?m+=4-m%4:m++;continue}v=!0}10!==l&&c!==f-1||(10!==l&&c++,this.bMarks.push(h),this.eMarks.push(c),this.tShift.push(d),this.sCount.push(m),this.bsCount.push(0),v=!1,d=0,m=0,h=c+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}l.prototype.push=function(t,e,n){var o=new r(t,e,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o},l.prototype.isEmpty=function(line){return this.bMarks[line]+this.tShift[line]>=this.eMarks[line]},l.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},l.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n&&(e=this.src.charCodeAt(t),o(e));t++);return t},l.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!o(this.src.charCodeAt(--t)))return t+1;return t},l.prototype.skipChars=function(t,code){for(var e=this.src.length;t<e&&this.src.charCodeAt(t)===code;t++);return t},l.prototype.skipCharsBack=function(t,code,e){if(t<=e)return t;for(;t>e;)if(code!==this.src.charCodeAt(--t))return t+1;return t},l.prototype.getLines=function(t,e,n,r){var i,l,h,c,f,d,m,line=t;if(t>=e)return"";for(d=new Array(e-t),i=0;line<e;line++,i++){for(l=0,m=c=this.bMarks[line],f=line+1<e||r?this.eMarks[line]+1:this.eMarks[line];c<f&&l<n;){if(h=this.src.charCodeAt(c),o(h))9===h?l+=4-(l+this.bsCount[line])%4:l++;else{if(!(c-m<this.tShift[line]))break;l++}c++}d[i]=l>n?new Array(l-n+1).join(" ")+this.src.slice(c,f):this.src.slice(c,f)}return d.join("")},l.prototype.Token=r,t.exports=l},3847:function(t,e,n){"use strict";var r=n(1079),o=[["text",n(3848)],["linkify",n(3849)],["newline",n(3850)],["escape",n(3851)],["backticks",n(3852)],["strikethrough",n(1546).tokenize],["emphasis",n(1547).tokenize],["link",n(3853)],["image",n(3854)],["autolink",n(3855)],["html_inline",n(3856)],["entity",n(3857)]],l=[["balance_pairs",n(3858)],["strikethrough",n(1546).postProcess],["emphasis",n(1547).postProcess],["fragments_join",n(3859)]];function h(){var i;for(this.ruler=new r,i=0;i<o.length;i++)this.ruler.push(o[i][0],o[i][1]);for(this.ruler2=new r,i=0;i<l.length;i++)this.ruler2.push(l[i][0],l[i][1])}h.prototype.skipToken=function(t){var e,i,n=t.pos,r=this.ruler.getRules(""),o=r.length,l=t.md.options.maxNesting,h=t.cache;if(void 0===h[n]){if(t.level<l){for(i=0;i<o;i++)if(t.level++,e=r[i](t,!0),t.level--,e){if(n>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;e||t.pos++,h[n]=t.pos}else t.pos=h[n]},h.prototype.tokenize=function(t){for(var e,i,n,r=this.ruler.getRules(""),o=r.length,l=t.posMax,h=t.md.options.maxNesting;t.pos<l;){if(n=t.pos,t.level<h)for(i=0;i<o;i++)if(e=r[i](t,!1)){if(n>=t.pos)throw new Error("inline rule didn't increment state.pos");break}if(e){if(t.pos>=l)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},h.prototype.parse=function(t,e,n,r){var i,o,l,h=new this.State(t,e,n,r);for(this.tokenize(h),l=(o=this.ruler2.getRules("")).length,i=0;i<l;i++)o[i](h)},h.prototype.State=n(3860),t.exports=h},3848:function(t,e,n){"use strict";function r(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(t,e){for(var n=t.pos;n<t.posMax&&!r(t.src.charCodeAt(n));)n++;return n!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}},3849:function(t,e,n){"use strict";var r=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;t.exports=function(t,e){var n,o,l,link,h,c,f;return!!t.md.options.linkify&&(!(t.linkLevel>0)&&(!((n=t.pos)+3>t.posMax)&&(58===t.src.charCodeAt(n)&&(47===t.src.charCodeAt(n+1)&&(47===t.src.charCodeAt(n+2)&&(!!(o=t.pending.match(r))&&(l=o[1],!!(link=t.md.linkify.matchAtStart(t.src.slice(n-l.length)))&&(!((h=link.url).length<=l.length)&&(h=h.replace(/\*+$/,""),c=t.md.normalizeLink(h),!!t.md.validateLink(c)&&(e||(t.pending=t.pending.slice(0,-l.length),(f=t.push("link_open","a",1)).attrs=[["href",c]],f.markup="linkify",f.info="auto",(f=t.push("text","",0)).content=t.md.normalizeLinkText(h),(f=t.push("link_close","a",-1)).markup="linkify",f.info="auto"),t.pos+=h.length-l.length,!0))))))))))}},3850:function(t,e,n){"use strict";var r=n(143).isSpace;t.exports=function(t,e){var n,o,l,h=t.pos;if(10!==t.src.charCodeAt(h))return!1;if(n=t.pending.length-1,o=t.posMax,!e)if(n>=0&&32===t.pending.charCodeAt(n))if(n>=1&&32===t.pending.charCodeAt(n-1)){for(l=n-1;l>=1&&32===t.pending.charCodeAt(l-1);)l--;t.pending=t.pending.slice(0,l),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(h++;h<o&&r(t.src.charCodeAt(h));)h++;return t.pos=h,!0}},3851:function(t,e,n){"use strict";for(var r=n(143).isSpace,o=[],i=0;i<256;i++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){o[t.charCodeAt(0)]=1})),t.exports=function(t,e){var n,l,h,c,f,d=t.pos,m=t.posMax;if(92!==t.src.charCodeAt(d))return!1;if(++d>=m)return!1;if(10===(n=t.src.charCodeAt(d))){for(e||t.push("hardbreak","br",0),d++;d<m&&(n=t.src.charCodeAt(d),r(n));)d++;return t.pos=d,!0}return c=t.src[d],n>=55296&&n<=56319&&d+1<m&&(l=t.src.charCodeAt(d+1))>=56320&&l<=57343&&(c+=t.src[d+1],d++),h="\\"+c,e||(f=t.push("text_special","",0),n<256&&0!==o[n]?f.content=c:f.content=h,f.markup=h,f.info="escape"),t.pos=d+1,!0}},3852:function(t,e,n){"use strict";t.exports=function(t,e){var n,r,marker,o,l,h,c,f,d=t.pos;if(96!==t.src.charCodeAt(d))return!1;for(n=d,d++,r=t.posMax;d<r&&96===t.src.charCodeAt(d);)d++;if(c=(marker=t.src.slice(n,d)).length,t.backticksScanned&&(t.backticks[c]||0)<=n)return e||(t.pending+=marker),t.pos+=c,!0;for(h=d;-1!==(l=t.src.indexOf("`",h));){for(h=l+1;h<r&&96===t.src.charCodeAt(h);)h++;if((f=h-l)===c)return e||((o=t.push("code_inline","code",0)).markup=marker,o.content=t.src.slice(d,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=h,!0;t.backticks[f]=l}return t.backticksScanned=!0,e||(t.pending+=marker),t.pos+=c,!0}},3853:function(t,e,n){"use strict";var r=n(143).normalizeReference,o=n(143).isSpace;t.exports=function(t,e){var n,code,label,l,h,c,f,d,m="",title="",v=t.pos,y=t.posMax,_=t.pos,x=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(h=t.pos+1,(l=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)return!1;if((c=l+1)<y&&40===t.src.charCodeAt(c)){for(x=!1,c++;c<y&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);if(c>=y)return!1;if(_=c,(f=t.md.helpers.parseLinkDestination(t.src,c,t.posMax)).ok){for(m=t.md.normalizeLink(f.str),t.md.validateLink(m)?c=f.pos:m="",_=c;c<y&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);if(f=t.md.helpers.parseLinkTitle(t.src,c,t.posMax),c<y&&_!==c&&f.ok)for(title=f.str,c=f.pos;c<y&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);}(c>=y||41!==t.src.charCodeAt(c))&&(x=!0),c++}if(x){if(void 0===t.env.references)return!1;if(c<y&&91===t.src.charCodeAt(c)?(_=c+1,(c=t.md.helpers.parseLinkLabel(t,c))>=0?label=t.src.slice(_,c++):c=l+1):c=l+1,label||(label=t.src.slice(h,l)),!(d=t.env.references[r(label)]))return t.pos=v,!1;m=d.href,title=d.title}return e||(t.pos=h,t.posMax=l,t.push("link_open","a",1).attrs=n=[["href",m]],title&&n.push(["title",title]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)),t.pos=c,t.posMax=y,!0}},3854:function(t,e,n){"use strict";var r=n(143).normalizeReference,o=n(143).isSpace;t.exports=function(t,e){var n,code,content,label,l,h,c,f,d,title,m,v,y,_="",x=t.pos,w=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(h=t.pos+2,(l=t.md.helpers.parseLinkLabel(t,t.pos+1,!1))<0)return!1;if((c=l+1)<w&&40===t.src.charCodeAt(c)){for(c++;c<w&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);if(c>=w)return!1;for(y=c,(d=t.md.helpers.parseLinkDestination(t.src,c,t.posMax)).ok&&(_=t.md.normalizeLink(d.str),t.md.validateLink(_)?c=d.pos:_=""),y=c;c<w&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);if(d=t.md.helpers.parseLinkTitle(t.src,c,t.posMax),c<w&&y!==c&&d.ok)for(title=d.str,c=d.pos;c<w&&(code=t.src.charCodeAt(c),o(code)||10===code);c++);else title="";if(c>=w||41!==t.src.charCodeAt(c))return t.pos=x,!1;c++}else{if(void 0===t.env.references)return!1;if(c<w&&91===t.src.charCodeAt(c)?(y=c+1,(c=t.md.helpers.parseLinkLabel(t,c))>=0?label=t.src.slice(y,c++):c=l+1):c=l+1,label||(label=t.src.slice(h,l)),!(f=t.env.references[r(label)]))return t.pos=x,!1;_=f.href,title=f.title}return e||(content=t.src.slice(h,l),t.md.inline.parse(content,t.md,t.env,v=[]),(m=t.push("image","img",0)).attrs=n=[["src",_],["alt",""]],m.children=v,m.content=content,title&&n.push(["title",title])),t.pos=c,t.posMax=w,!0}},3855:function(t,e,n){"use strict";var r=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,o=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;t.exports=function(t,e){var n,l,h,c,f,d,m=t.pos;if(60!==t.src.charCodeAt(m))return!1;for(f=t.pos,d=t.posMax;;){if(++m>=d)return!1;if(60===(c=t.src.charCodeAt(m)))return!1;if(62===c)break}return n=t.src.slice(f+1,m),o.test(n)?(l=t.md.normalizeLink(n),!!t.md.validateLink(l)&&(e||((h=t.push("link_open","a",1)).attrs=[["href",l]],h.markup="autolink",h.info="auto",(h=t.push("text","",0)).content=t.md.normalizeLinkText(n),(h=t.push("link_close","a",-1)).markup="autolink",h.info="auto"),t.pos+=n.length+2,!0)):!!r.test(n)&&(l=t.md.normalizeLink("mailto:"+n),!!t.md.validateLink(l)&&(e||((h=t.push("link_open","a",1)).attrs=[["href",l]],h.markup="autolink",h.info="auto",(h=t.push("text","",0)).content=t.md.normalizeLinkText(n),(h=t.push("link_close","a",-1)).markup="autolink",h.info="auto"),t.pos+=n.length+2,!0))}},3856:function(t,e,n){"use strict";var r=n(1545).HTML_TAG_RE;t.exports=function(t,e){var n,o,l,h,c,f=t.pos;return!!t.md.options.html&&(l=t.posMax,!(60!==t.src.charCodeAt(f)||f+2>=l)&&(!(33!==(n=t.src.charCodeAt(f+1))&&63!==n&&47!==n&&!function(t){var e=32|t;return e>=97&&e<=122}(n))&&(!!(o=t.src.slice(f).match(r))&&(e||((h=t.push("html_inline","",0)).content=o[0],c=h.content,/^<a[>\s]/i.test(c)&&t.linkLevel++,function(t){return/^<\/a\s*>/i.test(t)}(h.content)&&t.linkLevel--),t.pos+=o[0].length,!0))))}},3857:function(t,e,n){"use strict";var r=n(1540),o=n(143).has,l=n(143).isValidEntityCode,h=n(143).fromCodePoint,c=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,f=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(t,e){var code,n,d,m=t.pos,v=t.posMax;if(38!==t.src.charCodeAt(m))return!1;if(m+1>=v)return!1;if(35===t.src.charCodeAt(m+1)){if(n=t.src.slice(m).match(c))return e||(code="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),(d=t.push("text_special","",0)).content=l(code)?h(code):h(65533),d.markup=n[0],d.info="entity"),t.pos+=n[0].length,!0}else if((n=t.src.slice(m).match(f))&&o(r,n[1]))return e||((d=t.push("text_special","",0)).content=r[n[1]],d.markup=n[0],d.info="entity"),t.pos+=n[0].length,!0;return!1}},3858:function(t,e,n){"use strict";function r(t){var e,n,r,o,l,h,c,f,d={},m=t.length;if(m){var v=0,y=-2,_=[];for(e=0;e<m;e++)if(r=t[e],_.push(0),t[v].marker===r.marker&&y===r.token-1||(v=e),y=r.token,r.length=r.length||0,r.close){for(d.hasOwnProperty(r.marker)||(d[r.marker]=[-1,-1,-1,-1,-1,-1]),l=d[r.marker][(r.open?3:0)+r.length%3],h=n=v-_[v]-1;n>l;n-=_[n]+1)if((o=t[n]).marker===r.marker&&o.open&&o.end<0&&(c=!1,(o.close||r.open)&&(o.length+r.length)%3==0&&(o.length%3==0&&r.length%3==0||(c=!0)),!c)){f=n>0&&!t[n-1].open?_[n-1]+1:0,_[e]=e-n+f,_[n]=f,r.open=!1,o.end=e,o.close=!1,h=-1,y=-2;break}-1!==h&&(d[r.marker][(r.open?3:0)+(r.length||0)%3]=h)}}}t.exports=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(r(t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&r(n[e].delimiters)}},3859:function(t,e,n){"use strict";t.exports=function(t){var e,n,r=0,o=t.tokens,l=t.tokens.length;for(e=n=0;e<l;e++)o[e].nesting<0&&r--,o[e].level=r,o[e].nesting>0&&r++,"text"===o[e].type&&e+1<l&&"text"===o[e+1].type?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}},3860:function(t,e,n){"use strict";var r=n(1080),o=n(143).isWhiteSpace,l=n(143).isPunctChar,h=n(143).isMdAsciiPunct;function c(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}c.prototype.pushPending=function(){var t=new r("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},c.prototype.push=function(t,e,n){this.pending&&this.pushPending();var o=new r(t,e,n),l=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],l={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(l),o},c.prototype.scanDelims=function(t,e){var n,r,c,f,d,m,v,y,_,x=t,w=!0,M=!0,S=this.posMax,marker=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;x<S&&this.src.charCodeAt(x)===marker;)x++;return c=x-t,r=x<S?this.src.charCodeAt(x):32,v=h(n)||l(String.fromCharCode(n)),_=h(r)||l(String.fromCharCode(r)),m=o(n),(y=o(r))?w=!1:_&&(m||v||(w=!1)),m?M=!1:v&&(y||_||(M=!1)),e?(f=w,d=M):(f=w&&(!M||v),d=M&&(!w||_)),{can_open:f,can_close:d,length:c}},c.prototype.Token=r,t.exports=c},3861:function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(arguments,1).forEach((function(source){source&&Object.keys(source).forEach((function(e){t[e]=source[e]}))})),t}function o(t){return Object.prototype.toString.call(t)}function l(t){return"[object Function]"===o(t)}function h(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var c={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var f={"http:":{validate:function(text,t,e){var n=text.slice(t);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(n)?n.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(text,t,e){var n=text.slice(t);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(n)?t>=3&&":"===text[t-3]||t>=3&&"/"===text[t-3]?0:n.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(text,t,e){var n=text.slice(t);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(n)?n.match(e.re.mailto)[0].length:0}}},d="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",m="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function v(t){var e=t.re=n(3862)(t.__opts__),r=t.__tlds__.slice();function c(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||r.push(d),r.push(e.src_xn),e.src_tlds=r.join("|"),e.email_fuzzy=RegExp(c(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(c(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(c(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(c(e.tpl_host_fuzzy_test),"i");var f=[];function m(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,"[object Object]"===o(n))return!function(t){return"[object RegExp]"===o(t)}(n.validate)?l(n.validate)?r.validate=n.validate:m(e,n):r.validate=function(t){return function(text,e){var n=text.slice(e);return t.test(n)?n.match(t)[0].length:0}}(n.validate),void(l(n.normalize)?r.normalize=n.normalize:n.normalize?m(e,n):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===o(t)}(n)?m(e,n):f.push(e)}})),f.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var v=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(h).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+v+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+v+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function y(t,e){var n=t.__index__,r=t.__last_index__,text=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=text,this.text=text,this.url=text}function _(t,e){var n=new y(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function x(t,e){if(!(this instanceof x))return new x(t,e);var n;e||(n=t,Object.keys(n||{}).reduce((function(t,e){return t||c.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.__opts__=r({},c,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},f,t),this.__compiled__={},this.__tlds__=m,this.__tlds_replaced__=!1,this.re={},v(this)}x.prototype.add=function(t,e){return this.__schemas__[t]=e,v(this),this},x.prototype.set=function(t){return this.__opts__=r(this.__opts__,t),this},x.prototype.test=function(text){if(this.__text_cache__=text,this.__index__=-1,!text.length)return!1;var t,e,n,r,o,l,h,c;if(this.re.schema_test.test(text))for((h=this.re.schema_search).lastIndex=0;null!==(t=h.exec(text));)if(r=this.testSchemaAt(text,t[2],h.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=text.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(e=text.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=e.index+e[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=e.index+e[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&text.indexOf("@")>=0&&null!==(n=text.match(this.re.email_fuzzy))&&(o=n.index+n[1].length,l=n.index+n[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=l)),this.__index__>=0},x.prototype.pretest=function(text){return this.re.pretest.test(text)},x.prototype.testSchemaAt=function(text,t,e){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(text,e,this):0},x.prototype.match=function(text){var t=0,e=[];this.__index__>=0&&this.__text_cache__===text&&(e.push(_(this,t)),t=this.__last_index__);for(var n=t?text.slice(t):text;this.test(n);)e.push(_(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return e.length?e:null},x.prototype.matchAtStart=function(text){if(this.__text_cache__=text,this.__index__=-1,!text.length)return null;var t=this.re.schema_at_start.exec(text);if(!t)return null;var e=this.testSchemaAt(text,t[2],t[0].length);return e?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+e,_(this,0)):null},x.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),v(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,v(this),this)},x.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},x.prototype.onCompile=function(){},t.exports=x},3862:function(t,e,n){"use strict";t.exports=function(t){var e={};t=t||{},e.src_Any=n(1542).source,e.src_Cc=n(1543).source,e.src_Z=n(1544).source,e.src_P=n(1078).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><｜]";return e.src_pseudo_letter="(?:(?![><｜]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><｜]|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},3863:function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},3864:function(t,e,n){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},3865:function(t,e,n){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},3933:function(t,e,n){var r=n(238);t.exports=function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=r(t),function(){if(--t<1)return e.apply(this,arguments)}}},3934:function(t,e,n){var r=n(1081),o=1/0;t.exports=function(t){return t?(t=r(t))===o||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},3935:function(t,e,n){var r=n(3936),o=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(o,""):t}},3936:function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},3937:function(t,e,n){var r=n(757),o=n(287);t.exports=function(t,e,n){var l=1&e,h=r(t);return function e(){return(this&&this!==o&&this instanceof e?h:t).apply(l?n:this,arguments)}}},3938:function(t,e,n){var r=n(544),o=n(757),l=n(1618),h=n(1621),c=n(545),f=n(507),d=n(287);t.exports=function(t,e,n){var m=o(t);return function o(){for(var v=arguments.length,y=Array(v),_=v,x=c(o);_--;)y[_]=arguments[_];var w=v<3&&y[0]!==x&&y[v-1]!==x?[]:f(y,x);return(v-=w.length)<n?h(t,e,l,o.placeholder,void 0,y,w,void 0,void 0,n-v):r(this&&this!==d&&this instanceof o?m:t,this,y)}}},3939:function(t,e){t.exports=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}},3940:function(t,e,n){var r=n(1082),o=n(1622),l=n(3941),h=n(3943);t.exports=function(t){var e=l(t),n=h[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var data=o(n);return!!data&&t===data[0]}},3941:function(t,e,n){var r=n(3942),o=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=r[e],l=o.call(r,e)?n.length:0;l--;){var data=n[l],h=data.func;if(null==h||h==t)return data.name}return e}},3942:function(t,e){t.exports={}},3943:function(t,e,n){var r=n(1082),o=n(1624),l=n(1083),h=n(312),c=n(418),f=n(3944),d=Object.prototype.hasOwnProperty;function m(t){if(c(t)&&!h(t)&&!(t instanceof r)){if(t instanceof o)return t;if(d.call(t,"__wrapped__"))return f(t)}return new o(t)}m.prototype=l.prototype,m.prototype.constructor=m,t.exports=m},3944:function(t,e,n){var r=n(1082),o=n(1624),l=n(656);t.exports=function(t){if(t instanceof r)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=l(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},3945:function(t,e){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=function(source){var t=source.match(n);return t?t[1].split(r):[]}},3946:function(t,e){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(source,details){var t=details.length;if(!t)return source;var e=t-1;return details[e]=(t>1?"& ":"")+details[e],details=details.join(t>2?", ":" "),source.replace(n,"{\n/* [wrapped with "+details+"] */\n")}},3947:function(t,e,n){var r=n(3948),o=n(1337),l=n(543),h=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:l;t.exports=h},3948:function(t,e){t.exports=function(t){return function(){return t}}},3949:function(t,e,n){var r=n(1335),o=n(758),l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(details,t){return r(l,(function(e){var n="_."+e[0];t&e[1]&&!o(details,n)&&details.push(n)})),details.sort()}},3950:function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},3951:function(t,e,n){var r=n(656),o=n(447),l=Math.min;t.exports=function(t,e){for(var n=t.length,h=l(e.length,n),c=r(t);h--;){var f=e[h];t[h]=o(f,n)?c[f]:void 0}return t}},3952:function(t,e,n){var r=n(544),o=n(757),l=n(287);t.exports=function(t,e,n,h){var c=1&e,f=o(t);return function e(){for(var o=-1,d=arguments.length,m=-1,v=h.length,y=Array(v+d),_=this&&this!==l&&this instanceof e?f:t;++m<v;)y[m]=h[m];for(;d--;)y[m++]=arguments[++o];return r(_,c?n:this,y)}}},3953:function(t,e,n){var r=n(1619),o=n(1620),l=n(507),h="__lodash_placeholder__",c=128,f=Math.min;t.exports=function(data,source){var t=data[1],e=source[1],n=t|e,d=n<131,m=e==c&&8==t||e==c&&256==t&&data[7].length<=source[8]||384==e&&source[7].length<=source[8]&&8==t;if(!d&&!m)return data;1&e&&(data[2]=source[2],n|=1&t?0:4);var v=source[3];if(v){var y=data[3];data[3]=y?r(y,v,source[4]):v,data[4]=y?l(data[3],h):source[4]}return(v=source[5])&&(y=data[5],data[5]=y?o(y,v,source[6]):v,data[6]=y?l(data[5],h):source[6]),(v=source[7])&&(data[7]=v),e&c&&(data[8]=null==data[8]?source[8]:f(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=n,data}},3954:function(t,e,n){var r=n(170),o=n(420),l=n(545),h=n(507),c=r((function(t,e,n){var r=1;if(n.length){var f=h(n,l(c));r|=32}return o(t,r,e,n,f)}));c.placeholder={},t.exports=c},3955:function(t,e,n){var r=n(170),o=n(420),l=n(545),h=n(507),c=r((function(object,t,e){var n=3;if(e.length){var r=h(e,l(c));n|=32}return o(t,n,object,e,r)}));c.placeholder={},t.exports=c},3956:function(t,e,n){var r=n(420);function o(t,e,n){var l=r(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return l.placeholder=o.placeholder,l}o.placeholder={},t.exports=o},3957:function(t,e,n){var r=n(420);function o(t,e,n){var l=r(t,16,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return l.placeholder=o.placeholder,l}o.placeholder={},t.exports=o},3958:function(t,e,n){var r=n(287);t.exports=function(){return r.Date.now()}},3959:function(t,e,n){var r=n(1631),o=n(170)((function(t,e){return r(t,1,e)}));t.exports=o},3960:function(t,e,n){var r=n(1631),o=n(170),l=n(1081),h=o((function(t,e,n){return r(t,l(e)||0,n)}));t.exports=h},3961:function(t,e,n){var r=n(420);t.exports=function(t){return r(t,512)}},3962:function(t,e){t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},3963:function(t,e,n){var r=n(1629);t.exports=function(t){return r(2,t)}},3964:function(t,e,n){var r=n(544),o=n(376),l=n(357),h=n(263),c=n(170),f=n(497),d=n(3986),m=n(312),v=Math.min,y=d((function(t,e){var n=(e=1==e.length&&m(e[0])?o(e[0],f(h)):o(l(e,1),f(h))).length;return c((function(o){for(var l=-1,h=v(o.length,n);++l<h;)o[l]=e[l].call(this,o[l]);return r(t,this,o)}))}));t.exports=y},3965:function(t,e,n){var r=n(537),o=n(999),l=n(312),h=r?r.isConcatSpreadable:void 0;t.exports=function(t){return l(t)||o(t)||!!(h&&t&&t[h])}},3966:function(t,e,n){var r=n(3967),o=n(3975),l=n(1636);t.exports=function(source){var t=o(source);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(object){return object===source||r(object,source,t)}}},3967:function(t,e,n){var r=n(996),o=n(1633);t.exports=function(object,source,t,e){var n=t.length,l=n,h=!e;if(null==object)return!l;for(object=Object(object);n--;){var data=t[n];if(h&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++n<l;){var c=(data=t[n])[0],f=object[c],d=data[1];if(h&&data[2]){if(void 0===f&&!(c in object))return!1}else{var m=new r;if(e)var v=e(f,d,c,object,source,m);if(!(void 0===v?o(d,f,3,e,m):v))return!1}}return!0}},3968:function(t,e,n){var r=n(996),o=n(1634),l=n(3972),h=n(3974),c=n(726),f=n(312),d=n(1e3),m=n(1340),v="[object Arguments]",y="[object Array]",_="[object Object]",x=Object.prototype.hasOwnProperty;t.exports=function(object,t,e,n,w,M){var S=f(object),E=f(t),A=S?y:c(object),T=E?y:c(t),C=(A=A==v?_:A)==_,P=(T=T==v?_:T)==_,R=A==T;if(R&&d(object)){if(!d(t))return!1;S=!0,C=!1}if(R&&!C)return M||(M=new r),S||m(object)?o(object,t,e,n,w,M):l(object,t,A,e,n,w,M);if(!(1&e)){var I=C&&x.call(object,"__wrapped__"),k=P&&x.call(t,"__wrapped__");if(I||k){var D=I?object.value():object,L=k?t.value():t;return M||(M=new r),w(D,L,e,n,M)}}return!!R&&(M||(M=new r),h(object,t,e,n,w,M))}},3969:function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},3970:function(t,e){t.exports=function(t){return this.__data__.has(t)}},3971:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},3972:function(t,e,n){var r=n(537),o=n(1349),l=n(495),h=n(1634),c=n(3973),f=n(1086),d=r?r.prototype:void 0,m=d?d.valueOf:void 0;t.exports=function(object,t,e,n,r,d,v){switch(e){case"[object DataView]":if(object.byteLength!=t.byteLength||object.byteOffset!=t.byteOffset)return!1;object=object.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=t.byteLength||!d(new o(object),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return l(+object,+t);case"[object Error]":return object.name==t.name&&object.message==t.message;case"[object RegExp]":case"[object String]":return object==t+"";case"[object Map]":var y=c;case"[object Set]":var _=1&n;if(y||(y=f),object.size!=t.size&&!_)return!1;var x=v.get(object);if(x)return x==t;n|=2,v.set(object,t);var w=h(y(object),y(t),n,r,d,v);return v.delete(object),w;case"[object Symbol]":if(m)return m.call(object)==m.call(t)}return!1}},3973:function(t,e){t.exports=function(map){var t=-1,e=Array(map.size);return map.forEach((function(n,r){e[++t]=[r,n]})),e}},3974:function(t,e,n){var r=n(1345),o=Object.prototype.hasOwnProperty;t.exports=function(object,t,e,n,l,h){var c=1&e,f=r(object),d=f.length;if(d!=r(t).length&&!c)return!1;for(var m=d;m--;){var v=f[m];if(!(c?v in t:o.call(t,v)))return!1}var y=h.get(object),_=h.get(t);if(y&&_)return y==t&&_==object;var x=!0;h.set(object,t),h.set(t,object);for(var w=c;++m<d;){var M=object[v=f[m]],S=t[v];if(n)var E=c?n(S,M,v,t,object,h):n(M,S,v,object,t,h);if(!(void 0===E?M===S||l(M,S,e,n,h):E)){x=!1;break}w||(w="constructor"==v)}if(x&&!w){var A=object.constructor,T=t.constructor;A==T||!("constructor"in object)||!("constructor"in t)||"function"==typeof A&&A instanceof A&&"function"==typeof T&&T instanceof T||(x=!1)}return h.delete(object),h.delete(t),x}},3975:function(t,e,n){var r=n(1635),o=n(724);t.exports=function(object){for(var t=o(object),e=t.length;e--;){var n=t[e],l=object[n];t[e]=[n,l,r(l)]}return t}},3976:function(t,e,n){var r=n(1633),o=n(1637),l=n(3981),h=n(1088),c=n(1635),f=n(1636),d=n(546);t.exports=function(path,t){return h(path)&&c(t)?f(d(path),t):function(object){var e=o(object,path);return void 0===e&&e===t?l(object,path):r(t,e,3)}}},3977:function(t,e,n){var r=n(3978),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,h=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(l,"$1"):n||t)})),e}));t.exports=h},3978:function(t,e,n){var r=n(1632);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},3979:function(t,e,n){var r=n(3980);t.exports=function(t){return null==t?"":r(t)}},3980:function(t,e,n){var r=n(537),o=n(376),l=n(312),h=n(506),c=r?r.prototype:void 0,f=c?c.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(l(e))return o(e,t)+"";if(h(e))return f?f.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},3981:function(t,e,n){var r=n(3982),o=n(3983);t.exports=function(object,path){return null!=object&&o(object,path,r)}},3982:function(t,e){t.exports=function(object,t){return null!=object&&t in Object(object)}},3983:function(t,e,n){var r=n(762),o=n(999),l=n(312),h=n(447),c=n(1001),f=n(546);t.exports=function(object,path,t){for(var e=-1,n=(path=r(path,object)).length,d=!1;++e<n;){var m=f(path[e]);if(!(d=null!=object&&t(object,m)))break;object=object[m]}return d||++e!=n?d:!!(n=null==object?0:object.length)&&c(n)&&h(m,n)&&(l(object)||o(object))}},3984:function(t,e,n){var r=n(1638),o=n(3985),l=n(1088),h=n(546);t.exports=function(path){return l(path)?r(h(path)):o(path)}},3985:function(t,e,n){var r=n(1087);t.exports=function(path){return function(object){return r(object,path)}}},3986:function(t,e,n){var r=n(170);t.exports=r},3987:function(t,e,n){var r=n(170),o=n(420),l=n(545),h=n(507),c=r((function(t,e){var n=h(e,l(c));return o(t,64,void 0,e,n)}));c.placeholder={},t.exports=c},3988:function(t,e,n){var r=n(420),o=n(1640),l=o((function(t,e){return r(t,256,void 0,void 0,void 0,e)}));t.exports=l},3989:function(t,e,n){var r=n(170),o=n(238);t.exports=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=void 0===e?e:o(e),r(t,e)}},3990:function(t,e,n){var r=n(544),o=n(658),l=n(170),h=n(3991),c=n(238),f=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:f(c(e),0),l((function(n){var l=n[e],c=h(n,0,e);return l&&o(c,l),r(t,this,c)}))}},3991:function(t,e,n){var r=n(377);t.exports=function(t,e,n){var o=t.length;return n=void 0===n?o:n,!e&&n>=o?t:r(t,e,n)}},3992:function(t,e,n){var r=n(380),o=n(354);t.exports=function(t,e,n){var l=!0,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(l="leading"in n?!!n.leading:l,h="trailing"in n?!!n.trailing:h),r(t,e,{leading:l,maxWait:e,trailing:h})}},3993:function(t,e,n){var r=n(1615);t.exports=function(t){return r(t,1)}},3994:function(t,e,n){var r=n(3995),o=n(1639);t.exports=function(t,e){return o(r(e),t)}},3995:function(t,e,n){var r=n(543);t.exports=function(t){return"function"==typeof t?t:r}},400:function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},4e3:function(t,e,n){var r;(function(){function o(t){"use strict";var e={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r].defaultValue);return n}var l={},h={},c={},f=o(!0),d="vanilla",m={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:o(!0),allOn:function(){"use strict";var t=o(!0),e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}()};function v(t,e){"use strict";var n=e?"Error in "+e+" extension->":"Error in unnamed extension",r={valid:!0,error:""};l.helper.isArray(t)||(t=[t]);for(var i=0;i<t.length;++i){var o=n+" sub-extension "+i+": ",h=t[i];if("object"!=typeof h)return r.valid=!1,r.error=o+"must be an object, but "+typeof h+" given",r;if(!l.helper.isString(h.type))return r.valid=!1,r.error=o+'property "type" must be a string, but '+typeof h.type+" given",r;var c=h.type=h.type.toLowerCase();if("language"===c&&(c=h.type="lang"),"html"===c&&(c=h.type="output"),"lang"!==c&&"output"!==c&&"listener"!==c)return r.valid=!1,r.error=o+"type "+c+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===c){if(l.helper.isUndefined(h.listeners))return r.valid=!1,r.error=o+'. Extensions of type "listener" must have a property called "listeners"',r}else if(l.helper.isUndefined(h.filter)&&l.helper.isUndefined(h.regex))return r.valid=!1,r.error=o+c+' extensions must define either a "regex" property or a "filter" method',r;if(h.listeners){if("object"!=typeof h.listeners)return r.valid=!1,r.error=o+'"listeners" property must be an object but '+typeof h.listeners+" given",r;for(var f in h.listeners)if(h.listeners.hasOwnProperty(f)&&"function"!=typeof h.listeners[f])return r.valid=!1,r.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+f+" must be a function but "+typeof h.listeners[f]+" given",r}if(h.filter){if("function"!=typeof h.filter)return r.valid=!1,r.error=o+'"filter" must be a function, but '+typeof h.filter+" given",r}else if(h.regex){if(l.helper.isString(h.regex)&&(h.regex=new RegExp(h.regex,"g")),!(h.regex instanceof RegExp))return r.valid=!1,r.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof h.regex+" given",r;if(l.helper.isUndefined(h.replace))return r.valid=!1,r.error=o+'"regex" extensions must implement a replace string or function',r}}return r}function y(t,e){"use strict";return"¨E"+e.charCodeAt(0)+"E"}l.helper={},l.extensions={},l.setOption=function(t,e){"use strict";return f[t]=e,this},l.getOption=function(t){"use strict";return f[t]},l.getOptions=function(){"use strict";return f},l.resetOptions=function(){"use strict";f=o(!0)},l.setFlavor=function(t){"use strict";if(!m.hasOwnProperty(t))throw Error(t+" flavor was not found");l.resetOptions();var e=m[t];for(var option in d=t,e)e.hasOwnProperty(option)&&(f[option]=e[option])},l.getFlavor=function(){"use strict";return d},l.getFlavorOptions=function(t){"use strict";if(m.hasOwnProperty(t))return m[t]},l.getDefaultOptions=function(t){"use strict";return o(t)},l.subParser=function(t,e){"use strict";if(l.helper.isString(t)){if(void 0===e){if(h.hasOwnProperty(t))return h[t];throw Error("SubParser named "+t+" not registered!")}h[t]=e}},l.extension=function(t,e){"use strict";if(!l.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=l.helper.stdExtName(t),l.helper.isUndefined(e)){if(!c.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return c[t]}"function"==typeof e&&(e=e()),l.helper.isArray(e)||(e=[e]);var n=v(e,t);if(!n.valid)throw Error(n.error);c[t]=e},l.getAllExtensions=function(){"use strict";return c},l.removeExtension=function(t){"use strict";delete c[t]},l.resetExtensions=function(){"use strict";c={}},l.validateExtension=function(t){"use strict";var e=v(t,null);return!!e.valid||(console.warn(e.error),!1)},l.hasOwnProperty("helper")||(l.helper={}),l.helper.isString=function(a){"use strict";return"string"==typeof a||a instanceof String},l.helper.isFunction=function(a){"use strict";return a&&"[object Function]"==={}.toString.call(a)},l.helper.isArray=function(a){"use strict";return Array.isArray(a)},l.helper.isUndefined=function(t){"use strict";return void 0===t},l.helper.forEach=function(t,e){"use strict";if(l.helper.isUndefined(t))throw new Error("obj param is required");if(l.helper.isUndefined(e))throw new Error("callback param is required");if(!l.helper.isFunction(e))throw new Error("callback param must be a function/closure");if("function"==typeof t.forEach)t.forEach(e);else if(l.helper.isArray(t))for(var i=0;i<t.length;i++)e(t[i],i,t);else{if("object"!=typeof t)throw new Error("obj does not seem to be an array or an iterable object");for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)}},l.helper.stdExtName=function(s){"use strict";return s.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},l.helper.escapeCharactersCallback=y,l.helper.escapeCharacters=function(text,t,e){"use strict";var n="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";e&&(n="\\\\"+n);var r=new RegExp(n,"g");return text=text.replace(r,y)},l.helper.unescapeHTMLEntities=function(t){"use strict";return t.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var _=function(t,e,n,r){"use strict";var o,s,l,h,c,f=r||"",g=f.indexOf("g")>-1,d=new RegExp(e+"|"+n,"g"+f.replace(/g/g,"")),m=new RegExp(e,f.replace(/g/g,"")),v=[];do{for(o=0;l=d.exec(t);)if(m.test(l[0]))o++||(h=(s=d.lastIndex)-l[0].length);else if(o&&! --o){c=l.index+l[0].length;var y={left:{start:h,end:s},match:{start:s,end:l.index},right:{start:l.index,end:c},wholeMatch:{start:h,end:c}};if(v.push(y),!g)return v}}while(o&&(d.lastIndex=s));return v};l.helper.matchRecursiveRegExp=function(t,e,n,r){"use strict";for(var o=_(t,e,n,r),l=[],i=0;i<o.length;++i)l.push([t.slice(o[i].wholeMatch.start,o[i].wholeMatch.end),t.slice(o[i].match.start,o[i].match.end),t.slice(o[i].left.start,o[i].left.end),t.slice(o[i].right.start,o[i].right.end)]);return l},l.helper.replaceRecursiveRegExp=function(t,e,n,r,o){"use strict";if(!l.helper.isFunction(e)){var h=e;e=function(){return h}}var c=_(t,n,r,o),f=t,d=c.length;if(d>0){var m=[];0!==c[0].wholeMatch.start&&m.push(t.slice(0,c[0].wholeMatch.start));for(var i=0;i<d;++i)m.push(e(t.slice(c[i].wholeMatch.start,c[i].wholeMatch.end),t.slice(c[i].match.start,c[i].match.end),t.slice(c[i].left.start,c[i].left.end),t.slice(c[i].right.start,c[i].right.end))),i<d-1&&m.push(t.slice(c[i].wholeMatch.end,c[i+1].wholeMatch.start));c[d-1].wholeMatch.end<t.length&&m.push(t.slice(c[d-1].wholeMatch.end)),f=m.join("")}return f},l.helper.regexIndexOf=function(t,e,n){"use strict";if(!l.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(e instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=t.substring(n||0).search(e);return r>=0?r+(n||0):r},l.helper.splitAtIndex=function(t,e){"use strict";if(!l.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[t.substring(0,e),t.substring(e)]},l.helper.encodeEmailAddress=function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t=t.replace(/./g,(function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else{var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}))},l.helper.padEnd=function(t,e,n){"use strict";return e|=0,n=String(n||" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=n.repeat(e/n.length)),String(t)+n.slice(0,e))},"undefined"==typeof console&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),l.helper.regexes={asteriskDashAndColon:/([*_:~])/g},l.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},l.Converter=function(t){"use strict";var e={},n=[],r=[],o={},h=d,y={parsed:{},raw:"",format:""};function _(t,e){if(e=e||null,l.helper.isString(t)){if(e=t=l.helper.stdExtName(t),l.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(t,e){"function"==typeof t&&(t=t(new l.Converter));l.helper.isArray(t)||(t=[t]);var o=v(t,e);if(!o.valid)throw Error(o.error);for(var i=0;i<t.length;++i)switch(t[i].type){case"lang":n.push(t[i]);break;case"output":r.push(t[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(l.extensions[t],t);if(l.helper.isUndefined(c[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=c[t]}"function"==typeof t&&(t=t()),l.helper.isArray(t)||(t=[t]);var o=v(t,e);if(!o.valid)throw Error(o.error);for(var i=0;i<t.length;++i){switch(t[i].type){case"lang":n.push(t[i]);break;case"output":r.push(t[i])}if(t[i].hasOwnProperty("listeners"))for(var h in t[i].listeners)t[i].listeners.hasOwnProperty(h)&&x(h,t[i].listeners[h])}}function x(t,e){if(!l.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof e)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof e+" given");o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)}!function(){for(var n in t=t||{},f)f.hasOwnProperty(n)&&(e[n]=f[n]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.extensions&&l.helper.forEach(e.extensions,_)}(),this._dispatch=function(t,text,e,n){if(o.hasOwnProperty(t))for(var r=0;r<o[t].length;++r){var l=o[t][r](t,text,this,e,n);l&&void 0!==l&&(text=l)}return text},this.listen=function(t,e){return x(t,e),this},this.makeHtml=function(text){if(!text)return text;var t={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:n,outputModifiers:r,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return text=(text=(text=(text=(text=text.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),e.smartIndentationFix&&(text=function(text){var t=text.match(/^\s*/)[0].length,e=new RegExp("^\\s{0,"+t+"}","gm");return text.replace(e,"")}(text)),text="\n\n"+text+"\n\n",text=(text=l.subParser("detab")(text,e,t)).replace(/^[ \t]+$/gm,""),l.helper.forEach(n,(function(n){text=l.subParser("runExtension")(n,text,e,t)})),text=l.subParser("metadata")(text,e,t),text=l.subParser("hashPreCodeTags")(text,e,t),text=l.subParser("githubCodeBlocks")(text,e,t),text=l.subParser("hashHTMLBlocks")(text,e,t),text=l.subParser("hashCodeTags")(text,e,t),text=l.subParser("stripLinkDefinitions")(text,e,t),text=l.subParser("blockGamut")(text,e,t),text=l.subParser("unhashHTMLSpans")(text,e,t),text=(text=(text=l.subParser("unescapeSpecialChars")(text,e,t)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),text=l.subParser("completeHTMLDocument")(text,e,t),l.helper.forEach(r,(function(n){text=l.subParser("runExtension")(n,text,e,t)})),y=t.metadata,text},this.makeMarkdown=this.makeMd=function(t,e){if(t=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!e){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");e=window.document}var n=e.createElement("div");n.innerHTML=t;var r={preList:function(t){for(var e=t.querySelectorAll("pre"),n=[],i=0;i<e.length;++i)if(1===e[i].childElementCount&&"code"===e[i].firstChild.tagName.toLowerCase()){var content=e[i].firstChild.innerHTML.trim(),r=e[i].firstChild.getAttribute("data-language")||"";if(""===r)for(var o=e[i].firstChild.className.split(" "),h=0;h<o.length;++h){var c=o[h].match(/^language-(.+)$/);if(null!==c){r=c[1];break}}content=l.helper.unescapeHTMLEntities(content),n.push(content),e[i].outerHTML='<precode language="'+r+'" precodenum="'+i.toString()+'"></precode>'}else n.push(e[i].innerHTML),e[i].innerHTML="",e[i].setAttribute("prenum",i.toString());return n}(n)};!function t(e){for(var n=0;n<e.childNodes.length;++n){var r=e.childNodes[n];3===r.nodeType?/\S/.test(r.nodeValue)||/^[ ]+$/.test(r.nodeValue)?(r.nodeValue=r.nodeValue.split("\n").join(" "),r.nodeValue=r.nodeValue.replace(/(\s)+/g,"$1")):(e.removeChild(r),--n):1===r.nodeType&&t(r)}}(n);for(var o=n.childNodes,h="",i=0;i<o.length;i++)h+=l.subParser("makeMarkdown.node")(o[i],r);return h},this.setOption=function(t,n){e[t]=n},this.getOption=function(t){return e[t]},this.getOptions=function(){return e},this.addExtension=function(t,e){_(t,e=e||null)},this.useExtension=function(t){_(t)},this.setFlavor=function(t){if(!m.hasOwnProperty(t))throw Error(t+" flavor was not found");var n=m[t];for(var option in h=t,n)n.hasOwnProperty(option)&&(e[option]=n[option])},this.getFlavor=function(){return h},this.removeExtension=function(t){l.helper.isArray(t)||(t=[t]);for(var a=0;a<t.length;++a){for(var e=t[a],i=0;i<n.length;++i)n[i]===e&&n.splice(i,1);for(var o=0;o<r.length;++o)r[o]===e&&r.splice(o,1)}},this.getAllExtensions=function(){return{language:n,output:r}},this.getMetadata=function(t){return t?y.raw:y.parsed},this.getMetadataFormat=function(){return y.format},this._setMetadataPair=function(t,e){y.parsed[t]=e},this._setMetadataFormat=function(t){y.format=t},this._setMetadataRaw=function(t){y.raw=t}},l.subParser("anchors",(function(text,t,e){"use strict";var n=function(n,r,o,h,c,f,title){if(l.helper.isUndefined(title)&&(title=""),o=o.toLowerCase(),n.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)h="";else if(!h){if(o||(o=r.toLowerCase().replace(/ ?\n/g," ")),h="#"+o,l.helper.isUndefined(e.gUrls[o]))return n;h=e.gUrls[o],l.helper.isUndefined(e.gTitles[o])||(title=e.gTitles[o])}var d='<a href="'+(h=h.replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback))+'"';return""!==title&&null!==title&&(d+=' title="'+(title=(title=title.replace(/"/g,"&quot;")).replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback))+'"'),t.openLinksInNewWindow&&!/^#/.test(h)&&(d+=' rel="noopener noreferrer" target="¨E95Eblank"'),d+=">"+r+"</a>"};return text=(text=(text=(text=(text=e.converter._dispatch("anchors.before",text,t,e)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),t.ghMentions&&(text=text.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,n,r,o,h){if("\\"===r)return n+o;if(!l.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var c=t.ghMentionsLink.replace(/\{u}/g,h),f="";return t.openLinksInNewWindow&&(f=' rel="noopener noreferrer" target="¨E95Eblank"'),n+'<a href="'+c+'"'+f+">"+o+"</a>"}))),text=e.converter._dispatch("anchors.after",text,t,e)}));var x=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,M=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,S=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,E=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,A=function(t){"use strict";return function(e,n,link,r,o,h,c){var f=link=link.replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback),d="",m="",v=n||"",y=c||"";return/^www\./i.test(link)&&(link=link.replace(/^www\./i,"http://www.")),t.excludeTrailingPunctuationFromURLs&&h&&(d=h),t.openLinksInNewWindow&&(m=' rel="noopener noreferrer" target="¨E95Eblank"'),v+'<a href="'+link+'"'+m+">"+f+"</a>"+d+y}},T=function(t,e){"use strict";return function(n,b,r){var o="mailto:";return b=b||"",r=l.subParser("unescapeSpecialChars")(r,t,e),t.encodeEmails?(o=l.helper.encodeEmailAddress(o+r),r=l.helper.encodeEmailAddress(r)):o+=r,b+'<a href="'+o+'">'+r+"</a>"}};l.subParser("autoLinks",(function(text,t,e){"use strict";return text=(text=(text=e.converter._dispatch("autoLinks.before",text,t,e)).replace(M,A(t))).replace(E,T(t,e)),text=e.converter._dispatch("autoLinks.after",text,t,e)})),l.subParser("simplifiedAutoLinks",(function(text,t,e){"use strict";return t.simplifiedAutoLink?(text=e.converter._dispatch("simplifiedAutoLinks.before",text,t,e),text=(text=t.excludeTrailingPunctuationFromURLs?text.replace(w,A(t)):text.replace(x,A(t))).replace(S,T(t,e)),text=e.converter._dispatch("simplifiedAutoLinks.after",text,t,e)):text})),l.subParser("blockGamut",(function(text,t,e){"use strict";return text=e.converter._dispatch("blockGamut.before",text,t,e),text=l.subParser("blockQuotes")(text,t,e),text=l.subParser("headers")(text,t,e),text=l.subParser("horizontalRule")(text,t,e),text=l.subParser("lists")(text,t,e),text=l.subParser("codeBlocks")(text,t,e),text=l.subParser("tables")(text,t,e),text=l.subParser("hashHTMLBlocks")(text,t,e),text=l.subParser("paragraphs")(text,t,e),text=e.converter._dispatch("blockGamut.after",text,t,e)})),l.subParser("blockQuotes",(function(text,t,e){"use strict";text=e.converter._dispatch("blockQuotes.before",text,t,e),text+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return t.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),text=text.replace(n,(function(n){return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),n=l.subParser("githubCodeBlocks")(n,t,e),n=(n=(n=l.subParser("blockGamut")(n,t,e)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(t,e){var pre=e;return pre=(pre=pre.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),l.subParser("hashBlock")("<blockquote>\n"+n+"\n</blockquote>",t,e)})),text=e.converter._dispatch("blockQuotes.after",text,t,e)})),l.subParser("codeBlocks",(function(text,t,e){"use strict";text=e.converter._dispatch("codeBlocks.before",text,t,e);return text=(text=(text+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(n,r,o){var h=r,c=o,f="\n";return h=l.subParser("outdent")(h,t,e),h=l.subParser("encodeCode")(h,t,e),h=(h=(h=l.subParser("detab")(h,t,e)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(f=""),h="<pre><code>"+h+f+"</code></pre>",l.subParser("hashBlock")(h,t,e)+c}))).replace(/¨0/,""),text=e.converter._dispatch("codeBlocks.after",text,t,e)})),l.subParser("codeSpans",(function(text,t,e){"use strict";return void 0===(text=e.converter._dispatch("codeSpans.before",text,t,e))&&(text=""),text=text.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(n,r,o,h){var c=h;return c=(c=c.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),c=r+"<code>"+(c=l.subParser("encodeCode")(c,t,e))+"</code>",c=l.subParser("hashHTMLSpans")(c,t,e)})),text=e.converter._dispatch("codeSpans.after",text,t,e)})),l.subParser("completeHTMLDocument",(function(text,t,e){"use strict";if(!t.completeHTMLDocument)return text;text=e.converter._dispatch("completeHTMLDocument.before",text,t,e);var n="html",r="<!DOCTYPE HTML>\n",title="",o='<meta charset="utf-8">\n',l="",h="";for(var meta in void 0!==e.metadata.parsed.doctype&&(r="<!DOCTYPE "+e.metadata.parsed.doctype+">\n","html"!==(n=e.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==n||(o='<meta charset="utf-8">')),e.metadata.parsed)if(e.metadata.parsed.hasOwnProperty(meta))switch(meta.toLowerCase()){case"doctype":break;case"title":title="<title>"+e.metadata.parsed.title+"</title>\n";break;case"charset":o="html"===n||"html5"===n?'<meta charset="'+e.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+e.metadata.parsed.charset+'">\n';break;case"language":case"lang":l=' lang="'+e.metadata.parsed[meta]+'"',h+='<meta name="'+meta+'" content="'+e.metadata.parsed[meta]+'">\n';break;default:h+='<meta name="'+meta+'" content="'+e.metadata.parsed[meta]+'">\n'}return text=r+"<html"+l+">\n<head>\n"+title+o+h+"</head>\n<body>\n"+text.trim()+"\n</body>\n</html>",text=e.converter._dispatch("completeHTMLDocument.after",text,t,e)})),l.subParser("detab",(function(text,t,e){"use strict";return text=(text=(text=(text=(text=(text=e.converter._dispatch("detab.before",text,t,e)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(t,e){for(var n=e,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),text=e.converter._dispatch("detab.after",text,t,e)})),l.subParser("ellipsis",(function(text,t,e){"use strict";return t.ellipsis?(text=(text=e.converter._dispatch("ellipsis.before",text,t,e)).replace(/\.\.\./g,"…"),text=e.converter._dispatch("ellipsis.after",text,t,e)):text})),l.subParser("emoji",(function(text,t,e){"use strict";if(!t.emoji)return text;return text=(text=e.converter._dispatch("emoji.before",text,t,e)).replace(/:([\S]+?):/g,(function(t,e){return l.helper.emojis.hasOwnProperty(e)?l.helper.emojis[e]:t})),text=e.converter._dispatch("emoji.after",text,t,e)})),l.subParser("encodeAmpsAndAngles",(function(text,t,e){"use strict";return text=(text=(text=(text=(text=e.converter._dispatch("encodeAmpsAndAngles.before",text,t,e)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),text=e.converter._dispatch("encodeAmpsAndAngles.after",text,t,e)})),l.subParser("encodeBackslashEscapes",(function(text,t,e){"use strict";return text=(text=(text=e.converter._dispatch("encodeBackslashEscapes.before",text,t,e)).replace(/\\(\\)/g,l.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,l.helper.escapeCharactersCallback),text=e.converter._dispatch("encodeBackslashEscapes.after",text,t,e)})),l.subParser("encodeCode",(function(text,t,e){"use strict";return text=(text=e.converter._dispatch("encodeCode.before",text,t,e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,l.helper.escapeCharactersCallback),text=e.converter._dispatch("encodeCode.after",text,t,e)})),l.subParser("escapeSpecialCharsWithinTagAttributes",(function(text,t,e){"use strict";return text=(text=(text=e.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",text,t,e)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(t){return t.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,l.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(t){return t.replace(/([\\`*_~=|])/g,l.helper.escapeCharactersCallback)})),text=e.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",text,t,e)})),l.subParser("githubCodeBlocks",(function(text,t,e){"use strict";return t.ghCodeBlocks?(text=e.converter._dispatch("githubCodeBlocks.before",text,t,e),text=(text=(text+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(n,r,o,h){var c=t.omitExtraWLInCodeBlocks?"":"\n";return h=l.subParser("encodeCode")(h,t,e),h="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(h=(h=(h=l.subParser("detab")(h,t,e)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+c+"</code></pre>",h=l.subParser("hashBlock")(h,t,e),"\n\n¨G"+(e.ghCodeBlocks.push({text:n,codeblock:h})-1)+"G\n\n"}))).replace(/¨0/,""),e.converter._dispatch("githubCodeBlocks.after",text,t,e)):text})),l.subParser("hashBlock",(function(text,t,e){"use strict";return text=(text=e.converter._dispatch("hashBlock.before",text,t,e)).replace(/(^\n+|\n+$)/g,""),text="\n\n¨K"+(e.gHtmlBlocks.push(text)-1)+"K\n\n",text=e.converter._dispatch("hashBlock.after",text,t,e)})),l.subParser("hashCodeTags",(function(text,t,e){"use strict";text=e.converter._dispatch("hashCodeTags.before",text,t,e);return text=l.helper.replaceRecursiveRegExp(text,(function(n,r,o,h){var c=o+l.subParser("encodeCode")(r,t,e)+h;return"¨C"+(e.gHtmlSpans.push(c)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),text=e.converter._dispatch("hashCodeTags.after",text,t,e)})),l.subParser("hashElement",(function(text,t,e){"use strict";return function(t,n){var r=n;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n¨K"+(e.gHtmlBlocks.push(r)-1)+"K\n\n"}})),l.subParser("hashHTMLBlocks",(function(text,t,e){"use strict";text=e.converter._dispatch("hashHTMLBlocks.before",text,t,e);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],r=function(t,n,r,o){var l=t;return-1!==r.search(/\bmarkdown\b/)&&(l=r+e.converter.makeHtml(n)+o),"\n\n¨K"+(e.gHtmlBlocks.push(l)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(text=text.replace(/\\<(\/?[^>]+?)>/g,(function(t,e){return"&lt;"+e+"&gt;"})));for(var i=0;i<n.length;++i)for(var o,h=new RegExp("^ {0,3}(<"+n[i]+"\\b[^>]*>)","im"),c="<"+n[i]+"\\b[^>]*>",f="</"+n[i]+">";-1!==(o=l.helper.regexIndexOf(text,h));){var d=l.helper.splitAtIndex(text,o),m=l.helper.replaceRecursiveRegExp(d[1],r,c,f,"im");if(m===d[1])break;text=d[0].concat(m)}return text=text.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,l.subParser("hashElement")(text,t,e)),text=(text=l.helper.replaceRecursiveRegExp(text,(function(t){return"\n\n¨K"+(e.gHtmlBlocks.push(t)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,l.subParser("hashElement")(text,t,e)),text=e.converter._dispatch("hashHTMLBlocks.after",text,t,e)})),l.subParser("hashHTMLSpans",(function(text,t,e){"use strict";function n(html){return"¨C"+(e.gHtmlSpans.push(html)-1)+"C"}return text=(text=(text=(text=(text=e.converter._dispatch("hashHTMLSpans.before",text,t,e)).replace(/<[^>]+?\/>/gi,(function(t){return n(t)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(t){return n(t)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(t){return n(t)}))).replace(/<[^>]+?>/gi,(function(t){return n(t)})),text=e.converter._dispatch("hashHTMLSpans.after",text,t,e)})),l.subParser("unhashHTMLSpans",(function(text,t,e){"use strict";text=e.converter._dispatch("unhashHTMLSpans.before",text,t,e);for(var i=0;i<e.gHtmlSpans.length;++i){for(var n=e.gHtmlSpans[i],r=0;/¨C(\d+)C/.test(n);){var o=RegExp.$1;if(n=n.replace("¨C"+o+"C",e.gHtmlSpans[o]),10===r){console.error("maximum nesting of 10 spans reached!!!");break}++r}text=text.replace("¨C"+i+"C",n)}return text=e.converter._dispatch("unhashHTMLSpans.after",text,t,e)})),l.subParser("hashPreCodeTags",(function(text,t,e){"use strict";text=e.converter._dispatch("hashPreCodeTags.before",text,t,e);return text=l.helper.replaceRecursiveRegExp(text,(function(n,r,o,h){var c=o+l.subParser("encodeCode")(r,t,e)+h;return"\n\n¨G"+(e.ghCodeBlocks.push({text:n,codeblock:c})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),text=e.converter._dispatch("hashPreCodeTags.after",text,t,e)})),l.subParser("headers",(function(text,t,e){"use strict";text=e.converter._dispatch("headers.before",text,t,e);var n=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),r=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;text=(text=text.replace(r,(function(r,o){var h=l.subParser("spanGamut")(o,t,e),f=t.noHeaderId?"":' id="'+c(o)+'"',d="<h"+n+f+">"+h+"</h"+n+">";return l.subParser("hashBlock")(d,t,e)}))).replace(o,(function(r,o){var h=l.subParser("spanGamut")(o,t,e),f=t.noHeaderId?"":' id="'+c(o)+'"',d=n+1,m="<h"+d+f+">"+h+"</h"+d+">";return l.subParser("hashBlock")(m,t,e)}));var h=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function c(n){var title,r;if(t.customizedHeaderId){var o=n.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(n=o[1])}return title=n,r=l.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(title=r+title),title=t.ghCompatibleHeaderId?title.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?title.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():title.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(title=r+title),e.hashLinkCounts[title]?title=title+"-"+e.hashLinkCounts[title]++:e.hashLinkCounts[title]=1,title}return text=text.replace(h,(function(r,o,h){var f=h;t.customizedHeaderId&&(f=h.replace(/\s?\{([^{]+?)}\s*$/,""));var span=l.subParser("spanGamut")(f,t,e),d=t.noHeaderId?"":' id="'+c(h)+'"',m=n-1+o.length,header="<h"+m+d+">"+span+"</h"+m+">";return l.subParser("hashBlock")(header,t,e)})),text=e.converter._dispatch("headers.after",text,t,e)})),l.subParser("horizontalRule",(function(text,t,e){"use strict";text=e.converter._dispatch("horizontalRule.before",text,t,e);var n=l.subParser("hashBlock")("<hr />",t,e);return text=(text=(text=text.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),text=e.converter._dispatch("horizontalRule.after",text,t,e)})),l.subParser("images",(function(text,t,e){"use strict";function n(t,n,r,o,h,c,f,title){var d=e.gUrls,m=e.gTitles,v=e.gDimensions;if(r=r.toLowerCase(),title||(title=""),t.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==r&&null!==r||(r=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+r,l.helper.isUndefined(d[r]))return t;o=d[r],l.helper.isUndefined(m[r])||(title=m[r]),l.helper.isUndefined(v[r])||(h=v[r].width,c=v[r].height)}n=n.replace(/"/g,"&quot;").replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback);var y='<img src="'+(o=o.replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback))+'" alt="'+n+'"';return title&&l.helper.isString(title)&&(y+=' title="'+(title=title.replace(/"/g,"&quot;").replace(l.helper.regexes.asteriskDashAndColon,l.helper.escapeCharactersCallback))+'"'),h&&c&&(y+=' width="'+(h="*"===h?"auto":h)+'"',y+=' height="'+(c="*"===c?"auto":c)+'"'),y+=" />"}return text=(text=(text=(text=(text=(text=e.converter._dispatch("images.before",text,t,e)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(t,e,r,o,l,h,c,title){return n(t,e,r,o=o.replace(/\s/g,""),l,h,c,title)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),text=e.converter._dispatch("images.after",text,t,e)})),l.subParser("italicsAndBold",(function(text,t,e){"use strict";function n(t,e,n){return e+t+n}return text=e.converter._dispatch("italicsAndBold.before",text,t,e),text=t.literalMidWordUnderscores?(text=(text=text.replace(/\b___(\S[\s\S]*?)___\b/g,(function(t,e){return n(e,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(t,e){return n(e,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(t,e){return n(e,"<em>","</em>")})):(text=(text=text.replace(/___(\S[\s\S]*?)___/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong><em>","</em></strong>"):t}))).replace(/__(\S[\s\S]*?)__/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong>","</strong>"):t}))).replace(/_([^\s_][\s\S]*?)_/g,(function(t,e){return/\S$/.test(e)?n(e,"<em>","</em>"):t})),text=t.literalMidWordAsterisks?(text=(text=text.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(t,e,r){return n(r,e+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(t,e,r){return n(r,e+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(t,e,r){return n(r,e+"<em>","</em>")})):(text=(text=text.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong><em>","</em></strong>"):t}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong>","</strong>"):t}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<em>","</em>"):t})),text=e.converter._dispatch("italicsAndBold.after",text,t,e)})),l.subParser("lists",(function(text,t,e){"use strict";function n(n,r){e.gListLevel++,n=n.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,h=/\n[ \t]*\n(?!¨0)/.test(n+="¨0");return t.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),n=(n=n.replace(o,(function(n,r,o,c,f,d,m){m=m&&""!==m.trim();var v=l.subParser("outdent")(f,t,e),y="";return d&&t.tasklists&&(y=' class="task-list-item" style="list-style-type: none;"',v=v.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return m&&(t+=" checked"),t+=">"}))),v=v.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(t){return"¨A"+t})),r||v.search(/\n{2,}/)>-1?(v=l.subParser("githubCodeBlocks")(v,t,e),v=l.subParser("blockGamut")(v,t,e)):(v=(v=l.subParser("lists")(v,t,e)).replace(/\n$/,""),v=(v=l.subParser("hashHTMLBlocks")(v,t,e)).replace(/\n\n+/g,"\n\n"),v=h?l.subParser("paragraphs")(v,t,e):l.subParser("spanGamut")(v,t,e)),v="<li"+y+">"+(v=v.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),e.gListLevel--,r&&(n=n.replace(/\s+$/,"")),n}function r(t,e){if("ol"===e){var n=t.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function o(e,o,l){var h=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,c=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,f="ul"===o?h:c,d="";if(-1!==e.search(f))!function t(m){var v=m.search(f),style=r(e,o);-1!==v?(d+="\n\n<"+o+style+">\n"+n(m.slice(0,v),!!l)+"</"+o+">\n",f="ul"===(o="ul"===o?"ol":"ul")?h:c,t(m.slice(v))):d+="\n\n<"+o+style+">\n"+n(m,!!l)+"</"+o+">\n"}(e);else{var style=r(e,o);d="\n\n<"+o+style+">\n"+n(e,!!l)+"</"+o+">\n"}return d}return text=e.converter._dispatch("lists.before",text,t,e),text+="¨0",text=(text=e.gListLevel?text.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(t,e,n){return o(e,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):text.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(t,e,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),text=e.converter._dispatch("lists.after",text,t,e)})),l.subParser("metadata",(function(text,t,e){"use strict";if(!t.metadata)return text;function n(content){e.metadata.raw=content,(content=(content=content.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(t,n,r){return e.metadata.parsed[n]=r,""}))}return text=(text=(text=(text=e.converter._dispatch("metadata.before",text,t,e)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(t,e,content){return n(content),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(t,r,content){return r&&(e.metadata.format=r),n(content),"¨M"}))).replace(/¨M/g,""),text=e.converter._dispatch("metadata.after",text,t,e)})),l.subParser("outdent",(function(text,t,e){"use strict";return text=(text=(text=e.converter._dispatch("outdent.before",text,t,e)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),text=e.converter._dispatch("outdent.after",text,t,e)})),l.subParser("paragraphs",(function(text,t,e){"use strict";for(var n=(text=(text=(text=e.converter._dispatch("paragraphs.before",text,t,e)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),r=[],o=n.length,i=0;i<o;i++){var h=n[i];h.search(/¨(K|G)(\d+)\1/g)>=0?r.push(h):h.search(/\S/)>=0&&(h=(h=l.subParser("spanGamut")(h,t,e)).replace(/^([ \t]*)/g,"<p>"),h+="</p>",r.push(h))}for(o=r.length,i=0;i<o;i++){for(var c="",f=r[i],d=!1;/¨(K|G)(\d+)\1/.test(f);){var m=RegExp.$1,v=RegExp.$2;c=(c="K"===m?e.gHtmlBlocks[v]:d?l.subParser("encodeCode")(e.ghCodeBlocks[v].text,t,e):e.ghCodeBlocks[v].codeblock).replace(/\$/g,"$$$$"),f=f.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(f)&&(d=!0)}r[i]=f}return text=(text=(text=r.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),e.converter._dispatch("paragraphs.after",text,t,e)})),l.subParser("runExtension",(function(t,text,e,n){"use strict";if(t.filter)text=t.filter(text,n.converter,e);else if(t.regex){var r=t.regex;r instanceof RegExp||(r=new RegExp(r,"g")),text=text.replace(r,t.replace)}return text})),l.subParser("spanGamut",(function(text,t,e){"use strict";return text=e.converter._dispatch("spanGamut.before",text,t,e),text=l.subParser("codeSpans")(text,t,e),text=l.subParser("escapeSpecialCharsWithinTagAttributes")(text,t,e),text=l.subParser("encodeBackslashEscapes")(text,t,e),text=l.subParser("images")(text,t,e),text=l.subParser("anchors")(text,t,e),text=l.subParser("autoLinks")(text,t,e),text=l.subParser("simplifiedAutoLinks")(text,t,e),text=l.subParser("emoji")(text,t,e),text=l.subParser("underline")(text,t,e),text=l.subParser("italicsAndBold")(text,t,e),text=l.subParser("strikethrough")(text,t,e),text=l.subParser("ellipsis")(text,t,e),text=l.subParser("hashHTMLSpans")(text,t,e),text=l.subParser("encodeAmpsAndAngles")(text,t,e),t.simpleLineBreaks?/\n\n¨K/.test(text)||(text=text.replace(/\n+/g,"<br />\n")):text=text.replace(/  +\n/g,"<br />\n"),text=e.converter._dispatch("spanGamut.after",text,t,e)})),l.subParser("strikethrough",(function(text,t,e){"use strict";return t.strikethrough&&(text=(text=e.converter._dispatch("strikethrough.before",text,t,e)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(n,r){return function(n){return t.simplifiedAutoLink&&(n=l.subParser("simplifiedAutoLinks")(n,t,e)),"<del>"+n+"</del>"}(r)})),text=e.converter._dispatch("strikethrough.after",text,t,e)),text})),l.subParser("stripLinkDefinitions",(function(text,t,e){"use strict";var n=function(n,r,o,h,c,f,title){return r=r.toLowerCase(),text.toLowerCase().split(r).length-1<2?n:(o.match(/^data:.+?\/.+?;base64,/)?e.gUrls[r]=o.replace(/\s/g,""):e.gUrls[r]=l.subParser("encodeAmpsAndAngles")(o,t,e),f?f+title:(title&&(e.gTitles[r]=title.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&h&&c&&(e.gDimensions[r]={width:h,height:c}),""))};return text=(text=(text=(text+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")})),l.subParser("tables",(function(text,t,e){"use strict";if(!t.tables)return text;function n(n,style){return"<td"+style+">"+l.subParser("spanGamut")(n,t,e)+"</td>\n"}function r(r){var i,o=r.split("\n");for(i=0;i<o.length;++i)/^ {0,3}\|/.test(o[i])&&(o[i]=o[i].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(o[i])&&(o[i]=o[i].replace(/\|[ \t]*$/,"")),o[i]=l.subParser("codeSpans")(o[i],t,e);var h,header,style,c,f=o[0].split("|").map((function(s){return s.trim()})),d=o[1].split("|").map((function(s){return s.trim()})),m=[],v=[],y=[],_=[];for(o.shift(),o.shift(),i=0;i<o.length;++i)""!==o[i].trim()&&m.push(o[i].split("|").map((function(s){return s.trim()})));if(f.length<d.length)return r;for(i=0;i<d.length;++i)y.push((h=d[i],/^:[ \t]*--*$/.test(h)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(h)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(h)?' style="text-align:center;"':""));for(i=0;i<f.length;++i)l.helper.isUndefined(y[i])&&(y[i]=""),v.push((header=f[i],style=y[i],c=void 0,c="",header=header.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(c=' id="'+header.replace(/ /g,"_").toLowerCase()+'"'),"<th"+c+style+">"+(header=l.subParser("spanGamut")(header,t,e))+"</th>\n"));for(i=0;i<m.length;++i){for(var x=[],w=0;w<v.length;++w)l.helper.isUndefined(m[i][w]),x.push(n(m[i][w],y[w]));_.push(x)}return function(t,e){for(var n="<table>\n<thead>\n<tr>\n",r=t.length,i=0;i<r;++i)n+=t[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<e.length;++i){n+="<tr>\n";for(var o=0;o<r;++o)n+=e[i][o];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(v,_)}return text=(text=(text=(text=e.converter._dispatch("tables.before",text,t,e)).replace(/\\(\|)/g,l.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,r)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,r),text=e.converter._dispatch("tables.after",text,t,e)})),l.subParser("underline",(function(text,t,e){"use strict";return t.underline?(text=e.converter._dispatch("underline.before",text,t,e),text=(text=t.literalMidWordUnderscores?(text=text.replace(/\b___(\S[\s\S]*?)___\b/g,(function(t,e){return"<u>"+e+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(t,e){return"<u>"+e+"</u>"})):(text=text.replace(/___(\S[\s\S]*?)___/g,(function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t}))).replace(/__(\S[\s\S]*?)__/g,(function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t}))).replace(/(_)/g,l.helper.escapeCharactersCallback),text=e.converter._dispatch("underline.after",text,t,e)):text})),l.subParser("unescapeSpecialChars",(function(text,t,e){"use strict";return text=(text=e.converter._dispatch("unescapeSpecialChars.before",text,t,e)).replace(/¨E(\d+)E/g,(function(t,e){var n=parseInt(e);return String.fromCharCode(n)})),text=e.converter._dispatch("unescapeSpecialChars.after",text,t,e)})),l.subParser("makeMarkdown.blockquote",(function(t,e){"use strict";var n="";if(t.hasChildNodes())for(var r=t.childNodes,o=r.length,i=0;i<o;++i){var h=l.subParser("makeMarkdown.node")(r[i],e);""!==h&&(n+=h)}return n="> "+(n=n.trim()).split("\n").join("\n> ")})),l.subParser("makeMarkdown.codeBlock",(function(t,e){"use strict";var n=t.getAttribute("language"),r=t.getAttribute("precodenum");return"```"+n+"\n"+e.preList[r]+"\n```"})),l.subParser("makeMarkdown.codeSpan",(function(t){"use strict";return"`"+t.innerHTML+"`"})),l.subParser("makeMarkdown.emphasis",(function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="*";for(var r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);n+="*"}return n})),l.subParser("makeMarkdown.header",(function(t,e,n){"use strict";var r=new Array(n+1).join("#"),o="";if(t.hasChildNodes()){o=r+" ";for(var h=t.childNodes,c=h.length,i=0;i<c;++i)o+=l.subParser("makeMarkdown.node")(h[i],e)}return o})),l.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),l.subParser("makeMarkdown.image",(function(t){"use strict";var e="";return t.hasAttribute("src")&&(e+="!["+t.getAttribute("alt")+"](",e+="<"+t.getAttribute("src")+">",t.hasAttribute("width")&&t.hasAttribute("height")&&(e+=" ="+t.getAttribute("width")+"x"+t.getAttribute("height")),t.hasAttribute("title")&&(e+=' "'+t.getAttribute("title")+'"'),e+=")"),e})),l.subParser("makeMarkdown.links",(function(t,e){"use strict";var n="";if(t.hasChildNodes()&&t.hasAttribute("href")){var r=t.childNodes,o=r.length;n="[";for(var i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);n+="](",n+="<"+t.getAttribute("href")+">",t.hasAttribute("title")&&(n+=' "'+t.getAttribute("title")+'"'),n+=")"}return n})),l.subParser("makeMarkdown.list",(function(t,e,n){"use strict";var r="";if(!t.hasChildNodes())return"";for(var o=t.childNodes,h=o.length,c=t.getAttribute("start")||1,i=0;i<h;++i)if(void 0!==o[i].tagName&&"li"===o[i].tagName.toLowerCase()){r+=("ol"===n?c.toString()+". ":"- ")+l.subParser("makeMarkdown.listItem")(o[i],e),++c}return(r+="\n\x3c!-- --\x3e\n").trim()})),l.subParser("makeMarkdown.listItem",(function(t,e){"use strict";for(var n="",r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);return/\n$/.test(n)?n=n.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):n+="\n",n})),l.subParser("makeMarkdown.node",(function(t,e,n){"use strict";n=n||!1;var r="";if(3===t.nodeType)return l.subParser("makeMarkdown.txt")(t,e);if(8===t.nodeType)return"\x3c!--"+t.data+"--\x3e\n\n";if(1!==t.nodeType)return"";switch(t.tagName.toLowerCase()){case"h1":n||(r=l.subParser("makeMarkdown.header")(t,e,1)+"\n\n");break;case"h2":n||(r=l.subParser("makeMarkdown.header")(t,e,2)+"\n\n");break;case"h3":n||(r=l.subParser("makeMarkdown.header")(t,e,3)+"\n\n");break;case"h4":n||(r=l.subParser("makeMarkdown.header")(t,e,4)+"\n\n");break;case"h5":n||(r=l.subParser("makeMarkdown.header")(t,e,5)+"\n\n");break;case"h6":n||(r=l.subParser("makeMarkdown.header")(t,e,6)+"\n\n");break;case"p":n||(r=l.subParser("makeMarkdown.paragraph")(t,e)+"\n\n");break;case"blockquote":n||(r=l.subParser("makeMarkdown.blockquote")(t,e)+"\n\n");break;case"hr":n||(r=l.subParser("makeMarkdown.hr")(t,e)+"\n\n");break;case"ol":n||(r=l.subParser("makeMarkdown.list")(t,e,"ol")+"\n\n");break;case"ul":n||(r=l.subParser("makeMarkdown.list")(t,e,"ul")+"\n\n");break;case"precode":n||(r=l.subParser("makeMarkdown.codeBlock")(t,e)+"\n\n");break;case"pre":n||(r=l.subParser("makeMarkdown.pre")(t,e)+"\n\n");break;case"table":n||(r=l.subParser("makeMarkdown.table")(t,e)+"\n\n");break;case"code":r=l.subParser("makeMarkdown.codeSpan")(t,e);break;case"em":case"i":r=l.subParser("makeMarkdown.emphasis")(t,e);break;case"strong":case"b":r=l.subParser("makeMarkdown.strong")(t,e);break;case"del":r=l.subParser("makeMarkdown.strikethrough")(t,e);break;case"a":r=l.subParser("makeMarkdown.links")(t,e);break;case"img":r=l.subParser("makeMarkdown.image")(t,e);break;default:r=t.outerHTML+"\n\n"}return r})),l.subParser("makeMarkdown.paragraph",(function(t,e){"use strict";var n="";if(t.hasChildNodes())for(var r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);return n=n.trim()})),l.subParser("makeMarkdown.pre",(function(t,e){"use strict";var n=t.getAttribute("prenum");return"<pre>"+e.preList[n]+"</pre>"})),l.subParser("makeMarkdown.strikethrough",(function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="~~";for(var r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);n+="~~"}return n})),l.subParser("makeMarkdown.strong",(function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="**";for(var r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e);n+="**"}return n})),l.subParser("makeMarkdown.table",(function(t,e){"use strict";var i,n,r="",o=[[],[]],h=t.querySelectorAll("thead>tr>th"),c=t.querySelectorAll("tbody>tr");for(i=0;i<h.length;++i){var f=l.subParser("makeMarkdown.tableCell")(h[i],e),d="---";if(h[i].hasAttribute("style"))switch(h[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":d=":---";break;case"text-align:right;":d="---:";break;case"text-align:center;":d=":---:"}o[0][i]=f.trim(),o[1][i]=d}for(i=0;i<c.length;++i){var m=o.push([])-1,v=c[i].getElementsByTagName("td");for(n=0;n<h.length;++n){var y=" ";void 0!==v[n]&&(y=l.subParser("makeMarkdown.tableCell")(v[n],e)),o[m].push(y)}}var _=3;for(i=0;i<o.length;++i)for(n=0;n<o[i].length;++n){var x=o[i][n].length;x>_&&(_=x)}for(i=0;i<o.length;++i){for(n=0;n<o[i].length;++n)1===i?":"===o[i][n].slice(-1)?o[i][n]=l.helper.padEnd(o[i][n].slice(-1),_-1,"-")+":":o[i][n]=l.helper.padEnd(o[i][n],_,"-"):o[i][n]=l.helper.padEnd(o[i][n],_);r+="| "+o[i].join(" | ")+" |\n"}return r.trim()})),l.subParser("makeMarkdown.tableCell",(function(t,e){"use strict";var n="";if(!t.hasChildNodes())return"";for(var r=t.childNodes,o=r.length,i=0;i<o;++i)n+=l.subParser("makeMarkdown.node")(r[i],e,!0);return n.trim()})),l.subParser("makeMarkdown.txt",(function(t){"use strict";var e=t.nodeValue;return e=(e=e.replace(/ +/g," ")).replace(/¨NBSP;/g," "),e=(e=(e=(e=(e=(e=(e=(e=(e=l.helper.unescapeHTMLEntities(e)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}));void 0===(r=function(){"use strict";return l}.call(e,n,e,t))||(t.exports=r)}).call(this)},4160:function(t,e,n){var r=n(377),o=n(1089),l=n(238),h=Math.ceil,c=Math.max;t.exports=function(t,e,n){e=(n?o(t,e,n):void 0===e)?1:c(l(e),0);var f=null==t?0:t.length;if(!f||e<1)return[];for(var d=0,m=0,v=Array(h(f/e));d<f;)v[m++]=r(t,d,d+=e);return v}},4161:function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var l=t[e];l&&(o[r++]=l)}return o}},4162:function(t,e,n){var r=n(658),o=n(357),l=n(656),h=n(312);t.exports=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],c=t;c--;)e[c-1]=arguments[c];return r(h(n)?l(n):[n],o(e,1))}},4163:function(t,e,n){var r=n(672),o=n(357),l=n(170),h=n(358),c=l((function(t,e){return h(t)?r(t,o(e,1,h,!0)):[]}));t.exports=c},4164:function(t,e,n){var r=n(672),o=n(357),l=n(263),h=n(170),c=n(358),f=n(400),d=h((function(t,e){var n=f(e);return c(n)&&(n=void 0),c(t)?r(t,o(e,1,c,!0),l(n,2)):[]}));t.exports=d},4165:function(t,e,n){var r=n(672),o=n(357),l=n(170),h=n(358),c=n(400),f=l((function(t,e){var n=c(e);return h(n)&&(n=void 0),h(t)?r(t,o(e,1,h,!0),void 0,n):[]}));t.exports=f},4166:function(t,e,n){var r=n(377),o=n(238);t.exports=function(t,e,n){var l=null==t?0:t.length;return l?(e=n||void 0===e?1:o(e),r(t,e<0?0:e,l)):[]}},4167:function(t,e,n){var r=n(377),o=n(238);t.exports=function(t,e,n){var l=null==t?0:t.length;return l?(e=n||void 0===e?1:o(e),r(t,0,(e=l-e)<0?0:e)):[]}},4168:function(t,e,n){var r=n(263),o=n(765);t.exports=function(t,e){return t&&t.length?o(t,r(e,3),!0,!0):[]}},4169:function(t,e,n){var r=n(263),o=n(765);t.exports=function(t,e){return t&&t.length?o(t,r(e,3),!0):[]}},4170:function(t,e,n){var r=n(4171),o=n(1089);t.exports=function(t,e,n,l){var h=null==t?0:t.length;return h?(n&&"number"!=typeof n&&o(t,e,n)&&(n=0,l=h),r(t,e,n,l)):[]}},4171:function(t,e,n){var r=n(238),o=n(4172);t.exports=function(t,e,n,l){var h=t.length;for((n=r(n))<0&&(n=-n>h?0:h+n),(l=void 0===l||l>h?h:r(l))<0&&(l+=h),l=n>l?0:o(l);n<l;)t[n++]=e;return t}},4172:function(t,e,n){var r=n(4173),o=n(238);t.exports=function(t){return t?r(o(t),0,4294967295):0}},4173:function(t,e){t.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},4174:function(t,e,n){var r=n(759),o=n(263),l=n(238),h=Math.max;t.exports=function(t,e,n){var c=null==t?0:t.length;if(!c)return-1;var f=null==n?0:l(n);return f<0&&(f=h(c+f,0)),r(t,o(e,3),f)}},4175:function(t,e,n){var r=n(759),o=n(263),l=n(238),h=Math.max,c=Math.min;t.exports=function(t,e,n){var f=null==t?0:t.length;if(!f)return-1;var d=f-1;return void 0!==n&&(d=l(n),d=n<0?h(f+d,0):c(d,f-1)),r(t,o(e,3),d,!0)}},4176:function(t,e,n){t.exports=n(1802)},4177:function(t,e,n){var r=n(357),o=1/0;t.exports=function(t){return(null==t?0:t.length)?r(t,o):[]}},4178:function(t,e,n){var r=n(357),o=n(238);t.exports=function(t,e){return(null==t?0:t.length)?(e=void 0===e?1:o(e),r(t,e)):[]}},4179:function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r}},418:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},4180:function(t,e,n){var r=n(1085),o=n(238),l=Math.max;t.exports=function(t,e,n){var h=null==t?0:t.length;if(!h)return-1;var c=null==n?0:o(n);return c<0&&(c=l(h+c,0)),r(t,e,c)}},4181:function(t,e,n){var r=n(377);t.exports=function(t){return(null==t?0:t.length)?r(t,0,-1):[]}},4182:function(t,e,n){var r=n(376),o=n(1091),l=n(170),h=n(1092),c=l((function(t){var e=r(t,h);return e.length&&e[0]===t[0]?o(e):[]}));t.exports=c},4183:function(t,e,n){var r=n(376),o=n(1091),l=n(263),h=n(170),c=n(1092),f=n(400),d=h((function(t){var e=f(t),n=r(t,c);return e===f(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?o(n,l(e,2)):[]}));t.exports=d},4184:function(t,e,n){var r=n(376),o=n(1091),l=n(170),h=n(1092),c=n(400),f=l((function(t){var e=c(t),n=r(t,h);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?o(n,void 0,e):[]}));t.exports=f},4185:function(t,e){var n=Array.prototype.join;t.exports=function(t,e){return null==t?"":n.call(t,e)}},4186:function(t,e,n){var r=n(759),o=n(1628),l=n(4187),h=n(238),c=Math.max,f=Math.min;t.exports=function(t,e,n){var d=null==t?0:t.length;if(!d)return-1;var m=d;return void 0!==n&&(m=(m=h(n))<0?c(d+m,0):f(m,d-1)),e==e?l(t,e,m):r(t,o,m,!0)}},4187:function(t,e){t.exports=function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}},4188:function(t,e,n){var r=n(4189),o=n(238);t.exports=function(t,e){return t&&t.length?r(t,o(e)):void 0}},4189:function(t,e,n){var r=n(447);t.exports=function(t,e){var n=t.length;if(n)return r(e+=e<0?n:0,n)?t[e]:void 0}},4190:function(t,e,n){var r=n(170)(n(1803));t.exports=r},4191:function(t,e){t.exports=function(t,e,n,r){for(var o=n-1,l=t.length;++o<l;)if(r(t[o],e))return o;return-1}},4192:function(t,e,n){var r=n(263),o=n(1093);t.exports=function(t,e,n){return t&&t.length&&e&&e.length?o(t,e,r(n,2)):t}},4193:function(t,e,n){var r=n(1093);t.exports=function(t,e,n){return t&&t.length&&e&&e.length?r(t,e,void 0,n):t}},4194:function(t,e,n){var r=n(376),o=n(4195),l=n(1804),h=n(4198),c=n(1640),f=n(447),d=c((function(t,e){var n=null==t?0:t.length,c=o(t,e);return l(t,r(e,(function(t){return f(t,n)?+t:t})).sort(h)),c}));t.exports=d},4195:function(t,e,n){var r=n(1637);t.exports=function(object,t){for(var e=-1,n=t.length,o=Array(n),l=null==object;++e<n;)o[e]=l?void 0:r(object,t[e]);return o}},4196:function(t,e,n){var r=n(762),o=n(400),l=n(4197),h=n(546);t.exports=function(object,path){return path=r(path,object),null==(object=l(object,path))||delete object[h(o(path))]}},4197:function(t,e,n){var r=n(1087),o=n(377);t.exports=function(object,path){return path.length<2?object:r(object,o(path,0,-1))}},4198:function(t,e,n){var r=n(506);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,l=t==t,h=r(t),c=void 0!==e,f=null===e,d=e==e,m=r(e);if(!f&&!m&&!h&&t>e||h&&c&&d&&!f&&!m||o&&c&&d||!n&&d||!l)return 1;if(!o&&!h&&!m&&t<e||m&&n&&l&&!o&&!h||f&&n&&l||!c&&l||!d)return-1}return 0}},4199:function(t,e,n){var r=n(263),o=n(1804);t.exports=function(t,e){var n=[];if(!t||!t.length)return n;var l=-1,h=[],c=t.length;for(e=r(e,3);++l<c;){var f=t[l];e(f,l,t)&&(n.push(f),h.push(l))}return o(t,h),n}},420:function(t,e,n){var r=n(1616),o=n(3937),l=n(3938),h=n(1618),c=n(3952),f=n(1622),d=n(3953),m=n(1625),v=n(1627),y=n(238),_=Math.max;t.exports=function(t,e,n,x,w,M,S,E){var A=2&e;if(!A&&"function"!=typeof t)throw new TypeError("Expected a function");var T=x?x.length:0;if(T||(e&=-97,x=w=void 0),S=void 0===S?S:_(y(S),0),E=void 0===E?E:y(E),T-=w?w.length:0,64&e){var C=x,P=w;x=w=void 0}var data=A?void 0:f(t),R=[t,e,n,x,w,C,P,M,S,E];if(data&&d(R,data),t=R[0],e=R[1],n=R[2],x=R[3],w=R[4],!(E=R[9]=void 0===R[9]?A?0:t.length:_(R[9]-T,0))&&24&e&&(e&=-25),e&&1!=e)I=8==e||16==e?l(t,e,E):32!=e&&33!=e||w.length?h.apply(void 0,R):c(t,e,n,x);else var I=o(t,e,n);return v((data?r:m)(I,R),t,e)}},4200:function(t,e){var n=Array.prototype.reverse;t.exports=function(t){return null==t?t:n.call(t)}},4201:function(t,e,n){var r=n(377),o=n(1089),l=n(238);t.exports=function(t,e,n){var h=null==t?0:t.length;return h?(n&&"number"!=typeof n&&o(t,e,n)?(e=0,n=h):(e=null==e?0:l(e),n=void 0===n?h:l(n)),r(t,e,n)):[]}},4202:function(t,e,n){var r=n(766);t.exports=function(t,e){return r(t,e)}},4203:function(t,e,n){var r=n(263),o=n(1094);t.exports=function(t,e,n){return o(t,e,r(n,2))}},4204:function(t,e,n){var r=n(766),o=n(495);t.exports=function(t,e){var n=null==t?0:t.length;if(n){var l=r(t,e);if(l<n&&o(t[l],e))return l}return-1}},4205:function(t,e,n){var r=n(766);t.exports=function(t,e){return r(t,e,!0)}},4206:function(t,e,n){var r=n(263),o=n(1094);t.exports=function(t,e,n){return o(t,e,r(n,2),!0)}},4207:function(t,e,n){var r=n(766),o=n(495);t.exports=function(t,e){if(null==t?0:t.length){var n=r(t,e,!0)-1;if(o(t[n],e))return n}return-1}},4208:function(t,e,n){var r=n(1805);t.exports=function(t){return t&&t.length?r(t):[]}},4209:function(t,e,n){var r=n(263),o=n(1805);t.exports=function(t,e){return t&&t.length?o(t,r(e,2)):[]}},4210:function(t,e,n){var r=n(377);t.exports=function(t){var e=null==t?0:t.length;return e?r(t,1,e):[]}},4211:function(t,e,n){var r=n(377),o=n(238);t.exports=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:o(e),r(t,0,e<0?0:e)):[]}},4212:function(t,e,n){var r=n(377),o=n(238);t.exports=function(t,e,n){var l=null==t?0:t.length;return l?(e=n||void 0===e?1:o(e),r(t,(e=l-e)<0?0:e,l)):[]}},4213:function(t,e,n){var r=n(263),o=n(765);t.exports=function(t,e){return t&&t.length?o(t,r(e,3),!1,!0):[]}},4214:function(t,e,n){var r=n(263),o=n(765);t.exports=function(t,e){return t&&t.length?o(t,r(e,3)):[]}},4215:function(t,e,n){var r=n(357),o=n(170),l=n(508),h=n(358),c=o((function(t){return l(r(t,1,h,!0))}));t.exports=c},4216:function(t,e,n){var r=n(1347),o=n(1623),l=n(1086),h=r&&1/l(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=h},4217:function(t,e,n){var r=n(357),o=n(263),l=n(170),h=n(508),c=n(358),f=n(400),d=l((function(t){var e=f(t);return c(e)&&(e=void 0),h(r(t,1,c,!0),o(e,2))}));t.exports=d},4218:function(t,e,n){var r=n(357),o=n(170),l=n(508),h=n(358),c=n(400),f=o((function(t){var e=c(t);return e="function"==typeof e?e:void 0,l(r(t,1,h,!0),void 0,e)}));t.exports=f},4219:function(t,e,n){var r=n(508);t.exports=function(t){return t&&t.length?r(t):[]}},4220:function(t,e,n){var r=n(263),o=n(508);t.exports=function(t,e){return t&&t.length?o(t,r(e,2)):[]}},4221:function(t,e,n){var r=n(508);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?r(t,void 0,e):[]}},4222:function(t,e,n){var r=n(672),o=n(170),l=n(358),h=o((function(t,e){return l(t)?r(t,e):[]}));t.exports=h},4223:function(t,e,n){var r=n(657),o=n(170),l=n(1096),h=n(358),c=o((function(t){return l(r(t,h))}));t.exports=c},4224:function(t,e,n){var r=n(657),o=n(263),l=n(170),h=n(1096),c=n(358),f=n(400),d=l((function(t){var e=f(t);return c(e)&&(e=void 0),h(r(t,c),o(e,2))}));t.exports=d},4225:function(t,e,n){var r=n(657),o=n(170),l=n(1096),h=n(358),c=n(400),f=o((function(t){var e=c(t);return e="function"==typeof e?e:void 0,l(r(t,h),void 0,e)}));t.exports=f},4226:function(t,e,n){var r=n(170)(n(1095));t.exports=r},4227:function(t,e,n){var r=n(722),o=n(1807);t.exports=function(t,e){return o(t||[],e||[],r)}},4228:function(t,e,n){var r=n(4229),o=n(1807);t.exports=function(t,e){return o(t||[],e||[],r)}},4229:function(t,e,n){var r=n(722),o=n(762),l=n(447),h=n(354),c=n(546);t.exports=function(object,path,t,e){if(!h(object))return object;for(var n=-1,f=(path=o(path,object)).length,d=f-1,m=object;null!=m&&++n<f;){var v=c(path[n]),y=t;if("__proto__"===v||"constructor"===v||"prototype"===v)return object;if(n!=d){var _=m[v];void 0===(y=e?e(_,v,m):void 0)&&(y=h(_)?_:l(path[n+1])?[]:{})}r(m,v,y),m=m[v]}return object}},4230:function(t,e,n){var r=n(170),o=n(1806),l=r((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,o(t,n)}));t.exports=l},4293:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(){return l=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var e in source)Object.prototype.hasOwnProperty.call(source,e)&&(t[e]=source[e])}return t},l.apply(this,arguments)}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},e=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(source).filter((function(t){return Object.getOwnPropertyDescriptor(source,t).enumerable})))),e.forEach((function(e){o(t,e,source[e])}))}return t}function c(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function f(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(e),n.d(e,"MultiDrag",(function(){return Pe})),n.d(e,"Sortable",(function(){return Kt})),n.d(e,"Swap",(function(){return ye}));function d(pattern){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(pattern)}var m=d(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),v=d(/Edge/i),y=d(/firefox/i),_=d(/safari/i)&&!d(/chrome/i)&&!d(/android/i),x=d(/iP(ad|od|hone)/i),w=d(/chrome/i)&&d(/android/i),M={capture:!1,passive:!1};function S(t,e,n){t.addEventListener(e,n,!m&&M)}function E(t,e,n){t.removeEventListener(e,n,!m&&M)}function A(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function T(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function C(t,e,n,r){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&A(t,e):A(t,e))||r&&t===n)return t;if(t===n)break}while(t=T(t))}return null}var P,R=/\s+/g;function I(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(R," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(R," ")}}function k(t,e,n){var style=t&&t.style;if(style){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in style||-1!==e.indexOf("webkit")||(e="-webkit-"+e),style[e]=n+("string"==typeof n?"":"px")}}function D(t,e){var n="";if("string"==typeof t)n=t;else do{var r=k(t,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function L(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function F(){var t=document.scrollingElement;return t||document.documentElement}function O(t,e,n,r,o){if(t.getBoundingClientRect||t===window){var l,h,c,f,d,v,y;if(t!==window&&t!==F()?(h=(l=t.getBoundingClientRect()).top,c=l.left,f=l.bottom,d=l.right,v=l.height,y=l.width):(h=0,c=0,f=window.innerHeight,d=window.innerWidth,v=window.innerHeight,y=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!m))do{if(o&&o.getBoundingClientRect&&("none"!==k(o,"transform")||n&&"static"!==k(o,"position"))){var _=o.getBoundingClientRect();h-=_.top+parseInt(k(o,"border-top-width")),c-=_.left+parseInt(k(o,"border-left-width")),f=h+l.height,d=c+l.width;break}}while(o=o.parentNode);if(r&&t!==window){var x=D(o||t),w=x&&x.a,M=x&&x.d;x&&(f=(h/=M)+(v/=M),d=(c/=w)+(y/=w))}return{top:h,left:c,bottom:f,right:d,width:y,height:v}}}function N(t,e,n){for(var r=j(t,!0),o=O(t)[e];r;){var l=O(r)[n];if(!("top"===n||"left"===n?o>=l:o<=l))return r;if(r===F())break;r=j(r,!1)}return!1}function B(t,e,n){for(var r=0,i=0,o=t.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==Kt.ghost&&o[i]!==Kt.dragged&&C(o[i],n.draggable,t,!1)){if(r===e)return o[i];r++}i++}return null}function U(t,e){for(var n=t.lastElementChild;n&&(n===Kt.ghost||"none"===k(n,"display")||e&&!A(n,e));)n=n.previousElementSibling;return n||null}function z(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Kt.clone||e&&!A(t,e)||n++;return n}function V(t){var e=0,n=0,r=F();if(t)do{var o=D(t),l=o.a,h=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*h}while(t!==r&&(t=t.parentNode));return[e,n]}function j(t,e){if(!t||!t.getBoundingClientRect)return F();var n=t,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=k(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return F();if(r||e)return n;r=!0}}}while(n=n.parentNode);return F()}function H(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function G(t,e){return function(){if(!P){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),P=setTimeout((function(){P=void 0}),e)}}}function W(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function X(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Y(t,rect){k(t,"position","absolute"),k(t,"top",rect.top),k(t,"left",rect.left),k(t,"width",rect.width),k(t,"height",rect.height)}function Z(t){k(t,"position",""),k(t,"top",""),k(t,"left",""),k(t,"width",""),k(t,"height","")}var K="Sortable"+(new Date).getTime();function $(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==k(t,"display")&&t!==Kt.ghost){e.push({target:t,rect:O(t)});var n=h({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=D(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var o=!1,l=0;e.forEach((function(t){var time=0,e=t.target,n=e.fromRect,h=O(e),c=e.prevFromRect,f=e.prevToRect,d=t.rect,m=D(e,!0);m&&(h.top-=m.f,h.left-=m.e),e.toRect=h,e.thisAnimationDuration&&H(c,h)&&!H(n,h)&&(d.top-h.top)/(d.left-h.left)==(n.top-h.top)/(n.left-h.left)&&(time=function(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}(d,c,f,r.options)),H(h,n)||(e.prevFromRect=n,e.prevToRect=h,time||(time=r.options.animation),r.animate(e,d,h,time)),time&&(o=!0,l=Math.max(l,time),clearTimeout(e.animationResetTimer),e.animationResetTimer=setTimeout((function(){e.animationTime=0,e.prevFromRect=null,e.fromRect=null,e.prevToRect=null,e.thisAnimationDuration=null}),time),e.thisAnimationDuration=time)})),clearTimeout(t),o?t=setTimeout((function(){"function"==typeof n&&n()}),l):"function"==typeof n&&n(),e=[]},animate:function(t,e,n,r){if(r){k(t,"transition",""),k(t,"transform","");var o=D(this.el),l=o&&o.a,h=o&&o.d,c=(e.left-n.left)/(l||1),f=(e.top-n.top)/(h||1);t.animatingX=!!c,t.animatingY=!!f,k(t,"transform","translate3d("+c+"px,"+f+"px,0)"),function(t){t.offsetWidth}(t),k(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),k(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){k(t,"transition",""),k(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),r)}}}}var J=[],Q={initializeByDefault:!0},tt={mount:function(t){for(var option in Q)Q.hasOwnProperty(option)&&!(option in t)&&(t[option]=Q[option]);J.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";J.forEach((function(r){e[r.pluginName]&&(e[r.pluginName][o]&&e[r.pluginName][o](h({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](h({sortable:e},n)))}))},initializePlugins:function(t,e,n,r){for(var option in J.forEach((function(r){var o=r.pluginName;if(t.options[o]||r.initializeByDefault){var h=new r(t,e,t.options);h.sortable=t,h.options=t.options,t[o]=h,l(n,h.defaults)}})),t.options)if(t.options.hasOwnProperty(option)){var o=this.modifyOption(t,option,t.options[option]);void 0!==o&&(t.options[option]=o)}},getEventProperties:function(t,e){var n={};return J.forEach((function(r){"function"==typeof r.eventProperties&&l(n,r.eventProperties.call(e[r.pluginName],t))})),n},modifyOption:function(t,e,n){var r;return J.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(r=o.optionListeners[e].call(t[o.pluginName],n))})),r}};function et(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,l=t.cloneEl,c=t.toEl,f=t.fromEl,d=t.oldIndex,y=t.newIndex,_=t.oldDraggableIndex,x=t.newDraggableIndex,w=t.originalEvent,M=t.putSortable,S=t.extraEventProperties;if(e=e||n&&n[K]){var E,A=e.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||m||v?(E=document.createEvent("Event")).initEvent(r,!0,!0):E=new CustomEvent(r,{bubbles:!0,cancelable:!0}),E.to=c||n,E.from=f||n,E.item=o||n,E.clone=l,E.oldIndex=d,E.newIndex=y,E.oldDraggableIndex=_,E.newDraggableIndex=x,E.originalEvent=w,E.pullMode=M?M.lastPutMode:void 0;var C=h({},S,tt.getEventProperties(r,e));for(var option in C)E[option]=C[option];n&&n.dispatchEvent(E),A[T]&&A[T].call(e,E)}}var nt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,data=c(n,["evt"]);tt.pluginEvent.bind(Kt)(t,e,h({dragEl:st,parentEl:ot,ghostEl:at,rootEl:lt,nextEl:ht,lastDownEl:ut,cloneEl:ct,cloneHidden:ft,dragStarted:At,putSortable:_t,activeSortable:Kt.active,originalEvent:r,oldIndex:pt,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt,hideGhostForTarget:qt,unhideGhostForTarget:Xt,cloneNowHidden:function(){ft=!0},cloneNowShown:function(){ft=!1},dispatchSortableEvent:function(t){it({sortable:e,name:t,originalEvent:r})}},data))};function it(t){et(h({putSortable:_t,cloneEl:ct,targetEl:st,rootEl:lt,oldIndex:pt,oldDraggableIndex:gt,newIndex:mt,newDraggableIndex:vt},t))}var st,ot,at,lt,ht,ut,ct,ft,pt,mt,gt,vt,yt,_t,bt,xt,wt,Mt,St,Et,At,Tt,Ct,Pt,Rt,It=!1,kt=!1,Dt=[],Lt=!1,Ft=!1,Ot=[],Nt=!1,Bt=[],Ut="undefined"!=typeof document,zt=x,Vt=v||m?"cssFloat":"float",jt=Ut&&!w&&!x&&"draggable"in document.createElement("div"),Ht=function(){if(Ut){if(m)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Gt=function(t,e){var n=k(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=B(t,0,e),l=B(t,1,e),h=o&&k(o),c=l&&k(l),f=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+O(o).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+O(l).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&h.float&&"none"!==h.float){var m="left"===h.float?"left":"right";return!l||"both"!==c.clear&&c.clear!==m?"horizontal":"vertical"}return o&&("block"===h.display||"flex"===h.display||"table"===h.display||"grid"===h.display||f>=r&&"none"===n[Vt]||l&&"none"===n[Vt]&&f+d>r)?"vertical":"horizontal"},Wt=function(t){function e(t,n){return function(r,o,l,h){var c=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==t&&(n||c))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(r,o,l,h),n)(r,o,l,h);var f=(n?r:o).options.group.name;return!0===t||"string"==typeof t&&t===f||t.join&&t.indexOf(f)>-1}}var n={},o=t.group;o&&"object"==r(o)||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},qt=function(){!Ht&&at&&k(at,"display","none")},Xt=function(){!Ht&&at&&k(at,"display","")};Ut&&document.addEventListener("click",(function(t){if(kt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),kt=!1,!1}),!0);var Yt=function(t){if(st){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,o=t.clientY,Dt.some((function(t){if(!U(t)){var rect=O(t),e=t[K].options.emptyInsertThreshold,n=r>=rect.left-e&&r<=rect.right+e,h=o>=rect.top-e&&o<=rect.bottom+e;return e&&n&&h?l=t:void 0}})),l);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[K]._onDragOver(n)}}var r,o,l},Zt=function(t){st&&st.parentNode[K]._isOutsideThisEl(t.target)};function Kt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=l({},e),t[K]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Kt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in tt.initializePlugins(this,t,n),n)!(r in e)&&(e[r]=n[r]);for(var o in Wt(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&jt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(t,"pointerdown",this._onTapStart):(S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),l(this,$())}function $t(t,e,n,r,o,l,h,c){var f,d,y=t[K],_=y.options.onMove;return!window.CustomEvent||m||v?(f=document.createEvent("Event")).initEvent("move",!0,!0):f=new CustomEvent("move",{bubbles:!0,cancelable:!0}),f.to=e,f.from=t,f.dragged=n,f.draggedRect=r,f.related=o||e,f.relatedRect=l||O(e),f.willInsertAfter=c,f.originalEvent=h,t.dispatchEvent(f),_&&(d=_.call(y,f,h)),d}function Jt(t){t.draggable=!1}function Qt(){Nt=!1}function te(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function ee(t){return setTimeout(t,0)}function ne(t){return clearTimeout(t)}Kt.prototype={constructor:Kt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Tt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,st):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,l=t.type,h=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,c=(h||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,filter=r.filter;if(function(t){Bt.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var r=e[n];r.checked&&Bt.push(r)}}(n),!st&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||r.disabled||f.isContentEditable||(c=C(c,r.draggable,n,!1))&&c.animated||ut===c)){if(pt=z(c),gt=z(c,r.draggable),"function"==typeof filter){if(filter.call(this,t,c,this))return it({sortable:e,rootEl:f,name:"filter",targetEl:c,toEl:n,fromEl:n}),nt("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(filter&&(filter=filter.split(",").some((function(r){if(r=C(f,r.trim(),n,!1))return it({sortable:e,rootEl:r,name:"filter",targetEl:c,fromEl:n,toEl:n}),nt("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());r.handle&&!C(f,r.handle,n,!1)||this._prepareDragStart(t,h,c)}}},_prepareDragStart:function(t,e,n){var r,o=this,l=o.el,h=o.options,c=l.ownerDocument;if(n&&!st&&n.parentNode===l){var f=O(n);if(lt=l,ot=(st=n).parentNode,ht=st.nextSibling,ut=n,yt=h.group,Kt.dragged=st,bt={target:st,clientX:(e||t).clientX,clientY:(e||t).clientY},St=bt.clientX-f.left,Et=bt.clientY-f.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,st.style["will-change"]="all",r=function(){nt("delayEnded",o,{evt:t}),Kt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!y&&o.nativeDraggable&&(st.draggable=!0),o._triggerDragStart(t,e),it({sortable:o,name:"choose",originalEvent:t}),I(st,h.chosenClass,!0))},h.ignore.split(",").forEach((function(t){L(st,t.trim(),Jt)})),S(c,"dragover",Yt),S(c,"mousemove",Yt),S(c,"touchmove",Yt),S(c,"mouseup",o._onDrop),S(c,"touchend",o._onDrop),S(c,"touchcancel",o._onDrop),y&&this.nativeDraggable&&(this.options.touchStartThreshold=4,st.draggable=!0),nt("delayStart",this,{evt:t}),!h.delay||h.delayOnTouchOnly&&!e||this.nativeDraggable&&(v||m))r();else{if(Kt.eventCanceled)return void this._onDrop();S(c,"mouseup",o._disableDelayedDrag),S(c,"touchend",o._disableDelayedDrag),S(c,"touchcancel",o._disableDelayedDrag),S(c,"mousemove",o._delayedDragTouchMoveHandler),S(c,"touchmove",o._delayedDragTouchMoveHandler),h.supportPointer&&S(c,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,h.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){st&&Jt(st),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._disableDelayedDrag),E(t,"touchend",this._disableDelayedDrag),E(t,"touchcancel",this._disableDelayedDrag),E(t,"mousemove",this._delayedDragTouchMoveHandler),E(t,"touchmove",this._delayedDragTouchMoveHandler),E(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):S(document,e?"touchmove":"mousemove",this._onTouchMove):(S(st,"dragend",this),S(lt,"dragstart",this._onDragStart));try{document.selection?ee((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(It=!1,lt&&st){nt("dragStarted",this,{evt:e}),this.nativeDraggable&&S(document,"dragover",Zt);var n=this.options;!t&&I(st,n.dragClass,!1),I(st,n.ghostClass,!0),Kt.active=this,t&&this._appendGhost(),it({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(xt){this._lastX=xt.clientX,this._lastY=xt.clientY,qt();for(var t=document.elementFromPoint(xt.clientX,xt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(xt.clientX,xt.clientY))!==e;)e=t;if(st.parentNode[K]._isOutsideThisEl(t),e)do{if(e[K]){if(e[K]._onDragOver({clientX:xt.clientX,clientY:xt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Xt()}},_onTouchMove:function(t){if(bt){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,l=at&&D(at,!0),h=at&&l&&l.a,c=at&&l&&l.d,f=zt&&Rt&&V(Rt),d=(o.clientX-bt.clientX+r.x)/(h||1)+(f?f[0]-Ot[0]:0)/(h||1),m=(o.clientY-bt.clientY+r.y)/(c||1)+(f?f[1]-Ot[1]:0)/(c||1);if(!Kt.active&&!It){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(at){l?(l.e+=d-(wt||0),l.f+=m-(Mt||0)):l={a:1,b:0,c:0,d:1,e:d,f:m};var v="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");k(at,"webkitTransform",v),k(at,"mozTransform",v),k(at,"msTransform",v),k(at,"transform",v),wt=d,Mt=m,xt=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!at){var t=this.options.fallbackOnBody?document.body:lt,rect=O(st,!0,zt,!0,t),e=this.options;if(zt){for(Rt=t;"static"===k(Rt,"position")&&"none"===k(Rt,"transform")&&Rt!==document;)Rt=Rt.parentNode;Rt!==document.body&&Rt!==document.documentElement?(Rt===document&&(Rt=F()),rect.top+=Rt.scrollTop,rect.left+=Rt.scrollLeft):Rt=F(),Ot=V(Rt)}I(at=st.cloneNode(!0),e.ghostClass,!1),I(at,e.fallbackClass,!0),I(at,e.dragClass,!0),k(at,"transition",""),k(at,"transform",""),k(at,"box-sizing","border-box"),k(at,"margin",0),k(at,"top",rect.top),k(at,"left",rect.left),k(at,"width",rect.width),k(at,"height",rect.height),k(at,"opacity","0.8"),k(at,"position",zt?"absolute":"fixed"),k(at,"zIndex","100000"),k(at,"pointerEvents","none"),Kt.ghost=at,t.appendChild(at),k(at,"transform-origin",St/parseInt(at.style.width)*100+"% "+Et/parseInt(at.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;nt("dragStart",this,{evt:t}),Kt.eventCanceled?this._onDrop():(nt("setupClone",this),Kt.eventCanceled||((ct=X(st)).draggable=!1,ct.style["will-change"]="",this._hideClone(),I(ct,this.options.chosenClass,!1),Kt.clone=ct),n.cloneId=ee((function(){nt("clone",n),Kt.eventCanceled||(n.options.removeCloneOnHide||lt.insertBefore(ct,st),n._hideClone(),it({sortable:n,name:"clone"}))})),!e&&I(st,o.dragClass,!0),e?(kt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(E(document,"mouseup",n._onDrop),E(document,"touchend",n._onDrop),E(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,st)),S(document,"drop",n),k(st,"transform","translateZ(0)")),It=!0,n._dragStartId=ee(n._dragStarted.bind(n,e,t)),S(document,"selectstart",n),At=!0,_&&k(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,r,o,l=this.el,c=t.target,f=this.options,d=f.group,m=Kt.active,v=yt===d,y=f.sort,_=_t||m,x=this,w=!1;if(!Nt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),c=C(c,f.draggable,l,!0),H("dragOver"),Kt.eventCanceled)return w;if(st.contains(t.target)||c.animated&&c.animatingX&&c.animatingY||x._ignoreWhileAnimating===c)return X(!1);if(kt=!1,m&&!f.disabled&&(v?y||(r=!lt.contains(st)):_t===this||(this.lastPutMode=yt.checkPull(this,m,st,t))&&d.checkPut(this,m,st,t))){if(o="vertical"===this._getDirection(t,c),e=O(st),H("dragOverValid"),Kt.eventCanceled)return w;if(r)return ot=lt,G(),this._hideClone(),H("revert"),Kt.eventCanceled||(ht?lt.insertBefore(st,ht):lt.appendChild(st)),X(!0);var M=U(l,f.draggable);if(!M||function(t,e,n){var rect=O(U(n.el,n.options.draggable)),r=10;return e?t.clientX>rect.right+r||t.clientX<=rect.right&&t.clientY>rect.bottom&&t.clientX>=rect.left:t.clientX>rect.right&&t.clientY>rect.top||t.clientX<=rect.right&&t.clientY>rect.bottom+r}(t,o,this)&&!M.animated){if(M===st)return X(!1);if(M&&l===t.target&&(c=M),c&&(n=O(c)),!1!==$t(lt,l,st,e,c,n,t,!!c))return G(),l.appendChild(st),ot=l,Y(),X(!0)}else if(c.parentNode===l){n=O(c);var S,E,A,T=st.parentNode!==l,P=!function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,l=n?t.width:t.height,h=n?e.left:e.top,c=n?e.right:e.bottom,f=n?e.width:e.height;return r===h||o===c||r+l/2===h+f/2}(st.animated&&st.toRect||e,c.animated&&c.toRect||n,o),R=o?"top":"left",D=N(c,"top","top")||N(st,"top","top"),L=D?D.scrollTop:void 0;if(Tt!==c&&(E=n[R],Lt=!1,Ft=!P&&f.invertSwap||T),S=function(t,e,n,r,o,l,h,c){var f=r?t.clientY:t.clientX,d=r?n.height:n.width,m=r?n.top:n.left,v=r?n.bottom:n.right,y=!1;if(!h)if(c&&Pt<d*o){if(!Lt&&(1===Ct?f>m+d*l/2:f<v-d*l/2)&&(Lt=!0),Lt)y=!0;else if(1===Ct?f<m+Pt:f>v-Pt)return-Ct}else if(f>m+d*(1-o)/2&&f<v-d*(1-o)/2)return function(t){return z(st)<z(t)?1:-1}(e);if((y=y||h)&&(f<m+d*l/2||f>v-d*l/2))return f>m+d/2?1:-1;return 0}(t,c,n,o,P?1:f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,Ft,Tt===c),0!==S){var F=z(st);do{F-=S,A=ot.children[F]}while(A&&("none"===k(A,"display")||A===at))}if(0===S||A===c)return X(!1);Tt=c,Ct=S;var B=c.nextElementSibling,V=!1,j=$t(lt,l,st,e,c,n,t,V=1===S);if(!1!==j)return 1!==j&&-1!==j||(V=1===j),Nt=!0,setTimeout(Qt,30),G(),V&&!B?l.appendChild(st):c.parentNode.insertBefore(st,V?B:c),D&&W(D,0,L-D.scrollTop),ot=st.parentNode,void 0===E||Ft||(Pt=Math.abs(E-O(c)[R])),Y(),X(!0)}if(l.contains(st))return X(!1)}return!1}function H(f,d){nt(f,x,h({evt:t,isOwner:v,axis:o?"vertical":"horizontal",revert:r,dragRect:e,targetRect:n,canSort:y,fromSortable:_,target:c,completed:X,onMove:function(n,r){return $t(lt,l,st,e,n,O(n),t,r)},changed:Y},d))}function G(){H("dragOverAnimationCapture"),x.captureAnimationState(),x!==_&&_.captureAnimationState()}function X(e){return H("dragOverCompleted",{insertion:e}),e&&(v?m._hideClone():m._showClone(x),x!==_&&(I(st,_t?_t.options.ghostClass:m.options.ghostClass,!1),I(st,f.ghostClass,!0)),_t!==x&&x!==Kt.active?_t=x:x===Kt.active&&_t&&(_t=null),_===x&&(x._ignoreWhileAnimating=c),x.animateAll((function(){H("dragOverAnimationComplete"),x._ignoreWhileAnimating=null})),x!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(c===st&&!st.animated||c===l&&!c.animated)&&(Tt=null),f.dragoverBubble||t.rootEl||c===document||(st.parentNode[K]._isOutsideThisEl(t.target),!e&&Yt(t)),!f.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function Y(){mt=z(st),vt=z(st,f.draggable),it({sortable:x,name:"change",toEl:l,newIndex:mt,newDraggableIndex:vt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",Yt),E(document,"mousemove",Yt),E(document,"touchmove",Yt)},_offUpEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._onDrop),E(t,"touchend",this._onDrop),E(t,"pointerup",this._onDrop),E(t,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;mt=z(st),vt=z(st,n.draggable),nt("drop",this,{evt:t}),ot=st&&st.parentNode,mt=z(st),vt=z(st,n.draggable),Kt.eventCanceled||(It=!1,Ft=!1,Lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ne(this.cloneId),ne(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_&&k(document.body,"user-select",""),k(st,"transform",""),t&&(At&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),at&&at.parentNode&&at.parentNode.removeChild(at),(lt===ot||_t&&"clone"!==_t.lastPutMode)&&ct&&ct.parentNode&&ct.parentNode.removeChild(ct),st&&(this.nativeDraggable&&E(st,"dragend",this),Jt(st),st.style["will-change"]="",At&&!It&&I(st,_t?_t.options.ghostClass:this.options.ghostClass,!1),I(st,this.options.chosenClass,!1),it({sortable:this,name:"unchoose",toEl:ot,newIndex:null,newDraggableIndex:null,originalEvent:t}),lt!==ot?(mt>=0&&(it({rootEl:ot,name:"add",toEl:ot,fromEl:lt,originalEvent:t}),it({sortable:this,name:"remove",toEl:ot,originalEvent:t}),it({rootEl:ot,name:"sort",toEl:ot,fromEl:lt,originalEvent:t}),it({sortable:this,name:"sort",toEl:ot,originalEvent:t})),_t&&_t.save()):mt!==pt&&mt>=0&&(it({sortable:this,name:"update",toEl:ot,originalEvent:t}),it({sortable:this,name:"sort",toEl:ot,originalEvent:t})),Kt.active&&(null!=mt&&-1!==mt||(mt=pt,vt=gt),it({sortable:this,name:"end",toEl:ot,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){nt("nulling",this),lt=st=ot=at=ht=ct=ut=ft=bt=xt=At=mt=vt=pt=gt=Tt=Ct=_t=yt=Kt.dragged=Kt.ghost=Kt.clone=Kt.active=null,Bt.forEach((function(t){t.checked=!0})),Bt.length=wt=Mt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":st&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)C(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||te(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach((function(t,i){var r=n.children[i];C(r,this.options.draggable,n,!1)&&(e[t]=r)}),this),t.forEach((function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return C(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var r=tt.modifyOption(this,t,e);n[t]=void 0!==r?r:e,"group"===t&&Wt(n)},destroy:function(){nt("destroy",this);var t=this.el;t[K]=null,E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart),E(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Dt.splice(Dt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ft){if(nt("hideClone",this),Kt.eventCanceled)return;k(ct,"display","none"),this.options.removeCloneOnHide&&ct.parentNode&&ct.parentNode.removeChild(ct),ft=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(ft){if(nt("showClone",this),Kt.eventCanceled)return;lt.contains(st)&&!this.options.group.revertClone?lt.insertBefore(ct,st):ht?lt.insertBefore(ct,ht):lt.appendChild(ct),this.options.group.revertClone&&this.animate(st,ct),k(ct,"display",""),ft=!1}}else this._hideClone()}},Ut&&S(document,"touchmove",(function(t){(Kt.active||It)&&t.cancelable&&t.preventDefault()})),Kt.utils={on:S,off:E,css:k,find:L,is:function(t,e){return!!C(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:G,closest:C,toggleClass:I,clone:X,index:z,nextTick:ee,cancelNextTick:ne,detectDirection:Gt,getChild:B},Kt.get=function(element){return element[K]},Kt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Kt.utils=h({},Kt.utils,t.utils)),tt.mount(t)}))},Kt.create=function(t,e){return new Kt(t,e)},Kt.version="1.10.2";var re,ie,se,oe,ae,le,he=[],ue=!1;function ce(){he.forEach((function(t){clearInterval(t.pid)})),he=[]}function fe(){clearInterval(le)}var pe,de=G((function(t,e,n,r){if(e.scroll){var o,l=(t.touches?t.touches[0]:t).clientX,h=(t.touches?t.touches[0]:t).clientY,c=e.scrollSensitivity,f=e.scrollSpeed,d=F(),m=!1;ie!==n&&(ie=n,ce(),re=e.scroll,o=e.scrollFn,!0===re&&(re=j(n,!0)));var v=0,y=re;do{var _=y,rect=O(_),x=rect.top,w=rect.bottom,M=rect.left,S=rect.right,E=rect.width,A=rect.height,T=void 0,C=void 0,P=_.scrollWidth,R=_.scrollHeight,I=k(_),D=_.scrollLeft,L=_.scrollTop;_===d?(T=E<P&&("auto"===I.overflowX||"scroll"===I.overflowX||"visible"===I.overflowX),C=A<R&&("auto"===I.overflowY||"scroll"===I.overflowY||"visible"===I.overflowY)):(T=E<P&&("auto"===I.overflowX||"scroll"===I.overflowX),C=A<R&&("auto"===I.overflowY||"scroll"===I.overflowY));var N=T&&(Math.abs(S-l)<=c&&D+E<P)-(Math.abs(M-l)<=c&&!!D),B=C&&(Math.abs(w-h)<=c&&L+A<R)-(Math.abs(x-h)<=c&&!!L);if(!he[v])for(var i=0;i<=v;i++)he[i]||(he[i]={});he[v].vx==N&&he[v].vy==B&&he[v].el===_||(he[v].el=_,he[v].vx=N,he[v].vy=B,clearInterval(he[v].pid),0==N&&0==B||(m=!0,he[v].pid=setInterval(function(){r&&0===this.layer&&Kt.active._onTouchMove(ae);var e=he[this.layer].vy?he[this.layer].vy*f:0,n=he[this.layer].vx?he[this.layer].vx*f:0;"function"==typeof o&&"continue"!==o.call(Kt.dragged.parentNode[K],n,e,t,ae,he[this.layer].el)||W(he[this.layer].el,n,e)}.bind({layer:v}),24))),v++}while(e.bubbleScroll&&y!==d&&(y=j(y,!1)));ue=m}}),30),me=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,l=t.dispatchSortableEvent,h=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(e){var f=n||o;h();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,m=document.elementFromPoint(d.clientX,d.clientY);c(),f&&!f.el.contains(m)&&(l("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function ge(){}function ve(){}function ye(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;pe=e},dragOverValid:function(t){var e=t.completed,n=t.target,r=t.onMove,o=t.activeSortable,l=t.changed,h=t.cancel;if(o.options.swap){var c=this.sortable.el,f=this.options;if(n&&n!==c){var d=pe;!1!==r(n)?(I(n,f.swapClass,!0),pe=n):pe=null,d&&d!==pe&&I(d,f.swapClass,!1)}l(),e(!0),h()}},drop:function(t){var e=t.activeSortable,n=t.putSortable,r=t.dragEl,o=n||this.sortable,l=this.options;pe&&I(pe,l.swapClass,!1),pe&&(l.swap||n&&n.options.swap)&&r!==pe&&(o.captureAnimationState(),o!==e&&e.captureAnimationState(),function(t,e){var n,r,o=t.parentNode,l=e.parentNode;if(!o||!l||o.isEqualNode(e)||l.isEqualNode(t))return;n=z(t),r=z(e),o.isEqualNode(l)&&n<r&&r++;o.insertBefore(e,o.children[n]),l.insertBefore(t,l.children[r])}(r,pe),o.animateAll(),o!==e&&e.animateAll())},nulling:function(){pe=null}},l(t,{pluginName:"swap",eventProperties:function(){return{swapItem:pe}}})}ge.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=B(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:me},l(ge,{pluginName:"revertOnSpill"}),ve.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:me},l(ve,{pluginName:"removeOnSpill"});var _e,be,xe,we,Me,Se=[],Ee=[],Ae=!1,Te=!1,Ce=!1;function Pe(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?S(document,"pointerup",this._deselectMultiDrag):(S(document,"mouseup",this._deselectMultiDrag),S(document,"touchend",this._deselectMultiDrag)),S(document,"keydown",this._checkKeyDown),S(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,n){var data="";Se.length&&be===t?Se.forEach((function(t,i){data+=(i?", ":"")+t.textContent})):data=n.textContent,e.setData("Text",data)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;xe=e},delayEnded:function(){this.isMultiDrag=~Se.indexOf(xe)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var i=0;i<Se.length;i++)Ee.push(X(Se[i])),Ee[i].sortableIndex=Se[i].sortableIndex,Ee[i].draggable=!1,Ee[i].style["will-change"]="",I(Ee[i],this.options.selectedClass,!1),Se[i]===xe&&I(Ee[i],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.sortable,n=t.rootEl,r=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Se.length&&be===e&&(Re(!0,n),r("clone"),o()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl,r=t.cancel;this.isMultiDrag&&(Re(!1,n),Ee.forEach((function(t){k(t,"display","")})),e(),Me=!1,r())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden),r=t.cancel;this.isMultiDrag&&(Ee.forEach((function(t){k(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),n(),Me=!0,r())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&be&&be.multiDrag._deselectMultiDrag(),Se.forEach((function(t){t.sortableIndex=z(t)})),Se=Se.sort((function(a,b){return a.sortableIndex-b.sortableIndex})),Ce=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Se.forEach((function(t){t!==xe&&k(t,"position","absolute")}));var r=O(xe,!1,!0,!0);Se.forEach((function(t){t!==xe&&Y(t,r)})),Te=!0,Ae=!0}n.animateAll((function(){Te=!1,Ae=!1,e.options.animation&&Se.forEach((function(t){Z(t)})),e.options.sort&&Ie()}))}},dragOver:function(t){var e=t.target,n=t.completed,r=t.cancel;Te&&~Se.indexOf(e)&&(n(!1),r())},revert:function(t){var e=t.fromSortable,n=t.rootEl,r=t.sortable,o=t.dragRect;Se.length>1&&(Se.forEach((function(t){r.addAnimationState({target:t,rect:Te?O(t):o}),Z(t),t.fromRect=o,e.removeAnimationState(t)})),Te=!1,function(t,e){Se.forEach((function(n,i){var r=e.children[n.sortableIndex+(t?Number(i):0)];r?e.insertBefore(n,r):e.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,r=t.insertion,o=t.activeSortable,l=t.parentEl,h=t.putSortable,c=this.options;if(r){if(n&&o._hideClone(),Ae=!1,c.animation&&Se.length>1&&(Te||!n&&!o.options.sort&&!h)){var f=O(xe,!1,!0,!0);Se.forEach((function(t){t!==xe&&(Y(t,f),l.appendChild(t))})),Te=!0}if(!n)if(Te||Ie(),Se.length>1){var d=Me;o._showClone(e),o.options.animation&&!Me&&d&&Ee.forEach((function(t){o.addAnimationState({target:t,rect:we}),t.fromRect=we,t.thisAnimationDuration=null}))}else o._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,r=t.activeSortable;if(Se.forEach((function(t){t.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){we=l({},e);var o=D(xe,!0);we.top-=o.f,we.left-=o.e}},dragOverAnimationComplete:function(){Te&&(Te=!1,Ie())},drop:function(t){var e=t.originalEvent,n=t.rootEl,r=t.parentEl,o=t.sortable,l=t.dispatchSortableEvent,h=t.oldIndex,c=t.putSortable,f=c||this.sortable;if(e){var d=this.options,m=r.children;if(!Ce)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),I(xe,d.selectedClass,!~Se.indexOf(xe)),~Se.indexOf(xe))Se.splice(Se.indexOf(xe),1),_e=null,et({sortable:o,rootEl:n,name:"deselect",targetEl:xe,originalEvt:e});else{if(Se.push(xe),et({sortable:o,rootEl:n,name:"select",targetEl:xe,originalEvt:e}),e.shiftKey&&_e&&o.el.contains(_e)){var v,i,y=z(_e),_=z(xe);if(~y&&~_&&y!==_)for(_>y?(i=y,v=_):(i=_,v=y+1);i<v;i++)~Se.indexOf(m[i])||(I(m[i],d.selectedClass,!0),Se.push(m[i]),et({sortable:o,rootEl:n,name:"select",targetEl:m[i],originalEvt:e}))}else _e=xe;be=f}if(Ce&&this.isMultiDrag){if((r[K].options.sort||r!==n)&&Se.length>1){var x=O(xe),w=z(xe,":not(."+this.options.selectedClass+")");if(!Ae&&d.animation&&(xe.thisAnimationDuration=null),f.captureAnimationState(),!Ae&&(d.animation&&(xe.fromRect=x,Se.forEach((function(t){if(t.thisAnimationDuration=null,t!==xe){var rect=Te?O(t):x;t.fromRect=rect,f.addAnimationState({target:t,rect:rect})}}))),Ie(),Se.forEach((function(t){m[w]?r.insertBefore(t,m[w]):r.appendChild(t),w++})),h===z(xe))){var M=!1;Se.forEach((function(t){t.sortableIndex===z(t)||(M=!0)})),M&&l("update")}Se.forEach((function(t){Z(t)})),f.animateAll()}be=f}(n===r||c&&"clone"!==c.lastPutMode)&&Ee.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=Ce=!1,Ee.length=0},destroyGlobal:function(){this._deselectMultiDrag(),E(document,"pointerup",this._deselectMultiDrag),E(document,"mouseup",this._deselectMultiDrag),E(document,"touchend",this._deselectMultiDrag),E(document,"keydown",this._checkKeyDown),E(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==Ce&&Ce||be!==this.sortable||t&&C(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Se.length;){var e=Se[0];I(e,this.options.selectedClass,!1),Se.shift(),et({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},l(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[K];e&&e.options.multiDrag&&!~Se.indexOf(t)&&(be&&be!==e&&(be.multiDrag._deselectMultiDrag(),be=e),I(t,e.options.selectedClass,!0),Se.push(t))},deselect:function(t){var e=t.parentNode[K],n=Se.indexOf(t);e&&e.options.multiDrag&&~n&&(I(t,e.options.selectedClass,!1),Se.splice(n,1))}},eventProperties:function(){var t=this,e=[],n=[];return Se.forEach((function(r){var o;e.push({multiDragElement:r,index:r.sortableIndex}),o=Te&&r!==xe?-1:Te?z(r,":not(."+t.options.selectedClass+")"):z(r),n.push({multiDragElement:r,index:o})})),{items:f(Se),clones:[].concat(Ee),oldIndicies:e,newIndicies:n}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Re(t,e){Ee.forEach((function(n,i){var r=e.children[n.sortableIndex+(t?Number(i):0)];r?e.insertBefore(n,r):e.appendChild(n)}))}function Ie(){Se.forEach((function(t){t!==xe&&t.parentNode&&t.parentNode.removeChild(t)}))}Kt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):e.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),fe(),ce(),clearTimeout(P),P=void 0},nulling:function(){ae=ie=re=ue=le=se=oe=null,he.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(r,o);if(ae=t,e||v||m||_){de(t,this.options,l,e);var h=j(l,!0);!ue||le&&r===se&&o===oe||(le&&fe(),le=setInterval((function(){var l=j(document.elementFromPoint(r,o),!0);l!==h&&(h=l,ce()),de(t,n.options,l,e)}),10),se=r,oe=o)}else{if(!this.options.bubbleScroll||j(l,!0)===F())return void ce();de(t,this.options,j(l,!1),!1)}}},l(t,{pluginName:"scroll",initializeByDefault:!0})}),Kt.mount(ve,ge),e.default=Kt},4307:function(t,e,n){"use strict";n.r(e),function(t){var n=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var h=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,f=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function h(){n&&(n=!1,t()),r&&f()}function c(){l(h)}function f(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(c,e);o=t}return f}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;h.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),d=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},m=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},v=S(0,0,0,0);function y(t){return parseFloat(t)||0}function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+y(t["border-"+n+"-width"])}),0)}function x(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return v;var r=m(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],l=t["padding-"+o];e[o]=y(l)}return e}(r),l=o.left+o.right,h=o.top+o.bottom,c=y(r.width),f=y(r.height);if("border-box"===r.boxSizing&&(Math.round(c+l)!==e&&(c-=_(r,"left","right")+l),Math.round(f+h)!==n&&(f-=_(r,"top","bottom")+h)),!function(t){return t===m(t).document.documentElement}(t)){var d=Math.round(c+l)-e,x=Math.round(f+h)-n;1!==Math.abs(d)&&(c-=d),1!==Math.abs(x)&&(f-=x)}return S(o.left,o.top,c,f)}var w="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof m(t).SVGGraphicsElement}:function(t){return t instanceof m(t).SVGElement&&"function"==typeof t.getBBox};function M(t){return r?w(t)?function(t){var e=t.getBBox();return S(0,0,e.width,e.height)}(t):x(t):v}function S(t,e,n,r){return{x:t,y:e,width:n,height:r}}var E=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var rect=M(this.target);return this.contentRect_=rect,rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var rect=this.contentRect_;return this.broadcastWidth=rect.width,this.broadcastHeight=rect.height,rect},t}(),A=function(t,e){var n,r,o,l,h,c,rect,f=(r=(n=e).x,o=n.y,l=n.width,h=n.height,c="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,rect=Object.create(c.prototype),d(rect,{x:r,y:o,width:l,height:h,top:o,right:r+l,bottom:h+o,left:r}),rect);d(this,{target:t,contentRect:f})},T=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new E(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new A(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),C="undefined"!=typeof WeakMap?new WeakMap:new n,P=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=f.getInstance(),r=new T(e,n,this);C.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){P.prototype[t]=function(){var e;return(e=C.get(this))[t].apply(e,arguments)}}));var R=void 0!==o.ResizeObserver?o.ResizeObserver:P;e.default=R}.call(this,n(149))},4389:function(t,e,n){"use strict";n.r(e),n.d(e,"OrbitControls",(function(){return C}));var r=n(5);const o={type:"change"},l={type:"start"},h={type:"end"},c=new r.bg,f=new r.Ue,d=Math.cos(70*r.Rd.DEG2RAD),m=new r.Fh,v=2*Math.PI,y=-1,_=0,x=1,w=2,M=3,S=4,E=5,A=6,T=1e-6;class C extends r.kb{constructor(object,t=null){super(object,t),this.state=y,this.enabled=!0,this.target=new r.Fh,this.cursor=new r.Fh,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.Od.ROTATE,MIDDLE:r.Od.DOLLY,RIGHT:r.Od.PAN},this.touches={ONE:r.ah.ROTATE,TWO:r.ah.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new r.Fh,this._lastQuaternion=new r.if,this._lastTargetPosition=new r.Fh,this._quat=(new r.if).setFromUnitVectors(object.up,new r.Fh(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new r.Gg,this._sphericalDelta=new r.Gg,this._scale=1,this._panOffset=new r.Fh,this._rotateStart=new r.Eh,this._rotateEnd=new r.Eh,this._rotateDelta=new r.Eh,this._panStart=new r.Eh,this._panEnd=new r.Eh,this._panDelta=new r.Eh,this._dollyStart=new r.Eh,this._dollyEnd=new r.Eh,this._dollyDelta=new r.Eh,this._dollyDirection=new r.Fh,this._mouse=new r.Eh,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=R.bind(this),this._onPointerDown=P.bind(this),this._onPointerUp=I.bind(this),this._onContextMenu=B.bind(this),this._onMouseWheel=L.bind(this),this._onKeyDown=F.bind(this),this._onTouchStart=O.bind(this),this._onTouchMove=N.bind(this),this._onMouseDown=k.bind(this),this._onMouseMove=D.bind(this),this._interceptControlDown=U.bind(this),this._interceptControlUp=z.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1});this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents();this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(o),this.update(),this.state=y}update(t=null){const e=this.object.position;m.copy(e).sub(this.target),m.applyQuaternion(this._quat),this._spherical.setFromVector3(m),this.autoRotate&&this.state===y&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,l=this.maxAzimuthAngle;isFinite(n)&&isFinite(l)&&(n<-Math.PI?n+=v:n>Math.PI&&(n-=v),l<-Math.PI?l+=v:l>Math.PI&&(l-=v),this._spherical.theta=n<=l?Math.max(n,Math.min(l,this._spherical.theta)):this._spherical.theta>(n+l)/2?Math.max(n,this._spherical.theta):Math.min(l,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let h=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),h=t!=this._spherical.radius}if(m.setFromSpherical(this._spherical),m.applyQuaternion(this._quatInverse),e.copy(this.target).add(m),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){const e=m.length();t=this._clampDistance(e*this._scale);const n=e-t;this.object.position.addScaledVector(this._dollyDirection,n),this.object.updateMatrixWorld(),h=!!n}else if(this.object.isOrthographicCamera){const e=new r.Fh(this._mouse.x,this._mouse.y,0);e.unproject(this.object);const n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),h=n!==this.object.zoom;const o=new r.Fh(this._mouse.x,this._mouse.y,0);o.unproject(this.object),this.object.position.sub(o).add(e),this.object.updateMatrixWorld(),t=m.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(c.origin.copy(this.object.position),c.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(c.direction))<d?this.object.lookAt(this.target):(f.setFromNormalAndCoplanarPoint(this.object.up,this.target),c.intersectPlane(f,this.target))))}else if(this.object.isOrthographicCamera){const t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),h=!0)}return this._scale=1,this._performCursorZoom=!1,!!(h||this._lastPosition.distanceToSquared(this.object.position)>T||8*(1-this._lastQuaternion.dot(this.object.quaternion))>T||this._lastTargetPosition.distanceToSquared(this.target)>T)&&(this.dispatchEvent(o),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?v/60*this.autoRotateSpeed*t:v/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){m.setFromMatrixColumn(e,0),m.multiplyScalar(-t),this._panOffset.add(m)}_panUp(t,e){!0===this.screenSpacePanning?m.setFromMatrixColumn(e,1):(m.setFromMatrixColumn(e,0),m.crossVectors(this.object.up,m)),m.multiplyScalar(t),this._panOffset.add(m)}_pan(t,e){const element=this.domElement;if(this.object.isPerspectiveCamera){const n=this.object.position;m.copy(n).sub(this.target);let r=m.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/element.clientHeight,this.object.matrix),this._panUp(2*e*r/element.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/element.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/element.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const rect=this.domElement.getBoundingClientRect(),n=t-rect.left,r=e-rect.top,o=rect.width,l=rect.height;this._mouse.x=n/o*2-1,this._mouse.y=-r/l*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const element=this.domElement;this._rotateLeft(v*this._rotateDelta.x/element.clientHeight),this._rotateUp(v*this._rotateDelta.y/element.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(v*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-v*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(v*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-v*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panStart.set(n,r)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(n*n+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateEnd.set(n,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const element=this.domElement;this._rotateLeft(v*this._rotateDelta.x/element.clientHeight),this._rotateUp(v*this._rotateDelta.y/element.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const l=.5*(t.pageX+e.x),h=.5*(t.pageY+e.y);this._updateZoomParameters(l,h)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let i=0;i<this._pointers.length;i++)if(this._pointers[i]==t.pointerId)return void this._pointers.splice(i,1)}_isTrackingPointer(t){for(let i=0;i<this._pointers.length;i++)if(this._pointers[i]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new r.Eh,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function P(t){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function R(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function I(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(h),this.state=y;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y})}}function k(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.Od.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=x;break;case r.Od.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=w}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=_}break;case r.Od.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=_}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=w}break;default:this.state=y}this.state!==y&&this.dispatchEvent(l)}function D(t){switch(this.state){case _:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case x:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case w:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function L(t){!1!==this.enabled&&!1!==this.enableZoom&&this.state===y&&(t.preventDefault(),this.dispatchEvent(l),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(h))}function F(t){!1!==this.enabled&&this._handleKeyDown(t)}function O(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case r.ah.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=M;break;case r.ah.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=S;break;default:this.state=y}break;case 2:switch(this.touches.TWO){case r.ah.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=E;break;case r.ah.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=A;break;default:this.state=y}break;default:this.state=y}this.state!==y&&this.dispatchEvent(l)}function N(t){switch(this._trackPointer(t),this.state){case M:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case S:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case E:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case A:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=y}}function B(t){!1!==this.enabled&&t.preventDefault()}function U(t){if("Control"===t.key){this._controlActive=!0;this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function z(t){if("Control"===t.key){this._controlActive=!1;this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}},447:function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},4607:function(t,e,n){(function(t){var r=n(4608),o=n(2109),l=n(4610),h=n(4611),c=n(2110),f=e;f.request=function(e,n){e="string"==typeof e?c.parse(e):l(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",h=e.protocol||o,f=e.hostname||e.host,d=e.port,path=e.path||"/";f&&-1!==f.indexOf(":")&&(f="["+f+"]"),e.url=(f?h+"//"+f:"")+(d?":"+d:"")+path,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new r(e);return n&&m.on("response",n),m},f.get=function(t,e){var n=f.request(t,e);return n.end(),n},f.ClientRequest=r,f.IncomingMessage=o.IncomingMessage,f.Agent=function(){},f.Agent.defaultMaxSockets=4,f.globalAgent=new f.Agent,f.STATUS_CODES=h,f.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(149))},4608:function(t,e,n){(function(e,r,o){var l=n(2108),h=n(110),c=n(2109),f=n(539),d=n(4609),m=c.IncomingMessage,v=c.readyStates;var y=t.exports=function(t){var n,r=this;f.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){r.setHeader(e,t.headers[e])}));var o=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!l.abortController)o=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!l.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(t,e){return l.fetch&&e?"fetch":l.mozchunkedarraybuffer?"moz-chunked-arraybuffer":l.msstream?"ms-stream":l.arraybuffer&&t?"arraybuffer":l.vbArray&&t?"text:vbarray":"text"}(n,o),r._fetchTimer=null,r.on("finish",(function(){r._onFinish()}))};h(y,f.Writable),y.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===_.indexOf(n)&&(this._headers[n]={name:t,value:e})},y.prototype.getHeader=function(t){var header=this._headers[t.toLowerCase()];return header?header.value:null},y.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},y.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,h=t._headers,body=null;"GET"!==n.method&&"HEAD"!==n.method&&(body=l.arraybuffer?d(e.concat(t._body)):l.blobConstructor?new r.Blob(t._body.map((function(t){return d(t)})),{type:(h["content-type"]||{}).value||""}):e.concat(t._body).toString());var c=[];if(Object.keys(h).forEach((function(t){var e=h[t].name,n=h[t].value;Array.isArray(n)?n.forEach((function(t){c.push([e,t])})):c.push([e,n])})),"fetch"===t._mode){var f=null;if(l.abortController){var m=new AbortController;f=m.signal,t._fetchAbortController=m,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:c,body:body||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:f}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var y=t._xhr=new r.XMLHttpRequest;try{y.open(t._opts.method,t._opts.url,!0)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}"responseType"in y&&(y.responseType=t._mode.split(":")[0]),"withCredentials"in y&&(y.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in y&&y.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(y.timeout=n.requestTimeout,y.ontimeout=function(){t.emit("requestTimeout")}),c.forEach((function(header){y.setRequestHeader(header[0],header[1])})),t._response=null,y.onreadystatechange=function(){switch(y.readyState){case v.LOADING:case v.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(y.onprogress=function(){t._onXHRProgress()}),y.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{y.send(body)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}}}},y.prototype._onXHRProgress=function(){var t=this;(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},y.prototype._connect=function(){var t=this;t._destroyed||(t._response=new m(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},y.prototype._write=function(t,e,n){this._body.push(t),n()},y.prototype.abort=y.prototype.destroy=function(){var t=this;t._destroyed=!0,r.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},y.prototype.end=function(data,t,e){"function"==typeof data&&(e=data,data=void 0),f.Writable.prototype.end.call(this,data,t,e)},y.prototype.flushHeaders=function(){},y.prototype.setTimeout=function(){},y.prototype.setNoDelay=function(){},y.prototype.setSocketKeepAlive=function(){};var _=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(262).Buffer,n(149),n(245))},4609:function(t,e,n){var r=n(262).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},4612:function(t,e,n){"use strict";var r=n(4613),o=n(4632),l=n(1117);t.exports={formats:l,parse:o,stringify:r}},4613:function(t,e,n){"use strict";var r=n(4614),o=n(2113),l=n(1117),h=Object.prototype.hasOwnProperty,c={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},f=Array.isArray,d=Array.prototype.push,m=function(t,e){d.apply(t,f(e)?e:[e])},v=Date.prototype.toISOString,y=l.default,_={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,format:y,formatter:l.formatters[y],indices:!1,serializeDate:function(t){return v.call(t)},skipNulls:!1,strictNullHandling:!1},x={},w=function t(object,e,n,l,h,c,d,v,y,filter,w,M,S,E,A,T,C,P){for(var R,I=object,k=P,D=0,L=!1;void 0!==(k=k.get(x))&&!L;){var F=k.get(object);if(D+=1,void 0!==F){if(F===D)throw new RangeError("Cyclic object value");L=!0}void 0===k.get(x)&&(D=0)}if("function"==typeof filter?I=filter(e,I):I instanceof Date?I=S(I):"comma"===n&&f(I)&&(I=o.maybeMap(I,(function(t){return t instanceof Date?S(t):t}))),null===I){if(c)return y&&!T?y(e,_.encoder,C,"key",E):e;I=""}if("string"==typeof(R=I)||"number"==typeof R||"boolean"==typeof R||"symbol"==typeof R||"bigint"==typeof R||o.isBuffer(I))return y?[A(T?e:y(e,_.encoder,C,"key",E))+"="+A(y(I,_.encoder,C,"value",E))]:[A(e)+"="+A(String(I))];var O,N=[];if(void 0===I)return N;if("comma"===n&&f(I))T&&y&&(I=o.maybeMap(I,y)),O=[{value:I.length>0?I.join(",")||null:void 0}];else if(f(filter))O=filter;else{var B=Object.keys(I);O=w?B.sort(w):B}var U=v?e.replace(/\./g,"%2E"):e,z=l&&f(I)&&1===I.length?U+"[]":U;if(h&&f(I)&&0===I.length)return z+"[]";for(var V=0;V<O.length;++V){var j=O[V],H="object"==typeof j&&void 0!==j.value?j.value:I[j];if(!d||null!==H){var G=M&&v?j.replace(/\./g,"%2E"):j,W=f(I)?"function"==typeof n?n(z,G):z:z+(M?"."+G:"["+G+"]");P.set(object,D);var X=r();X.set(x,P),m(N,t(H,W,n,l,h,c,d,v,"comma"===n&&T&&f(I)?null:y,filter,w,M,S,E,A,T,C,X))}}return N};t.exports=function(object,t){var e,n=object,o=function(t){if(!t)return _;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||_.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=l.default;if(void 0!==t.format){if(!h.call(l.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r,o=l.formatters[n],filter=_.filter;if(("function"==typeof t.filter||f(t.filter))&&(filter=t.filter),r=t.arrayFormat in c?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":_.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var d=void 0===t.allowDots?!0===t.encodeDotInKeys||_.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:_.addQueryPrefix,allowDots:d,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:_.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:_.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:void 0===t.delimiter?_.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:_.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:_.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:_.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:_.encodeValuesOnly,filter:filter,format:n,formatter:o,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:_.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:_.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:_.strictNullHandling}}(t);"function"==typeof o.filter?n=(0,o.filter)("",n):f(o.filter)&&(e=o.filter);var d=[];if("object"!=typeof n||null===n)return"";var v=c[o.arrayFormat],y="comma"===v&&o.commaRoundTrip;e||(e=Object.keys(n)),o.sort&&e.sort(o.sort);for(var x=r(),i=0;i<e.length;++i){var M=e[i];o.skipNulls&&null===n[M]||m(d,w(n[M],M,v,y,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,x))}var S=d.join(o.delimiter),E=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),S.length>0?E+S:""}},4614:function(t,e,n){"use strict";var r=n(551),o=n(4625),l=n(4630),h=n(678),c=r("%WeakMap%",!0),f=r("%Map%",!0),d=o("WeakMap.prototype.get",!0),m=o("WeakMap.prototype.set",!0),v=o("WeakMap.prototype.has",!0),y=o("Map.prototype.get",!0),_=o("Map.prototype.set",!0),x=o("Map.prototype.has",!0),w=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n};t.exports=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new h("Side channel does not contain "+l(t))},get:function(r){if(c&&r&&("object"==typeof r||"function"==typeof r)){if(t)return d(t,r)}else if(f){if(e)return y(e,r)}else if(n)return function(t,e){var n=w(t,e);return n&&n.value}(n,r)},has:function(r){if(c&&r&&("object"==typeof r||"function"==typeof r)){if(t)return v(t,r)}else if(f){if(e)return x(e,r)}else if(n)return function(t,e){return!!w(t,e)}(n,r);return!1},set:function(r,o){c&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new c),m(t,r,o)):f?(e||(e=new f),_(e,r,o)):(n||(n={key:{},next:null}),function(t,e,n){var r=w(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}}(n,r,o))}};return r}},4627:function(t,e,n){"use strict";var r=n(551),o=n(4628),l=n(4629)(),h=n(2112),c=n(678),f=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new c("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||f(e)!==e)throw new c("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,d=!0;if("length"in t&&h){var desc=h(t,"length");desc&&!desc.configurable&&(r=!1),desc&&!desc.writable&&(d=!1)}return(r||d||!n)&&(l?o(t,"length",e,!0,!0):o(t,"length",e)),t}},4630:function(t,e,n){(function(e){var r="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,l=r&&o&&"function"==typeof o.get?o.get:null,h=r&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,f=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=c&&f&&"function"==typeof f.get?f.get:null,m=c&&Set.prototype.forEach,v="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,y="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,_="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,x=Boolean.prototype.valueOf,w=Object.prototype.toString,M=Function.prototype.toString,S=String.prototype.match,E=String.prototype.slice,A=String.prototype.replace,T=String.prototype.toUpperCase,C=String.prototype.toLowerCase,P=RegExp.prototype.test,R=Array.prototype.concat,I=Array.prototype.join,k=Array.prototype.slice,D=Math.floor,L="function"==typeof BigInt?BigInt.prototype.valueOf:null,F=Object.getOwnPropertySymbols,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,N="function"==typeof Symbol&&"object"==typeof Symbol.iterator,B="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===N||"symbol")?Symbol.toStringTag:null,U=Object.prototype.propertyIsEnumerable,z=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function V(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||P.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var r=t<0?-D(-t):D(t);if(r!==t){var o=String(r),l=E.call(e,o.length+1);return A.call(o,n,"$&_")+"."+A.call(A.call(l,/([0-9]{3})/g,"$&_"),/_$/,"")}}return A.call(e,n,"$&_")}var j=n(4631),H=j.custom,G=K(H)?H:null;function W(s,t,e){var n="double"===(e.quoteStyle||t)?'"':"'";return n+s+n}function X(s){return A.call(String(s),/"/g,"&quot;")}function Y(t){return!("[object Array]"!==Q(t)||B&&"object"==typeof t&&B in t)}function Z(t){return!("[object RegExp]"!==Q(t)||B&&"object"==typeof t&&B in t)}function K(t){if(N)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!O)return!1;try{return O.call(t),!0}catch(t){}return!1}t.exports=function t(n,r,o,c){var f=r||{};if(J(f,"quoteStyle")&&"single"!==f.quoteStyle&&"double"!==f.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(J(f,"maxStringLength")&&("number"==typeof f.maxStringLength?f.maxStringLength<0&&f.maxStringLength!==1/0:null!==f.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=!J(f,"customInspect")||f.customInspect;if("boolean"!=typeof w&&"symbol"!==w)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(J(f,"indent")&&null!==f.indent&&"\t"!==f.indent&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(J(f,"numericSeparator")&&"boolean"!=typeof f.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var T=f.numericSeparator;if(void 0===n)return"undefined";if(null===n)return"null";if("boolean"==typeof n)return n?"true":"false";if("string"==typeof n)return et(n,f);if("number"==typeof n){if(0===n)return 1/0/n>0?"0":"-0";var P=String(n);return T?V(n,P):P}if("bigint"==typeof n){var D=String(n)+"n";return T?V(n,D):D}var F=void 0===f.depth?5:f.depth;if(void 0===o&&(o=0),o>=F&&F>0&&"object"==typeof n)return Y(n)?"[Array]":"[Object]";var H=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=I.call(Array(t.indent+1)," ")}return{base:n,prev:I.call(Array(e+1),n)}}(f,o);if(void 0===c)c=[];else if(tt(c,n)>=0)return"[Circular]";function $(e,n,r){if(n&&(c=k.call(c)).push(n),r){var l={depth:f.depth};return J(f,"quoteStyle")&&(l.quoteStyle=f.quoteStyle),t(e,l,o+1,c)}return t(e,f,o+1,c)}if("function"==typeof n&&!Z(n)){var nt=function(t){if(t.name)return t.name;var e=S.call(M.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(n),ht=lt(n,$);return"[Function"+(nt?": "+nt:" (anonymous)")+"]"+(ht.length>0?" { "+I.call(ht,", ")+" }":"")}if(K(n)){var ut=N?A.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(n);return"object"!=typeof n||N?ut:it(ut)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(n)){for(var s="<"+C.call(String(n.nodeName)),ct=n.attributes||[],i=0;i<ct.length;i++)s+=" "+ct[i].name+"="+W(X(ct[i].value),"double",f);return s+=">",n.childNodes&&n.childNodes.length&&(s+="..."),s+="</"+C.call(String(n.nodeName))+">"}if(Y(n)){if(0===n.length)return"[]";var ft=lt(n,$);return H&&!function(t){for(var i=0;i<t.length;i++)if(tt(t[i],"\n")>=0)return!1;return!0}(ft)?"["+at(ft,H)+"]":"[ "+I.call(ft,", ")+" ]"}if(function(t){return!("[object Error]"!==Q(t)||B&&"object"==typeof t&&B in t)}(n)){var pt=lt(n,$);return"cause"in Error.prototype||!("cause"in n)||U.call(n,"cause")?0===pt.length?"["+String(n)+"]":"{ ["+String(n)+"] "+I.call(pt,", ")+" }":"{ ["+String(n)+"] "+I.call(R.call("[cause]: "+$(n.cause),pt),", ")+" }"}if("object"==typeof n&&w){if(G&&"function"==typeof n[G]&&j)return j(n,{depth:F-o});if("symbol"!==w&&"function"==typeof n.inspect)return n.inspect()}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t);try{d.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(n)){var mt=[];return h&&h.call(n,(function(t,e){mt.push($(e,n,!0)+" => "+$(t,n))})),ot("Map",l.call(n),mt,H)}if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t);try{l.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(n)){var gt=[];return m&&m.call(n,(function(t){gt.push($(t,n))})),ot("Set",d.call(n),gt,H)}if(function(t){if(!v||!t||"object"!=typeof t)return!1;try{v.call(t,v);try{y.call(t,y)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(n))return st("WeakMap");if(function(t){if(!y||!t||"object"!=typeof t)return!1;try{y.call(t,y);try{v.call(t,v)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(n))return st("WeakSet");if(function(t){if(!_||!t||"object"!=typeof t)return!1;try{return _.call(t),!0}catch(t){}return!1}(n))return st("WeakRef");if(function(t){return!("[object Number]"!==Q(t)||B&&"object"==typeof t&&B in t)}(n))return it($(Number(n)));if(function(t){if(!t||"object"!=typeof t||!L)return!1;try{return L.call(t),!0}catch(t){}return!1}(n))return it($(L.call(n)));if(function(t){return!("[object Boolean]"!==Q(t)||B&&"object"==typeof t&&B in t)}(n))return it(x.call(n));if(function(t){return!("[object String]"!==Q(t)||B&&"object"==typeof t&&B in t)}(n))return it($(String(n)));if("undefined"!=typeof window&&n===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&n===globalThis||void 0!==e&&n===e)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==Q(t)||B&&"object"==typeof t&&B in t)}(n)&&!Z(n)){var vt=lt(n,$),yt=z?z(n)===Object.prototype:n instanceof Object||n.constructor===Object,_t=n instanceof Object?"":"null prototype",bt=!yt&&B&&Object(n)===n&&B in n?E.call(Q(n),8,-1):_t?"Object":"",xt=(yt||"function"!=typeof n.constructor?"":n.constructor.name?n.constructor.name+" ":"")+(bt||_t?"["+I.call(R.call([],bt||[],_t||[]),": ")+"] ":"");return 0===vt.length?xt+"{}":H?xt+"{"+at(vt,H)+"}":xt+"{ "+I.call(vt,", ")+" }"}return String(n)};var $=Object.prototype.hasOwnProperty||function(t){return t in this};function J(t,e){return $.call(t,e)}function Q(t){return w.call(t)}function tt(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function et(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return et(E.call(t,0,e.maxStringLength),e)+r}return W(A.call(A.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,nt),"single",e)}function nt(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+T.call(e.toString(16))}function it(t){return"Object("+t+")"}function st(t){return t+" { ? }"}function ot(t,e,n,r){return t+" ("+e+") {"+(r?at(n,r):I.call(n,", "))+"}"}function at(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+I.call(t,","+n)+"\n"+e.prev}function lt(t,e){var n=Y(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=J(t,i)?e(t[i],t):""}var o,l="function"==typeof F?F(t):[];if(N){o={};for(var h=0;h<l.length;h++)o["$"+l[h]]=l[h]}for(var c in t)J(t,c)&&(n&&String(Number(c))===c&&c<t.length||N&&o["$"+c]instanceof Symbol||(P.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if("function"==typeof F)for(var f=0;f<l.length;f++)U.call(t,l[f])&&r.push("["+e(l[f])+"]: "+e(t[l[f]],t));return r}}).call(this,n(149))},4632:function(t,e,n){"use strict";var r=n(2113),o=Object.prototype.hasOwnProperty,l=Array.isArray,h={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},f=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},d=function(t,e,n,r){if(t){var l=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,h=/(\[[^[\]]*])/g,c=n.depth>0&&/(\[[^[\]]*])/.exec(l),d=c?l.slice(0,c.index):l,m=[];if(d){if(!n.plainObjects&&o.call(Object.prototype,d)&&!n.allowPrototypes)return;m.push(d)}for(var i=0;n.depth>0&&null!==(c=h.exec(l))&&i<n.depth;){if(i+=1,!n.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;m.push(c[1])}return c&&m.push("["+l.slice(c.index)+"]"),function(t,e,n,r){for(var o=r?e:f(e,n),i=t.length-1;i>=0;--i){var l,h=t[i];if("[]"===h&&n.parseArrays)l=n.allowEmptyArrays&&(""===o||n.strictNullHandling&&null===o)?[]:[].concat(o);else{l=n.plainObjects?Object.create(null):{};var c="["===h.charAt(0)&&"]"===h.charAt(h.length-1)?h.slice(1,-1):h,d=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,m=parseInt(d,10);n.parseArrays||""!==d?!isNaN(m)&&h!==d&&String(m)===d&&m>=0&&n.parseArrays&&m<=n.arrayLimit?(l=[])[m]=o:"__proto__"!==d&&(l[d]=o):l={0:o}}o=l}return o}(m,e,n,r)}};t.exports=function(t,e){var n=function(t){if(!t)return h;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?h.charset:t.charset,n=void 0===t.duplicates?h.duplicates:t.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||h.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:h.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:h.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:h.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:h.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:h.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:h.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:h.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:h.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:h.depth,duplicates:n,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:h.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:h.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:h.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var m="string"==typeof t?function(t,e){var n={__proto__:null},d=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;d=d.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i,m=e.parameterLimit===1/0?void 0:e.parameterLimit,v=d.split(e.delimiter,m),y=-1,_=e.charset;if(e.charsetSentinel)for(i=0;i<v.length;++i)0===v[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===v[i]?_="utf-8":"utf8=%26%2310003%3B"===v[i]&&(_="iso-8859-1"),y=i,i=v.length);for(i=0;i<v.length;++i)if(i!==y){var x,w,M=v[i],S=M.indexOf("]="),E=-1===S?M.indexOf("="):S+1;-1===E?(x=e.decoder(M,h.decoder,_,"key"),w=e.strictNullHandling?null:""):(x=e.decoder(M.slice(0,E),h.decoder,_,"key"),w=r.maybeMap(f(M.slice(E+1),e),(function(t){return e.decoder(t,h.decoder,_,"value")}))),w&&e.interpretNumericEntities&&"iso-8859-1"===_&&(w=c(w)),M.indexOf("[]=")>-1&&(w=l(w)?[w]:w);var A=o.call(n,x);A&&"combine"===e.duplicates?n[x]=r.combine(n[x],w):A&&"last"!==e.duplicates||(n[x]=w)}return n}(t,n):t,v=n.plainObjects?Object.create(null):{},y=Object.keys(m),i=0;i<y.length;++i){var _=y[i],x=d(_,m[_],n,"string"==typeof t);v=r.merge(v,x,n)}return!0===n.allowSparse?v:r.compact(v)}},495:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},496:function(t,e,n){var r=n(3553),o=n(3558);t.exports=function(object,t){var e=o(object,t);return r(e)?e:void 0}},497:function(t,e){t.exports=function(t){return function(e){return t(e)}}},498:function(t,e,n){"use strict";var r=n(731),o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=v;var l=Object.create(n(660));l.inherits=n(110);var h=n(1374),c=n(1016);l.inherits(v,h);for(var f=o(c.prototype),d=0;d<f.length;d++){var m=f[d];v.prototype[m]||(v.prototype[m]=c.prototype[m])}function v(t){if(!(this instanceof v))return new v(t);h.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",y)}function y(){this.allowHalfOpen||this._writableState.ended||r.nextTick(_,this)}function _(t){t.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),v.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},5:function(t,e,n){"use strict";n.d(e,"a",(function(){return pt})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return lt})),n.d(e,"d",(function(){return Je})),n.d(e,"e",(function(){return A})),n.d(e,"f",(function(){return gt})),n.d(e,"g",(function(){return $t})),n.d(e,"h",(function(){return Nn})),n.d(e,"i",(function(){return J})),n.d(e,"j",(function(){return Pn})),n.d(e,"k",(function(){return tc})),n.d(e,"l",(function(){return Gc})),n.d(e,"m",(function(){return Mu})),n.d(e,"n",(function(){return ku})),n.d(e,"o",(function(){return qc})),n.d(e,"p",(function(){return Hc})),n.d(e,"q",(function(){return uu})),n.d(e,"r",(function(){return El})),n.d(e,"s",(function(){return bc})),n.d(e,"t",(function(){return jf})),n.d(e,"u",(function(){return yt})),n.d(e,"v",(function(){return Cc})),n.d(e,"w",(function(){return Lc})),n.d(e,"x",(function(){return dc})),n.d(e,"y",(function(){return Tc})),n.d(e,"z",(function(){return mc})),n.d(e,"A",(function(){return Hf})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return nn})),n.d(e,"D",(function(){return m})),n.d(e,"E",(function(){return Ga})),n.d(e,"F",(function(){return oa})),n.d(e,"G",(function(){return gu})),n.d(e,"H",(function(){return hf})),n.d(e,"I",(function(){return Kr})),n.d(e,"J",(function(){return Nf})),n.d(e,"K",(function(){return oo})),n.d(e,"L",(function(){return Of})),n.d(e,"M",(function(){return Ps})),n.d(e,"N",(function(){return qs})),n.d(e,"O",(function(){return ac})),n.d(e,"P",(function(){return zt})),n.d(e,"Q",(function(){return Eu})),n.d(e,"R",(function(){return fo})),n.d(e,"S",(function(){return Df})),n.d(e,"T",(function(){return xl})),n.d(e,"U",(function(){return ql})),n.d(e,"V",(function(){return Il})),n.d(e,"W",(function(){return ft})),n.d(e,"X",(function(){return Xl})),n.d(e,"Y",(function(){return Tt})),n.d(e,"Z",(function(){return xc})),n.d(e,"ab",(function(){return gs})),n.d(e,"bb",(function(){return vu})),n.d(e,"cb",(function(){return Pr})),n.d(e,"db",(function(){return _l})),n.d(e,"eb",(function(){return bl})),n.d(e,"fb",(function(){return yl})),n.d(e,"gb",(function(){return Du})),n.d(e,"hb",(function(){return Zl})),n.d(e,"ib",(function(){return Z})),n.d(e,"jb",(function(){return X})),n.d(e,"kb",(function(){return Wf})),n.d(e,"lb",(function(){return _o})),n.d(e,"mb",(function(){return xt})),n.d(e,"nb",(function(){return wt})),n.d(e,"ob",(function(){return bo})),n.d(e,"pb",(function(){return Fu})),n.d(e,"qb",(function(){return Et})),n.d(e,"rb",(function(){return Fl})),n.d(e,"sb",(function(){return Ol})),n.d(e,"tb",(function(){return fu})),n.d(e,"ub",(function(){return c})),n.d(e,"vb",(function(){return f})),n.d(e,"wb",(function(){return d})),n.d(e,"xb",(function(){return h})),n.d(e,"yb",(function(){return Ml})),n.d(e,"zb",(function(){return Hl})),n.d(e,"Ab",(function(){return P})),n.d(e,"Bb",(function(){return mt})),n.d(e,"Cb",(function(){return Yl})),n.d(e,"Db",(function(){return of})),n.d(e,"Eb",(function(){return Gr})),n.d(e,"Fb",(function(){return jr})),n.d(e,"Gb",(function(){return aa})),n.d(e,"Hb",(function(){return Ou})),n.d(e,"Ib",(function(){return Es})),n.d(e,"Jb",(function(){return yn})),n.d(e,"Kb",(function(){return bn})),n.d(e,"Lb",(function(){return Tu})),n.d(e,"Mb",(function(){return ne})),n.d(e,"Nb",(function(){return re})),n.d(e,"Ob",(function(){return wl})),n.d(e,"Pb",(function(){return _t})),n.d(e,"Qb",(function(){return Qu})),n.d(e,"Rb",(function(){return Rf})),n.d(e,"Sb",(function(){return du})),n.d(e,"Tb",(function(){return $l})),n.d(e,"Ub",(function(){return M})),n.d(e,"Vb",(function(){return V})),n.d(e,"Wb",(function(){return H})),n.d(e,"Xb",(function(){return Wn})),n.d(e,"Yb",(function(){return Un})),n.d(e,"Zb",(function(){return jn})),n.d(e,"ac",(function(){return rh})),n.d(e,"bc",(function(){return Sl})),n.d(e,"cc",(function(){return kn})),n.d(e,"dc",(function(){return et})),n.d(e,"ec",(function(){return Sn})),n.d(e,"fc",(function(){return Mt})),n.d(e,"gc",(function(){return St})),n.d(e,"hc",(function(){return Li})),n.d(e,"ic",(function(){return Jn})),n.d(e,"jc",(function(){return kh})),n.d(e,"kc",(function(){return Iu})),n.d(e,"lc",(function(){return Ns})),n.d(e,"mc",(function(){return Bs})),n.d(e,"nc",(function(){return Wt})),n.d(e,"oc",(function(){return Ao})),n.d(e,"pc",(function(){return Eo})),n.d(e,"qc",(function(){return vl})),n.d(e,"rc",(function(){return x})),n.d(e,"sc",(function(){return Aa})),n.d(e,"tc",(function(){return Qc})),n.d(e,"uc",(function(){return Xn})),n.d(e,"vc",(function(){return Yn})),n.d(e,"wc",(function(){return Ln})),n.d(e,"xc",(function(){return it})),n.d(e,"yc",(function(){return On})),n.d(e,"zc",(function(){return nt})),n.d(e,"Ac",(function(){return Cn})),n.d(e,"Bc",(function(){return An})),n.d(e,"Cc",(function(){return Ef})),n.d(e,"Dc",(function(){return wo})),n.d(e,"Ec",(function(){return qt})),n.d(e,"Fc",(function(){return Uu})),n.d(e,"Gc",(function(){return Sf})),n.d(e,"Hc",(function(){return Lh})),n.d(e,"Ic",(function(){return fc})),n.d(e,"Jc",(function(){return Lu})),n.d(e,"Kc",(function(){return Dr})),n.d(e,"Lc",(function(){return vn})),n.d(e,"Mc",(function(){return _n})),n.d(e,"Nc",(function(){return ca})),n.d(e,"Oc",(function(){return oc})),n.d(e,"Pc",(function(){return Jc})),n.d(e,"Qc",(function(){return _a})),n.d(e,"Rc",(function(){return Ds})),n.d(e,"Sc",(function(){return Fs})),n.d(e,"Tc",(function(){return Rs})),n.d(e,"Uc",(function(){return Ht})),n.d(e,"Vc",(function(){return Co})),n.d(e,"Wc",(function(){return Ro})),n.d(e,"Xc",(function(){return cu})),n.d(e,"Yc",(function(){return We})),n.d(e,"Zc",(function(){return qe})),n.d(e,"ad",(function(){return Xe})),n.d(e,"bd",(function(){return xn})),n.d(e,"cd",(function(){return mn})),n.d(e,"dd",(function(){return mu})),n.d(e,"ed",(function(){return Zo})),n.d(e,"fd",(function(){return Wl})),n.d(e,"gd",(function(){return Fi})),n.d(e,"hd",(function(){return In})),n.d(e,"id",(function(){return Q})),n.d(e,"jd",(function(){return Dn})),n.d(e,"kd",(function(){return tt})),n.d(e,"ld",(function(){return En})),n.d(e,"md",(function(){return Mn})),n.d(e,"nd",(function(){return Bu})),n.d(e,"od",(function(){return rc})),n.d(e,"pd",(function(){return Qa})),n.d(e,"qd",(function(){return ff})),n.d(e,"rd",(function(){return Wa})),n.d(e,"sd",(function(){return Nl})),n.d(e,"td",(function(){return Bl})),n.d(e,"ud",(function(){return iu})),n.d(e,"vd",(function(){return il})),n.d(e,"wd",(function(){return rl})),n.d(e,"xd",(function(){return Lt})),n.d(e,"yd",(function(){return pu})),n.d(e,"zd",(function(){return Bt})),n.d(e,"Ad",(function(){return Ot})),n.d(e,"Bd",(function(){return Nt})),n.d(e,"Cd",(function(){return Ft})),n.d(e,"Dd",(function(){return cn})),n.d(e,"Ed",(function(){return ut})),n.d(e,"Fd",(function(){return fn})),n.d(e,"Gd",(function(){return Cu})),n.d(e,"Hd",(function(){return sc})),n.d(e,"Id",(function(){return Au})),n.d(e,"Jd",(function(){return je})),n.d(e,"Kd",(function(){return Ge})),n.d(e,"Ld",(function(){return He})),n.d(e,"Md",(function(){return ee})),n.d(e,"Nd",(function(){return te})),n.d(e,"Od",(function(){return o})),n.d(e,"Pd",(function(){return _s})),n.d(e,"Qd",(function(){return ic})),n.d(e,"Rd",(function(){return cr})),n.d(e,"Sd",(function(){return af})),n.d(e,"Td",(function(){return pr})),n.d(e,"Ud",(function(){return Si})),n.d(e,"Vd",(function(){return L})),n.d(e,"Wd",(function(){return io})),n.d(e,"Xd",(function(){return bs})),n.d(e,"Yd",(function(){return eu})),n.d(e,"Zd",(function(){return nu})),n.d(e,"ae",(function(){return tu})),n.d(e,"be",(function(){return ru})),n.d(e,"ce",(function(){return Qh})),n.d(e,"de",(function(){return $h})),n.d(e,"ee",(function(){return Kh})),n.d(e,"fe",(function(){return Zh})),n.d(e,"ge",(function(){return Jh})),n.d(e,"he",(function(){return D})),n.d(e,"ie",(function(){return Ct})),n.d(e,"je",(function(){return at})),n.d(e,"ke",(function(){return C})),n.d(e,"le",(function(){return ot})),n.d(e,"me",(function(){return Pt})),n.d(e,"ne",(function(){return Dt})),n.d(e,"oe",(function(){return It})),n.d(e,"pe",(function(){return kt})),n.d(e,"qe",(function(){return Rt})),n.d(e,"re",(function(){return vt})),n.d(e,"se",(function(){return Rn})),n.d(e,"te",(function(){return $})),n.d(e,"ue",(function(){return wn})),n.d(e,"ve",(function(){return S})),n.d(e,"we",(function(){return hn})),n.d(e,"xe",(function(){return ht})),n.d(e,"ye",(function(){return $e})),n.d(e,"ze",(function(){return E})),n.d(e,"Ae",(function(){return Fn})),n.d(e,"Be",(function(){return st})),n.d(e,"Ce",(function(){return Tn})),n.d(e,"De",(function(){return yu})),n.d(e,"Ee",(function(){return $i})),n.d(e,"Fe",(function(){return lc})),n.d(e,"Ge",(function(){return ln})),n.d(e,"He",(function(){return Fh})),n.d(e,"Ie",(function(){return O})),n.d(e,"Je",(function(){return K})),n.d(e,"Ke",(function(){return Y})),n.d(e,"Le",(function(){return j})),n.d(e,"Me",(function(){return G})),n.d(e,"Ne",(function(){return z})),n.d(e,"Oe",(function(){return B})),n.d(e,"Pe",(function(){return $u})),n.d(e,"Qe",(function(){return v})),n.d(e,"Re",(function(){return y})),n.d(e,"Se",(function(){return Gl})),n.d(e,"Te",(function(){return vo})),n.d(e,"Ue",(function(){return Ma})),n.d(e,"Ve",(function(){return Oh})),n.d(e,"We",(function(){return Bf})),n.d(e,"Xe",(function(){return Ku})),n.d(e,"Ye",(function(){return bf})),n.d(e,"Ze",(function(){return fl})),n.d(e,"af",(function(){return sl})),n.d(e,"bf",(function(){return Af})),n.d(e,"cf",(function(){return Kl})),n.d(e,"df",(function(){return Dc})),n.d(e,"ef",(function(){return jc})),n.d(e,"ff",(function(){return Fc})),n.d(e,"gf",(function(){return Ul})),n.d(e,"hf",(function(){return zl})),n.d(e,"if",(function(){return qr})),n.d(e,"jf",(function(){return bu})),n.d(e,"kf",(function(){return _u})),n.d(e,"lf",(function(){return rr})),n.d(e,"mf",(function(){return ze})),n.d(e,"nf",(function(){return Be})),n.d(e,"of",(function(){return r})),n.d(e,"pf",(function(){return rn})),n.d(e,"qf",(function(){return Qt})),n.d(e,"rf",(function(){return he})),n.d(e,"sf",(function(){return ke})),n.d(e,"tf",(function(){return Pe})),n.d(e,"uf",(function(){return Re})),n.d(e,"vf",(function(){return Ie})),n.d(e,"wf",(function(){return De})),n.d(e,"xf",(function(){return Le})),n.d(e,"yf",(function(){return xe})),n.d(e,"zf",(function(){return we})),n.d(e,"Af",(function(){return Me})),n.d(e,"Bf",(function(){return Se})),n.d(e,"Cf",(function(){return Ee})),n.d(e,"Df",(function(){return Ae})),n.d(e,"Ef",(function(){return Te})),n.d(e,"Ff",(function(){return Ce})),n.d(e,"Gf",(function(){return Fe})),n.d(e,"Hf",(function(){return be})),n.d(e,"If",(function(){return ve})),n.d(e,"Jf",(function(){return ge})),n.d(e,"Kf",(function(){return ce})),n.d(e,"Lf",(function(){return fe})),n.d(e,"Mf",(function(){return pe})),n.d(e,"Nf",(function(){return sn})),n.d(e,"Of",(function(){return Jt})),n.d(e,"Pf",(function(){return le})),n.d(e,"Qf",(function(){return Oe})),n.d(e,"Rf",(function(){return Ne})),n.d(e,"Sf",(function(){return ye})),n.d(e,"Tf",(function(){return _e})),n.d(e,"Uf",(function(){return me})),n.d(e,"Vf",(function(){return de})),n.d(e,"Wf",(function(){return ue})),n.d(e,"Xf",(function(){return on})),n.d(e,"Yf",(function(){return oe})),n.d(e,"Zf",(function(){return ae})),n.d(e,"ag",(function(){return Yh})),n.d(e,"bg",(function(){return Mi})),n.d(e,"cg",(function(){return ef})),n.d(e,"dg",(function(){return ec})),n.d(e,"eg",(function(){return ie})),n.d(e,"fg",(function(){return se})),n.d(e,"gg",(function(){return ct})),n.d(e,"hg",(function(){return zr})),n.d(e,"ig",(function(){return Xc})),n.d(e,"jg",(function(){return Yc})),n.d(e,"kg",(function(){return At})),n.d(e,"lg",(function(){return gn})),n.d(e,"mg",(function(){return k})),n.d(e,"ng",(function(){return Nh})),n.d(e,"og",(function(){return Ve})),n.d(e,"pg",(function(){return Ue})),n.d(e,"qg",(function(){return un})),n.d(e,"rg",(function(){return pn})),n.d(e,"sg",(function(){return To})),n.d(e,"tg",(function(){return co})),n.d(e,"ug",(function(){return Xh})),n.d(e,"vg",(function(){return ih})),n.d(e,"wg",(function(){return Bh})),n.d(e,"xg",(function(){return Gf})),n.d(e,"yg",(function(){return Ph})),n.d(e,"zg",(function(){return Vt})),n.d(e,"Ag",(function(){return ua})),n.d(e,"Bg",(function(){return yf})),n.d(e,"Cg",(function(){return sa})),n.d(e,"Dg",(function(){return Fr})),n.d(e,"Eg",(function(){return mi})),n.d(e,"Fg",(function(){return Uh})),n.d(e,"Gg",(function(){return sf})),n.d(e,"Hg",(function(){return nc})),n.d(e,"Ig",(function(){return Vl})),n.d(e,"Jg",(function(){return Wu})),n.d(e,"Kg",(function(){return df})),n.d(e,"Lg",(function(){return Wo})),n.d(e,"Mg",(function(){return Io})),n.d(e,"Ng",(function(){return U})),n.d(e,"Og",(function(){return W})),n.d(e,"Pg",(function(){return N})),n.d(e,"Qg",(function(){return Gn})),n.d(e,"Rg",(function(){return Bn})),n.d(e,"Sg",(function(){return Vn})),n.d(e,"Tg",(function(){return _c})),n.d(e,"Ug",(function(){return qn})),n.d(e,"Vg",(function(){return zn})),n.d(e,"Wg",(function(){return Hn})),n.d(e,"Xg",(function(){return xu})),n.d(e,"Yg",(function(){return I})),n.d(e,"Zg",(function(){return T})),n.d(e,"ah",(function(){return l})),n.d(e,"bh",(function(){return an})),n.d(e,"ch",(function(){return zh})),n.d(e,"dh",(function(){return Br})),n.d(e,"eh",(function(){return Nu})),n.d(e,"fh",(function(){return Xf})),n.d(e,"gh",(function(){return $n})),n.d(e,"hh",(function(){return Vh})),n.d(e,"ih",(function(){return jh})),n.d(e,"jh",(function(){return cs})),n.d(e,"kh",(function(){return en})),n.d(e,"lh",(function(){return tn})),n.d(e,"mh",(function(){return Qe})),n.d(e,"nh",(function(){return Hh})),n.d(e,"oh",(function(){return bt})),n.d(e,"ph",(function(){return Ls})),n.d(e,"qh",(function(){return Os})),n.d(e,"rh",(function(){return Is})),n.d(e,"sh",(function(){return ks})),n.d(e,"th",(function(){return Zc})),n.d(e,"uh",(function(){return $c})),n.d(e,"vh",(function(){return uo})),n.d(e,"wh",(function(){return Ut})),n.d(e,"xh",(function(){return Zt})),n.d(e,"yh",(function(){return Kt})),n.d(e,"zh",(function(){return Gt})),n.d(e,"Ah",(function(){return Xt})),n.d(e,"Bh",(function(){return Yt})),n.d(e,"Ch",(function(){return jt})),n.d(e,"Dh",(function(){return _})),n.d(e,"Eh",(function(){return fr})),n.d(e,"Fh",(function(){return Xr})),n.d(e,"Gh",(function(){return Ur})),n.d(e,"Hh",(function(){return wu})),n.d(e,"Ih",(function(){return gl})),n.d(e,"Jh",(function(){return ml})),n.d(e,"Kh",(function(){return Wr})),n.d(e,"Lh",(function(){return Hr})),n.d(e,"Mh",(function(){return Zn})),n.d(e,"Nh",(function(){return xo})),n.d(e,"Oh",(function(){return Vr})),n.d(e,"Ph",(function(){return Kn})),n.d(e,"Qh",(function(){return So})),n.d(e,"Rh",(function(){return Gh})),n.d(e,"Sh",(function(){return Ke})),n.d(e,"Th",(function(){return Ye})),n.d(e,"Uh",(function(){return F})),n.d(e,"Vh",(function(){return Ze})),n.d(e,"Wh",(function(){return dn})),n.d(e,"Xh",(function(){return mr})),n.d(e,"Yh",(function(){return ao})),n.d(e,"Zh",(function(){return _r})),n.d(e,"ai",(function(){return yr})),n.d(e,"bi",(function(){return qf})),n.d(e,"ci",(function(){return ho})),n.d(e,"di",(function(){return lo})),n.d(e,"ei",(function(){return Mr})),n.d(e,"fi",(function(){return Sr})),n.d(e,"gi",(function(){return Er})),n.d(e,"hi",(function(){return wr}));const r="173",o={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},l={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},h=0,c=1,f=2,d=3,m=0,v=1,y=2,_=3,x=0,w=1,M=2,S=0,E=1,A=2,T=3,C=4,P=5,R=100,I=101,k=102,D=103,L=104,F=200,O=201,N=202,B=203,U=204,z=205,V=206,j=207,H=208,G=209,W=210,X=211,Y=212,Z=213,K=214,$=0,J=1,Q=2,tt=3,et=4,nt=5,it=6,st=7,ot=0,at=1,lt=2,ht=0,ut=1,ct=2,ft=3,pt=4,mt=5,gt=6,vt=7,yt="attached",_t="detached",bt=300,xt=301,wt=302,Mt=303,St=304,Et=306,At=1e3,Tt=1001,Ct=1002,Pt=1003,Rt=1004,It=1004,kt=1005,Dt=1005,Lt=1006,Ft=1007,Ot=1007,Nt=1008,Bt=1008,Ut=1009,zt=1010,Vt=1011,jt=1012,Ht=1013,Gt=1014,Wt=1015,qt=1016,Xt=1017,Yt=1018,Zt=1020,Kt=35902,$t=1021,Jt=1022,Qt=1023,te=1024,ee=1025,ne=1026,re=1027,ie=1028,se=1029,oe=1030,ae=1031,le=1032,he=1033,ue=33776,ce=33777,fe=33778,pe=33779,de=35840,me=35841,ge=35842,ve=35843,ye=36196,_e=37492,be=37496,xe=37808,we=37809,Me=37810,Se=37811,Ee=37812,Ae=37813,Te=37814,Ce=37815,Pe=37816,Re=37817,Ie=37818,ke=37819,De=37820,Le=37821,Fe=36492,Oe=36494,Ne=36495,Be=36283,Ue=36284,ze=36285,Ve=36286,je=2200,He=2201,Ge=2202,We=2300,qe=2301,Xe=2302,Ye=2400,Ze=2401,Ke=2402,$e=2500,Je=2501,Qe=0,tn=1,en=2,nn=3200,rn=3201,sn=3202,on=3203,an=0,ln=1,hn="",un="srgb",cn="srgb-linear",fn="linear",pn="srgb",dn=0,mn=7680,gn=7681,vn=7682,yn=7683,_n=34055,bn=34056,xn=5386,wn=512,Mn=513,Sn=514,En=515,An=516,Tn=517,Cn=518,Pn=519,Rn=512,In=513,kn=514,Dn=515,Ln=516,Fn=517,On=518,Nn=519,Bn=35044,Un=35048,zn=35040,Vn=35045,jn=35049,Hn=35041,Gn=35046,Wn=35050,qn=35042,Xn="100",Yn="300 es",Zn=2e3,Kn=2001,$n={COMPUTE:"compute",RENDER:"render"};class Jn{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n&&(void 0!==n[t]&&-1!==n[t].indexOf(e))}removeEventListener(t,e){const n=this._listeners;if(void 0===n)return;const r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let i=0,n=e.length;i<n;i++)e[i].call(this,t);t.target=null}}}const Qn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let er=1234567;const nr=Math.PI/180,rr=180/Math.PI;function ir(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Qn[255&t]+Qn[t>>8&255]+Qn[t>>16&255]+Qn[t>>24&255]+"-"+Qn[255&e]+Qn[e>>8&255]+"-"+Qn[e>>16&15|64]+Qn[e>>24&255]+"-"+Qn[63&n|128]+Qn[n>>8&255]+"-"+Qn[n>>16&255]+Qn[n>>24&255]+Qn[255&r]+Qn[r>>8&255]+Qn[r>>16&255]+Qn[r>>24&255]).toLowerCase()}function sr(t,e,n){return Math.max(e,Math.min(n,t))}function or(t,e){return(t%e+e)%e}function ar(t,e,n){return(1-n)*t+n*e}function lr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ur(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const cr={DEG2RAD:nr,RAD2DEG:rr,generateUUID:ir,clamp:sr,euclideanModulo:or,mapLinear:function(t,e,n,r,o){return r+(t-e)*(o-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:ar,damp:function(t,e,n,dt){return ar(t,e,1-Math.exp(-n*dt))},pingpong:function(t,e=1){return e-Math.abs(or(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(s){void 0!==s&&(er=s);let t=er+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(t){return t*nr},radToDeg:function(t){return t*rr},isPowerOfTwo:function(t){return!(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(q,a,b,t,e){const n=Math.cos,r=Math.sin,o=n(b/2),l=r(b/2),h=n((a+t)/2),c=r((a+t)/2),f=n((a-t)/2),d=r((a-t)/2),m=n((t-a)/2),v=r((t-a)/2);switch(e){case"XYX":q.set(o*c,l*f,l*d,o*h);break;case"YZY":q.set(l*d,o*c,l*f,o*h);break;case"ZXZ":q.set(l*f,l*d,o*c,o*h);break;case"XZX":q.set(o*c,l*v,l*m,o*h);break;case"YXY":q.set(l*m,o*c,l*v,o*h);break;case"ZYZ":q.set(l*v,l*m,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}},normalize:ur,denormalize:lr};class fr{constructor(t=0,e=0){fr.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=sr(this.x,t.x,e.x),this.y=sr(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=sr(this.x,t,e),this.y=sr(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(sr(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*s+t.x,this.y=r*s+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pr{constructor(t,e,n,r,o,l,h,c,f){pr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,o,l,h,c,f)}set(t,e,n,r,o,l,h,c,f){const d=this.elements;return d[0]=t,d[1]=r,d[2]=h,d[3]=e,d[4]=o,d[5]=c,d[6]=n,d[7]=l,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[3],l=t[6],h=t[1],c=t[4],f=t[7],d=t[2],m=t[5],v=t[8],y=e[0],_=e[3],x=e[6],w=e[1],M=e[4],S=e[7],E=e[2],A=e[5],T=e[8];return n[0]=r*y+o*w+l*E,n[3]=r*_+o*M+l*A,n[6]=r*x+o*S+l*T,n[1]=h*y+c*w+f*E,n[4]=h*_+c*M+f*A,n[7]=h*x+c*S+f*T,n[2]=d*y+m*w+v*E,n[5]=d*_+m*M+v*A,n[8]=d*x+m*S+v*T,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this}determinant(){const t=this.elements,a=t[0],b=t[1],e=t[2],n=t[3],r=t[4],o=t[5],g=t[6],l=t[7],i=t[8];return a*r*i-a*o*l-b*n*i+b*o*g+e*n*l-e*r*g}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],h=t[5],c=t[6],f=t[7],d=t[8],m=d*l-h*f,v=h*c-d*o,y=f*o-l*c,_=e*m+n*v+r*y;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const x=1/_;return t[0]=m*x,t[1]=(r*f-d*n)*x,t[2]=(h*n-r*l)*x,t[3]=v*x,t[4]=(d*e-r*c)*x,t[5]=(r*o-h*e)*x,t[6]=y*x,t[7]=(n*c-f*e)*x,t[8]=(l*e-n*o)*x,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,o,l,h){const c=Math.cos(o),s=Math.sin(o);return this.set(n*c,n*s,-n*(c*l+s*h)+l+t,-r*s,r*c,-r*(-s*l+c*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(dr.makeScale(t,e)),this}rotate(t){return this.premultiply(dr.makeRotation(-t)),this}translate(t,e){return this.premultiply(dr.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const dr=new pr;function mr(t){for(let i=t.length-1;i>=0;--i)if(t[i]>=65535)return!0;return!1}const gr={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function vr(t,e){return new gr[t](e)}function yr(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function _r(){const canvas=yr("canvas");return canvas.style.display="block",canvas}const xr={};function wr(t){t in xr||(xr[t]=!0,console.warn(t))}function Mr(t,e,n){return new Promise((function(r,o){setTimeout((function l(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:o();break;case t.TIMEOUT_EXPIRED:setTimeout(l,n);break;default:r()}}),n)}))}function Sr(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Er(t){const e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}const Ar=(new pr).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Tr=(new pr).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cr(){const t={enabled:!0,workingColorSpace:cn,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===pn&&(t.r=Rr(t.r),t.g=Rr(t.g),t.b=Rr(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===pn&&(t.r=Ir(t.r),t.g=Ir(t.g),t.b=Ir(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===hn?fn:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[cn]:{primaries:e,whitePoint:r,transfer:fn,toXYZ:Ar,fromXYZ:Tr,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:un},outputColorSpaceConfig:{drawingBufferColorSpace:un}},[un]:{primaries:e,whitePoint:r,transfer:pn,toXYZ:Ar,fromXYZ:Tr,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:un}}}),t}const Pr=Cr();function Rr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ir(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let kr;class Dr{static getDataURL(image){if(/^data:/i.test(image.src))return image.src;if("undefined"==typeof HTMLCanvasElement)return image.src;let canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===kr&&(kr=yr("canvas")),kr.width=image.width,kr.height=image.height;const t=kr.getContext("2d");image instanceof ImageData?t.putImageData(image,0,0):t.drawImage(image,0,0,image.width,image.height),canvas=kr}return canvas.toDataURL("image/png")}static sRGBToLinear(image){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){const canvas=yr("canvas");canvas.width=image.width,canvas.height=image.height;const t=canvas.getContext("2d");t.drawImage(image,0,0,image.width,image.height);const e=t.getImageData(0,0,image.width,image.height),data=e.data;for(let i=0;i<data.length;i++)data[i]=255*Rr(data[i]/255);return t.putImageData(e,0,0),canvas}if(image.data){const data=image.data.slice(0);for(let i=0;i<data.length;i++)data instanceof Uint8Array||data instanceof Uint8ClampedArray?data[i]=Math.floor(255*Rr(data[i]/255)):data[i]=Rr(data[i]);return{data:data,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}let Lr=0;class Fr{constructor(data=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Lr++}),this.uuid=ir(),this.data=data,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(meta){const t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];const output={uuid:this.uuid,url:""},data=this.data;if(null!==data){let t;if(Array.isArray(data)){t=[];for(let i=0,e=data.length;i<e;i++)data[i].isDataTexture?t.push(Or(data[i].image)):t.push(Or(data[i]))}else t=Or(data);output.url=t}return t||(meta.images[this.uuid]=output),output}}function Or(image){return"undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?Dr.getDataURL(image):image.data?{data:Array.from(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Nr=0;class Br extends Jn{constructor(image=Br.DEFAULT_IMAGE,t=Br.DEFAULT_MAPPING,e=Tt,n=Tt,r=Lt,o=Nt,l=Qt,h=Ut,c=Br.DEFAULT_ANISOTROPY,f=hn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Nr++}),this.uuid=ir(),this.name="",this.source=new Fr(image),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=e,this.wrapT=n,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=l,this.internalFormat=null,this.type=h,this.offset=new fr(0,0),this.repeat=new fr(1,1),this.center=new fr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.channel=source.channel,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.colorSpace=source.colorSpace,this.renderTarget=source.renderTarget,this.isRenderTargetTexture=source.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}toJSON(meta){const t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];const output={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(output.userData=this.userData),t||(meta.textures[this.uuid]=output),output}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==bt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case At:t.x=t.x-Math.floor(t.x);break;case Tt:t.x=t.x<0?0:1;break;case Ct:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case At:t.y=t.y-Math.floor(t.y);break;case Tt:t.y=t.y<0?0:1;break;case Ct:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}Br.DEFAULT_IMAGE=null,Br.DEFAULT_MAPPING=bt,Br.DEFAULT_ANISOTROPY=1;class Ur{constructor(t=0,e=0,n=0,r=1){Ur.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=this.w,l=t.elements;return this.x=l[0]*e+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*e+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*e+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*e+l[7]*n+l[11]*r+l[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}setAxisAngleFromRotationMatrix(t){let e,n,r,o;const l=.01,h=.1,c=t.elements,f=c[0],d=c[4],m=c[8],v=c[1],y=c[5],_=c[9],x=c[2],w=c[6],M=c[10];if(Math.abs(d-v)<l&&Math.abs(m-x)<l&&Math.abs(_-w)<l){if(Math.abs(d+v)<h&&Math.abs(m+x)<h&&Math.abs(_+w)<h&&Math.abs(f+y+M-3)<h)return this.set(1,0,0,0),this;e=Math.PI;const t=(f+1)/2,c=(y+1)/2,S=(M+1)/2,E=(d+v)/4,A=(m+x)/4,T=(_+w)/4;return t>c&&t>S?t<l?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(t),r=E/n,o=A/n):c>S?c<l?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(c),n=E/r,o=T/r):S<l?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(S),n=A/o,r=T/o),this.set(n,r,o,e),this}let s=Math.sqrt((w-_)*(w-_)+(m-x)*(m-x)+(v-d)*(v-d));return Math.abs(s)<.001&&(s=1),this.x=(w-_)/s,this.y=(m-x)/s,this.z=(v-d)/s,this.w=Math.acos((f+y+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=sr(this.x,t.x,e.x),this.y=sr(this.y,t.y,e.y),this.z=sr(this.z,t.z,e.z),this.w=sr(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=sr(this.x,t,e),this.y=sr(this.y,t,e),this.z=sr(this.z,t,e),this.w=sr(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class zr extends Jn{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Ur(0,0,t,e),this.scissorTest=!1,this.viewport=new Ur(0,0,t,e);const image={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Lt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Br(image,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let i=0;i<o;i++)this.textures[i]=r.clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(source){this.width=source.width,this.height=source.height,this.depth=source.depth,this.scissor.copy(source.scissor),this.scissorTest=source.scissorTest,this.viewport.copy(source.viewport),this.textures.length=0;for(let i=0,t=source.textures.length;i<t;i++)this.textures[i]=source.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const image=Object.assign({},source.texture.image);return this.texture.source=new Fr(image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,this.resolveDepthBuffer=source.resolveDepthBuffer,this.resolveStencilBuffer=source.resolveStencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Vr extends zr{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class jr extends Br{constructor(data=null,t=1,e=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:data,width:t,height:e,depth:n},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Hr extends Vr{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new jr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Gr extends Br{constructor(data=null,t=1,e=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:data,width:t,height:e,depth:n},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wr extends Vr{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Gr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class qr{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,o,l,h){let c=n[r+0],f=n[r+1],d=n[r+2],m=n[r+3];const v=o[l+0],y=o[l+1],_=o[l+2],x=o[l+3];if(0===h)return t[e+0]=c,t[e+1]=f,t[e+2]=d,void(t[e+3]=m);if(1===h)return t[e+0]=v,t[e+1]=y,t[e+2]=_,void(t[e+3]=x);if(m!==x||c!==v||f!==y||d!==_){let s=1-h;const t=c*v+f*y+d*_+m*x,e=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*e);s=Math.sin(s*o)/r,h=Math.sin(h*o)/r}const r=h*e;if(c=c*s+v*r,f=f*s+y*r,d=d*s+_*r,m=m*s+x*r,s===1-h){const t=1/Math.sqrt(c*c+f*f+d*d+m*m);c*=t,f*=t,d*=t,m*=t}}t[e]=c,t[e+1]=f,t[e+2]=d,t[e+3]=m}static multiplyQuaternionsFlat(t,e,n,r,o,l){const h=n[r],c=n[r+1],f=n[r+2],d=n[r+3],m=o[l],v=o[l+1],y=o[l+2],_=o[l+3];return t[e]=h*_+d*m+c*y-f*v,t[e+1]=c*_+d*v+f*m-h*y,t[e+2]=f*_+d*y+h*v-c*m,t[e+3]=d*_-h*m-c*v-f*y,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,o=t._z,l=t._order,h=Math.cos,c=Math.sin,f=h(n/2),d=h(r/2),m=h(o/2),v=c(n/2),y=c(r/2),_=c(o/2);switch(l){case"XYZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"YXZ":this._x=v*d*m+f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"ZXY":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m-v*y*_;break;case"ZYX":this._x=v*d*m-f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m+v*y*_;break;case"YZX":this._x=v*d*m+f*y*_,this._y=f*y*m+v*d*_,this._z=f*d*_-v*y*m,this._w=f*d*m-v*y*_;break;case"XZY":this._x=v*d*m-f*y*_,this._y=f*y*m-v*d*_,this._z=f*d*_+v*y*m,this._w=f*d*m+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],o=e[8],l=e[1],h=e[5],c=e[9],f=e[2],d=e[6],m=e[10],v=n+h+m;if(v>0){const s=.5/Math.sqrt(v+1);this._w=.25/s,this._x=(d-c)*s,this._y=(o-f)*s,this._z=(l-r)*s}else if(n>h&&n>m){const s=2*Math.sqrt(1+n-h-m);this._w=(d-c)/s,this._x=.25*s,this._y=(r+l)/s,this._z=(o+f)/s}else if(h>m){const s=2*Math.sqrt(1+h-n-m);this._w=(o-f)/s,this._x=(r+l)/s,this._y=.25*s,this._z=(c+d)/s}else{const s=2*Math.sqrt(1+m-n-h);this._w=(l-r)/s,this._x=(o+f)/s,this._y=(c+d)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(q){return 2*Math.acos(Math.abs(sr(this.dot(q),-1,1)))}rotateTowards(q,t){const e=this.angleTo(q);if(0===e)return this;const n=Math.min(1,t/e);return this.slerp(q,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(q){return this.multiplyQuaternions(this,q)}premultiply(q){return this.multiplyQuaternions(q,this)}multiplyQuaternions(a,b){const t=a._x,e=a._y,n=a._z,r=a._w,o=b._x,l=b._y,h=b._z,c=b._w;return this._x=t*c+r*o+e*h-n*l,this._y=e*c+r*l+n*o-t*h,this._z=n*c+r*h+t*l-e*o,this._w=r*c-t*o-e*l-n*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,o=this._z,l=this._w;let h=l*t._w+n*t._x+r*t._y+o*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;const c=1-h*h;if(c<=Number.EPSILON){const s=1-e;return this._w=s*l+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*o+e*this._z,this.normalize(),this}const f=Math.sqrt(c),d=Math.atan2(f,h),m=Math.sin((1-e)*d)/f,v=Math.sin(e*d)/f;return this._w=l*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=o*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Xr{constructor(t=0,e=0,n=0){Xr.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}applyEuler(t){return this.applyQuaternion(Zr.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Zr.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=t.elements,l=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*l,this}applyQuaternion(q){const t=this.x,e=this.y,n=this.z,r=q.x,o=q.y,l=q.z,h=q.w,c=2*(o*n-l*e),f=2*(l*t-r*n),d=2*(r*e-o*t);return this.x=t+h*c+o*d-l*f,this.y=e+h*f+l*c-r*d,this.z=n+h*d+r*f-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=sr(this.x,t.x,e.x),this.y=sr(this.y,t.y,e.y),this.z=sr(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=sr(this.x,t,e),this.y=sr(this.y,t,e),this.z=sr(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(a,b){const t=a.x,e=a.y,n=a.z,r=b.x,o=b.y,l=b.z;return this.x=e*l-n*o,this.y=n*r-t*l,this.z=t*o-e*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Yr.copy(this).projectOnVector(t),this.sub(Yr)}reflect(t){return this.sub(Yr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(sr(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,u=2*Math.random()-1,e=Math.sqrt(1-u*u);return this.x=e*Math.cos(t),this.y=u,this.z=e*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yr=new Xr,Zr=new qr;class Kr{constructor(t=new Xr(1/0,1/0,1/0),e=new Xr(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i+=3)this.expandByPoint(Jr.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,e=t.count;i<e;i++)this.expandByPoint(Jr.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,e){const n=Jr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(object,t=!1){return this.makeEmpty(),this.expandByObject(object,t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(object,t=!1){object.updateWorldMatrix(!1,!1);const e=object.geometry;if(void 0!==e){const n=e.getAttribute("position");if(!0===t&&void 0!==n&&!0!==object.isInstancedMesh)for(let i=0,t=n.count;i<t;i++)!0===object.isMesh?object.getVertexPosition(i,Jr):Jr.fromBufferAttribute(n,i),Jr.applyMatrix4(object.matrixWorld),this.expandByPoint(Jr);else void 0!==object.boundingBox?(null===object.boundingBox&&object.computeBoundingBox(),Qr.copy(object.boundingBox)):(null===e.boundingBox&&e.computeBoundingBox(),Qr.copy(e.boundingBox)),Qr.applyMatrix4(object.matrixWorld),this.union(Qr)}const n=object.children;for(let i=0,e=n.length;i<e;i++)this.expandByObject(n[i],t);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Jr),Jr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(oi),ai.subVectors(this.max,oi),ti.subVectors(t.a,oi),ei.subVectors(t.b,oi),ni.subVectors(t.c,oi),ri.subVectors(ei,ti),ii.subVectors(ni,ei),si.subVectors(ti,ni);let e=[0,-ri.z,ri.y,0,-ii.z,ii.y,0,-si.z,si.y,ri.z,0,-ri.x,ii.z,0,-ii.x,si.z,0,-si.x,-ri.y,ri.x,0,-ii.y,ii.x,0,-si.y,si.x,0];return!!ci(e,ti,ei,ni,ai)&&(e=[1,0,0,0,1,0,0,0,1],!!ci(e,ti,ei,ni,ai)&&(hi.crossVectors(ri,ii),e=[hi.x,hi.y,hi.z],ci(e,ti,ei,ni,ai)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Jr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Jr).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||($r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),$r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),$r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),$r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),$r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),$r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),$r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),$r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints($r)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const $r=[new Xr,new Xr,new Xr,new Xr,new Xr,new Xr,new Xr,new Xr],Jr=new Xr,Qr=new Kr,ti=new Xr,ei=new Xr,ni=new Xr,ri=new Xr,ii=new Xr,si=new Xr,oi=new Xr,ai=new Xr,hi=new Xr,ui=new Xr;function ci(t,e,n,r,o){for(let i=0,l=t.length-3;i<=l;i+=3){ui.fromArray(t,i);const l=o.x*Math.abs(ui.x)+o.y*Math.abs(ui.y)+o.z*Math.abs(ui.z),h=e.dot(ui),c=n.dot(ui),f=r.dot(ui);if(Math.max(-Math.max(h,c,f),Math.min(h,c,f))>l)return!1}return!0}const fi=new Kr,pi=new Xr,di=new Xr;class mi{constructor(t=new Xr,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):fi.setFromPoints(t).getCenter(n);let r=0;for(let i=0,e=t.length;i<e;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;pi.subVectors(t,this.center);const e=pi.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(pi,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(di.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(pi.copy(t.center).add(di)),this.expandByPoint(pi.copy(t.center).sub(di))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const gi=new Xr,vi=new Xr,yi=new Xr,_i=new Xr,bi=new Xr,xi=new Xr,wi=new Xr;class Mi{constructor(t=new Xr,e=new Xr(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gi)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gi.copy(this.origin).addScaledVector(this.direction,e),gi.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){vi.copy(t).add(e).multiplyScalar(.5),yi.copy(e).sub(t).normalize(),_i.copy(this.origin).sub(vi);const o=.5*t.distanceTo(e),l=-this.direction.dot(yi),h=_i.dot(this.direction),c=-_i.dot(yi),f=_i.lengthSq(),d=Math.abs(1-l*l);let m,v,y,_;if(d>0)if(m=l*c-h,v=l*h-c,_=o*d,m>=0)if(v>=-_)if(v<=_){const t=1/d;m*=t,v*=t,y=m*(m+l*v+2*h)+v*(l*m+v+2*c)+f}else v=o,m=Math.max(0,-(l*v+h)),y=-m*m+v*(v+2*c)+f;else v=-o,m=Math.max(0,-(l*v+h)),y=-m*m+v*(v+2*c)+f;else v<=-_?(m=Math.max(0,-(-l*o+h)),v=m>0?-o:Math.min(Math.max(-o,-c),o),y=-m*m+v*(v+2*c)+f):v<=_?(m=0,v=Math.min(Math.max(-o,-c),o),y=v*(v+2*c)+f):(m=Math.max(0,-(l*o+h)),v=m>0?o:Math.min(Math.max(-o,-c),o),y=-m*m+v*(v+2*c)+f);else v=l>0?-o:o,m=Math.max(0,-(l*v+h)),y=-m*m+v*(v+2*c)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(vi).addScaledVector(yi,v),y}intersectSphere(t,e){gi.subVectors(t.center,this.origin);const n=gi.dot(this.direction),r=gi.dot(gi)-n*n,o=t.radius*t.radius;if(r>o)return null;const l=Math.sqrt(o-r),h=n-l,c=n+l;return c<0?null:h<0?this.at(c,e):this.at(h,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,o,l,h,c;const f=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,v=this.origin;return f>=0?(n=(t.min.x-v.x)*f,r=(t.max.x-v.x)*f):(n=(t.max.x-v.x)*f,r=(t.min.x-v.x)*f),d>=0?(o=(t.min.y-v.y)*d,l=(t.max.y-v.y)*d):(o=(t.max.y-v.y)*d,l=(t.min.y-v.y)*d),n>l||o>r?null:((o>n||isNaN(n))&&(n=o),(l<r||isNaN(r))&&(r=l),m>=0?(h=(t.min.z-v.z)*m,c=(t.max.z-v.z)*m):(h=(t.max.z-v.z)*m,c=(t.min.z-v.z)*m),n>c||h>r?null:((h>n||n!=n)&&(n=h),(c<r||r!=r)&&(r=c),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,gi)}intersectTriangle(a,b,t,e,n){bi.subVectors(b,a),xi.subVectors(t,a),wi.crossVectors(bi,xi);let r,o=this.direction.dot(wi);if(o>0){if(e)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}_i.subVectors(this.origin,a);const l=r*this.direction.dot(xi.crossVectors(_i,xi));if(l<0)return null;const h=r*this.direction.dot(bi.cross(_i));if(h<0)return null;if(l+h>o)return null;const c=-r*_i.dot(wi);return c<0?null:this.at(c/o,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Si{constructor(t,e,n,r,o,l,h,c,f,d,m,v,y,_,x,w){Si.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,o,l,h,c,f,d,m,v,y,_,x,w)}set(t,e,n,r,o,l,h,c,f,d,m,v,y,_,x,w){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=r,M[1]=o,M[5]=l,M[9]=h,M[13]=c,M[2]=f,M[6]=d,M[10]=m,M[14]=v,M[3]=y,M[7]=_,M[11]=x,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Si).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Ei.setFromMatrixColumn(t,0).length(),o=1/Ei.setFromMatrixColumn(t,1).length(),l=1/Ei.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),b=Math.sin(n),l=Math.cos(r),h=Math.sin(r),c=Math.cos(o),f=Math.sin(o);if("XYZ"===t.order){const t=a*c,n=a*f,r=b*c,o=b*f;e[0]=l*c,e[4]=-l*f,e[8]=h,e[1]=n+r*h,e[5]=t-o*h,e[9]=-b*l,e[2]=o-t*h,e[6]=r+n*h,e[10]=a*l}else if("YXZ"===t.order){const t=l*c,n=l*f,r=h*c,o=h*f;e[0]=t+o*b,e[4]=r*b-n,e[8]=a*h,e[1]=a*f,e[5]=a*c,e[9]=-b,e[2]=n*b-r,e[6]=o+t*b,e[10]=a*l}else if("ZXY"===t.order){const t=l*c,n=l*f,r=h*c,o=h*f;e[0]=t-o*b,e[4]=-a*f,e[8]=r+n*b,e[1]=n+r*b,e[5]=a*c,e[9]=o-t*b,e[2]=-a*h,e[6]=b,e[10]=a*l}else if("ZYX"===t.order){const t=a*c,n=a*f,r=b*c,o=b*f;e[0]=l*c,e[4]=r*h-n,e[8]=t*h+o,e[1]=l*f,e[5]=o*h+t,e[9]=n*h-r,e[2]=-h,e[6]=b*l,e[10]=a*l}else if("YZX"===t.order){const t=a*l,n=a*h,r=b*l,o=b*h;e[0]=l*c,e[4]=o-t*f,e[8]=r*f+n,e[1]=f,e[5]=a*c,e[9]=-b*c,e[2]=-h*c,e[6]=n*f+r,e[10]=t-o*f}else if("XZY"===t.order){const t=a*l,n=a*h,r=b*l,o=b*h;e[0]=l*c,e[4]=-f,e[8]=h*c,e[1]=t*f+o,e[5]=a*c,e[9]=n*f-r,e[2]=r*f-n,e[6]=b*c,e[10]=o*f+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(q){return this.compose(Ti,q,Ci)}lookAt(t,e,n){const r=this.elements;return Ii.subVectors(t,e),0===Ii.lengthSq()&&(Ii.z=1),Ii.normalize(),Pi.crossVectors(n,Ii),0===Pi.lengthSq()&&(1===Math.abs(n.z)?Ii.x+=1e-4:Ii.z+=1e-4,Ii.normalize(),Pi.crossVectors(n,Ii)),Pi.normalize(),Ri.crossVectors(Ii,Pi),r[0]=Pi.x,r[4]=Ri.x,r[8]=Ii.x,r[1]=Pi.y,r[5]=Ri.y,r[9]=Ii.y,r[2]=Pi.z,r[6]=Ri.z,r[10]=Ii.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[4],l=t[8],h=t[12],c=t[1],f=t[5],d=t[9],m=t[13],v=t[2],y=t[6],_=t[10],x=t[14],w=t[3],M=t[7],S=t[11],E=t[15],A=e[0],T=e[4],C=e[8],P=e[12],R=e[1],I=e[5],k=e[9],D=e[13],L=e[2],F=e[6],O=e[10],N=e[14],B=e[3],U=e[7],z=e[11],V=e[15];return n[0]=r*A+o*R+l*L+h*B,n[4]=r*T+o*I+l*F+h*U,n[8]=r*C+o*k+l*O+h*z,n[12]=r*P+o*D+l*N+h*V,n[1]=c*A+f*R+d*L+m*B,n[5]=c*T+f*I+d*F+m*U,n[9]=c*C+f*k+d*O+m*z,n[13]=c*P+f*D+d*N+m*V,n[2]=v*A+y*R+_*L+x*B,n[6]=v*T+y*I+_*F+x*U,n[10]=v*C+y*k+_*O+x*z,n[14]=v*P+y*D+_*N+x*V,n[3]=w*A+M*R+S*L+E*B,n[7]=w*T+M*I+S*F+E*U,n[11]=w*C+M*k+S*O+E*z,n[15]=w*P+M*D+S*N+E*V,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[4]*=s,t[8]*=s,t[12]*=s,t[1]*=s,t[5]*=s,t[9]*=s,t[13]*=s,t[2]*=s,t[6]*=s,t[10]*=s,t[14]*=s,t[3]*=s,t[7]*=s,t[11]*=s,t[15]*=s,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],l=t[1],h=t[5],c=t[9],f=t[13],d=t[2],m=t[6],v=t[10],y=t[14];return t[3]*(+o*c*m-r*f*m-o*h*v+n*f*v+r*h*y-n*c*y)+t[7]*(+e*c*y-e*f*v+o*l*v-r*l*y+r*f*d-o*c*d)+t[11]*(+e*f*m-e*h*y-o*l*m+n*l*y+o*h*d-n*f*d)+t[15]*(-r*h*d-e*c*m+e*h*v+r*l*m-n*l*v+n*c*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],h=t[5],c=t[6],f=t[7],d=t[8],m=t[9],v=t[10],y=t[11],_=t[12],x=t[13],w=t[14],M=t[15],S=m*w*f-x*v*f+x*c*y-h*w*y-m*c*M+h*v*M,E=_*v*f-d*w*f-_*c*y+l*w*y+d*c*M-l*v*M,A=d*x*f-_*m*f+_*h*y-l*x*y-d*h*M+l*m*M,T=_*m*c-d*x*c-_*h*v+l*x*v+d*h*w-l*m*w,C=e*S+n*E+r*A+o*T;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/C;return t[0]=S*P,t[1]=(x*v*o-m*w*o-x*r*y+n*w*y+m*r*M-n*v*M)*P,t[2]=(h*w*o-x*c*o+x*r*f-n*w*f-h*r*M+n*c*M)*P,t[3]=(m*c*o-h*v*o-m*r*f+n*v*f+h*r*y-n*c*y)*P,t[4]=E*P,t[5]=(d*w*o-_*v*o+_*r*y-e*w*y-d*r*M+e*v*M)*P,t[6]=(_*c*o-l*w*o-_*r*f+e*w*f+l*r*M-e*c*M)*P,t[7]=(l*v*o-d*c*o+d*r*f-e*v*f-l*r*y+e*c*y)*P,t[8]=A*P,t[9]=(_*m*o-d*x*o-_*n*y+e*x*y+d*n*M-e*m*M)*P,t[10]=(l*x*o-_*h*o+_*n*f-e*x*f-l*n*M+e*h*M)*P,t[11]=(d*h*o-l*m*o-d*n*f+e*m*f+l*n*y-e*h*y)*P,t[12]=T*P,t[13]=(d*x*r-_*m*r+_*n*v-e*x*v-d*n*w+e*m*w)*P,t[14]=(_*h*r-l*x*r-_*n*c+e*x*c+l*n*w-e*h*w)*P,t[15]=(l*m*r-d*h*r+d*n*c-e*m*c-l*n*v+e*h*v)*P,this}scale(t){const e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,o=t.x,l=t.y,h=t.z,c=r*o,f=r*l;return this.set(c*o+n,c*l-s*h,c*h+s*l,0,c*l+s*h,f*l+n,f*h-s*o,0,c*h-s*l,f*h+s*o,r*h*h+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,o,l){return this.set(1,n,o,0,t,1,l,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,o=e._x,l=e._y,h=e._z,c=e._w,f=o+o,d=l+l,m=h+h,v=o*f,y=o*d,_=o*m,x=l*d,w=l*m,M=h*m,S=c*f,E=c*d,A=c*m,T=n.x,C=n.y,P=n.z;return r[0]=(1-(x+M))*T,r[1]=(y+A)*T,r[2]=(_-E)*T,r[3]=0,r[4]=(y-A)*C,r[5]=(1-(v+M))*C,r[6]=(w+S)*C,r[7]=0,r[8]=(_+E)*P,r[9]=(w-S)*P,r[10]=(1-(v+x))*P,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let o=Ei.set(r[0],r[1],r[2]).length();const l=Ei.set(r[4],r[5],r[6]).length(),h=Ei.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],Ai.copy(this);const c=1/o,f=1/l,d=1/h;return Ai.elements[0]*=c,Ai.elements[1]*=c,Ai.elements[2]*=c,Ai.elements[4]*=f,Ai.elements[5]*=f,Ai.elements[6]*=f,Ai.elements[8]*=d,Ai.elements[9]*=d,Ai.elements[10]*=d,e.setFromRotationMatrix(Ai),n.x=o,n.y=l,n.z=h,this}makePerspective(t,e,n,r,o,l,h=Zn){const c=this.elements,f=2*o/(e-t),d=2*o/(n-r),a=(e+t)/(e-t),b=(n+r)/(n-r);let m,v;if(h===Zn)m=-(l+o)/(l-o),v=-2*l*o/(l-o);else{if(h!==Kn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);m=-l/(l-o),v=-l*o/(l-o)}return c[0]=f,c[4]=0,c[8]=a,c[12]=0,c[1]=0,c[5]=d,c[9]=b,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,n,r,o,l,h=Zn){const c=this.elements,f=1/(e-t),d=1/(n-r),p=1/(l-o),m=(e+t)*f,v=(n+r)*d;let y,_;if(h===Zn)y=(l+o)*p,_=-2*p;else{if(h!==Kn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);y=o*p,_=-1*p}return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=_,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Ei=new Xr,Ai=new Si,Ti=new Xr(0,0,0),Ci=new Xr(1,1,1),Pi=new Xr,Ri=new Xr,Ii=new Xr,ki=new Si,Di=new qr;class Li{constructor(t=0,e=0,n=0,r=Li.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,o=r[0],l=r[4],h=r[8],c=r[1],f=r[5],d=r[9],m=r[2],v=r[6],y=r[10];switch(e){case"XYZ":this._y=Math.asin(sr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-sr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(h,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(sr(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-sr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(sr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(h,y));break;case"XZY":this._z=Math.asin(-sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(q,t,e){return ki.makeRotationFromQuaternion(q),this.setFromRotationMatrix(ki,t,e)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Di.setFromEuler(this),this.setFromQuaternion(Di,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Li.DEFAULT_ORDER="XYZ";class Fi{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Oi=0;const Ni=new Xr,Bi=new qr,Ui=new Si,zi=new Xr,Vi=new Xr,ji=new Xr,Hi=new qr,Gi=new Xr(1,0,0),Wi=new Xr(0,1,0),qi=new Xr(0,0,1),Xi={type:"added"},Yi={type:"removed"},Zi={type:"childadded",child:null},Ki={type:"childremoved",child:null};class $i extends Jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Oi++}),this.uuid=ir(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$i.DEFAULT_UP.clone();const t=new Xr,e=new Li,n=new qr,r=new Xr(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Si},normalMatrix:{value:new pr}}),this.matrix=new Si,this.matrixWorld=new Si,this.matrixAutoUpdate=$i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=$i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(q){return this.quaternion.premultiply(q),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(q){this.quaternion.copy(q)}rotateOnAxis(t,e){return Bi.setFromAxisAngle(t,e),this.quaternion.multiply(Bi),this}rotateOnWorldAxis(t,e){return Bi.setFromAxisAngle(t,e),this.quaternion.premultiply(Bi),this}rotateX(t){return this.rotateOnAxis(Gi,t)}rotateY(t){return this.rotateOnAxis(Wi,t)}rotateZ(t){return this.rotateOnAxis(qi,t)}translateOnAxis(t,e){return Ni.copy(t).applyQuaternion(this.quaternion),this.position.add(Ni.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Gi,t)}translateY(t){return this.translateOnAxis(Wi,t)}translateZ(t){return this.translateOnAxis(qi,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ui.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?zi.copy(t):zi.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ui.lookAt(Vi,zi,this.up):Ui.lookAt(zi,Vi,this.up),this.quaternion.setFromRotationMatrix(Ui),r&&(Ui.extractRotation(r.matrixWorld),Bi.setFromRotationMatrix(Ui),this.quaternion.premultiply(Bi.invert()))}add(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(object.removeFromParent(),object.parent=this,this.children.push(object),object.dispatchEvent(Xi),Zi.child=object,this.dispatchEvent(Zi),Zi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}remove(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(object);return-1!==t&&(object.parent=null,this.children.splice(t,1),object.dispatchEvent(Yi),Ki.child=object,this.dispatchEvent(Ki),Ki.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(object){return this.updateWorldMatrix(!0,!1),Ui.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),Ui.multiply(object.parent.matrixWorld)),object.applyMatrix4(Ui),object.removeFromParent(),object.parent=this,this.children.push(object),object.updateWorldMatrix(!1,!0),object.dispatchEvent(Xi),Zi.child=object,this.dispatchEvent(Zi),Zi.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const object=this.children[i].getObjectByProperty(t,e);if(void 0!==object)return object}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vi,t,ji),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vi,Hi,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){e[i].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let i=0,e=t.length;i<e;i++){t[i].updateWorldMatrix(!1,!0)}}}toJSON(meta){const t=void 0===meta||"string"==typeof meta,output={};t&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const object={};function e(t,element){return void 0===t[element.uuid]&&(t[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),object.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(object.type="BatchedMesh",object.perObjectFrustumCulled=this.perObjectFrustumCulled,object.sortObjects=this.sortObjects,object.drawRanges=this._drawRanges,object.reservedRanges=this._reservedRanges,object.visibility=this._visibility,object.active=this._active,object.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),object.maxInstanceCount=this._maxInstanceCount,object.maxVertexCount=this._maxVertexCount,object.maxIndexCount=this._maxIndexCount,object.geometryInitialized=this._geometryInitialized,object.geometryCount=this._geometryCount,object.matricesTexture=this._matricesTexture.toJSON(meta),null!==this._colorsTexture&&(object.colorsTexture=this._colorsTexture.toJSON(meta)),null!==this.boundingSphere&&(object.boundingSphere={center:object.boundingSphere.center.toArray(),radius:object.boundingSphere.radius}),null!==this.boundingBox&&(object.boundingBox={min:object.boundingBox.min.toArray(),max:object.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=e(meta.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let i=0,t=n.length;i<t;i++){const t=n[i];e(meta.shapes,t)}else e(meta.shapes,n)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(e(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(e(meta.materials,this.material[i]));object.material=t}else object.material=e(meta.materials,this.material);if(this.children.length>0){object.children=[];for(let i=0;i<this.children.length;i++)object.children.push(this.children[i].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(let i=0;i<this.animations.length;i++){const t=this.animations[i];object.animations.push(e(meta.animations,t))}}if(t){const t=n(meta.geometries),e=n(meta.materials),r=n(meta.textures),o=n(meta.images),l=n(meta.shapes),h=n(meta.skeletons),c=n(meta.animations),f=n(meta.nodes);t.length>0&&(output.geometries=t),e.length>0&&(output.materials=e),r.length>0&&(output.textures=r),o.length>0&&(output.images=o),l.length>0&&(output.shapes=l),h.length>0&&(output.skeletons=h),c.length>0&&(output.animations=c),f.length>0&&(output.nodes=f)}return output.object=object,output;function n(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(source,t=!0){if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldAutoUpdate=source.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.animations=source.animations.slice(),this.userData=JSON.parse(JSON.stringify(source.userData)),!0===t)for(let i=0;i<source.children.length;i++){const t=source.children[i];this.add(t.clone())}return this}}$i.DEFAULT_UP=new Xr(0,1,0),$i.DEFAULT_MATRIX_AUTO_UPDATE=!0,$i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ji=new Xr,Qi=new Xr,ts=new Xr,es=new Xr,ns=new Xr,rs=new Xr,is=new Xr,ss=new Xr,os=new Xr,as=new Xr,ls=new Ur,hs=new Ur,us=new Ur;class cs{constructor(a=new Xr,b=new Xr,t=new Xr){this.a=a,this.b=b,this.c=t}static getNormal(a,b,t,e){e.subVectors(t,b),Ji.subVectors(a,b),e.cross(Ji);const n=e.lengthSq();return n>0?e.multiplyScalar(1/Math.sqrt(n)):e.set(0,0,0)}static getBarycoord(t,a,b,e,n){Ji.subVectors(e,a),Qi.subVectors(b,a),ts.subVectors(t,a);const r=Ji.dot(Ji),o=Ji.dot(Qi),l=Ji.dot(ts),h=Qi.dot(Qi),c=Qi.dot(ts),f=r*h-o*o;if(0===f)return n.set(0,0,0),null;const d=1/f,u=(h*l-o*c)*d,m=(r*c-o*l)*d;return n.set(1-u-m,m,u)}static containsPoint(t,a,b,e){return null!==this.getBarycoord(t,a,b,e,es)&&(es.x>=0&&es.y>=0&&es.x+es.y<=1)}static getInterpolation(t,e,n,r,o,l,h,c){return null===this.getBarycoord(t,e,n,r,es)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,es.x),c.addScaledVector(l,es.y),c.addScaledVector(h,es.z),c)}static getInterpolatedAttribute(t,e,n,r,o,l){return ls.setScalar(0),hs.setScalar(0),us.setScalar(0),ls.fromBufferAttribute(t,e),hs.fromBufferAttribute(t,n),us.fromBufferAttribute(t,r),l.setScalar(0),l.addScaledVector(ls,o.x),l.addScaledVector(hs,o.y),l.addScaledVector(us,o.z),l}static isFrontFacing(a,b,t,e){return Ji.subVectors(t,b),Qi.subVectors(a,b),Ji.cross(Qi).dot(e)<0}set(a,b,t){return this.a.copy(a),this.b.copy(b),this.c.copy(t),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ji.subVectors(this.c,this.b),Qi.subVectors(this.a,this.b),.5*Ji.cross(Qi).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return cs.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return cs.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,o){return cs.getInterpolation(t,this.a,this.b,this.c,e,n,r,o)}containsPoint(t){return cs.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return cs.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(p,t){const a=this.a,b=this.b,e=this.c;let n,r;ns.subVectors(b,a),rs.subVectors(e,a),ss.subVectors(p,a);const o=ns.dot(ss),l=rs.dot(ss);if(o<=0&&l<=0)return t.copy(a);os.subVectors(p,b);const h=ns.dot(os),c=rs.dot(os);if(h>=0&&c<=h)return t.copy(b);const f=o*c-h*l;if(f<=0&&o>=0&&h<=0)return n=o/(o-h),t.copy(a).addScaledVector(ns,n);as.subVectors(p,e);const d=ns.dot(as),m=rs.dot(as);if(m>=0&&d<=m)return t.copy(e);const v=d*l-o*m;if(v<=0&&l>=0&&m<=0)return r=l/(l-m),t.copy(a).addScaledVector(rs,r);const y=h*m-d*c;if(y<=0&&c-h>=0&&d-m>=0)return is.subVectors(e,b),r=(c-h)/(c-h+(d-m)),t.copy(b).addScaledVector(is,r);const _=1/(y+v+f);return n=v*_,r=f*_,t.copy(a).addScaledVector(ns,n).addScaledVector(rs,r)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const fs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ps={h:0,s:0,l:0},ds={h:0,s:0,l:0};function ms(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}class gs{constructor(t,g,b){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,g,b)}set(t,g,b){if(void 0===g&&void 0===b){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,g,b);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=un){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Pr.toWorkingColorSpace(this,e),this}setRGB(t,g,b,e=Pr.workingColorSpace){return this.r=t,this.g=g,this.b=b,Pr.toWorkingColorSpace(this,e),this}setHSL(t,s,e,n=Pr.workingColorSpace){if(t=or(t,1),s=sr(s,0,1),e=sr(e,0,1),0===s)this.r=this.g=this.b=e;else{const p=e<=.5?e*(1+s):e+s-e*s,q=2*e-p;this.r=ms(q,p,t+1/3),this.g=ms(q,p,t),this.b=ms(q,p,t-1/3)}return Pr.toWorkingColorSpace(this,n),this}setStyle(style,t=un){function e(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(style)){let r;const o=n[1],l=n[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return e(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return e(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return e(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+style)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(style)){const e=n[1],r=e.length;if(3===r)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(e,16),t);console.warn("THREE.Color: Invalid hex color "+style)}else if(style&&style.length>0)return this.setColorName(style,t);return this}setColorName(style,t=un){const e=fs[style.toLowerCase()];return void 0!==e?this.setHex(e,t):console.warn("THREE.Color: Unknown color "+style),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Rr(t.r),this.g=Rr(t.g),this.b=Rr(t.b),this}copyLinearToSRGB(t){return this.r=Ir(t.r),this.g=Ir(t.g),this.b=Ir(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=un){return Pr.fromWorkingColorSpace(vs.copy(this),t),65536*Math.round(sr(255*vs.r,0,255))+256*Math.round(sr(255*vs.g,0,255))+Math.round(sr(255*vs.b,0,255))}getHexString(t=un){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Pr.workingColorSpace){Pr.fromWorkingColorSpace(vs.copy(this),e);const n=vs.r,g=vs.g,b=vs.b,r=Math.max(n,g,b),o=Math.min(n,g,b);let l,h;const c=(o+r)/2;if(o===r)l=0,h=0;else{const t=r-o;switch(h=c<=.5?t/(r+o):t/(2-r-o),r){case n:l=(g-b)/t+(g<b?6:0);break;case g:l=(b-n)/t+2;break;case b:l=(n-g)/t+4}l/=6}return t.h=l,t.s=h,t.l=c,t}getRGB(t,e=Pr.workingColorSpace){return Pr.fromWorkingColorSpace(vs.copy(this),e),t.r=vs.r,t.g=vs.g,t.b=vs.b,t}getStyle(t=un){Pr.fromWorkingColorSpace(vs.copy(this),t);const e=vs.r,g=vs.g,b=vs.b;return t!==un?`color(${t} ${e.toFixed(3)} ${g.toFixed(3)} ${b.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*g)},${Math.round(255*b)})`}offsetHSL(t,s,e){return this.getHSL(ps),this.setHSL(ps.h+t,ps.s+s,ps.l+e)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ps),t.getHSL(ds);const n=ar(ps.h,ds.h,e),s=ar(ps.s,ds.s,e),r=ar(ps.l,ds.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,g=this.g,b=this.b,n=t.elements;return this.r=n[0]*e+n[3]*g+n[6]*b,this.g=n[1]*e+n[4]*g+n[7]*b,this.b=n[2]*e+n[5]*g+n[8]*b,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vs=new gs;gs.NAMES=fs;let ys=0;class _s extends Jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ys++}),this.uuid=ir(),this.name="",this.type="Material",this.blending=E,this.side=x,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=U,this.blendDst=z,this.blendEquation=R,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gs(0,0,0),this.blendAlpha=0,this.depthFunc=tt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Pn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=mn,this.stencilZFail=mn,this.stencilZPass=mn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(meta){const t=void 0===meta||"string"==typeof meta;t&&(meta={textures:{},images:{}});const data={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function e(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(data.dispersion=this.dispersion),void 0!==this.iridescence&&(data.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(data.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(data.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(data.iridescenceMap=this.iridescenceMap.toJSON(meta).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(data.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(meta).uuid),void 0!==this.anisotropy&&(data.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(data.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(data.anisotropyMap=this.anisotropyMap.toJSON(meta).uuid),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapRotation&&(data.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==E&&(data.blending=this.blending),this.side!==x&&(data.side=this.side),!0===this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=!0),this.blendSrc!==U&&(data.blendSrc=this.blendSrc),this.blendDst!==z&&(data.blendDst=this.blendDst),this.blendEquation!==R&&(data.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(data.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(data.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(data.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(data.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(data.blendAlpha=this.blendAlpha),this.depthFunc!==tt&&(data.depthFunc=this.depthFunc),!1===this.depthTest&&(data.depthTest=this.depthTest),!1===this.depthWrite&&(data.depthWrite=this.depthWrite),!1===this.colorWrite&&(data.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(data.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Pn&&(data.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(data.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(data.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==mn&&(data.stencilFail=this.stencilFail),this.stencilZFail!==mn&&(data.stencilZFail=this.stencilZFail),this.stencilZPass!==mn&&(data.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(data.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaHash&&(data.alphaHash=!0),!0===this.alphaToCoverage&&(data.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=!0),!0===this.forceSinglePass&&(data.forceSinglePass=!0),!0===this.wireframe&&(data.wireframe=!0),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=!0),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),!1===this.fog&&(data.fog=!1),Object.keys(this.userData).length>0&&(data.userData=this.userData),t){const t=e(meta.textures),n=e(meta.images);t.length>0&&(data.textures=t),n.length>0&&(data.images=n)}return data}clone(){return(new this.constructor).copy(this)}copy(source){this.name=source.name,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.blendColor.copy(source.blendColor),this.blendAlpha=source.blendAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;const t=source.clippingPlanes;let e=null;if(null!==t){const n=t.length;e=new Array(n);for(let i=0;i!==n;++i)e[i]=t[i].clone()}return this.clippingPlanes=e,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaHash=source.alphaHash,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.forceSinglePass=source.forceSinglePass,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class bs extends _s{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Li,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}const xs=ws();function ws(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),o=new Uint32Array(512);for(let i=0;i<256;++i){const t=i-127;t<-27?(r[i]=0,r[256|i]=32768,o[i]=24,o[256|i]=24):t<-14?(r[i]=1024>>-t-14,r[256|i]=1024>>-t-14|32768,o[i]=-t-1,o[256|i]=-t-1):t<=15?(r[i]=t+15<<10,r[256|i]=t+15<<10|32768,o[i]=13,o[256|i]=13):t<128?(r[i]=31744,r[256|i]=64512,o[i]=24,o[256|i]=24):(r[i]=31744,r[256|i]=64512,o[i]=13,o[256|i]=13)}const l=new Uint32Array(2048),h=new Uint32Array(64),c=new Uint32Array(64);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;!(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,l[i]=t|e}for(let i=1024;i<2048;++i)l[i]=939524096+(i-1024<<13);for(let i=1;i<31;++i)h[i]=i<<23;h[31]=1199570944,h[32]=2147483648;for(let i=33;i<63;++i)h[i]=2147483648+(i-32<<23);h[63]=3347054592;for(let i=1;i<64;++i)32!==i&&(c[i]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:o,mantissaTable:l,exponentTable:h,offsetTable:c}}function Ms(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=sr(t,-65504,65504),xs.floatView[0]=t;const e=xs.uint32View[0],n=e>>23&511;return xs.baseTable[n]+((8388607&e)>>xs.shiftTable[n])}function Ss(t){const e=t>>10;return xs.uint32View[0]=xs.mantissaTable[xs.offsetTable[e]+(1023&t)]+xs.exponentTable[e],xs.floatView[0]}const Es={toHalfFloat:Ms,fromHalfFloat:Ss},As=new Xr,Ts=new fr;let Cs=0;class Ps{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Cs++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Bn,this.updateRanges=[],this.gpuType=Wt,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this.gpuType=source.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let i=0,e=this.count;i<e;i++)Ts.fromBufferAttribute(this,i),Ts.applyMatrix3(t),this.setXY(i,Ts.x,Ts.y);else if(3===this.itemSize)for(let i=0,e=this.count;i<e;i++)As.fromBufferAttribute(this,i),As.applyMatrix3(t),this.setXYZ(i,As.x,As.y,As.z);return this}applyMatrix4(t){for(let i=0,e=this.count;i<e;i++)As.fromBufferAttribute(this,i),As.applyMatrix4(t),this.setXYZ(i,As.x,As.y,As.z);return this}applyNormalMatrix(t){for(let i=0,e=this.count;i<e;i++)As.fromBufferAttribute(this,i),As.applyNormalMatrix(t),this.setXYZ(i,As.x,As.y,As.z);return this}transformDirection(t){for(let i=0,e=this.count;i<e;i++)As.fromBufferAttribute(this,i),As.transformDirection(t),this.setXYZ(i,As.x,As.y,As.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,component){let e=this.array[t*this.itemSize+component];return this.normalized&&(e=lr(e,this.array)),e}setComponent(t,component,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+component]=e,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=lr(e,this.array)),e}setX(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=lr(e,this.array)),e}setY(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=lr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=lr(e,this.array)),e}setW(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array),o=ur(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),this.usage!==Bn&&(data.usage=this.usage),data}}class Rs extends Ps{constructor(t,e,n){super(new Int8Array(t),e,n)}}class Is extends Ps{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class ks extends Ps{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Ds extends Ps{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Ls extends Ps{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Fs extends Ps{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Os extends Ps{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Ns extends Ps{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Ss(this.array[t*this.itemSize]);return this.normalized&&(e=lr(e,this.array)),e}setX(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize]=Ms(e),this}getY(t){let e=Ss(this.array[t*this.itemSize+1]);return this.normalized&&(e=lr(e,this.array)),e}setY(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+1]=Ms(e),this}getZ(t){let e=Ss(this.array[t*this.itemSize+2]);return this.normalized&&(e=lr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+2]=Ms(e),this}getW(t){let e=Ss(this.array[t*this.itemSize+3]);return this.normalized&&(e=lr(e,this.array)),e}setW(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+3]=Ms(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array)),this.array[t+0]=Ms(e),this.array[t+1]=Ms(n),this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array)),this.array[t+0]=Ms(e),this.array[t+1]=Ms(n),this.array[t+2]=Ms(r),this}setXYZW(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array),o=ur(o,this.array)),this.array[t+0]=Ms(e),this.array[t+1]=Ms(n),this.array[t+2]=Ms(r),this.array[t+3]=Ms(o),this}}class Bs extends Ps{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Us=0;const zs=new Si,Vs=new $i,js=new Xr,Hs=new Kr,Gs=new Kr,Ws=new Xr;class qs extends Jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Us++}),this.uuid=ir(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(mr(t)?Os:Ls)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new pr).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(q){return zs.makeRotationFromQuaternion(q),this.applyMatrix4(zs),this}rotateX(t){return zs.makeRotationX(t),this.applyMatrix4(zs),this}rotateY(t){return zs.makeRotationY(t),this.applyMatrix4(zs),this}rotateZ(t){return zs.makeRotationZ(t),this.applyMatrix4(zs),this}translate(t,e,n){return zs.makeTranslation(t,e,n),this.applyMatrix4(zs),this}scale(t,e,n){return zs.makeScale(t,e,n),this.applyMatrix4(zs),this}lookAt(t){return Vs.lookAt(t),Vs.updateMatrix(),this.applyMatrix4(Vs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(js).negate(),this.translate(js.x,js.y,js.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}this.setAttribute("position",new Bs(e,3))}else{const n=Math.min(t.length,e.count);for(let i=0;i<n;i++){const n=t[i];e.setXYZ(i,n.x,n.y,n.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Kr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Xr(-1/0,-1/0,-1/0),new Xr(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];Hs.setFromBufferAttribute(t),this.morphTargetsRelative?(Ws.addVectors(this.boundingBox.min,Hs.min),this.boundingBox.expandByPoint(Ws),Ws.addVectors(this.boundingBox.max,Hs.max),this.boundingBox.expandByPoint(Ws)):(this.boundingBox.expandByPoint(Hs.min),this.boundingBox.expandByPoint(Hs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new mi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Xr,1/0);if(t){const n=this.boundingSphere.center;if(Hs.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];Gs.setFromBufferAttribute(t),this.morphTargetsRelative?(Ws.addVectors(Hs.min,Gs.min),Hs.expandByPoint(Ws),Ws.addVectors(Hs.max,Gs.max),Hs.expandByPoint(Ws)):(Hs.expandByPoint(Gs.min),Hs.expandByPoint(Gs.max))}Hs.getCenter(n);let r=0;for(let i=0,e=t.count;i<e;i++)Ws.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Ws));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],l=this.morphTargetsRelative;for(let e=0,h=o.count;e<h;e++)Ws.fromBufferAttribute(o,e),l&&(js.fromBufferAttribute(t,e),Ws.add(js)),r=Math.max(r,n.distanceToSquared(Ws))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,o=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ps(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),h=[],c=[];for(let i=0;i<n.count;i++)h[i]=new Xr,c[i]=new Xr;const f=new Xr,d=new Xr,m=new Xr,v=new fr,y=new fr,_=new fr,x=new Xr,w=new Xr;function M(a,b,t){f.fromBufferAttribute(n,a),d.fromBufferAttribute(n,b),m.fromBufferAttribute(n,t),v.fromBufferAttribute(o,a),y.fromBufferAttribute(o,b),_.fromBufferAttribute(o,t),d.sub(f),m.sub(f),y.sub(v),_.sub(v);const e=1/(y.x*_.y-_.x*y.y);isFinite(e)&&(x.copy(d).multiplyScalar(_.y).addScaledVector(m,-y.y).multiplyScalar(e),w.copy(m).multiplyScalar(y.x).addScaledVector(d,-_.x).multiplyScalar(e),h[a].add(x),h[b].add(x),h[t].add(x),c[a].add(w),c[b].add(w),c[t].add(w))}let S=this.groups;0===S.length&&(S=[{start:0,count:t.count}]);for(let i=0,e=S.length;i<e;++i){const e=S[i],n=e.start;for(let r=n,o=n+e.count;r<o;r+=3)M(t.getX(r+0),t.getX(r+1),t.getX(r+2))}const E=new Xr,A=new Xr,T=new Xr,C=new Xr;function P(t){T.fromBufferAttribute(r,t),C.copy(T);const e=h[t];E.copy(e),E.sub(T.multiplyScalar(T.dot(e))).normalize(),A.crossVectors(C,e);const n=A.dot(c[t])<0?-1:1;l.setXYZW(t,E.x,E.y,E.z,n)}for(let i=0,e=S.length;i<e;++i){const e=S[i],n=e.start;for(let r=n,o=n+e.count;r<o;r+=3)P(t.getX(r+0)),P(t.getX(r+1)),P(t.getX(r+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ps(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let i=0,t=n.count;i<t;i++)n.setXYZ(i,0,0,0);const r=new Xr,o=new Xr,l=new Xr,h=new Xr,c=new Xr,f=new Xr,d=new Xr,m=new Xr;if(t)for(let i=0,v=t.count;i<v;i+=3){const v=t.getX(i+0),y=t.getX(i+1),_=t.getX(i+2);r.fromBufferAttribute(e,v),o.fromBufferAttribute(e,y),l.fromBufferAttribute(e,_),d.subVectors(l,o),m.subVectors(r,o),d.cross(m),h.fromBufferAttribute(n,v),c.fromBufferAttribute(n,y),f.fromBufferAttribute(n,_),h.add(d),c.add(d),f.add(d),n.setXYZ(v,h.x,h.y,h.z),n.setXYZ(y,c.x,c.y,c.z),n.setXYZ(_,f.x,f.y,f.z)}else for(let i=0,t=e.count;i<t;i+=3)r.fromBufferAttribute(e,i+0),o.fromBufferAttribute(e,i+1),l.fromBufferAttribute(e,i+2),d.subVectors(l,o),m.subVectors(r,o),d.cross(m),n.setXYZ(i+0,d.x,d.y,d.z),n.setXYZ(i+1,d.x,d.y,d.z),n.setXYZ(i+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,e=t.count;i<e;i++)Ws.fromBufferAttribute(t,i),Ws.normalize(),t.setXYZ(i,Ws.x,Ws.y,Ws.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,o=t.normalized,l=new n.constructor(e.length*r);let h=0,c=0;for(let i=0,o=e.length;i<o;i++){h=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)l[c++]=n[h++]}return new Ps(l,r,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new qs,n=this.index.array,r=this.attributes;for(const o in r){const l=t(r[o],n);e.setAttribute(o,l)}const o=this.morphAttributes;for(const r in o){const l=[],h=o[r];for(let i=0,e=h.length;i<e;i++){const e=t(h[i],n);l.push(e)}e.morphAttributes[r]=l}e.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let i=0,t=l.length;i<t;i++){const t=l[i];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const data={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const e in t)void 0!==t[e]&&(data[e]=t[e]);return data}data.data={attributes:{}};const t=this.index;null!==t&&(data.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const e=this.attributes;for(const t in e){const n=e[t];data.data.attributes[t]=n.toJSON(data.data)}const n={};let r=!1;for(const t in this.morphAttributes){const e=this.morphAttributes[t],o=[];for(let i=0,t=e.length;i<t;i++){const t=e[i];o.push(t.toJSON(data.data))}o.length>0&&(n[t]=o,r=!0)}r&&(data.data.morphAttributes=n,data.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(data.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(data.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),data}clone(){return(new this.constructor).copy(this)}copy(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const data={};this.name=source.name;const t=source.index;null!==t&&this.setIndex(t.clone(data));const e=source.attributes;for(const t in e){const n=e[t];this.setAttribute(t,n.clone(data))}const n=source.morphAttributes;for(const t in n){const e=[],r=n[t];for(let i=0,t=r.length;i<t;i++)e.push(r[i].clone(data));this.morphAttributes[t]=e}this.morphTargetsRelative=source.morphTargetsRelative;const r=source.groups;for(let i=0,t=r.length;i<t;i++){const t=r[i];this.addGroup(t.start,t.count,t.materialIndex)}const o=source.boundingBox;null!==o&&(this.boundingBox=o.clone());const l=source.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Xs=new Si,Ys=new Mi,Zs=new mi,Ks=new Xr,$s=new Xr,Js=new Xr,Qs=new Xr,to=new Xr,eo=new Xr,no=new Xr,ro=new Xr;class io extends $i{constructor(t=new qs,e=new bs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const h=this.morphTargetInfluences;if(o&&h){eo.set(0,0,0);for(let i=0,n=o.length;i<n;i++){const n=h[i],r=o[i];0!==n&&(to.fromBufferAttribute(r,t),l?eo.addScaledVector(to,n):eo.addScaledVector(to.sub(e),n))}e.add(eo)}return e}raycast(t,e){const n=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Zs.copy(n.boundingSphere),Zs.applyMatrix4(o),Ys.copy(t.ray).recast(t.near),!1===Zs.containsPoint(Ys.origin)){if(null===Ys.intersectSphere(Zs,Ks))return;if(Ys.origin.distanceToSquared(Ks)>(t.far-t.near)**2)return}Xs.copy(o).invert(),Ys.copy(t.ray).applyMatrix4(Xs),null!==n.boundingBox&&!1===Ys.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Ys)}}_computeIntersections(t,e,n){let r;const o=this.geometry,l=this.material,h=o.index,c=o.attributes.position,f=o.attributes.uv,d=o.attributes.uv1,m=o.attributes.normal,v=o.groups,y=o.drawRange;if(null!==h)if(Array.isArray(l))for(let i=0,o=v.length;i<o;i++){const o=v[i],c=l[o.materialIndex];for(let l=Math.max(o.start,y.start),v=Math.min(h.count,Math.min(o.start+o.count,y.start+y.count));l<v;l+=3){r=so(this,c,t,n,f,d,m,h.getX(l),h.getX(l+1),h.getX(l+2)),r&&(r.faceIndex=Math.floor(l/3),r.face.materialIndex=o.materialIndex,e.push(r))}}else{for(let i=Math.max(0,y.start),o=Math.min(h.count,y.start+y.count);i<o;i+=3){r=so(this,l,t,n,f,d,m,h.getX(i),h.getX(i+1),h.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}else if(void 0!==c)if(Array.isArray(l))for(let i=0,o=v.length;i<o;i++){const o=v[i],h=l[o.materialIndex];for(let l=Math.max(o.start,y.start),v=Math.min(c.count,Math.min(o.start+o.count,y.start+y.count));l<v;l+=3){r=so(this,h,t,n,f,d,m,l,l+1,l+2),r&&(r.faceIndex=Math.floor(l/3),r.face.materialIndex=o.materialIndex,e.push(r))}}else{for(let i=Math.max(0,y.start),o=Math.min(c.count,y.start+y.count);i<o;i+=3){r=so(this,l,t,n,f,d,m,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}}}function so(object,t,e,n,r,o,l,a,b,h){object.getVertexPosition(a,$s),object.getVertexPosition(b,Js),object.getVertexPosition(h,Qs);const c=function(object,t,e,n,r,o,l,h){let c;if(c=t.side===w?n.intersectTriangle(l,o,r,!0,h):n.intersectTriangle(r,o,l,t.side===x,h),null===c)return null;ro.copy(h),ro.applyMatrix4(object.matrixWorld);const f=e.ray.origin.distanceTo(ro);return f<e.near||f>e.far?null:{distance:f,point:ro.clone(),object:object}}(object,t,e,n,$s,Js,Qs,no);if(c){const t=new Xr;cs.getBarycoord(no,$s,Js,Qs,t),r&&(c.uv=cs.getInterpolatedAttribute(r,a,b,h,t,new fr)),o&&(c.uv1=cs.getInterpolatedAttribute(o,a,b,h,t,new fr)),l&&(c.normal=cs.getInterpolatedAttribute(l,a,b,h,t,new Xr),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const e={a:a,b:b,c:h,normal:new Xr,materialIndex:0};cs.getNormal($s,Js,Qs,e.normal),c.face=e,c.barycoord=t}return c}class oo extends qs{constructor(t=1,e=1,n=1,r=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:l};const h=this;r=Math.floor(r),o=Math.floor(o),l=Math.floor(l);const c=[],f=[],d=[],m=[];let v=0,y=0;function _(u,t,e,n,r,o,l,_,x,w,M){const S=o/x,E=l/w,A=o/2,T=l/2,C=_/2,P=x+1,R=w+1;let I=0,k=0;const D=new Xr;for(let o=0;o<R;o++){const l=o*E-T;for(let h=0;h<P;h++){const c=h*S-A;D[u]=c*n,D[t]=l*r,D[e]=C,f.push(D.x,D.y,D.z),D[u]=0,D[t]=0,D[e]=_>0?1:-1,d.push(D.x,D.y,D.z),m.push(h/x),m.push(1-o/w),I+=1}}for(let t=0;t<w;t++)for(let e=0;e<x;e++){const a=v+e+P*t,b=v+e+P*(t+1),n=v+(e+1)+P*(t+1),r=v+(e+1)+P*t;c.push(a,b,r),c.push(b,n,r),k+=6}h.addGroup(y,k,M),y+=k,v+=I}_("z","y","x",-1,-1,n,e,t,l,o,0),_("z","y","x",1,-1,n,e,-t,l,o,1),_("x","z","y",1,1,t,n,e,r,l,2),_("x","z","y",1,-1,t,n,-e,r,l,3),_("x","y","z",1,-1,t,e,n,r,o,4),_("x","y","z",-1,-1,t,e,-n,r,o,5),this.setIndex(c),this.setAttribute("position",new Bs(f,3)),this.setAttribute("normal",new Bs(d,3)),this.setAttribute("uv",new Bs(m,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new oo(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}function ao(t){const e={};for(const u in t){e[u]={};for(const p in t[u]){const n=t[u][p];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[u][p]=null):e[u][p]=n.clone():Array.isArray(n)?e[u][p]=n.slice():e[u][p]=n}}return e}function lo(t){const e={};for(let u=0;u<t.length;u++){const n=ao(t[u]);for(const p in n)e[p]=n[p]}return e}function ho(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Pr.workingColorSpace}const uo={clone:ao,merge:lo};class co extends _s{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(source){return super.copy(source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=ao(source.uniforms),this.uniformsGroups=function(t){const e=[];for(let u=0;u<t.length;u++)e.push(t[u].clone());return e}(source.uniformsGroups),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}toJSON(meta){const data=super.toJSON(meta);data.glslVersion=this.glslVersion,data.uniforms={};for(const t in this.uniforms){const e=this.uniforms[t].value;e&&e.isTexture?data.uniforms[t]={type:"t",value:e.toJSON(meta).uuid}:e&&e.isColor?data.uniforms[t]={type:"c",value:e.getHex()}:e&&e.isVector2?data.uniforms[t]={type:"v2",value:e.toArray()}:e&&e.isVector3?data.uniforms[t]={type:"v3",value:e.toArray()}:e&&e.isVector4?data.uniforms[t]={type:"v4",value:e.toArray()}:e&&e.isMatrix3?data.uniforms[t]={type:"m3",value:e.toArray()}:e&&e.isMatrix4?data.uniforms[t]={type:"m4",value:e.toArray()}:data.uniforms[t]={value:e}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader,data.lights=this.lights,data.clipping=this.clipping;const t={};for(const e in this.extensions)!0===this.extensions[e]&&(t[e]=!0);return Object.keys(t).length>0&&(data.extensions=t),data}}class fo extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Si,this.projectionMatrix=new Si,this.projectionMatrixInverse=new Si,this.coordinateSystem=Zn}copy(source,t){return super.copy(source,t),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this.coordinateSystem=source.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const po=new Xr,mo=new fr,go=new fr;class vo extends fo{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(source,t){return super.copy(source,t),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*rr*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*nr*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*rr*Math.atan(Math.tan(.5*nr*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){po.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(po.x,po.y).multiplyScalar(-t/po.z),po.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(po.x,po.y).multiplyScalar(-t/po.z)}getViewSize(t,e){return this.getViewBounds(t,mo,go),e.subVectors(go,mo)}setViewOffset(t,e,n,r,o,l){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*nr*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r;const view=this.view;if(null!==this.view&&this.view.enabled){const t=view.fullWidth,l=view.fullHeight;o+=view.offsetX*r/t,e-=view.offsetY*n/l,r*=view.width/t,n*=view.height/l}const l=this.filmOffset;0!==l&&(o+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}const yo=-90;class _o extends $i{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new vo(yo,1,t,e);r.layers=this.layers,this.add(r);const o=new vo(yo,1,t,e);o.layers=this.layers,this.add(o);const l=new vo(yo,1,t,e);l.layers=this.layers,this.add(l);const h=new vo(yo,1,t,e);h.layers=this.layers,this.add(h);const c=new vo(yo,1,t,e);c.layers=this.layers,this.add(c);const f=new vo(yo,1,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,o,l,h,c]=e;for(const t of e)this.remove(t);if(t===Zn)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(t!==Kn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,l,h,c,f,d]=this.children,m=t.getRenderTarget(),v=t.getActiveCubeFace(),y=t.getActiveMipmapLevel(),_=t.xr.enabled;t.xr.enabled=!1;const x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,o),t.setRenderTarget(n,1,r),t.render(e,l),t.setRenderTarget(n,2,r),t.render(e,h),t.setRenderTarget(n,3,r),t.render(e,c),t.setRenderTarget(n,4,r),t.render(e,f),n.texture.generateMipmaps=x,t.setRenderTarget(n,5,r),t.render(e,d),t.setRenderTarget(m,v,y),t.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class bo extends Br{constructor(t,e,n,r,o,l,h,c,f,d){super(t=void 0!==t?t:[],e=void 0!==e?e:xt,n,r,o,l,h,c,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class xo extends Vr{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const image={width:t,height:t,depth:1},n=[image,image,image,image,image,image];this.texture=new bo(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Lt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new oo(5,5,5),o=new co({name:"CubemapFromEquirect",uniforms:ao(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:w,blending:S});o.uniforms.tEquirect.value=e;const l=new io(r,o),h=e.minFilter;e.minFilter===Nt&&(e.minFilter=Lt);return new _o(1,10,this).update(t,l),e.minFilter=h,l.geometry.dispose(),l.material.dispose(),this}clear(t,e,n,r){const o=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(o)}}class wo extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Mo={type:"move"};class So{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Xr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Xr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Xr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Xr),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,o=null,l=null;const h=this._targetRay,c=this._grip,f=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(f&&t.hand){l=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),o=this._getHandJoint(f,r);null!==t&&(o.matrix.fromArray(t.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,o.jointRadius=t.radius),o.visible=null!==t}const r=f.joints["index-finger-tip"],o=f.joints["thumb-tip"],h=r.position.distanceTo(o.position),c=.02,d=.005;f.inputState.pinching&&h>c+d?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&h<=c-d&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==c&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),null!==o&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));null!==h&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==o&&(r=o),null!==r&&(h.matrix.fromArray(r.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,r.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(r.linearVelocity)):h.hasLinearVelocity=!1,r.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(r.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(Mo)))}return null!==h&&(h.visible=null!==r),null!==c&&(c.visible=null!==o),null!==f&&(f.visible=null!==l),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new wo;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Eo{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new gs(t),this.density=e}clone(){return new Eo(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ao{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new gs(t),this.near=e,this.far=n}clone(){return new Ao(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class To extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Li,this.environmentIntensity=1,this.environmentRotation=new Li,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(source,t){return super.copy(source,t),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),this.backgroundBlurriness=source.backgroundBlurriness,this.backgroundIntensity=source.backgroundIntensity,this.backgroundRotation.copy(source.backgroundRotation),this.environmentIntensity=source.environmentIntensity,this.environmentRotation.copy(source.environmentRotation),null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.matrixAutoUpdate=source.matrixAutoUpdate,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(data.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(data.object.backgroundIntensity=this.backgroundIntensity),data.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(data.object.environmentIntensity=this.environmentIntensity),data.object.environmentRotation=this.environmentRotation.toArray(),data}}class Co{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Bn,this.updateRanges=[],this.version=0,this.uuid=ir()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ir()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(t,this.stride);return e.setUsage(this.usage),e}onUpload(t){return this.onUploadCallback=t,this}toJSON(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ir()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Po=new Xr;class Ro{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,e=this.data.count;i<e;i++)Po.fromBufferAttribute(this,i),Po.applyMatrix4(t),this.setXYZ(i,Po.x,Po.y,Po.z);return this}applyNormalMatrix(t){for(let i=0,e=this.count;i<e;i++)Po.fromBufferAttribute(this,i),Po.applyNormalMatrix(t),this.setXYZ(i,Po.x,Po.y,Po.z);return this}transformDirection(t){for(let i=0,e=this.count;i<e;i++)Po.fromBufferAttribute(this,i),Po.transformDirection(t),this.setXYZ(i,Po.x,Po.y,Po.z);return this}getComponent(t,component){let e=this.array[t*this.data.stride+this.offset+component];return this.normalized&&(e=lr(e,this.array)),e}setComponent(t,component,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+component]=e,this}setX(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=lr(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=lr(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=lr(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=lr(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),n=ur(n,this.array),r=ur(r,this.array),o=ur(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return new Ps(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new Ro(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Io extends _s{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gs(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.rotation=source.rotation,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}let ko;const Do=new Xr,Lo=new Xr,Fo=new Xr,Oo=new fr,No=new fr,Bo=new Si,Uo=new Xr,zo=new Xr,Vo=new Xr,jo=new fr,Ho=new fr,Go=new fr;class Wo extends $i{constructor(t=new Io){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ko){ko=new qs;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Co(t,5);ko.setIndex([0,1,2,0,2,3]),ko.setAttribute("position",new Ro(e,3,0,!1)),ko.setAttribute("uv",new Ro(e,2,3,!1))}this.geometry=ko,this.material=t,this.center=new fr(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lo.setFromMatrixScale(this.matrixWorld),Bo.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Fo.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Lo.multiplyScalar(-Fo.z);const n=this.material.rotation;let r,o;0!==n&&(o=Math.cos(n),r=Math.sin(n));const l=this.center;qo(Uo.set(-.5,-.5,0),Fo,l,Lo,r,o),qo(zo.set(.5,-.5,0),Fo,l,Lo,r,o),qo(Vo.set(.5,.5,0),Fo,l,Lo,r,o),jo.set(0,0),Ho.set(1,0),Go.set(1,1);let h=t.ray.intersectTriangle(Uo,zo,Vo,!1,Do);if(null===h&&(qo(zo.set(-.5,.5,0),Fo,l,Lo,r,o),Ho.set(0,1),h=t.ray.intersectTriangle(Uo,Vo,zo,!1,Do),null===h))return;const c=t.ray.origin.distanceTo(Do);c<t.near||c>t.far||e.push({distance:c,point:Do.clone(),uv:cs.getInterpolation(Do,Uo,zo,Vo,jo,Ho,Go,new fr),face:null,object:this})}copy(source,t){return super.copy(source,t),void 0!==source.center&&this.center.copy(source.center),this.material=source.material,this}}function qo(t,e,n,r,o,l){Oo.subVectors(t,n).addScalar(.5).multiply(r),void 0!==o?(No.x=l*Oo.x-o*Oo.y,No.y=o*Oo.x+l*Oo.y):No.copy(Oo),t.copy(e),t.x+=No.x,t.y+=No.y,t.applyMatrix4(Bo)}const Xo=new Xr,Yo=new Xr;class Zo extends $i{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(source){super.copy(source,!1);const t=source.levels;for(let i=0,e=t.length;i<e;i++){const e=t[i];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=source.autoUpdate,this}addLevel(object,t=0,e=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,hysteresis:e,object:object}),this.add(object),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const t=e.splice(i,1);return this.remove(t[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,n;for(i=1,n=e.length;i<n;i++){let n=e[i].distance;if(e[i].object.visible&&(n-=n*e[i].hysteresis),t<n)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){Xo.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Xo);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Xo.setFromMatrixPosition(t.matrixWorld),Yo.setFromMatrixPosition(this.matrixWorld);const n=Xo.distanceTo(Yo)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(n>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(meta){const data=super.toJSON(meta);!1===this.autoUpdate&&(data.object.autoUpdate=!1),data.object.levels=[];const t=this.levels;for(let i=0,e=t.length;i<e;i++){const e=t[i];data.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return data}}const Ko=new Xr,$o=new Ur,Jo=new Ur,Qo=new Xr,ta=new Si,ea=new Xr,na=new mi,ra=new Si,ia=new Mi;class sa extends io{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yt,this.bindMatrix=new Si,this.bindMatrixInverse=new Si,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Kr),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ea),this.boundingBox.expandByPoint(ea)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new mi),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ea),this.boundingSphere.expandByPoint(ea)}copy(source,t){return super.copy(source,t),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,null!==source.boundingBox&&(this.boundingBox=source.boundingBox.clone()),null!==source.boundingSphere&&(this.boundingSphere=source.boundingSphere.clone()),this}raycast(t,e){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),na.copy(this.boundingSphere),na.applyMatrix4(r),!1!==t.ray.intersectsSphere(na)&&(ra.copy(r).invert(),ia.copy(t.ray).applyMatrix4(ra),null!==this.boundingBox&&!1===ia.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,ia)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ur,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.fromBufferAttribute(e,i);const n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===yt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===_t?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;$o.fromBufferAttribute(r.attributes.skinIndex,t),Jo.fromBufferAttribute(r.attributes.skinWeight,t),Ko.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Jo.getComponent(i);if(0!==t){const r=$o.getComponent(i);ta.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(Qo.copy(Ko).applyMatrix4(ta),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}class oa extends $i{constructor(){super(),this.isBone=!0,this.type="Bone"}}class aa extends Br{constructor(data=null,t=1,e=1,n,r,o,l,h,c=Pt,f=Pt,d,m){super(null,o,l,h,c,f,n,r,d,m),this.isDataTexture=!0,this.image={data:data,width:t,height:e},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const la=new Si,ha=new Si;class ua{constructor(t=[],e=[]){this.uuid=ir(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,t=this.bones.length;i<t;i++)this.boneInverses.push(new Si)}}calculateInverses(){this.boneInverses.length=0;for(let i=0,t=this.bones.length;i<t;i++){const t=new Si;this.bones[i]&&t.copy(this.bones[i].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&t.matrixWorld.copy(this.boneInverses[i]).invert()}for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:ha;la.multiplyMatrices(r,e[i]),la.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new ua(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new aa(e,t,t,Qt,Wt);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let i=0,e=this.bones.length;i<e;i++){const e=this.bones[i];if(e.name===t)return e}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){const n=t.bones[i];let r=e[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new oa),this.bones.push(r),this.boneInverses.push((new Si).fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const data={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};data.uuid=this.uuid;const t=this.bones,e=this.boneInverses;for(let i=0,n=t.length;i<n;i++){const n=t[i];data.bones.push(n.uuid);const r=e[i];data.boneInverses.push(r.toArray())}return data}}class ca extends Ps{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}toJSON(){const data=super.toJSON();return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}const fa=new Si,pa=new Si,da=[],ma=new Kr,ga=new Si,va=new io,ya=new mi;class _a extends io{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new ca(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,ga)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Kr),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,fa),ma.copy(t.boundingBox).applyMatrix4(fa),this.boundingBox.union(ma)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new mi),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,fa),ya.copy(t.boundingSphere).applyMatrix4(fa),this.boundingSphere.union(ya)}copy(source,t){return super.copy(source,t),this.instanceMatrix.copy(source.instanceMatrix),null!==source.morphTexture&&(this.morphTexture=source.morphTexture.clone()),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,null!==source.boundingBox&&(this.boundingBox=source.boundingBox.clone()),null!==source.boundingSphere&&(this.boundingSphere=source.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,object){const e=object.morphTargetInfluences,n=this.morphTexture.source.data.data,r=t*(e.length+1)+1;for(let i=0;i<e.length;i++)e[i]=n[r+i]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(va.geometry=this.geometry,va.material=this.material,void 0!==va.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ya.copy(this.boundingSphere),ya.applyMatrix4(n),!1!==t.ray.intersectsSphere(ya)))for(let o=0;o<r;o++){this.getMatrixAt(o,fa),pa.multiplyMatrices(n,fa),va.matrixWorld=pa,va.raycast(t,da);for(let i=0,t=da.length;i<t;i++){const t=da[i];t.instanceId=o,t.object=this,e.push(t)}da.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new ca(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,object){const e=object.morphTargetInfluences,n=e.length+1;null===this.morphTexture&&(this.morphTexture=new aa(new Float32Array(n*this.count),n,this.count,ie,Wt));const r=this.morphTexture.source.data.data;let o=0;for(let i=0;i<e.length;i++)o+=e[i];const l=this.geometry.morphTargetsRelative?1:1-o,h=n*t;r[h]=l,r.set(e,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const ba=new Xr,xa=new Xr,wa=new pr;class Ma{constructor(t=new Xr(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(a,b,t){const e=ba.subVectors(t,b).cross(xa.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(e,a),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(line,t){const e=line.delta(ba),n=this.normal.dot(e);if(0===n)return 0===this.distanceToPoint(line.start)?t.copy(line.start):null;const r=-(line.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(line.start).addScaledVector(e,r)}intersectsLine(line){const t=this.distanceToPoint(line.start),e=this.distanceToPoint(line.end);return t<0&&e>0||e<0&&t>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||wa.getNormalMatrix(t),r=this.coplanarPoint(ba).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Sa=new mi,Ea=new Xr;class Aa{constructor(t=new Ma,e=new Ma,n=new Ma,r=new Ma,o=new Ma,l=new Ma){this.planes=[t,e,n,r,o,l]}set(t,e,n,r,o,l){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(n),h[3].copy(r),h[4].copy(o),h[5].copy(l),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Zn){const n=this.planes,r=t.elements,o=r[0],l=r[1],h=r[2],c=r[3],f=r[4],d=r[5],m=r[6],v=r[7],y=r[8],_=r[9],x=r[10],w=r[11],M=r[12],S=r[13],E=r[14],A=r[15];if(n[0].setComponents(c-o,v-f,w-y,A-M).normalize(),n[1].setComponents(c+o,v+f,w+y,A+M).normalize(),n[2].setComponents(c+l,v+d,w+_,A+S).normalize(),n[3].setComponents(c-l,v-d,w-_,A-S).normalize(),n[4].setComponents(c-h,v-m,w-x,A-E).normalize(),e===Zn)n[5].setComponents(c+h,v+m,w+x,A+E).normalize();else{if(e!==Kn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(h,m,x,E).normalize()}return this}intersectsObject(object){if(void 0!==object.boundingSphere)null===object.boundingSphere&&object.computeBoundingSphere(),Sa.copy(object.boundingSphere).applyMatrix4(object.matrixWorld);else{const t=object.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Sa.copy(t.boundingSphere).applyMatrix4(object.matrixWorld)}return this.intersectsSphere(Sa)}intersectsSprite(t){return Sa.center.set(0,0,0),Sa.radius=.7071067811865476,Sa.applyMatrix4(t.matrixWorld),this.intersectsSphere(Sa)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Ea.x=n.normal.x>0?t.max.x:t.min.x,Ea.y=n.normal.y>0?t.max.y:t.min.y,Ea.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Ea)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ta(a,b){return a-b}function Ca(a,b){return a.z-b.z}function Pa(a,b){return b.z-a.z}class Ra{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,r){const o=this.pool,l=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const h=o[this.index];l.push(h),this.index++,h.start=t,h.count=e,h.z=n,h.index=r}reset(){this.list.length=0,this.index=0}}const Ia=new Si,ka=new gs(1,1,1),Da=new Aa,La=new Kr,Fa=new mi,Oa=new Xr,Na=new Xr,Ba=new Xr,Ua=new Ra,za=new io,Va=[];function ja(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const o=t.count;for(let i=0;i<o;i++)for(let o=0;o<r;o++)e.setComponent(i+n,o,t.getComponent(i,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function Ha(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class Ga extends io{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(t,e,n=2*e,r){super(new qs,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxInstanceCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new aa(e,t,t,Qt,Wt);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new aa(e,t,t,se,Gt);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new aa(e,t,t,Qt,Wt);n.colorSpace=Pr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in t.attributes){const o=t.getAttribute(r),{array:l,itemSize:h,normalized:c}=o,f=new l.constructor(n*h),d=new Ps(f,h,c);e.setAttribute(r,d)}if(null!==t.getIndex()){const t=n>65535?new Uint32Array(r):new Uint16Array(r);e.setIndex(new Ps(t,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=t.getAttribute(n),o=e.getAttribute(n);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Kr);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,n=e.length;i<n;i++){if(!1===e[i].active)continue;const n=e[i].geometryIndex;this.getMatrixAt(i,Ia),this.getBoundingBoxAt(n,La).applyMatrix4(Ia),t.union(La)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new mi);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,n=e.length;i<n;i++){if(!1===e[i].active)continue;const n=e[i].geometryIndex;this.getMatrixAt(i,Ia),this.getBoundingSphereAt(n,Fa).applyMatrix4(Ia),t.union(Fa)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const e={visible:!0,active:!0,geometryIndex:t};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Ta),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=e):(n=this._instanceInfo.length,this._instanceInfo.push(e));const r=this._matricesTexture;Ia.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(ka.toArray(o.image.data,4*n),o.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===e?t.getAttribute("position").count:e;const l=t.getIndex();if(null!==l&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?l.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Ta),h=this._availableGeometryIds.shift(),o[h]=r):(h=this._geometryCount,this._geometryCount++,o.push(r)),this.setGeometryAt(h,t),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,h}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,r=null!==n.getIndex(),o=n.getIndex(),l=e.getIndex(),h=this._geometryInfo[t];if(r&&l.count>h.reservedIndexCount||e.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=h.vertexStart,f=h.reservedVertexCount;h.vertexCount=e.getAttribute("position").count;for(const t in n.attributes){const r=e.getAttribute(t),o=n.getAttribute(t);ja(r,o,c);const l=r.itemSize;for(let i=r.count,t=f;i<t;i++){const t=c+i;for(let e=0;e<l;e++)o.setComponent(t,e,0)}o.needsUpdate=!0,o.addUpdateRange(c*l,f*l)}if(r){const t=h.indexStart,n=h.reservedIndexCount;h.indexCount=e.getIndex().count;for(let i=0;i<l.count;i++)o.setX(t+i,c+l.getX(i));for(let i=l.count,e=n;i<e;i++)o.setX(t+i,c);o.needsUpdate=!0,o.addUpdateRange(t,h.reservedIndexCount)}return h.start=r?h.indexStart:h.vertexStart,h.count=r?h.indexCount:h.vertexCount,h.boundingBox=null,null!==e.boundingBox&&(h.boundingBox=e.boundingBox.clone()),h.boundingSphere=null,null!==e.boundingSphere&&(h.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||!1===e[t].active)return this;const n=this._instanceInfo;for(let i=0,e=n.length;i<e;i++)n[i].active&&n[i].geometryIndex===t&&this.deleteInstance(i);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,r=n.map(((t,i)=>i)).sort(((a,b)=>n[a].vertexStart-n[b].vertexStart)),o=this.geometry;for(let i=0,l=n.length;i<l;i++){const l=r[i],h=n[l];if(!1!==h.active){if(null!==o.index){if(h.indexStart!==e){const{indexStart:n,vertexStart:r,reservedIndexCount:l}=h,c=o.index,f=c.array,d=t-r;for(let t=n;t<n+l;t++)f[t]=f[t]+d;c.array.copyWithin(e,n,n+l),c.addUpdateRange(e,l),h.indexStart=e}e+=h.reservedIndexCount}if(h.vertexStart!==t){const{vertexStart:e,reservedVertexCount:n}=h,r=o.attributes;for(const o in r){const l=r[o],{array:h,itemSize:c}=l;h.copyWithin(t*c,e*c,(e+n)*c),l.addUpdateRange(t*c,n*c)}h.vertexStart=t}t+=h.reservedVertexCount,h.start=o.index?h.indexStart:h.vertexStart,this._nextIndexStart=o.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[t];if(null===r.boundingBox){const t=new Kr,e=n.index,o=n.attributes.position;for(let i=r.start,n=r.start+r.count;i<n;i++){let n=i;e&&(n=e.getX(n)),t.expandByPoint(Oa.fromBufferAttribute(o,n))}r.boundingBox=t}return e.copy(r.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[t];if(null===r.boundingSphere){const e=new mi;this.getBoundingBoxAt(t,La),La.getCenter(e.center);const o=n.index,l=n.attributes.position;let h=0;for(let i=r.start,t=r.start+r.count;i<t;i++){let t=i;o&&(t=o.getX(t)),Oa.fromBufferAttribute(l,t),h=Math.max(h,e.center.distanceToSquared(Oa))}e.radius=Math.sqrt(h),r.boundingSphere=e}return e.copy(r.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,r=this._matricesTexture.image.data;return e.toArray(r,16*t),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,16*t)}setColorAt(t,e){return this.validateInstanceId(t),null===this._colorsTexture&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,4*t),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,4*t)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e||(this._instanceInfo[t].visible=e,this._visibilityChanged=!0),this}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(Ta);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const r=new Int32Array(t),o=new Int32Array(t);Ha(this._multiDrawCounts,r),Ha(this._multiDrawStarts,o),this._multiDrawCounts=r,this._multiDrawStarts=o,this._maxInstanceCount=t;const l=this._indirectTexture,h=this._matricesTexture,c=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Ha(l.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Ha(h.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Ha(c.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter((t=>t.active));if(Math.max(...n.map((t=>t.vertexStart+t.reservedVertexCount)))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...n.map((t=>t.indexStart+t.reservedIndexCount)))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`)}const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new qs,this._initializeGeometry(r));const o=this.geometry;r.index&&Ha(r.index.array,o.index.array);for(const t in r.attributes)Ha(r.attributes[t].array,o.attributes[t].array)}raycast(t,e){const n=this._instanceInfo,r=this._geometryInfo,o=this.matrixWorld,l=this.geometry;za.material=this.material,za.geometry.index=l.index,za.geometry.attributes=l.attributes,null===za.geometry.boundingBox&&(za.geometry.boundingBox=new Kr),null===za.geometry.boundingSphere&&(za.geometry.boundingSphere=new mi);for(let i=0,l=n.length;i<l;i++){if(!n[i].visible||!n[i].active)continue;const l=n[i].geometryIndex,h=r[l];za.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(i,za.matrixWorld).premultiply(o),this.getBoundingBoxAt(l,za.geometry.boundingBox),this.getBoundingSphereAt(l,za.geometry.boundingSphere),za.raycast(t,Va);for(let t=0,n=Va.length;t<n;t++){const n=Va[t];n.object=this,n.batchId=i,e.push(n)}Va.length=0}za.material=null,za.geometry.index=null,za.geometry.attributes={},za.geometry.setDrawRange(0,1/0)}copy(source){return super.copy(source),this.geometry=source.geometry.clone(),this.perObjectFrustumCulled=source.perObjectFrustumCulled,this.sortObjects=source.sortObjects,this.boundingBox=null!==source.boundingBox?source.boundingBox.clone():null,this.boundingSphere=null!==source.boundingSphere?source.boundingSphere.clone():null,this._geometryInfo=source._geometryInfo.map((t=>({...t,boundingBox:null!==t.boundingBox?t.boundingBox.clone():null,boundingSphere:null!==t.boundingSphere?t.boundingSphere.clone():null}))),this._instanceInfo=source._instanceInfo.map((t=>({...t}))),this._maxInstanceCount=source._maxInstanceCount,this._maxVertexCount=source._maxVertexCount,this._maxIndexCount=source._maxIndexCount,this._geometryInitialized=source._geometryInitialized,this._geometryCount=source._geometryCount,this._multiDrawCounts=source._multiDrawCounts.slice(),this._multiDrawStarts=source._multiDrawStarts.slice(),this._matricesTexture=source._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=source._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,e,n,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=r.getIndex(),h=null===l?1:l.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data;v&&(Ia.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Da.setFromProjectionMatrix(Ia,t.coordinateSystem));let x=0;if(this.sortObjects){Ia.copy(this.matrixWorld).invert(),Oa.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ia),Na.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ia);for(let i=0,t=c.length;i<t;i++)if(c[i].visible&&c[i].active){const t=c[i].geometryIndex;this.getMatrixAt(i,Ia),this.getBoundingSphereAt(t,Fa).applyMatrix4(Ia);let e=!1;if(v&&(e=!Da.intersectsSphere(Fa)),!e){const e=m[t],n=Ba.subVectors(Fa.center,Oa).dot(Na);Ua.push(e.start,e.count,n,i)}}const t=Ua.list,e=this.customSort;null===e?t.sort(o.transparent?Pa:Ca):e.call(this,t,n);for(let i=0,e=t.length;i<e;i++){const e=t[i];f[x]=e.start*h,d[x]=e.count,_[x]=e.index,x++}Ua.reset()}else for(let i=0,t=c.length;i<t;i++)if(c[i].visible&&c[i].active){const t=c[i].geometryIndex;let e=!1;if(v&&(this.getMatrixAt(i,Ia),this.getBoundingSphereAt(t,Fa).applyMatrix4(Ia),e=!Da.intersectsSphere(Fa)),!e){const e=m[t];f[x]=e.start*h,d[x]=e.count,_[x]=i,x++}}y.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(t,object,e,n,r,o){this.onBeforeRender(t,null,n,r,o)}}class Wa extends _s{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gs(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.fog=source.fog,this}}const qa=new Xr,Xa=new Xr,Ya=new Si,Za=new Mi,Ka=new mi,$a=new Xr,Ja=new Xr;class Qa extends $i{constructor(t=new qs,e=new Wa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let i=1,t=e.count;i<t;i++)qa.fromBufferAttribute(e,i-1),Xa.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=qa.distanceTo(Xa);t.setAttribute("lineDistance",new Bs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ka.copy(n.boundingSphere),Ka.applyMatrix4(r),Ka.radius+=o,!1===t.ray.intersectsSphere(Ka))return;Ya.copy(r).invert(),Za.copy(t.ray).applyMatrix4(Ya);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,f=this.isLineSegments?2:1,d=n.index,m=n.attributes.position;if(null!==d){const n=Math.max(0,l.start),r=Math.min(d.count,l.start+l.count);for(let i=n,o=r-1;i<o;i+=f){const a=d.getX(i),b=d.getX(i+1),n=tl(this,t,Za,c,a,b,i);n&&e.push(n)}if(this.isLineLoop){const a=d.getX(r-1),b=d.getX(n),o=tl(this,t,Za,c,a,b,r-1);o&&e.push(o)}}else{const n=Math.max(0,l.start),r=Math.min(m.count,l.start+l.count);for(let i=n,o=r-1;i<o;i+=f){const n=tl(this,t,Za,c,i,i+1,i);n&&e.push(n)}if(this.isLineLoop){const o=tl(this,t,Za,c,r-1,n,r-1);o&&e.push(o)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function tl(object,t,e,n,a,b,i){const r=object.geometry.attributes.position;qa.fromBufferAttribute(r,a),Xa.fromBufferAttribute(r,b);if(e.distanceSqToSegment(qa,Xa,$a,Ja)>n)return;$a.applyMatrix4(object.matrixWorld);const o=t.ray.origin.distanceTo($a);return o<t.near||o>t.far?void 0:{distance:o,point:Ja.clone().applyMatrix4(object.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:object}}const el=new Xr,nl=new Xr;class rl extends Qa{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let i=0,t=e.count;i<t;i+=2)el.fromBufferAttribute(e,i),nl.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+el.distanceTo(nl);t.setAttribute("lineDistance",new Bs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class il extends Qa{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class sl extends _s{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gs(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}const al=new Si,ll=new Mi,hl=new mi,cl=new Xr;class fl extends $i{constructor(t=new qs,e=new sl){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),hl.copy(n.boundingSphere),hl.applyMatrix4(r),hl.radius+=o,!1===t.ray.intersectsSphere(hl))return;al.copy(r).invert(),ll.copy(t.ray).applyMatrix4(al);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=h*h,f=n.index,d=n.attributes.position;if(null!==f){for(let i=Math.max(0,l.start),n=Math.min(f.count,l.start+l.count);i<n;i++){const a=f.getX(i);cl.fromBufferAttribute(d,a),pl(cl,a,c,r,t,e,this)}}else{for(let i=Math.max(0,l.start),n=Math.min(d.count,l.start+l.count);i<n;i++)cl.fromBufferAttribute(d,i),pl(cl,i,c,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function pl(t,e,n,r,o,l,object){const h=ll.distanceSqToPoint(t);if(h<n){const n=new Xr;ll.closestPointToPoint(t,n),n.applyMatrix4(r);const c=o.ray.origin.distanceTo(n);if(c<o.near||c>o.far)return;l.push({distance:c,distanceToRay:Math.sqrt(h),point:n,index:e,face:null,faceIndex:null,barycoord:null,object:object})}}class ml extends Br{constructor(video,t,e,n,r,o,l,h,c){super(video,t,e,n,r,o,l,h,c),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Lt,this.magFilter=void 0!==r?r:Lt,this.generateMipmaps=!1;const f=this;"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback((function t(){f.needsUpdate=!0,video.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const video=this.image;!1==="requestVideoFrameCallback"in video&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class gl extends ml{constructor(t,e,n,r,o,l,h,c){super({},t,e,n,r,o,l,h,c),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class vl extends Br{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Pt,this.minFilter=Pt,this.generateMipmaps=!1,this.needsUpdate=!0}}class yl extends Br{constructor(t,e,n,r,o,l,h,c,f,d,m,v){super(null,l,h,c,f,d,r,o,m,v),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class _l extends yl{constructor(t,e,n,r,o,l){super(t,e,n,o,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Tt,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class bl extends yl{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,xt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class xl extends Br{constructor(canvas,t,e,n,r,o,l,h,c){super(canvas,t,e,n,r,o,l,h,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wl extends Br{constructor(t,e,n,r,o,l,h,c,f,d=ne){if(d!==ne&&d!==re)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===ne&&(n=Gt),void 0===n&&d===re&&(n=Zt),super(null,r,o,l,h,c,d,n,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==h?h:Pt,this.minFilter=void 0!==c?c:Pt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(source){return super.copy(source),this.compareFunction=source.compareFunction,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.compareFunction&&(data.compareFunction=this.compareFunction),data}}class Ml{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(u,t){const e=this.getUtoTmapping(u);return this.getPoint(e,t)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),o=0;e.push(0);for(let p=1;p<=t;p++)n=this.getPoint(p/t),o+=n.distanceTo(r),e.push(o),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(u,t){const e=this.getLengths();let i=0;const n=e.length;let r;r=t||u*e[n-1];let o,l=0,h=n-1;for(;l<=h;)if(i=Math.floor(l+(h-l)/2),o=e[i]-r,o<0)l=i+1;else{if(!(o>0)){h=i;break}h=i-1}if(i=h,e[i]===r)return i/(n-1);const c=e[i];return(i+(r-c)/(e[i+1]-c))/(n-1)}getTangent(t,e){const n=1e-4;let r=t-n,o=t+n;r<0&&(r=0),o>1&&(o=1);const l=this.getPoint(r),h=this.getPoint(o),c=e||(l.isVector2?new fr:new Xr);return c.copy(h).sub(l).normalize(),c}getTangentAt(u,t){const e=this.getUtoTmapping(u);return this.getTangent(e,t)}computeFrenetFrames(t,e){const n=new Xr,r=[],o=[],l=[],h=new Xr,c=new Si;for(let i=0;i<=t;i++){const u=i/t;r[i]=this.getTangentAt(u,new Xr)}o[0]=new Xr,l[0]=new Xr;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);d<=f&&(f=d,n.set(1,0,0)),m<=f&&(f=m,n.set(0,1,0)),v<=f&&n.set(0,0,1),h.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],h),l[0].crossVectors(r[0],o[0]);for(let i=1;i<=t;i++){if(o[i]=o[i-1].clone(),l[i]=l[i-1].clone(),h.crossVectors(r[i-1],r[i]),h.length()>Number.EPSILON){h.normalize();const t=Math.acos(sr(r[i-1].dot(r[i]),-1,1));o[i].applyMatrix4(c.makeRotationAxis(h,t))}l[i].crossVectors(r[i],o[i])}if(!0===e){let e=Math.acos(sr(o[0].dot(o[t]),-1,1));e/=t,r[0].dot(h.crossVectors(o[0],o[t]))>0&&(e=-e);for(let i=1;i<=t;i++)o[i].applyMatrix4(c.makeRotationAxis(r[i],e*i)),l[i].crossVectors(r[i],o[i])}return{tangents:r,normals:o,binormals:l}}clone(){return(new this.constructor).copy(this)}copy(source){return this.arcLengthDivisions=source.arcLengthDivisions,this}toJSON(){const data={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return data.arcLengthDivisions=this.arcLengthDivisions,data.type=this.type,data}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Sl extends Ml{constructor(t=0,e=0,n=1,r=1,o=0,l=2*Math.PI,h=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=h,this.aRotation=c}getPoint(t,e=new fr){const n=e,r=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=l?0:r),!0!==this.aClockwise||l||(o===r?o=-r:o-=r);const h=this.aStartAngle+t*o;let c=this.aX+this.xRadius*Math.cos(h),f=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=c-this.aX,r=f-this.aY;c=n*t-r*e+this.aX,f=n*e+r*t+this.aY}return n.set(c,f)}copy(source){return super.copy(source),this.aX=source.aX,this.aY=source.aY,this.xRadius=source.xRadius,this.yRadius=source.yRadius,this.aStartAngle=source.aStartAngle,this.aEndAngle=source.aEndAngle,this.aClockwise=source.aClockwise,this.aRotation=source.aRotation,this}toJSON(){const data=super.toJSON();return data.aX=this.aX,data.aY=this.aY,data.xRadius=this.xRadius,data.yRadius=this.yRadius,data.aStartAngle=this.aStartAngle,data.aEndAngle=this.aEndAngle,data.aClockwise=this.aClockwise,data.aRotation=this.aRotation,data}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class El extends Sl{constructor(t,e,n,r,o,l){super(t,e,n,n,r,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function Al(){let t=0,e=0,n=0,r=0;function o(o,l,h,c){t=o,e=h,n=-3*o+3*l-2*h-c,r=2*o-2*l+h+c}return{initCatmullRom:function(t,e,n,r,l){o(e,n,l*(n-t),l*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,l,h,c){let f=(e-t)/l-(n-t)/(l+h)+(n-e)/h,d=(n-e)/h-(r-e)/(h+c)+(r-n)/c;f*=h,d*=h,o(e,n,f,d)},calc:function(o){const l=o*o;return t+e*o+n*l+r*(l*o)}}}const Tl=new Xr,Cl=new Al,Pl=new Al,Rl=new Al;class Il extends Ml{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Xr){const n=e,r=this.points,o=r.length,p=(o-(this.closed?0:1))*t;let l,h,c=Math.floor(p),f=p-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/o)+1)*o:0===f&&c===o-1&&(c=o-2,f=1),this.closed||c>0?l=r[(c-1)%o]:(Tl.subVectors(r[0],r[1]).add(r[0]),l=Tl);const d=r[c%o],m=r[(c+1)%o];if(this.closed||c+2<o?h=r[(c+2)%o]:(Tl.subVectors(r[o-1],r[o-2]).add(r[o-1]),h=Tl),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(l.distanceToSquared(d),t),n=Math.pow(d.distanceToSquared(m),t),r=Math.pow(m.distanceToSquared(h),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Cl.initNonuniformCatmullRom(l.x,d.x,m.x,h.x,e,n,r),Pl.initNonuniformCatmullRom(l.y,d.y,m.y,h.y,e,n,r),Rl.initNonuniformCatmullRom(l.z,d.z,m.z,h.z,e,n,r)}else"catmullrom"===this.curveType&&(Cl.initCatmullRom(l.x,d.x,m.x,h.x,this.tension),Pl.initCatmullRom(l.y,d.y,m.y,h.y,this.tension),Rl.initCatmullRom(l.z,d.z,m.z,h.z,this.tension));return n.set(Cl.calc(f),Pl.calc(f),Rl.calc(f)),n}copy(source){super.copy(source),this.points=[];for(let i=0,t=source.points.length;i<t;i++){const t=source.points[i];this.points.push(t.clone())}return this.closed=source.closed,this.curveType=source.curveType,this.tension=source.tension,this}toJSON(){const data=super.toJSON();data.points=[];for(let i=0,t=this.points.length;i<t;i++){const t=this.points[i];data.points.push(t.toArray())}return data.closed=this.closed,data.curveType=this.curveType,data.tension=this.tension,data}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,e=t.points.length;i<e;i++){const e=t.points[i];this.points.push((new Xr).fromArray(e))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function kl(t,e,n,r,o){const l=.5*(r-e),h=.5*(o-n),c=t*t;return(2*n-2*r+l+h)*(t*c)+(-3*n+3*r-2*l-h)*c+l*t+n}function Dl(t,e,n,r){return function(t,p){const e=1-t;return e*e*p}(t,e)+function(t,p){return 2*(1-t)*t*p}(t,n)+function(t,p){return t*t*p}(t,r)}function Ll(t,e,n,r,o){return function(t,p){const e=1-t;return e*e*e*p}(t,e)+function(t,p){const e=1-t;return 3*e*e*t*p}(t,n)+function(t,p){return 3*(1-t)*t*t*p}(t,r)+function(t,p){return t*t*t*p}(t,o)}class Fl extends Ml{constructor(t=new fr,e=new fr,n=new fr,r=new fr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new fr){const n=e,r=this.v0,o=this.v1,l=this.v2,h=this.v3;return n.set(Ll(t,r.x,o.x,l.x,h.x),Ll(t,r.y,o.y,l.y,h.y)),n}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ol extends Ml{constructor(t=new Xr,e=new Xr,n=new Xr,r=new Xr){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Xr){const n=e,r=this.v0,o=this.v1,l=this.v2,h=this.v3;return n.set(Ll(t,r.x,o.x,l.x,h.x),Ll(t,r.y,o.y,l.y,h.y),Ll(t,r.z,o.z,l.z,h.z)),n}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Nl extends Ml{constructor(t=new fr,e=new fr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new fr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(u,t){return this.getPoint(u,t)}getTangent(t,e=new fr){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(u,t){return this.getTangent(u,t)}copy(source){return super.copy(source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Bl extends Ml{constructor(t=new Xr,e=new Xr){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Xr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(u,t){return this.getPoint(u,t)}getTangent(t,e=new Xr){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(u,t){return this.getTangent(u,t)}copy(source){return super.copy(source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ul extends Ml{constructor(t=new fr,e=new fr,n=new fr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new fr){const n=e,r=this.v0,o=this.v1,l=this.v2;return n.set(Dl(t,r.x,o.x,l.x),Dl(t,r.y,o.y,l.y)),n}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class zl extends Ml{constructor(t=new Xr,e=new Xr,n=new Xr){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Xr){const n=e,r=this.v0,o=this.v1,l=this.v2;return n.set(Dl(t,r.x,o.x,l.x),Dl(t,r.y,o.y,l.y),Dl(t,r.z,o.z,l.z)),n}copy(source){return super.copy(source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}toJSON(){const data=super.toJSON();return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Vl extends Ml{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new fr){const n=e,r=this.points,p=(r.length-1)*t,o=Math.floor(p),l=p-o,h=r[0===o?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return n.set(kl(l,h.x,c.x,f.x,d.x),kl(l,h.y,c.y,f.y,d.y)),n}copy(source){super.copy(source),this.points=[];for(let i=0,t=source.points.length;i<t;i++){const t=source.points[i];this.points.push(t.clone())}return this}toJSON(){const data=super.toJSON();data.points=[];for(let i=0,t=this.points.length;i<t;i++){const t=this.points[i];data.points.push(t.toArray())}return data}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,e=t.points.length;i<e;i++){const e=t.points[i];this.points.push((new fr).fromArray(e))}return this}}var jl=Object.freeze({__proto__:null,ArcCurve:El,CatmullRomCurve3:Il,CubicBezierCurve:Fl,CubicBezierCurve3:Ol,EllipseCurve:Sl,LineCurve:Nl,LineCurve3:Bl,QuadraticBezierCurve:Ul,QuadraticBezierCurve3:zl,SplineCurve:Vl});class Hl extends Ml{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new jl[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const t=r[i]-n,o=this.curves[i],l=o.getLength(),u=0===l?0:1-t/l;return o.getPointAt(u,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],l=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,h=o.getPoints(l);for(let t=0;t<h.length;t++){const r=h[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(source){super.copy(source),this.curves=[];for(let i=0,t=source.curves.length;i<t;i++){const t=source.curves[i];this.curves.push(t.clone())}return this.autoClose=source.autoClose,this}toJSON(){const data=super.toJSON();data.autoClose=this.autoClose,data.curves=[];for(let i=0,t=this.curves.length;i<t;i++){const t=this.curves[i];data.curves.push(t.toJSON())}return data}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let i=0,e=t.curves.length;i<e;i++){const e=t.curves[i];this.curves.push((new jl[e.type]).fromJSON(e))}return this}}class Gl extends Hl{constructor(t){super(),this.type="Path",this.currentPoint=new fr,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let i=1,e=t.length;i<e;i++)this.lineTo(t[i].x,t[i].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Nl(this.currentPoint.clone(),new fr(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const o=new Ul(this.currentPoint.clone(),new fr(t,e),new fr(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,o,l){const h=new Fl(this.currentPoint.clone(),new fr(t,e),new fr(n,r),new fr(o,l));return this.curves.push(h),this.currentPoint.set(o,l),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Vl(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,o,l){const h=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+h,e+c,n,r,o,l),this}absarc(t,e,n,r,o,l){return this.absellipse(t,e,n,n,r,o,l),this}ellipse(t,e,n,r,o,l,h,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+f,e+d,n,r,o,l,h,c),this}absellipse(t,e,n,r,o,l,h,c){const f=new Sl(t,e,n,r,o,l,h,c);if(this.curves.length>0){const t=f.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(source){return super.copy(source),this.currentPoint.copy(source.currentPoint),this}toJSON(){const data=super.toJSON();return data.currentPoint=this.currentPoint.toArray(),data}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Wl extends qs{constructor(t=[new fr(0,-.5),new fr(.5,0),new fr(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=sr(r,0,2*Math.PI);const o=[],l=[],h=[],c=[],f=[],d=1/e,m=new Xr,v=new fr,y=new Xr,_=new Xr,x=new Xr;let w=0,M=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:w=t[e+1].x-t[e].x,M=t[e+1].y-t[e].y,y.x=1*M,y.y=-w,y.z=0*M,x.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case t.length-1:c.push(x.x,x.y,x.z);break;default:w=t[e+1].x-t[e].x,M=t[e+1].y-t[e].y,y.x=1*M,y.y=-w,y.z=0*M,_.copy(y),y.x+=x.x,y.y+=x.y,y.z+=x.z,y.normalize(),c.push(y.x,y.y,y.z),x.copy(_)}for(let i=0;i<=e;i++){const o=n+i*d*r,y=Math.sin(o),_=Math.cos(o);for(let n=0;n<=t.length-1;n++){m.x=t[n].x*y,m.y=t[n].y,m.z=t[n].x*_,l.push(m.x,m.y,m.z),v.x=i/e,v.y=n/(t.length-1),h.push(v.x,v.y);const r=c[3*n+0]*y,o=c[3*n+1],d=c[3*n+0]*_;f.push(r,o,d)}}for(let i=0;i<e;i++)for(let e=0;e<t.length-1;e++){const base=e+i*t.length,a=base,b=base+t.length,n=base+t.length+1,r=base+1;o.push(a,b,r),o.push(n,r,b)}this.setIndex(o),this.setAttribute("position",new Bs(l,3)),this.setAttribute("uv",new Bs(h,2)),this.setAttribute("normal",new Bs(f,3))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Wl(data.points,data.segments,data.phiStart,data.phiLength)}}class ql extends Wl{constructor(t=1,e=1,n=4,r=8){const path=new Gl;path.absarc(0,-e/2,t,1.5*Math.PI,0),path.absarc(0,e/2,t,0,.5*Math.PI),super(path.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(data){return new ql(data.radius,data.length,data.capSegments,data.radialSegments)}}class Xl extends qs{constructor(t=1,e=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const o=[],l=[],h=[],c=[],f=new Xr,d=new fr;l.push(0,0,0),h.push(0,0,1),c.push(.5,.5);for(let s=0,i=3;s<=e;s++,i+=3){const o=n+s/e*r;f.x=t*Math.cos(o),f.y=t*Math.sin(o),l.push(f.x,f.y,f.z),h.push(0,0,1),d.x=(l[i]/t+1)/2,d.y=(l[i+1]/t+1)/2,c.push(d.x,d.y)}for(let i=1;i<=e;i++)o.push(i,i+1,0);this.setIndex(o),this.setAttribute("position",new Bs(l,3)),this.setAttribute("normal",new Bs(h,3)),this.setAttribute("uv",new Bs(c,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Xl(data.radius,data.segments,data.thetaStart,data.thetaLength)}}class Yl extends qs{constructor(t=1,e=1,n=1,r=32,o=1,l=!1,h=0,c=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:l,thetaStart:h,thetaLength:c};const f=this;r=Math.floor(r),o=Math.floor(o);const d=[],m=[],v=[],y=[];let _=0;const x=[],w=n/2;let M=0;function S(n){const o=_,l=new fr,x=new Xr;let S=0;const E=!0===n?t:e,A=!0===n?1:-1;for(let t=1;t<=r;t++)m.push(0,w*A,0),v.push(0,A,0),y.push(.5,.5),_++;const T=_;for(let t=0;t<=r;t++){const e=t/r*c+h,n=Math.cos(e),o=Math.sin(e);x.x=E*o,x.y=w*A,x.z=E*n,m.push(x.x,x.y,x.z),v.push(0,A,0),l.x=.5*n+.5,l.y=.5*o*A+.5,y.push(l.x,l.y),_++}for(let t=0;t<r;t++){const e=o+t,i=T+t;!0===n?d.push(i,i+1,e):d.push(i+1,i,e),S+=3}f.addGroup(M,S,!0===n?1:2),M+=S}!function(){const l=new Xr,S=new Xr;let E=0;const A=(e-t)/n;for(let f=0;f<=o;f++){const d=[],M=f/o,E=M*(e-t)+t;for(let t=0;t<=r;t++){const u=t/r,e=u*c+h,o=Math.sin(e),f=Math.cos(e);S.x=E*o,S.y=-M*n+w,S.z=E*f,m.push(S.x,S.y,S.z),l.set(o,A,f).normalize(),v.push(l.x,l.y,l.z),y.push(u,1-M),d.push(_++)}x.push(d)}for(let n=0;n<r;n++)for(let r=0;r<o;r++){const a=x[r][n],b=x[r+1][n],l=x[r+1][n+1],h=x[r][n+1];(t>0||0!==r)&&(d.push(a,b,h),E+=3),(e>0||r!==o-1)&&(d.push(b,l,h),E+=3)}f.addGroup(M,E,0),M+=E}(),!1===l&&(t>0&&S(!0),e>0&&S(!1)),this.setIndex(d),this.setAttribute("position",new Bs(m,3)),this.setAttribute("normal",new Bs(v,3)),this.setAttribute("uv",new Bs(y,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Yl(data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}class Zl extends Yl{constructor(t=1,e=1,n=32,r=1,o=!1,l=0,h=2*Math.PI){super(0,t,e,n,r,o,l,h),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:l,thetaLength:h}}static fromJSON(data){return new Zl(data.radius,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}class Kl extends qs{constructor(t=[],e=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const o=[],l=[];function h(a,b,t,e){const n=e+1,r=[];for(let i=0;i<=n;i++){r[i]=[];const e=a.clone().lerp(t,i/n),o=b.clone().lerp(t,i/n),l=n-i;for(let t=0;t<=l;t++)r[i][t]=0===t&&i===n?e:e.clone().lerp(o,t/l)}for(let i=0;i<n;i++)for(let t=0;t<2*(n-i)-1;t++){const e=Math.floor(t/2);t%2==0?(c(r[i][e+1]),c(r[i+1][e]),c(r[i][e])):(c(r[i][e+1]),c(r[i+1][e+1]),c(r[i+1][e]))}}function c(t){o.push(t.x,t.y,t.z)}function f(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function d(t,e,n,r){r<0&&1===t.x&&(l[e]=t.x-1),0===n.x&&0===n.z&&(l[e]=r/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}!function(t){const a=new Xr,b=new Xr,n=new Xr;for(let i=0;i<e.length;i+=3)f(e[i+0],a),f(e[i+1],b),f(e[i+2],n),h(a,b,n,t)}(r),function(t){const e=new Xr;for(let i=0;i<o.length;i+=3)e.x=o[i+0],e.y=o[i+1],e.z=o[i+2],e.normalize().multiplyScalar(t),o[i+0]=e.x,o[i+1]=e.y,o[i+2]=e.z}(n),function(){const t=new Xr;for(let i=0;i<o.length;i+=3){t.x=o[i+0],t.y=o[i+1],t.z=o[i+2];const u=m(t)/2/Math.PI+.5,n=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);l.push(u,1-n)}var e;(function(){const a=new Xr,b=new Xr,t=new Xr,e=new Xr,n=new fr,r=new fr,h=new fr;for(let i=0,c=0;i<o.length;i+=9,c+=6){a.set(o[i+0],o[i+1],o[i+2]),b.set(o[i+3],o[i+4],o[i+5]),t.set(o[i+6],o[i+7],o[i+8]),n.set(l[c+0],l[c+1]),r.set(l[c+2],l[c+3]),h.set(l[c+4],l[c+5]),e.copy(a).add(b).add(t).divideScalar(3);const f=m(e);d(n,c+0,a,f),d(r,c+2,b,f),d(h,c+4,t,f)}})(),function(){for(let i=0;i<l.length;i+=6){const t=l[i+0],e=l[i+2],n=l[i+4],r=Math.max(t,e,n),o=Math.min(t,e,n);r>.9&&o<.1&&(t<.2&&(l[i+0]+=1),e<.2&&(l[i+2]+=1),n<.2&&(l[i+4]+=1))}}()}(),this.setAttribute("position",new Bs(o,3)),this.setAttribute("normal",new Bs(o.slice(),3)),this.setAttribute("uv",new Bs(l,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Kl(data.vertices,data.indices,data.radius,data.details)}}class $l extends Kl{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(data){return new $l(data.radius,data.detail)}}const Jl=new Xr,Ql=new Xr,eh=new Xr,nh=new cs;class rh extends qs{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,r=Math.pow(10,n),o=Math.cos(nr*e),l=t.getIndex(),h=t.getAttribute("position"),c=l?l.count:h.count,f=[0,0,0],d=["a","b","c"],m=new Array(3),v={},y=[];for(let i=0;i<c;i+=3){l?(f[0]=l.getX(i),f[1]=l.getX(i+1),f[2]=l.getX(i+2)):(f[0]=i,f[1]=i+1,f[2]=i+2);const{a:a,b:b,c:t}=nh;if(a.fromBufferAttribute(h,f[0]),b.fromBufferAttribute(h,f[1]),t.fromBufferAttribute(h,f[2]),nh.getNormal(eh),m[0]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,m[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,m[2]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,m[0]!==m[1]&&m[1]!==m[2]&&m[2]!==m[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=m[t],r=m[e],l=nh[d[t]],h=nh[d[e]],c=`${n}_${r}`,_=`${r}_${n}`;_ in v&&v[_]?(eh.dot(v[_].normal)<=o&&(y.push(l.x,l.y,l.z),y.push(h.x,h.y,h.z)),v[_]=null):c in v||(v[c]={index0:f[t],index1:f[e],normal:eh.clone()})}}for(const t in v)if(v[t]){const{index0:e,index1:n}=v[t];Jl.fromBufferAttribute(h,e),Ql.fromBufferAttribute(h,n),y.push(Jl.x,Jl.y,Jl.z),y.push(Ql.x,Ql.y,Ql.z)}this.setAttribute("position",new Bs(y,3))}}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}}class ih extends Gl{constructor(t){super(t),this.uuid=ir(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(source){super.copy(source),this.holes=[];for(let i=0,t=source.holes.length;i<t;i++){const t=source.holes[i];this.holes.push(t.clone())}return this}toJSON(){const data=super.toJSON();data.uuid=this.uuid,data.holes=[];for(let i=0,t=this.holes.length;i<t;i++){const t=this.holes[i];data.holes.push(t.toJSON())}return data}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let i=0,e=t.holes.length;i<e;i++){const e=t.holes[i];this.holes.push((new Gl).fromJSON(e))}return this}}const sh=function(data,t,e=2){const n=t&&t.length,r=n?t[0]*e:data.length;let o=oh(data,0,r,e,!0);const l=[];if(!o||o.next===o.prev)return l;let h,c,f,d,m,v,y;if(n&&(o=function(data,t,e,n){const r=[];let i,o,l,h,c;for(i=0,o=t.length;i<o;i++)l=t[i]*n,h=i<o-1?t[i+1]*n:data.length,c=oh(data,l,h,n,!1),c===c.next&&(c.steiner=!0),r.push(vh(c));for(r.sort(ph),i=0;i<r.length;i++)e=dh(r[i],e);return e}(data,t,o,e)),data.length>80*e){h=f=data[0],c=d=data[1];for(let i=e;i<r;i+=e)m=data[i],v=data[i+1],m<h&&(h=m),v<c&&(c=v),m>f&&(f=m),v>d&&(d=v);y=Math.max(f-h,d-c),y=0!==y?32767/y:0}return lh(o,l,e,h,c,y,0),l};function oh(data,t,e,n,r){let i,o;if(r===function(data,t,e,n){let r=0;for(let i=t,o=e-n;i<e;i+=n)r+=(data[o]-data[i])*(data[i+1]+data[o+1]),o=i;return r}(data,t,e,n)>0)for(i=t;i<e;i+=n)o=Ah(i,data[i],data[i+1],o);else for(i=e-n;i>=t;i-=n)o=Ah(i,data[i],data[i+1],o);return o&&bh(o,o.next)&&(Th(o),o=o.next),o}function ah(t,e){if(!t)return t;e||(e=t);let n,p=t;do{if(n=!1,p.steiner||!bh(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(Th(p),p=e=p.prev,p===p.next)break;n=!0}}while(n||p!==e);return e}function lh(t,e,n,r,o,l,h){if(!t)return;!h&&l&&function(t,e,n,r){let p=t;do{0===p.z&&(p.z=gh(p.x,p.y,e,n,r)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==t);p.prevZ.nextZ=null,p.prevZ=null,function(t){let i,p,q,e,n,r,o,l,h=1;do{for(p=t,t=null,n=null,r=0;p;){for(r++,q=p,o=0,i=0;i<h&&(o++,q=q.nextZ,q);i++);for(l=h;o>0||l>0&&q;)0!==o&&(0===l||!q||p.z<=q.z)?(e=p,p=p.nextZ,o--):(e=q,q=q.nextZ,l--),n?n.nextZ=e:t=e,e.prevZ=n,n=e;p=q}n.nextZ=null,h*=2}while(r>1)}(p)}(t,r,o,l);let c,f,d=t;for(;t.prev!==t.next;)if(c=t.prev,f=t.next,l?uh(t,r,o,l):hh(t))e.push(c.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),Th(t),t=f.next,d=f.next;else if((t=f)===d){h?1===h?lh(t=ch(ah(t),e,n),e,n,r,o,l,2):2===h&&fh(t,e,n,r,o,l):lh(ah(t),e,n,r,o,l,1);break}}function hh(t){const a=t.prev,b=t,e=t.next;if(area(a,b,e)>=0)return!1;const n=a.x,r=b.x,o=e.x,l=a.y,h=b.y,c=e.y,f=n<r?n<o?n:o:r<o?r:o,d=l<h?l<c?l:c:h<c?h:c,m=n>r?n>o?n:o:r>o?r:o,v=l>h?l>c?l:c:h>c?h:c;let p=e.next;for(;p!==a;){if(p.x>=f&&p.x<=m&&p.y>=d&&p.y<=v&&yh(n,l,r,h,o,c,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function uh(t,e,n,r){const a=t.prev,b=t,o=t.next;if(area(a,b,o)>=0)return!1;const l=a.x,h=b.x,c=o.x,f=a.y,d=b.y,m=o.y,v=l<h?l<c?l:c:h<c?h:c,y=f<d?f<m?f:m:d<m?d:m,_=l>h?l>c?l:c:h>c?h:c,x=f>d?f>m?f:m:d>m?d:m,w=gh(v,y,e,n,r),M=gh(_,x,e,n,r);let p=t.prevZ,S=t.nextZ;for(;p&&p.z>=w&&S&&S.z<=M;){if(p.x>=v&&p.x<=_&&p.y>=y&&p.y<=x&&p!==a&&p!==o&&yh(l,f,h,d,c,m,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,S.x>=v&&S.x<=_&&S.y>=y&&S.y<=x&&S!==a&&S!==o&&yh(l,f,h,d,c,m,S.x,S.y)&&area(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;p&&p.z>=w;){if(p.x>=v&&p.x<=_&&p.y>=y&&p.y<=x&&p!==a&&p!==o&&yh(l,f,h,d,c,m,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;S&&S.z<=M;){if(S.x>=v&&S.x<=_&&S.y>=y&&S.y<=x&&S!==a&&S!==o&&yh(l,f,h,d,c,m,S.x,S.y)&&area(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function ch(t,e,n){let p=t;do{const a=p.prev,b=p.next.next;!bh(a,b)&&xh(a,p,p.next,b)&&Sh(a,b)&&Sh(b,a)&&(e.push(a.i/n|0),e.push(p.i/n|0),e.push(b.i/n|0),Th(p),Th(p.next),p=t=b),p=p.next}while(p!==t);return ah(p)}function fh(t,e,n,r,o,l){let a=t;do{let b=a.next.next;for(;b!==a.prev;){if(a.i!==b.i&&_h(a,b)){let t=Eh(a,b);return a=ah(a,a.next),t=ah(t,t.next),lh(a,e,n,r,o,l,0),void lh(t,e,n,r,o,l,0)}b=b.next}a=a.next}while(a!==t)}function ph(a,b){return a.x-b.x}function dh(t,e){const n=function(t,e){let n,p=e,r=-1/0;const o=t.x,l=t.y;do{if(l<=p.y&&l>=p.next.y&&p.next.y!==p.y){const t=p.x+(l-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(t<=o&&t>r&&(r=t,n=p.x<p.next.x?p:p.next,t===o))return n}p=p.next}while(p!==e);if(!n)return null;const h=n,c=n.x,f=n.y;let d,m=1/0;p=n;do{o>=p.x&&p.x>=c&&o!==p.x&&yh(l<f?o:r,l,c,f,l<f?r:o,l,p.x,p.y)&&(d=Math.abs(l-p.y)/(o-p.x),Sh(p,t)&&(d<m||d===m&&(p.x>n.x||p.x===n.x&&mh(n,p)))&&(n=p,m=d)),p=p.next}while(p!==h);return n}(t,e);if(!n)return e;const r=Eh(n,t);return ah(r,r.next),ah(n,n.next)}function mh(t,p){return area(t.prev,t,p.prev)<0&&area(p.next,t,t.next)<0}function gh(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vh(t){let p=t,e=t;do{(p.x<e.x||p.x===e.x&&p.y<e.y)&&(e=p),p=p.next}while(p!==t);return e}function yh(t,e,n,r,o,l,h,c){return(o-h)*(e-c)>=(t-h)*(l-c)&&(t-h)*(r-c)>=(n-h)*(e-c)&&(n-h)*(l-c)>=(o-h)*(r-c)}function _h(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){let p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&xh(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(Sh(a,b)&&Sh(b,a)&&function(a,b){let p=a,t=!1;const e=(a.x+b.x)/2,n=(a.y+b.y)/2;do{p.y>n!=p.next.y>n&&p.next.y!==p.y&&e<(p.next.x-p.x)*(n-p.y)/(p.next.y-p.y)+p.x&&(t=!t),p=p.next}while(p!==a);return t}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||bh(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,t){return(q.y-p.y)*(t.x-q.x)-(q.x-p.x)*(t.y-q.y)}function bh(t,e){return t.x===e.x&&t.y===e.y}function xh(t,e,n,r){const o=Mh(area(t,e,n)),l=Mh(area(t,e,r)),h=Mh(area(n,r,t)),c=Mh(area(n,r,e));return o!==l&&h!==c||(!(0!==o||!wh(t,n,e))||(!(0!==l||!wh(t,r,e))||(!(0!==h||!wh(n,t,r))||!(0!==c||!wh(n,e,r)))))}function wh(p,q,t){return q.x<=Math.max(p.x,t.x)&&q.x>=Math.min(p.x,t.x)&&q.y<=Math.max(p.y,t.y)&&q.y>=Math.min(p.y,t.y)}function Mh(t){return t>0?1:t<0?-1:0}function Sh(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function Eh(a,b){const t=new Ch(a.i,a.x,a.y),e=new Ch(b.i,b.x,b.y),n=a.next,r=b.prev;return a.next=b,b.prev=a,t.next=n,n.prev=t,e.next=t,t.prev=e,r.next=e,e.prev=r,e}function Ah(i,t,e,n){const p=new Ch(i,t,e);return n?(p.next=n.next,p.prev=n,n.next.prev=p,n.next=p):(p.prev=p,p.next=p),p}function Th(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Ch(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ph{static area(t){const e=t.length;let a=0;for(let p=e-1,q=0;q<e;p=q++)a+=t[p].x*t[q].y-t[q].x*t[p].y;return.5*a}static isClockWise(t){return Ph.area(t)<0}static triangulateShape(t,e){const n=[],r=[],o=[];Rh(t),Ih(n,t);let l=t.length;e.forEach(Rh);for(let i=0;i<e.length;i++)r.push(l),l+=e[i].length,Ih(n,e[i]);const h=sh(n,r);for(let i=0;i<h.length;i+=3)o.push(h.slice(i,i+3));return o}}function Rh(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ih(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class kh extends qs{constructor(t=new ih([new fr(.5,.5),new fr(-.5,.5),new fr(-.5,-.5),new fr(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],o=[];for(let i=0,e=t.length;i<e;i++){l(t[i])}function l(t){const l=[],h=void 0!==e.curveSegments?e.curveSegments:12,c=void 0!==e.steps?e.steps:1,f=void 0!==e.depth?e.depth:1;let d=void 0===e.bevelEnabled||e.bevelEnabled,m=void 0!==e.bevelThickness?e.bevelThickness:.2,v=void 0!==e.bevelSize?e.bevelSize:m-.1,y=void 0!==e.bevelOffset?e.bevelOffset:0,_=void 0!==e.bevelSegments?e.bevelSegments:3;const x=e.extrudePath,w=void 0!==e.UVGenerator?e.UVGenerator:Dh;let M,S,E,A,T,C=!1;x&&(M=x.getSpacedPoints(c),C=!0,d=!1,S=x.computeFrenetFrames(c,!1),E=new Xr,A=new Xr,T=new Xr),d||(_=0,m=0,v=0,y=0);const P=t.extractPoints(h);let R=P.shape;const I=P.holes;if(!Ph.isClockWise(R)){R=R.reverse();for(let t=0,e=I.length;t<e;t++){const e=I[t];Ph.isClockWise(e)&&(I[t]=e.reverse())}}const k=Ph.triangulateShape(R,I),D=R;for(let t=0,e=I.length;t<e;t++){const e=I[t];R=R.concat(e)}function L(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const F=R.length,O=k.length;function N(t,e,n){let r,o,l;const h=t.x-e.x,c=t.y-e.y,f=n.x-t.x,d=n.y-t.y,m=h*h+c*c,v=h*d-c*f;if(Math.abs(v)>Number.EPSILON){const v=Math.sqrt(m),y=Math.sqrt(f*f+d*d),_=e.x-c/v,x=e.y+h/v,w=((n.x-d/y-_)*d-(n.y+f/y-x)*f)/(h*d-c*f);r=_+h*w-t.x,o=x+c*w-t.y;const M=r*r+o*o;if(M<=2)return new fr(r,o);l=Math.sqrt(M/2)}else{let t=!1;h>Number.EPSILON?f>Number.EPSILON&&(t=!0):h<-Number.EPSILON?f<-Number.EPSILON&&(t=!0):Math.sign(c)===Math.sign(d)&&(t=!0),t?(r=-c,o=h,l=Math.sqrt(m)):(r=h,o=c,l=Math.sqrt(m/2))}return new fr(r/l,o/l)}const B=[];for(let i=0,t=D.length,e=t-1,n=i+1;i<t;i++,e++,n++)e===t&&(e=0),n===t&&(n=0),B[i]=N(D[i],D[e],D[n]);const U=[];let z,V=B.concat();for(let t=0,e=I.length;t<e;t++){const e=I[t];z=[];for(let i=0,t=e.length,n=t-1,r=i+1;i<t;i++,n++,r++)n===t&&(n=0),r===t&&(r=0),z[i]=N(e[i],e[n],e[r]);U.push(z),V=V.concat(z)}for(let b=0;b<_;b++){const t=b/_,e=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let i=0,t=D.length;i<t;i++){const t=L(D[i],B[i],n);G(t.x,t.y,-e)}for(let t=0,r=I.length;t<r;t++){const r=I[t];z=U[t];for(let i=0,t=r.length;i<t;i++){const t=L(r[i],z[i],n);G(t.x,t.y,-e)}}}const j=v+y;for(let i=0;i<F;i++){const t=d?L(R[i],V[i],j):R[i];C?(A.copy(S.normals[0]).multiplyScalar(t.x),E.copy(S.binormals[0]).multiplyScalar(t.y),T.copy(M[0]).add(A).add(E),G(T.x,T.y,T.z)):G(t.x,t.y,0)}for(let s=1;s<=c;s++)for(let i=0;i<F;i++){const t=d?L(R[i],V[i],j):R[i];C?(A.copy(S.normals[s]).multiplyScalar(t.x),E.copy(S.binormals[s]).multiplyScalar(t.y),T.copy(M[s]).add(A).add(E),G(T.x,T.y,T.z)):G(t.x,t.y,f/c*s)}for(let b=_-1;b>=0;b--){const t=b/_,e=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let i=0,t=D.length;i<t;i++){const t=L(D[i],B[i],n);G(t.x,t.y,f+e)}for(let t=0,r=I.length;t<r;t++){const r=I[t];z=U[t];for(let i=0,t=r.length;i<t;i++){const t=L(r[i],z[i],n);C?G(t.x,t.y+M[c-1].y,M[c-1].x+e):G(t.x,t.y,f+e)}}}function H(t,e){let i=t.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=t.length-1);for(let s=0,t=c+2*_;s<t;s++){const t=F*s,o=F*(s+1);X(e+n+t,e+r+t,e+r+o,e+n+o)}}}function G(t,e,n){l.push(t),l.push(e),l.push(n)}function W(a,b,t){Y(a),Y(b),Y(t);const e=r.length/3,o=w.generateTopUV(n,r,e-3,e-2,e-1);Z(o[0]),Z(o[1]),Z(o[2])}function X(a,b,t,e){Y(a),Y(b),Y(e),Y(b),Y(t),Y(e);const o=r.length/3,l=w.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);Z(l[0]),Z(l[1]),Z(l[3]),Z(l[1]),Z(l[2]),Z(l[3])}function Y(t){r.push(l[3*t+0]),r.push(l[3*t+1]),r.push(l[3*t+2])}function Z(t){o.push(t.x),o.push(t.y)}!function(){const t=r.length/3;if(d){let t=0,e=F*t;for(let i=0;i<O;i++){const t=k[i];W(t[2]+e,t[1]+e,t[0]+e)}t=c+2*_,e=F*t;for(let i=0;i<O;i++){const t=k[i];W(t[0]+e,t[1]+e,t[2]+e)}}else{for(let i=0;i<O;i++){const t=k[i];W(t[2],t[1],t[0])}for(let i=0;i<O;i++){const t=k[i];W(t[0]+F*c,t[1]+F*c,t[2]+F*c)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;H(D,e),e+=D.length;for(let t=0,n=I.length;t<n;t++){const n=I[t];H(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Bs(r,3)),this.setAttribute("uv",new Bs(o,2)),this.computeVertexNormals()}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}toJSON(){const data=super.toJSON();return function(t,e,data){if(data.shapes=[],Array.isArray(t))for(let i=0,e=t.length;i<e;i++){const e=t[i];data.shapes.push(e.uuid)}else data.shapes.push(t.uuid);data.options=Object.assign({},e),void 0!==e.extrudePath&&(data.options.extrudePath=e.extrudePath.toJSON());return data}(this.parameters.shapes,this.parameters.options,data)}static fromJSON(data,t){const e=[];for(let n=0,r=data.shapes.length;n<r;n++){const r=t[data.shapes[n]];e.push(r)}const n=data.options.extrudePath;return void 0!==n&&(data.options.extrudePath=(new jl[n.type]).fromJSON(n)),new kh(e,data.options)}}const Dh={generateTopUV:function(t,e,n,r,o){const l=e[3*n],h=e[3*n+1],c=e[3*r],f=e[3*r+1],d=e[3*o],m=e[3*o+1];return[new fr(l,h),new fr(c,f),new fr(d,m)]},generateSideWallUV:function(t,e,n,r,o,l){const h=e[3*n],c=e[3*n+1],f=e[3*n+2],d=e[3*r],m=e[3*r+1],v=e[3*r+2],y=e[3*o],_=e[3*o+1],x=e[3*o+2],w=e[3*l],M=e[3*l+1],S=e[3*l+2];return Math.abs(c-m)<Math.abs(h-d)?[new fr(h,1-f),new fr(d,1-v),new fr(y,1-x),new fr(w,1-S)]:[new fr(c,1-f),new fr(m,1-v),new fr(_,1-x),new fr(M,1-S)]}};class Lh extends Kl{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(data){return new Lh(data.radius,data.detail)}}class Fh extends Kl{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(data){return new Fh(data.radius,data.detail)}}class Oh extends qs{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const o=t/2,l=e/2,h=Math.floor(n),c=Math.floor(r),f=h+1,d=c+1,m=t/h,v=e/c,y=[],_=[],x=[],w=[];for(let t=0;t<d;t++){const e=t*v-l;for(let n=0;n<f;n++){const r=n*m-o;_.push(r,-e,0),x.push(0,0,1),w.push(n/h),w.push(1-t/c)}}for(let t=0;t<c;t++)for(let e=0;e<h;e++){const a=e+f*t,b=e+f*(t+1),n=e+1+f*(t+1),r=e+1+f*t;y.push(a,b,r),y.push(b,n,r)}this.setIndex(y),this.setAttribute("position",new Bs(_,3)),this.setAttribute("normal",new Bs(x,3)),this.setAttribute("uv",new Bs(w,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Oh(data.width,data.height,data.widthSegments,data.heightSegments)}}class Nh extends qs{constructor(t=.5,e=1,n=32,r=1,o=0,l=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:l},n=Math.max(3,n);const h=[],c=[],f=[],d=[];let m=t;const v=(e-t)/(r=Math.max(1,r)),y=new Xr,_=new fr;for(let t=0;t<=r;t++){for(let i=0;i<=n;i++){const t=o+i/n*l;y.x=m*Math.cos(t),y.y=m*Math.sin(t),c.push(y.x,y.y,y.z),f.push(0,0,1),_.x=(y.x/e+1)/2,_.y=(y.y/e+1)/2,d.push(_.x,_.y)}m+=v}for(let t=0;t<r;t++){const e=t*(n+1);for(let i=0;i<n;i++){const t=i+e,a=t,b=t+n+1,r=t+n+2,o=t+1;h.push(a,b,o),h.push(b,r,o)}}this.setIndex(h),this.setAttribute("position",new Bs(c,3)),this.setAttribute("normal",new Bs(f,3)),this.setAttribute("uv",new Bs(d,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Nh(data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength)}}class Bh extends qs{constructor(t=new ih([new fr(0,.5),new fr(-.5,-.5),new fr(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],o=[],l=[];let h=0,c=0;if(!1===Array.isArray(t))f(t);else for(let i=0;i<t.length;i++)f(t[i]),this.addGroup(h,c,i),h+=c,c=0;function f(t){const h=r.length/3,f=t.extractPoints(e);let d=f.shape;const m=f.holes;!1===Ph.isClockWise(d)&&(d=d.reverse());for(let i=0,t=m.length;i<t;i++){const t=m[i];!0===Ph.isClockWise(t)&&(m[i]=t.reverse())}const v=Ph.triangulateShape(d,m);for(let i=0,t=m.length;i<t;i++){const t=m[i];d=d.concat(t)}for(let i=0,t=d.length;i<t;i++){const t=d[i];r.push(t.x,t.y,0),o.push(0,0,1),l.push(t.x,t.y)}for(let i=0,t=v.length;i<t;i++){const t=v[i],a=t[0]+h,b=t[1]+h,e=t[2]+h;n.push(a,b,e),c+=3}}this.setIndex(n),this.setAttribute("position",new Bs(r,3)),this.setAttribute("normal",new Bs(o,3)),this.setAttribute("uv",new Bs(l,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}toJSON(){const data=super.toJSON();return function(t,data){if(data.shapes=[],Array.isArray(t))for(let i=0,e=t.length;i<e;i++){const e=t[i];data.shapes.push(e.uuid)}else data.shapes.push(t.uuid);return data}(this.parameters.shapes,data)}static fromJSON(data,t){const e=[];for(let n=0,r=data.shapes.length;n<r;n++){const r=t[data.shapes[n]];e.push(r)}return new Bh(e,data.curveSegments)}}class Uh extends qs{constructor(t=1,e=32,n=16,r=0,o=2*Math.PI,l=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:l,thetaLength:h},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const c=Math.min(l+h,Math.PI);let f=0;const d=[],m=new Xr,v=new Xr,y=[],_=[],x=[],w=[];for(let y=0;y<=n;y++){const M=[],S=y/n;let E=0;0===y&&0===l?E=.5/e:y===n&&c===Math.PI&&(E=-.5/e);for(let n=0;n<=e;n++){const u=n/e;m.x=-t*Math.cos(r+u*o)*Math.sin(l+S*h),m.y=t*Math.cos(l+S*h),m.z=t*Math.sin(r+u*o)*Math.sin(l+S*h),_.push(m.x,m.y,m.z),v.copy(m).normalize(),x.push(v.x,v.y,v.z),w.push(u+E,1-S),M.push(f++)}d.push(M)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const a=d[t][r+1],b=d[t][r],e=d[t+1][r],o=d[t+1][r+1];(0!==t||l>0)&&y.push(a,b,o),(t!==n-1||c<Math.PI)&&y.push(b,e,o)}this.setIndex(y),this.setAttribute("position",new Bs(_,3)),this.setAttribute("normal",new Bs(x,3)),this.setAttribute("uv",new Bs(w,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Uh(data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength)}}class zh extends Kl{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(data){return new zh(data.radius,data.detail)}}class Vh extends qs{constructor(t=1,e=.4,n=12,r=48,o=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:o},n=Math.floor(n),r=Math.floor(r);const l=[],h=[],c=[],f=[],d=new Xr,m=new Xr,v=new Xr;for(let l=0;l<=n;l++)for(let i=0;i<=r;i++){const u=i/r*o,y=l/n*Math.PI*2;m.x=(t+e*Math.cos(y))*Math.cos(u),m.y=(t+e*Math.cos(y))*Math.sin(u),m.z=e*Math.sin(y),h.push(m.x,m.y,m.z),d.x=t*Math.cos(u),d.y=t*Math.sin(u),v.subVectors(m,d).normalize(),c.push(v.x,v.y,v.z),f.push(i/r),f.push(l/n)}for(let t=1;t<=n;t++)for(let i=1;i<=r;i++){const a=(r+1)*t+i-1,b=(r+1)*(t-1)+i-1,e=(r+1)*(t-1)+i,n=(r+1)*t+i;l.push(a,b,n),l.push(b,e,n)}this.setIndex(l),this.setAttribute("position",new Bs(h,3)),this.setAttribute("normal",new Bs(c,3)),this.setAttribute("uv",new Bs(f,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new Vh(data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc)}}class jh extends qs{constructor(t=1,e=.4,n=64,r=8,p=2,q=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:p,q:q},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],h=[],c=[],f=new Xr,d=new Xr,m=new Xr,v=new Xr,y=new Xr,_=new Xr,x=new Xr;for(let i=0;i<=n;++i){const u=i/n*p*Math.PI*2;w(u,p,q,t,m),w(u+.01,p,q,t,v),_.subVectors(v,m),x.addVectors(v,m),y.crossVectors(_,x),x.crossVectors(y,_),y.normalize(),x.normalize();for(let t=0;t<=r;++t){const o=t/r*Math.PI*2,v=-e*Math.cos(o),_=e*Math.sin(o);f.x=m.x+(v*x.x+_*y.x),f.y=m.y+(v*x.y+_*y.y),f.z=m.z+(v*x.z+_*y.z),l.push(f.x,f.y,f.z),d.subVectors(f,m).normalize(),h.push(d.x,d.y,d.z),c.push(i/n),c.push(t/r)}}for(let t=1;t<=n;t++)for(let i=1;i<=r;i++){const a=(r+1)*(t-1)+(i-1),b=(r+1)*t+(i-1),e=(r+1)*t+i,n=(r+1)*(t-1)+i;o.push(a,b,n),o.push(b,e,n)}function w(u,p,q,t,e){const n=Math.cos(u),r=Math.sin(u),o=q/p*u,l=Math.cos(o);e.x=t*(2+l)*.5*n,e.y=t*(2+l)*r*.5,e.z=t*Math.sin(o)*.5}this.setIndex(o),this.setAttribute("position",new Bs(l,3)),this.setAttribute("normal",new Bs(h,3)),this.setAttribute("uv",new Bs(c,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new jh(data.radius,data.tube,data.tubularSegments,data.radialSegments,data.p,data.q)}}class Hh extends qs{constructor(path=new zl(new Xr(-1,-1,0),new Xr(-1,1,0),new Xr(1,1,0)),t=64,e=1,n=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:path,tubularSegments:t,radius:e,radialSegments:n,closed:r};const o=path.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new Xr,h=new Xr,c=new fr;let f=new Xr;const d=[],m=[],v=[],y=[];function _(i){f=path.getPointAt(i/t,f);const r=o.normals[i],c=o.binormals[i];for(let t=0;t<=n;t++){const o=t/n*Math.PI*2,v=Math.sin(o),y=-Math.cos(o);h.x=y*r.x+v*c.x,h.y=y*r.y+v*c.y,h.z=y*r.z+v*c.z,h.normalize(),m.push(h.x,h.y,h.z),l.x=f.x+e*h.x,l.y=f.y+e*h.y,l.z=f.z+e*h.z,d.push(l.x,l.y,l.z)}}!function(){for(let i=0;i<t;i++)_(i);_(!1===r?t:0),function(){for(let i=0;i<=t;i++)for(let e=0;e<=n;e++)c.x=i/t,c.y=e/n,v.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let i=1;i<=n;i++){const a=(n+1)*(e-1)+(i-1),b=(n+1)*e+(i-1),t=(n+1)*e+i,r=(n+1)*(e-1)+i;y.push(a,b,r),y.push(b,t,r)}}()}(),this.setIndex(y),this.setAttribute("position",new Bs(d,3)),this.setAttribute("normal",new Bs(m,3)),this.setAttribute("uv",new Bs(v,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}toJSON(){const data=super.toJSON();return data.path=this.parameters.path.toJSON(),data}static fromJSON(data){return new Hh((new jl[data.path.type]).fromJSON(data.path),data.tubularSegments,data.radius,data.radialSegments,data.closed)}}class Gh extends qs{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,r=new Xr,o=new Xr;if(null!==t.index){const l=t.attributes.position,h=t.index;let c=t.groups;0===c.length&&(c=[{start:0,count:h.count,materialIndex:0}]);for(let t=0,ol=c.length;t<ol;++t){const f=c[t],d=f.start;for(let i=d,t=d+f.count;i<t;i+=3)for(let t=0;t<3;t++){const c=h.getX(i+t),f=h.getX(i+(t+1)%3);r.fromBufferAttribute(l,c),o.fromBufferAttribute(l,f),!0===Wh(r,o,n)&&(e.push(r.x,r.y,r.z),e.push(o.x,o.y,o.z))}}}else{const l=t.attributes.position;for(let i=0,t=l.count/3;i<t;i++)for(let t=0;t<3;t++){const h=3*i+t,c=3*i+(t+1)%3;r.fromBufferAttribute(l,h),o.fromBufferAttribute(l,c),!0===Wh(r,o,n)&&(e.push(r.x,r.y,r.z),e.push(o.x,o.y,o.z))}}this.setAttribute("position",new Bs(e,3))}}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}}function Wh(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(r)&&!0!==n.has(o)&&(n.add(r),n.add(o),!0)}var qh=Object.freeze({__proto__:null,BoxGeometry:oo,CapsuleGeometry:ql,CircleGeometry:Xl,ConeGeometry:Zl,CylinderGeometry:Yl,DodecahedronGeometry:$l,EdgesGeometry:rh,ExtrudeGeometry:kh,IcosahedronGeometry:Lh,LatheGeometry:Wl,OctahedronGeometry:Fh,PlaneGeometry:Oh,PolyhedronGeometry:Kl,RingGeometry:Nh,ShapeGeometry:Bh,SphereGeometry:Uh,TetrahedronGeometry:zh,TorusGeometry:Vh,TorusKnotGeometry:jh,TubeGeometry:Hh,WireframeGeometry:Gh});class Xh extends _s{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gs(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.fog=source.fog,this}}class Yh extends co{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Zh extends _s{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new gs(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Li,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.envMapIntensity=source.envMapIntensity,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}class Kh extends Zh{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new fr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return sr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gs(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gs(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gs(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(source){return super.copy(source),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=source.anisotropy,this.anisotropyRotation=source.anisotropyRotation,this.anisotropyMap=source.anisotropyMap,this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.dispersion=source.dispersion,this.ior=source.ior,this.iridescence=source.iridescence,this.iridescenceMap=source.iridescenceMap,this.iridescenceIOR=source.iridescenceIOR,this.iridescenceThicknessRange=[...source.iridescenceThicknessRange],this.iridescenceThicknessMap=source.iridescenceThicknessMap,this.sheen=source.sheen,this.sheenColor.copy(source.sheenColor),this.sheenColorMap=source.sheenColorMap,this.sheenRoughness=source.sheenRoughness,this.sheenRoughnessMap=source.sheenRoughnessMap,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this.thickness=source.thickness,this.thicknessMap=source.thicknessMap,this.attenuationDistance=source.attenuationDistance,this.attenuationColor.copy(source.attenuationColor),this.specularIntensity=source.specularIntensity,this.specularIntensityMap=source.specularIntensityMap,this.specularColor.copy(source.specularColor),this.specularColorMap=source.specularColorMap,this}}class $h extends _s{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gs(16777215),this.specular=new gs(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Li,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.specular.copy(source.specular),this.shininess=source.shininess,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}class Jh extends _s{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gs(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.gradientMap=source.gradientMap,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}class Qh extends _s{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(source){return super.copy(source),this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.flatShading=source.flatShading,this}}class tu extends _s{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Li,this.combine=ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}class eu extends _s{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(source){return super.copy(source),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}class nu extends _s{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(source){return super.copy(source),this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}class ru extends _s{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gs(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new fr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.defines={MATCAP:""},this.color.copy(source.color),this.matcap=source.matcap,this.map=source.map,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.flatShading=source.flatShading,this.fog=source.fog,this}}class iu extends Wa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(source){return super.copy(source),this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this}}function su(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function ou(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)}function au(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(i,e){return t[i]-t[e]})),n}function lu(t,e,n){const r=t.length,o=new t.constructor(r);for(let i=0,l=0;l!==r;++i){const r=n[i]*e;for(let n=0;n!==e;++n)o[l++]=t[r+n]}return o}function hu(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let l=o[r];if(void 0!==l)if(Array.isArray(l))do{l=o[r],void 0!==l&&(e.push(o.time),n.push.apply(n,l)),o=t[i++]}while(void 0!==o);else if(void 0!==l.toArray)do{l=o[r],void 0!==l&&(e.push(o.time),l.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{l=o[r],void 0!==l&&(e.push(o.time),n.push(l)),o=t[i++]}while(void 0!==o)}const uu={convertArray:su,isTypedArray:ou,getKeyframeOrder:au,sortedArray:lu,flattenJSON:hu,subclip:function(t,e,n,r,o=30){const l=t.clone();l.name=e;const h=[];for(let i=0;i<l.tracks.length;++i){const track=l.tracks[i],t=track.getValueSize(),e=[],c=[];for(let l=0;l<track.times.length;++l){const h=track.times[l]*o;if(!(h<n||h>=r)){e.push(track.times[l]);for(let e=0;e<t;++e)c.push(track.values[l*t+e])}}0!==e.length&&(track.times=su(e,track.times.constructor),track.values=su(c,track.values.constructor),h.push(track))}l.tracks=h;let c=1/0;for(let i=0;i<l.tracks.length;++i)c>l.tracks[i].times[0]&&(c=l.tracks[i].times[0]);for(let i=0;i<l.tracks.length;++i)l.tracks[i].shift(-1*c);return l.resetDuration(),l},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const o=n.tracks.length,l=e/r;for(let i=0;i<o;++i){const e=n.tracks[i],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(track){return track.name===e.name&&track.ValueTypeName===r}));if(void 0===o)continue;let h=0;const c=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=c/3);let f=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const m=e.times.length-1;let v;if(l<=e.times[0]){const t=h,n=c-h;v=e.values.slice(t,n)}else if(l>=e.times[m]){const t=m*c+h,n=t+c-h;v=e.values.slice(t,n)}else{const t=e.createInterpolant(),n=h,r=c-h;t.evaluate(l),v=t.resultBuffer.slice(n,r)}if("quaternion"===r){(new qr).fromArray(v).normalize().conjugate().toArray(v)}const y=o.times.length;for(let t=0;t<y;++t){const e=t*d+f;if("quaternion"===r)qr.multiplyQuaternionsFlat(o.values,e,v,0,o.values,e);else{const t=d-2*f;for(let n=0;n<t;++n)o.values[e+n]-=v[n]}}}return t.blendMode=Je,t}};class cu{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{let l;n:{r:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<o)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(o=r,r=e[++n],t<r)break e}l=e.length;break n}if(t>=o)break t;{const h=e[1];t<h&&(n=2,o=h);for(let l=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=o,o=e[--n-1],t>=o)break e}l=n,n=0}}for(;n<l;){const r=n+l>>>1;t<e[r]?l=r:n=r+1}if(r=e[n],o=e[n-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r;for(let i=0;i!==r;++i)e[i]=n[o+i];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fu extends cu{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ye,endingEnd:Ye}}intervalChanged_(t,e,n){const r=this.parameterPositions;let o=t-2,l=t+1,h=r[o],c=r[l];if(void 0===h)switch(this.getSettings_().endingStart){case Ze:o=t,h=2*e-n;break;case Ke:o=r.length-2,h=e+r[o]-r[o+1];break;default:o=t,h=n}if(void 0===c)switch(this.getSettings_().endingEnd){case Ze:l=t,c=2*n-e;break;case Ke:l=1,c=n+r[1]-r[0];break;default:l=t-1,c=e}const f=.5*(n-e),d=this.valueSize;this._weightPrev=f/(e-h),this._weightNext=f/(c-n),this._offsetPrev=o*d,this._offsetNext=l*d}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,h=this.valueSize,c=t*h,f=c-h,d=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,p=(n-e)/(r-e),_=p*p,x=_*p,w=-v*x+2*v*_-v*p,M=(1+v)*x+(-1.5-2*v)*_+(-.5+v)*p+1,S=(-1-y)*x+(1.5+y)*_+.5*p,E=y*x-y*_;for(let i=0;i!==h;++i)o[i]=w*l[d+i]+M*l[f+i]+S*l[c+i]+E*l[m+i];return o}}class pu extends cu{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,h=this.valueSize,c=t*h,f=c-h,d=(n-e)/(r-e),m=1-d;for(let i=0;i!==h;++i)o[i]=l[f+i]*m+l[c+i]*d;return o}}class du extends cu{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class mu{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=su(e,this.TimeBufferType),this.values=su(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(track){const t=track.constructor;let e;if(t.toJSON!==this.toJSON)e=t.toJSON(track);else{e={name:track.name,times:su(track.times,Array),values:su(track.values,Array)};const t=track.getInterpolation();t!==track.DefaultInterpolation&&(e.interpolation=t)}return e.type=track.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new du(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new pu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new fu(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case We:e=this.InterpolantFactoryMethodDiscrete;break;case qe:e=this.InterpolantFactoryMethodLinear;break;case Xe:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return We;case this.InterpolantFactoryMethodLinear:return qe;case this.InterpolantFactoryMethodSmooth:return Xe}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const n=this.times,r=n.length;let o=0,l=r-1;for(;o!==r&&n[o]<t;)++o;for(;-1!==l&&n[l]>e;)--l;if(++l,0!==o||l!==r){o>=l&&(l=Math.max(l,1),o=l-1);const t=this.getValueSize();this.times=n.slice(o,l),this.values=this.values.slice(o*t,l*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let l=null;for(let i=0;i!==o;i++){const e=n[i];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,e),t=!1;break}if(null!==l&&l>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,e,l),t=!1;break}l=e}if(void 0!==r&&ou(r))for(let i=0,e=r.length;i!==e;++i){const e=r[i];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,e),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Xe,o=t.length-1;let l=1;for(let i=1;i<o;++i){let o=!1;const time=t[i];if(time!==t[i+1]&&(1!==i||time!==t[0]))if(r)o=!0;else{const t=i*n,r=t-n,l=t+n;for(let h=0;h!==n;++h){const n=e[t+h];if(n!==e[r+h]||n!==e[l+h]){o=!0;break}}}if(o){if(i!==l){t[l]=t[i];const r=i*n,o=l*n;for(let t=0;t!==n;++t)e[o+t]=e[r+t]}++l}}if(o>0){t[l]=t[o];for(let t=o*n,r=l*n,h=0;h!==n;++h)e[r+h]=e[t+h];++l}return l!==t.length?(this.times=t.slice(0,l),this.values=e.slice(0,l*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),track=new(0,this.constructor)(this.name,t,e);return track.createInterpolant=this.createInterpolant,track}}mu.prototype.TimeBufferType=Float32Array,mu.prototype.ValueBufferType=Float32Array,mu.prototype.DefaultInterpolation=qe;class gu extends mu{constructor(t,e,n){super(t,e,n)}}gu.prototype.ValueTypeName="bool",gu.prototype.ValueBufferType=Array,gu.prototype.DefaultInterpolation=We,gu.prototype.InterpolantFactoryMethodLinear=void 0,gu.prototype.InterpolantFactoryMethodSmooth=void 0;class vu extends mu{}vu.prototype.ValueTypeName="color";class yu extends mu{}yu.prototype.ValueTypeName="number";class _u extends cu{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,h=this.valueSize,c=(n-e)/(r-e);let f=t*h;for(let t=f+h;f!==t;f+=4)qr.slerpFlat(o,0,l,f-h,l,f,c);return o}}class bu extends mu{InterpolantFactoryMethodLinear(t){return new _u(this.times,this.values,this.getValueSize(),t)}}bu.prototype.ValueTypeName="quaternion",bu.prototype.InterpolantFactoryMethodSmooth=void 0;class xu extends mu{constructor(t,e,n){super(t,e,n)}}xu.prototype.ValueTypeName="string",xu.prototype.ValueBufferType=Array,xu.prototype.DefaultInterpolation=We,xu.prototype.InterpolantFactoryMethodLinear=void 0,xu.prototype.InterpolantFactoryMethodSmooth=void 0;class wu extends mu{}wu.prototype.ValueTypeName="vector";class Mu{constructor(t="",e=-1,n=[],r=$e){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=ir(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let i=0,t=n.length;i!==t;++i)e.push(Su(n[i]).scale(r));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,t=n.length;i!==t;++i)e.push(mu.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const o=e.length,l=[];for(let i=0;i<o;i++){let t=[],h=[];t.push((i+o-1)%o,i,(i+1)%o),h.push(0,1,0);const c=au(t);t=lu(t,1,c),h=lu(h,1,c),r||0!==t[0]||(t.push(o),h.push(h[0])),l.push(new yu(".morphTargetInfluences["+e[i].name+"]",t,h).scale(1/n))}return new this(t,-1,l)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},pattern=/^([\w-]*?)([\d]+)$/;for(let i=0,e=t.length;i<e;i++){const e=t[i],n=e.name.match(pattern);if(n&&n.length>1){const t=n[1];let o=r[t];o||(r[t]=o=[]),o.push(e)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,o){if(0!==n.length){const l=[],h=[];hu(n,l,h,r),0!==l.length&&o.push(new t(e,l,h))}},r=[],o=t.name||"default",l=t.fps||30,h=t.blendMode;let c=t.length||-1;const f=t.hierarchy||[];for(let t=0;t<f.length;t++){const o=f[t].keys;if(o&&0!==o.length)if(o[0].morphTargets){const t={};let e;for(e=0;e<o.length;e++)if(o[e].morphTargets)for(let n=0;n<o[e].morphTargets.length;n++)t[o[e].morphTargets[n]]=-1;for(const n in t){const t=[],l=[];for(let r=0;r!==o[e].morphTargets.length;++r){const r=o[e];t.push(r.time),l.push(r.morphTarget===n?1:0)}r.push(new yu(".morphTargetInfluence["+n+"]",t,l))}c=t.length*l}else{const l=".bones["+e[t].name+"]";n(wu,l+".position",o,"pos",r),n(bu,l+".quaternion",o,"rot",r),n(wu,l+".scale",o,"scl",r)}}if(0===r.length)return null;return new this(o,c,r,h)}resetDuration(){let t=0;for(let i=0,e=this.tracks.length;i!==e;++i){const track=this.tracks[i];t=Math.max(t,track.times[track.times.length-1])}return this.duration=t,this}trim(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Su(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yu;case"vector":case"vector2":case"vector3":case"vector4":return wu;case"color":return vu;case"quaternion":return bu;case"bool":case"boolean":return gu;case"string":return xu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];hu(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Eu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Au{constructor(t,e,n){const r=this;let o,l=!1,h=0,c=0;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){c++,!1===l&&void 0!==r.onStart&&r.onStart(t,h,c),l=!0},this.itemEnd=function(t){h++,void 0!==r.onProgress&&r.onProgress(t,h,c),h===c&&(l=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return o?o(t):t},this.setURLModifier=function(t){return o=t,this},this.addHandler=function(t,e){return f.push(t,e),this},this.removeHandler=function(t){const e=f.indexOf(t);return-1!==e&&f.splice(e,2),this},this.getHandler=function(t){for(let i=0,e=f.length;i<e;i+=2){const e=f[i],n=f[i+1];if(e.global&&(e.lastIndex=0),e.test(t))return n}return null}}}const Tu=new Au;class Cu{constructor(t){this.manager=void 0!==t?t:Tu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,o){n.load(t,r,e,o)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(path){return this.path=path,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Cu.DEFAULT_MATERIAL_NAME="__DEFAULT";const Pu={};class Ru extends Error{constructor(t,e){super(t),this.response=e}}class Iu extends Cu{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Eu.get(t);if(void 0!==o)return this.manager.itemStart(t),setTimeout((()=>{e&&e(o),this.manager.itemEnd(t)}),0),o;if(void 0!==Pu[t])return void Pu[t].push({onLoad:e,onProgress:n,onError:r});Pu[t]=[],Pu[t].push({onLoad:e,onProgress:n,onError:r});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,c=this.responseType;fetch(l).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Pu[t],r=e.body.getReader(),o=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),l=o?parseInt(o):0,h=0!==l;let c=0;const f=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:o})=>{if(r)t.close();else{c+=o.byteLength;const r=new ProgressEvent("progress",{lengthComputable:h,loaded:c,total:l});for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onProgress&&t.onProgress(r)}t.enqueue(o),e()}}),(e=>{t.error(e)}))}()}});return new Response(f)}throw new Ru(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(c){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((text=>(new DOMParser).parseFromString(text,h)));case"json":return t.json();default:if(void 0===h)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(h),label=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(label);return t.arrayBuffer().then((t=>n.decode(t)))}}})).then((data=>{Eu.add(t,data);const e=Pu[t];delete Pu[t];for(let i=0,t=e.length;i<t;i++){const t=e[i];t.onLoad&&t.onLoad(data)}})).catch((e=>{const n=Pu[t];if(void 0===n)throw this.manager.itemError(t),e;delete Pu[t];for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onError&&t.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ku extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,l=new Iu(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}parse(t){const e=[];for(let i=0;i<t.length;i++){const n=Mu.parse(t[i]);e.push(n)}return e}}class Du extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,l=[],h=new yl,c=new Iu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let f=0;function d(i){c.load(t[i],(function(t){const n=o.parse(t,!0);l[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},f+=1,6===f&&(1===n.mipmapCount&&(h.minFilter=Lt),h.image=l,h.format=n.format,h.needsUpdate=!0,e&&e(h))}),n,r)}if(Array.isArray(t))for(let i=0,e=t.length;i<e;++i)d(i);else c.load(t,(function(t){const n=o.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){l[e]={mipmaps:[]};for(let i=0;i<n.mipmapCount;i++)l[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+i]),l[e].format=n.format,l[e].width=n.width,l[e].height=n.height}h.image=l}else h.image.width=n.width,h.image.height=n.height,h.mipmaps=n.mipmaps;1===n.mipmapCount&&(h.minFilter=Lt),h.format=n.format,h.needsUpdate=!0,e&&e(h)}),n,r);return h}}class Lu extends Cu{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Eu.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout((function(){e&&e(l),o.manager.itemEnd(t)}),0),l;const image=yr("img");function h(){f(),Eu.add(t,this),e&&e(this),o.manager.itemEnd(t)}function c(e){f(),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}function f(){image.removeEventListener("load",h,!1),image.removeEventListener("error",c,!1)}return image.addEventListener("load",h,!1),image.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),o.manager.itemStart(t),image.src=t,image}}class Fu extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=new bo;o.colorSpace=un;const l=new Lu(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let h=0;function c(i){l.load(t[i],(function(image){o.images[i]=image,h++,6===h&&(o.needsUpdate=!0,e&&e(o))}),void 0,r)}for(let i=0;i<t.length;++i)c(i);return o}}class Ou extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,l=new aa,h=new Iu(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(o.withCredentials),h.load(t,(function(t){let n;try{n=o.parse(t)}catch(t){if(void 0===r)return void console.error(t);r(t)}void 0!==n.image?l.image=n.image:void 0!==n.data&&(l.image.width=n.width,l.image.height=n.height,l.image.data=n.data),l.wrapS=void 0!==n.wrapS?n.wrapS:Tt,l.wrapT=void 0!==n.wrapT?n.wrapT:Tt,l.magFilter=void 0!==n.magFilter?n.magFilter:Lt,l.minFilter=void 0!==n.minFilter?n.minFilter:Lt,l.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(l.colorSpace=n.colorSpace),void 0!==n.flipY&&(l.flipY=n.flipY),void 0!==n.format&&(l.format=n.format),void 0!==n.type&&(l.type=n.type),void 0!==n.mipmaps&&(l.mipmaps=n.mipmaps,l.minFilter=Nt),1===n.mipmapCount&&(l.minFilter=Lt),void 0!==n.generateMipmaps&&(l.generateMipmaps=n.generateMipmaps),l.needsUpdate=!0,e&&e(l,n)}),n,r),l}}class Nu extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=new Br,l=new Lu(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,(function(image){o.image=image,o.needsUpdate=!0,void 0!==e&&e(o)}),n,r),o}}class Bu extends $i{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new gs(t),this.intensity=e}dispose(){}copy(source,t){return super.copy(source,t),this.color.copy(source.color),this.intensity=source.intensity,this}toJSON(meta){const data=super.toJSON(meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(data.object.target=this.target.uuid),data}}class Uu extends Bu{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gs(e)}copy(source,t){return super.copy(source,t),this.groundColor.copy(source.groundColor),this}}const zu=new Si,Vu=new Xr,ju=new Xr;class Hu{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fr(512,512),this.map=null,this.mapPass=null,this.matrix=new Si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Aa,this._frameExtents=new fr(1,1),this._viewportCount=1,this._viewports=[new Ur(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Vu.setFromMatrixPosition(t.matrixWorld),e.position.copy(Vu),ju.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ju),e.updateMatrixWorld(),zu.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(zu)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(source){return this.camera=source.camera.clone(),this.intensity=source.intensity,this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const object={};return 1!==this.intensity&&(object.intensity=this.intensity),0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}}class Gu extends Hu{constructor(){super(new vo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*rr*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;n===e.fov&&r===e.aspect&&o===e.far||(e.fov=n,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(source){return super.copy(source),this.focus=source.focus,this}}class Wu extends Bu{constructor(t,e,n=0,r=Math.PI/3,o=0,l=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.distance=n,this.angle=r,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Gu}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(source,t){return super.copy(source,t),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}const qu=new Si,Xu=new Xr,Yu=new Xr;class Zu extends Hu{constructor(){super(new vo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fr(4,2),this._viewportCount=6,this._viewports=[new Ur(2,1,1,1),new Ur(0,1,1,1),new Ur(3,1,1,1),new Ur(1,1,1,1),new Ur(3,0,1,1),new Ur(1,0,1,1)],this._cubeDirections=[new Xr(1,0,0),new Xr(-1,0,0),new Xr(0,0,1),new Xr(0,0,-1),new Xr(0,1,0),new Xr(0,-1,0)],this._cubeUps=[new Xr(0,1,0),new Xr(0,1,0),new Xr(0,1,0),new Xr(0,1,0),new Xr(0,0,1),new Xr(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),Xu.setFromMatrixPosition(t.matrixWorld),n.position.copy(Xu),Yu.copy(n.position),Yu.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Yu),n.updateMatrixWorld(),r.makeTranslation(-Xu.x,-Xu.y,-Xu.z),qu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qu)}}class Ku extends Bu{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Zu}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(source,t){return super.copy(source,t),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}class $u extends fo{constructor(t=-1,e=1,n=1,r=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(source,t){return super.copy(source,t),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}setViewOffset(t,e,n,r,o,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-t,l=n+t,h=r+e,c=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=t*this.view.offsetX,l=o+t*this.view.width,h-=e*this.view.offsetY,c=h-e*this.view.height}this.projectionMatrix.makeOrthographic(o,l,h,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}class Ju extends Hu{constructor(){super(new $u(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Qu extends Bu{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.shadow=new Ju}dispose(){this.shadow.dispose()}copy(source){return super.copy(source),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}class tc extends Bu{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class ec extends Bu{constructor(t,e,n=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(source){return super.copy(source),this.width=source.width,this.height=source.height,this}toJSON(meta){const data=super.toJSON(meta);return data.object.width=this.width,data.object.height=this.height,data}}class nc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let i=0;i<9;i++)this.coefficients.push(new Xr)}set(t){for(let i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}zero(){for(let i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*r),e.addScaledVector(l[2],.488603*o),e.addScaledVector(l[3],.488603*n),e.addScaledVector(l[4],n*r*1.092548),e.addScaledVector(l[5],r*o*1.092548),e.addScaledVector(l[6],.315392*(3*o*o-1)),e.addScaledVector(l[7],n*o*1.092548),e.addScaledVector(l[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],1.023328*r),e.addScaledVector(l[2],1.023328*o),e.addScaledVector(l[3],1.023328*n),e.addScaledVector(l[4],.858086*n*r),e.addScaledVector(l[5],.858086*r*o),e.addScaledVector(l[6],.743125*o*o-.247708),e.addScaledVector(l[7],.858086*n*o),e.addScaledVector(l[8],.429043*(n*n-r*r)),e}add(t){for(let i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}addScaledSH(t,s){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],s);return this}scale(s){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(s);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-r*r)}}class rc extends Bu{constructor(t=new nc,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(source){return super.copy(source),this.sh.copy(source.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(meta){const data=super.toJSON(meta);return data.object.sh=this.sh.toArray(),data}}class ic extends Cu{constructor(t){super(t),this.textures={}}load(t,e,n,r){const o=this,l=new Iu(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=this.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new gs).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(r.dispersion=t.dispersion),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const o=t.uniforms[e];switch(r.uniforms[e]={},o.type){case"t":r.uniforms[e].value=n(o.value);break;case"c":r.uniforms[e].value=(new gs).setHex(o.value);break;case"v2":r.uniforms[e].value=(new fr).fromArray(o.value);break;case"v3":r.uniforms[e].value=(new Xr).fromArray(o.value);break;case"v4":r.uniforms[e].value=(new Ur).fromArray(o.value);break;case"m3":r.uniforms[e].value=(new pr).fromArray(o.value);break;case"m4":r.uniforms[e].value=(new Si).fromArray(o.value);break;default:r.uniforms[e].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(const e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new fr).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapRotation&&r.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new fr).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return ic.createMaterialFromType(t)}static createMaterialFromType(t){return new{ShadowMaterial:Xh,SpriteMaterial:Io,RawShaderMaterial:Yh,ShaderMaterial:co,PointsMaterial:sl,MeshPhysicalMaterial:Kh,MeshStandardMaterial:Zh,MeshPhongMaterial:$h,MeshToonMaterial:Jh,MeshNormalMaterial:Qh,MeshLambertMaterial:tu,MeshDepthMaterial:eu,MeshDistanceMaterial:nu,MeshBasicMaterial:bs,MeshMatcapMaterial:ru,LineDashedMaterial:iu,LineBasicMaterial:Wa,Material:_s}[t]}}class sc{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let s="";for(let i=0,e=t.length;i<e;i++)s+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(s))}catch(t){return s}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,path){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(path)&&/^\//.test(t)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:path+t)}}class oc extends qs{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(source){return super.copy(source),this.instanceCount=source.instanceCount,this}toJSON(){const data=super.toJSON();return data.instanceCount=this.instanceCount,data.isInstancedBufferGeometry=!0,data}}class ac extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,l=new Iu(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}parse(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const o=t.interleavedBuffers[r],l=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers,o=r[e],l=new Uint32Array(o).buffer;return n[e]=l,l}(t,o.buffer),h=vr(o.type,l),c=new Co(h,o.stride);return c.uuid=o.uuid,e[r]=c,c}const o=t.isInstancedBufferGeometry?new oc:new qs,l=t.data.index;if(void 0!==l){const t=vr(l.type,l.array);o.setIndex(new Ps(t,1))}const h=t.data.attributes;for(const e in h){const n=h[e];let l;if(n.isInterleavedBufferAttribute){const e=r(t.data,n.data);l=new Ro(e,n.itemSize,n.offset,n.normalized)}else{const t=vr(n.type,n.array);l=new(n.isInstancedBufferAttribute?ca:Ps)(t,n.itemSize,n.normalized)}void 0!==n.name&&(l.name=n.name),void 0!==n.usage&&l.setUsage(n.usage),o.setAttribute(e,l)}const c=t.data.morphAttributes;if(c)for(const e in c){const n=c[e],l=[];for(let i=0,e=n.length;i<e;i++){const e=n[i];let o;if(e.isInterleavedBufferAttribute){const n=r(t.data,e.data);o=new Ro(n,e.itemSize,e.offset,e.normalized)}else{const t=vr(e.type,e.array);o=new Ps(t,e.itemSize,e.normalized)}void 0!==e.name&&(o.name=e.name),l.push(o)}o.morphAttributes[e]=l}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==f)for(let i=0,t=f.length;i!==t;++i){const t=f[i];o.addGroup(t.start,t.count,t.materialIndex)}const d=t.data.boundingSphere;if(void 0!==d){const t=new Xr;void 0!==d.center&&t.fromArray(d.center),o.boundingSphere=new mi(t,d.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}}class lc extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,path=""===this.path?sc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||path;const l=new Iu(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(text){let n=null;try{n=JSON.parse(text)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const l=n.metadata;if(void 0===l||void 0===l.type||"geometry"===l.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);o.parse(n,e)}),n,r)}async loadAsync(t,e){const path=""===this.path?sc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||path;const n=new Iu(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const text=await n.loadAsync(t,e),r=JSON.parse(text),o=r.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(r)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,r),l=this.parseImages(t.images,(function(){void 0!==e&&e(object)})),h=this.parseTextures(t.textures,l),c=this.parseMaterials(t.materials,h),object=this.parseObject(t.object,o,c,h,n),f=this.parseSkeletons(t.skeletons,object);if(this.bindSkeletons(object,f),this.bindLightTargets(object),void 0!==e){let t=!1;for(const e in l)if(l[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(object)}return object}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,n),o=await this.parseImagesAsync(t.images),l=this.parseTextures(t.textures,o),h=this.parseMaterials(t.materials,l),object=this.parseObject(t.object,r,h,l,e),c=this.parseSkeletons(t.skeletons,object);return this.bindSkeletons(object,c),this.bindLightTargets(object),object}parseShapes(t){const e={};if(void 0!==t)for(let i=0,n=t.length;i<n;i++){const n=(new ih).fromJSON(t[i]);e[n.uuid]=n}return e}parseSkeletons(t,object){const e={},n={};if(object.traverse((function(t){t.isBone&&(n[t.uuid]=t)})),void 0!==t)for(let i=0,r=t.length;i<r;i++){const r=(new ua).fromJSON(t[i],n);e[r.uuid]=r}return e}parseGeometries(t,e){const n={};if(void 0!==t){const r=new ac;for(let i=0,o=t.length;i<o;i++){let o;const data=t[i];switch(data.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(data);break;default:data.type in qh?o=qh[data.type].fromJSON(data,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${data.type}"`)}o.uuid=data.uuid,void 0!==data.name&&(o.name=data.name),void 0!==data.userData&&(o.userData=data.userData),n[data.uuid]=o}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const o=new ic;o.setTextures(e);for(let i=0,e=t.length;i<e;i++){const data=t[i];void 0===n[data.uuid]&&(n[data.uuid]=o.parse(data)),r[data.uuid]=n[data.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let i=0;i<t.length;i++){const data=t[i],n=Mu.parse(data);e[n.uuid]=n}return e}parseImages(t,e){const n=this,r={};let o;function l(image){if("string"==typeof image){const t=image;return function(t){return n.manager.itemStart(t),o.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return image.data?{data:vr(image.type,image.data),width:image.width,height:image.height}:null}if(void 0!==t&&t.length>0){const n=new Au(e);o=new Lu(n),o.setCrossOrigin(this.crossOrigin);for(let i=0,e=t.length;i<e;i++){const image=t[i],e=image.url;if(Array.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=l(e[n]);null!==r&&(r instanceof HTMLImageElement?t.push(r):t.push(new aa(r.data,r.width,r.height)))}r[image.uuid]=new Fr(t)}else{const t=l(image.url);r[image.uuid]=new Fr(t)}}}return r}async parseImagesAsync(t){const e=this,n={};let r;async function o(image){if("string"==typeof image){const t=image,path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:e.resourcePath+t;return await r.loadAsync(path)}return image.data?{data:vr(image.type,image.data),width:image.width,height:image.height}:null}if(void 0!==t&&t.length>0){r=new Lu(this.manager),r.setCrossOrigin(this.crossOrigin);for(let i=0,e=t.length;i<e;i++){const image=t[i],e=image.url;if(Array.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],l=await o(r);null!==l&&(l instanceof HTMLImageElement?t.push(l):t.push(new aa(l.data,l.width,l.height)))}n[image.uuid]=new Fr(t)}else{const t=await o(image.url);n[image.uuid]=new Fr(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const data=t[i];void 0===data.image&&console.warn('THREE.ObjectLoader: No "image" specified for',data.uuid),void 0===e[data.image]&&console.warn("THREE.ObjectLoader: Undefined image",data.image);const source=e[data.image],image=source.data;let o;Array.isArray(image)?(o=new bo,6===image.length&&(o.needsUpdate=!0)):(o=image&&image.data?new aa:new Br,image&&(o.needsUpdate=!0)),o.source=source,o.uuid=data.uuid,void 0!==data.name&&(o.name=data.name),void 0!==data.mapping&&(o.mapping=n(data.mapping,hc)),void 0!==data.channel&&(o.channel=data.channel),void 0!==data.offset&&o.offset.fromArray(data.offset),void 0!==data.repeat&&o.repeat.fromArray(data.repeat),void 0!==data.center&&o.center.fromArray(data.center),void 0!==data.rotation&&(o.rotation=data.rotation),void 0!==data.wrap&&(o.wrapS=n(data.wrap[0],uc),o.wrapT=n(data.wrap[1],uc)),void 0!==data.format&&(o.format=data.format),void 0!==data.internalFormat&&(o.internalFormat=data.internalFormat),void 0!==data.type&&(o.type=data.type),void 0!==data.colorSpace&&(o.colorSpace=data.colorSpace),void 0!==data.minFilter&&(o.minFilter=n(data.minFilter,cc)),void 0!==data.magFilter&&(o.magFilter=n(data.magFilter,cc)),void 0!==data.anisotropy&&(o.anisotropy=data.anisotropy),void 0!==data.flipY&&(o.flipY=data.flipY),void 0!==data.generateMipmaps&&(o.generateMipmaps=data.generateMipmaps),void 0!==data.premultiplyAlpha&&(o.premultiplyAlpha=data.premultiplyAlpha),void 0!==data.unpackAlignment&&(o.unpackAlignment=data.unpackAlignment),void 0!==data.compareFunction&&(o.compareFunction=data.compareFunction),void 0!==data.userData&&(o.userData=data.userData),r[data.uuid]=o}return r}parseObject(data,t,e,n,r){let object,o,l;function h(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(t){if(void 0!==t){if(Array.isArray(t)){const n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===e[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),n.push(e[r])}return n}return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),e[t]}}function f(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),n[t]}switch(data.type){case"Scene":object=new To,void 0!==data.background&&(Number.isInteger(data.background)?object.background=new gs(data.background):object.background=f(data.background)),void 0!==data.environment&&(object.environment=f(data.environment)),void 0!==data.fog&&("Fog"===data.fog.type?object.fog=new Ao(data.fog.color,data.fog.near,data.fog.far):"FogExp2"===data.fog.type&&(object.fog=new Eo(data.fog.color,data.fog.density)),""!==data.fog.name&&(object.fog.name=data.fog.name)),void 0!==data.backgroundBlurriness&&(object.backgroundBlurriness=data.backgroundBlurriness),void 0!==data.backgroundIntensity&&(object.backgroundIntensity=data.backgroundIntensity),void 0!==data.backgroundRotation&&object.backgroundRotation.fromArray(data.backgroundRotation),void 0!==data.environmentIntensity&&(object.environmentIntensity=data.environmentIntensity),void 0!==data.environmentRotation&&object.environmentRotation.fromArray(data.environmentRotation);break;case"PerspectiveCamera":object=new vo(data.fov,data.aspect,data.near,data.far),void 0!==data.focus&&(object.focus=data.focus),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.filmGauge&&(object.filmGauge=data.filmGauge),void 0!==data.filmOffset&&(object.filmOffset=data.filmOffset),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"OrthographicCamera":object=new $u(data.left,data.right,data.top,data.bottom,data.near,data.far),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"AmbientLight":object=new tc(data.color,data.intensity);break;case"DirectionalLight":object=new Qu(data.color,data.intensity),object.target=data.target||"";break;case"PointLight":object=new Ku(data.color,data.intensity,data.distance,data.decay);break;case"RectAreaLight":object=new ec(data.color,data.intensity,data.width,data.height);break;case"SpotLight":object=new Wu(data.color,data.intensity,data.distance,data.angle,data.penumbra,data.decay),object.target=data.target||"";break;case"HemisphereLight":object=new Uu(data.color,data.groundColor,data.intensity);break;case"LightProbe":object=(new rc).fromJSON(data);break;case"SkinnedMesh":o=h(data.geometry),l=c(data.material),object=new sa(o,l),void 0!==data.bindMode&&(object.bindMode=data.bindMode),void 0!==data.bindMatrix&&object.bindMatrix.fromArray(data.bindMatrix),void 0!==data.skeleton&&(object.skeleton=data.skeleton);break;case"Mesh":o=h(data.geometry),l=c(data.material),object=new io(o,l);break;case"InstancedMesh":o=h(data.geometry),l=c(data.material);const t=data.count,e=data.instanceMatrix,n=data.instanceColor;object=new _a(o,l,t),object.instanceMatrix=new ca(new Float32Array(e.array),16),void 0!==n&&(object.instanceColor=new ca(new Float32Array(n.array),n.itemSize));break;case"BatchedMesh":o=h(data.geometry),l=c(data.material),object=new Ga(data.maxInstanceCount,data.maxVertexCount,data.maxIndexCount,l),object.geometry=o,object.perObjectFrustumCulled=data.perObjectFrustumCulled,object.sortObjects=data.sortObjects,object._drawRanges=data.drawRanges,object._reservedRanges=data.reservedRanges,object._visibility=data.visibility,object._active=data.active,object._bounds=data.bounds.map((t=>{const e=new Kr;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);const n=new mi;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}})),object._maxInstanceCount=data.maxInstanceCount,object._maxVertexCount=data.maxVertexCount,object._maxIndexCount=data.maxIndexCount,object._geometryInitialized=data.geometryInitialized,object._geometryCount=data.geometryCount,object._matricesTexture=f(data.matricesTexture.uuid),void 0!==data.colorsTexture&&(object._colorsTexture=f(data.colorsTexture.uuid));break;case"LOD":object=new Zo;break;case"Line":object=new Qa(h(data.geometry),c(data.material));break;case"LineLoop":object=new il(h(data.geometry),c(data.material));break;case"LineSegments":object=new rl(h(data.geometry),c(data.material));break;case"PointCloud":case"Points":object=new fl(h(data.geometry),c(data.material));break;case"Sprite":object=new Wo(c(data.material));break;case"Group":object=new wo;break;case"Bone":object=new oa;break;default:object=new $i}if(object.uuid=data.uuid,void 0!==data.name&&(object.name=data.name),void 0!==data.matrix?(object.matrix.fromArray(data.matrix),void 0!==data.matrixAutoUpdate&&(object.matrixAutoUpdate=data.matrixAutoUpdate),object.matrixAutoUpdate&&object.matrix.decompose(object.position,object.quaternion,object.scale)):(void 0!==data.position&&object.position.fromArray(data.position),void 0!==data.rotation&&object.rotation.fromArray(data.rotation),void 0!==data.quaternion&&object.quaternion.fromArray(data.quaternion),void 0!==data.scale&&object.scale.fromArray(data.scale)),void 0!==data.up&&object.up.fromArray(data.up),void 0!==data.castShadow&&(object.castShadow=data.castShadow),void 0!==data.receiveShadow&&(object.receiveShadow=data.receiveShadow),data.shadow&&(void 0!==data.shadow.intensity&&(object.shadow.intensity=data.shadow.intensity),void 0!==data.shadow.bias&&(object.shadow.bias=data.shadow.bias),void 0!==data.shadow.normalBias&&(object.shadow.normalBias=data.shadow.normalBias),void 0!==data.shadow.radius&&(object.shadow.radius=data.shadow.radius),void 0!==data.shadow.mapSize&&object.shadow.mapSize.fromArray(data.shadow.mapSize),void 0!==data.shadow.camera&&(object.shadow.camera=this.parseObject(data.shadow.camera))),void 0!==data.visible&&(object.visible=data.visible),void 0!==data.frustumCulled&&(object.frustumCulled=data.frustumCulled),void 0!==data.renderOrder&&(object.renderOrder=data.renderOrder),void 0!==data.userData&&(object.userData=data.userData),void 0!==data.layers&&(object.layers.mask=data.layers),void 0!==data.children){const o=data.children;for(let i=0;i<o.length;i++)object.add(this.parseObject(o[i],t,e,n,r))}if(void 0!==data.animations){const t=data.animations;for(let i=0;i<t.length;i++){const e=t[i];object.animations.push(r[e])}}if("LOD"===data.type){void 0!==data.autoUpdate&&(object.autoUpdate=data.autoUpdate);const t=data.levels;for(let e=0;e<t.length;e++){const n=t[e],r=object.getObjectByProperty("uuid",n.object);void 0!==r&&object.addLevel(r,n.distance,n.hysteresis)}}return object}bindSkeletons(object,t){0!==Object.keys(t).length&&object.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}bindLightTargets(object){object.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const e=t.target,n=object.getObjectByProperty("uuid",e);t.target=void 0!==n?n:new $i}}))}}const hc={UVMapping:bt,CubeReflectionMapping:xt,CubeRefractionMapping:wt,EquirectangularReflectionMapping:Mt,EquirectangularRefractionMapping:St,CubeUVReflectionMapping:Et},uc={RepeatWrapping:At,ClampToEdgeWrapping:Tt,MirroredRepeatWrapping:Ct},cc={NearestFilter:Pt,NearestMipmapNearestFilter:Rt,NearestMipmapLinearFilter:kt,LinearFilter:Lt,LinearMipmapNearestFilter:Ft,LinearMipmapLinearFilter:Nt};class fc extends Cu{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Eu.get(t);if(void 0!==l)return o.manager.itemStart(t),l.then?void l.then((n=>{e&&e(n),o.manager.itemEnd(t)})).catch((t=>{r&&r(t)})):(setTimeout((function(){e&&e(l),o.manager.itemEnd(t)}),0),l);const h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include",h.headers=this.requestHeader;const c=fetch(t,h).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(n){return Eu.add(t,n),e&&e(n),o.manager.itemEnd(t),n})).catch((function(e){r&&r(e),Eu.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)}));Eu.add(t,c),o.manager.itemStart(t)}}let pc;class dc{static getContext(){return void 0===pc&&(pc=new(window.AudioContext||window.webkitAudioContext)),pc}static setContext(t){pc=t}}class mc extends Cu{constructor(t){super(t)}load(t,e,n,r){const o=this,l=new Iu(this.manager);function h(e){r?r(e):console.error(e),o.manager.itemError(t)}l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(t){try{const n=t.slice(0);dc.getContext().decodeAudioData(n,(function(t){e(t)})).catch(h)}catch(t){h(t)}}),n,r)}}const gc=new Si,vc=new Si,yc=new Si;class _c{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,yc.copy(t.projectionMatrix);const n=e.eyeSep/2,r=n*e.near/e.focus,o=e.near*Math.tan(nr*e.fov*.5)/e.zoom;let l,h;vc.elements[12]=-n,gc.elements[12]=n,l=-o*e.aspect+r,h=o*e.aspect+r,yc.elements[0]=2*e.near/(h-l),yc.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(yc),l=-o*e.aspect-r,h=o*e.aspect-r,yc.elements[0]=2*e.near/(h-l),yc.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(yc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(vc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(gc)}}class bc extends vo{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class xc{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=wc();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function wc(){return performance.now()}const Mc=new Xr,Sc=new qr,Ec=new Xr,Ac=new Xr;class Tc extends $i{constructor(){super(),this.type="AudioListener",this.context=dc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Mc,Sc,Ec),Ac.set(0,0,-1).applyQuaternion(Sc),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Mc.x,t),e.positionY.linearRampToValueAtTime(Mc.y,t),e.positionZ.linearRampToValueAtTime(Mc.z,t),e.forwardX.linearRampToValueAtTime(Ac.x,t),e.forwardY.linearRampToValueAtTime(Ac.y,t),e.forwardZ.linearRampToValueAtTime(Ac.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Mc.x,Mc.y,Mc.z),e.setOrientation(Ac.x,Ac.y,Ac.z,n.x,n.y,n.z)}}class Cc extends $i{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const source=this.context.createBufferSource();return source.buffer=this.buffer,source.loop=this.loop,source.loopStart=this.loopStart,source.loopEnd=this.loopEnd,source.onended=this.onEnded.bind(this),source.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=source,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(t=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let i=1,t=this.filters.length;i<t;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let i=1,t=this.filters.length;i<t;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(filter){return this.setFilters(filter?[filter]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(source,t){return super.copy(source,t),"buffer"!==source.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=source.autoplay,this.buffer=source.buffer,this.detune=source.detune,this.loop=source.loop,this.loopStart=source.loopStart,this.loopEnd=source.loopEnd,this.offset=source.offset,this.duration=source.duration,this.playbackRate=source.playbackRate,this.hasPlaybackControl=source.hasPlaybackControl,this.sourceType=source.sourceType,this.filters=source.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Pc=new Xr,Rc=new qr,Ic=new Xr,kc=new Xr;class Dc extends Cc{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Pc,Rc,Ic),kc.set(0,0,1).applyQuaternion(Rc);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Pc.x,t),e.positionY.linearRampToValueAtTime(Pc.y,t),e.positionZ.linearRampToValueAtTime(Pc.z,t),e.orientationX.linearRampToValueAtTime(kc.x,t),e.orientationY.linearRampToValueAtTime(kc.y,t),e.orientationZ.linearRampToValueAtTime(kc.z,t)}else e.setPosition(Pc.x,Pc.y,Pc.z),e.setOrientation(kc.x,kc.y,kc.z)}}class Lc{constructor(audio,t=2048){this.analyser=audio.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),audio.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const data=this.getFrequencyData();for(let i=0;i<data.length;i++)t+=data[i];return t/data.length}}class Fc{constructor(t,e,n){let r,o,l;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,o=t*r+r;let l=this.cumulativeWeight;if(0===l){for(let i=0;i!==r;++i)n[o+i]=n[i];l=e}else{l+=e;const t=e/l;this._mixBufferRegion(n,o,0,t,r)}this.cumulativeWeight=l}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-o,e)}l>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let i=e,t=e+e;i!==t;++i)if(n[i]!==n[i+e]){h.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,t=r;i!==t;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,n,r,o){if(r>=.5)for(let i=0;i!==o;++i)t[e+i]=t[n+i]}_slerp(t,e,n,r){qr.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,o){const l=this._workIndex*o;qr.multiplyQuaternionsFlat(t,l,t,e,t,n),qr.slerpFlat(t,e,t,e,t,l,r)}_lerp(t,e,n,r,o){const s=1-r;for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]*s+t[n+i]*r}}_lerpAdditive(t,e,n,r,o){for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]+t[n+i]*r}}}const Oc="\\[\\]\\.:\\/",Nc=new RegExp("["+Oc+"]","g"),Bc="[^"+Oc+"]",Uc="[^"+Oc.replace("\\.","")+"]",zc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Bc)+/(WCOD+)?/.source.replace("WCOD",Uc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Bc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Bc)+"$"),Vc=["material","materials","bones","map"];class jc{constructor(t,path,e){this.path=path,this.parsedPath=e||jc.parseTrackName(path),this.node=jc.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,path,e){return t&&t.isAnimationObjectGroup?new jc.Composite(t,path,e):new jc(t,path,e)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Nc,"")}static parseTrackName(t){const e=zc.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Vc.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const source=this.resolvedProperty;for(let i=0,n=source.length;i!==n;++i)t[e++]=source[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let o=e.propertyIndex;if(t||(t=jc.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let i=0;i<t.length;i++)if(t[i].name===r){r=i;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const l=t[r];if(void 0===l){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let h=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?h=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(h=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jc.Composite=class{constructor(t,path,e){const n=e||jc.parseTrackName(path);this._targetGroup=t,this._bindings=t.subscribe_(path,n)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].unbind()}},jc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jc.prototype.GetterByBindingType=[jc.prototype._getValue_direct,jc.prototype._getValue_array,jc.prototype._getValue_arrayElement,jc.prototype._getValue_toArray],jc.prototype.SetterByBindingTypeAndVersioning=[[jc.prototype._setValue_direct,jc.prototype._setValue_direct_setNeedsUpdate,jc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jc.prototype._setValue_array,jc.prototype._setValue_array_setNeedsUpdate,jc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jc.prototype._setValue_arrayElement,jc.prototype._setValue_arrayElement_setNeedsUpdate,jc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jc.prototype._setValue_fromArray,jc.prototype._setValue_fromArray_setNeedsUpdate,jc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Hc{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ir(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,e=arguments.length;i!==e;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length;let h,c=t.length,f=this.nCachedObjects_;for(let i=0,d=arguments.length;i!==d;++i){const object=arguments[i],d=object.uuid;let m=e[d];if(void 0===m){m=c++,e[d]=m,t.push(object);for(let t=0,e=l;t!==e;++t)o[t].push(new jc(object,n[t],r[t]))}else if(m<f){h=t[m];const c=--f,v=t[c];e[v.uuid]=m,t[m]=v,e[d]=c,t[c]=object;for(let t=0,e=l;t!==e;++t){const e=o[t],l=e[c];let h=e[m];e[m]=l,void 0===h&&(h=new jc(object,n[t],r[t])),e[c]=h}}else t[m]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_;for(let i=0,l=arguments.length;i!==l;++i){const object=arguments[i],l=object.uuid,h=e[l];if(void 0!==h&&h>=o){const c=o++,f=t[c];e[f.uuid]=h,t[h]=f,e[l]=c,t[c]=object;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[c],o=e[h];e[h]=r,e[c]=o}}}this.nCachedObjects_=o}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_,l=t.length;for(let i=0,h=arguments.length;i!==h;++i){const h=arguments[i].uuid,c=e[h];if(void 0!==c)if(delete e[h],c<o){const h=--o,f=t[h],d=--l,m=t[d];e[f.uuid]=c,t[c]=f,e[m.uuid]=h,t[h]=m,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[h],o=e[d];e[c]=r,e[h]=o,e.pop()}}else{const o=--l,h=t[o];o>0&&(e[h.uuid]=c),t[c]=h,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[c]=e[o],e.pop()}}}this.nCachedObjects_=o}subscribe_(path,t){const e=this._bindingsIndicesByPath;let n=e[path];const r=this._bindings;if(void 0!==n)return r[n];const o=this._paths,l=this._parsedPaths,h=this._objects,c=h.length,f=this.nCachedObjects_,d=new Array(c);n=r.length,e[path]=n,o.push(path),l.push(t),r.push(d);for(let i=f,e=h.length;i!==e;++i){const object=h[i];d[i]=new jc(object,path,t)}return d}unsubscribe_(path){const t=this._bindingsIndicesByPath,e=t[path];if(void 0!==e){const n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length-1,h=o[l];t[path[l]]=e,o[e]=h,o.pop(),r[e]=r[l],r.pop(),n[e]=n[l],n.pop()}}}class Gc{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const o=e.tracks,l=o.length,h=new Array(l),c={endingStart:Ye,endingEnd:Ye};for(let i=0;i!==l;++i){const t=o[i].createInterpolant(null);h[i]=t,t.settings=c}this._interpolantSettings=c,this._interpolants=h,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=He,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(time){return this._startTime=time,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,o=r/n,l=n/r;t.warp(1,o,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,o=r.time,l=this.timeScale;let h=this._timeScaleInterpolant;null===h&&(h=r._lendControlInterpolant(),this._timeScaleInterpolant=h);const c=h.parameterPositions,f=h.sampleValues;return c[0]=o,c[1]=o+n,f[0]=t/l,f[1]=e/l,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(time,t,e,n){if(!this.enabled)return void this._updateWeight(time);const r=this._startTime;if(null!==r){const n=(time-r)*e;n<0||0===e?t=0:(this._startTime=null,t=e*n)}t*=this._updateTimeScale(time);const o=this._updateTime(t),l=this._updateWeight(time);if(l>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===Je)for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(l);else for(let r=0,h=t.length;r!==h;++r)t[r].evaluate(o),e[r].accumulate(n,l)}}_updateWeight(time){let t=0;if(this.enabled){t=this.weight;const e=this._weightInterpolant;if(null!==e){const n=e.evaluate(time)[0];t*=n,time>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(time){let t=0;if(!this.paused){t=this.timeScale;const e=this._timeScaleInterpolant;if(null!==e){t*=e.evaluate(time)[0],time>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(t){const e=this._clip.duration,n=this.loop;let time=this.time+t,r=this._loopCount;const o=n===Ge;if(0===t)return-1===r||!o||1&~r?time:e-time;if(n===je){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(time>=e)time=e;else{if(!(time<0)){this.time=time;break t}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),time>=e||time<0){const n=Math.floor(time/e);time-=e*n,r+=Math.abs(n);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=t>0?e:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=time;if(o&&!(1&~r))return e-time}return time}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Ze,r.endingEnd=Ze):(r.endingStart=t?this.zeroSlopeAtStart?Ze:Ye:Ke,r.endingEnd=e?this.zeroSlopeAtEnd?Ze:Ye:Ke)}_scheduleFading(t,e,n){const r=this._mixer,o=r.time;let l=this._weightInterpolant;null===l&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const h=l.parameterPositions,c=l.sampleValues;return h[0]=o,c[0]=e,h[1]=o+t,c[1]=n,this}}const Wc=new Float32Array(1);class qc extends Jn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,l=t._propertyBindings,h=t._interpolants,c=n.uuid,f=this._bindingsByRootAndName;let d=f[c];void 0===d&&(d={},f[c]=d);for(let i=0;i!==o;++i){const track=r[i],t=track.name;let o=d[t];if(void 0!==o)++o.referenceCount,l[i]=o;else{if(o=l[i],void 0!==o){null===o._cacheIndex&&(++o.referenceCount,this._addInactiveBinding(o,c,t));continue}const path=e&&e._propertyBindings[i].binding.parsedPath;o=new Fc(jc.create(n,t,path),track.ValueTypeName,track.getValueSize()),++o.referenceCount,this._addInactiveBinding(o,c,t),l[i]=o}h[i].resultBuffer=o.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==t.useCount++&&(this._lendBinding(t),t.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.useCount&&(t.restoreOriginalState(),this._takeBackBinding(t))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,o=this._actionsByClip;let l=o[e];if(void 0===l)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=l;else{const e=l.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),l.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,l=this._actionsByClip,h=l[o],c=h.knownActions,f=c[c.length-1],d=t._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),t._byClipCacheIndex=null;delete h.actionByRoot[(t._localRoot||this._root).uuid],0===c.length&&delete l[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,o=this._bindings;let l=r[e];void 0===l&&(l={},r[e]=l),l[n]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,l=this._bindingsByRootAndName,h=l[r],c=e[e.length-1],f=t._cacheIndex;c._cacheIndex=f,e[f]=c,e.pop(),delete h[o],0===Object.keys(h).length&&delete l[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new pu(new Float32Array(2),new Float32Array(2),1,Wc),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o}clipAction(t,e,n){const r=e||this._root,o=r.uuid;let l="string"==typeof t?Mu.findByName(r,t):t;const h=null!==l?l.uuid:t,c=this._actionsByClip[h];let f=null;if(void 0===n&&(n=null!==l?l.blendMode:$e),void 0!==c){const t=c.actionByRoot[o];if(void 0!==t&&t.blendMode===n)return t;f=c.knownActions[0],null===l&&(l=f._clip)}if(null===l)return null;const d=new Gc(this,l,e,n);return this._bindAction(d,f),this._addInactiveAction(d,h,o),d}existingAction(t,e){const n=e||this._root,r=n.uuid,o="string"==typeof t?Mu.findByName(n,t):t,l=o?o.uuid:t,h=this._actionsByClip[l];return void 0!==h&&h.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,time=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let i=0;i!==n;++i){e[i]._update(time,t,r,o)}const l=this._bindings,h=this._nActiveBindings;for(let i=0;i!==h;++i)l[i].apply(o);return this}setTime(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){const t=o.knownActions;for(let i=0,n=t.length;i!==n;++i){const n=t[i];this._deactivateAction(n);const r=n._cacheIndex,o=e[e.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(n)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Xc extends zr{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Gr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Yc extends zr{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new jr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Zc{constructor(t){this.value=t}clone(){return new Zc(void 0===this.value.clone?this.value:this.value.clone())}}let Kc=0;class $c extends Jn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Kc++}),this.name="",this.usage=Bn,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(source){this.name=source.name,this.usage=source.usage;const t=source.uniforms;this.uniforms.length=0;for(let i=0,e=t.length;i<e;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Jc extends Co{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}clone(data){const t=super.clone(data);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(data){const t=super.toJSON(data);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Qc{constructor(t,e,n,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const tf=new Si;class ef{constructor(t,e,n=0,r=1/0){this.ray=new Mi(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Fi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return tf.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(tf),this}intersectObject(object,t=!0,e=[]){return rf(object,this,e,t),e.sort(nf),e}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)rf(t[i],this,n,e);return n.sort(nf),n}}function nf(a,b){return a.distance-b.distance}function rf(object,t,e,n){let r=!0;if(object.layers.test(t.layers)){!1===object.raycast(t,e)&&(r=!1)}if(!0===r&&!0===n){const n=object.children;for(let i=0,r=n.length;i<r;i++)rf(n[i],t,e,!0)}}class sf{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=sr(this.phi,t,Math.PI-t),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(sr(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class of{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}class af{constructor(t,e,n,r){af.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==t&&this.set(t,e,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,n,r){const o=this.elements;return o[0]=t,o[2]=e,o[1]=n,o[3]=r,this}}const lf=new fr;class hf{constructor(t=new fr(1/0,1/0),e=new fr(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,e){const n=lf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lf).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const uf=new Xr,cf=new Xr;class ff{constructor(t=new Xr,e=new Xr){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(line){return this.start.copy(line.start),this.end.copy(line.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){uf.subVectors(t,this.start),cf.subVectors(this.end,this.start);const n=cf.dot(cf);let r=cf.dot(uf)/n;return e&&(r=sr(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(line){return line.start.equals(this.start)&&line.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const pf=new Xr;class df extends $i{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new qs,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,t=1,e=32;i<e;i++,t++){const n=i/e*Math.PI*2,o=t/e*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Bs(r,3));const o=new Wa({fog:!1,toneMapped:!1});this.cone=new rl(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),pf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const mf=new Xr,gf=new Si,vf=new Si;class yf extends rl{constructor(object){const t=_f(object),e=new qs,n=[],r=[],o=new gs(0,0,1),l=new gs(0,1,0);for(let i=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(l.r,l.g,l.b))}e.setAttribute("position",new Bs(n,3)),e.setAttribute("color",new Bs(r,3));super(e,new Wa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=object,this.bones=t,this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");vf.copy(this.root.matrixWorld).invert();for(let i=0,t=0;i<e.length;i++){const n=e[i];n.parent&&n.parent.isBone&&(gf.multiplyMatrices(vf,n.matrixWorld),mf.setFromMatrixPosition(gf),r.setXYZ(t,mf.x,mf.y,mf.z),gf.multiplyMatrices(vf,n.parent.matrixWorld),mf.setFromMatrixPosition(gf),r.setXYZ(t+1,mf.x,mf.y,mf.z),t+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function _f(object){const t=[];!0===object.isBone&&t.push(object);for(let i=0;i<object.children.length;i++)t.push.apply(t,_f(object.children[i]));return t}class bf extends io{constructor(t,e,n){super(new Uh(e,4,2),new bs({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xf=new Xr,wf=new gs,Mf=new gs;class Sf extends $i{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Fh(e);r.rotateY(.5*Math.PI),this.material=new bs({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),l=new Float32Array(3*o.count);r.setAttribute("color",new Ps(l,3)),this.add(new io(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");wf.copy(this.light.color),Mf.copy(this.light.groundColor);for(let i=0,t=e.count;i<t;i++){const n=i<t/2?wf:Mf;e.setXYZ(i,n.r,n.g,n.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(xf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ef extends rl{constructor(t=10,e=10,n=4473924,r=8947848){n=new gs(n),r=new gs(r);const o=e/2,l=t/e,h=t/2,c=[],f=[];for(let i=0,t=0,d=-h;i<=e;i++,d+=l){c.push(-h,0,d,h,0,d),c.push(d,0,-h,d,0,h);const e=i===o?n:r;e.toArray(f,t),t+=3,e.toArray(f,t),t+=3,e.toArray(f,t),t+=3,e.toArray(f,t),t+=3}const d=new qs;d.setAttribute("position",new Bs(c,3)),d.setAttribute("color",new Bs(f,3));super(d,new Wa({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Af extends rl{constructor(t=10,e=16,n=8,r=64,o=4473924,l=8947848){o=new gs(o),l=new gs(l);const h=[],c=[];if(e>1)for(let i=0;i<e;i++){const n=i/e*(2*Math.PI),r=Math.sin(n)*t,f=Math.cos(n)*t;h.push(0,0,0),h.push(r,0,f);const d=1&i?o:l;c.push(d.r,d.g,d.b),c.push(d.r,d.g,d.b)}for(let i=0;i<n;i++){const e=1&i?o:l,f=t-t/n*i;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),o=Math.sin(n)*f,l=Math.cos(n)*f;h.push(o,0,l),c.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),o=Math.sin(n)*f,l=Math.cos(n)*f,h.push(o,0,l),c.push(e.r,e.g,e.b)}}const f=new qs;f.setAttribute("position",new Bs(h,3)),f.setAttribute("color",new Bs(c,3));super(f,new Wa({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Tf=new Xr,Cf=new Xr,Pf=new Xr;class Rf extends $i{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let r=new qs;r.setAttribute("position",new Bs([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const o=new Wa({fog:!1,toneMapped:!1});this.lightPlane=new Qa(r,o),this.add(this.lightPlane),r=new qs,r.setAttribute("position",new Bs([0,0,0,0,0,1],3)),this.targetLine=new Qa(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Tf.setFromMatrixPosition(this.light.matrixWorld),Cf.setFromMatrixPosition(this.light.target.matrixWorld),Pf.subVectors(Cf,Tf),this.lightPlane.lookAt(Cf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cf),this.targetLine.scale.z=Pf.length()}}const If=new Xr,kf=new fo;class Df extends rl{constructor(t){const e=new qs,n=new Wa({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],l={};function h(a,b){c(a),c(b)}function c(t){r.push(0,0,0),o.push(0,0,0),void 0===l[t]&&(l[t]=[]),l[t].push(r.length/3-1)}h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4"),e.setAttribute("position",new Bs(r,3)),e.setAttribute("color",new Bs(o,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const f=new gs(16755200),d=new gs(16711680),m=new gs(43775),v=new gs(16777215),y=new gs(3355443);this.setColors(f,d,m,v,y)}setColors(t,e,n,r,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;kf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const n=this.camera.coordinateSystem===Zn?-1:0;Lf("c",e,t,kf,0,0,n),Lf("t",e,t,kf,0,0,1),Lf("n1",e,t,kf,-1,-1,n),Lf("n2",e,t,kf,1,-1,n),Lf("n3",e,t,kf,-1,1,n),Lf("n4",e,t,kf,1,1,n),Lf("f1",e,t,kf,-1,-1,1),Lf("f2",e,t,kf,1,-1,1),Lf("f3",e,t,kf,-1,1,1),Lf("f4",e,t,kf,1,1,1),Lf("u1",e,t,kf,.7,1.1,n),Lf("u2",e,t,kf,-.7,1.1,n),Lf("u3",e,t,kf,0,2,n),Lf("cf1",e,t,kf,-1,0,1),Lf("cf2",e,t,kf,1,0,1),Lf("cf3",e,t,kf,0,-1,1),Lf("cf4",e,t,kf,0,1,1),Lf("cn1",e,t,kf,-1,0,n),Lf("cn2",e,t,kf,1,0,n),Lf("cn3",e,t,kf,0,-1,n),Lf("cn4",e,t,kf,0,1,n),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lf(t,e,n,r,o,l,h){If.set(o,l,h).unproject(r);const c=e[t];if(void 0!==c){const t=n.getAttribute("position");for(let i=0,e=c.length;i<e;i++)t.setXYZ(c[i],If.x,If.y,If.z)}}const Ff=new Kr;class Of extends rl{constructor(object,t=16776960){const e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new qs;r.setIndex(new Ps(e,1)),r.setAttribute("position",new Ps(n,3)),super(r,new Wa({color:t,toneMapped:!1})),this.object=object,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(object){if(void 0!==object&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Ff.setFromObject(this.object),Ff.isEmpty())return;const t=Ff.min,e=Ff.max,n=this.geometry.attributes.position,r=n.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=e.y,r[5]=e.z,r[6]=t.x,r[7]=t.y,r[8]=e.z,r[9]=e.x,r[10]=t.y,r[11]=e.z,r[12]=e.x,r[13]=e.y,r[14]=t.z,r[15]=t.x,r[16]=e.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=e.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(object){return this.object=object,this.update(),this}copy(source,t){return super.copy(source,t),this.object=source.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Nf extends rl{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qs;r.setIndex(new Ps(n,1)),r.setAttribute("position",new Bs([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Wa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bf extends Qa{constructor(t,e=1,n=16776960){const r=n,o=new qs;o.setAttribute("position",new Bs([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),o.computeBoundingSphere(),super(o,new Wa({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=new qs;l.setAttribute("position",new Bs([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),this.add(new io(l,new bs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Uf=new Xr;let zf,Vf;class jf extends $i{constructor(t=new Xr(0,0,1),e=new Xr(0,0,0),n=1,r=16776960,o=.2*n,l=.2*o){super(),this.type="ArrowHelper",void 0===zf&&(zf=new qs,zf.setAttribute("position",new Bs([0,0,0,0,1,0],3)),Vf=new Yl(0,.5,1,5,1),Vf.translate(0,-.5,0)),this.position.copy(e),this.line=new Qa(zf,new Wa({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new io(Vf,new bs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,o,l)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Uf.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Uf,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(source){return super.copy(source,!1),this.line.copy(source.line),this.cone.copy(source.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Hf extends rl{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new qs;n.setAttribute("position",new Bs(e,3)),n.setAttribute("color",new Bs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Wa({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new gs,o=this.geometry.attributes.color.array;return r.set(t),r.toArray(o,0),r.toArray(o,3),r.set(e),r.toArray(o,6),r.toArray(o,9),r.set(n),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gf{constructor(){this.type="ShapePath",this.color=new gs,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Gl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,o,l){return this.currentPath.bezierCurveTo(t,e,n,r,o,l),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let r=!1;for(let p=n-1,q=0;q<n;p=q++){let n=e[p],o=e[q],l=o.x-n.x,h=o.y-n.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(n=e[q],l=-l,o=e[p],h=-h),t.y<n.y||t.y>o.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=h*(t.x-n.x)-l*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(o.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=o.x)return!0}}return r}const n=Ph.isClockWise,r=this.subPaths;if(0===r.length)return[];let o,l,h;const c=[];if(1===r.length)return l=r[0],h=new ih,h.curves=l.curves,c.push(h),c;let f=!n(r[0].getPoints());f=t?!f:f;const d=[],m=[];let v,y,_=[],x=0;m[x]=void 0,_[x]=[];for(let i=0,e=r.length;i<e;i++)l=r[i],v=l.getPoints(),o=n(v),o=t?!o:o,o?(!f&&m[x]&&x++,m[x]={s:new ih,p:v},m[x].s.curves=l.curves,f&&x++,_[x]=[]):_[x].push({h:l,p:v[0]});if(!m[0])return function(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],r=new ih;r.curves=n.curves,e.push(r)}return e}(r);if(m.length>1){let t=!1,n=0;for(let t=0,e=m.length;t<e;t++)d[t]=[];for(let r=0,o=m.length;r<o;r++){const o=_[r];for(let l=0;l<o.length;l++){const h=o[l];let c=!0;for(let o=0;o<m.length;o++)e(h.p,m[o].p)&&(r!==o&&n++,c?(c=!1,d[o].push(h)):t=!0);c&&d[r].push(h)}}n>0&&!1===t&&(_=d)}for(let i=0,t=m.length;i<t;i++){h=m[i].s,c.push(h),y=_[i];for(let t=0,e=y.length;t<e;t++)h.holes.push(y[t].h)}return c}}class Wf extends Jn{constructor(object,t=null){super(),this.object=object,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function qf(t,e,n,r){const o=function(t){switch(t){case Ut:case zt:return{byteLength:1,components:1};case jt:case Vt:case qt:return{byteLength:2,components:1};case Xt:case Yt:return{byteLength:2,components:4};case Gt:case Ht:case Wt:return{byteLength:4,components:1};case Kt:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(r);switch(n){case $t:case te:return t*e;case ee:return t*e*2;case ie:case se:return t*e/o.components*o.byteLength;case oe:case ae:return t*e*2/o.components*o.byteLength;case Jt:return t*e*3/o.components*o.byteLength;case Qt:case he:return t*e*4/o.components*o.byteLength;case ue:case ce:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case fe:case pe:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case me:case ve:return Math.max(t,16)*Math.max(e,8)/4;case de:case ge:return Math.max(t,8)*Math.max(e,8)/2;case ye:case _e:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case be:case xe:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case we:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Me:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Se:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Ee:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Ae:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Te:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Ce:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Pe:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Re:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Ie:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case ke:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case De:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Le:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Fe:case Oe:case Ne:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Be:case Ue:return Math.ceil(t/4)*Math.ceil(e/4)*8;case ze:case Ve:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}const Xf={contain:function(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t},cover:function(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t},fill:function(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t},getByteLength:qf};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},505:function(t,e,n){var r;t.exports=function(){function t(data){this.mode=n.MODE_8BIT_BYTE,this.data=data,this.parsedData=[];for(var i=0,t=this.data.length;i<t;i++){var e=[],code=this.data.charCodeAt(i);code>65536?(e[0]=240|(1835008&code)>>>18,e[1]=128|(258048&code)>>>12,e[2]=128|(4032&code)>>>6,e[3]=128|63&code):code>2048?(e[0]=224|(61440&code)>>>12,e[1]=128|(4032&code)>>>6,e[2]=128|63&code):code>128?(e[0]=192|(1984&code)>>>6,e[1]=128|63&code):e[0]=code,this.parsedData.push(e)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var i=0,e=this.parsedData.length;i<e;i++)t.put(this.parsedData[i],8)}},e.prototype={addData:function(data){var e=new t(data);this.dataList.push(e),this.dataCache=null},isDark:function(t,col){if(t<0||this.moduleCount<=t||col<0||this.moduleCount<=col)throw new Error(t+","+col);return this.modules[t][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[r][col]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,col){for(var e=-1;e<=7;e++)if(!(t+e<=-1||this.moduleCount<=t+e))for(var n=-1;n<=7;n++)col+n<=-1||this.moduleCount<=col+n||(this.modules[t+e][col+n]=0<=e&&e<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==e||6==e)||2<=e&&e<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,pattern=0,i=0;i<8;i++){this.makeImpl(!0,i);var e=h.getLostPoint(this);(0==i||t>e)&&(t=e,pattern=i)}return pattern},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n),o=1;this.make();for(var l=0;l<this.modules.length;l++)for(var h=l*o,col=0;col<this.modules[l].length;col++){var c=col*o;this.modules[l][col]&&(r.beginFill(0,100),r.moveTo(c,h),r.lineTo(c+o,h),r.lineTo(c+o,h+o),r.lineTo(c,h+o),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=h.getPatternPosition(this.typeNumber),i=0;i<t.length;i++)for(var e=0;e<t.length;e++){var n=t[i],col=t[e];if(null==this.modules[n][col])for(var r=-2;r<=2;r++)for(var o=-2;o<=2;o++)this.modules[n+r][col+o]=-2==r||2==r||-2==o||2==o||0==r&&0==o}},setupTypeNumber:function(t){for(var e=h.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var n=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(i=0;i<18;i++)n=!t&&1==(e>>i&1),this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n},setupTypeInfo:function(t,e){for(var data=this.errorCorrectLevel<<3|e,n=h.getBCHTypeInfo(data),i=0;i<15;i++){var r=!t&&1==(n>>i&1);i<6?this.modules[i][8]=r:i<8?this.modules[i+1][8]=r:this.modules[this.moduleCount-15+i][8]=r}for(i=0;i<15;i++)r=!t&&1==(n>>i&1),i<8?this.modules[8][this.moduleCount-i-1]=r:i<9?this.modules[8][15-i-1+1]=r:this.modules[8][15-i-1]=r;this.modules[this.moduleCount-8][8]=!t},mapData:function(data,t){for(var e=-1,n=this.moduleCount-1,r=7,o=0,col=this.moduleCount-1;col>0;col-=2)for(6==col&&col--;;){for(var l=0;l<2;l++)if(null==this.modules[n][col-l]){var c=!1;o<data.length&&(c=1==(data[o]>>>r&1)),h.getMask(t,n,col-l)&&(c=!c),this.modules[n][col-l]=c,-1==--r&&(o++,r=7)}if((n+=e)<0||this.moduleCount<=n){n-=e,e=-e;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,r){for(var o=d.getRSBlocks(t,n),l=new m,i=0;i<r.length;i++){var data=r[i];l.put(data.mode,4),l.put(data.getLength(),h.getLengthInBits(data.mode,t)),data.write(l)}var c=0;for(i=0;i<o.length;i++)c+=o[i].dataCount;if(l.getLengthInBits()>8*c)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*c+")");for(l.getLengthInBits()+4<=8*c&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*c||(l.put(e.PAD0,8),l.getLengthInBits()>=8*c));)l.put(e.PAD1,8);return e.createBytes(l,o)},e.createBytes=function(t,e){for(var n=0,r=0,o=0,l=new Array(e.length),c=new Array(e.length),d=0;d<e.length;d++){var m=e[d].dataCount,v=e[d].totalCount-m;r=Math.max(r,m),o=Math.max(o,v),l[d]=new Array(m);for(var i=0;i<l[d].length;i++)l[d][i]=255&t.buffer[i+n];n+=m;var y=h.getErrorCorrectPolynomial(v),_=new f(l[d],y.getLength()-1).mod(y);for(c[d]=new Array(y.getLength()-1),i=0;i<c[d].length;i++){var x=i+_.getLength()-c[d].length;c[d][i]=x>=0?_.get(x):0}}var w=0;for(i=0;i<e.length;i++)w+=e[i].totalCount;var data=new Array(w),M=0;for(i=0;i<r;i++)for(d=0;d<e.length;d++)i<l[d].length&&(data[M++]=l[d][i]);for(i=0;i<o;i++)for(d=0;d<e.length;d++)i<c[d].length&&(data[M++]=c[d][i]);return data};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={L:1,M:0,Q:3,H:2},l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var t=data<<10;h.getBCHDigit(t)-h.getBCHDigit(h.G15)>=0;)t^=h.G15<<h.getBCHDigit(t)-h.getBCHDigit(h.G15);return(data<<10|t)^h.G15_MASK},getBCHTypeNumber:function(data){for(var t=data<<12;h.getBCHDigit(t)-h.getBCHDigit(h.G18)>=0;)t^=h.G18<<h.getBCHDigit(t)-h.getBCHDigit(h.G18);return data<<12|t},getBCHDigit:function(data){for(var t=0;0!=data;)t++,data>>>=1;return t},getPatternPosition:function(t){return h.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,i,e){switch(t){case l.PATTERN000:return(i+e)%2==0;case l.PATTERN001:return i%2==0;case l.PATTERN010:return e%3==0;case l.PATTERN011:return(i+e)%3==0;case l.PATTERN100:return(Math.floor(i/2)+Math.floor(e/3))%2==0;case l.PATTERN101:return i*e%2+i*e%3==0;case l.PATTERN110:return(i*e%2+i*e%3)%2==0;case l.PATTERN111:return(i*e%3+(i+e)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var a=new f([1],0),i=0;i<t;i++)a=a.multiply(new f([1,c.gexp(i)],0));return a},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var col=0;col<e;col++){for(var o=0,l=t.isDark(r,col),h=-1;h<=1;h++)if(!(r+h<0||e<=r+h))for(var c=-1;c<=1;c++)col+c<0||e<=col+c||0==h&&0==c||l==t.isDark(r+h,col+c)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<e-1;r++)for(col=0;col<e-1;col++){var f=0;t.isDark(r,col)&&f++,t.isDark(r+1,col)&&f++,t.isDark(r,col+1)&&f++,t.isDark(r+1,col+1)&&f++,0!=f&&4!=f||(n+=3)}for(r=0;r<e;r++)for(col=0;col<e-6;col++)t.isDark(r,col)&&!t.isDark(r,col+1)&&t.isDark(r,col+2)&&t.isDark(r,col+3)&&t.isDark(r,col+4)&&!t.isDark(r,col+5)&&t.isDark(r,col+6)&&(n+=40);for(col=0;col<e;col++)for(r=0;r<e-6;r++)t.isDark(r,col)&&!t.isDark(r+1,col)&&t.isDark(r+2,col)&&t.isDark(r+3,col)&&t.isDark(r+4,col)&&!t.isDark(r+5,col)&&t.isDark(r+6,col)&&(n+=40);var d=0;for(col=0;col<e;col++)for(r=0;r<e;r++)t.isDark(r,col)&&d++;return n+=Math.abs(100*d/e/e-50)/5*10}},c={glog:function(t){if(t<1)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)c.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)c.EXP_TABLE[i]=c.EXP_TABLE[i-4]^c.EXP_TABLE[i-5]^c.EXP_TABLE[i-6]^c.EXP_TABLE[i-8];for(i=0;i<255;i++)c.LOG_TABLE[c.EXP_TABLE[i]]=i;function f(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function d(t,e){this.totalCount=t,this.dataCount=e}function m(){this.buffer=[],this.length=0}f.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=c.gexp(c.glog(this.get(i))+c.glog(t.get(n)));return new f(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=c.gexp(c.glog(t.get(i))+e);return new f(n,0).mod(t)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(t,e){var n=d.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,o=[],i=0;i<r;i++)for(var l=n[3*i+0],h=n[3*i+1],c=n[3*i+2],f=0;f<l;f++)o.push(new d(h,c));return o},d.getRsBlockTable=function(t,e){switch(e){case o.L:return d.RS_BLOCK_TABLE[4*(t-1)+0];case o.M:return d.RS_BLOCK_TABLE[4*(t-1)+1];case o.Q:return d.RS_BLOCK_TABLE[4*(t-1)+2];case o.H:return d.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},m.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function y(){return"undefined"!=typeof CanvasRenderingContext2D}function _(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var x=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,n=this._el,r=t.getModuleCount();function o(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}Math.floor(e.width/r),Math.floor(e.height/r),this.clear();var svg=o("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:e.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(svg),svg.appendChild(o("rect",{fill:e.colorLight,width:"100%",height:"100%"})),svg.appendChild(o("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var l=0;l<r;l++)for(var col=0;col<r;col++)if(t.isDark(l,col)){var h=o("use",{x:String(col),y:String(l)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),svg.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),w="svg"===document.documentElement.tagName.toLowerCase()?x:y()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this&&this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,t,r,o,l,h,c,f,d){if("nodeName"in image&&/img/i.test(image.nodeName))for(var i=arguments.length-1;i>=1;i--)arguments[i]=arguments[i]*e;else void 0===f&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}function r(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var r=document.createElement("img"),o=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},l=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return r.onabort=o,r.onerror=o,r.onload=l,void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var o=function(t,e){this._bIsPainted=!1,this._android=_(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return o.prototype.draw=function(t){var e=this._elImage,n=this._oContext,r=this._htOption,o=t.getModuleCount(),l=r.width/o,h=r.height/o,c=Math.round(l),f=Math.round(h);e.style.display="none",this.clear();for(var d=0;d<o;d++)for(var col=0;col<o;col++){var m=t.isDark(d,col),v=col*l,y=d*h;n.strokeStyle=m?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=m?r.colorDark:r.colorLight,n.fillRect(v,y,l,h),n.strokeRect(Math.floor(v)+.5,Math.floor(y)+.5,c,f),n.strokeRect(Math.ceil(v)-.5,Math.ceil(y)-.5,c,f)}this._bIsPainted=!0},o.prototype.makeImage=function(){this._bIsPainted&&r.call(this,t)},o.prototype.isPainted=function(){return this._bIsPainted},o.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},o.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},o}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,r=t.getModuleCount(),o=Math.floor(e.width/r),l=Math.floor(e.height/r),h=['<table style="border:0;border-collapse:collapse;">'],c=0;c<r;c++){h.push("<tr>");for(var col=0;col<r;col++)h.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+l+"px;background-color:"+(t.isDark(c,col)?e.colorDark:e.colorLight)+';"></td>');h.push("</tr>")}h.push("</table>"),n.innerHTML=h.join("");var f=n.childNodes[0],d=(e.width-f.offsetWidth)/2,m=(e.height-f.offsetHeight)/2;d>0&&m>0&&(f.style.margin=m+"px "+d+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function M(t,e){for(var n=1,r=S(t),i=0,l=v.length;i<=l;i++){var h=0;switch(e){case o.L:h=v[i][0];break;case o.M:h=v[i][1];break;case o.Q:h=v[i][2];break;case o.H:h=v[i][3]}if(r<=h)break;n++}if(n>v.length)throw new Error("Too long data");return n}function S(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}return(r=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:o.H},"string"==typeof e&&(e={text:e}),e)for(var i in e)this._htOption[i]=e[i];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(w=x),this._android=_(),this._el=t,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(M(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},r.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},r.prototype.clear=function(){this._oDrawing.clear()},r.CorrectLevel=o,r}()},506:function(t,e,n){var r=n(655),o=n(418);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},507:function(t,e){var n="__lodash_placeholder__";t.exports=function(t,e){for(var r=-1,o=t.length,l=0,h=[];++r<o;){var c=t[r];c!==e&&c!==n||(t[r]=n,h[l++]=r)}return h}},508:function(t,e,n){var r=n(760),o=n(758),l=n(1090),h=n(761),c=n(4216),f=n(1086);t.exports=function(t,e,n){var d=-1,m=o,v=t.length,y=!0,_=[],x=_;if(n)y=!1,m=l;else if(v>=200){var w=e?null:c(t);if(w)return f(w);y=!1,m=h,x=new r}else x=e?[]:_;t:for(;++d<v;){var M=t[d],S=e?e(M):M;if(M=n||0!==M?M:0,y&&S==S){for(var E=x.length;E--;)if(x[E]===S)continue t;e&&x.push(S),_.push(M)}else m(x,S,n)||(x!==_&&x.push(S),_.push(M))}return _}},537:function(t,e,n){var r=n(287).Symbol;t.exports=r},538:function(t,e,n){"use strict";(function(e,r){var o=65536,l=4294967295;var h=n(123).Buffer,c=e.crypto||e.msCrypto;c&&c.getRandomValues?t.exports=function(t,e){if(t>l)throw new RangeError("requested too many random bytes");var n=h.allocUnsafe(t);if(t>0)if(t>o)for(var f=0;f<t;f+=o)c.getRandomValues(n.slice(f,f+o));else c.getRandomValues(n);if("function"==typeof e)return r.nextTick((function(){e(null,n)}));return n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(149),n(245))},539:function(t,e,n){(e=t.exports=n(1374)).Stream=e,e.Readable=e,e.Writable=n(1016),e.Duplex=n(498),e.Transform=n(1377),e.PassThrough=n(3649)},540:function(t,e,n){var r=n(123).Buffer;function o(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}o.prototype.update=function(data,t){"string"==typeof data&&(t=t||"utf8",data=r.from(data,t));for(var e=this._block,n=this._blockSize,o=data.length,l=this._len,h=0;h<o;){for(var c=l%n,f=Math.min(o-h,n-c),i=0;i<f;i++)e[c+i]=data[h+i];h+=f,(l+=f)%n==0&&this._update(e)}return this._len+=o,this},o.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,o=(n-r)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o},543:function(t,e){t.exports=function(t){return t}},544:function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},545:function(t,e){t.exports=function(t){return t.placeholder}},546:function(t,e,n){var r=n(506);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},5692:function(t,e,n){"use strict";n.r(e),n.d(e,"GLTFLoader",(function(){return l}));var r=n(5);function o(t,e){if(e===r.mh)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===r.kh||e===r.lh){let n=t.getIndex();if(null===n){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let i=0;i<r.count;i++)e.push(i);t.setIndex(e),n=t.getIndex()}const o=n.count-2,l=[];if(e===r.kh)for(let i=1;i<=o;i++)l.push(n.getX(0)),l.push(n.getX(i)),l.push(n.getX(i+1));else for(let i=0;i<o;i++)i%2==0?(l.push(n.getX(i)),l.push(n.getX(i+1)),l.push(n.getX(i+2))):(l.push(n.getX(i+2)),l.push(n.getX(i+1)),l.push(n.getX(i)));l.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const h=t.clone();return h.setIndex(l),h.clearGroups(),h}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class l extends r.Gd{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new v(t)})),this.register((function(t){return new y(t)})),this.register((function(t){return new C(t)})),this.register((function(t){return new P(t)})),this.register((function(t){return new R(t)})),this.register((function(t){return new x(t)})),this.register((function(t){return new w(t)})),this.register((function(t){return new M(t)})),this.register((function(t){return new S(t)})),this.register((function(t){return new m(t)})),this.register((function(t){return new E(t)})),this.register((function(t){return new _(t)})),this.register((function(t){return new T(t)})),this.register((function(t){return new A(t)})),this.register((function(t){return new f(t)})),this.register((function(t){return new I(t)})),this.register((function(t){return new k(t)}))}load(t,e,n,o){const l=this;let h;if(""!==this.resourcePath)h=this.resourcePath;else if(""!==this.path){const e=r.Hd.extractUrlBase(t);h=r.Hd.resolveURL(e,this.path)}else h=r.Hd.extractUrlBase(t);this.manager.itemStart(t);const c=function(e){o?o(e):console.error(e),l.manager.itemError(t),l.manager.itemEnd(t)},f=new r.kc(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(t,(function(data){try{l.parse(data,h,(function(n){e(n),l.manager.itemEnd(t)}),c)}catch(t){c(t)}}),n,c)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(data,path,t,e){let n;const r={},o={},l=new TextDecoder;if("string"==typeof data)n=JSON.parse(data);else if(data instanceof ArrayBuffer){if(l.decode(new Uint8Array(data,0,4))===D){try{r[c.KHR_BINARY_GLTF]=new O(data)}catch(t){return void(e&&e(t))}n=JSON.parse(r[c.KHR_BINARY_GLTF].content)}else n=JSON.parse(l.decode(data))}else n=data;if(void 0===n.asset||n.asset.version[0]<2)return void(e&&e(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new ht(n,{path:path||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let i=0;i<this.pluginCallbacks.length;i++){const t=this.pluginCallbacks[i](h);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,r[t.name]=!0}if(n.extensionsUsed)for(let i=0;i<n.extensionsUsed.length;++i){const t=n.extensionsUsed[i],e=n.extensionsRequired||[];switch(t){case c.KHR_MATERIALS_UNLIT:r[t]=new d;break;case c.KHR_DRACO_MESH_COMPRESSION:r[t]=new N(n,this.dracoLoader);break;case c.KHR_TEXTURE_TRANSFORM:r[t]=new B;break;case c.KHR_MESH_QUANTIZATION:r[t]=new U;break;default:e.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}h.setExtensions(r),h.setPlugins(o),h.parse(t,e)}parseAsync(data,path){const t=this;return new Promise((function(e,n){t.parse(data,path,e,n)}))}}function h(){let t={};return{get:function(e){return t[e]},add:function(e,object){t[e]=object},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const c={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class f{constructor(t){this.parser=t,this.name=c.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let o=e.cache.get(n);if(o)return o;const l=e.json,h=((l.extensions&&l.extensions[this.name]||{}).lights||[])[t];let c;const f=new r.ab(16777215);void 0!==h.color&&f.setRGB(h.color[0],h.color[1],h.color[2],r.Dd);const d=void 0!==h.range?h.range:0;switch(h.type){case"directional":c=new r.Qb(f),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new r.Xe(f),c.distance=d;break;case"spot":c=new r.Jg(f),c.distance=d,h.spot=h.spot||{},h.spot.innerConeAngle=void 0!==h.spot.innerConeAngle?h.spot.innerConeAngle:0,h.spot.outerConeAngle=void 0!==h.spot.outerConeAngle?h.spot.outerConeAngle:Math.PI/4,c.angle=h.spot.outerConeAngle,c.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return c.position.set(0,0,0),nt(c,h),void 0!==h.intensity&&(c.intensity=h.intensity),c.name=e.createUniqueName(h.name||"light_"+t),o=Promise.resolve(c),e.cache.add(n,o),o}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],o=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(t){return n._getNodeRef(e.cache,o,t)}))}}class d{constructor(){this.name=c.KHR_MATERIALS_UNLIT}getMaterialType(){return r.Xd}extendParams(t,e,n){const o=[];t.color=new r.ab(1,1,1),t.opacity=1;const l=e.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const e=l.baseColorFactor;t.color.setRGB(e[0],e[1],e[2],r.Dd),t.opacity=e[3]}void 0!==l.baseColorTexture&&o.push(n.assignTexture(t,"map",l.baseColorTexture,r.qg))}return Promise.all(o)}}class m{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class v{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,o=n.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],h=o.extensions[this.name];if(void 0!==h.clearcoatFactor&&(e.clearcoat=h.clearcoatFactor),void 0!==h.clearcoatTexture&&l.push(n.assignTexture(e,"clearcoatMap",h.clearcoatTexture)),void 0!==h.clearcoatRoughnessFactor&&(e.clearcoatRoughness=h.clearcoatRoughnessFactor),void 0!==h.clearcoatRoughnessTexture&&l.push(n.assignTexture(e,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),void 0!==h.clearcoatNormalTexture&&(l.push(n.assignTexture(e,"clearcoatNormalMap",h.clearcoatNormalTexture)),void 0!==h.clearcoatNormalTexture.scale)){const t=h.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new r.Eh(t,t)}return Promise.all(l)}}class y{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_DISPERSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class _{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return void 0!==l.iridescenceFactor&&(e.iridescence=l.iridescenceFactor),void 0!==l.iridescenceTexture&&o.push(n.assignTexture(e,"iridescenceMap",l.iridescenceTexture)),void 0!==l.iridescenceIor&&(e.iridescenceIOR=l.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==l.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),void 0!==l.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),void 0!==l.iridescenceThicknessTexture&&o.push(n.assignTexture(e,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class x{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,o=n.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[];e.sheenColor=new r.ab(0,0,0),e.sheenRoughness=0,e.sheen=1;const h=o.extensions[this.name];if(void 0!==h.sheenColorFactor){const t=h.sheenColorFactor;e.sheenColor.setRGB(t[0],t[1],t[2],r.Dd)}return void 0!==h.sheenRoughnessFactor&&(e.sheenRoughness=h.sheenRoughnessFactor),void 0!==h.sheenColorTexture&&l.push(n.assignTexture(e,"sheenColorMap",h.sheenColorTexture,r.qg)),void 0!==h.sheenRoughnessTexture&&l.push(n.assignTexture(e,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(l)}}class w{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return void 0!==l.transmissionFactor&&(e.transmission=l.transmissionFactor),void 0!==l.transmissionTexture&&o.push(n.assignTexture(e,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class M{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,o=n.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],h=o.extensions[this.name];e.thickness=void 0!==h.thicknessFactor?h.thicknessFactor:0,void 0!==h.thicknessTexture&&l.push(n.assignTexture(e,"thicknessMap",h.thicknessTexture)),e.attenuationDistance=h.attenuationDistance||1/0;const c=h.attenuationColor||[1,1,1];return e.attenuationColor=(new r.ab).setRGB(c[0],c[1],c[2],r.Dd),Promise.all(l)}}class S{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class E{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,o=n.json.materials[t];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const l=[],h=o.extensions[this.name];e.specularIntensity=void 0!==h.specularFactor?h.specularFactor:1,void 0!==h.specularTexture&&l.push(n.assignTexture(e,"specularIntensityMap",h.specularTexture));const c=h.specularColorFactor||[1,1,1];return e.specularColor=(new r.ab).setRGB(c[0],c[1],c[2],r.Dd),void 0!==h.specularColorTexture&&l.push(n.assignTexture(e,"specularColorMap",h.specularColorTexture,r.qg)),Promise.all(l)}}class A{constructor(t){this.parser=t,this.name=c.EXT_MATERIALS_BUMP}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return e.bumpScale=void 0!==l.bumpFactor?l.bumpFactor:1,void 0!==l.bumpTexture&&o.push(n.assignTexture(e,"bumpMap",l.bumpTexture)),Promise.all(o)}}class T{constructor(t){this.parser=t,this.name=c.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.ee:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return void 0!==l.anisotropyStrength&&(e.anisotropy=l.anisotropyStrength),void 0!==l.anisotropyRotation&&(e.anisotropyRotation=l.anisotropyRotation),void 0!==l.anisotropyTexture&&o.push(n.assignTexture(e,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class C{constructor(t){this.parser=t,this.name=c.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],l=e.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,l)}}class P{constructor(t){this.parser=t,this.name=c.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;const l=o.extensions[e],source=r.images[l.source];let h=n.textureLoader;if(source.uri){const t=n.options.manager.getHandler(source.uri);null!==t&&(h=t)}return this.detectSupport().then((function(o){if(o)return n.loadTextureImage(t,l.source,h);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const image=new Image;image.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",image.onload=image.onerror=function(){t(1===image.height)}}))),this.isSupported}}class R{constructor(t){this.parser=t,this.name=c.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;const l=o.extensions[e],source=r.images[l.source];let h=n.textureLoader;if(source.uri){const t=n.options.manager.getHandler(source.uri);null!==t&&(h=t)}return this.detectSupport().then((function(o){if(o)return n.loadTextureImage(t,l.source,h);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const image=new Image;image.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",image.onload=image.onerror=function(){t(1===image.height)}}))),this.isSupported}}class I{constructor(t){this.name=c.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){const n=t.byteOffset||0,r=t.byteLength||0,l=t.count,h=t.byteStride,source=new Uint8Array(e,n,r);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(l,h,source,t.mode,t.filter).then((function(t){return t.buffer})):o.ready.then((function(){const e=new ArrayBuffer(l*h);return o.decodeGltfBuffer(new Uint8Array(e),l,h,source,t.mode,t.filter),e}))}))}return null}}class k{constructor(t){this.name=c.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const o=e.meshes[n.mesh];for(const t of o.primitives)if(t.mode!==H.TRIANGLES&&t.mode!==H.TRIANGLE_STRIP&&t.mode!==H.TRIANGLE_FAN&&void 0!==t.mode)return null;const l=n.extensions[this.name].attributes,h=[],c={};for(const t in l)h.push(this.parser.getDependency("accessor",l[t]).then((e=>(c[t]=e,c[t]))));return h.length<1?null:(h.push(this.parser.createNodeMesh(t)),Promise.all(h).then((t=>{const e=t.pop(),n=e.isGroup?e.children:[e],o=t[0].count,l=[];for(const t of n){const e=new r.Ud,p=new r.Fh,q=new r.if,s=new r.Fh(1,1,1),n=new r.Qc(t.geometry,t.material,o);for(let i=0;i<o;i++)c.TRANSLATION&&p.fromBufferAttribute(c.TRANSLATION,i),c.ROTATION&&q.fromBufferAttribute(c.ROTATION,i),c.SCALE&&s.fromBufferAttribute(c.SCALE,i),n.setMatrixAt(i,e.compose(p,q,s));for(const e in c)if("_COLOR_0"===e){const t=c[e];n.instanceColor=new r.Nc(t.array,t.itemSize,t.normalized)}else"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&t.geometry.setAttribute(e,c[e]);r.Ee.prototype.copy.call(n,t),this.parser.assignFinalMaterial(n),l.push(n)}return e.isGroup?(e.clear(),e.add(...l),e):l[0]})))}}const D="glTF",L=1313821514,F=5130562;class O{constructor(data){this.name=c.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(data,0,12),e=new TextDecoder;if(this.header={magic:e.decode(new Uint8Array(data.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==D)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(data,12);let o=0;for(;o<n;){const t=r.getUint32(o,!0);o+=4;const n=r.getUint32(o,!0);if(o+=4,n===L){const n=new Uint8Array(data,12+o,t);this.content=e.decode(n)}else if(n===F){const e=12+o;this.body=data.slice(e,e+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class N{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=c.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,o=this.dracoLoader,l=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,c={},f={},d={};for(const t in h){const e=Z[t]||t.toLowerCase();c[e]=h[t]}for(const e in t.attributes){const r=Z[e]||e.toLowerCase();if(void 0!==h[e]){const o=n.accessors[t.attributes[e]],l=G[o.componentType];d[r]=l.name,f[r]=!0===o.normalized}}return e.getDependency("bufferView",l).then((function(t){return new Promise((function(e,n){o.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],r=f[e];void 0!==r&&(n.normalized=r)}e(t)}),c,d,r.Dd,n)}))}))}}class B{constructor(){this.name=c.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&e.texCoord!==t.channel||void 0!==e.offset||void 0!==e.rotation||void 0!==e.scale?(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0,t):t}}class U{constructor(){this.name=c.KHR_MESH_QUANTIZATION}}class z extends r.Xc{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let i=0;i!==r;i++)e[i]=n[o+i];return e}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,h=this.valueSize,c=2*h,f=3*h,td=r-e,p=(n-e)/td,d=p*p,m=d*p,v=t*f,y=v-f,_=-2*m+3*d,x=m-d,w=1-_,M=x-d+p;for(let i=0;i!==h;i++){const t=l[y+i+h],e=l[y+i+c]*td,n=l[v+i+h],r=l[v+i]*td;o[i]=w*t+M*e+_*n+x*r}return o}}const V=new r.if;class j extends z{interpolate_(t,e,n,r){const o=super.interpolate_(t,e,n,r);return V.fromArray(o).normalize().toArray(o),o}}const H={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},G={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},W={9728:r.me,9729:r.xd,9984:r.qe,9985:r.Cd,9986:r.pe,9987:r.Bd},X={33071:r.Y,33648:r.ie,10497:r.kg},Y={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Z={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},K={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$={CUBICSPLINE:void 0,LINEAR:r.Zc,STEP:r.Yc},J="OPAQUE",Q="MASK",tt="BLEND";function et(t,object,e){for(const n in e.extensions)void 0===t[n]&&(object.userData.gltfExtensions=object.userData.gltfExtensions||{},object.userData.gltfExtensions[n]=e.extensions[n])}function nt(object,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(object.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function it(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let i=0,n=e.weights.length;i<n;i++)t.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,e=n.length;i<e;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function st(t){let e;const n=t.extensions&&t.extensions[c.KHR_DRACO_MESH_COMPRESSION];if(e=n?"draco:"+n.bufferView+":"+n.indices+":"+ot(n.attributes):t.indices+":"+ot(t.attributes)+":"+t.mode,void 0!==t.targets)for(let i=0,n=t.targets.length;i<n;i++)e+=":"+ot(t.targets[i]);return e}function ot(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function at(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const lt=new r.Ud;class ht{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new h,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,o=-1,l=!1,c=-1;if("undefined"!=typeof navigator){const t=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(t);const e=t.match(/Version\/(\d+)/);o=n&&e?parseInt(e[1],10):-1,l=t.indexOf("Firefox")>-1,c=l?t.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&o<17||l&&c<98?this.textureLoader=new r.eh(this.options.manager):this.textureLoader=new r.Ic(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.kc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const l={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};return et(o,l,r),nt(l,r),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(l)}))).then((function(){for(const t of l.scenes)t.updateMatrixWorld();t(l)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n].joints;for(let i=0,e=r.length;i<e;i++)t[r[i]].isBone=!0}for(let e=0,r=t.length;e<r;e++){const r=t[e];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,object){if(t.refs[e]<=1)return object;const n=object.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[i,n]of t.children.entries())r(n,e.children[i])};return r(object,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const n=t(e[i]);if(n)return n}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,defs=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(defs.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[c.KHR_BINARY_GLTF].body);const o=this.options;return new Promise((function(t,l){n.load(r.Hd.resolveURL(e.uri,o.path),t,void 0,(function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))}loadAccessor(t){const e=this,n=this.json,o=this.json.accessors[t];if(void 0===o.bufferView&&void 0===o.sparse){const t=Y[o.type],e=G[o.componentType],n=!0===o.normalized,l=new e(o.count*t);return Promise.resolve(new r.M(l,t,n))}const l=[];return void 0!==o.bufferView?l.push(this.getDependency("bufferView",o.bufferView)):l.push(null),void 0!==o.sparse&&(l.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(l).then((function(t){const l=t[0],h=Y[o.type],c=G[o.componentType],f=c.BYTES_PER_ELEMENT,d=f*h,m=o.byteOffset||0,v=void 0!==o.bufferView?n.bufferViews[o.bufferView].byteStride:void 0,y=!0===o.normalized;let _,x;if(v&&v!==d){const t=Math.floor(m/v),n="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+t+":"+o.count;let d=e.cache.get(n);d||(_=new c(l,t*v,o.count*v/f),d=new r.Vc(_,v/f),e.cache.add(n,d)),x=new r.Wc(d,h,m%v/f,y)}else _=null===l?new c(o.count*h):new c(l,m,o.count*h),x=new r.M(_,h,y);if(void 0!==o.sparse){const e=Y.SCALAR,n=G[o.sparse.indices.componentType],f=o.sparse.indices.byteOffset||0,d=o.sparse.values.byteOffset||0,m=new n(t[1],f,o.sparse.count*e),v=new c(t[2],d,o.sparse.count*h);null!==l&&(x=new r.M(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let i=0,t=m.length;i<t;i++){const t=m[i];if(x.setX(t,v[i*h]),h>=2&&x.setY(t,v[i*h+1]),h>=3&&x.setZ(t,v[i*h+2]),h>=4&&x.setW(t,v[i*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=y}return x}))}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,o=e.images[r];let l=this.textureLoader;if(o.uri){const t=n.manager.getHandler(o.uri);null!==t&&(l=t)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const o=this,l=this.json,h=l.textures[t],c=l.images[e],f=(c.uri||c.bufferView)+":"+h.sampler;if(this.textureCache[f])return this.textureCache[f];const d=this.loadImageSource(e,n).then((function(e){e.flipY=!1,e.name=h.name||c.name||"",""===e.name&&"string"==typeof c.uri&&!1===c.uri.startsWith("data:image/")&&(e.name=c.uri);const n=(l.samplers||{})[h.sampler]||{};return e.magFilter=W[n.magFilter]||r.xd,e.minFilter=W[n.minFilter]||r.Bd,e.wrapS=X[n.wrapS]||r.kg,e.wrapT=X[n.wrapT]||r.kg,e.generateMipmaps=!e.isCompressedTexture&&e.minFilter!==r.me&&e.minFilter!==r.xd,o.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[f]=d,d}loadImageSource(t,e){const n=this,o=this.json,l=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const h=o.images[t],c=self.URL||self.webkitURL;let f=h.uri||"",d=!1;if(void 0!==h.bufferView)f=n.getDependency("bufferView",h.bufferView).then((function(t){d=!0;const e=new Blob([t],{type:h.mimeType});return f=c.createObjectURL(e),f}));else if(void 0===h.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(f).then((function(t){return new Promise((function(n,o){let h=n;!0===e.isImageBitmapLoader&&(h=function(t){const e=new r.dh(t);e.needsUpdate=!0,n(e)}),e.load(r.Hd.resolveURL(t,l.path),h,void 0,o)}))})).then((function(t){var e;return!0===d&&c.revokeObjectURL(f),nt(t,h),t.userData.mimeType=h.mimeType||((e=h.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":e.search(/\.ktx2($|\?)/i)>0||0===e.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),t})).catch((function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),t}));return this.sourceCache[t]=m,m}assignTexture(t,e,n,r){const o=this;return this.getDependency("texture",n.index).then((function(l){if(!l)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((l=l.clone()).channel=n.texCoord),o.extensions[c.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[c.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=o.associations.get(l);l=o.extensions[c.KHR_TEXTURE_TRANSFORM].extendTexture(l,t),o.associations.set(l,e)}}return void 0!==r&&(l.colorSpace=r),t[e]=l,l}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const o=void 0===e.attributes.tangent,l=void 0!==e.attributes.color,h=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new r.af,r.Pd.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new r.rd,r.Pd.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,this.cache.add(t,e)),n=e}if(o||l||h){let t="ClonedMaterial:"+n.uuid+":";o&&(t+="derivative-tangents:"),l&&(t+="vertex-colors:"),h&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),l&&(e.vertexColors=!0),h&&(e.flatShading=!0),o&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}t.material=n}getMaterialType(){return r.fe}loadMaterial(t){const e=this,n=this.json,o=this.extensions,l=n.materials[t];let h;const f={},d=[];if((l.extensions||{})[c.KHR_MATERIALS_UNLIT]){const t=o[c.KHR_MATERIALS_UNLIT];h=t.getMaterialType(),d.push(t.extendParams(f,l,e))}else{const n=l.pbrMetallicRoughness||{};if(f.color=new r.ab(1,1,1),f.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;f.color.setRGB(t[0],t[1],t[2],r.Dd),f.opacity=t[3]}void 0!==n.baseColorTexture&&d.push(e.assignTexture(f,"map",n.baseColorTexture,r.qg)),f.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,f.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(d.push(e.assignTexture(f,"metalnessMap",n.metallicRoughnessTexture)),d.push(e.assignTexture(f,"roughnessMap",n.metallicRoughnessTexture))),h=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),d.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,f)}))))}!0===l.doubleSided&&(f.side=r.Ub);const m=l.alphaMode||J;if(m===tt?(f.transparent=!0,f.depthWrite=!1):(f.transparent=!1,m===Q&&(f.alphaTest=void 0!==l.alphaCutoff?l.alphaCutoff:.5)),void 0!==l.normalTexture&&h!==r.Xd&&(d.push(e.assignTexture(f,"normalMap",l.normalTexture)),f.normalScale=new r.Eh(1,1),void 0!==l.normalTexture.scale)){const t=l.normalTexture.scale;f.normalScale.set(t,t)}if(void 0!==l.occlusionTexture&&h!==r.Xd&&(d.push(e.assignTexture(f,"aoMap",l.occlusionTexture)),void 0!==l.occlusionTexture.strength&&(f.aoMapIntensity=l.occlusionTexture.strength)),void 0!==l.emissiveFactor&&h!==r.Xd){const t=l.emissiveFactor;f.emissive=(new r.ab).setRGB(t[0],t[1],t[2],r.Dd)}return void 0!==l.emissiveTexture&&h!==r.Xd&&d.push(e.assignTexture(f,"emissiveMap",l.emissiveTexture,r.qg)),Promise.all(d).then((function(){const n=new h(f);return l.name&&(n.name=l.name),nt(n,l),e.associations.set(n,{materials:t}),l.extensions&&et(o,n,l),n}))}createUniqueName(t){const e=r.ef.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,o=this.primitiveCache;function l(t){return n[c.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return ut(n,t,e)}))}const h=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],f=st(n),d=o[f];if(d)h.push(d.promise);else{let t;t=n.extensions&&n.extensions[c.KHR_DRACO_MESH_COMPRESSION]?l(n):ut(new r.N,n,e),o[f]={primitive:n,promise:t},h.push(t)}}return Promise.all(h)}loadMesh(t){const e=this,n=this.json,l=this.extensions,h=n.meshes[t],c=h.primitives,f=[];for(let i=0,t=c.length;i<t;i++){const t=void 0===c[i].material?(void 0===(d=this.cache).DefaultMaterial&&(d.DefaultMaterial=new r.fe({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.rc})),d.DefaultMaterial):this.getDependency("material",c[i].material);f.push(t)}var d;return f.push(e.loadGeometries(c)),Promise.all(f).then((function(n){const f=n.slice(0,n.length-1),d=n[n.length-1],m=[];for(let i=0,n=d.length;i<n;i++){const n=d[i],v=c[i];let y;const _=f[i];if(v.mode===H.TRIANGLES||v.mode===H.TRIANGLE_STRIP||v.mode===H.TRIANGLE_FAN||void 0===v.mode)y=!0===h.isSkinnedMesh?new r.Cg(n,_):new r.Wd(n,_),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),v.mode===H.TRIANGLE_STRIP?y.geometry=o(y.geometry,r.lh):v.mode===H.TRIANGLE_FAN&&(y.geometry=o(y.geometry,r.kh));else if(v.mode===H.LINES)y=new r.wd(n,_);else if(v.mode===H.LINE_STRIP)y=new r.pd(n,_);else if(v.mode===H.LINE_LOOP)y=new r.vd(n,_);else{if(v.mode!==H.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);y=new r.Ze(n,_)}Object.keys(y.geometry.morphAttributes).length>0&&it(y,h),y.name=e.createUniqueName(h.name||"mesh_"+t),nt(y,h),v.extensions&&et(l,y,v),e.assignFinalMaterial(y),m.push(y)}for(let i=0,n=m.length;i<n;i++)e.associations.set(m[i],{meshes:t,primitives:i});if(1===m.length)return h.extensions&&et(l,m[0],h),m[0];const v=new r.Dc;h.extensions&&et(l,v,h),e.associations.set(v,{meshes:t});for(let i=0,t=m.length;i<t;i++)v.add(m[i]);return v}))}loadCamera(t){let e;const n=this.json.cameras[t],o=n[n.type];if(o)return"perspective"===n.type?e=new r.Te(r.Rd.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):"orthographic"===n.type&&(e=new r.Pe(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),nt(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let i=0,t=e.joints.length;i<t;i++)n.push(this._loadNodeShallow(e.joints[i]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(t){const n=t.pop(),o=t,l=[],h=[];for(let i=0,t=o.length;i<t;i++){const t=o[i];if(t){l.push(t);const e=new r.Ud;null!==n&&e.fromArray(n.array,16*i),h.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[i])}return new r.Ag(l,h)}))}loadAnimation(t){const e=this.json,n=this,o=e.animations[t],l=o.name?o.name:"animation_"+t,h=[],c=[],f=[],d=[],m=[];for(let i=0,t=o.channels.length;i<t;i++){const t=o.channels[i],e=o.samplers[t.sampler],n=t.target,r=n.node,input=void 0!==o.parameters?o.parameters[e.input]:e.input,output=void 0!==o.parameters?o.parameters[e.output]:e.output;void 0!==n.node&&(h.push(this.getDependency("node",r)),c.push(this.getDependency("accessor",input)),f.push(this.getDependency("accessor",output)),d.push(e),m.push(n))}return Promise.all([Promise.all(h),Promise.all(c),Promise.all(f),Promise.all(d),Promise.all(m)]).then((function(t){const e=t[0],o=t[1],h=t[2],c=t[3],f=t[4],d=[];for(let i=0,t=e.length;i<t;i++){const t=e[i],r=o[i],l=h[i],m=c[i],v=f[i];if(void 0===t)continue;t.updateMatrix&&t.updateMatrix();const y=n._createAnimationTracks(t,r,l,m,v);if(y)for(let t=0;t<y.length;t++)d.push(y[t])}return new r.m(l,void 0,d)}))}createNodeMesh(t){const e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(let i=0,e=r.weights.length;i<e;i++)t.morphTargetInfluences[i]=r.weights[i]})),e}))}loadNode(t){const e=this,n=this.json.nodes[t],r=e._loadNodeShallow(t),o=[],l=n.children||[];for(let i=0,t=l.length;i<t;i++)o.push(e.getDependency("node",l[i]));const h=void 0===n.skin?Promise.resolve(null):e.getDependency("skin",n.skin);return Promise.all([r,Promise.all(o),h]).then((function(t){const e=t[0],n=t[1],r=t[2];null!==r&&e.traverse((function(t){t.isSkinnedMesh&&t.bind(r,lt)}));for(let i=0,t=n.length;i<t;i++)e.add(n[i]);return e}))}_loadNodeShallow(t){const e=this.json,n=this.extensions,o=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const l=e.nodes[t],h=l.name?o.createUniqueName(l.name):"",c=[],f=o._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return f&&c.push(f),void 0!==l.camera&&c.push(o.getDependency("camera",l.camera).then((function(t){return o._getNodeRef(o.cameraCache,l.camera,t)}))),o._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){c.push(t)})),this.nodeCache[t]=Promise.all(c).then((function(e){let c;if(c=!0===l.isBone?new r.F:e.length>1?new r.Dc:1===e.length?e[0]:new r.Ee,c!==e[0])for(let i=0,t=e.length;i<t;i++)c.add(e[i]);if(l.name&&(c.userData.name=l.name,c.name=h),nt(c,l),l.extensions&&et(n,c,l),void 0!==l.matrix){const t=new r.Ud;t.fromArray(l.matrix),c.applyMatrix4(t)}else void 0!==l.translation&&c.position.fromArray(l.translation),void 0!==l.rotation&&c.quaternion.fromArray(l.rotation),void 0!==l.scale&&c.scale.fromArray(l.scale);return o.associations.has(c)||o.associations.set(c,{}),o.associations.get(c).nodes=t,c})),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],o=this,l=new r.Dc;n.name&&(l.name=o.createUniqueName(n.name)),nt(l,n),n.extensions&&et(e,l,n);const h=n.nodes||[],c=[];for(let i=0,t=h.length;i<t;i++)c.push(o.getDependency("node",h[i]));return Promise.all(c).then((function(t){for(let i=0,e=t.length;i<e;i++)l.add(t[i]);return o.associations=(t=>{const e=new Map;for(const[t,n]of o.associations)(t instanceof r.Pd||t instanceof r.dh)&&e.set(t,n);return t.traverse((t=>{const n=o.associations.get(t);null!=n&&e.set(t,n)})),e})(l),l}))}_createAnimationTracks(t,e,n,o,l){const h=[],c=t.name?t.name:t.uuid,f=[];let d;switch(K[l.path]===K.weights?t.traverse((function(object){object.morphTargetInfluences&&f.push(object.name?object.name:object.uuid)})):f.push(c),K[l.path]){case K.weights:d=r.De;break;case K.rotation:d=r.jf;break;case K.position:case K.scale:d=r.Hh;break;default:if(1===n.itemSize)d=r.De;else d=r.Hh}const m=void 0!==o.interpolation?$[o.interpolation]:r.Zc,v=this._getArrayFromAccessor(n);for(let t=0,n=f.length;t<n;t++){const track=new d(f[t]+"."+K[l.path],e.array,v,m);"CUBICSPLINE"===o.interpolation&&this._createCubicSplineTrackInterpolant(track),h.push(track)}return h}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const t=at(e.constructor),n=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r++)n[r]=e[r]*t;e=n}return e}_createCubicSplineTrackInterpolant(track){track.createInterpolant=function(t){return new(this instanceof r.jf?j:z)(this.times,this.values,this.getValueSize()/3,t)},track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ut(t,e,n){const o=e.attributes,l=[];function h(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(const e in o){const n=Z[e]||e.toLowerCase();n in t.attributes||l.push(h(o[e],n))}if(void 0!==e.indices&&!t.index){const r=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));l.push(r)}return r.cb.workingColorSpace!==r.Dd&&"COLOR_0"in o&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${r.cb.workingColorSpace}" not supported.`),nt(t,e),function(t,e,n){const o=e.attributes,l=new r.I;if(void 0===o.POSITION)return;{const t=n.json.accessors[o.POSITION],e=t.min,h=t.max;if(void 0===e||void 0===h)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(l.set(new r.Fh(e[0],e[1],e[2]),new r.Fh(h[0],h[1],h[2])),t.normalized){const e=at(G[t.componentType]);l.min.multiplyScalar(e),l.max.multiplyScalar(e)}}const h=e.targets;if(void 0!==h){const t=new r.Fh,e=new r.Fh;for(let i=0,r=h.length;i<r;i++){const r=h[i];if(void 0!==r.POSITION){const o=n.json.accessors[r.POSITION],l=o.min,h=o.max;if(void 0!==l&&void 0!==h){if(e.setX(Math.max(Math.abs(l[0]),Math.abs(h[0]))),e.setY(Math.max(Math.abs(l[1]),Math.abs(h[1]))),e.setZ(Math.max(Math.abs(l[2]),Math.abs(h[2]))),o.normalized){const t=at(G[o.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(t)}t.boundingBox=l;const c=new r.Eg;l.getCenter(c.center),c.radius=l.min.distanceTo(l.max)/2,t.boundingSphere=c}(t,e,n),Promise.all(l).then((function(){return void 0!==e.targets?function(t,e,n){let r=!1,o=!1,l=!1;for(let i=0,t=e.length;i<t;i++){const t=e[i];if(void 0!==t.POSITION&&(r=!0),void 0!==t.NORMAL&&(o=!0),void 0!==t.COLOR_0&&(l=!0),r&&o&&l)break}if(!r&&!o&&!l)return Promise.resolve(t);const h=[],c=[],f=[];for(let i=0,d=e.length;i<d;i++){const d=e[i];if(r){const e=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):t.attributes.position;h.push(e)}if(o){const e=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):t.attributes.normal;c.push(e)}if(l){const e=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):t.attributes.color;f.push(e)}}return Promise.all([Promise.all(h),Promise.all(c),Promise.all(f)]).then((function(e){const n=e[0],h=e[1],c=e[2];return r&&(t.morphAttributes.position=n),o&&(t.morphAttributes.normal=h),l&&(t.morphAttributes.color=c),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}},629:function(t,e,n){"use strict";function r(t,e,n){"object"==typeof n.value&&(n.value=o(n.value)),n.enumerable&&!n.get&&!n.set&&n.configurable&&n.writable&&"__proto__"!==e?t[e]=n.value:Object.defineProperty(t,e,n)}function o(t){if("object"!=typeof t)return t;var e,n,l,i=0,h=Object.prototype.toString.call(t);if("[object Object]"===h?l=Object.create(t.__proto__||null):"[object Array]"===h?l=Array(t.length):"[object Set]"===h?(l=new Set,t.forEach((function(t){l.add(o(t))}))):"[object Map]"===h?(l=new Map,t.forEach((function(t,e){l.set(o(e),o(t))}))):"[object Date]"===h?l=new Date(+t):"[object RegExp]"===h?l=new RegExp(t.source,t.flags):"[object DataView]"===h?l=new t.constructor(o(t.buffer)):"[object ArrayBuffer]"===h?l=t.slice(0):"Array]"===h.slice(-6)&&(l=new t.constructor(t)),l){for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)r(l,n[i],Object.getOwnPropertyDescriptor(t,n[i]));for(i=0,n=Object.getOwnPropertyNames(t);i<n.length;i++)Object.hasOwnProperty.call(l,e=n[i])&&l[e]===t[e]||r(l,e,Object.getOwnPropertyDescriptor(t,e))}return l||t}n.d(e,"a",(function(){return o}))},655:function(t,e,n){var r=n(537),o=n(3554),l=n(3555),h=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?o(t):l(t)}},656:function(t,e){t.exports=function(source,t){var e=-1,n=source.length;for(t||(t=Array(n));++e<n;)t[e]=source[e];return t}},657:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,l=[];++n<r;){var h=t[n];e(h,n,t)&&(l[o++]=h)}return l}},658:function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},66:function(t,e,n){(function(e){var n;n=function(){"use strict";var t=function(t){var e=t.id,n=t.viewBox,content=t.content;this.id=e,this.viewBox=n,this.content=content};function n(t,e){return t(e={exports:{}},e.exports),e.exports}t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))},"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var r=n((function(t,e){t.exports=function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,r){return r&&!0===r.clone&&t(n)?l(e(n),n,r):n}function r(e,source,r){var o=e.slice();return source.forEach((function(h,i){void 0===o[i]?o[i]=n(h,r):t(h)?o[i]=l(e[i],h,r):-1===e.indexOf(h)&&o.push(n(h,r))})),o}function o(e,source,r){var o={};return t(e)&&Object.keys(e).forEach((function(t){o[t]=n(e[t],r)})),Object.keys(source).forEach((function(h){t(source[h])&&e[h]?o[h]=l(e[h],source[h],r):o[h]=n(source[h],r)})),o}function l(t,source,e){var l=Array.isArray(source),h=(e||{arrayMerge:r}).arrayMerge||r;return l?Array.isArray(t)?h(t,source,e):n(source,e):o(t,source,e)}return l.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return l(t,n,e)}))},l}()})),o=n((function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default})),svg=o.svg,l=o.xlink,h={};h[svg.name]=svg.uri,h[l.name]=l.uri;var c=function(content,t){void 0===content&&(content="");var e=function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(r(h,t||{}));return"<svg "+e+">"+content+"</svg>"},f=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var content=this.stringify();return function(content){var t=!!document.importNode,e=(new DOMParser).parseFromString(content,"image/svg+xml").documentElement;return t?document.importNode(e,!0):e}(c(content)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(t);return f},t.exports=n()}).call(this,n(149))},67:function(t,e,n){(function(e){var n;n=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var n=t((function(t,e){t.exports=function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,r){return r&&!0===r.clone&&t(n)?l(e(n),n,r):n}function r(e,source,r){var o=e.slice();return source.forEach((function(h,i){void 0===o[i]?o[i]=n(h,r):t(h)?o[i]=l(e[i],h,r):-1===e.indexOf(h)&&o.push(n(h,r))})),o}function o(e,source,r){var o={};return t(e)&&Object.keys(e).forEach((function(t){o[t]=n(e[t],r)})),Object.keys(source).forEach((function(h){t(source[h])&&e[h]?o[h]=l(e[h],source[h],r):o[h]=n(source[h],r)})),o}function l(t,source,e){var l=Array.isArray(source),h=(e||{arrayMerge:r}).arrayMerge||r;return l?Array.isArray(t)?h(t,source,e):n(source,e):o(t,source,e)}return l.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return l(t,n,e)}))},l}()})),r=t((function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default})),svg=r.svg,o=r.xlink,l={};l[svg.name]=svg.uri,l[o.name]=o.uri;var h,c=function(content,t){void 0===content&&(content="");var e=function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(n(l,t||{}));return"<svg "+e+">"+content+"</svg>"},f=r.svg,d=r.xlink,m={attrs:(h={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},h[f.name]=f.uri,h[d.name]=d.uri,h)},v=function(t){this.config=n(m,t||{}),this.symbols=[]};v.prototype.add=function(symbol){var t=this.symbols,e=this.find(symbol.id);return e?(t[t.indexOf(e)]=symbol,!1):(t.push(symbol),!0)},v.prototype.remove=function(t){var e=this.symbols,symbol=this.find(t);return!!symbol&&(e.splice(e.indexOf(symbol),1),symbol.destroy(),!0)},v.prototype.find=function(t){return this.symbols.filter((function(s){return s.id===t}))[0]||null},v.prototype.has=function(t){return null!==this.find(t)},v.prototype.stringify=function(){var t=this.config.attrs,e=this.symbols.map((function(s){return s.stringify()})).join("");return c(e,t)},v.prototype.toString=function(){return this.stringify()},v.prototype.destroy=function(){this.symbols.forEach((function(s){return s.destroy()}))};var y=function(t){var e=t.id,n=t.viewBox,content=t.content;this.id=e,this.viewBox=n,this.content=content};y.prototype.stringify=function(){return this.content},y.prototype.toString=function(){return this.stringify()},y.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var _=function(content){var t=!!document.importNode,e=(new DOMParser).parseFromString(content,"image/svg+xml").documentElement;return t?document.importNode(e,!0):e},x=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var content=this.stringify();return _(c(content)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(y),w={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},M=function(t){return Array.prototype.slice.call(t,0)},S=function(){return/firefox/i.test(navigator.userAgent)},E=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},A=function(){return/edge/i.test(navigator.userAgent)},T=function(t){return(t||window.location.href).split("#")[0]},C=function(t){angular.module("ng").run(["$rootScope",function(e){e.$on("$locationChangeSuccess",(function(e,n,r){var o,data,l;o=t,data={oldUrl:r,newUrl:n},(l=document.createEvent("CustomEvent")).initCustomEvent(o,!1,!1,data),window.dispatchEvent(l)}))}])},P=function(svg,t){return void 0===t&&(t="linearGradient, radialGradient, pattern, mask, clipPath"),M(svg.querySelectorAll("symbol")).forEach((function(symbol){M(symbol.querySelectorAll(t)).forEach((function(t){symbol.parentNode.insertBefore(t,symbol)}))})),svg},R=r.xlink.uri,I="xlink:href",k=/[{}|\\\^\[\]`"<>]/g;function D(t){return t.replace(k,(function(t){return"%"+t[0].charCodeAt(0).toString(16).toUpperCase()}))}var L,F=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],O=F.map((function(t){return"["+t+"]"})).join(","),N=function(svg,t,e,n){var r=D(e),o=D(n),l=function(t,e){return M(t).reduce((function(t,n){if(!n.attributes)return t;var r=M(n.attributes),o=e?r.filter(e):r;return t.concat(o)}),[])}(svg.querySelectorAll(O),(function(t){var e=t.localName,n=t.value;return-1!==F.indexOf(e)&&-1!==n.indexOf("url("+r)}));l.forEach((function(t){return t.value=t.value.replace(new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),o)})),function(t,e,n){M(t).forEach((function(t){var r=t.getAttribute(I);if(r&&0===r.indexOf(e)){var o=r.replace(e,n);t.setAttributeNS(R,I,o)}}))}(t,r,o)},B="mount",U="symbol_mount",z=function(t){function e(e){var r=this;void 0===e&&(e={}),t.call(this,n(w,e));var o,l=(o=o||Object.create(null),{on:function(t,e){(o[t]||(o[t]=[])).push(e)},off:function(t,e){o[t]&&o[t].splice(o[t].indexOf(e)>>>0,1)},emit:function(t,e){(o[t]||[]).map((function(t){t(e)})),(o["*"]||[]).map((function(n){n(t,e)}))}});this._emitter=l,this.node=null;var h=this.config;if(h.autoConfigure&&this._autoConfigure(e),h.syncUrlsWithBaseTag){var c=document.getElementsByTagName("base")[0].getAttribute("href");l.on(B,(function(){return r.updateUrls("#",c)}))}var f=this._handleLocationChange.bind(this);this._handleLocationChange=f,h.listenLocationChangeEvent&&window.addEventListener(h.locationChangeEvent,f),h.locationChangeAngularEmitter&&C(h.locationChangeEvent),l.on(B,(function(t){h.moveGradientsOutsideSymbol&&P(t)})),l.on(U,(function(t){var e;h.moveGradientsOutsideSymbol&&P(t.parentNode),(E()||A())&&(e=[],M(t.querySelectorAll("style")).forEach((function(style){style.textContent+="",e.push(style)})))}))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},e.prototype._autoConfigure=function(t){var e=this.config;void 0===t.syncUrlsWithBaseTag&&(e.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===t.locationChangeAngularEmitter&&(e.locationChangeAngularEmitter=void 0!==window.angular),void 0===t.moveGradientsOutsideSymbol&&(e.moveGradientsOutsideSymbol=S())},e.prototype._handleLocationChange=function(t){var e=t.detail,n=e.oldUrl,r=e.newUrl;this.updateUrls(n,r)},e.prototype.add=function(symbol){var e=t.prototype.add.call(this,symbol);return this.isMounted&&e&&(symbol.mount(this.node),this._emitter.emit(U,symbol.node)),e},e.prototype.attach=function(t){var e=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof t?document.querySelector(t):t;return n.node=r,this.symbols.forEach((function(symbol){symbol.mount(n.node),e._emitter.emit(U,symbol.node)})),M(r.querySelectorAll("symbol")).forEach((function(t){var symbol=x.createFromExistingNode(t);symbol.node=t,n.add(symbol)})),this._emitter.emit(B,r),r},e.prototype.destroy=function(){var t=this,e=t.config,n=t.symbols,r=t._emitter;n.forEach((function(s){return s.destroy()})),r.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},e.prototype.mount=function(t,e){void 0===t&&(t=this.config.mountTo),void 0===e&&(e=!1);var n=this;if(n.isMounted)return n.node;var r="string"==typeof t?document.querySelector(t):t,o=n.render();return this.node=o,e&&r.childNodes[0]?r.insertBefore(o,r.childNodes[0]):r.appendChild(o),this._emitter.emit(B,o),o},e.prototype.render=function(){return _(this.stringify())},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},e.prototype.updateUrls=function(t,e){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return N(this.node,n,T(t)+"#",T(e)+"#"),!0},Object.defineProperties(e.prototype,r),e}(v),V=t((function(t){var e,n,r,o,l,h;t.exports=(n=[],r=document,o=r.documentElement.doScroll,l="DOMContentLoaded",(h=(o?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState))||r.addEventListener(l,e=function(){for(r.removeEventListener(l,e),h=1;e=n.shift();)e()}),function(t){h?setTimeout(t,0):n.push(t)})})),j="__SVG_SPRITE_NODE__",H="__SVG_SPRITE__";window[H]?L=window[H]:(L=new z({attrs:{id:j}}),window[H]=L);var G=function(){var t=document.getElementById(j);t?L.attach(t):L.mount(document.body,!0)};return document.body?G():V(G),L},t.exports=n()}).call(this,n(149))},670:function(t,e){t.exports=function(t,e,n,r){var o,l=0;return"boolean"!=typeof e&&(r=n,n=e,e=void 0),function(){var h=this,c=Number(new Date)-l,f=arguments;function d(){l=Number(new Date),n.apply(h,f)}r&&!o&&d(),o&&clearTimeout(o),void 0===r&&c>t?d():!0!==e&&(o=setTimeout(r?function(){o=void 0}:d,void 0===r?t-c:t))}}},672:function(t,e,n){var r=n(760),o=n(758),l=n(1090),h=n(376),c=n(497),f=n(761);t.exports=function(t,e,n,d){var m=-1,v=o,y=!0,_=t.length,x=[],w=e.length;if(!_)return x;n&&(e=h(e,c(n))),d?(v=l,y=!1):e.length>=200&&(v=f,y=!1,e=new r(e));t:for(;++m<_;){var M=t[m],S=null==n?M:n(M);if(M=d||0!==M?M:0,y&&S==S){for(var E=w;E--;)if(e[E]===S)continue t;x.push(M)}else v(e,S,d)||x.push(M)}return x}},694:function(t,e,n){"use strict";var r=n(3641),o=n(3642),l=n(1370);t.exports={formats:l,parse:o,stringify:r}},718:function(t,e,n){var r=n(3543),o=n(3544),l=n(3545),h=n(3546),c=n(3547);function f(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=o,f.prototype.get=l,f.prototype.has=h,f.prototype.set=c,t.exports=f},719:function(t,e,n){var r=n(495);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},720:function(t,e,n){var r=n(496)(Object,"create");t.exports=r},721:function(t,e,n){var r=n(3567);t.exports=function(map,t){var data=map.__data__;return r(t)?data["string"==typeof t?"string":"hash"]:data.map}},722:function(t,e,n){var r=n(1336),o=n(495),l=Object.prototype.hasOwnProperty;t.exports=function(object,t,e){var n=object[t];l.call(object,t)&&o(n,e)&&(void 0!==e||t in object)||r(object,t,e)}},723:function(t,e,n){var r=n(722),o=n(1336);t.exports=function(source,t,object,e){var n=!object;object||(object={});for(var l=-1,h=t.length;++l<h;){var c=t[l],f=e?e(object[c],source[c],c,object,source):void 0;void 0===f&&(f=source[c]),n?o(object,c,f):r(object,c,f)}return object}},724:function(t,e,n){var r=n(1338),o=n(3575),l=n(725);t.exports=function(object){return l(object)?r(object):o(object)}},725:function(t,e,n){var r=n(1332),o=n(1001);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},726:function(t,e,n){var r=n(3584),o=n(997),l=n(3585),h=n(1347),c=n(1348),f=n(655),d=n(1334),m="[object Map]",v="[object Promise]",y="[object Set]",_="[object WeakMap]",x="[object DataView]",w=d(r),M=d(o),S=d(l),E=d(h),A=d(c),T=f;(r&&T(new r(new ArrayBuffer(1)))!=x||o&&T(new o)!=m||l&&T(l.resolve())!=v||h&&T(new h)!=y||c&&T(new c)!=_)&&(T=function(t){var e=f(t),n="[object Object]"==e?t.constructor:void 0,r=n?d(n):"";if(r)switch(r){case w:return x;case M:return m;case S:return v;case E:return y;case A:return _}return e}),t.exports=T},727:function(t,e,n){var r=n(354),o=Object.create,l=function(){function object(){}return function(t){if(!r(t))return{};if(o)return o(t);object.prototype=t;var e=new object;return object.prototype=void 0,e}}();t.exports=l},731:function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var l,i,h=arguments.length;switch(h){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,o)}));default:for(l=new Array(h-1),i=0;i<l.length;)l[i++]=arguments[i];return e.nextTick((function(){t.apply(null,l)}))}}}:t.exports=e}).call(this,n(245))},735:function(t,e,n){"use strict";var r=n(3705),o=n(3718),l=n(3719),h=n(1021),c=n(1383),f=n(1407).Buffer;function d(t){var e;"object"!=typeof t||f.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=f.from(t));var n,d,m=l(t,e),v=m.tag,data=m.data;switch(v){case"CERTIFICATE":d=r.certificate.decode(data,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(d||(d=r.PublicKey.decode(data,"der")),n=d.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case"1.2.840.10040.4.1":return d.algorithm.params.pub_key=r.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":data=function(data,t){var e=data.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10),r=o[data.algorithm.decrypt.cipher.algo.join(".")],l=data.algorithm.decrypt.cipher.iv,d=data.subjectPrivateKey,m=parseInt(r.split("-")[1],10)/8,v=c.pbkdf2Sync(t,e,n,m,"sha1"),y=h.createDecipheriv(r,v,l),_=[];return _.push(y.update(d)),_.push(y.final()),f.concat(_)}(data=r.EncryptedPrivateKey.decode(data,"der"),e);case"PRIVATE KEY":switch(n=(d=r.PrivateKey.decode(data,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:r.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return d.algorithm.params.priv_key=r.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(data,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(data,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(data,"der")};case"EC PRIVATE KEY":return{curve:(data=r.ECPrivateKey.decode(data,"der")).parameters.value,privateKey:data.privateKey};default:throw new Error("unknown key type "+v)}}d.signature=r.signature,t.exports=d},757:function(t,e,n){var r=n(727),o=n(354);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),l=t.apply(n,e);return o(l)?l:n}}},758:function(t,e,n){var r=n(1085);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},759:function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,l=n+(r?1:-1);r?l--:++l<o;)if(e(t[l],l,t))return l;return-1}},760:function(t,e,n){var r=n(998),o=n(3969),l=n(3970);function h(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}h.prototype.add=h.prototype.push=o,h.prototype.has=l,t.exports=h},761:function(t,e){t.exports=function(t,e){return t.has(e)}},762:function(t,e,n){var r=n(312),o=n(1088),l=n(3977),h=n(3979);t.exports=function(t,object){return r(t)?t:o(t,object)?[t]:l(h(t))}},765:function(t,e,n){var r=n(377);t.exports=function(t,e,n,o){for(var l=t.length,h=o?l:-1;(o?h--:++h<l)&&e(t[h],h,t););return n?r(t,o?0:h,o?h+1:l):r(t,o?h+1:0,o?l:h)}},766:function(t,e,n){var r=n(1094),o=n(543),l=n(506);t.exports=function(t,e,n){var h=0,c=null==t?h:t.length;if("number"==typeof e&&e==e&&c<=2147483647){for(;h<c;){var f=h+c>>>1,d=t[f];null!==d&&!l(d)&&(n?d<=e:d<e)?h=f+1:c=f}return c}return r(t,e,o,n)}},767:function(t,e,n){"use strict";n.r(e),n.d(e,"PMREMGenerator",(function(){return O})),n.d(e,"ShaderChunk",(function(){return h})),n.d(e,"ShaderLib",(function(){return f})),n.d(e,"UniformsLib",(function(){return c})),n.d(e,"WebGLRenderer",(function(){return Ke})),n.d(e,"WebGLUtils",(function(){return He}));var r=n(5);function o(){let t=null,e=!1,n=null,r=null;function o(time,e){n(time,e),r=t.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function l(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const data=e.get(n);data&&(t.deleteBuffer(data.buffer),e.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const data=e.get(n);if(void 0===data)e.set(n,function(e,n){const r=e.array,o=e.usage,l=r.byteLength,h=t.createBuffer();let c;if(t.bindBuffer(n,h),t.bufferData(n,r,o),e.onUploadCallback(),r instanceof Float32Array)c=t.FLOAT;else if(r instanceof Uint16Array)c=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(r instanceof Int16Array)c=t.SHORT;else if(r instanceof Uint32Array)c=t.UNSIGNED_INT;else if(r instanceof Int32Array)c=t.INT;else if(r instanceof Int8Array)c=t.BYTE;else if(r instanceof Uint8Array)c=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);c=t.UNSIGNED_BYTE}return{buffer:h,type:c,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:l}}(n,r));else if(data.version<n.version){if(data.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,r){const o=n.array,l=n.updateRanges;if(t.bindBuffer(r,e),0===l.length)t.bufferSubData(r,0,o);else{l.sort(((a,b)=>a.start-b.start));let e=0;for(let i=1;i<l.length;i++){const t=l[e],n=l[i];n.start<=t.start+t.count+1?t.count=Math.max(t.count,n.start+n.count-t.start):(++e,l[e]=n)}l.length=e+1;for(let i=0,e=l.length;i<e;i++){const e=l[i];t.bufferSubData(r,e.start*o.BYTES_PER_ELEMENT,o,e.start,e.count)}n.clearUpdateRanges()}n.onUploadCallback()}(data.buffer,n,r),data.version=n.version}}}}n.d(e,"ACESFilmicToneMapping",(function(){return r.a})),n.d(e,"AddEquation",(function(){return r.b})),n.d(e,"AddOperation",(function(){return r.c})),n.d(e,"AdditiveBlending",(function(){return r.e})),n.d(e,"AgXToneMapping",(function(){return r.f})),n.d(e,"AlphaFormat",(function(){return r.g})),n.d(e,"AlwaysCompare",(function(){return r.h})),n.d(e,"AlwaysDepth",(function(){return r.i})),n.d(e,"ArrayCamera",(function(){return r.s})),n.d(e,"BackSide",(function(){return r.B})),n.d(e,"BoxGeometry",(function(){return r.K})),n.d(e,"BufferAttribute",(function(){return r.M})),n.d(e,"BufferGeometry",(function(){return r.N})),n.d(e,"ByteType",(function(){return r.P})),n.d(e,"CineonToneMapping",(function(){return r.W})),n.d(e,"ClampToEdgeWrapping",(function(){return r.Y})),n.d(e,"Color",(function(){return r.ab})),n.d(e,"ColorManagement",(function(){return r.cb})),n.d(e,"ConstantAlphaFactor",(function(){return r.ib})),n.d(e,"ConstantColorFactor",(function(){return r.jb})),n.d(e,"CubeReflectionMapping",(function(){return r.mb})),n.d(e,"CubeRefractionMapping",(function(){return r.nb})),n.d(e,"CubeTexture",(function(){return r.ob})),n.d(e,"CubeUVReflectionMapping",(function(){return r.qb})),n.d(e,"CullFaceBack",(function(){return r.ub})),n.d(e,"CullFaceFront",(function(){return r.vb})),n.d(e,"CullFaceNone",(function(){return r.xb})),n.d(e,"CustomBlending",(function(){return r.Ab})),n.d(e,"CustomToneMapping",(function(){return r.Bb})),n.d(e,"Data3DTexture",(function(){return r.Eb})),n.d(e,"DataArrayTexture",(function(){return r.Fb})),n.d(e,"DepthFormat",(function(){return r.Mb})),n.d(e,"DepthStencilFormat",(function(){return r.Nb})),n.d(e,"DepthTexture",(function(){return r.Ob})),n.d(e,"DoubleSide",(function(){return r.Ub})),n.d(e,"DstAlphaFactor",(function(){return r.Vb})),n.d(e,"DstColorFactor",(function(){return r.Wb})),n.d(e,"EqualCompare",(function(){return r.cc})),n.d(e,"EqualDepth",(function(){return r.dc})),n.d(e,"EquirectangularReflectionMapping",(function(){return r.fc})),n.d(e,"EquirectangularRefractionMapping",(function(){return r.gc})),n.d(e,"Euler",(function(){return r.hc})),n.d(e,"EventDispatcher",(function(){return r.ic})),n.d(e,"FloatType",(function(){return r.nc})),n.d(e,"FrontSide",(function(){return r.rc})),n.d(e,"Frustum",(function(){return r.sc})),n.d(e,"GLSL3",(function(){return r.vc})),n.d(e,"GreaterCompare",(function(){return r.wc})),n.d(e,"GreaterDepth",(function(){return r.xc})),n.d(e,"GreaterEqualCompare",(function(){return r.yc})),n.d(e,"GreaterEqualDepth",(function(){return r.zc})),n.d(e,"HalfFloatType",(function(){return r.Ec})),n.d(e,"IntType",(function(){return r.Uc})),n.d(e,"Layers",(function(){return r.gd})),n.d(e,"LessCompare",(function(){return r.hd})),n.d(e,"LessDepth",(function(){return r.id})),n.d(e,"LessEqualCompare",(function(){return r.jd})),n.d(e,"LessEqualDepth",(function(){return r.kd})),n.d(e,"LinearFilter",(function(){return r.xd})),n.d(e,"LinearMipmapLinearFilter",(function(){return r.Bd})),n.d(e,"LinearMipmapNearestFilter",(function(){return r.Cd})),n.d(e,"LinearSRGBColorSpace",(function(){return r.Dd})),n.d(e,"LinearToneMapping",(function(){return r.Ed})),n.d(e,"LinearTransfer",(function(){return r.Fd})),n.d(e,"LuminanceAlphaFormat",(function(){return r.Md})),n.d(e,"LuminanceFormat",(function(){return r.Nd})),n.d(e,"Matrix3",(function(){return r.Td})),n.d(e,"Matrix4",(function(){return r.Ud})),n.d(e,"MaxEquation",(function(){return r.Vd})),n.d(e,"Mesh",(function(){return r.Wd})),n.d(e,"MeshBasicMaterial",(function(){return r.Xd})),n.d(e,"MeshDepthMaterial",(function(){return r.Yd})),n.d(e,"MeshDistanceMaterial",(function(){return r.Zd})),n.d(e,"MinEquation",(function(){return r.he})),n.d(e,"MirroredRepeatWrapping",(function(){return r.ie})),n.d(e,"MixOperation",(function(){return r.je})),n.d(e,"MultiplyBlending",(function(){return r.ke})),n.d(e,"MultiplyOperation",(function(){return r.le})),n.d(e,"NearestFilter",(function(){return r.me})),n.d(e,"NearestMipmapLinearFilter",(function(){return r.pe})),n.d(e,"NearestMipmapNearestFilter",(function(){return r.qe})),n.d(e,"NeutralToneMapping",(function(){return r.re})),n.d(e,"NeverCompare",(function(){return r.se})),n.d(e,"NeverDepth",(function(){return r.te})),n.d(e,"NoBlending",(function(){return r.ve})),n.d(e,"NoColorSpace",(function(){return r.we})),n.d(e,"NoToneMapping",(function(){return r.xe})),n.d(e,"NormalBlending",(function(){return r.ze})),n.d(e,"NotEqualCompare",(function(){return r.Ae})),n.d(e,"NotEqualDepth",(function(){return r.Be})),n.d(e,"ObjectSpaceNormalMap",(function(){return r.Ge})),n.d(e,"OneFactor",(function(){return r.Ie})),n.d(e,"OneMinusConstantAlphaFactor",(function(){return r.Je})),n.d(e,"OneMinusConstantColorFactor",(function(){return r.Ke})),n.d(e,"OneMinusDstAlphaFactor",(function(){return r.Le})),n.d(e,"OneMinusDstColorFactor",(function(){return r.Me})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return r.Ne})),n.d(e,"OneMinusSrcColorFactor",(function(){return r.Oe})),n.d(e,"OrthographicCamera",(function(){return r.Pe})),n.d(e,"PCFShadowMap",(function(){return r.Qe})),n.d(e,"PCFSoftShadowMap",(function(){return r.Re})),n.d(e,"PerspectiveCamera",(function(){return r.Te})),n.d(e,"Plane",(function(){return r.Ue})),n.d(e,"PlaneGeometry",(function(){return r.Ve})),n.d(e,"RED_GREEN_RGTC2_Format",(function(){return r.mf})),n.d(e,"RED_RGTC1_Format",(function(){return r.nf})),n.d(e,"REVISION",(function(){return r.of})),n.d(e,"RGBADepthPacking",(function(){return r.pf})),n.d(e,"RGBAFormat",(function(){return r.qf})),n.d(e,"RGBAIntegerFormat",(function(){return r.rf})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return r.sf})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return r.tf})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return r.uf})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return r.vf})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return r.wf})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return r.xf})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return r.yf})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return r.zf})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return r.Af})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return r.Bf})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return r.Cf})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return r.Df})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return r.Ef})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return r.Ff})),n.d(e,"RGBA_BPTC_Format",(function(){return r.Gf})),n.d(e,"RGBA_ETC2_EAC_Format",(function(){return r.Hf})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return r.If})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return r.Jf})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return r.Kf})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return r.Lf})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return r.Mf})),n.d(e,"RGBFormat",(function(){return r.Of})),n.d(e,"RGB_BPTC_SIGNED_Format",(function(){return r.Qf})),n.d(e,"RGB_BPTC_UNSIGNED_Format",(function(){return r.Rf})),n.d(e,"RGB_ETC1_Format",(function(){return r.Sf})),n.d(e,"RGB_ETC2_Format",(function(){return r.Tf})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return r.Uf})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return r.Vf})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return r.Wf})),n.d(e,"RGFormat",(function(){return r.Yf})),n.d(e,"RGIntegerFormat",(function(){return r.Zf})),n.d(e,"RedFormat",(function(){return r.eg})),n.d(e,"RedIntegerFormat",(function(){return r.fg})),n.d(e,"ReinhardToneMapping",(function(){return r.gg})),n.d(e,"RepeatWrapping",(function(){return r.kg})),n.d(e,"ReverseSubtractEquation",(function(){return r.mg})),n.d(e,"SIGNED_RED_GREEN_RGTC2_Format",(function(){return r.og})),n.d(e,"SIGNED_RED_RGTC1_Format",(function(){return r.pg})),n.d(e,"SRGBColorSpace",(function(){return r.qg})),n.d(e,"SRGBTransfer",(function(){return r.rg})),n.d(e,"ShaderMaterial",(function(){return r.tg})),n.d(e,"ShortType",(function(){return r.zg})),n.d(e,"SrcAlphaFactor",(function(){return r.Ng})),n.d(e,"SrcAlphaSaturateFactor",(function(){return r.Og})),n.d(e,"SrcColorFactor",(function(){return r.Pg})),n.d(e,"SubtractEquation",(function(){return r.Yg})),n.d(e,"SubtractiveBlending",(function(){return r.Zg})),n.d(e,"TangentSpaceNormalMap",(function(){return r.bh})),n.d(e,"Texture",(function(){return r.dh})),n.d(e,"Uint16BufferAttribute",(function(){return r.ph})),n.d(e,"Uint32BufferAttribute",(function(){return r.qh})),n.d(e,"UniformsUtils",(function(){return r.vh})),n.d(e,"UnsignedByteType",(function(){return r.wh})),n.d(e,"UnsignedInt248Type",(function(){return r.xh})),n.d(e,"UnsignedInt5999Type",(function(){return r.yh})),n.d(e,"UnsignedIntType",(function(){return r.zh})),n.d(e,"UnsignedShort4444Type",(function(){return r.Ah})),n.d(e,"UnsignedShort5551Type",(function(){return r.Bh})),n.d(e,"UnsignedShortType",(function(){return r.Ch})),n.d(e,"VSMShadowMap",(function(){return r.Dh})),n.d(e,"Vector2",(function(){return r.Eh})),n.d(e,"Vector3",(function(){return r.Fh})),n.d(e,"Vector4",(function(){return r.Gh})),n.d(e,"WebGLCoordinateSystem",(function(){return r.Mh})),n.d(e,"WebGLCubeRenderTarget",(function(){return r.Nh})),n.d(e,"WebGLRenderTarget",(function(){return r.Oh})),n.d(e,"WebXRController",(function(){return r.Qh})),n.d(e,"ZeroFactor",(function(){return r.Uh})),n.d(e,"createCanvasElement",(function(){return r.Zh})),n.d(e,"AdditiveAnimationBlendMode",(function(){return r.d})),n.d(e,"AlwaysStencilFunc",(function(){return r.j})),n.d(e,"AmbientLight",(function(){return r.k})),n.d(e,"AnimationAction",(function(){return r.l})),n.d(e,"AnimationClip",(function(){return r.m})),n.d(e,"AnimationLoader",(function(){return r.n})),n.d(e,"AnimationMixer",(function(){return r.o})),n.d(e,"AnimationObjectGroup",(function(){return r.p})),n.d(e,"AnimationUtils",(function(){return r.q})),n.d(e,"ArcCurve",(function(){return r.r})),n.d(e,"ArrowHelper",(function(){return r.t})),n.d(e,"AttachedBindMode",(function(){return r.u})),n.d(e,"Audio",(function(){return r.v})),n.d(e,"AudioAnalyser",(function(){return r.w})),n.d(e,"AudioContext",(function(){return r.x})),n.d(e,"AudioListener",(function(){return r.y})),n.d(e,"AudioLoader",(function(){return r.z})),n.d(e,"AxesHelper",(function(){return r.A})),n.d(e,"BasicDepthPacking",(function(){return r.C})),n.d(e,"BasicShadowMap",(function(){return r.D})),n.d(e,"BatchedMesh",(function(){return r.E})),n.d(e,"Bone",(function(){return r.F})),n.d(e,"BooleanKeyframeTrack",(function(){return r.G})),n.d(e,"Box2",(function(){return r.H})),n.d(e,"Box3",(function(){return r.I})),n.d(e,"Box3Helper",(function(){return r.J})),n.d(e,"BoxHelper",(function(){return r.L})),n.d(e,"BufferGeometryLoader",(function(){return r.O})),n.d(e,"Cache",(function(){return r.Q})),n.d(e,"Camera",(function(){return r.R})),n.d(e,"CameraHelper",(function(){return r.S})),n.d(e,"CanvasTexture",(function(){return r.T})),n.d(e,"CapsuleGeometry",(function(){return r.U})),n.d(e,"CatmullRomCurve3",(function(){return r.V})),n.d(e,"CircleGeometry",(function(){return r.X})),n.d(e,"Clock",(function(){return r.Z})),n.d(e,"ColorKeyframeTrack",(function(){return r.bb})),n.d(e,"CompressedArrayTexture",(function(){return r.db})),n.d(e,"CompressedCubeTexture",(function(){return r.eb})),n.d(e,"CompressedTexture",(function(){return r.fb})),n.d(e,"CompressedTextureLoader",(function(){return r.gb})),n.d(e,"ConeGeometry",(function(){return r.hb})),n.d(e,"Controls",(function(){return r.kb})),n.d(e,"CubeCamera",(function(){return r.lb})),n.d(e,"CubeTextureLoader",(function(){return r.pb})),n.d(e,"CubicBezierCurve",(function(){return r.rb})),n.d(e,"CubicBezierCurve3",(function(){return r.sb})),n.d(e,"CubicInterpolant",(function(){return r.tb})),n.d(e,"CullFaceFrontBack",(function(){return r.wb})),n.d(e,"Curve",(function(){return r.yb})),n.d(e,"CurvePath",(function(){return r.zb})),n.d(e,"CylinderGeometry",(function(){return r.Cb})),n.d(e,"Cylindrical",(function(){return r.Db})),n.d(e,"DataTexture",(function(){return r.Gb})),n.d(e,"DataTextureLoader",(function(){return r.Hb})),n.d(e,"DataUtils",(function(){return r.Ib})),n.d(e,"DecrementStencilOp",(function(){return r.Jb})),n.d(e,"DecrementWrapStencilOp",(function(){return r.Kb})),n.d(e,"DefaultLoadingManager",(function(){return r.Lb})),n.d(e,"DetachedBindMode",(function(){return r.Pb})),n.d(e,"DirectionalLight",(function(){return r.Qb})),n.d(e,"DirectionalLightHelper",(function(){return r.Rb})),n.d(e,"DiscreteInterpolant",(function(){return r.Sb})),n.d(e,"DodecahedronGeometry",(function(){return r.Tb})),n.d(e,"DynamicCopyUsage",(function(){return r.Xb})),n.d(e,"DynamicDrawUsage",(function(){return r.Yb})),n.d(e,"DynamicReadUsage",(function(){return r.Zb})),n.d(e,"EdgesGeometry",(function(){return r.ac})),n.d(e,"EllipseCurve",(function(){return r.bc})),n.d(e,"EqualStencilFunc",(function(){return r.ec})),n.d(e,"ExtrudeGeometry",(function(){return r.jc})),n.d(e,"FileLoader",(function(){return r.kc})),n.d(e,"Float16BufferAttribute",(function(){return r.lc})),n.d(e,"Float32BufferAttribute",(function(){return r.mc})),n.d(e,"Fog",(function(){return r.oc})),n.d(e,"FogExp2",(function(){return r.pc})),n.d(e,"FramebufferTexture",(function(){return r.qc})),n.d(e,"GLBufferAttribute",(function(){return r.tc})),n.d(e,"GLSL1",(function(){return r.uc})),n.d(e,"GreaterEqualStencilFunc",(function(){return r.Ac})),n.d(e,"GreaterStencilFunc",(function(){return r.Bc})),n.d(e,"GridHelper",(function(){return r.Cc})),n.d(e,"Group",(function(){return r.Dc})),n.d(e,"HemisphereLight",(function(){return r.Fc})),n.d(e,"HemisphereLightHelper",(function(){return r.Gc})),n.d(e,"IcosahedronGeometry",(function(){return r.Hc})),n.d(e,"ImageBitmapLoader",(function(){return r.Ic})),n.d(e,"ImageLoader",(function(){return r.Jc})),n.d(e,"ImageUtils",(function(){return r.Kc})),n.d(e,"IncrementStencilOp",(function(){return r.Lc})),n.d(e,"IncrementWrapStencilOp",(function(){return r.Mc})),n.d(e,"InstancedBufferAttribute",(function(){return r.Nc})),n.d(e,"InstancedBufferGeometry",(function(){return r.Oc})),n.d(e,"InstancedInterleavedBuffer",(function(){return r.Pc})),n.d(e,"InstancedMesh",(function(){return r.Qc})),n.d(e,"Int16BufferAttribute",(function(){return r.Rc})),n.d(e,"Int32BufferAttribute",(function(){return r.Sc})),n.d(e,"Int8BufferAttribute",(function(){return r.Tc})),n.d(e,"InterleavedBuffer",(function(){return r.Vc})),n.d(e,"InterleavedBufferAttribute",(function(){return r.Wc})),n.d(e,"Interpolant",(function(){return r.Xc})),n.d(e,"InterpolateDiscrete",(function(){return r.Yc})),n.d(e,"InterpolateLinear",(function(){return r.Zc})),n.d(e,"InterpolateSmooth",(function(){return r.ad})),n.d(e,"InvertStencilOp",(function(){return r.bd})),n.d(e,"KeepStencilOp",(function(){return r.cd})),n.d(e,"KeyframeTrack",(function(){return r.dd})),n.d(e,"LOD",(function(){return r.ed})),n.d(e,"LatheGeometry",(function(){return r.fd})),n.d(e,"LessEqualStencilFunc",(function(){return r.ld})),n.d(e,"LessStencilFunc",(function(){return r.md})),n.d(e,"Light",(function(){return r.nd})),n.d(e,"LightProbe",(function(){return r.od})),n.d(e,"Line",(function(){return r.pd})),n.d(e,"Line3",(function(){return r.qd})),n.d(e,"LineBasicMaterial",(function(){return r.rd})),n.d(e,"LineCurve",(function(){return r.sd})),n.d(e,"LineCurve3",(function(){return r.td})),n.d(e,"LineDashedMaterial",(function(){return r.ud})),n.d(e,"LineLoop",(function(){return r.vd})),n.d(e,"LineSegments",(function(){return r.wd})),n.d(e,"LinearInterpolant",(function(){return r.yd})),n.d(e,"LinearMipMapLinearFilter",(function(){return r.zd})),n.d(e,"LinearMipMapNearestFilter",(function(){return r.Ad})),n.d(e,"Loader",(function(){return r.Gd})),n.d(e,"LoaderUtils",(function(){return r.Hd})),n.d(e,"LoadingManager",(function(){return r.Id})),n.d(e,"LoopOnce",(function(){return r.Jd})),n.d(e,"LoopPingPong",(function(){return r.Kd})),n.d(e,"LoopRepeat",(function(){return r.Ld})),n.d(e,"MOUSE",(function(){return r.Od})),n.d(e,"Material",(function(){return r.Pd})),n.d(e,"MaterialLoader",(function(){return r.Qd})),n.d(e,"MathUtils",(function(){return r.Rd})),n.d(e,"Matrix2",(function(){return r.Sd})),n.d(e,"MeshLambertMaterial",(function(){return r.ae})),n.d(e,"MeshMatcapMaterial",(function(){return r.be})),n.d(e,"MeshNormalMaterial",(function(){return r.ce})),n.d(e,"MeshPhongMaterial",(function(){return r.de})),n.d(e,"MeshPhysicalMaterial",(function(){return r.ee})),n.d(e,"MeshStandardMaterial",(function(){return r.fe})),n.d(e,"MeshToonMaterial",(function(){return r.ge})),n.d(e,"NearestMipMapLinearFilter",(function(){return r.ne})),n.d(e,"NearestMipMapNearestFilter",(function(){return r.oe})),n.d(e,"NeverStencilFunc",(function(){return r.ue})),n.d(e,"NormalAnimationBlendMode",(function(){return r.ye})),n.d(e,"NotEqualStencilFunc",(function(){return r.Ce})),n.d(e,"NumberKeyframeTrack",(function(){return r.De})),n.d(e,"Object3D",(function(){return r.Ee})),n.d(e,"ObjectLoader",(function(){return r.Fe})),n.d(e,"OctahedronGeometry",(function(){return r.He})),n.d(e,"Path",(function(){return r.Se})),n.d(e,"PlaneHelper",(function(){return r.We})),n.d(e,"PointLight",(function(){return r.Xe})),n.d(e,"PointLightHelper",(function(){return r.Ye})),n.d(e,"Points",(function(){return r.Ze})),n.d(e,"PointsMaterial",(function(){return r.af})),n.d(e,"PolarGridHelper",(function(){return r.bf})),n.d(e,"PolyhedronGeometry",(function(){return r.cf})),n.d(e,"PositionalAudio",(function(){return r.df})),n.d(e,"PropertyBinding",(function(){return r.ef})),n.d(e,"PropertyMixer",(function(){return r.ff})),n.d(e,"QuadraticBezierCurve",(function(){return r.gf})),n.d(e,"QuadraticBezierCurve3",(function(){return r.hf})),n.d(e,"Quaternion",(function(){return r.if})),n.d(e,"QuaternionKeyframeTrack",(function(){return r.jf})),n.d(e,"QuaternionLinearInterpolant",(function(){return r.kf})),n.d(e,"RGBDepthPacking",(function(){return r.Nf})),n.d(e,"RGBIntegerFormat",(function(){return r.Pf})),n.d(e,"RGDepthPacking",(function(){return r.Xf})),n.d(e,"RawShaderMaterial",(function(){return r.ag})),n.d(e,"Ray",(function(){return r.bg})),n.d(e,"Raycaster",(function(){return r.cg})),n.d(e,"RectAreaLight",(function(){return r.dg})),n.d(e,"RenderTarget",(function(){return r.hg})),n.d(e,"RenderTarget3D",(function(){return r.ig})),n.d(e,"RenderTargetArray",(function(){return r.jg})),n.d(e,"ReplaceStencilOp",(function(){return r.lg})),n.d(e,"RingGeometry",(function(){return r.ng})),n.d(e,"Scene",(function(){return r.sg})),n.d(e,"ShadowMaterial",(function(){return r.ug})),n.d(e,"Shape",(function(){return r.vg})),n.d(e,"ShapeGeometry",(function(){return r.wg})),n.d(e,"ShapePath",(function(){return r.xg})),n.d(e,"ShapeUtils",(function(){return r.yg})),n.d(e,"Skeleton",(function(){return r.Ag})),n.d(e,"SkeletonHelper",(function(){return r.Bg})),n.d(e,"SkinnedMesh",(function(){return r.Cg})),n.d(e,"Source",(function(){return r.Dg})),n.d(e,"Sphere",(function(){return r.Eg})),n.d(e,"SphereGeometry",(function(){return r.Fg})),n.d(e,"Spherical",(function(){return r.Gg})),n.d(e,"SphericalHarmonics3",(function(){return r.Hg})),n.d(e,"SplineCurve",(function(){return r.Ig})),n.d(e,"SpotLight",(function(){return r.Jg})),n.d(e,"SpotLightHelper",(function(){return r.Kg})),n.d(e,"Sprite",(function(){return r.Lg})),n.d(e,"SpriteMaterial",(function(){return r.Mg})),n.d(e,"StaticCopyUsage",(function(){return r.Qg})),n.d(e,"StaticDrawUsage",(function(){return r.Rg})),n.d(e,"StaticReadUsage",(function(){return r.Sg})),n.d(e,"StereoCamera",(function(){return r.Tg})),n.d(e,"StreamCopyUsage",(function(){return r.Ug})),n.d(e,"StreamDrawUsage",(function(){return r.Vg})),n.d(e,"StreamReadUsage",(function(){return r.Wg})),n.d(e,"StringKeyframeTrack",(function(){return r.Xg})),n.d(e,"TOUCH",(function(){return r.ah})),n.d(e,"TetrahedronGeometry",(function(){return r.ch})),n.d(e,"TextureLoader",(function(){return r.eh})),n.d(e,"TextureUtils",(function(){return r.fh})),n.d(e,"TimestampQuery",(function(){return r.gh})),n.d(e,"TorusGeometry",(function(){return r.hh})),n.d(e,"TorusKnotGeometry",(function(){return r.ih})),n.d(e,"Triangle",(function(){return r.jh})),n.d(e,"TriangleFanDrawMode",(function(){return r.kh})),n.d(e,"TriangleStripDrawMode",(function(){return r.lh})),n.d(e,"TrianglesDrawMode",(function(){return r.mh})),n.d(e,"TubeGeometry",(function(){return r.nh})),n.d(e,"UVMapping",(function(){return r.oh})),n.d(e,"Uint8BufferAttribute",(function(){return r.rh})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return r.sh})),n.d(e,"Uniform",(function(){return r.th})),n.d(e,"UniformsGroup",(function(){return r.uh})),n.d(e,"VectorKeyframeTrack",(function(){return r.Hh})),n.d(e,"VideoFrameTexture",(function(){return r.Ih})),n.d(e,"VideoTexture",(function(){return r.Jh})),n.d(e,"WebGL3DRenderTarget",(function(){return r.Kh})),n.d(e,"WebGLArrayRenderTarget",(function(){return r.Lh})),n.d(e,"WebGPUCoordinateSystem",(function(){return r.Ph})),n.d(e,"WireframeGeometry",(function(){return r.Rh})),n.d(e,"WrapAroundEnding",(function(){return r.Sh})),n.d(e,"ZeroCurvatureEnding",(function(){return r.Th})),n.d(e,"ZeroSlopeEnding",(function(){return r.Vh})),n.d(e,"ZeroStencilOp",(function(){return r.Wh}));const h={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},c={common:{diffuse:{value:new r.ab(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new r.Td},alphaMap:{value:null},alphaMapTransform:{value:new r.Td},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new r.Td}},envmap:{envMap:{value:null},envMapRotation:{value:new r.Td},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new r.Td}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new r.Td}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new r.Td},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new r.Td},normalScale:{value:new r.Eh(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new r.Td},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new r.Td}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new r.Td}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new r.Td}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.ab(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.ab(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new r.Td},alphaTest:{value:0},uvTransform:{value:new r.Td}},sprite:{diffuse:{value:new r.ab(16777215)},opacity:{value:1},center:{value:new r.Eh(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new r.Td},alphaMap:{value:null},alphaMapTransform:{value:new r.Td},alphaTest:{value:0}}},f={basic:{uniforms:Object(r.di)([c.common,c.specularmap,c.envmap,c.aomap,c.lightmap,c.fog]),vertexShader:h.meshbasic_vert,fragmentShader:h.meshbasic_frag},lambert:{uniforms:Object(r.di)([c.common,c.specularmap,c.envmap,c.aomap,c.lightmap,c.emissivemap,c.bumpmap,c.normalmap,c.displacementmap,c.fog,c.lights,{emissive:{value:new r.ab(0)}}]),vertexShader:h.meshlambert_vert,fragmentShader:h.meshlambert_frag},phong:{uniforms:Object(r.di)([c.common,c.specularmap,c.envmap,c.aomap,c.lightmap,c.emissivemap,c.bumpmap,c.normalmap,c.displacementmap,c.fog,c.lights,{emissive:{value:new r.ab(0)},specular:{value:new r.ab(1118481)},shininess:{value:30}}]),vertexShader:h.meshphong_vert,fragmentShader:h.meshphong_frag},standard:{uniforms:Object(r.di)([c.common,c.envmap,c.aomap,c.lightmap,c.emissivemap,c.bumpmap,c.normalmap,c.displacementmap,c.roughnessmap,c.metalnessmap,c.fog,c.lights,{emissive:{value:new r.ab(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:h.meshphysical_vert,fragmentShader:h.meshphysical_frag},toon:{uniforms:Object(r.di)([c.common,c.aomap,c.lightmap,c.emissivemap,c.bumpmap,c.normalmap,c.displacementmap,c.gradientmap,c.fog,c.lights,{emissive:{value:new r.ab(0)}}]),vertexShader:h.meshtoon_vert,fragmentShader:h.meshtoon_frag},matcap:{uniforms:Object(r.di)([c.common,c.bumpmap,c.normalmap,c.displacementmap,c.fog,{matcap:{value:null}}]),vertexShader:h.meshmatcap_vert,fragmentShader:h.meshmatcap_frag},points:{uniforms:Object(r.di)([c.points,c.fog]),vertexShader:h.points_vert,fragmentShader:h.points_frag},dashed:{uniforms:Object(r.di)([c.common,c.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:h.linedashed_vert,fragmentShader:h.linedashed_frag},depth:{uniforms:Object(r.di)([c.common,c.displacementmap]),vertexShader:h.depth_vert,fragmentShader:h.depth_frag},normal:{uniforms:Object(r.di)([c.common,c.bumpmap,c.normalmap,c.displacementmap,{opacity:{value:1}}]),vertexShader:h.meshnormal_vert,fragmentShader:h.meshnormal_frag},sprite:{uniforms:Object(r.di)([c.sprite,c.fog]),vertexShader:h.sprite_vert,fragmentShader:h.sprite_frag},background:{uniforms:{uvTransform:{value:new r.Td},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:h.background_vert,fragmentShader:h.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new r.Td}},vertexShader:h.backgroundCube_vert,fragmentShader:h.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:h.cube_vert,fragmentShader:h.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:h.equirect_vert,fragmentShader:h.equirect_frag},distanceRGBA:{uniforms:Object(r.di)([c.common,c.displacementmap,{referencePosition:{value:new r.Fh},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:h.distanceRGBA_vert,fragmentShader:h.distanceRGBA_frag},shadow:{uniforms:Object(r.di)([c.lights,c.fog,{color:{value:new r.ab(0)},opacity:{value:1}}]),vertexShader:h.shadow_vert,fragmentShader:h.shadow_frag}};f.physical={uniforms:Object(r.di)([f.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new r.Td},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new r.Td},clearcoatNormalScale:{value:new r.Eh(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new r.Td},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new r.Td},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new r.Td},sheen:{value:0},sheenColor:{value:new r.ab(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new r.Td},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new r.Td},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new r.Td},transmissionSamplerSize:{value:new r.Eh},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new r.Td},attenuationDistance:{value:0},attenuationColor:{value:new r.ab(0)},specularColor:{value:new r.ab(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new r.Td},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new r.Td},anisotropyVector:{value:new r.Eh},anisotropyMap:{value:null},anisotropyMapTransform:{value:new r.Td}}]),vertexShader:h.meshphysical_vert,fragmentShader:h.meshphysical_frag};const d={r:0,b:0,g:0},m=new r.hc,v=new r.Ud;function y(t,e,n,o,l,h,c){const y=new r.ab(0);let _,x,w=!0===h?0:1,M=null,S=0,E=null;function A(t){let r=!0===t.isScene?t.background:null;if(r&&r.isTexture){r=(t.backgroundBlurriness>0?n:e).get(r)}return r}function T(e,n){e.getRGB(d,Object(r.ci)(t)),o.buffers.color.setClear(d.r,d.g,d.b,n,c)}return{getClearColor:function(){return y},setClearColor:function(t,e=1){y.set(t),w=e,T(y,w)},getClearAlpha:function(){return w},setClearAlpha:function(t){w=t,T(y,w)},render:function(e){let n=!1;const r=A(e);null===r?T(y,w):r&&r.isColor&&(T(r,1),n=!0);const l=t.xr.getEnvironmentBlendMode();"additive"===l?o.buffers.color.setClear(0,0,0,1,c):"alpha-blend"===l&&o.buffers.color.setClear(0,0,0,0,c),(t.autoClear||n)&&(o.buffers.depth.setTest(!0),o.buffers.depth.setMask(!0),o.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const o=A(n);o&&(o.isCubeTexture||o.mapping===r.qb)?(void 0===x&&(x=new r.Wd(new r.K(1,1,1),new r.tg({name:"BackgroundCubeMaterial",uniforms:Object(r.Yh)(f.backgroundCube.uniforms),vertexShader:f.backgroundCube.vertexShader,fragmentShader:f.backgroundCube.fragmentShader,side:r.B,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(x)),m.copy(n.backgroundRotation),m.x*=-1,m.y*=-1,m.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(m.y*=-1,m.z*=-1),x.material.uniforms.envMap.value=o,x.material.uniforms.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,x.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,x.material.uniforms.backgroundRotation.value.setFromMatrix4(v.makeRotationFromEuler(m)),x.material.toneMapped=r.cb.getTransfer(o.colorSpace)!==r.rg,M===o&&S===o.version&&E===t.toneMapping||(x.material.needsUpdate=!0,M=o,S=o.version,E=t.toneMapping),x.layers.enableAll(),e.unshift(x,x.geometry,x.material,0,0,null)):o&&o.isTexture&&(void 0===_&&(_=new r.Wd(new r.Ve(2,2),new r.tg({name:"BackgroundMaterial",uniforms:Object(r.Yh)(f.background.uniforms),vertexShader:f.background.vertexShader,fragmentShader:f.background.fragmentShader,side:r.rc,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),Object.defineProperty(_.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(_)),_.material.uniforms.t2D.value=o,_.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,_.material.toneMapped=r.cb.getTransfer(o.colorSpace)!==r.rg,!0===o.matrixAutoUpdate&&o.updateMatrix(),_.material.uniforms.uvTransform.value.copy(o.matrix),M===o&&S===o.version&&E===t.toneMapping||(_.material.needsUpdate=!0,M=o,S=o.version,E=t.toneMapping),_.layers.enableAll(),e.unshift(_,_.geometry,_.material,0,0,null))},dispose:function(){void 0!==x&&(x.geometry.dispose(),x.material.dispose(),x=void 0),void 0!==_&&(_.geometry.dispose(),_.material.dispose(),_=void 0)}}}function _(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),o={},l=m(null);let h=l,c=!1;function f(e){return t.bindVertexArray(e)}function d(e){return t.deleteVertexArray(e)}function m(t){const e=[],r=[],o=[];for(let i=0;i<n;i++)e[i]=0,r[i]=0,o[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:o,object:t,attributes:{},index:null}}function v(){const t=h.newAttributes;for(let i=0,e=t.length;i<e;i++)t[i]=0}function y(t){_(t,0)}function _(e,n){const r=h.newAttributes,o=h.enabledAttributes,l=h.attributeDivisors;r[e]=1,0===o[e]&&(t.enableVertexAttribArray(e),o[e]=1),l[e]!==n&&(t.vertexAttribDivisor(e,n),l[e]=n)}function x(){const e=h.newAttributes,n=h.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function w(e,n,r,o,l,h,c){!0===c?t.vertexAttribIPointer(e,n,r,l,h):t.vertexAttribPointer(e,n,r,o,l,h)}function M(){S(),c=!0,h!==l&&(h=l,f(h.object))}function S(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(object,n,l,d,M){let S=!1;const E=function(e,n,r){const l=!0===r.wireframe;let h=o[e.id];void 0===h&&(h={},o[e.id]=h);let c=h[n.id];void 0===c&&(c={},h[n.id]=c);let f=c[l];void 0===f&&(f=m(t.createVertexArray()),c[l]=f);return f}(d,l,n);h!==E&&(h=E,f(h.object)),S=function(object,t,e,n){const r=h.attributes,o=t.attributes;let l=0;const c=e.getAttributes();for(const t in c){if(c[t].location>=0){const e=r[t];let n=o[t];if(void 0===n&&("instanceMatrix"===t&&object.instanceMatrix&&(n=object.instanceMatrix),"instanceColor"===t&&object.instanceColor&&(n=object.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;l++}}return h.attributesNum!==l||h.index!==n}(object,d,l,M),S&&function(object,t,e,n){const r={},o=t.attributes;let l=0;const c=e.getAttributes();for(const t in c){if(c[t].location>=0){let e=o[t];void 0===e&&("instanceMatrix"===t&&object.instanceMatrix&&(e=object.instanceMatrix),"instanceColor"===t&&object.instanceColor&&(e=object.instanceColor));const data={};data.attribute=e,e&&e.data&&(data.data=e.data),r[t]=data,l++}}h.attributes=r,h.attributesNum=l,h.index=n}(object,d,l,M),null!==M&&e.update(M,t.ELEMENT_ARRAY_BUFFER),(S||c)&&(c=!1,function(object,n,o,l){v();const h=l.attributes,c=o.getAttributes(),f=n.defaultAttributeValues;for(const n in c){const o=c[n];if(o.location>=0){let c=h[n];if(void 0===c&&("instanceMatrix"===n&&object.instanceMatrix&&(c=object.instanceMatrix),"instanceColor"===n&&object.instanceColor&&(c=object.instanceColor)),void 0!==c){const n=c.normalized,h=c.itemSize,f=e.get(c);if(void 0===f)continue;const d=f.buffer,m=f.type,v=f.bytesPerElement,x=m===t.INT||m===t.UNSIGNED_INT||c.gpuType===r.Uc;if(c.isInterleavedBufferAttribute){const data=c.data,e=data.stride,r=c.offset;if(data.isInstancedInterleavedBuffer){for(let i=0;i<o.locationSize;i++)_(o.location+i,data.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=data.meshPerAttribute*data.count)}else for(let i=0;i<o.locationSize;i++)y(o.location+i);t.bindBuffer(t.ARRAY_BUFFER,d);for(let i=0;i<o.locationSize;i++)w(o.location+i,h/o.locationSize,m,n,e*v,(r+h/o.locationSize*i)*v,x)}else{if(c.isInstancedBufferAttribute){for(let i=0;i<o.locationSize;i++)_(o.location+i,c.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=c.meshPerAttribute*c.count)}else for(let i=0;i<o.locationSize;i++)y(o.location+i);t.bindBuffer(t.ARRAY_BUFFER,d);for(let i=0;i<o.locationSize;i++)w(o.location+i,h/o.locationSize,m,n,h*v,h/o.locationSize*i*v,x)}}else if(void 0!==f){const e=f[n];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(o.location,e);break;case 3:t.vertexAttrib3fv(o.location,e);break;case 4:t.vertexAttrib4fv(o.location,e);break;default:t.vertexAttrib1fv(o.location,e)}}}}x()}(object,n,l,d),null!==M&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(M).buffer))},reset:M,resetDefaultState:S,dispose:function(){M();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)d(r[t].object),delete r[t];delete n[t.id]}},initAttributes:v,enableAttribute:y,disableUnusedAttributes:x}}function x(t,e,n){let r;function o(e,o,l){0!==l&&(t.drawArraysInstanced(r,e,o,l),n.update(o,r,l))}this.setMode=function(t){r=t},this.render=function(e,o){t.drawArrays(r,e,o),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(t,o,l){if(0===l)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,t,0,o,0,l);let h=0;for(let i=0;i<l;i++)h+=o[i];n.update(h,r,1)},this.renderMultiDrawInstances=function(t,l,h,c){if(0===h)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let i=0;i<t.length;i++)o(t[i],l[i],c[i]);else{f.multiDrawArraysInstancedWEBGL(r,t,0,l,0,c,0,h);let e=0;for(let i=0;i<h;i++)e+=l[i]*c[i];n.update(e,r,1)}}}function w(t,e,n,o){let l;function h(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==n.precision?n.precision:"highp";const f=h(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const d=!0===n.logarithmicDepthBuffer,m=!0===n.reverseDepthBuffer&&e.has("EXT_clip_control"),v=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==l)return l;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");l=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else l=0;return l},getMaxPrecision:h,textureFormatReadable:function(e){return e===r.qf||o.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const l=n===r.Ec&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==r.wh&&o.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==r.nc&&!l)},precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:m,maxTextures:v,maxVertexTextures:y,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:y>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function M(t){const e=this;let n=null,o=0,l=!1,h=!1;const c=new r.Ue,f=new r.Td,d={value:null,needsUpdate:!1};function m(t,n,r,o){const l=null!==t?t.length:0;let h=null;if(0!==l){if(h=d.value,!0!==o||null===h){const e=r+4*l,o=n.matrixWorldInverse;f.getNormalMatrix(o),(null===h||h.length<e)&&(h=new Float32Array(e));for(let i=0,e=r;i!==l;++i,e+=4)c.copy(t[i]).applyMatrix4(o,f),c.normal.toArray(h,e),h[e+3]=c.constant}d.value=h,d.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,h}this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==o||l;return l=e,o=t.length,n},this.beginShadows=function(){h=!0,m(null)},this.endShadows=function(){h=!1},this.setGlobalState=function(t,e){n=m(t,e,0)},this.setState=function(r,c,f){const v=r.clippingPlanes,y=r.clipIntersection,_=r.clipShadows,x=t.get(r);if(!l||null===v||0===v.length||h&&!_)h?m(null):function(){d.value!==n&&(d.value=n,d.needsUpdate=o>0);e.numPlanes=o,e.numIntersection=0}();else{const t=h?0:o,e=4*t;let r=x.clippingState||null;d.value=r,r=m(v,c,e,f);for(let i=0;i!==e;++i)r[i]=n[i];x.clippingState=r,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=t}}}function S(t){let e=new WeakMap;function n(t,e){return e===r.fc?t.mapping=r.mb:e===r.gc&&(t.mapping=r.nb),t}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(l){if(l&&l.isTexture){const h=l.mapping;if(h===r.fc||h===r.gc){if(e.has(l)){return n(e.get(l).texture,l.mapping)}{const image=l.image;if(image&&image.height>0){const h=new r.Nh(image.height);return h.fromEquirectangularTexture(t,l),e.set(l,h),l.addEventListener("dispose",o),n(h.texture,l.mapping)}return null}}}return l},dispose:function(){e=new WeakMap}}}const E=[.125,.215,.35,.446,.526,.582],A=20,T=new r.Pe,C=new r.ab;let P=null,R=0,I=0,k=!1;const D=(1+Math.sqrt(5))/2,L=1/D,F=[new r.Fh(-D,L,0),new r.Fh(D,L,0),new r.Fh(-L,0,D),new r.Fh(L,0,D),new r.Fh(0,D,-L),new r.Fh(0,D,L),new r.Fh(-1,1,-1),new r.Fh(1,1,-1),new r.Fh(-1,1,1),new r.Fh(1,1,1)];class O{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){P=this._renderer.getRenderTarget(),R=this._renderer.getActiveCubeFace(),I=this._renderer.getActiveMipmapLevel(),k=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=z(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=U(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let i=0;i<this._lodPlanes.length;i++)this._lodPlanes[i].dispose()}_cleanup(t){this._renderer.setRenderTarget(P,R,I),this._renderer.xr.enabled=k,t.scissorTest=!1,B(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===r.mb||t.mapping===r.nb?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),P=this._renderer.getRenderTarget(),R=this._renderer.getActiveCubeFace(),I=this._renderer.getActiveMipmapLevel(),k=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:r.xd,minFilter:r.xd,generateMipmaps:!1,type:r.Ec,format:r.qf,colorSpace:r.Dd,depthBuffer:!1},o=N(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=N(t,e,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],o=[];let l=t;const h=t-4+1+E.length;for(let i=0;i<h;i++){const h=Math.pow(2,l);n.push(h);let c=1/h;i>t-4?c=E[i-t+4-1]:0===i&&(c=0),o.push(c);const f=1/(h-2),d=-f,m=1+f,v=[d,d,m,d,m,m,d,d,m,m,d,m],y=6,_=6,x=3,w=2,M=1,S=new Float32Array(x*_*y),A=new Float32Array(w*_*y),T=new Float32Array(M*_*y);for(let t=0;t<y;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];S.set(r,x*_*t),A.set(v,w*_*t);const o=[t,t,t,t,t,t];T.set(o,M*_*t)}const C=new r.N;C.setAttribute("position",new r.M(S,x)),C.setAttribute("uv",new r.M(A,w)),C.setAttribute("faceIndex",new r.M(T,M)),e.push(C),l>4&&l--}return{lodPlanes:e,sizeLods:n,sigmas:o}}(o)),this._blurMaterial=function(t,e,n){const o=new Float32Array(A),l=new r.Fh(0,1,0),h=new r.tg({name:"SphericalGaussianBlur",defines:{n:A,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:V(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:r.ve,depthTest:!1,depthWrite:!1});return h}(o,t,e)}return o}_compileMaterial(t){const e=new r.Wd(this._lodPlanes[0],t);this._renderer.compile(e,T)}_sceneToCubeUV(t,e,n,o){const l=new r.Te(90,1,e,n),h=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,m=f.toneMapping;f.getClearColor(C),f.toneMapping=r.xe,f.autoClear=!1;const v=new r.Xd({name:"PMREM.Background",side:r.B,depthWrite:!1,depthTest:!1}),y=new r.Wd(new r.K,v);let _=!1;const x=t.background;x?x.isColor&&(v.color.copy(x),t.background=null,_=!0):(v.color.copy(C),_=!0);for(let i=0;i<6;i++){const col=i%3;0===col?(l.up.set(0,h[i],0),l.lookAt(c[i],0,0)):1===col?(l.up.set(0,0,h[i]),l.lookAt(0,c[i],0)):(l.up.set(0,h[i],0),l.lookAt(0,0,c[i]));const e=this._cubeSize;B(o,col*e,i>2?e:0,e,e),f.setRenderTarget(o),_&&f.render(y,l),f.render(t,l)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=m,f.autoClear=d,t.background=x}_textureToCubeUV(t,e){const n=this._renderer,o=t.mapping===r.mb||t.mapping===r.nb;o?(null===this._cubemapMaterial&&(this._cubemapMaterial=z()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=U());const l=o?this._cubemapMaterial:this._equirectMaterial,h=new r.Wd(this._lodPlanes[0],l);l.uniforms.envMap.value=t;const c=this._cubeSize;B(e,0,0,3*c,2*c),n.setRenderTarget(e),n.render(h,T)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=F[(r-i-1)%F.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,r,o){const l=this._pingPongRenderTarget;this._halfBlur(t,l,e,n,r,"latitudinal",o),this._halfBlur(l,t,n,n,r,"longitudinal",o)}_halfBlur(t,e,n,o,l,h,c){const f=this._renderer,d=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const m=new r.Wd(this._lodPlanes[o],d),v=d.uniforms,y=this._sizeLods[n]-1,_=isFinite(l)?Math.PI/(2*y):2*Math.PI/39,x=l/_,w=isFinite(l)?1+Math.floor(3*x):A;w>A&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const M=[];let S=0;for(let i=0;i<A;++i){const t=i/x,e=Math.exp(-t*t/2);M.push(e),0===i?S+=e:i<w&&(S+=2*e)}for(let i=0;i<M.length;i++)M[i]=M[i]/S;v.envMap.value=t.texture,v.samples.value=w,v.weights.value=M,v.latitudinal.value="latitudinal"===h,c&&(v.poleAxis.value=c);const{_lodMax:E}=this;v.dTheta.value=_,v.mipInt.value=E-n;const C=this._sizeLods[o];B(e,3*C*(o>E-4?o-E+4:0),4*(this._cubeSize-C),3*C,2*C),f.setRenderTarget(e),f.render(m,T)}}function N(t,e,n){const o=new r.Oh(t,e,n);return o.texture.mapping=r.qb,o.texture.name="PMREM.cubeUv",o.scissorTest=!0,o}function B(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function U(){return new r.tg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:V(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:r.ve,depthTest:!1,depthWrite:!1})}function z(){return new r.tg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:V(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:r.ve,depthTest:!1,depthWrite:!1})}function V(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function j(t){let e=new WeakMap,n=null;function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(l){if(l&&l.isTexture){const h=l.mapping,c=h===r.fc||h===r.gc,f=h===r.mb||h===r.nb;if(c||f){let r=e.get(l);const h=void 0!==r?r.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==h)return null===n&&(n=new O(t)),r=c?n.fromEquirectangular(l,r):n.fromCubemap(l,r),r.texture.pmremVersion=l.pmremVersion,e.set(l,r),r.texture;if(void 0!==r)return r.texture;{const image=l.image;return c&&image&&image.height>0||f&&image&&function(image){let t=0;const e=6;for(let i=0;i<e;i++)void 0!==image[i]&&t++;return t===e}(image)?(null===n&&(n=new O(t)),r=c?n.fromEquirectangular(l):n.fromCubemap(l),r.texture.pmremVersion=l.pmremVersion,e.set(l,r),l.addEventListener("dispose",o),r.texture):null}}}return l},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function H(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&Object(r.hi)("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function G(t,e,n,o){const l={},h=new WeakMap;function c(t){const r=t.target;null!==r.index&&e.remove(r.index);for(const t in r.attributes)e.remove(r.attributes[t]);r.removeEventListener("dispose",c),delete l[r.id];const f=h.get(r);f&&(e.remove(f),h.delete(r)),o.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,n.memory.geometries--}function f(t){const n=[],o=t.index,l=t.attributes.position;let c=0;if(null!==o){const t=o.array;c=o.version;for(let i=0,e=t.length;i<e;i+=3){const a=t[i+0],b=t[i+1],e=t[i+2];n.push(a,b,b,e,e,a)}}else{if(void 0===l)return;{const t=l.array;c=l.version;for(let i=0,e=t.length/3-1;i<e;i+=3){const a=i+0,b=i+1,t=i+2;n.push(a,b,b,t,t,a)}}}const f=new(Object(r.Xh)(n)?r.qh:r.ph)(n,1);f.version=c;const d=h.get(t);d&&e.remove(d),h.set(t,f)}return{get:function(object,t){return!0===l[t.id]||(t.addEventListener("dispose",c),l[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)e.update(r[n],t.ARRAY_BUFFER)},getWireframeAttribute:function(t){const e=h.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&f(t)}else f(t);return h.get(t)}}}function W(t,e,n){let r,o,l;function h(e,h,c){0!==c&&(t.drawElementsInstanced(r,h,o,e*l,c),n.update(h,r,c))}this.setMode=function(t){r=t},this.setIndex=function(t){o=t.type,l=t.bytesPerElement},this.render=function(e,h){t.drawElements(r,h,o,e*l),n.update(h,r,1)},this.renderInstances=h,this.renderMultiDraw=function(t,l,h){if(0===h)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,l,0,o,t,0,h);let c=0;for(let i=0;i<h;i++)c+=l[i];n.update(c,r,1)},this.renderMultiDrawInstances=function(t,c,f,d){if(0===f)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let i=0;i<t.length;i++)h(t[i]/l,c[i],d[i]);else{m.multiDrawElementsInstancedWEBGL(r,c,0,o,t,0,d,0,f);let e=0;for(let i=0;i<f;i++)e+=c[i]*d[i];n.update(e,r,1)}}}function X(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,o){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=o*(n/3);break;case t.LINES:e.lines+=o*(n/2);break;case t.LINE_STRIP:e.lines+=o*(n-1);break;case t.LINE_LOOP:e.lines+=o*n;break;case t.POINTS:e.points+=o*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Y(t,e,n){const o=new WeakMap,l=new r.Gh;return{update:function(object,h,c){const f=object.morphTargetInfluences,d=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=void 0!==d?d.length:0;let v=o.get(h);if(void 0===v||v.count!==m){void 0!==v&&v.texture.dispose();const y=void 0!==h.morphAttributes.position,_=void 0!==h.morphAttributes.normal,x=void 0!==h.morphAttributes.color,w=h.morphAttributes.position||[],M=h.morphAttributes.normal||[],S=h.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===_&&(E=2),!0===x&&(E=3);let A=h.attributes.position.count*E,T=1;A>e.maxTextureSize&&(T=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const C=new Float32Array(A*T*4*m),P=new r.Fb(C,A,T,m);P.type=r.nc,P.needsUpdate=!0;const R=4*E;for(let i=0;i<m;i++){const k=w[i],D=M[i],L=S[i],F=A*T*4*i;for(let O=0;O<k.count;O++){const N=O*R;!0===y&&(l.fromBufferAttribute(k,O),C[F+N+0]=l.x,C[F+N+1]=l.y,C[F+N+2]=l.z,C[F+N+3]=0),!0===_&&(l.fromBufferAttribute(D,O),C[F+N+4]=l.x,C[F+N+5]=l.y,C[F+N+6]=l.z,C[F+N+7]=0),!0===x&&(l.fromBufferAttribute(L,O),C[F+N+8]=l.x,C[F+N+9]=l.y,C[F+N+10]=l.z,C[F+N+11]=4===L.itemSize?l.w:1)}}function I(){P.dispose(),o.delete(h),h.removeEventListener("dispose",I)}v={count:m,texture:P,size:new r.Eh(A,T)},o.set(h,v),h.addEventListener("dispose",I)}if(!0===object.isInstancedMesh&&null!==object.morphTexture)c.getUniforms().setValue(t,"morphTexture",object.morphTexture,n);else{let B=0;for(let i=0;i<f.length;i++)B+=f[i];const U=h.morphTargetsRelative?1:1-B;c.getUniforms().setValue(t,"morphTargetBaseInfluence",U),c.getUniforms().setValue(t,"morphTargetInfluences",f)}c.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}}}function Z(t,e,n,r){let o=new WeakMap;function l(t){const e=t.target;e.removeEventListener("dispose",l),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(object){const h=r.render.frame,c=object.geometry,f=e.get(object,c);if(o.get(f)!==h&&(e.update(f),o.set(f,h)),object.isInstancedMesh&&(!1===object.hasEventListener("dispose",l)&&object.addEventListener("dispose",l),o.get(object)!==h&&(n.update(object.instanceMatrix,t.ARRAY_BUFFER),null!==object.instanceColor&&n.update(object.instanceColor,t.ARRAY_BUFFER),o.set(object,h))),object.isSkinnedMesh){const t=object.skeleton;o.get(t)!==h&&(t.update(),o.set(t,h))}return f},dispose:function(){o=new WeakMap}}}const K=new r.dh,$=new r.Ob(1,1),J=new r.Fb,Q=new r.Eb,tt=new r.ob,et=[],nt=[],it=new Float32Array(16),st=new Float32Array(9),ot=new Float32Array(4);function at(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let l=et[o];if(void 0===l&&(l=new Float32Array(o),et[o]=l),0!==e){r.toArray(l,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(l,r)}return l}function lt(a,b){if(a.length!==b.length)return!1;for(let i=0,t=a.length;i<t;i++)if(a[i]!==b[i])return!1;return!0}function ht(a,b){for(let i=0,t=b.length;i<t;i++)a[i]=b[i]}function ut(t,e){let n=nt[e];void 0===n&&(n=new Int32Array(e),nt[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function ct(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ft(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lt(n,e))return;t.uniform2fv(this.addr,e),ht(n,e)}}function pt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(lt(n,e))return;t.uniform3fv(this.addr,e),ht(n,e)}}function mt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lt(n,e))return;t.uniform4fv(this.addr,e),ht(n,e)}}function gt(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(lt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ht(n,e)}else{if(lt(n,r))return;ot.set(r),t.uniformMatrix2fv(this.addr,!1,ot),ht(n,r)}}function vt(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(lt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ht(n,e)}else{if(lt(n,r))return;st.set(r),t.uniformMatrix3fv(this.addr,!1,st),ht(n,r)}}function yt(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(lt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ht(n,e)}else{if(lt(n,r))return;it.set(r),t.uniformMatrix4fv(this.addr,!1,it),ht(n,r)}}function _t(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function bt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lt(n,e))return;t.uniform2iv(this.addr,e),ht(n,e)}}function xt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(lt(n,e))return;t.uniform3iv(this.addr,e),ht(n,e)}}function wt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lt(n,e))return;t.uniform4iv(this.addr,e),ht(n,e)}}function Mt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function St(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(lt(n,e))return;t.uniform2uiv(this.addr,e),ht(n,e)}}function Et(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(lt(n,e))return;t.uniform3uiv(this.addr,e),ht(n,e)}}function At(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(lt(n,e))return;t.uniform4uiv(this.addr,e),ht(n,e)}}function Tt(t,e,n){const o=this.cache,l=n.allocateTextureUnit();let h;o[0]!==l&&(t.uniform1i(this.addr,l),o[0]=l),this.type===t.SAMPLER_2D_SHADOW?($.compareFunction=r.jd,h=$):h=K,n.setTexture2D(e||h,l)}function Ct(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||Q,o)}function Pt(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||tt,o)}function Rt(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||J,o)}function It(t,e){t.uniform1fv(this.addr,e)}function kt(t,e){const data=at(e,this.size,2);t.uniform2fv(this.addr,data)}function Dt(t,e){const data=at(e,this.size,3);t.uniform3fv(this.addr,data)}function Lt(t,e){const data=at(e,this.size,4);t.uniform4fv(this.addr,data)}function Ft(t,e){const data=at(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,data)}function Ot(t,e){const data=at(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,data)}function Nt(t,e){const data=at(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,data)}function Bt(t,e){t.uniform1iv(this.addr,e)}function Ut(t,e){t.uniform2iv(this.addr,e)}function zt(t,e){t.uniform3iv(this.addr,e)}function Vt(t,e){t.uniform4iv(this.addr,e)}function jt(t,e){t.uniform1uiv(this.addr,e)}function Ht(t,e){t.uniform2uiv(this.addr,e)}function Gt(t,e){t.uniform3uiv(this.addr,e)}function Wt(t,e){t.uniform4uiv(this.addr,e)}function qt(t,e,n){const r=this.cache,o=e.length,l=ut(n,o);lt(r,l)||(t.uniform1iv(this.addr,l),ht(r,l));for(let i=0;i!==o;++i)n.setTexture2D(e[i]||K,l[i])}function Xt(t,e,n){const r=this.cache,o=e.length,l=ut(n,o);lt(r,l)||(t.uniform1iv(this.addr,l),ht(r,l));for(let i=0;i!==o;++i)n.setTexture3D(e[i]||Q,l[i])}function Yt(t,e,n){const r=this.cache,o=e.length,l=ut(n,o);lt(r,l)||(t.uniform1iv(this.addr,l),ht(r,l));for(let i=0;i!==o;++i)n.setTextureCube(e[i]||tt,l[i])}function Zt(t,e,n){const r=this.cache,o=e.length,l=ut(n,o);lt(r,l)||(t.uniform1iv(this.addr,l),ht(r,l));for(let i=0;i!==o;++i)n.setTexture2DArray(e[i]||J,l[i])}class Kt{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return ct;case 35664:return ft;case 35665:return pt;case 35666:return mt;case 35674:return gt;case 35675:return vt;case 35676:return yt;case 5124:case 35670:return _t;case 35667:case 35671:return bt;case 35668:case 35672:return xt;case 35669:case 35673:return wt;case 5125:return Mt;case 36294:return St;case 36295:return Et;case 36296:return At;case 35678:case 36198:case 36298:case 36306:case 35682:return Tt;case 35679:case 36299:case 36307:return Ct;case 35680:case 36300:case 36308:case 36293:return Pt;case 36289:case 36303:case 36311:case 36292:return Rt}}(e.type)}}class $t{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return It;case 35664:return kt;case 35665:return Dt;case 35666:return Lt;case 35674:return Ft;case 35675:return Ot;case 35676:return Nt;case 5124:case 35670:return Bt;case 35667:case 35671:return Ut;case 35668:case 35672:return zt;case 35669:case 35673:return Vt;case 5125:return jt;case 36294:return Ht;case 36295:return Gt;case 36296:return Wt;case 35678:case 36198:case 36298:case 36306:case 35682:return qt;case 35679:case 36299:case 36307:return Xt;case 35680:case 36300:case 36308:case 36293:return Yt;case 36289:case 36303:case 36311:case 36292:return Zt}}(e.type)}}class Jt{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const u=r[i];u.setValue(t,e[u.id],n)}}}const Qt=/(\w+)(\])?(\[|\.)?/g;function te(t,e){t.seq.push(e),t.map[e.id]=e}function ee(t,e,n){const path=t.name,r=path.length;for(Qt.lastIndex=0;;){const o=Qt.exec(path),l=Qt.lastIndex;let h=o[1];const c="]"===o[2],f=o[3];if(c&&(h|=0),void 0===f||"["===f&&l+2===r){te(n,void 0===f?new Kt(h,t,e):new $t(h,t,e));break}{let t=n.map[h];void 0===t&&(t=new Jt(h),te(n,t)),n=t}}}class ne{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);ee(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const u=this.map[e];void 0!==u&&u.setValue(t,n,r)}setOptional(t,object,e){const n=object[e];void 0!==n&&this.setValue(t,e,n)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const u=e[i],o=n[u.id];!1!==o.needsUpdate&&u.setValue(t,o.value,r)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const u=t[i];u.id in e&&n.push(u)}return n}}function re(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const ie=37297;let se=0;const oe=new r.Td;function ae(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),o=t.getShaderInfoLog(e).trim();if(r&&""===o)return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const r=parseInt(l[1]);return n.toUpperCase()+"\n\n"+o+"\n\n"+function(t,e){const n=t.split("\n"),r=[],o=Math.max(e-6,0),l=Math.min(e+6,n.length);for(let i=o;i<l;i++){const line=i+1;r.push(`${line===e?">":" "} ${line}: ${n[i]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return o}function le(t,e){const n=function(t){r.cb._getMatrix(oe,r.cb.workingColorSpace,t);const e=`mat3( ${oe.elements.map((t=>t.toFixed(4)))} )`;switch(r.cb.getTransfer(t)){case r.Fd:return[e,"LinearTransferOETF"];case r.rg:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${t}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function he(t,e){let n;switch(e){case r.Ed:n="Linear";break;case r.gg:n="Reinhard";break;case r.W:n="Cineon";break;case r.a:n="ACESFilmic";break;case r.f:n="AgX";break;case r.re:n="Neutral";break;case r.Bb:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const ue=new r.Fh;function ce(){r.cb.getLuminanceCoefficients(ue);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${ue.x.toFixed(4)}, ${ue.y.toFixed(4)}, ${ue.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function fe(t){return""!==t}function pe(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function de(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const me=/^[ \t]*#include +<([\w\d./]+)>/gm;function ge(t){return t.replace(me,ye)}const ve=new Map;function ye(t,e){let n=h[e];if(void 0===n){const t=ve.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=h[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return ge(n)}const _e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function be(t){return t.replace(_e,xe)}function xe(t,e,n,r){let o="";for(let i=parseInt(e);i<parseInt(n);i++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return o}function we(t){let e=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Me(t,e,n,o){const l=t.getContext(),c=n.defines;let f=n.vertexShader,d=n.fragmentShader;const m=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===r.Qe?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===r.Re?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===r.Dh&&(e="SHADOWMAP_TYPE_VSM"),e}(n),v=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case r.mb:case r.nb:e="ENVMAP_TYPE_CUBE";break;case r.qb:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),y=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===r.nb&&(e="ENVMAP_MODE_REFRACTION");return e}(n),_=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case r.le:e="ENVMAP_BLENDING_MULTIPLY";break;case r.je:e="ENVMAP_BLENDING_MIX";break;case r.c:e="ENVMAP_BLENDING_ADD"}return e}(n),x=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),w=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(fe).join("\n")}(n),M=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(c),S=l.createProgram();let E,A,T=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(E=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M].filter(fe).join("\n"),E.length>0&&(E+="\n"),A=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M].filter(fe).join("\n"),A.length>0&&(A+="\n")):(E=[we(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fe).join("\n"),A=[we(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",n.envMap?"#define "+_:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==r.xe?"#define TONE_MAPPING":"",n.toneMapping!==r.xe?h.tonemapping_pars_fragment:"",n.toneMapping!==r.xe?he("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",h.colorspace_pars_fragment,le("linearToOutputTexel",n.outputColorSpace),ce(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(fe).join("\n")),f=ge(f),f=pe(f,n),f=de(f,n),d=ge(d),d=pe(d,n),d=de(d,n),f=be(f),d=be(d),!0!==n.isRawShaderMaterial&&(T="#version 300 es\n",E=[w,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,A=["#define varying in",n.glslVersion===r.vc?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===r.vc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);const C=T+E+f,P=T+A+d,R=re(l,l.VERTEX_SHADER,C),I=re(l,l.FRAGMENT_SHADER,P);function k(e){if(t.debug.checkShaderErrors){const n=l.getProgramInfoLog(S).trim(),r=l.getShaderInfoLog(R).trim(),o=l.getShaderInfoLog(I).trim();let h=!0,c=!0;if(!1===l.getProgramParameter(S,l.LINK_STATUS))if(h=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(l,S,R,I);else{const t=ae(l,R,"vertex"),r=ae(l,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(S,l.VALIDATE_STATUS)+"\n\nMaterial Name: "+e.name+"\nMaterial Type: "+e.type+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(c=!1);c&&(e.diagnostics={runnable:h,programLog:n,vertexShader:{log:r,prefix:E},fragmentShader:{log:o,prefix:A}})}l.deleteShader(R),l.deleteShader(I),D=new ne(l,S),L=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let l=1;r.type===t.FLOAT_MAT2&&(l=2),r.type===t.FLOAT_MAT3&&(l=3),r.type===t.FLOAT_MAT4&&(l=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:l}}return n}(l,S)}let D,L;l.attachShader(S,R),l.attachShader(S,I),void 0!==n.index0AttributeName?l.bindAttribLocation(S,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(S,0,"position"),l.linkProgram(S),this.getUniforms=function(){return void 0===D&&k(this),D},this.getAttributes=function(){return void 0===L&&k(this),L};let F=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===F&&(F=l.getProgramParameter(S,ie)),F},this.destroy=function(){o.releaseStatesOfProgram(this),l.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=se++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=R,this.fragmentShader=I,this}let Se=0;class Ee{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(t);return!1===l.has(r)&&(l.add(r),r.usedTimes++),!1===l.has(o)&&(l.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(code){const t=this.shaderCache;let e=t.get(code);return void 0===e&&(e=new Ae(code),t.set(code,e)),e}}class Ae{constructor(code){this.id=Se++,this.code=code,this.usedTimes=0}}function Te(t,e,n,o,l,h,c){const d=new r.gd,m=new Ee,v=new Set,y=[],_=l.logarithmicDepthBuffer,x=l.vertexTextures;let w=l.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(t){return v.add(t),0===t?"uv":`uv${t}`}return{getParameters:function(h,d,y,E,object){const A=E.fog,T=object.geometry,C=h.isMeshStandardMaterial?E.environment:null,P=(h.isMeshStandardMaterial?n:e).get(h.envMap||C),R=P&&P.mapping===r.qb?P.image.height:null,I=M[h.type];null!==h.precision&&(w=l.getMaxPrecision(h.precision),w!==h.precision&&console.warn("THREE.WebGLProgram.getParameters:",h.precision,"not supported, using",w,"instead."));const k=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,D=void 0!==k?k.length:0;let L,F,O,N,B=0;if(void 0!==T.morphAttributes.position&&(B=1),void 0!==T.morphAttributes.normal&&(B=2),void 0!==T.morphAttributes.color&&(B=3),I){const t=f[I];L=t.vertexShader,F=t.fragmentShader}else L=h.vertexShader,F=h.fragmentShader,m.update(h),O=m.getVertexShaderID(h),N=m.getFragmentShaderID(h);const U=t.getRenderTarget(),z=t.state.buffers.depth.getReversed(),V=!0===object.isInstancedMesh,j=!0===object.isBatchedMesh,H=!!h.map,G=!!h.matcap,W=!!P,X=!!h.aoMap,Y=!!h.lightMap,Z=!!h.bumpMap,K=!!h.normalMap,$=!!h.displacementMap,J=!!h.emissiveMap,Q=!!h.metalnessMap,tt=!!h.roughnessMap,et=h.anisotropy>0,nt=h.clearcoat>0,it=h.dispersion>0,st=h.iridescence>0,ot=h.sheen>0,at=h.transmission>0,lt=et&&!!h.anisotropyMap,ht=nt&&!!h.clearcoatMap,ut=nt&&!!h.clearcoatNormalMap,ct=nt&&!!h.clearcoatRoughnessMap,ft=st&&!!h.iridescenceMap,pt=st&&!!h.iridescenceThicknessMap,mt=ot&&!!h.sheenColorMap,gt=ot&&!!h.sheenRoughnessMap,vt=!!h.specularMap,yt=!!h.specularColorMap,_t=!!h.specularIntensityMap,bt=at&&!!h.transmissionMap,xt=at&&!!h.thicknessMap,wt=!!h.gradientMap,Mt=!!h.alphaMap,St=h.alphaTest>0,Et=!!h.alphaHash,At=!!h.extensions;let Tt=r.xe;h.toneMapped&&(null!==U&&!0!==U.isXRRenderTarget||(Tt=t.toneMapping));const Ct={shaderID:I,shaderType:h.type,shaderName:h.name,vertexShader:L,fragmentShader:F,defines:h.defines,customVertexShaderID:O,customFragmentShaderID:N,isRawShaderMaterial:!0===h.isRawShaderMaterial,glslVersion:h.glslVersion,precision:w,batching:j,batchingColor:j&&null!==object._colorsTexture,instancing:V,instancingColor:V&&null!==object.instanceColor,instancingMorph:V&&null!==object.morphTexture,supportsVertexTextures:x,outputColorSpace:null===U?t.outputColorSpace:!0===U.isXRRenderTarget?U.texture.colorSpace:r.Dd,alphaToCoverage:!!h.alphaToCoverage,map:H,matcap:G,envMap:W,envMapMode:W&&P.mapping,envMapCubeUVHeight:R,aoMap:X,lightMap:Y,bumpMap:Z,normalMap:K,displacementMap:x&&$,emissiveMap:J,normalMapObjectSpace:K&&h.normalMapType===r.Ge,normalMapTangentSpace:K&&h.normalMapType===r.bh,metalnessMap:Q,roughnessMap:tt,anisotropy:et,anisotropyMap:lt,clearcoat:nt,clearcoatMap:ht,clearcoatNormalMap:ut,clearcoatRoughnessMap:ct,dispersion:it,iridescence:st,iridescenceMap:ft,iridescenceThicknessMap:pt,sheen:ot,sheenColorMap:mt,sheenRoughnessMap:gt,specularMap:vt,specularColorMap:yt,specularIntensityMap:_t,transmission:at,transmissionMap:bt,thicknessMap:xt,gradientMap:wt,opaque:!1===h.transparent&&h.blending===r.ze&&!1===h.alphaToCoverage,alphaMap:Mt,alphaTest:St,alphaHash:Et,combine:h.combine,mapUv:H&&S(h.map.channel),aoMapUv:X&&S(h.aoMap.channel),lightMapUv:Y&&S(h.lightMap.channel),bumpMapUv:Z&&S(h.bumpMap.channel),normalMapUv:K&&S(h.normalMap.channel),displacementMapUv:$&&S(h.displacementMap.channel),emissiveMapUv:J&&S(h.emissiveMap.channel),metalnessMapUv:Q&&S(h.metalnessMap.channel),roughnessMapUv:tt&&S(h.roughnessMap.channel),anisotropyMapUv:lt&&S(h.anisotropyMap.channel),clearcoatMapUv:ht&&S(h.clearcoatMap.channel),clearcoatNormalMapUv:ut&&S(h.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ct&&S(h.clearcoatRoughnessMap.channel),iridescenceMapUv:ft&&S(h.iridescenceMap.channel),iridescenceThicknessMapUv:pt&&S(h.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&S(h.sheenColorMap.channel),sheenRoughnessMapUv:gt&&S(h.sheenRoughnessMap.channel),specularMapUv:vt&&S(h.specularMap.channel),specularColorMapUv:yt&&S(h.specularColorMap.channel),specularIntensityMapUv:_t&&S(h.specularIntensityMap.channel),transmissionMapUv:bt&&S(h.transmissionMap.channel),thicknessMapUv:xt&&S(h.thicknessMap.channel),alphaMapUv:Mt&&S(h.alphaMap.channel),vertexTangents:!!T.attributes.tangent&&(K||et),vertexColors:h.vertexColors,vertexAlphas:!0===h.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,pointsUvs:!0===object.isPoints&&!!T.attributes.uv&&(H||Mt),fog:!!A,useFog:!0===h.fog,fogExp2:!!A&&A.isFogExp2,flatShading:!0===h.flatShading,sizeAttenuation:!0===h.sizeAttenuation,logarithmicDepthBuffer:_,reverseDepthBuffer:z,skinning:!0===object.isSkinnedMesh,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:D,morphTextureStride:B,numDirLights:d.directional.length,numPointLights:d.point.length,numSpotLights:d.spot.length,numSpotLightMaps:d.spotLightMap.length,numRectAreaLights:d.rectArea.length,numHemiLights:d.hemi.length,numDirLightShadows:d.directionalShadowMap.length,numPointLightShadows:d.pointShadowMap.length,numSpotLightShadows:d.spotShadowMap.length,numSpotLightShadowsWithMaps:d.numSpotLightShadowsWithMaps,numLightProbes:d.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:h.dithering,shadowMapEnabled:t.shadowMap.enabled&&y.length>0,shadowMapType:t.shadowMap.type,toneMapping:Tt,decodeVideoTexture:H&&!0===h.map.isVideoTexture&&r.cb.getTransfer(h.map.colorSpace)===r.rg,decodeVideoTextureEmissive:J&&!0===h.emissiveMap.isVideoTexture&&r.cb.getTransfer(h.emissiveMap.colorSpace)===r.rg,premultipliedAlpha:h.premultipliedAlpha,doubleSided:h.side===r.Ub,flipSided:h.side===r.B,useDepthPacking:h.depthPacking>=0,depthPacking:h.depthPacking||0,index0AttributeName:h.index0AttributeName,extensionClipCullDistance:At&&!0===h.extensions.clipCullDistance&&o.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(At&&!0===h.extensions.multiDraw||j)&&o.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:o.has("KHR_parallel_shader_compile"),customProgramCacheKey:h.customProgramCacheKey()};return Ct.vertexUv1s=v.has(1),Ct.vertexUv2s=v.has(2),Ct.vertexUv3s=v.has(3),v.clear(),Ct},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){d.disableAll(),e.supportsVertexTextures&&d.enable(0);e.instancing&&d.enable(1);e.instancingColor&&d.enable(2);e.instancingMorph&&d.enable(3);e.matcap&&d.enable(4);e.envMap&&d.enable(5);e.normalMapObjectSpace&&d.enable(6);e.normalMapTangentSpace&&d.enable(7);e.clearcoat&&d.enable(8);e.iridescence&&d.enable(9);e.alphaTest&&d.enable(10);e.vertexColors&&d.enable(11);e.vertexAlphas&&d.enable(12);e.vertexUv1s&&d.enable(13);e.vertexUv2s&&d.enable(14);e.vertexUv3s&&d.enable(15);e.vertexTangents&&d.enable(16);e.anisotropy&&d.enable(17);e.alphaHash&&d.enable(18);e.batching&&d.enable(19);e.dispersion&&d.enable(20);e.batchingColor&&d.enable(21);t.push(d.mask),d.disableAll(),e.fog&&d.enable(0);e.useFog&&d.enable(1);e.flatShading&&d.enable(2);e.logarithmicDepthBuffer&&d.enable(3);e.reverseDepthBuffer&&d.enable(4);e.skinning&&d.enable(5);e.morphTargets&&d.enable(6);e.morphNormals&&d.enable(7);e.morphColors&&d.enable(8);e.premultipliedAlpha&&d.enable(9);e.shadowMapEnabled&&d.enable(10);e.doubleSided&&d.enable(11);e.flipSided&&d.enable(12);e.useDepthPacking&&d.enable(13);e.dithering&&d.enable(14);e.transmission&&d.enable(15);e.sheen&&d.enable(16);e.opaque&&d.enable(17);e.pointsUvs&&d.enable(18);e.decodeVideoTexture&&d.enable(19);e.decodeVideoTextureEmissive&&d.enable(20);e.alphaToCoverage&&d.enable(21);t.push(d.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=M[t.type];let n;if(e){const t=f[e];n=r.vh.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let p=0,t=y.length;p<t;p++){const t=y[p];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Me(t,n,e,h),y.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const i=y.indexOf(t);y[i]=y[y.length-1],y.pop(),t.destroy()}},releaseShaderCache:function(t){m.remove(t)},programs:y,dispose:function(){m.dispose()}}}function Ce(){let t=new WeakMap;return{has:function(object){return t.has(object)},get:function(object){let map=t.get(object);return void 0===map&&(map={},t.set(object,map)),map},remove:function(object){t.delete(object)},update:function(object,e,n){t.get(object)[e]=n},dispose:function(){t=new WeakMap}}}function Pe(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Re(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Ie(){const t=[];let e=0;const n=[],r=[],o=[];function l(object,n,r,o,l,h){let c=t[e];return void 0===c?(c={id:object.id,object:object,geometry:n,material:r,groupOrder:o,renderOrder:object.renderOrder,z:l,group:h},t[e]=c):(c.id=object.id,c.object=object,c.geometry=n,c.material=r,c.groupOrder=o,c.renderOrder=object.renderOrder,c.z=l,c.group=h),e++,c}return{opaque:n,transmissive:r,transparent:o,init:function(){e=0,n.length=0,r.length=0,o.length=0},push:function(object,t,e,h,c,f){const d=l(object,t,e,h,c,f);e.transmission>0?r.push(d):!0===e.transparent?o.push(d):n.push(d)},unshift:function(object,t,e,h,c,f){const d=l(object,t,e,h,c,f);e.transmission>0?r.unshift(d):!0===e.transparent?o.unshift(d):n.unshift(d)},finish:function(){for(let i=e,n=t.length;i<n;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Pe),r.length>1&&r.sort(e||Re),o.length>1&&o.sort(e||Re)}}}function ke(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let o;return void 0===r?(o=new Ie,t.set(e,[o])):n>=r.length?(o=new Ie,r.push(o)):o=r[n],o},dispose:function(){t=new WeakMap}}}function De(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new r.Fh,color:new r.ab};break;case"SpotLight":n={position:new r.Fh,direction:new r.Fh,color:new r.ab,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new r.Fh,color:new r.ab,distance:0,decay:0};break;case"HemisphereLight":n={direction:new r.Fh,skyColor:new r.ab,groundColor:new r.ab};break;case"RectAreaLight":n={color:new r.ab,position:new r.Fh,halfWidth:new r.Fh,halfHeight:new r.Fh}}return t[e.id]=n,n}}}let Le=0;function Fe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Oe(t){const e=new De,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.Eh};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.Eh,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let i=0;i<9;i++)o.probe.push(new r.Fh);const l=new r.Fh,h=new r.Ud,f=new r.Ud;return{setup:function(r){let l=0,g=0,b=0;for(let i=0;i<9;i++)o.probe[i].set(0,0,0);let h=0,f=0,d=0,m=0,v=0,y=0,_=0,x=0,w=0,M=0,S=0;r.sort(Fe);for(let i=0,t=r.length;i<t;i++){const t=r[i],c=t.color,E=t.intensity,A=t.distance,T=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)l+=c.r*E,g+=c.g*E,b+=c.b*E;else if(t.isLightProbe){for(let e=0;e<9;e++)o.probe[e].addScaledVector(t.sh.coefficients[e],E);S++}else if(t.isDirectionalLight){const r=e.get(t);if(r.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const shadow=t.shadow,e=n.get(t);e.shadowIntensity=shadow.intensity,e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,o.directionalShadow[h]=e,o.directionalShadowMap[h]=T,o.directionalShadowMatrix[h]=t.shadow.matrix,y++}o.directional[h]=r,h++}else if(t.isSpotLight){const r=e.get(t);r.position.setFromMatrixPosition(t.matrixWorld),r.color.copy(c).multiplyScalar(E),r.distance=A,r.coneCos=Math.cos(t.angle),r.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),r.decay=t.decay,o.spot[d]=r;const shadow=t.shadow;if(t.map&&(o.spotLightMap[w]=t.map,w++,shadow.updateMatrices(t),t.castShadow&&M++),o.spotLightMatrix[d]=shadow.matrix,t.castShadow){const e=n.get(t);e.shadowIntensity=shadow.intensity,e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,o.spotShadow[d]=e,o.spotShadowMap[d]=T,x++}d++}else if(t.isRectAreaLight){const n=e.get(t);n.color.copy(c).multiplyScalar(E),n.halfWidth.set(.5*t.width,0,0),n.halfHeight.set(0,.5*t.height,0),o.rectArea[m]=n,m++}else if(t.isPointLight){const r=e.get(t);if(r.color.copy(t.color).multiplyScalar(t.intensity),r.distance=t.distance,r.decay=t.decay,t.castShadow){const shadow=t.shadow,e=n.get(t);e.shadowIntensity=shadow.intensity,e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,e.shadowCameraNear=shadow.camera.near,e.shadowCameraFar=shadow.camera.far,o.pointShadow[f]=e,o.pointShadowMap[f]=T,o.pointShadowMatrix[f]=t.shadow.matrix,_++}o.point[f]=r,f++}else if(t.isHemisphereLight){const n=e.get(t);n.skyColor.copy(t.color).multiplyScalar(E),n.groundColor.copy(t.groundColor).multiplyScalar(E),o.hemi[v]=n,v++}}m>0&&(!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=c.LTC_FLOAT_1,o.rectAreaLTC2=c.LTC_FLOAT_2):(o.rectAreaLTC1=c.LTC_HALF_1,o.rectAreaLTC2=c.LTC_HALF_2)),o.ambient[0]=l,o.ambient[1]=g,o.ambient[2]=b;const E=o.hash;E.directionalLength===h&&E.pointLength===f&&E.spotLength===d&&E.rectAreaLength===m&&E.hemiLength===v&&E.numDirectionalShadows===y&&E.numPointShadows===_&&E.numSpotShadows===x&&E.numSpotMaps===w&&E.numLightProbes===S||(o.directional.length=h,o.spot.length=d,o.rectArea.length=m,o.point.length=f,o.hemi.length=v,o.directionalShadow.length=y,o.directionalShadowMap.length=y,o.pointShadow.length=_,o.pointShadowMap.length=_,o.spotShadow.length=x,o.spotShadowMap.length=x,o.directionalShadowMatrix.length=y,o.pointShadowMatrix.length=_,o.spotLightMatrix.length=x+w-M,o.spotLightMap.length=w,o.numSpotLightShadowsWithMaps=M,o.numLightProbes=S,E.directionalLength=h,E.pointLength=f,E.spotLength=d,E.rectAreaLength=m,E.hemiLength=v,E.numDirectionalShadows=y,E.numPointShadows=_,E.numSpotShadows=x,E.numSpotMaps=w,E.numLightProbes=S,o.version=Le++)},setupView:function(t,e){let n=0,r=0,c=0,d=0,m=0;const v=e.matrixWorldInverse;for(let i=0,e=t.length;i<e;i++){const e=t[i];if(e.isDirectionalLight){const t=o.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),l.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(l),t.direction.transformDirection(v),n++}else if(e.isSpotLight){const t=o.spot[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(v),t.direction.setFromMatrixPosition(e.matrixWorld),l.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(l),t.direction.transformDirection(v),c++}else if(e.isRectAreaLight){const t=o.rectArea[d];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(v),f.identity(),h.copy(e.matrixWorld),h.premultiply(v),f.extractRotation(h),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(f),t.halfHeight.applyMatrix4(f),d++}else if(e.isPointLight){const t=o.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(v),r++}else if(e.isHemisphereLight){const t=o.hemi[m];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(v),m++}}},state:o}}function Ne(t){const e=new Oe(t),n=[],r=[];const o={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){o.camera=t,n.length=0,r.length=0},state:o,setupLights:function(){e.setup(n)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function Be(t){let e=new WeakMap;return{get:function(n,r=0){const o=e.get(n);let l;return void 0===o?(l=new Ne(t),e.set(n,[l])):r>=o.length?(l=new Ne(t),o.push(l)):l=o[r],l},dispose:function(){e=new WeakMap}}}function Ue(t,e,n){let o=new r.sc;const l=new r.Eh,h=new r.Eh,c=new r.Gh,f=new r.Yd({depthPacking:r.pf}),d=new r.Zd,m={},v=n.maxTextureSize,y={[r.rc]:r.B,[r.B]:r.rc,[r.Ub]:r.Ub},_=new r.tg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new r.Eh},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const w=new r.N;w.setAttribute("position",new r.M(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new r.Wd(w,_),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r.Qe;let E=this.type;function A(shadow,n){const o=e.update(M);_.defines.VSM_SAMPLES!==shadow.blurSamples&&(_.defines.VSM_SAMPLES=shadow.blurSamples,x.defines.VSM_SAMPLES=shadow.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),null===shadow.mapPass&&(shadow.mapPass=new r.Oh(l.x,l.y)),_.uniforms.shadow_pass.value=shadow.map.texture,_.uniforms.resolution.value=shadow.mapSize,_.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.mapPass),t.clear(),t.renderBufferDirect(n,null,o,_,M,null),x.uniforms.shadow_pass.value=shadow.mapPass.texture,x.uniforms.resolution.value=shadow.mapSize,x.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.map),t.clear(),t.renderBufferDirect(n,null,o,x,M,null)}function T(object,e,n,o){let l=null;const h=!0===n.isPointLight?object.customDistanceMaterial:object.customDepthMaterial;if(void 0!==h)l=h;else if(l=!0===n.isPointLight?d:f,t.localClippingEnabled&&!0===e.clipShadows&&Array.isArray(e.clippingPlanes)&&0!==e.clippingPlanes.length||e.displacementMap&&0!==e.displacementScale||e.alphaMap&&e.alphaTest>0||e.map&&e.alphaTest>0){const t=l.uuid,n=e.uuid;let r=m[t];void 0===r&&(r={},m[t]=r);let o=r[n];void 0===o&&(o=l.clone(),r[n]=o,e.addEventListener("dispose",P)),l=o}if(l.visible=e.visible,l.wireframe=e.wireframe,o===r.Dh?l.side=null!==e.shadowSide?e.shadowSide:e.side:l.side=null!==e.shadowSide?e.shadowSide:y[e.side],l.alphaMap=e.alphaMap,l.alphaTest=e.alphaTest,l.map=e.map,l.clipShadows=e.clipShadows,l.clippingPlanes=e.clippingPlanes,l.clipIntersection=e.clipIntersection,l.displacementMap=e.displacementMap,l.displacementScale=e.displacementScale,l.displacementBias=e.displacementBias,l.wireframeLinewidth=e.wireframeLinewidth,l.linewidth=e.linewidth,!0===n.isPointLight&&!0===l.isMeshDistanceMaterial){t.properties.get(l).light=n}return l}function C(object,n,l,h,c){if(!1===object.visible)return;if(object.layers.test(n.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&c===r.Dh)&&(!object.frustumCulled||o.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,object.matrixWorld);const r=e.update(object),o=object.material;if(Array.isArray(o)){const e=r.groups;for(let f=0,d=e.length;f<d;f++){const d=e[f],m=o[d.materialIndex];if(m&&m.visible){const e=T(object,m,h,c);object.onBeforeShadow(t,object,n,l,r,e,d),t.renderBufferDirect(l,null,r,e,object,d),object.onAfterShadow(t,object,n,l,r,e,d)}}}else if(o.visible){const e=T(object,o,h,c);object.onBeforeShadow(t,object,n,l,r,e,null),t.renderBufferDirect(l,null,r,e,object,null),object.onAfterShadow(t,object,n,l,r,e,null)}}const f=object.children;for(let i=0,t=f.length;i<t;i++)C(f[i],n,l,h,c)}function P(t){t.target.removeEventListener("dispose",P);for(const e in m){const n=m[e],r=t.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(e,n,f){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===e.length)return;const d=t.getRenderTarget(),m=t.getActiveCubeFace(),y=t.getActiveMipmapLevel(),_=t.state;_.setBlending(r.ve),_.buffers.color.setClear(1,1,1,1),_.buffers.depth.setTest(!0),_.setScissorTest(!1);const x=E!==r.Dh&&this.type===r.Dh,w=E===r.Dh&&this.type!==r.Dh;for(let i=0,d=e.length;i<d;i++){const d=e[i],shadow=d.shadow;if(void 0===shadow){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===shadow.autoUpdate&&!1===shadow.needsUpdate)continue;l.copy(shadow.mapSize);const m=shadow.getFrameExtents();if(l.multiply(m),h.copy(shadow.mapSize),(l.x>v||l.y>v)&&(l.x>v&&(h.x=Math.floor(v/m.x),l.x=h.x*m.x,shadow.mapSize.x=h.x),l.y>v&&(h.y=Math.floor(v/m.y),l.y=h.y*m.y,shadow.mapSize.y=h.y)),null===shadow.map||!0===x||!0===w){const t=this.type!==r.Dh?{minFilter:r.me,magFilter:r.me}:{};null!==shadow.map&&shadow.map.dispose(),shadow.map=new r.Oh(l.x,l.y,t),shadow.map.texture.name=d.name+".shadowMap",shadow.camera.updateProjectionMatrix()}t.setRenderTarget(shadow.map),t.clear();const y=shadow.getViewportCount();for(let t=0;t<y;t++){const e=shadow.getViewport(t);c.set(h.x*e.x,h.y*e.y,h.x*e.z,h.y*e.w),_.viewport(c),shadow.updateMatrices(d,t),o=shadow.getFrustum(),C(n,f,shadow.camera,d,this.type)}!0!==shadow.isPointLightShadow&&this.type===r.Dh&&A(shadow,f),shadow.needsUpdate=!1}E=this.type,S.needsUpdate=!1,t.setRenderTarget(d,m,y)}}const ze={[r.te]:r.i,[r.id]:r.xc,[r.dc]:r.Be,[r.kd]:r.zc,[r.i]:r.te,[r.xc]:r.id,[r.Be]:r.dc,[r.zc]:r.kd};function Ve(t,e){const n=new function(){let e=!1;const n=new r.Gh;let o=null;const l=new r.Gh(0,0,0,0);return{setMask:function(n){o===n||e||(t.colorMask(n,n,n,n),o=n)},setLocked:function(t){e=t},setClear:function(e,g,b,a,r){!0===r&&(e*=a,g*=a,b*=a),n.set(e,g,b,a),!1===l.equals(n)&&(t.clearColor(e,g,b,a),l.copy(n))},reset:function(){e=!1,o=null,l.set(-1,0,0,0)}}},o=new function(){let n=!1,o=!1,l=null,h=null,c=null;return{setReversed:function(t){if(o!==t){const t=e.get("EXT_clip_control");o?t.clipControlEXT(t.LOWER_LEFT_EXT,t.ZERO_TO_ONE_EXT):t.clipControlEXT(t.LOWER_LEFT_EXT,t.NEGATIVE_ONE_TO_ONE_EXT);const n=c;c=null,this.setClear(n)}o=t},getReversed:function(){return o},setTest:function(e){e?Z(t.DEPTH_TEST):K(t.DEPTH_TEST)},setMask:function(e){l===e||n||(t.depthMask(e),l=e)},setFunc:function(e){if(o&&(e=ze[e]),h!==e){switch(e){case r.te:t.depthFunc(t.NEVER);break;case r.i:t.depthFunc(t.ALWAYS);break;case r.id:t.depthFunc(t.LESS);break;case r.kd:t.depthFunc(t.LEQUAL);break;case r.dc:t.depthFunc(t.EQUAL);break;case r.zc:t.depthFunc(t.GEQUAL);break;case r.xc:t.depthFunc(t.GREATER);break;case r.Be:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}h=e}},setLocked:function(t){n=t},setClear:function(e){c!==e&&(o&&(e=1-e),t.clearDepth(e),c=e)},reset:function(){n=!1,l=null,h=null,c=null,o=!1}}},l=new function(){let e=!1,n=null,r=null,o=null,l=null,h=null,c=null,f=null,d=null;return{setTest:function(n){e||(n?Z(t.STENCIL_TEST):K(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,h){r===e&&o===n&&l===h||(t.stencilFunc(e,n,h),r=e,o=n,l=h)},setOp:function(e,n,r){h===e&&c===n&&f===r||(t.stencilOp(e,n,r),h=e,c=n,f=r)},setLocked:function(t){e=t},setClear:function(e){d!==e&&(t.clearStencil(e),d=e)},reset:function(){e=!1,n=null,r=null,o=null,l=null,h=null,c=null,f=null,d=null}}},h=new WeakMap,c=new WeakMap;let f={},d={},m=new WeakMap,v=[],y=null,_=!1,x=null,w=null,M=null,S=null,E=null,A=null,T=null,C=new r.ab(0,0,0),P=0,R=!1,I=null,k=null,D=null,L=null,F=null;const O=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,B=0;const U=t.getParameter(t.VERSION);-1!==U.indexOf("WebGL")?(B=parseFloat(/^WebGL (\d)/.exec(U)[1]),N=B>=1):-1!==U.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),N=B>=2);let z=null,V={};const j=t.getParameter(t.SCISSOR_BOX),H=t.getParameter(t.VIEWPORT),G=(new r.Gh).fromArray(j),W=(new r.Gh).fromArray(H);function X(e,n,r,o){const data=new Uint8Array(4),l=t.createTexture();t.bindTexture(e,l),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let i=0;i<r;i++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,data):t.texImage2D(n+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,data);return l}const Y={};function Z(e){!0!==f[e]&&(t.enable(e),f[e]=!0)}function K(e){!1!==f[e]&&(t.disable(e),f[e]=!1)}Y[t.TEXTURE_2D]=X(t.TEXTURE_2D,t.TEXTURE_2D,1),Y[t.TEXTURE_CUBE_MAP]=X(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Y[t.TEXTURE_2D_ARRAY]=X(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Y[t.TEXTURE_3D]=X(t.TEXTURE_3D,t.TEXTURE_3D,1,1),n.setClear(0,0,0,1),o.setClear(1),l.setClear(0),Z(t.DEPTH_TEST),o.setFunc(r.kd),tt(!1),et(r.ub),Z(t.CULL_FACE),Q(r.ve);const $={[r.b]:t.FUNC_ADD,[r.Yg]:t.FUNC_SUBTRACT,[r.mg]:t.FUNC_REVERSE_SUBTRACT};$[r.he]=t.MIN,$[r.Vd]=t.MAX;const J={[r.Uh]:t.ZERO,[r.Ie]:t.ONE,[r.Pg]:t.SRC_COLOR,[r.Ng]:t.SRC_ALPHA,[r.Og]:t.SRC_ALPHA_SATURATE,[r.Wb]:t.DST_COLOR,[r.Vb]:t.DST_ALPHA,[r.Oe]:t.ONE_MINUS_SRC_COLOR,[r.Ne]:t.ONE_MINUS_SRC_ALPHA,[r.Me]:t.ONE_MINUS_DST_COLOR,[r.Le]:t.ONE_MINUS_DST_ALPHA,[r.jb]:t.CONSTANT_COLOR,[r.Ke]:t.ONE_MINUS_CONSTANT_COLOR,[r.ib]:t.CONSTANT_ALPHA,[r.Je]:t.ONE_MINUS_CONSTANT_ALPHA};function Q(e,n,o,l,h,c,f,d,m,v){if(e!==r.ve){if(!1===_&&(Z(t.BLEND),_=!0),e===r.Ab)h=h||n,c=c||o,f=f||l,n===w&&h===E||(t.blendEquationSeparate($[n],$[h]),w=n,E=h),o===M&&l===S&&c===A&&f===T||(t.blendFuncSeparate(J[o],J[l],J[c],J[f]),M=o,S=l,A=c,T=f),!1!==d.equals(C)&&m===P||(t.blendColor(d.r,d.g,d.b,m),C.copy(d),P=m),x=e,R=!1;else if(e!==x||v!==R){if(w===r.b&&E===r.b||(t.blendEquation(t.FUNC_ADD),w=r.b,E=r.b),v)switch(e){case r.ze:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.e:t.blendFunc(t.ONE,t.ONE);break;case r.Zg:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r.ke:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case r.ze:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.e:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case r.Zg:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r.ke:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}M=null,S=null,A=null,T=null,C.set(0,0,0),P=0,x=e,R=v}}else!0===_&&(K(t.BLEND),_=!1)}function tt(e){I!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),I=e)}function et(e){e!==r.xb?(Z(t.CULL_FACE),e!==k&&(e===r.ub?t.cullFace(t.BACK):e===r.vb?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):K(t.CULL_FACE),k=e}function nt(e,n,r){e?(Z(t.POLYGON_OFFSET_FILL),L===n&&F===r||(t.polygonOffset(n,r),L=n,F=r)):K(t.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:o,stencil:l},enable:Z,disable:K,bindFramebuffer:function(e,n){return d[e]!==n&&(t.bindFramebuffer(e,n),d[e]=n,e===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let r=v,o=!1;if(e){r=m.get(n),void 0===r&&(r=[],m.set(n,r));const l=e.textures;if(r.length!==l.length||r[0]!==t.COLOR_ATTACHMENT0){for(let i=0,e=l.length;i<e;i++)r[i]=t.COLOR_ATTACHMENT0+i;r.length=l.length,o=!0}}else r[0]!==t.BACK&&(r[0]=t.BACK,o=!0);o&&t.drawBuffers(r)},useProgram:function(e){return y!==e&&(t.useProgram(e),y=e,!0)},setBlending:Q,setMaterial:function(e,h){e.side===r.Ub?K(t.CULL_FACE):Z(t.CULL_FACE);let c=e.side===r.B;h&&(c=!c),tt(c),e.blending===r.ze&&!1===e.transparent?Q(r.ve):Q(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),n.setMask(e.colorWrite);const f=e.stencilWrite;l.setTest(f),f&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),nt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Z(t.SAMPLE_ALPHA_TO_COVERAGE):K(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:tt,setCullFace:et,setLineWidth:function(e){e!==D&&(N&&t.lineWidth(e),D=e)},setPolygonOffset:nt,setScissorTest:function(e){e?Z(t.SCISSOR_TEST):K(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+O-1),z!==e&&(t.activeTexture(e),z=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===z?t.TEXTURE0+O-1:z);let o=V[r];void 0===o&&(o={type:void 0,texture:void 0},V[r]=o),o.type===e&&o.texture===n||(z!==r&&(t.activeTexture(r),z=r),t.bindTexture(e,n||Y[e]),o.type=e,o.texture=n)},unbindTexture:function(){const e=V[z];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));let o=r.get(e);void 0===o&&(o=t.getUniformBlockIndex(n,e.name),r.set(e,o))},uniformBlockBinding:function(e,n){const r=c.get(n).get(e);h.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),h.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===G.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),G.copy(e))},viewport:function(e){!1===W.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),W.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},z=null,V={},d={},m=new WeakMap,v=[],y=null,_=!1,x=null,w=null,M=null,S=null,E=null,A=null,T=null,C=new r.ab(0,0,0),P=0,R=!1,I=null,k=null,D=null,L=null,F=null,G.set(0,0,t.canvas.width,t.canvas.height),W.set(0,0,t.canvas.width,t.canvas.height),n.reset(),o.reset(),l.reset()}}}function je(t,e,n,o,l,h,c){const f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new r.Eh,v=new WeakMap;let y;const _=new WeakMap;let x=!1;try{x="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function w(t,e){return x?new OffscreenCanvas(t,e):Object(r.ai)("canvas")}function M(image,t,e){let n=1;const r=K(image);if((r.width>e||r.height>e)&&(n=e/Math.max(r.width,r.height)),n<1){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&image instanceof VideoFrame){const e=Math.floor(n*r.width),o=Math.floor(n*r.height);void 0===y&&(y=w(e,o));const canvas=t?w(e,o):y;canvas.width=e,canvas.height=o;return canvas.getContext("2d").drawImage(image,0,0,e,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+e+"x"+o+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),image}return image}function S(t){return t.generateMipmaps}function E(e){t.generateMipmap(e)}function A(e){return e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:e.isWebGL3DRenderTarget?t.TEXTURE_3D:e.isWebGLArrayRenderTarget||e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function T(n,o,l,h,c=!1){if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let f=o;if(o===t.RED&&(l===t.FLOAT&&(f=t.R32F),l===t.HALF_FLOAT&&(f=t.R16F),l===t.UNSIGNED_BYTE&&(f=t.R8)),o===t.RED_INTEGER&&(l===t.UNSIGNED_BYTE&&(f=t.R8UI),l===t.UNSIGNED_SHORT&&(f=t.R16UI),l===t.UNSIGNED_INT&&(f=t.R32UI),l===t.BYTE&&(f=t.R8I),l===t.SHORT&&(f=t.R16I),l===t.INT&&(f=t.R32I)),o===t.RG&&(l===t.FLOAT&&(f=t.RG32F),l===t.HALF_FLOAT&&(f=t.RG16F),l===t.UNSIGNED_BYTE&&(f=t.RG8)),o===t.RG_INTEGER&&(l===t.UNSIGNED_BYTE&&(f=t.RG8UI),l===t.UNSIGNED_SHORT&&(f=t.RG16UI),l===t.UNSIGNED_INT&&(f=t.RG32UI),l===t.BYTE&&(f=t.RG8I),l===t.SHORT&&(f=t.RG16I),l===t.INT&&(f=t.RG32I)),o===t.RGB_INTEGER&&(l===t.UNSIGNED_BYTE&&(f=t.RGB8UI),l===t.UNSIGNED_SHORT&&(f=t.RGB16UI),l===t.UNSIGNED_INT&&(f=t.RGB32UI),l===t.BYTE&&(f=t.RGB8I),l===t.SHORT&&(f=t.RGB16I),l===t.INT&&(f=t.RGB32I)),o===t.RGBA_INTEGER&&(l===t.UNSIGNED_BYTE&&(f=t.RGBA8UI),l===t.UNSIGNED_SHORT&&(f=t.RGBA16UI),l===t.UNSIGNED_INT&&(f=t.RGBA32UI),l===t.BYTE&&(f=t.RGBA8I),l===t.SHORT&&(f=t.RGBA16I),l===t.INT&&(f=t.RGBA32I)),o===t.RGB&&l===t.UNSIGNED_INT_5_9_9_9_REV&&(f=t.RGB9_E5),o===t.RGBA){const e=c?r.Fd:r.cb.getTransfer(h);l===t.FLOAT&&(f=t.RGBA32F),l===t.HALF_FLOAT&&(f=t.RGBA16F),l===t.UNSIGNED_BYTE&&(f=e===r.rg?t.SRGB8_ALPHA8:t.RGBA8),l===t.UNSIGNED_SHORT_4_4_4_4&&(f=t.RGBA4),l===t.UNSIGNED_SHORT_5_5_5_1&&(f=t.RGB5_A1)}return f!==t.R16F&&f!==t.R32F&&f!==t.RG16F&&f!==t.RG32F&&f!==t.RGBA16F&&f!==t.RGBA32F||e.get("EXT_color_buffer_float"),f}function C(e,n){let o;return e?null===n||n===r.zh||n===r.xh?o=t.DEPTH24_STENCIL8:n===r.nc?o=t.DEPTH32F_STENCIL8:n===r.Ch&&(o=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===r.zh||n===r.xh?o=t.DEPTH_COMPONENT24:n===r.nc?o=t.DEPTH_COMPONENT32F:n===r.Ch&&(o=t.DEPTH_COMPONENT16),o}function P(t,image){return!0===S(t)||t.isFramebufferTexture&&t.minFilter!==r.me&&t.minFilter!==r.xd?Math.log2(Math.max(image.width,image.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?image.mipmaps.length:1}function R(t){const e=t.target;e.removeEventListener("dispose",R),function(t){const e=o.get(t);if(void 0===e.__webglInit)return;const source=t.source,n=_.get(source);if(n){const r=n[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&k(t),0===Object.keys(n).length&&_.delete(source)}o.remove(t)}(e),e.isVideoTexture&&v.delete(e)}function I(e){const n=e.target;n.removeEventListener("dispose",I),function(e){const n=o.get(e);e.depthTexture&&(e.depthTexture.dispose(),o.remove(e.depthTexture));if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let e=0;e<n.__webglFramebuffer[i].length;e++)t.deleteFramebuffer(n.__webglFramebuffer[i][e]);else t.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let i=0;i<n.__webglColorRenderbuffer.length;i++)n.__webglColorRenderbuffer[i]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[i]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=e.textures;for(let i=0,e=r.length;i<e;i++){const e=o.get(r[i]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),c.memory.textures--),o.remove(r[i])}o.remove(e)}(n)}function k(e){const n=o.get(e);t.deleteTexture(n.__webglTexture);const source=e.source;delete _.get(source)[n.__cacheKey],c.memory.textures--}let D=0;function L(e,slot){const r=o.get(e);if(e.isVideoTexture&&function(t){const e=c.render.frame;v.get(t)!==e&&(v.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){const image=e.image;if(null===image)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==image.complete)return void z(r,e,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,r.__webglTexture,t.TEXTURE0+slot)}const F={[r.kg]:t.REPEAT,[r.Y]:t.CLAMP_TO_EDGE,[r.ie]:t.MIRRORED_REPEAT},O={[r.me]:t.NEAREST,[r.qe]:t.NEAREST_MIPMAP_NEAREST,[r.pe]:t.NEAREST_MIPMAP_LINEAR,[r.xd]:t.LINEAR,[r.Cd]:t.LINEAR_MIPMAP_NEAREST,[r.Bd]:t.LINEAR_MIPMAP_LINEAR},N={[r.se]:t.NEVER,[r.h]:t.ALWAYS,[r.hd]:t.LESS,[r.jd]:t.LEQUAL,[r.cc]:t.EQUAL,[r.yc]:t.GEQUAL,[r.wc]:t.GREATER,[r.Ae]:t.NOTEQUAL};function B(n,h){if(h.type!==r.nc||!1!==e.has("OES_texture_float_linear")||h.magFilter!==r.xd&&h.magFilter!==r.Cd&&h.magFilter!==r.pe&&h.magFilter!==r.Bd&&h.minFilter!==r.xd&&h.minFilter!==r.Cd&&h.minFilter!==r.pe&&h.minFilter!==r.Bd||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(n,t.TEXTURE_WRAP_S,F[h.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,F[h.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,F[h.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,O[h.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,O[h.minFilter]),h.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,N[h.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(h.magFilter===r.me)return;if(h.minFilter!==r.pe&&h.minFilter!==r.Bd)return;if(h.type===r.nc&&!1===e.has("OES_texture_float_linear"))return;if(h.anisotropy>1||o.get(h).__currentAnisotropy){const r=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(h.anisotropy,l.getMaxAnisotropy())),o.get(h).__currentAnisotropy=h.anisotropy}}}function U(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",R));const source=n.source;let o=_.get(source);void 0===o&&(o={},_.set(source,o));const l=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(l!==e.__cacheKey){void 0===o[l]&&(o[l]={texture:t.createTexture(),usedTimes:0},c.memory.textures++,r=!0),o[l].usedTimes++;const h=o[e.__cacheKey];void 0!==h&&(o[e.__cacheKey].usedTimes--,0===h.usedTimes&&k(n)),e.__cacheKey=l,e.__webglTexture=o[l].texture}return r}function z(e,c,slot){let f=t.TEXTURE_2D;(c.isDataArrayTexture||c.isCompressedArrayTexture)&&(f=t.TEXTURE_2D_ARRAY),c.isData3DTexture&&(f=t.TEXTURE_3D);const d=U(e,c),source=c.source;n.bindTexture(f,e.__webglTexture,t.TEXTURE0+slot);const m=o.get(source);if(source.version!==m.__version||!0===d){n.activeTexture(t.TEXTURE0+slot);const e=r.cb.getPrimaries(r.cb.workingColorSpace),o=c.colorSpace===r.we?null:r.cb.getPrimaries(c.colorSpace),v=c.colorSpace===r.we||e===o?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,c.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,c.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,v);let image=M(c.image,!1,l.maxTextureSize);image=Z(c,image);const y=h.convert(c.format,c.colorSpace),_=h.convert(c.type);let x,w=T(c.internalFormat,y,_,c.colorSpace,c.isVideoTexture);B(f,c);const A=c.mipmaps,R=!0!==c.isVideoTexture,I=void 0===m.__version||!0===d,k=source.dataReady,D=P(c,image);if(c.isDepthTexture)w=C(c.format===r.Nb,c.type),I&&(R?n.texStorage2D(t.TEXTURE_2D,1,w,image.width,image.height):n.texImage2D(t.TEXTURE_2D,0,w,image.width,image.height,0,y,_,null));else if(c.isDataTexture)if(A.length>0){R&&I&&n.texStorage2D(t.TEXTURE_2D,D,w,A[0].width,A[0].height);for(let i=0,e=A.length;i<e;i++)x=A[i],R?k&&n.texSubImage2D(t.TEXTURE_2D,i,0,0,x.width,x.height,y,_,x.data):n.texImage2D(t.TEXTURE_2D,i,w,x.width,x.height,0,y,_,x.data);c.generateMipmaps=!1}else R?(I&&n.texStorage2D(t.TEXTURE_2D,D,w,image.width,image.height),k&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,image.width,image.height,y,_,image.data)):n.texImage2D(t.TEXTURE_2D,0,w,image.width,image.height,0,y,_,image.data);else if(c.isCompressedTexture)if(c.isCompressedArrayTexture){R&&I&&n.texStorage3D(t.TEXTURE_2D_ARRAY,D,w,A[0].width,A[0].height,image.depth);for(let i=0,e=A.length;i<e;i++)if(x=A[i],c.format!==r.qf)if(null!==y)if(R){if(k)if(c.layerUpdates.size>0){const e=Object(r.bi)(x.width,x.height,c.format,c.type);for(const r of c.layerUpdates){const o=x.data.subarray(r*e/x.data.BYTES_PER_ELEMENT,(r+1)*e/x.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,r,x.width,x.height,1,y,o)}c.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,0,x.width,x.height,image.depth,y,x.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,i,w,x.width,x.height,image.depth,0,x.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else R?k&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,0,x.width,x.height,image.depth,y,_,x.data):n.texImage3D(t.TEXTURE_2D_ARRAY,i,w,x.width,x.height,image.depth,0,y,_,x.data)}else{R&&I&&n.texStorage2D(t.TEXTURE_2D,D,w,A[0].width,A[0].height);for(let i=0,e=A.length;i<e;i++)x=A[i],c.format!==r.qf?null!==y?R?k&&n.compressedTexSubImage2D(t.TEXTURE_2D,i,0,0,x.width,x.height,y,x.data):n.compressedTexImage2D(t.TEXTURE_2D,i,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?k&&n.texSubImage2D(t.TEXTURE_2D,i,0,0,x.width,x.height,y,_,x.data):n.texImage2D(t.TEXTURE_2D,i,w,x.width,x.height,0,y,_,x.data)}else if(c.isDataArrayTexture)if(R){if(I&&n.texStorage3D(t.TEXTURE_2D_ARRAY,D,w,image.width,image.height,image.depth),k)if(c.layerUpdates.size>0){const e=Object(r.bi)(image.width,image.height,c.format,c.type);for(const r of c.layerUpdates){const o=image.data.subarray(r*e/image.data.BYTES_PER_ELEMENT,(r+1)*e/image.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,r,image.width,image.height,1,y,_,o)}c.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,image.width,image.height,image.depth,y,_,image.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,w,image.width,image.height,image.depth,0,y,_,image.data);else if(c.isData3DTexture)R?(I&&n.texStorage3D(t.TEXTURE_3D,D,w,image.width,image.height,image.depth),k&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,image.width,image.height,image.depth,y,_,image.data)):n.texImage3D(t.TEXTURE_3D,0,w,image.width,image.height,image.depth,0,y,_,image.data);else if(c.isFramebufferTexture){if(I)if(R)n.texStorage2D(t.TEXTURE_2D,D,w,image.width,image.height);else{let e=image.width,r=image.height;for(let i=0;i<D;i++)n.texImage2D(t.TEXTURE_2D,i,w,e,r,0,y,_,null),e>>=1,r>>=1}}else if(A.length>0){if(R&&I){const e=K(A[0]);n.texStorage2D(t.TEXTURE_2D,D,w,e.width,e.height)}for(let i=0,e=A.length;i<e;i++)x=A[i],R?k&&n.texSubImage2D(t.TEXTURE_2D,i,0,0,y,_,x):n.texImage2D(t.TEXTURE_2D,i,w,y,_,x);c.generateMipmaps=!1}else if(R){if(I){const e=K(image);n.texStorage2D(t.TEXTURE_2D,D,w,e.width,e.height)}k&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,y,_,image)}else n.texImage2D(t.TEXTURE_2D,0,w,y,_,image);S(c)&&E(f),m.__version=source.version,c.onUpdate&&c.onUpdate(c)}e.__version=c.version}function V(e,r,l,c,d,m){const v=h.convert(l.format,l.colorSpace),y=h.convert(l.type),_=T(l.internalFormat,v,y,l.colorSpace),x=o.get(r),w=o.get(l);if(w.__renderTarget=r,!x.__hasExternalTextures){const e=Math.max(1,r.width>>m),o=Math.max(1,r.height>>m);d===t.TEXTURE_3D||d===t.TEXTURE_2D_ARRAY?n.texImage3D(d,m,_,e,o,r.depth,0,v,y,null):n.texImage2D(d,m,_,e,o,0,v,y,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),Y(r)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,c,d,w.__webglTexture,0,X(r)):(d===t.TEXTURE_2D||d>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&d<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,c,d,w.__webglTexture,m),n.bindFramebuffer(t.FRAMEBUFFER,null)}function j(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer){const o=n.depthTexture,l=o&&o.isDepthTexture?o.type:null,h=C(n.stencilBuffer,l),c=n.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,d=X(n);Y(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,d,h,n.width,n.height):r?t.renderbufferStorageMultisample(t.RENDERBUFFER,d,h,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,h,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,c,t.RENDERBUFFER,e)}else{const e=n.textures;for(let i=0;i<e.length;i++){const o=e[i],l=h.convert(o.format,o.colorSpace),c=h.convert(o.type),d=T(o.internalFormat,l,c,o.colorSpace),m=X(n);r&&!1===Y(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,m,d,n.width,n.height):Y(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,m,d,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,d,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function H(e){const l=o.get(e),h=!0===e.isWebGLCubeRenderTarget;if(l.__boundDepthTexture!==e.depthTexture){const t=e.depthTexture;if(l.__depthDisposeCallback&&l.__depthDisposeCallback(),t){const e=()=>{delete l.__boundDepthTexture,delete l.__depthDisposeCallback,t.removeEventListener("dispose",e)};t.addEventListener("dispose",e),l.__depthDisposeCallback=e}l.__boundDepthTexture=t}if(e.depthTexture&&!l.__autoAllocateDepthBuffer){if(h)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,l){if(l&&l.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!l.depthTexture||!l.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const h=o.get(l.depthTexture);h.__renderTarget=l,h.__webglTexture&&l.depthTexture.image.width===l.width&&l.depthTexture.image.height===l.height||(l.depthTexture.image.width=l.width,l.depthTexture.image.height=l.height,l.depthTexture.needsUpdate=!0),L(l.depthTexture,0);const c=h.__webglTexture,d=X(l);if(l.depthTexture.format===r.Mb)Y(l)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,c,0,d):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,c,0);else{if(l.depthTexture.format!==r.Nb)throw new Error("Unknown depthTexture format");Y(l)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,c,0,d):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,c,0)}}(l.__webglFramebuffer,e)}else if(h){l.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(t.FRAMEBUFFER,l.__webglFramebuffer[i]),void 0===l.__webglDepthbuffer[i])l.__webglDepthbuffer[i]=t.createRenderbuffer(),j(l.__webglDepthbuffer[i],e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,r=l.__webglDepthbuffer[i];t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,r)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,l.__webglFramebuffer),void 0===l.__webglDepthbuffer)l.__webglDepthbuffer=t.createRenderbuffer(),j(l.__webglDepthbuffer,e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,r=l.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,r)}n.bindFramebuffer(t.FRAMEBUFFER,null)}const G=[],W=[];function X(t){return Math.min(l.maxSamples,t.samples)}function Y(t){const n=o.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Z(t,image){const e=t.colorSpace,n=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||e!==r.Dd&&e!==r.we&&(r.cb.getTransfer(e)===r.rg?n===r.qf&&o===r.wh||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",e)),image}function K(image){return"undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement?(m.width=image.naturalWidth||image.width,m.height=image.naturalHeight||image.height):"undefined"!=typeof VideoFrame&&image instanceof VideoFrame?(m.width=image.displayWidth,m.height=image.displayHeight):(m.width=image.width,m.height=image.height),m}this.allocateTextureUnit=function(){const t=D;return t>=l.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l.maxTextures),D+=1,t},this.resetTextureUnits=function(){D=0},this.setTexture2D=L,this.setTexture2DArray=function(e,slot){const r=o.get(e);e.version>0&&r.__version!==e.version?z(r,e,slot):n.bindTexture(t.TEXTURE_2D_ARRAY,r.__webglTexture,t.TEXTURE0+slot)},this.setTexture3D=function(e,slot){const r=o.get(e);e.version>0&&r.__version!==e.version?z(r,e,slot):n.bindTexture(t.TEXTURE_3D,r.__webglTexture,t.TEXTURE0+slot)},this.setTextureCube=function(e,slot){const c=o.get(e);e.version>0&&c.__version!==e.version?function(e,c,slot){if(6!==c.image.length)return;const f=U(e,c),source=c.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+slot);const d=o.get(source);if(source.version!==d.__version||!0===f){n.activeTexture(t.TEXTURE0+slot);const e=r.cb.getPrimaries(r.cb.workingColorSpace),o=c.colorSpace===r.we?null:r.cb.getPrimaries(c.colorSpace),m=c.colorSpace===r.we||e===o?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,c.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,c.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,m);const v=c.isCompressedTexture||c.image[0].isCompressedTexture,y=c.image[0]&&c.image[0].isDataTexture,_=[];for(let i=0;i<6;i++)_[i]=v||y?y?c.image[i].image:c.image[i]:M(c.image[i],!0,l.maxCubemapSize),_[i]=Z(c,_[i]);const image=_[0],x=h.convert(c.format,c.colorSpace),w=h.convert(c.type),A=T(c.internalFormat,x,w,c.colorSpace),C=!0!==c.isVideoTexture,R=void 0===d.__version||!0===f,I=source.dataReady;let k,D=P(c,image);if(B(t.TEXTURE_CUBE_MAP,c),v){C&&R&&n.texStorage2D(t.TEXTURE_CUBE_MAP,D,A,image.width,image.height);for(let i=0;i<6;i++){k=_[i].mipmaps;for(let e=0;e<k.length;e++){const o=k[e];c.format!==r.qf?null!==x?C?I&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e,0,0,o.width,o.height,x,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e,A,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):C?I&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e,0,0,o.width,o.height,x,w,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e,A,o.width,o.height,0,x,w,o.data)}}}else{if(k=c.mipmaps,C&&R){k.length>0&&D++;const e=K(_[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,D,A,e.width,e.height)}for(let i=0;i<6;i++)if(y){C?I&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,_[i].width,_[i].height,x,w,_[i].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,A,_[i].width,_[i].height,0,x,w,_[i].data);for(let e=0;e<k.length;e++){const r=k[e].image[i].image;C?I&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e+1,0,0,r.width,r.height,x,w,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e+1,A,r.width,r.height,0,x,w,r.data)}}else{C?I&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,x,w,_[i]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,A,x,w,_[i]);for(let e=0;e<k.length;e++){const r=k[e];C?I&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e+1,0,0,x,w,r.image[i]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,e+1,A,x,w,r.image[i])}}}S(c)&&E(t.TEXTURE_CUBE_MAP),d.__version=source.version,c.onUpdate&&c.onUpdate(c)}e.__version=c.version}(c,e,slot):n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture,t.TEXTURE0+slot)},this.rebindTextures=function(e,n,r){const l=o.get(e);void 0!==n&&V(l.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==r&&H(e)},this.setupRenderTarget=function(e){const r=e.texture,l=o.get(e),f=o.get(r);e.addEventListener("dispose",I);const d=e.textures,m=!0===e.isWebGLCubeRenderTarget,v=d.length>1;if(v||(void 0===f.__webglTexture&&(f.__webglTexture=t.createTexture()),f.__version=r.version,c.memory.textures++),m){l.__webglFramebuffer=[];for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0){l.__webglFramebuffer[i]=[];for(let e=0;e<r.mipmaps.length;e++)l.__webglFramebuffer[i][e]=t.createFramebuffer()}else l.__webglFramebuffer[i]=t.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){l.__webglFramebuffer=[];for(let e=0;e<r.mipmaps.length;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else l.__webglFramebuffer=t.createFramebuffer();if(v)for(let i=0,e=d.length;i<e;i++){const e=o.get(d[i]);void 0===e.__webglTexture&&(e.__webglTexture=t.createTexture(),c.memory.textures++)}if(e.samples>0&&!1===Y(e)){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(let i=0;i<d.length;i++){const n=d[i];l.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,l.__webglColorRenderbuffer[i]);const r=h.convert(n.format,n.colorSpace),o=h.convert(n.type),c=T(n.internalFormat,r,o,n.colorSpace,!0===e.isXRRenderTarget),f=X(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,f,c,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,l.__webglColorRenderbuffer[i])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),j(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(m){n.bindTexture(t.TEXTURE_CUBE_MAP,f.__webglTexture),B(t.TEXTURE_CUBE_MAP,r);for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)V(l.__webglFramebuffer[i][n],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,n);else V(l.__webglFramebuffer[i],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);S(r)&&E(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(v){for(let i=0,r=d.length;i<r;i++){const r=d[i],h=o.get(r);n.bindTexture(t.TEXTURE_2D,h.__webglTexture),B(t.TEXTURE_2D,r),V(l.__webglFramebuffer,e,r,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,0),S(r)&&E(t.TEXTURE_2D)}n.unbindTexture()}else{let o=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(o,f.__webglTexture),B(o,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)V(l.__webglFramebuffer[n],e,r,t.COLOR_ATTACHMENT0,o,n);else V(l.__webglFramebuffer,e,r,t.COLOR_ATTACHMENT0,o,0);S(r)&&E(o),n.unbindTexture()}e.depthBuffer&&H(e)},this.updateRenderTargetMipmap=function(t){const e=t.textures;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(S(r)){const e=A(t),l=o.get(r).__webglTexture;n.bindTexture(e,l),E(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===Y(e)){const r=e.textures,l=e.width,h=e.height;let mask=t.COLOR_BUFFER_BIT;const c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,f=o.get(e),m=r.length>1;if(m)for(let i=0;i<r.length;i++)n.bindFramebuffer(t.FRAMEBUFFER,f.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,f.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,f.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,f.__webglFramebuffer);for(let i=0;i<r.length;i++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(mask|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(mask|=t.STENCIL_BUFFER_BIT)),m){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,f.__webglColorRenderbuffer[i]);const e=o.get(r[i]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,l,h,0,0,l,h,mask,t.NEAREST),!0===d&&(G.length=0,W.length=0,G.push(t.COLOR_ATTACHMENT0+i),e.depthBuffer&&!1===e.resolveDepthBuffer&&(G.push(c),W.push(c),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,W)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,G))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),m)for(let i=0;i<r.length;i++){n.bindFramebuffer(t.FRAMEBUFFER,f.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,f.__webglColorRenderbuffer[i]);const e=o.get(r[i]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,f.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,e,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,f.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&d){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=H,this.setupFrameBufferTexture=V,this.useMultisampledRTT=Y}function He(t,e){return{convert:function(p,n=r.we){let o;const l=r.cb.getTransfer(n);if(p===r.wh)return t.UNSIGNED_BYTE;if(p===r.Ah)return t.UNSIGNED_SHORT_4_4_4_4;if(p===r.Bh)return t.UNSIGNED_SHORT_5_5_5_1;if(p===r.yh)return t.UNSIGNED_INT_5_9_9_9_REV;if(p===r.P)return t.BYTE;if(p===r.zg)return t.SHORT;if(p===r.Ch)return t.UNSIGNED_SHORT;if(p===r.Uc)return t.INT;if(p===r.zh)return t.UNSIGNED_INT;if(p===r.nc)return t.FLOAT;if(p===r.Ec)return t.HALF_FLOAT;if(p===r.g)return t.ALPHA;if(p===r.Of)return t.RGB;if(p===r.qf)return t.RGBA;if(p===r.Nd)return t.LUMINANCE;if(p===r.Md)return t.LUMINANCE_ALPHA;if(p===r.Mb)return t.DEPTH_COMPONENT;if(p===r.Nb)return t.DEPTH_STENCIL;if(p===r.eg)return t.RED;if(p===r.fg)return t.RED_INTEGER;if(p===r.Yf)return t.RG;if(p===r.Zf)return t.RG_INTEGER;if(p===r.rf)return t.RGBA_INTEGER;if(p===r.Wf||p===r.Kf||p===r.Lf||p===r.Mf)if(l===r.rg){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(p===r.Wf)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===r.Kf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===r.Lf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===r.Mf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(p===r.Wf)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===r.Kf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===r.Lf)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===r.Mf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===r.Vf||p===r.Uf||p===r.Jf||p===r.If){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(p===r.Vf)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===r.Uf)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===r.Jf)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===r.If)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===r.Sf||p===r.Tf||p===r.Hf){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(p===r.Sf||p===r.Tf)return l===r.rg?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(p===r.Hf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(p===r.yf||p===r.zf||p===r.Af||p===r.Bf||p===r.Cf||p===r.Df||p===r.Ef||p===r.Ff||p===r.tf||p===r.uf||p===r.vf||p===r.sf||p===r.wf||p===r.xf){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(p===r.yf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===r.zf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===r.Af)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===r.Bf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===r.Cf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===r.Df)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===r.Ef)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===r.Ff)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===r.tf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===r.uf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===r.vf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===r.sf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===r.wf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===r.xf)return l===r.rg?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===r.Gf||p===r.Qf||p===r.Rf){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(p===r.Gf)return l===r.rg?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(p===r.Qf)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(p===r.Rf)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(p===r.nf||p===r.pg||p===r.mf||p===r.og){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(p===r.Gf)return o.COMPRESSED_RED_RGTC1_EXT;if(p===r.pg)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(p===r.mf)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(p===r.og)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return p===r.xh?t.UNSIGNED_INT_24_8:void 0!==t[p]?t[p]:null}}}class Ge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const o=new r.dh;t.properties.get(o).__webglTexture=e.texture,e.depthNear===n.depthNear&&e.depthFar===n.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=o}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new r.tg({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new r.Wd(new r.Ve(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class We extends r.ic{constructor(t,e){super();const n=this;let l=null,h=1,c=null,f="local-floor",d=1,m=null,v=null,y=null,_=null,x=null,w=null;const M=new Ge,S=e.getContextAttributes();let E=null,A=null;const T=[],C=[],P=new r.Eh;let R=null;const I=new r.Te;I.viewport=new r.Gh;const k=new r.Te;k.viewport=new r.Gh;const D=[I,k],L=new r.s;let F=null,O=null;function N(t){const e=C.indexOf(t.inputSource);if(-1===e)return;const n=T[e];void 0!==n&&(n.update(t.inputSource,t.frame,m||c),n.dispatchEvent({type:t.type,data:t.inputSource}))}function B(){l.removeEventListener("select",N),l.removeEventListener("selectstart",N),l.removeEventListener("selectend",N),l.removeEventListener("squeeze",N),l.removeEventListener("squeezestart",N),l.removeEventListener("squeezeend",N),l.removeEventListener("end",B),l.removeEventListener("inputsourceschange",U);for(let i=0;i<T.length;i++){const t=C[i];null!==t&&(C[i]=null,T[i].disconnect(t))}F=null,O=null,M.reset(),t.setRenderTarget(E),x=null,_=null,y=null,l=null,A=null,G.stop(),n.isPresenting=!1,t.setPixelRatio(R),t.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}function U(t){for(let i=0;i<t.removed.length;i++){const e=t.removed[i],n=C.indexOf(e);n>=0&&(C[n]=null,T[n].disconnect(e))}for(let i=0;i<t.added.length;i++){const e=t.added[i];let n=C.indexOf(e);if(-1===n){for(let i=0;i<T.length;i++){if(i>=C.length){C.push(e),n=i;break}if(null===C[i]){C[i]=e,n=i;break}}if(-1===n)break}const r=T[n];r&&r.connect(e)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=T[t];return void 0===e&&(e=new r.Qh,T[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=T[t];return void 0===e&&(e=new r.Qh,T[t]=e),e.getGripSpace()},this.getHand=function(t){let e=T[t];return void 0===e&&(e=new r.Qh,T[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){h=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){f=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||c},this.setReferenceSpace=function(t){m=t},this.getBaseLayer=function(){return null!==_?_:x},this.getBinding=function(){return y},this.getFrame=function(){return w},this.getSession=function(){return l},this.setSession=async function(o){if(l=o,null!==l){E=t.getRenderTarget(),l.addEventListener("select",N),l.addEventListener("selectstart",N),l.addEventListener("selectend",N),l.addEventListener("squeeze",N),l.addEventListener("squeezestart",N),l.addEventListener("squeezeend",N),l.addEventListener("end",B),l.addEventListener("inputsourceschange",U),!0!==S.xrCompatible&&await e.makeXRCompatible(),R=t.getPixelRatio(),t.getSize(P);if("undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,o=null,c=null;S.depth&&(c=S.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=S.stencil?r.Nb:r.Mb,o=S.stencil?r.xh:r.zh);const f={colorFormat:e.RGBA8,depthFormat:c,scaleFactor:h};y=new XRWebGLBinding(l,e),_=y.createProjectionLayer(f),l.updateRenderState({layers:[_]}),t.setPixelRatio(1),t.setSize(_.textureWidth,_.textureHeight,!1),A=new r.Oh(_.textureWidth,_.textureHeight,{format:r.qf,type:r.wh,depthTexture:new r.Ob(_.textureWidth,_.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:S.stencil,colorSpace:t.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:!1===_.ignoreDepthValues})}else{const n={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:h};x=new XRWebGLLayer(l,e,n),l.updateRenderState({baseLayer:x}),t.setPixelRatio(1),t.setSize(x.framebufferWidth,x.framebufferHeight,!1),A=new r.Oh(x.framebufferWidth,x.framebufferHeight,{format:r.qf,type:r.wh,colorSpace:t.outputColorSpace,stencilBuffer:S.stencil})}A.isXRRenderTarget=!0,this.setFoveation(d),m=null,c=await l.requestReferenceSpace(f),G.setContext(l),G.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==l)return l.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};const z=new r.Fh,V=new r.Fh;function j(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===l)return;let e=t.near,n=t.far;null!==M.texture&&(M.depthNear>0&&(e=M.depthNear),M.depthFar>0&&(n=M.depthFar)),L.near=k.near=I.near=e,L.far=k.far=I.far=n,F===L.near&&O===L.far||(l.updateRenderState({depthNear:L.near,depthFar:L.far}),F=L.near,O=L.far),I.layers.mask=2|t.layers.mask,k.layers.mask=4|t.layers.mask,L.layers.mask=I.layers.mask|k.layers.mask;const o=t.parent,h=L.cameras;j(L,o);for(let i=0;i<h.length;i++)j(h[i],o);2===h.length?function(t,e,n){z.setFromMatrixPosition(e.matrixWorld),V.setFromMatrixPosition(n.matrixWorld);const r=z.distanceTo(V),o=e.projectionMatrix.elements,l=n.projectionMatrix.elements,h=o[14]/(o[10]-1),c=o[14]/(o[10]+1),f=(o[9]+1)/o[5],d=(o[9]-1)/o[5],m=(o[8]-1)/o[0],v=(l[8]+1)/l[0],y=h*m,_=h*v,x=r/(-m+v),w=x*-m;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(w),t.translateZ(x),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===o[10])t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const e=h+x,n=c+x,o=y-w,l=_+(r-w),m=f*c/n*e,v=d*c/n*e;t.projectionMatrix.makePerspective(o,l,m,v,e,n),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(L,I,k):L.projectionMatrix.copy(I.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*r.lf*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,L,o)},this.getCamera=function(){return L},this.getFoveation=function(){if(null!==_||null!==x)return d},this.setFoveation=function(t){d=t,null!==_&&(_.fixedFoveation=t),null!==x&&void 0!==x.fixedFoveation&&(x.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==M.texture},this.getDepthSensingMesh=function(){return M.getMesh(L)};let H=null;const G=new o;G.setAnimationLoop((function(time,e){if(v=e.getViewerPose(m||c),w=e,null!==v){const e=v.views;null!==x&&(t.setRenderTargetFramebuffer(A,x.framebuffer),t.setRenderTarget(A));let n=!1;e.length!==L.cameras.length&&(L.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const view=e[i];let o=null;if(null!==x)o=x.getViewport(view);else{const e=y.getViewSubImage(_,view);o=e.viewport,0===i&&(t.setRenderTargetTextures(A,e.colorTexture,_.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(A))}let l=D[i];void 0===l&&(l=new r.Te,l.layers.enable(i),l.viewport=new r.Gh,D[i]=l),l.matrix.fromArray(view.transform.matrix),l.matrix.decompose(l.position,l.quaternion,l.scale),l.projectionMatrix.fromArray(view.projectionMatrix),l.projectionMatrixInverse.copy(l.projectionMatrix).invert(),l.viewport.set(o.x,o.y,o.width,o.height),0===i&&(L.matrix.copy(l.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),!0===n&&L.cameras.push(l)}const o=l.enabledFeatures;if(o&&o.includes("depth-sensing")&&"gpu-optimized"==l.depthUsage&&y){const n=y.getDepthInformation(e[0]);n&&n.isValid&&n.texture&&M.init(t,n,l.renderState)}}for(let i=0;i<T.length;i++){const t=C[i],n=T[i];null!==t&&void 0!==n&&n.update(t,e,m||c)}H&&H(time,e),e.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:e}),w=null})),this.setAnimationLoop=function(t){H=t},this.dispose=function(){}}}const qe=new r.hc,Xe=new r.Ud;function Ye(t,e){function n(map,t){!0===map.matrixAutoUpdate&&map.updateMatrix(),t.value.copy(map.matrix)}function o(t,o){t.opacity.value=o.opacity,o.color&&t.diffuse.value.copy(o.color),o.emissive&&t.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),o.map&&(t.map.value=o.map,n(o.map,t.mapTransform)),o.alphaMap&&(t.alphaMap.value=o.alphaMap,n(o.alphaMap,t.alphaMapTransform)),o.bumpMap&&(t.bumpMap.value=o.bumpMap,n(o.bumpMap,t.bumpMapTransform),t.bumpScale.value=o.bumpScale,o.side===r.B&&(t.bumpScale.value*=-1)),o.normalMap&&(t.normalMap.value=o.normalMap,n(o.normalMap,t.normalMapTransform),t.normalScale.value.copy(o.normalScale),o.side===r.B&&t.normalScale.value.negate()),o.displacementMap&&(t.displacementMap.value=o.displacementMap,n(o.displacementMap,t.displacementMapTransform),t.displacementScale.value=o.displacementScale,t.displacementBias.value=o.displacementBias),o.emissiveMap&&(t.emissiveMap.value=o.emissiveMap,n(o.emissiveMap,t.emissiveMapTransform)),o.specularMap&&(t.specularMap.value=o.specularMap,n(o.specularMap,t.specularMapTransform)),o.alphaTest>0&&(t.alphaTest.value=o.alphaTest);const l=e.get(o),h=l.envMap,c=l.envMapRotation;h&&(t.envMap.value=h,qe.copy(c),qe.x*=-1,qe.y*=-1,qe.z*=-1,h.isCubeTexture&&!1===h.isRenderTargetTexture&&(qe.y*=-1,qe.z*=-1),t.envMapRotation.value.setFromMatrix4(Xe.makeRotationFromEuler(qe)),t.flipEnvMap.value=h.isCubeTexture&&!1===h.isRenderTargetTexture?-1:1,t.reflectivity.value=o.reflectivity,t.ior.value=o.ior,t.refractionRatio.value=o.refractionRatio),o.lightMap&&(t.lightMap.value=o.lightMap,t.lightMapIntensity.value=o.lightMapIntensity,n(o.lightMap,t.lightMapTransform)),o.aoMap&&(t.aoMap.value=o.aoMap,t.aoMapIntensity.value=o.aoMapIntensity,n(o.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Object(r.ci)(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,l,h,c,f){l.isMeshBasicMaterial||l.isMeshLambertMaterial?o(t,l):l.isMeshToonMaterial?(o(t,l),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,l)):l.isMeshPhongMaterial?(o(t,l),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,l)):l.isMeshStandardMaterial?(o(t,l),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform));t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform));e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,l),l.isMeshPhysicalMaterial&&function(t,e,o){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===r.B&&t.clearcoatNormalScale.value.negate()));e.dispersion>0&&(t.dispersion.value=e.dispersion);e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=o.texture,t.transmissionSamplerSize.value.set(o.width,o.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,l,f)):l.isMeshMatcapMaterial?(o(t,l),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,l)):l.isMeshDepthMaterial?o(t,l):l.isMeshDistanceMaterial?(o(t,l),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,l)):l.isMeshNormalMaterial?o(t,l):l.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,l),l.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,l)):l.isPointsMaterial?function(t,e,r,o){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*o,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,l,h,c):l.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,l):l.isShadowMaterial?(t.color.value.copy(l.color),t.opacity.value=l.opacity):l.isShaderMaterial&&(l.uniformsNeedUpdate=!1)}}}function Ze(t,e,n,r){let o={},l={},h=[];const c=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function f(t,e,n,r){const o=t.value,l=e+"_"+n;if(void 0===r[l])return r[l]="number"==typeof o||"boolean"==typeof o?o:o.clone(),!0;{const t=r[l];if("number"==typeof o||"boolean"==typeof o){if(t!==o)return r[l]=o,!0}else if(!1===t.equals(o))return t.copy(o),!0}return!1}function d(t){const e={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function m(e){const n=e.target;n.removeEventListener("dispose",m);const r=h.indexOf(n.__bindingPointIndex);h.splice(r,1),t.deleteBuffer(o[n.id]),delete o[n.id],delete l[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,v){let y=o[n.id];void 0===y&&(!function(t){const e=t.uniforms;let n=0;const r=16;for(let i=0,t=e.length;i<t;i++){const t=Array.isArray(e[i])?e[i]:[e[i]];for(let e=0,o=t.length;e<o;e++){const o=t[e],l=Array.isArray(o.value)?o.value:[o.value];for(let t=0,e=l.length;t<e;t++){const e=d(l[t]),h=n%r,c=h%e.boundary,f=h+c;n+=c,0!==f&&r-f<e.storage&&(n+=r-f),o.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,n+=e.storage}}}const o=n%r;o>0&&(n+=r-o);t.__size=n,t.__cache={}}(n),y=function(e){const n=function(){for(let i=0;i<c;i++)if(-1===h.indexOf(i))return h.push(i),i;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),o=e.__size,l=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,o,l),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}(n),o[n.id]=y,n.addEventListener("dispose",m));const _=v.program;r.updateUBOMapping(n,_);const x=e.render.frame;l[n.id]!==x&&(!function(e){const n=o[e.id],r=e.uniforms,l=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,e=r.length;i<e;i++){const e=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=e.length;n<r;n++){const r=e[n];if(!0===f(r,i,n,l)){const e=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let o=0;for(let l=0;l<n.length;l++){const h=n[l],c=d(h);"number"==typeof h||"boolean"==typeof h?(r.__data[0]=h,t.bufferSubData(t.UNIFORM_BUFFER,e+o,r.__data)):h.isMatrix3?(r.__data[0]=h.elements[0],r.__data[1]=h.elements[1],r.__data[2]=h.elements[2],r.__data[3]=0,r.__data[4]=h.elements[3],r.__data[5]=h.elements[4],r.__data[6]=h.elements[5],r.__data[7]=0,r.__data[8]=h.elements[6],r.__data[9]=h.elements[7],r.__data[10]=h.elements[8],r.__data[11]=0):(h.toArray(r.__data,o),o+=c.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,r.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),l[n.id]=x)},dispose:function(){for(const e in o)t.deleteBuffer(o[e]);h=[],o={},l={}}}}class Ke{constructor(t={}){const{canvas:canvas=Object(r.Zh)(),context:e=null,depth:n=!0,stencil:h=!1,alpha:c=!1,antialias:f=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:m=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:E=!1,reverseDepthBuffer:A=!1}=t;let T;if(this.isWebGLRenderer=!0,null!==e){if("undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");T=e.getContextAttributes().alpha}else T=c;const C=new Uint32Array(4),P=new Int32Array(4);let R=null,I=null;const k=[],D=[];this.domElement=canvas,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=r.qg,this.toneMapping=r.xe,this.toneMappingExposure=1;const L=this;let F=!1,O=0,N=0,B=null,U=-1,z=null;const V=new r.Gh,K=new r.Gh;let $=null;const J=new r.ab(0);let Q=0,tt=canvas.width,et=canvas.height,nt=1,it=null,st=null;const ot=new r.Gh(0,0,tt,et),at=new r.Gh(0,0,tt,et);let lt=!1;const ht=new r.sc;let ut=!1,ct=!1;this.transmissionResolutionScale=1;const ft=new r.Ud,pt=new r.Ud,mt=new r.Fh,gt=new r.Gh,vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function _t(){return null===B?nt:1}let bt,xt,wt,Mt,St,Et,At,Tt,Ct,Pt,Rt,It,kt,Dt,Lt,Ft,Ot,Nt,Bt,Ut,zt,Vt,jt,Ht,Gt=e;function Wt(t,e){return canvas.getContext(t,e)}try{const t={alpha:!0,depth:n,stencil:h,antialias:f,premultipliedAlpha:d,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:E};if("setAttribute"in canvas&&canvas.setAttribute("data-engine",`three.js r${r.of}`),canvas.addEventListener("webglcontextlost",Yt,!1),canvas.addEventListener("webglcontextrestored",Zt,!1),canvas.addEventListener("webglcontextcreationerror",Kt,!1),null===Gt){const e="webgl2";if(Gt=Wt(e,t),null===Gt)throw Wt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function qt(){bt=new H(Gt),bt.init(),Vt=new He(Gt,bt),xt=new w(Gt,bt,t,Vt),wt=new Ve(Gt,bt),xt.reverseDepthBuffer&&A&&wt.buffers.depth.setReversed(!0),Mt=new X(Gt),St=new Ce,Et=new je(Gt,bt,wt,St,xt,Vt,Mt),At=new S(L),Tt=new j(L),Ct=new l(Gt),jt=new _(Gt,Ct),Pt=new G(Gt,Ct,Mt,jt),Rt=new Z(Gt,Pt,Ct,Mt),Bt=new Y(Gt,xt,Et),Ft=new M(St),It=new Te(L,At,Tt,bt,xt,jt,Ft),kt=new Ye(L,St),Dt=new ke,Lt=new Be(bt),Nt=new y(L,At,Tt,wt,Rt,T,d),Ot=new Ue(L,Rt,xt),Ht=new Ze(Gt,Mt,xt,wt),Ut=new x(Gt,bt,Mt),zt=new W(Gt,bt,Mt),Mt.programs=It.programs,L.capabilities=xt,L.extensions=bt,L.properties=St,L.renderLists=Dt,L.shadowMap=Ot,L.state=wt,L.info=Mt}qt();const Xt=new We(L,Gt);function Yt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Zt(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const t=Mt.autoReset,e=Ot.enabled,n=Ot.autoUpdate,r=Ot.needsUpdate,o=Ot.type;qt(),Mt.autoReset=t,Ot.enabled=e,Ot.autoUpdate=n,Ot.needsUpdate=r,Ot.type=o}function Kt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function $t(t){const e=t.target;e.removeEventListener("dispose",$t),function(t){(function(t){const e=St.get(t).programs;void 0!==e&&(e.forEach((function(t){It.releaseProgram(t)})),t.isShaderMaterial&&It.releaseShaderCache(t))})(t),St.remove(t)}(e)}function Jt(t,e,object){!0===t.transparent&&t.side===r.Ub&&!1===t.forceSinglePass?(t.side=r.B,t.needsUpdate=!0,he(t,e,object),t.side=r.rc,t.needsUpdate=!0,he(t,e,object),t.side=r.Ub):he(t,e,object)}this.xr=Xt,this.getContext=function(){return Gt},this.getContextAttributes=function(){return Gt.getContextAttributes()},this.forceContextLoss=function(){const t=bt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=bt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return nt},this.setPixelRatio=function(t){void 0!==t&&(nt=t,this.setSize(tt,et,!1))},this.getSize=function(t){return t.set(tt,et)},this.setSize=function(t,e,n=!0){Xt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(tt=t,et=e,canvas.width=Math.floor(t*nt),canvas.height=Math.floor(e*nt),!0===n&&(canvas.style.width=t+"px",canvas.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(tt*nt,et*nt).floor()},this.setDrawingBufferSize=function(t,e,n){tt=t,et=e,nt=n,canvas.width=Math.floor(t*n),canvas.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(V)},this.getViewport=function(t){return t.copy(ot)},this.setViewport=function(t,e,n,r){t.isVector4?ot.set(t.x,t.y,t.z,t.w):ot.set(t,e,n,r),wt.viewport(V.copy(ot).multiplyScalar(nt).round())},this.getScissor=function(t){return t.copy(at)},this.setScissor=function(t,e,n,r){t.isVector4?at.set(t.x,t.y,t.z,t.w):at.set(t,e,n,r),wt.scissor(K.copy(at).multiplyScalar(nt).round())},this.getScissorTest=function(){return lt},this.setScissorTest=function(t){wt.setScissorTest(lt=t)},this.setOpaqueSort=function(t){it=t},this.setTransparentSort=function(t){st=t},this.getClearColor=function(t){return t.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let o=0;if(t){let t=!1;if(null!==B){const e=B.texture.format;t=e===r.rf||e===r.Zf||e===r.fg}if(t){const t=B.texture.type,e=t===r.wh||t===r.zh||t===r.Ch||t===r.xh||t===r.Ah||t===r.Bh,n=Nt.getClearColor(),a=Nt.getClearAlpha(),o=n.r,g=n.g,b=n.b;e?(C[0]=o,C[1]=g,C[2]=b,C[3]=a,Gt.clearBufferuiv(Gt.COLOR,0,C)):(P[0]=o,P[1]=g,P[2]=b,P[3]=a,Gt.clearBufferiv(Gt.COLOR,0,P))}else o|=Gt.COLOR_BUFFER_BIT}e&&(o|=Gt.DEPTH_BUFFER_BIT),n&&(o|=Gt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Gt.clear(o)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){canvas.removeEventListener("webglcontextlost",Yt,!1),canvas.removeEventListener("webglcontextrestored",Zt,!1),canvas.removeEventListener("webglcontextcreationerror",Kt,!1),Nt.dispose(),Dt.dispose(),Lt.dispose(),St.dispose(),At.dispose(),Tt.dispose(),Rt.dispose(),jt.dispose(),Ht.dispose(),It.dispose(),Xt.dispose(),Xt.removeEventListener("sessionstart",te),Xt.removeEventListener("sessionend",ee),re.stop()},this.renderBufferDirect=function(t,e,n,o,object,l){null===e&&(e=vt);const h=object.isMesh&&object.matrixWorld.determinant()<0,c=function(t,e,n,o,object){!0!==e.isScene&&(e=vt);Et.resetTextureUnits();const l=e.fog,h=o.isMeshStandardMaterial?e.environment:null,c=null===B?L.outputColorSpace:!0===B.isXRRenderTarget?B.texture.colorSpace:r.Dd,f=(o.isMeshStandardMaterial?Tt:At).get(o.envMap||h),d=!0===o.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,m=!!n.attributes.tangent&&(!!o.normalMap||o.anisotropy>0),v=!!n.morphAttributes.position,y=!!n.morphAttributes.normal,_=!!n.morphAttributes.color;let x=r.xe;o.toneMapped&&(null!==B&&!0!==B.isXRRenderTarget||(x=L.toneMapping));const w=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,M=void 0!==w?w.length:0,S=St.get(o),E=I.state.lights;if(!0===ut&&(!0===ct||t!==z)){const e=t===z&&o.id===U;Ft.setState(o,t,e)}let A=!1;o.version===S.__version?S.needsLights&&S.lightsStateVersion!==E.state.version||S.outputColorSpace!==c||object.isBatchedMesh&&!1===S.batching?A=!0:object.isBatchedMesh||!0!==S.batching?object.isBatchedMesh&&!0===S.batchingColor&&null===object.colorTexture||object.isBatchedMesh&&!1===S.batchingColor&&null!==object.colorTexture||object.isInstancedMesh&&!1===S.instancing?A=!0:object.isInstancedMesh||!0!==S.instancing?object.isSkinnedMesh&&!1===S.skinning?A=!0:object.isSkinnedMesh||!0!==S.skinning?object.isInstancedMesh&&!0===S.instancingColor&&null===object.instanceColor||object.isInstancedMesh&&!1===S.instancingColor&&null!==object.instanceColor||object.isInstancedMesh&&!0===S.instancingMorph&&null===object.morphTexture||object.isInstancedMesh&&!1===S.instancingMorph&&null!==object.morphTexture||S.envMap!==f||!0===o.fog&&S.fog!==l?A=!0:void 0===S.numClippingPlanes||S.numClippingPlanes===Ft.numPlanes&&S.numIntersection===Ft.numIntersection?(S.vertexAlphas!==d||S.vertexTangents!==m||S.morphTargets!==v||S.morphNormals!==y||S.morphColors!==_||S.toneMapping!==x||S.morphTargetsCount!==M)&&(A=!0):A=!0:A=!0:A=!0:A=!0:(A=!0,S.__version=o.version);let T=S.currentProgram;!0===A&&(T=he(o,e,object));let C=!1,P=!1,R=!1;const k=T.getUniforms(),D=S.uniforms;wt.useProgram(T.program)&&(C=!0,P=!0,R=!0);o.id!==U&&(U=o.id,P=!0);if(C||z!==t){wt.buffers.depth.getReversed()?(ft.copy(t.projectionMatrix),Object(r.fi)(ft),Object(r.gi)(ft),k.setValue(Gt,"projectionMatrix",ft)):k.setValue(Gt,"projectionMatrix",t.projectionMatrix),k.setValue(Gt,"viewMatrix",t.matrixWorldInverse);const e=k.map.cameraPosition;void 0!==e&&e.setValue(Gt,mt.setFromMatrixPosition(t.matrixWorld)),xt.logarithmicDepthBuffer&&k.setValue(Gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(o.isMeshPhongMaterial||o.isMeshToonMaterial||o.isMeshLambertMaterial||o.isMeshBasicMaterial||o.isMeshStandardMaterial||o.isShaderMaterial)&&k.setValue(Gt,"isOrthographic",!0===t.isOrthographicCamera),z!==t&&(z=t,P=!0,R=!0)}if(object.isSkinnedMesh){k.setOptional(Gt,object,"bindMatrix"),k.setOptional(Gt,object,"bindMatrixInverse");const t=object.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),k.setValue(Gt,"boneTexture",t.boneTexture,Et))}object.isBatchedMesh&&(k.setOptional(Gt,object,"batchingTexture"),k.setValue(Gt,"batchingTexture",object._matricesTexture,Et),k.setOptional(Gt,object,"batchingIdTexture"),k.setValue(Gt,"batchingIdTexture",object._indirectTexture,Et),k.setOptional(Gt,object,"batchingColorTexture"),null!==object._colorsTexture&&k.setValue(Gt,"batchingColorTexture",object._colorsTexture,Et));const F=n.morphAttributes;void 0===F.position&&void 0===F.normal&&void 0===F.color||Bt.update(object,n,T);(P||S.receiveShadow!==object.receiveShadow)&&(S.receiveShadow=object.receiveShadow,k.setValue(Gt,"receiveShadow",object.receiveShadow));o.isMeshGouraudMaterial&&null!==o.envMap&&(D.envMap.value=f,D.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1);o.isMeshStandardMaterial&&null===o.envMap&&null!==e.environment&&(D.envMapIntensity.value=e.environmentIntensity);P&&(k.setValue(Gt,"toneMappingExposure",L.toneMappingExposure),S.needsLights&&(N=R,(O=D).ambientLightColor.needsUpdate=N,O.lightProbe.needsUpdate=N,O.directionalLights.needsUpdate=N,O.directionalLightShadows.needsUpdate=N,O.pointLights.needsUpdate=N,O.pointLightShadows.needsUpdate=N,O.spotLights.needsUpdate=N,O.spotLightShadows.needsUpdate=N,O.rectAreaLights.needsUpdate=N,O.hemisphereLights.needsUpdate=N),l&&!0===o.fog&&kt.refreshFogUniforms(D,l),kt.refreshMaterialUniforms(D,o,nt,et,I.state.transmissionRenderTarget[t.id]),ne.upload(Gt,ue(S),D,Et));var O,N;o.isShaderMaterial&&!0===o.uniformsNeedUpdate&&(ne.upload(Gt,ue(S),D,Et),o.uniformsNeedUpdate=!1);o.isSpriteMaterial&&k.setValue(Gt,"center",object.center);if(k.setValue(Gt,"modelViewMatrix",object.modelViewMatrix),k.setValue(Gt,"normalMatrix",object.normalMatrix),k.setValue(Gt,"modelMatrix",object.matrixWorld),o.isShaderMaterial||o.isRawShaderMaterial){const t=o.uniformsGroups;for(let i=0,e=t.length;i<e;i++){const e=t[i];Ht.update(e,T),Ht.bind(e,T)}}return T}(t,e,n,o,object);wt.setMaterial(o,h);let f=n.index,d=1;if(!0===o.wireframe){if(f=Pt.getWireframeAttribute(n),void 0===f)return;d=2}const m=n.drawRange,v=n.attributes.position;let y=m.start*d,_=(m.start+m.count)*d;null!==l&&(y=Math.max(y,l.start*d),_=Math.min(_,(l.start+l.count)*d)),null!==f?(y=Math.max(y,0),_=Math.min(_,f.count)):null!=v&&(y=Math.max(y,0),_=Math.min(_,v.count));const x=_-y;if(x<0||x===1/0)return;let w;jt.setup(object,o,c,n,f);let M=Ut;if(null!==f&&(w=Ct.get(f),M=zt,M.setIndex(w)),object.isMesh)!0===o.wireframe?(wt.setLineWidth(o.wireframeLinewidth*_t()),M.setMode(Gt.LINES)):M.setMode(Gt.TRIANGLES);else if(object.isLine){let t=o.linewidth;void 0===t&&(t=1),wt.setLineWidth(t*_t()),object.isLineSegments?M.setMode(Gt.LINES):object.isLineLoop?M.setMode(Gt.LINE_LOOP):M.setMode(Gt.LINE_STRIP)}else object.isPoints?M.setMode(Gt.POINTS):object.isSprite&&M.setMode(Gt.TRIANGLES);if(object.isBatchedMesh)if(null!==object._multiDrawInstances)M.renderMultiDrawInstances(object._multiDrawStarts,object._multiDrawCounts,object._multiDrawCount,object._multiDrawInstances);else if(bt.get("WEBGL_multi_draw"))M.renderMultiDraw(object._multiDrawStarts,object._multiDrawCounts,object._multiDrawCount);else{const t=object._multiDrawStarts,e=object._multiDrawCounts,n=object._multiDrawCount,r=f?Ct.get(f).bytesPerElement:1,l=St.get(o).currentProgram.getUniforms();for(let i=0;i<n;i++)l.setValue(Gt,"_gl_DrawID",i),M.render(t[i]/r,e[i])}else if(object.isInstancedMesh)M.renderInstances(y,x,object.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);M.renderInstances(y,x,e)}else M.render(y,x)},this.compile=function(t,e,n=null){null===n&&(n=t),I=Lt.get(n),I.init(e),D.push(I),n.traverseVisible((function(object){object.isLight&&object.layers.test(e.layers)&&(I.pushLight(object),object.castShadow&&I.pushShadow(object))})),t!==n&&t.traverseVisible((function(object){object.isLight&&object.layers.test(e.layers)&&(I.pushLight(object),object.castShadow&&I.pushShadow(object))})),I.setupLights();const r=new Set;return t.traverse((function(object){if(!(object.isMesh||object.isPoints||object.isLine||object.isSprite))return;const t=object.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const e=t[i];Jt(e,n,object),r.add(e)}else Jt(t,n,object),r.add(t)})),D.pop(),I=null,r},this.compileAsync=function(t,e,n=null){const r=this.compile(t,e,n);return new Promise((e=>{function n(){r.forEach((function(t){St.get(t).currentProgram.isReady()&&r.delete(t)})),0!==r.size?setTimeout(n,10):e(t)}null!==bt.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Qt=null;function te(){re.stop()}function ee(){re.start()}const re=new o;function ie(object,t,e,n){if(!1===object.visible)return;if(object.layers.test(t.layers))if(object.isGroup)e=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(t);else if(object.isLight)I.pushLight(object),object.castShadow&&I.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||ht.intersectsSprite(object)){n&&gt.setFromMatrixPosition(object.matrixWorld).applyMatrix4(pt);const t=Rt.update(object),r=object.material;r.visible&&R.push(object,t,r,e,gt.z,null)}}else if((object.isMesh||object.isLine||object.isPoints)&&(!object.frustumCulled||ht.intersectsObject(object))){const t=Rt.update(object),r=object.material;if(n&&(void 0!==object.boundingSphere?(null===object.boundingSphere&&object.computeBoundingSphere(),gt.copy(object.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),gt.copy(t.boundingSphere.center)),gt.applyMatrix4(object.matrixWorld).applyMatrix4(pt)),Array.isArray(r)){const n=t.groups;for(let i=0,o=n.length;i<o;i++){const o=n[i],l=r[o.materialIndex];l&&l.visible&&R.push(object,t,l,e,gt.z,o)}}else r.visible&&R.push(object,t,r,e,gt.z,null)}const r=object.children;for(let i=0,o=r.length;i<o;i++)ie(r[i],t,e,n)}function se(t,e,n,r){const o=t.opaque,l=t.transmissive,h=t.transparent;I.setupLightsView(n),!0===ut&&Ft.setGlobalState(L.clippingPlanes,n),r&&wt.viewport(V.copy(r)),o.length>0&&ae(o,e,n),l.length>0&&ae(l,e,n),h.length>0&&ae(h,e,n),wt.buffers.depth.setTest(!0),wt.buffers.depth.setMask(!0),wt.buffers.color.setMask(!0),wt.setPolygonOffset(!1)}function oe(t,e,n,o){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===I.state.transmissionRenderTarget[o.id]&&(I.state.transmissionRenderTarget[o.id]=new r.Oh(1,1,{generateMipmaps:!0,type:bt.has("EXT_color_buffer_half_float")||bt.has("EXT_color_buffer_float")?r.Ec:r.wh,minFilter:r.Bd,samples:4,stencilBuffer:h,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:r.cb.workingColorSpace}));const l=I.state.transmissionRenderTarget[o.id],c=o.viewport||V;l.setSize(c.z*L.transmissionResolutionScale,c.w*L.transmissionResolutionScale);const f=L.getRenderTarget();L.setRenderTarget(l),L.getClearColor(J),Q=L.getClearAlpha(),Q<1&&L.setClearColor(16777215,.5),L.clear(),yt&&Nt.render(n);const d=L.toneMapping;L.toneMapping=r.xe;const m=o.viewport;if(void 0!==o.viewport&&(o.viewport=void 0),I.setupLightsView(o),!0===ut&&Ft.setGlobalState(L.clippingPlanes,o),ae(t,n,o),Et.updateMultisampleRenderTarget(l),Et.updateRenderTargetMipmap(l),!1===bt.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let i=0,l=e.length;i<l;i++){const l=e[i],object=l.object,h=l.geometry,c=l.material,f=l.group;if(c.side===r.Ub&&object.layers.test(o.layers)){const e=c.side;c.side=r.B,c.needsUpdate=!0,le(object,n,o,h,c,f),c.side=e,c.needsUpdate=!0,t=!0}}!0===t&&(Et.updateMultisampleRenderTarget(l),Et.updateRenderTargetMipmap(l))}L.setRenderTarget(f),L.setClearColor(J,Q),void 0!==m&&(o.viewport=m),L.toneMapping=d}function ae(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],object=o.object,l=o.geometry,h=null===r?o.material:r,c=o.group;object.layers.test(n.layers)&&le(object,e,n,l,h,c)}}function le(object,t,e,n,o,l){object.onBeforeRender(L,t,e,n,o,l),object.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),o.onBeforeRender(L,t,e,n,object,l),!0===o.transparent&&o.side===r.Ub&&!1===o.forceSinglePass?(o.side=r.B,o.needsUpdate=!0,L.renderBufferDirect(e,t,n,o,object,l),o.side=r.rc,o.needsUpdate=!0,L.renderBufferDirect(e,t,n,o,object,l),o.side=r.Ub):L.renderBufferDirect(e,t,n,o,object,l),object.onAfterRender(L,t,e,n,o,l)}function he(t,e,object){!0!==e.isScene&&(e=vt);const n=St.get(t),r=I.state.lights,o=I.state.shadowsArray,l=r.state.version,h=It.getParameters(t,r.state,o,e,object),c=It.getProgramCacheKey(h);let f=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?Tt:At).get(t.envMap||n.environment),n.envMapRotation=null!==n.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===f&&(t.addEventListener("dispose",$t),f=new Map,n.programs=f);let d=f.get(c);if(void 0!==d){if(n.currentProgram===d&&n.lightsStateVersion===l)return ce(t,h),d}else h.uniforms=It.getUniforms(t),t.onBeforeCompile(h,L),d=It.acquireProgram(h,c),f.set(c,d),n.uniforms=h.uniforms;const m=n.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(m.clippingPlanes=Ft.uniform),ce(t,h),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=l,n.needsLights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.directionalLightShadows.value=r.state.directionalShadow,m.spotLights.value=r.state.spot,m.spotLightShadows.value=r.state.spotShadow,m.rectAreaLights.value=r.state.rectArea,m.ltc_1.value=r.state.rectAreaLTC1,m.ltc_2.value=r.state.rectAreaLTC2,m.pointLights.value=r.state.point,m.pointLightShadows.value=r.state.pointShadow,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotLightMatrix.value=r.state.spotLightMatrix,m.spotLightMap.value=r.state.spotLightMap,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix),n.currentProgram=d,n.uniformsList=null,d}function ue(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=ne.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function ce(t,e){const n=St.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.batchingColor=e.batchingColor,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}re.setAnimationLoop((function(time){Qt&&Qt(time)})),"undefined"!=typeof self&&re.setContext(self),this.setAnimationLoop=function(t){Qt=t,Xt.setAnimationLoop(t),null===t?re.stop():re.start()},Xt.addEventListener("sessionstart",te),Xt.addEventListener("sessionend",ee),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===F)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Xt.enabled&&!0===Xt.isPresenting&&(!0===Xt.cameraAutoUpdate&&Xt.updateCamera(e),e=Xt.getCamera()),!0===t.isScene&&t.onBeforeRender(L,t,e,B),I=Lt.get(t,D.length),I.init(e),D.push(I),pt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),ht.setFromProjectionMatrix(pt),ct=this.localClippingEnabled,ut=Ft.init(this.clippingPlanes,ct),R=Dt.get(t,k.length),R.init(),k.push(R),!0===Xt.enabled&&!0===Xt.isPresenting){const t=L.xr.getDepthSensingMesh();null!==t&&ie(t,e,-1/0,L.sortObjects)}ie(t,e,0,L.sortObjects),R.finish(),!0===L.sortObjects&&R.sort(it,st),yt=!1===Xt.enabled||!1===Xt.isPresenting||!1===Xt.hasDepthSensing(),yt&&Nt.addToRenderList(R,t),this.info.render.frame++,!0===ut&&Ft.beginShadows();const n=I.state.shadowsArray;Ot.render(n,t,e),!0===ut&&Ft.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=R.opaque,o=R.transmissive;if(I.setupLights(),e.isArrayCamera){const n=e.cameras;if(o.length>0)for(let i=0,e=n.length;i<e;i++){oe(r,o,t,n[i])}yt&&Nt.render(t);for(let i=0,e=n.length;i<e;i++){const e=n[i];se(R,t,e,e.viewport)}}else o.length>0&&oe(r,o,t,e),yt&&Nt.render(t),se(R,t,e);null!==B&&0===N&&(Et.updateMultisampleRenderTarget(B),Et.updateRenderTargetMipmap(B)),!0===t.isScene&&t.onAfterRender(L,t,e),jt.resetDefaultState(),U=-1,z=null,D.pop(),D.length>0?(I=D[D.length-1],!0===ut&&Ft.setGlobalState(L.clippingPlanes,I.state.camera)):I=null,k.pop(),R=k.length>0?k[k.length-1]:null},this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(t,e,n){St.get(t.texture).__webglTexture=e,St.get(t.depthTexture).__webglTexture=n;const r=St.get(t);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===bt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const n=St.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e};const fe=Gt.createFramebuffer();this.setRenderTarget=function(t,e=0,n=0){B=t,O=e,N=n;let r=!0,o=null,l=!1,h=!1;if(t){const c=St.get(t);if(void 0!==c.__useDefaultFramebuffer)wt.bindFramebuffer(Gt.FRAMEBUFFER,null),r=!1;else if(void 0===c.__webglFramebuffer)Et.setupRenderTarget(t);else if(c.__hasExternalTextures)Et.rebindTextures(t,St.get(t.texture).__webglTexture,St.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){const e=t.depthTexture;if(c.__boundDepthTexture!==e){if(null!==e&&St.has(e)&&(t.width!==e.image.width||t.height!==e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Et.setupDepthRenderbuffer(t)}}const f=t.texture;(f.isData3DTexture||f.isDataArrayTexture||f.isCompressedArrayTexture)&&(h=!0);const d=St.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(o=Array.isArray(d[e])?d[e][n]:d[e],l=!0):o=t.samples>0&&!1===Et.useMultisampledRTT(t)?St.get(t).__webglMultisampledFramebuffer:Array.isArray(d)?d[n]:d,V.copy(t.viewport),K.copy(t.scissor),$=t.scissorTest}else V.copy(ot).multiplyScalar(nt).floor(),K.copy(at).multiplyScalar(nt).floor(),$=lt;0!==n&&(o=fe);if(wt.bindFramebuffer(Gt.FRAMEBUFFER,o)&&r&&wt.drawBuffers(t,o),wt.viewport(V),wt.scissor(K),wt.setScissorTest($),l){const r=St.get(t.texture);Gt.framebufferTexture2D(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(h){const r=St.get(t.texture),o=e;Gt.framebufferTextureLayer(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,r.__webglTexture,n,o)}else if(null!==t&&0!==n){const e=St.get(t.texture);Gt.framebufferTexture2D(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,e.__webglTexture,n)}U=-1},this.readRenderTargetPixels=function(t,e,n,r,o,l,h){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let c=St.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==h&&(c=c[h]),c){wt.bindFramebuffer(Gt.FRAMEBUFFER,c);try{const h=t.texture,c=h.format,f=h.type;if(!xt.textureFormatReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!xt.textureTypeReadable(f))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-o&&Gt.readPixels(e,n,r,o,Vt.convert(c),Vt.convert(f),l)}finally{const t=null!==B?St.get(B).__webglFramebuffer:null;wt.bindFramebuffer(Gt.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,n,o,l,h,c){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let f=St.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==c&&(f=f[c]),f){const c=t.texture,d=c.format,m=c.type;if(!xt.textureFormatReadable(d))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xt.textureTypeReadable(m))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(e>=0&&e<=t.width-o&&n>=0&&n<=t.height-l){wt.bindFramebuffer(Gt.FRAMEBUFFER,f);const t=Gt.createBuffer();Gt.bindBuffer(Gt.PIXEL_PACK_BUFFER,t),Gt.bufferData(Gt.PIXEL_PACK_BUFFER,h.byteLength,Gt.STREAM_READ),Gt.readPixels(e,n,o,l,Vt.convert(d),Vt.convert(m),0);const c=null!==B?St.get(B).__webglFramebuffer:null;wt.bindFramebuffer(Gt.FRAMEBUFFER,c);const v=Gt.fenceSync(Gt.SYNC_GPU_COMMANDS_COMPLETE,0);return Gt.flush(),await Object(r.ei)(Gt,v,4),Gt.bindBuffer(Gt.PIXEL_PACK_BUFFER,t),Gt.getBufferSubData(Gt.PIXEL_PACK_BUFFER,0,h),Gt.deleteBuffer(t),Gt.deleteSync(v),h}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,e=null,n=0){!0!==t.isTexture&&(Object(r.hi)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),e=arguments[0]||null,t=arguments[1]);const o=Math.pow(2,-n),l=Math.floor(t.image.width*o),h=Math.floor(t.image.height*o),c=null!==e?e.x:0,f=null!==e?e.y:0;Et.setTexture2D(t,0),Gt.copyTexSubImage2D(Gt.TEXTURE_2D,n,0,0,c,f,l,h),wt.unbindTexture()};const pe=Gt.createFramebuffer(),de=Gt.createFramebuffer();this.copyTextureToTexture=function(t,e,n=null,o=null,l=0,h=null){let c,f,d,m,v,y,_,x,w;!0!==t.isTexture&&(Object(r.hi)("WebGLRenderer: copyTextureToTexture function signature has changed."),o=arguments[0]||null,t=arguments[1],e=arguments[2],h=arguments[3]||0,n=null),null===h&&(0!==l?(Object(r.hi)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),h=l,l=0):h=0);const image=t.isCompressedTexture?t.mipmaps[h]:t.image;if(null!==n)c=n.max.x-n.min.x,f=n.max.y-n.min.y,d=n.isBox3?n.max.z-n.min.z:1,m=n.min.x,v=n.min.y,y=n.isBox3?n.min.z:0;else{const e=Math.pow(2,-l);c=Math.floor(image.width*e),f=Math.floor(image.height*e),d=t.isDataArrayTexture?image.depth:t.isData3DTexture?Math.floor(image.depth*e):1,m=0,v=0,y=0}null!==o?(_=o.x,x=o.y,w=o.z):(_=0,x=0,w=0);const M=Vt.convert(e.format),S=Vt.convert(e.type);let E;e.isData3DTexture?(Et.setTexture3D(e,0),E=Gt.TEXTURE_3D):e.isDataArrayTexture||e.isCompressedArrayTexture?(Et.setTexture2DArray(e,0),E=Gt.TEXTURE_2D_ARRAY):(Et.setTexture2D(e,0),E=Gt.TEXTURE_2D),Gt.pixelStorei(Gt.UNPACK_FLIP_Y_WEBGL,e.flipY),Gt.pixelStorei(Gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Gt.pixelStorei(Gt.UNPACK_ALIGNMENT,e.unpackAlignment);const A=Gt.getParameter(Gt.UNPACK_ROW_LENGTH),T=Gt.getParameter(Gt.UNPACK_IMAGE_HEIGHT),C=Gt.getParameter(Gt.UNPACK_SKIP_PIXELS),P=Gt.getParameter(Gt.UNPACK_SKIP_ROWS),R=Gt.getParameter(Gt.UNPACK_SKIP_IMAGES);Gt.pixelStorei(Gt.UNPACK_ROW_LENGTH,image.width),Gt.pixelStorei(Gt.UNPACK_IMAGE_HEIGHT,image.height),Gt.pixelStorei(Gt.UNPACK_SKIP_PIXELS,m),Gt.pixelStorei(Gt.UNPACK_SKIP_ROWS,v),Gt.pixelStorei(Gt.UNPACK_SKIP_IMAGES,y);const I=t.isDataArrayTexture||t.isData3DTexture,k=e.isDataArrayTexture||e.isData3DTexture;if(t.isDepthTexture){const n=St.get(t),r=St.get(e),o=St.get(n.__renderTarget),M=St.get(r.__renderTarget);wt.bindFramebuffer(Gt.READ_FRAMEBUFFER,o.__webglFramebuffer),wt.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,M.__webglFramebuffer);for(let i=0;i<d;i++)I&&(Gt.framebufferTextureLayer(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,St.get(t).__webglTexture,l,y+i),Gt.framebufferTextureLayer(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,St.get(e).__webglTexture,h,w+i)),Gt.blitFramebuffer(m,v,c,f,_,x,c,f,Gt.DEPTH_BUFFER_BIT,Gt.NEAREST);wt.bindFramebuffer(Gt.READ_FRAMEBUFFER,null),wt.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,null)}else if(0!==l||t.isRenderTargetTexture||St.has(t)){const n=St.get(t),r=St.get(e);wt.bindFramebuffer(Gt.READ_FRAMEBUFFER,pe),wt.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,de);for(let i=0;i<d;i++)I?Gt.framebufferTextureLayer(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,n.__webglTexture,l,y+i):Gt.framebufferTexture2D(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,n.__webglTexture,l),k?Gt.framebufferTextureLayer(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,r.__webglTexture,h,w+i):Gt.framebufferTexture2D(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,r.__webglTexture,h),0!==l?Gt.blitFramebuffer(m,v,c,f,_,x,c,f,Gt.COLOR_BUFFER_BIT,Gt.NEAREST):k?Gt.copyTexSubImage3D(E,h,_,x,w+i,m,v,c,f):Gt.copyTexSubImage2D(E,h,_,x,m,v,c,f);wt.bindFramebuffer(Gt.READ_FRAMEBUFFER,null),wt.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,null)}else k?t.isDataTexture||t.isData3DTexture?Gt.texSubImage3D(E,h,_,x,w,c,f,d,M,S,image.data):e.isCompressedArrayTexture?Gt.compressedTexSubImage3D(E,h,_,x,w,c,f,d,M,image.data):Gt.texSubImage3D(E,h,_,x,w,c,f,d,M,S,image):t.isDataTexture?Gt.texSubImage2D(Gt.TEXTURE_2D,h,_,x,c,f,M,S,image.data):t.isCompressedTexture?Gt.compressedTexSubImage2D(Gt.TEXTURE_2D,h,_,x,image.width,image.height,M,image.data):Gt.texSubImage2D(Gt.TEXTURE_2D,h,_,x,c,f,M,S,image);Gt.pixelStorei(Gt.UNPACK_ROW_LENGTH,A),Gt.pixelStorei(Gt.UNPACK_IMAGE_HEIGHT,T),Gt.pixelStorei(Gt.UNPACK_SKIP_PIXELS,C),Gt.pixelStorei(Gt.UNPACK_SKIP_ROWS,P),Gt.pixelStorei(Gt.UNPACK_SKIP_IMAGES,R),0===h&&e.generateMipmaps&&Gt.generateMipmap(E),wt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n=null,o=null,l=0){return!0!==t.isTexture&&(Object(r.hi)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,o=arguments[1]||null,t=arguments[2],e=arguments[3],l=arguments[4]||0),Object(r.hi)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(t,e,n,o,l)},this.initRenderTarget=function(t){void 0===St.get(t).__webglFramebuffer&&Et.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?Et.setTextureCube(t,0):t.isData3DTexture?Et.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?Et.setTexture2DArray(t,0):Et.setTexture2D(t,0),wt.unbindTexture()},this.resetState=function(){O=0,N=0,B=null,wt.reset(),jt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return r.Mh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=r.cb._getDrawingBufferColorSpace(t),e.unpackColorSpace=r.cb._getUnpackColorSpace()}}},814:function(t,e,n){t.exports={chunk:n(4160),compact:n(4161),concat:n(4162),difference:n(4163),differenceBy:n(4164),differenceWith:n(4165),drop:n(4166),dropRight:n(4167),dropRightWhile:n(4168),dropWhile:n(4169),fill:n(4170),findIndex:n(4174),findLastIndex:n(4175),first:n(4176),flatten:n(1641),flattenDeep:n(4177),flattenDepth:n(4178),fromPairs:n(4179),head:n(1802),indexOf:n(4180),initial:n(4181),intersection:n(4182),intersectionBy:n(4183),intersectionWith:n(4184),join:n(4185),last:n(400),lastIndexOf:n(4186),nth:n(4188),pull:n(4190),pullAll:n(1803),pullAllBy:n(4192),pullAllWith:n(4193),pullAt:n(4194),remove:n(4199),reverse:n(4200),slice:n(4201),sortedIndex:n(4202),sortedIndexBy:n(4203),sortedIndexOf:n(4204),sortedLastIndex:n(4205),sortedLastIndexBy:n(4206),sortedLastIndexOf:n(4207),sortedUniq:n(4208),sortedUniqBy:n(4209),tail:n(4210),take:n(4211),takeRight:n(4212),takeRightWhile:n(4213),takeWhile:n(4214),union:n(4215),unionBy:n(4217),unionWith:n(4218),uniq:n(4219),uniqBy:n(4220),uniqWith:n(4221),unzip:n(1095),unzipWith:n(1806),without:n(4222),xor:n(4223),xorBy:n(4224),xorWith:n(4225),zip:n(4226),zipObject:n(4227),zipObjectDeep:n(4228),zipWith:n(4230)}},956:function(t,e,n){var r=n(670);t.exports=function(t,e,n){return void 0===n?r(t,e,!1):r(t,n,!1!==e)}},996:function(t,e,n){var r=n(718),o=n(3548),l=n(3549),h=n(3550),c=n(3551),f=n(3552);function d(t){var data=this.__data__=new r(t);this.size=data.size}d.prototype.clear=o,d.prototype.delete=l,d.prototype.get=h,d.prototype.has=c,d.prototype.set=f,t.exports=d},997:function(t,e,n){var r=n(496)(n(287),"Map");t.exports=r},998:function(t,e,n){var r=n(3559),o=n(3566),l=n(3568),h=n(3569),c=n(3570);function f(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=o,f.prototype.get=l,f.prototype.has=h,f.prototype.set=c,t.exports=f},999:function(t,e,n){var r=n(3572),o=n(418),l=Object.prototype,h=l.hasOwnProperty,c=l.propertyIsEnumerable,f=r(function(){return arguments}())?r:function(t){return o(t)&&h.call(t,"callee")&&!c.call(t,"callee")};t.exports=f}}]);